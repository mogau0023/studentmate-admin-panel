var p4=Object.defineProperty;var zk=s=>{throw TypeError(s)};var f4=(s,e,t)=>e in s?p4(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var ne=(s,e,t)=>f4(s,typeof e!="symbol"?e+"":e,t),mE=(s,e,t)=>e.has(s)||zk("Cannot "+t);var c=(s,e,t)=>(mE(s,e,"read from private field"),t?t.call(s):e.get(s)),F=(s,e,t)=>e.has(s)?zk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),_=(s,e,t,n)=>(mE(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),I=(s,e,t)=>(mE(s,e,"access private method"),t);var Mn=(s,e,t,n)=>({set _(r){_(s,e,r,t)},get _(){return c(s,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function m4(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var gE={exports:{}},J2={},yE={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hk;function g4(){if(Hk)return Je;Hk=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function w(X){return X===null||typeof X!="object"?null:(X=g&&X[g]||X["@@iterator"],typeof X=="function"?X:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function T(X,re,se){this.props=X,this.context=re,this.refs=C,this.updater=se||A}T.prototype.isReactComponent={},T.prototype.setState=function(X,re){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,re,"setState")},T.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function P(){}P.prototype=T.prototype;function O(X,re,se){this.props=X,this.context=re,this.refs=C,this.updater=se||A}var N=O.prototype=new P;N.constructor=O,S(N,T.prototype),N.isPureReactComponent=!0;var j=Array.isArray,z=Object.prototype.hasOwnProperty,W={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function R(X,re,se){var we,be={},De=null,Me=null;if(re!=null)for(we in re.ref!==void 0&&(Me=re.ref),re.key!==void 0&&(De=""+re.key),re)z.call(re,we)&&!D.hasOwnProperty(we)&&(be[we]=re[we]);var et=arguments.length-2;if(et===1)be.children=se;else if(1<et){for(var ft=Array(et),fn=0;fn<et;fn++)ft[fn]=arguments[fn+2];be.children=ft}if(X&&X.defaultProps)for(we in et=X.defaultProps,et)be[we]===void 0&&(be[we]=et[we]);return{$$typeof:s,type:X,key:De,ref:Me,props:be,_owner:W.current}}function L(X,re){return{$$typeof:s,type:X.type,key:re,ref:X.ref,props:X.props,_owner:X._owner}}function U(X){return typeof X=="object"&&X!==null&&X.$$typeof===s}function V(X){var re={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(se){return re[se]})}var G=/\/+/g;function $(X,re){return typeof X=="object"&&X!==null&&X.key!=null?V(""+X.key):re.toString(36)}function ye(X,re,se,we,be){var De=typeof X;(De==="undefined"||De==="boolean")&&(X=null);var Me=!1;if(X===null)Me=!0;else switch(De){case"string":case"number":Me=!0;break;case"object":switch(X.$$typeof){case s:case e:Me=!0}}if(Me)return Me=X,be=be(Me),X=we===""?"."+$(Me,0):we,j(be)?(se="",X!=null&&(se=X.replace(G,"$&/")+"/"),ye(be,re,se,"",function(fn){return fn})):be!=null&&(U(be)&&(be=L(be,se+(!be.key||Me&&Me.key===be.key?"":(""+be.key).replace(G,"$&/")+"/")+X)),re.push(be)),1;if(Me=0,we=we===""?".":we+":",j(X))for(var et=0;et<X.length;et++){De=X[et];var ft=we+$(De,et);Me+=ye(De,re,se,ft,be)}else if(ft=w(X),typeof ft=="function")for(X=ft.call(X),et=0;!(De=X.next()).done;)De=De.value,ft=we+$(De,et++),Me+=ye(De,re,se,ft,be);else if(De==="object")throw re=String(X),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return Me}function ce(X,re,se){if(X==null)return X;var we=[],be=0;return ye(X,we,"","",function(De){return re.call(se,De,be++)}),we}function he(X){if(X._status===-1){var re=X._result;re=re(),re.then(function(se){(X._status===0||X._status===-1)&&(X._status=1,X._result=se)},function(se){(X._status===0||X._status===-1)&&(X._status=2,X._result=se)}),X._status===-1&&(X._status=0,X._result=re)}if(X._status===1)return X._result.default;throw X._result}var ge={current:null},ae={transition:null},_e={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:ae,ReactCurrentOwner:W};function fe(){throw Error("act(...) is not supported in production builds of React.")}return Je.Children={map:ce,forEach:function(X,re,se){ce(X,function(){re.apply(this,arguments)},se)},count:function(X){var re=0;return ce(X,function(){re++}),re},toArray:function(X){return ce(X,function(re){return re})||[]},only:function(X){if(!U(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Je.Component=T,Je.Fragment=t,Je.Profiler=r,Je.PureComponent=O,Je.StrictMode=n,Je.Suspense=d,Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,Je.act=fe,Je.cloneElement=function(X,re,se){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var we=S({},X.props),be=X.key,De=X.ref,Me=X._owner;if(re!=null){if(re.ref!==void 0&&(De=re.ref,Me=W.current),re.key!==void 0&&(be=""+re.key),X.type&&X.type.defaultProps)var et=X.type.defaultProps;for(ft in re)z.call(re,ft)&&!D.hasOwnProperty(ft)&&(we[ft]=re[ft]===void 0&&et!==void 0?et[ft]:re[ft])}var ft=arguments.length-2;if(ft===1)we.children=se;else if(1<ft){et=Array(ft);for(var fn=0;fn<ft;fn++)et[fn]=arguments[fn+2];we.children=et}return{$$typeof:s,type:X.type,key:be,ref:De,props:we,_owner:Me}},Je.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:i,_context:X},X.Consumer=X},Je.createElement=R,Je.createFactory=function(X){var re=R.bind(null,X);return re.type=X,re},Je.createRef=function(){return{current:null}},Je.forwardRef=function(X){return{$$typeof:u,render:X}},Je.isValidElement=U,Je.lazy=function(X){return{$$typeof:f,_payload:{_status:-1,_result:X},_init:he}},Je.memo=function(X,re){return{$$typeof:h,type:X,compare:re===void 0?null:re}},Je.startTransition=function(X){var re=ae.transition;ae.transition={};try{X()}finally{ae.transition=re}},Je.unstable_act=fe,Je.useCallback=function(X,re){return ge.current.useCallback(X,re)},Je.useContext=function(X){return ge.current.useContext(X)},Je.useDebugValue=function(){},Je.useDeferredValue=function(X){return ge.current.useDeferredValue(X)},Je.useEffect=function(X,re){return ge.current.useEffect(X,re)},Je.useId=function(){return ge.current.useId()},Je.useImperativeHandle=function(X,re,se){return ge.current.useImperativeHandle(X,re,se)},Je.useInsertionEffect=function(X,re){return ge.current.useInsertionEffect(X,re)},Je.useLayoutEffect=function(X,re){return ge.current.useLayoutEffect(X,re)},Je.useMemo=function(X,re){return ge.current.useMemo(X,re)},Je.useReducer=function(X,re,se){return ge.current.useReducer(X,re,se)},Je.useRef=function(X){return ge.current.useRef(X)},Je.useState=function(X){return ge.current.useState(X)},Je.useSyncExternalStore=function(X,re,se){return ge.current.useSyncExternalStore(X,re,se)},Je.useTransition=function(){return ge.current.useTransition()},Je.version="18.3.1",Je}var Wk;function nS(){return Wk||(Wk=1,yE.exports=g4()),yE.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gk;function y4(){if(Gk)return J2;Gk=1;var s=nS(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(u,d,h){var f,g={},w=null,A=null;h!==void 0&&(w=""+h),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(A=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(g[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)g[f]===void 0&&(g[f]=d[f]);return{$$typeof:e,type:u,key:w,ref:A,props:g,_owner:r.current}}return J2.Fragment=t,J2.jsx=o,J2.jsxs=o,J2}var qk;function w4(){return qk||(qk=1,gE.exports=y4()),gE.exports}var b=w4(),K=nS();const Hv=m4(K);var Wv={},wE={exports:{}},Xr={},vE={exports:{}},AE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kk;function v4(){return Kk||(Kk=1,(function(s){function e(ae,_e){var fe=ae.length;ae.push(_e);e:for(;0<fe;){var X=fe-1>>>1,re=ae[X];if(0<r(re,_e))ae[X]=_e,ae[fe]=re,fe=X;else break e}}function t(ae){return ae.length===0?null:ae[0]}function n(ae){if(ae.length===0)return null;var _e=ae[0],fe=ae.pop();if(fe!==_e){ae[0]=fe;e:for(var X=0,re=ae.length,se=re>>>1;X<se;){var we=2*(X+1)-1,be=ae[we],De=we+1,Me=ae[De];if(0>r(be,fe))De<re&&0>r(Me,be)?(ae[X]=Me,ae[De]=fe,X=De):(ae[X]=be,ae[we]=fe,X=we);else if(De<re&&0>r(Me,fe))ae[X]=Me,ae[De]=fe,X=De;else break e}}return _e}function r(ae,_e){var fe=ae.sortIndex-_e.sortIndex;return fe!==0?fe:ae.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();s.unstable_now=function(){return o.now()-u}}var d=[],h=[],f=1,g=null,w=3,A=!1,S=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ae){for(var _e=t(h);_e!==null;){if(_e.callback===null)n(h);else if(_e.startTime<=ae)n(h),_e.sortIndex=_e.expirationTime,e(d,_e);else break;_e=t(h)}}function j(ae){if(C=!1,N(ae),!S)if(t(d)!==null)S=!0,he(z);else{var _e=t(h);_e!==null&&ge(j,_e.startTime-ae)}}function z(ae,_e){S=!1,C&&(C=!1,P(R),R=-1),A=!0;var fe=w;try{for(N(_e),g=t(d);g!==null&&(!(g.expirationTime>_e)||ae&&!V());){var X=g.callback;if(typeof X=="function"){g.callback=null,w=g.priorityLevel;var re=X(g.expirationTime<=_e);_e=s.unstable_now(),typeof re=="function"?g.callback=re:g===t(d)&&n(d),N(_e)}else n(d);g=t(d)}if(g!==null)var se=!0;else{var we=t(h);we!==null&&ge(j,we.startTime-_e),se=!1}return se}finally{g=null,w=fe,A=!1}}var W=!1,D=null,R=-1,L=5,U=-1;function V(){return!(s.unstable_now()-U<L)}function G(){if(D!==null){var ae=s.unstable_now();U=ae;var _e=!0;try{_e=D(!0,ae)}finally{_e?$():(W=!1,D=null)}}else W=!1}var $;if(typeof O=="function")$=function(){O(G)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,ce=ye.port2;ye.port1.onmessage=G,$=function(){ce.postMessage(null)}}else $=function(){T(G,0)};function he(ae){D=ae,W||(W=!0,$())}function ge(ae,_e){R=T(function(){ae(s.unstable_now())},_e)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ae){ae.callback=null},s.unstable_continueExecution=function(){S||A||(S=!0,he(z))},s.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<ae?Math.floor(1e3/ae):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_getFirstCallbackNode=function(){return t(d)},s.unstable_next=function(ae){switch(w){case 1:case 2:case 3:var _e=3;break;default:_e=w}var fe=w;w=_e;try{return ae()}finally{w=fe}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ae,_e){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var fe=w;w=ae;try{return _e()}finally{w=fe}},s.unstable_scheduleCallback=function(ae,_e,fe){var X=s.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?X+fe:X):fe=X,ae){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=fe+re,ae={id:f++,callback:_e,priorityLevel:ae,startTime:fe,expirationTime:re,sortIndex:-1},fe>X?(ae.sortIndex=fe,e(h,ae),t(d)===null&&ae===t(h)&&(C?(P(R),R=-1):C=!0,ge(j,fe-X))):(ae.sortIndex=re,e(d,ae),S||A||(S=!0,he(z))),ae},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(ae){var _e=w;return function(){var fe=w;w=_e;try{return ae.apply(this,arguments)}finally{w=fe}}}})(AE)),AE}var Qk;function A4(){return Qk||(Qk=1,vE.exports=v4()),vE.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xk;function _4(){if(Xk)return Xr;Xk=1;var s=nS(),e=A4();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function i(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(r[a]=l,a=0;a<l.length;a++)n.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function w(a){return d.call(g,a)?!0:d.call(f,a)?!1:h.test(a)?g[a]=!0:(f[a]=!0,!1)}function A(a,l,p,y){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function S(a,l,p,y){if(l===null||typeof l>"u"||A(a,l,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(a,l,p,y,v,x,M){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=v,this.mustUseProperty=p,this.propertyName=a,this.type=l,this.sanitizeURL=x,this.removeEmptyString=M}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){T[a]=new C(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];T[l]=new C(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){T[a]=new C(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){T[a]=new C(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){T[a]=new C(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){T[a]=new C(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){T[a]=new C(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){T[a]=new C(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){T[a]=new C(a,5,!1,a.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function O(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(P,O);T[l]=new C(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(P,O);T[l]=new C(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(P,O);T[l]=new C(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){T[a]=new C(a,1,!1,a.toLowerCase(),null,!1,!1)}),T.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){T[a]=new C(a,1,!1,a.toLowerCase(),null,!0,!0)});function N(a,l,p,y){var v=T.hasOwnProperty(l)?T[l]:null;(v!==null?v.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(S(l,p,v,y)&&(p=null),y||v===null?w(l)&&(p===null?a.removeAttribute(l):a.setAttribute(l,""+p)):v.mustUseProperty?a[v.propertyName]=p===null?v.type===3?!1:"":p:(l=v.attributeName,y=v.attributeNamespace,p===null?a.removeAttribute(l):(v=v.type,p=v===3||v===4&&p===!0?"":""+p,y?a.setAttributeNS(y,l,p):a.setAttribute(l,p))))}var j=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),W=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),V=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),ae=Symbol.iterator;function _e(a){return a===null||typeof a!="object"?null:(a=ae&&a[ae]||a["@@iterator"],typeof a=="function"?a:null)}var fe=Object.assign,X;function re(a){if(X===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);X=l&&l[1]||""}return`
`+X+a}var se=!1;function we(a,l){if(!a||se)return"";se=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ee){var y=ee}Reflect.construct(a,[],l)}else{try{l.call()}catch(ee){y=ee}a.call(l.prototype)}else{try{throw Error()}catch(ee){y=ee}a()}}catch(ee){if(ee&&y&&typeof ee.stack=="string"){for(var v=ee.stack.split(`
`),x=y.stack.split(`
`),M=v.length-1,H=x.length-1;1<=M&&0<=H&&v[M]!==x[H];)H--;for(;1<=M&&0<=H;M--,H--)if(v[M]!==x[H]){if(M!==1||H!==1)do if(M--,H--,0>H||v[M]!==x[H]){var q=`
`+v[M].replace(" at new "," at ");return a.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",a.displayName)),q}while(1<=M&&0<=H);break}}}finally{se=!1,Error.prepareStackTrace=p}return(a=a?a.displayName||a.name:"")?re(a):""}function be(a){switch(a.tag){case 5:return re(a.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return a=we(a.type,!1),a;case 11:return a=we(a.type.render,!1),a;case 1:return a=we(a.type,!0),a;default:return""}}function De(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case D:return"Fragment";case W:return"Portal";case L:return"Profiler";case R:return"StrictMode";case $:return"Suspense";case ye:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case V:return(a.displayName||"Context")+".Consumer";case U:return(a._context.displayName||"Context")+".Provider";case G:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ce:return l=a.displayName||null,l!==null?l:De(a.type)||"Memo";case he:l=a._payload,a=a._init;try{return De(a(l))}catch{}}return null}function Me(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(l);case 8:return l===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function et(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ft(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function fn(a){var l=ft(a)?"checked":"value",p=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var v=p.get,x=p.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return v.call(this)},set:function(M){y=""+M,x.call(this,M)}}),Object.defineProperty(a,l,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(M){y=""+M},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Hr(a){a._valueTracker||(a._valueTracker=fn(a))}function po(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var p=l.getValue(),y="";return a&&(y=ft(a)?a.checked?"true":"false":a.value),a=y,a!==p?(l.setValue(a),!0):!1}function bi(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Nl(a,l){var p=l.checked;return fe({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??a._wrapperState.initialChecked})}function k0(a,l){var p=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;p=et(l.value!=null?l.value:p),a._wrapperState={initialChecked:y,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function np(a,l){l=l.checked,l!=null&&N(a,"checked",l,!1)}function ju(a,l){np(a,l);var p=et(l.value),y=l.type;if(p!=null)y==="number"?(p===0&&a.value===""||a.value!=p)&&(a.value=""+p):a.value!==""+p&&(a.value=""+p);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?xn(a,l.type,p):l.hasOwnProperty("defaultValue")&&xn(a,l.type,et(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function i2(a,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,p||l===a.value||(a.value=l),a.defaultValue=l}p=a.name,p!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,p!==""&&(a.name=p)}function xn(a,l,p){(l!=="number"||bi(a.ownerDocument)!==a)&&(p==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+p&&(a.defaultValue=""+p))}var mn=Array.isArray;function Ci(a,l,p,y){if(a=a.options,l){l={};for(var v=0;v<p.length;v++)l["$"+p[v]]=!0;for(p=0;p<a.length;p++)v=l.hasOwnProperty("$"+a[p].value),a[p].selected!==v&&(a[p].selected=v),v&&y&&(a[p].defaultSelected=!0)}else{for(p=""+et(p),l=null,v=0;v<a.length;v++){if(a[v].value===p){a[v].selected=!0,y&&(a[v].defaultSelected=!0);return}l!==null||a[v].disabled||(l=a[v])}l!==null&&(l.selected=!0)}}function a2(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return fe({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function o2(a,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(t(92));if(mn(p)){if(1<p.length)throw Error(t(93));p=p[0]}l=p}l==null&&(l=""),p=l}a._wrapperState={initialValue:et(p)}}function I0(a,l){var p=et(l.value),y=et(l.defaultValue);p!=null&&(p=""+p,p!==a.value&&(a.value=p),l.defaultValue==null&&a.defaultValue!==p&&(a.defaultValue=p)),y!=null&&(a.defaultValue=""+y)}function Ml(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function l2(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rp(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?l2(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ll,P0=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,y,v){MSApp.execUnsafeLocalFunction(function(){return a(l,p,y,v)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Ll=Ll||document.createElement("div"),Ll.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ll.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function $u(a,l){if(l){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=l;return}}a.textContent=l}var Ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R0=["Webkit","ms","Moz","O"];Object.keys(Ol).forEach(function(a){R0.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Ol[l]=Ol[a]})});function Bl(a,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Ol.hasOwnProperty(a)&&Ol[a]?(""+l).trim():l+"px"}function sp(a,l){a=a.style;for(var p in l)if(l.hasOwnProperty(p)){var y=p.indexOf("--")===0,v=Bl(p,l[p],y);p==="float"&&(p="cssFloat"),y?a.setProperty(p,v):a[p]=v}}var c2=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Si(a,l){if(l){if(c2[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function ip(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vl=null;function ap(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var fo=null,mo=null,rn=null;function u2(a){if(a=O2(a)){if(typeof fo!="function")throw Error(t(280));var l=a.stateNode;l&&(l=iv(l),fo(a.stateNode,a.type,l))}}function Ul(a){mo?rn?rn.push(a):rn=[a]:mo=a}function jl(){if(mo){var a=mo,l=rn;if(rn=mo=null,u2(a),l)for(a=0;a<l.length;a++)u2(l[a])}}function D0(a,l){return a(l)}function N0(){}var ra=!1;function M0(a,l,p){if(ra)return a(l,p);ra=!0;try{return D0(a,l,p)}finally{ra=!1,(mo!==null||rn!==null)&&(N0(),jl())}}function zu(a,l){var p=a.stateNode;if(p===null)return null;var y=iv(p);if(y===null)return null;p=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(t(231,l,typeof p));return p}var $l=!1;if(u)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){$l=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{$l=!1}function L0(a,l,p,y,v,x,M,H,q){var ee=Array.prototype.slice.call(arguments,3);try{l.apply(p,ee)}catch(ue){this.onError(ue)}}var go=!1,sa=null,op=!1,Ks=null,O0={onError:function(a){go=!0,sa=a}};function B0(a,l,p,y,v,x,M,H,q){go=!1,sa=null,L0.apply(O0,arguments)}function d2(a,l,p,y,v,x,M,H,q){if(B0.apply(this,arguments),go){if(go){var ee=sa;go=!1,sa=null}else throw Error(t(198));op||(op=!0,Ks=ee)}}function Fi(a){var l=a,p=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(p=l.return),a=l.return;while(a)}return l.tag===3?p:null}function h2(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function V0(a){if(Fi(a)!==a)throw Error(t(188))}function U0(a){var l=a.alternate;if(!l){if(l=Fi(a),l===null)throw Error(t(188));return l!==a?null:a}for(var p=a,y=l;;){var v=p.return;if(v===null)break;var x=v.alternate;if(x===null){if(y=v.return,y!==null){p=y;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===p)return V0(v),a;if(x===y)return V0(v),l;x=x.sibling}throw Error(t(188))}if(p.return!==y.return)p=v,y=x;else{for(var M=!1,H=v.child;H;){if(H===p){M=!0,p=v,y=x;break}if(H===y){M=!0,y=v,p=x;break}H=H.sibling}if(!M){for(H=x.child;H;){if(H===p){M=!0,p=x,y=v;break}if(H===y){M=!0,y=x,p=v;break}H=H.sibling}if(!M)throw Error(t(189))}}if(p.alternate!==y)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?a:l}function j0(a){return a=U0(a),a!==null?Hu(a):null}function Hu(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Hu(a);if(l!==null)return l;a=a.sibling}return null}var p2=e.unstable_scheduleCallback,lp=e.unstable_cancelCallback,Wu=e.unstable_shouldYield,yo=e.unstable_requestPaint,Vt=e.unstable_now,G1=e.unstable_getCurrentPriorityLevel,cp=e.unstable_ImmediatePriority,f2=e.unstable_UserBlockingPriority,Gu=e.unstable_NormalPriority,m2=e.unstable_LowPriority,up=e.unstable_IdlePriority,qu=null,us=null;function $0(a){if(us&&typeof us.onCommitFiberRoot=="function")try{us.onCommitFiberRoot(qu,a,void 0,(a.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:Ku,ia=Math.log,Qs=Math.LN2;function Ku(a){return a>>>=0,a===0?32:31-(ia(a)/Qs|0)|0}var aa=64,Hl=4194304;function mt(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function wo(a,l){var p=a.pendingLanes;if(p===0)return 0;var y=0,v=a.suspendedLanes,x=a.pingedLanes,M=p&268435455;if(M!==0){var H=M&~v;H!==0?y=mt(H):(x&=M,x!==0&&(y=mt(x)))}else M=p&~v,M!==0?y=mt(M):x!==0&&(y=mt(x));if(y===0)return 0;if(l!==0&&l!==y&&(l&v)===0&&(v=y&-y,x=l&-l,v>=x||v===16&&(x&4194240)!==0))return l;if((y&4)!==0&&(y|=p&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=y;0<l;)p=31-ds(l),v=1<<p,y|=a[p],l&=~v;return y}function Qu(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xu(a,l){for(var p=a.suspendedLanes,y=a.pingedLanes,v=a.expirationTimes,x=a.pendingLanes;0<x;){var M=31-ds(x),H=1<<M,q=v[M];q===-1?((H&p)===0||(H&y)!==0)&&(v[M]=Qu(H,l)):q<=l&&(a.expiredLanes|=H),x&=~H}}function g2(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function y2(){var a=aa;return aa<<=1,(aa&4194240)===0&&(aa=64),a}function w2(a){for(var l=[],p=0;31>p;p++)l.push(a);return l}function Yu(a,l,p){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-ds(l),a[l]=p}function q1(a,l){var p=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<p;){var v=31-ds(p),x=1<<v;l[v]=0,y[v]=-1,a[v]=-1,p&=~x}}function v2(a,l){var p=a.entangledLanes|=l;for(a=a.entanglements;p;){var y=31-ds(p),v=1<<y;v&l|a[y]&l&&(a[y]|=l),p&=~v}}var it=0;function oa(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var A2,dp,_2,x2,E2,la=!1,hp=[],ca=null,ua=null,Zn=null,Ju=new Map,vo=new Map,hs=[],z0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wl(a,l){switch(a){case"focusin":case"focusout":ca=null;break;case"dragenter":case"dragleave":ua=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":Ju.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(l.pointerId)}}function Ti(a,l,p,y,v,x){return a===null||a.nativeEvent!==x?(a={blockedOn:l,domEventName:p,eventSystemFlags:y,nativeEvent:x,targetContainers:[v]},l!==null&&(l=O2(l),l!==null&&dp(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),a)}function H0(a,l,p,y,v){switch(l){case"focusin":return ca=Ti(ca,a,l,p,y,v),!0;case"dragenter":return ua=Ti(ua,a,l,p,y,v),!0;case"mouseover":return Zn=Ti(Zn,a,l,p,y,v),!0;case"pointerover":var x=v.pointerId;return Ju.set(x,Ti(Ju.get(x)||null,a,l,p,y,v)),!0;case"gotpointercapture":return x=v.pointerId,vo.set(x,Ti(vo.get(x)||null,a,l,p,y,v)),!0}return!1}function pp(a){var l=nd(a.target);if(l!==null){var p=Fi(l);if(p!==null){if(l=p.tag,l===13){if(l=h2(p),l!==null){a.blockedOn=l,E2(a.priority,function(){_2(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Pt(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var p=fp(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(p===null){p=a.nativeEvent;var y=new p.constructor(p.type,p);Vl=y,p.target.dispatchEvent(y),Vl=null}else return l=O2(p),l!==null&&dp(l),a.blockedOn=p,!1;l.shift()}return!0}function W0(a,l,p){Pt(a)&&p.delete(l)}function K1(){la=!1,ca!==null&&Pt(ca)&&(ca=null),ua!==null&&Pt(ua)&&(ua=null),Zn!==null&&Pt(Zn)&&(Zn=null),Ju.forEach(W0),vo.forEach(W0)}function Gl(a,l){a.blockedOn===l&&(a.blockedOn=null,la||(la=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,K1)))}function ql(a){function l(v){return Gl(v,a)}if(0<hp.length){Gl(hp[0],a);for(var p=1;p<hp.length;p++){var y=hp[p];y.blockedOn===a&&(y.blockedOn=null)}}for(ca!==null&&Gl(ca,a),ua!==null&&Gl(ua,a),Zn!==null&&Gl(Zn,a),Ju.forEach(l),vo.forEach(l),p=0;p<hs.length;p++)y=hs[p],y.blockedOn===a&&(y.blockedOn=null);for(;0<hs.length&&(p=hs[0],p.blockedOn===null);)pp(p),p.blockedOn===null&&hs.shift()}var Ao=j.ReactCurrentBatchConfig,_o=!0;function da(a,l,p,y){var v=it,x=Ao.transition;Ao.transition=null;try{it=1,b2(a,l,p,y)}finally{it=v,Ao.transition=x}}function G0(a,l,p,y){var v=it,x=Ao.transition;Ao.transition=null;try{it=4,b2(a,l,p,y)}finally{it=v,Ao.transition=x}}function b2(a,l,p,y){if(_o){var v=fp(a,l,p,y);if(v===null)ix(a,l,y,ha,p),Wl(a,y);else if(H0(v,a,l,p,y))y.stopPropagation();else if(Wl(a,y),l&4&&-1<z0.indexOf(a)){for(;v!==null;){var x=O2(v);if(x!==null&&A2(x),x=fp(a,l,p,y),x===null&&ix(a,l,y,ha,p),x===v)break;v=x}v!==null&&y.stopPropagation()}else ix(a,l,y,null,p)}}var ha=null;function fp(a,l,p,y){if(ha=null,a=ap(y),a=nd(a),a!==null)if(l=Fi(a),l===null)a=null;else if(p=l.tag,p===13){if(a=h2(l),a!==null)return a;a=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return ha=a,null}function mp(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G1()){case cp:return 1;case f2:return 4;case Gu:case m2:return 16;case up:return 536870912;default:return 16}default:return 16}}var ps=null,gp=null,xo=null;function q0(){if(xo)return xo;var a,l=gp,p=l.length,y,v="value"in ps?ps.value:ps.textContent,x=v.length;for(a=0;a<p&&l[a]===v[a];a++);var M=p-a;for(y=1;y<=M&&l[p-y]===v[x-y];y++);return xo=v.slice(a,1<y?1-y:void 0)}function Zu(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function pa(){return!0}function C2(){return!1}function gr(a){function l(p,y,v,x,M){this._reactName=p,this._targetInst=v,this.type=y,this.nativeEvent=x,this.target=M,this.currentTarget=null;for(var H in a)a.hasOwnProperty(H)&&(p=a[H],this[H]=p?p(x):x[H]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?pa:C2,this.isPropagationStopped=C2,this}return fe(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),l}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ed=gr(fa),Kl=fe({},fa,{view:0,detail:0}),yp=gr(Kl),wp,vp,fs,td=fe({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ge,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==fs&&(fs&&a.type==="mousemove"?(wp=a.screenX-fs.screenX,vp=a.screenY-fs.screenY):vp=wp=0,fs=a),wp)},movementY:function(a){return"movementY"in a?a.movementY:vp}}),S2=gr(td),K0=fe({},td,{dataTransfer:0}),Q0=gr(K0),Ap=fe({},Kl,{relatedTarget:0}),er=gr(Ap),X0=fe({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),Y0=gr(X0),Ql=fe({},fa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),m=gr(Ql),E=fe({},fa,{data:0}),k=gr(E),B={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},te={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function me(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=te[a])?!!l[a]:!1}function Ge(){return me}var gn=fe({},Kl,{key:function(a){if(a.key){var l=B[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Zu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?J[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ge,charCode:function(a){return a.type==="keypress"?Zu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Zu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),_t=gr(gn),En=fe({},td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ms=gr(En),Eo=fe({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ge}),ma=gr(Eo),ga=fe({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),_p=gr(ga),F2=fe({},td,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),oO=gr(F2),lO=[9,13,27,32],Q1=u&&"CompositionEvent"in window,T2=null;u&&"documentMode"in document&&(T2=document.documentMode);var cO=u&&"TextEvent"in window&&!T2,MF=u&&(!Q1||T2&&8<T2&&11>=T2),LF=" ",OF=!1;function BF(a,l){switch(a){case"keyup":return lO.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VF(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var xp=!1;function uO(a,l){switch(a){case"compositionend":return VF(l);case"keypress":return l.which!==32?null:(OF=!0,LF);case"textInput":return a=l.data,a===LF&&OF?null:a;default:return null}}function dO(a,l){if(xp)return a==="compositionend"||!Q1&&BF(a,l)?(a=q0(),xo=gp=ps=null,xp=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return MF&&l.locale!=="ko"?null:l.data;default:return null}}var hO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function UF(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!hO[a.type]:l==="textarea"}function jF(a,l,p,y){Ul(y),l=nv(l,"onChange"),0<l.length&&(p=new ed("onChange","change",null,p,y),a.push({event:p,listeners:l}))}var k2=null,I2=null;function pO(a){iT(a,0)}function J0(a){var l=Fp(a);if(po(l))return a}function fO(a,l){if(a==="change")return l}var $F=!1;if(u){var X1;if(u){var Y1="oninput"in document;if(!Y1){var zF=document.createElement("div");zF.setAttribute("oninput","return;"),Y1=typeof zF.oninput=="function"}X1=Y1}else X1=!1;$F=X1&&(!document.documentMode||9<document.documentMode)}function HF(){k2&&(k2.detachEvent("onpropertychange",WF),I2=k2=null)}function WF(a){if(a.propertyName==="value"&&J0(I2)){var l=[];jF(l,I2,a,ap(a)),M0(pO,l)}}function mO(a,l,p){a==="focusin"?(HF(),k2=l,I2=p,k2.attachEvent("onpropertychange",WF)):a==="focusout"&&HF()}function gO(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return J0(I2)}function yO(a,l){if(a==="click")return J0(l)}function wO(a,l){if(a==="input"||a==="change")return J0(l)}function vO(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var ki=typeof Object.is=="function"?Object.is:vO;function P2(a,l){if(ki(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var p=Object.keys(a),y=Object.keys(l);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var v=p[y];if(!d.call(l,v)||!ki(a[v],l[v]))return!1}return!0}function GF(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function qF(a,l){var p=GF(a);a=0;for(var y;p;){if(p.nodeType===3){if(y=a+p.textContent.length,a<=l&&y>=l)return{node:p,offset:l-a};a=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=GF(p)}}function KF(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?KF(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function QF(){for(var a=window,l=bi();l instanceof a.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)a=l.contentWindow;else break;l=bi(a.document)}return l}function J1(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function AO(a){var l=QF(),p=a.focusedElem,y=a.selectionRange;if(l!==p&&p&&p.ownerDocument&&KF(p.ownerDocument.documentElement,p)){if(y!==null&&J1(p)){if(l=y.start,a=y.end,a===void 0&&(a=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(a,p.value.length);else if(a=(l=p.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var v=p.textContent.length,x=Math.min(y.start,v);y=y.end===void 0?x:Math.min(y.end,v),!a.extend&&x>y&&(v=y,y=x,x=v),v=qF(p,x);var M=qF(p,y);v&&M&&(a.rangeCount!==1||a.anchorNode!==v.node||a.anchorOffset!==v.offset||a.focusNode!==M.node||a.focusOffset!==M.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),a.removeAllRanges(),x>y?(a.addRange(l),a.extend(M.node,M.offset)):(l.setEnd(M.node,M.offset),a.addRange(l)))}}for(l=[],a=p;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)a=l[p],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var _O=u&&"documentMode"in document&&11>=document.documentMode,Ep=null,Z1=null,R2=null,ex=!1;function XF(a,l,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;ex||Ep==null||Ep!==bi(y)||(y=Ep,"selectionStart"in y&&J1(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),R2&&P2(R2,y)||(R2=y,y=nv(Z1,"onSelect"),0<y.length&&(l=new ed("onSelect","select",null,l,p),a.push({event:l,listeners:y}),l.target=Ep)))}function Z0(a,l){var p={};return p[a.toLowerCase()]=l.toLowerCase(),p["Webkit"+a]="webkit"+l,p["Moz"+a]="moz"+l,p}var bp={animationend:Z0("Animation","AnimationEnd"),animationiteration:Z0("Animation","AnimationIteration"),animationstart:Z0("Animation","AnimationStart"),transitionend:Z0("Transition","TransitionEnd")},tx={},YF={};u&&(YF=document.createElement("div").style,"AnimationEvent"in window||(delete bp.animationend.animation,delete bp.animationiteration.animation,delete bp.animationstart.animation),"TransitionEvent"in window||delete bp.transitionend.transition);function ev(a){if(tx[a])return tx[a];if(!bp[a])return a;var l=bp[a],p;for(p in l)if(l.hasOwnProperty(p)&&p in YF)return tx[a]=l[p];return a}var JF=ev("animationend"),ZF=ev("animationiteration"),eT=ev("animationstart"),tT=ev("transitionend"),nT=new Map,rT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xl(a,l){nT.set(a,l),i(l,[a])}for(var nx=0;nx<rT.length;nx++){var rx=rT[nx],xO=rx.toLowerCase(),EO=rx[0].toUpperCase()+rx.slice(1);Xl(xO,"on"+EO)}Xl(JF,"onAnimationEnd"),Xl(ZF,"onAnimationIteration"),Xl(eT,"onAnimationStart"),Xl("dblclick","onDoubleClick"),Xl("focusin","onFocus"),Xl("focusout","onBlur"),Xl(tT,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var D2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bO=new Set("cancel close invalid load scroll toggle".split(" ").concat(D2));function sT(a,l,p){var y=a.type||"unknown-event";a.currentTarget=p,d2(y,l,void 0,a),a.currentTarget=null}function iT(a,l){l=(l&4)!==0;for(var p=0;p<a.length;p++){var y=a[p],v=y.event;y=y.listeners;e:{var x=void 0;if(l)for(var M=y.length-1;0<=M;M--){var H=y[M],q=H.instance,ee=H.currentTarget;if(H=H.listener,q!==x&&v.isPropagationStopped())break e;sT(v,H,ee),x=q}else for(M=0;M<y.length;M++){if(H=y[M],q=H.instance,ee=H.currentTarget,H=H.listener,q!==x&&v.isPropagationStopped())break e;sT(v,H,ee),x=q}}}if(op)throw a=Ks,op=!1,Ks=null,a}function Ut(a,l){var p=l[dx];p===void 0&&(p=l[dx]=new Set);var y=a+"__bubble";p.has(y)||(aT(l,a,2,!1),p.add(y))}function sx(a,l,p){var y=0;l&&(y|=4),aT(p,a,y,l)}var tv="_reactListening"+Math.random().toString(36).slice(2);function N2(a){if(!a[tv]){a[tv]=!0,n.forEach(function(p){p!=="selectionchange"&&(bO.has(p)||sx(p,!1,a),sx(p,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[tv]||(l[tv]=!0,sx("selectionchange",!1,l))}}function aT(a,l,p,y){switch(mp(l)){case 1:var v=da;break;case 4:v=G0;break;default:v=b2}p=v.bind(null,l,p,a),v=void 0,!$l||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),y?v!==void 0?a.addEventListener(l,p,{capture:!0,passive:v}):a.addEventListener(l,p,!0):v!==void 0?a.addEventListener(l,p,{passive:v}):a.addEventListener(l,p,!1)}function ix(a,l,p,y,v){var x=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var M=y.tag;if(M===3||M===4){var H=y.stateNode.containerInfo;if(H===v||H.nodeType===8&&H.parentNode===v)break;if(M===4)for(M=y.return;M!==null;){var q=M.tag;if((q===3||q===4)&&(q=M.stateNode.containerInfo,q===v||q.nodeType===8&&q.parentNode===v))return;M=M.return}for(;H!==null;){if(M=nd(H),M===null)return;if(q=M.tag,q===5||q===6){y=x=M;continue e}H=H.parentNode}}y=y.return}M0(function(){var ee=x,ue=ap(p),de=[];e:{var le=nT.get(a);if(le!==void 0){var Ee=ed,ke=a;switch(a){case"keypress":if(Zu(p)===0)break e;case"keydown":case"keyup":Ee=_t;break;case"focusin":ke="focus",Ee=er;break;case"focusout":ke="blur",Ee=er;break;case"beforeblur":case"afterblur":Ee=er;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=S2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=Q0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=ma;break;case JF:case ZF:case eT:Ee=Y0;break;case tT:Ee=_p;break;case"scroll":Ee=yp;break;case"wheel":Ee=oO;break;case"copy":case"cut":case"paste":Ee=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=ms}var Ie=(l&4)!==0,yn=!Ie&&a==="scroll",Y=Ie?le!==null?le+"Capture":null:le;Ie=[];for(var Q=ee,Z;Q!==null;){Z=Q;var pe=Z.stateNode;if(Z.tag===5&&pe!==null&&(Z=pe,Y!==null&&(pe=zu(Q,Y),pe!=null&&Ie.push(M2(Q,pe,Z)))),yn)break;Q=Q.return}0<Ie.length&&(le=new Ee(le,ke,null,p,ue),de.push({event:le,listeners:Ie}))}}if((l&7)===0){e:{if(le=a==="mouseover"||a==="pointerover",Ee=a==="mouseout"||a==="pointerout",le&&p!==Vl&&(ke=p.relatedTarget||p.fromElement)&&(nd(ke)||ke[bo]))break e;if((Ee||le)&&(le=ue.window===ue?ue:(le=ue.ownerDocument)?le.defaultView||le.parentWindow:window,Ee?(ke=p.relatedTarget||p.toElement,Ee=ee,ke=ke?nd(ke):null,ke!==null&&(yn=Fi(ke),ke!==yn||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(Ee=null,ke=ee),Ee!==ke)){if(Ie=S2,pe="onMouseLeave",Y="onMouseEnter",Q="mouse",(a==="pointerout"||a==="pointerover")&&(Ie=ms,pe="onPointerLeave",Y="onPointerEnter",Q="pointer"),yn=Ee==null?le:Fp(Ee),Z=ke==null?le:Fp(ke),le=new Ie(pe,Q+"leave",Ee,p,ue),le.target=yn,le.relatedTarget=Z,pe=null,nd(ue)===ee&&(Ie=new Ie(Y,Q+"enter",ke,p,ue),Ie.target=Z,Ie.relatedTarget=yn,pe=Ie),yn=pe,Ee&&ke)t:{for(Ie=Ee,Y=ke,Q=0,Z=Ie;Z;Z=Cp(Z))Q++;for(Z=0,pe=Y;pe;pe=Cp(pe))Z++;for(;0<Q-Z;)Ie=Cp(Ie),Q--;for(;0<Z-Q;)Y=Cp(Y),Z--;for(;Q--;){if(Ie===Y||Y!==null&&Ie===Y.alternate)break t;Ie=Cp(Ie),Y=Cp(Y)}Ie=null}else Ie=null;Ee!==null&&oT(de,le,Ee,Ie,!1),ke!==null&&yn!==null&&oT(de,yn,ke,Ie,!0)}}e:{if(le=ee?Fp(ee):window,Ee=le.nodeName&&le.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&le.type==="file")var Re=fO;else if(UF(le))if($F)Re=wO;else{Re=gO;var Le=mO}else(Ee=le.nodeName)&&Ee.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(Re=yO);if(Re&&(Re=Re(a,ee))){jF(de,Re,p,ue);break e}Le&&Le(a,le,ee),a==="focusout"&&(Le=le._wrapperState)&&Le.controlled&&le.type==="number"&&xn(le,"number",le.value)}switch(Le=ee?Fp(ee):window,a){case"focusin":(UF(Le)||Le.contentEditable==="true")&&(Ep=Le,Z1=ee,R2=null);break;case"focusout":R2=Z1=Ep=null;break;case"mousedown":ex=!0;break;case"contextmenu":case"mouseup":case"dragend":ex=!1,XF(de,p,ue);break;case"selectionchange":if(_O)break;case"keydown":case"keyup":XF(de,p,ue)}var Oe;if(Q1)e:{switch(a){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else xp?BF(a,p)&&(je="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(je="onCompositionStart");je&&(MF&&p.locale!=="ko"&&(xp||je!=="onCompositionStart"?je==="onCompositionEnd"&&xp&&(Oe=q0()):(ps=ue,gp="value"in ps?ps.value:ps.textContent,xp=!0)),Le=nv(ee,je),0<Le.length&&(je=new k(je,a,null,p,ue),de.push({event:je,listeners:Le}),Oe?je.data=Oe:(Oe=VF(p),Oe!==null&&(je.data=Oe)))),(Oe=cO?uO(a,p):dO(a,p))&&(ee=nv(ee,"onBeforeInput"),0<ee.length&&(ue=new k("onBeforeInput","beforeinput",null,p,ue),de.push({event:ue,listeners:ee}),ue.data=Oe))}iT(de,l)})}function M2(a,l,p){return{instance:a,listener:l,currentTarget:p}}function nv(a,l){for(var p=l+"Capture",y=[];a!==null;){var v=a,x=v.stateNode;v.tag===5&&x!==null&&(v=x,x=zu(a,p),x!=null&&y.unshift(M2(a,x,v)),x=zu(a,l),x!=null&&y.push(M2(a,x,v))),a=a.return}return y}function Cp(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function oT(a,l,p,y,v){for(var x=l._reactName,M=[];p!==null&&p!==y;){var H=p,q=H.alternate,ee=H.stateNode;if(q!==null&&q===y)break;H.tag===5&&ee!==null&&(H=ee,v?(q=zu(p,x),q!=null&&M.unshift(M2(p,q,H))):v||(q=zu(p,x),q!=null&&M.push(M2(p,q,H)))),p=p.return}M.length!==0&&a.push({event:l,listeners:M})}var CO=/\r\n?/g,SO=/\u0000|\uFFFD/g;function lT(a){return(typeof a=="string"?a:""+a).replace(CO,`
`).replace(SO,"")}function rv(a,l,p){if(l=lT(l),lT(a)!==l&&p)throw Error(t(425))}function sv(){}var ax=null,ox=null;function lx(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var cx=typeof setTimeout=="function"?setTimeout:void 0,FO=typeof clearTimeout=="function"?clearTimeout:void 0,cT=typeof Promise=="function"?Promise:void 0,TO=typeof queueMicrotask=="function"?queueMicrotask:typeof cT<"u"?function(a){return cT.resolve(null).then(a).catch(kO)}:cx;function kO(a){setTimeout(function(){throw a})}function ux(a,l){var p=l,y=0;do{var v=p.nextSibling;if(a.removeChild(p),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(y===0){a.removeChild(v),ql(l);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=v}while(p);ql(l)}function Yl(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function uT(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return a;l--}else p==="/$"&&l++}a=a.previousSibling}return null}var Sp=Math.random().toString(36).slice(2),ya="__reactFiber$"+Sp,L2="__reactProps$"+Sp,bo="__reactContainer$"+Sp,dx="__reactEvents$"+Sp,IO="__reactListeners$"+Sp,PO="__reactHandles$"+Sp;function nd(a){var l=a[ya];if(l)return l;for(var p=a.parentNode;p;){if(l=p[bo]||p[ya]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(a=uT(a);a!==null;){if(p=a[ya])return p;a=uT(a)}return l}a=p,p=a.parentNode}return null}function O2(a){return a=a[ya]||a[bo],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Fp(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function iv(a){return a[L2]||null}var hx=[],Tp=-1;function Jl(a){return{current:a}}function jt(a){0>Tp||(a.current=hx[Tp],hx[Tp]=null,Tp--)}function Nt(a,l){Tp++,hx[Tp]=a.current,a.current=l}var Zl={},yr=Jl(Zl),Wr=Jl(!1),rd=Zl;function kp(a,l){var p=a.type.contextTypes;if(!p)return Zl;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var v={},x;for(x in p)v[x]=l[x];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=v),v}function Gr(a){return a=a.childContextTypes,a!=null}function av(){jt(Wr),jt(yr)}function dT(a,l,p){if(yr.current!==Zl)throw Error(t(168));Nt(yr,l),Nt(Wr,p)}function hT(a,l,p){var y=a.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var v in y)if(!(v in l))throw Error(t(108,Me(a)||"Unknown",v));return fe({},p,y)}function ov(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Zl,rd=yr.current,Nt(yr,a),Nt(Wr,Wr.current),!0}function pT(a,l,p){var y=a.stateNode;if(!y)throw Error(t(169));p?(a=hT(a,l,rd),y.__reactInternalMemoizedMergedChildContext=a,jt(Wr),jt(yr),Nt(yr,a)):jt(Wr),Nt(Wr,p)}var Co=null,lv=!1,px=!1;function fT(a){Co===null?Co=[a]:Co.push(a)}function RO(a){lv=!0,fT(a)}function ec(){if(!px&&Co!==null){px=!0;var a=0,l=it;try{var p=Co;for(it=1;a<p.length;a++){var y=p[a];do y=y(!0);while(y!==null)}Co=null,lv=!1}catch(v){throw Co!==null&&(Co=Co.slice(a+1)),p2(cp,ec),v}finally{it=l,px=!1}}return null}var Ip=[],Pp=0,cv=null,uv=0,Xs=[],Ys=0,sd=null,So=1,Fo="";function id(a,l){Ip[Pp++]=uv,Ip[Pp++]=cv,cv=a,uv=l}function mT(a,l,p){Xs[Ys++]=So,Xs[Ys++]=Fo,Xs[Ys++]=sd,sd=a;var y=So;a=Fo;var v=32-ds(y)-1;y&=~(1<<v),p+=1;var x=32-ds(l)+v;if(30<x){var M=v-v%5;x=(y&(1<<M)-1).toString(32),y>>=M,v-=M,So=1<<32-ds(l)+v|p<<v|y,Fo=x+a}else So=1<<x|p<<v|y,Fo=a}function fx(a){a.return!==null&&(id(a,1),mT(a,1,0))}function mx(a){for(;a===cv;)cv=Ip[--Pp],Ip[Pp]=null,uv=Ip[--Pp],Ip[Pp]=null;for(;a===sd;)sd=Xs[--Ys],Xs[Ys]=null,Fo=Xs[--Ys],Xs[Ys]=null,So=Xs[--Ys],Xs[Ys]=null}var gs=null,ys=null,Ht=!1,Ii=null;function gT(a,l){var p=ti(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=a,l=a.deletions,l===null?(a.deletions=[p],a.flags|=16):l.push(p)}function yT(a,l){switch(a.tag){case 5:var p=a.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,gs=a,ys=Yl(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,gs=a,ys=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=sd!==null?{id:So,overflow:Fo}:null,a.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=ti(18,null,null,0),p.stateNode=l,p.return=a,a.child=p,gs=a,ys=null,!0):!1;default:return!1}}function gx(a){return(a.mode&1)!==0&&(a.flags&128)===0}function yx(a){if(Ht){var l=ys;if(l){var p=l;if(!yT(a,l)){if(gx(a))throw Error(t(418));l=Yl(p.nextSibling);var y=gs;l&&yT(a,l)?gT(y,p):(a.flags=a.flags&-4097|2,Ht=!1,gs=a)}}else{if(gx(a))throw Error(t(418));a.flags=a.flags&-4097|2,Ht=!1,gs=a}}}function wT(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;gs=a}function dv(a){if(a!==gs)return!1;if(!Ht)return wT(a),Ht=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!lx(a.type,a.memoizedProps)),l&&(l=ys)){if(gx(a))throw vT(),Error(t(418));for(;l;)gT(a,l),l=Yl(l.nextSibling)}if(wT(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"){if(l===0){ys=Yl(a.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}a=a.nextSibling}ys=null}}else ys=gs?Yl(a.stateNode.nextSibling):null;return!0}function vT(){for(var a=ys;a;)a=Yl(a.nextSibling)}function Rp(){ys=gs=null,Ht=!1}function wx(a){Ii===null?Ii=[a]:Ii.push(a)}var DO=j.ReactCurrentBatchConfig;function B2(a,l,p){if(a=p.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,a));var v=y,x=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===x?l.ref:(l=function(M){var H=v.refs;M===null?delete H[x]:H[x]=M},l._stringRef=x,l)}if(typeof a!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,a))}return a}function hv(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function AT(a){var l=a._init;return l(a._payload)}function _T(a){function l(Y,Q){if(a){var Z=Y.deletions;Z===null?(Y.deletions=[Q],Y.flags|=16):Z.push(Q)}}function p(Y,Q){if(!a)return null;for(;Q!==null;)l(Y,Q),Q=Q.sibling;return null}function y(Y,Q){for(Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function v(Y,Q){return Y=lc(Y,Q),Y.index=0,Y.sibling=null,Y}function x(Y,Q,Z){return Y.index=Z,a?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<Q?(Y.flags|=2,Q):Z):(Y.flags|=2,Q)):(Y.flags|=1048576,Q)}function M(Y){return a&&Y.alternate===null&&(Y.flags|=2),Y}function H(Y,Q,Z,pe){return Q===null||Q.tag!==6?(Q=cE(Z,Y.mode,pe),Q.return=Y,Q):(Q=v(Q,Z),Q.return=Y,Q)}function q(Y,Q,Z,pe){var Re=Z.type;return Re===D?ue(Y,Q,Z.props.children,pe,Z.key):Q!==null&&(Q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===he&&AT(Re)===Q.type)?(pe=v(Q,Z.props),pe.ref=B2(Y,Q,Z),pe.return=Y,pe):(pe=Lv(Z.type,Z.key,Z.props,null,Y.mode,pe),pe.ref=B2(Y,Q,Z),pe.return=Y,pe)}function ee(Y,Q,Z,pe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==Z.containerInfo||Q.stateNode.implementation!==Z.implementation?(Q=uE(Z,Y.mode,pe),Q.return=Y,Q):(Q=v(Q,Z.children||[]),Q.return=Y,Q)}function ue(Y,Q,Z,pe,Re){return Q===null||Q.tag!==7?(Q=pd(Z,Y.mode,pe,Re),Q.return=Y,Q):(Q=v(Q,Z),Q.return=Y,Q)}function de(Y,Q,Z){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=cE(""+Q,Y.mode,Z),Q.return=Y,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case z:return Z=Lv(Q.type,Q.key,Q.props,null,Y.mode,Z),Z.ref=B2(Y,null,Q),Z.return=Y,Z;case W:return Q=uE(Q,Y.mode,Z),Q.return=Y,Q;case he:var pe=Q._init;return de(Y,pe(Q._payload),Z)}if(mn(Q)||_e(Q))return Q=pd(Q,Y.mode,Z,null),Q.return=Y,Q;hv(Y,Q)}return null}function le(Y,Q,Z,pe){var Re=Q!==null?Q.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Re!==null?null:H(Y,Q,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case z:return Z.key===Re?q(Y,Q,Z,pe):null;case W:return Z.key===Re?ee(Y,Q,Z,pe):null;case he:return Re=Z._init,le(Y,Q,Re(Z._payload),pe)}if(mn(Z)||_e(Z))return Re!==null?null:ue(Y,Q,Z,pe,null);hv(Y,Z)}return null}function Ee(Y,Q,Z,pe,Re){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Y=Y.get(Z)||null,H(Q,Y,""+pe,Re);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case z:return Y=Y.get(pe.key===null?Z:pe.key)||null,q(Q,Y,pe,Re);case W:return Y=Y.get(pe.key===null?Z:pe.key)||null,ee(Q,Y,pe,Re);case he:var Le=pe._init;return Ee(Y,Q,Z,Le(pe._payload),Re)}if(mn(pe)||_e(pe))return Y=Y.get(Z)||null,ue(Q,Y,pe,Re,null);hv(Q,pe)}return null}function ke(Y,Q,Z,pe){for(var Re=null,Le=null,Oe=Q,je=Q=0,Hn=null;Oe!==null&&je<Z.length;je++){Oe.index>je?(Hn=Oe,Oe=null):Hn=Oe.sibling;var ht=le(Y,Oe,Z[je],pe);if(ht===null){Oe===null&&(Oe=Hn);break}a&&Oe&&ht.alternate===null&&l(Y,Oe),Q=x(ht,Q,je),Le===null?Re=ht:Le.sibling=ht,Le=ht,Oe=Hn}if(je===Z.length)return p(Y,Oe),Ht&&id(Y,je),Re;if(Oe===null){for(;je<Z.length;je++)Oe=de(Y,Z[je],pe),Oe!==null&&(Q=x(Oe,Q,je),Le===null?Re=Oe:Le.sibling=Oe,Le=Oe);return Ht&&id(Y,je),Re}for(Oe=y(Y,Oe);je<Z.length;je++)Hn=Ee(Oe,Y,je,Z[je],pe),Hn!==null&&(a&&Hn.alternate!==null&&Oe.delete(Hn.key===null?je:Hn.key),Q=x(Hn,Q,je),Le===null?Re=Hn:Le.sibling=Hn,Le=Hn);return a&&Oe.forEach(function(cc){return l(Y,cc)}),Ht&&id(Y,je),Re}function Ie(Y,Q,Z,pe){var Re=_e(Z);if(typeof Re!="function")throw Error(t(150));if(Z=Re.call(Z),Z==null)throw Error(t(151));for(var Le=Re=null,Oe=Q,je=Q=0,Hn=null,ht=Z.next();Oe!==null&&!ht.done;je++,ht=Z.next()){Oe.index>je?(Hn=Oe,Oe=null):Hn=Oe.sibling;var cc=le(Y,Oe,ht.value,pe);if(cc===null){Oe===null&&(Oe=Hn);break}a&&Oe&&cc.alternate===null&&l(Y,Oe),Q=x(cc,Q,je),Le===null?Re=cc:Le.sibling=cc,Le=cc,Oe=Hn}if(ht.done)return p(Y,Oe),Ht&&id(Y,je),Re;if(Oe===null){for(;!ht.done;je++,ht=Z.next())ht=de(Y,ht.value,pe),ht!==null&&(Q=x(ht,Q,je),Le===null?Re=ht:Le.sibling=ht,Le=ht);return Ht&&id(Y,je),Re}for(Oe=y(Y,Oe);!ht.done;je++,ht=Z.next())ht=Ee(Oe,Y,je,ht.value,pe),ht!==null&&(a&&ht.alternate!==null&&Oe.delete(ht.key===null?je:ht.key),Q=x(ht,Q,je),Le===null?Re=ht:Le.sibling=ht,Le=ht);return a&&Oe.forEach(function(h4){return l(Y,h4)}),Ht&&id(Y,je),Re}function yn(Y,Q,Z,pe){if(typeof Z=="object"&&Z!==null&&Z.type===D&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case z:e:{for(var Re=Z.key,Le=Q;Le!==null;){if(Le.key===Re){if(Re=Z.type,Re===D){if(Le.tag===7){p(Y,Le.sibling),Q=v(Le,Z.props.children),Q.return=Y,Y=Q;break e}}else if(Le.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===he&&AT(Re)===Le.type){p(Y,Le.sibling),Q=v(Le,Z.props),Q.ref=B2(Y,Le,Z),Q.return=Y,Y=Q;break e}p(Y,Le);break}else l(Y,Le);Le=Le.sibling}Z.type===D?(Q=pd(Z.props.children,Y.mode,pe,Z.key),Q.return=Y,Y=Q):(pe=Lv(Z.type,Z.key,Z.props,null,Y.mode,pe),pe.ref=B2(Y,Q,Z),pe.return=Y,Y=pe)}return M(Y);case W:e:{for(Le=Z.key;Q!==null;){if(Q.key===Le)if(Q.tag===4&&Q.stateNode.containerInfo===Z.containerInfo&&Q.stateNode.implementation===Z.implementation){p(Y,Q.sibling),Q=v(Q,Z.children||[]),Q.return=Y,Y=Q;break e}else{p(Y,Q);break}else l(Y,Q);Q=Q.sibling}Q=uE(Z,Y.mode,pe),Q.return=Y,Y=Q}return M(Y);case he:return Le=Z._init,yn(Y,Q,Le(Z._payload),pe)}if(mn(Z))return ke(Y,Q,Z,pe);if(_e(Z))return Ie(Y,Q,Z,pe);hv(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,Q!==null&&Q.tag===6?(p(Y,Q.sibling),Q=v(Q,Z),Q.return=Y,Y=Q):(p(Y,Q),Q=cE(Z,Y.mode,pe),Q.return=Y,Y=Q),M(Y)):p(Y,Q)}return yn}var Dp=_T(!0),xT=_T(!1),pv=Jl(null),fv=null,Np=null,vx=null;function Ax(){vx=Np=fv=null}function _x(a){var l=pv.current;jt(pv),a._currentValue=l}function xx(a,l,p){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===p)break;a=a.return}}function Mp(a,l){fv=a,vx=Np=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(qr=!0),a.firstContext=null)}function Js(a){var l=a._currentValue;if(vx!==a)if(a={context:a,memoizedValue:l,next:null},Np===null){if(fv===null)throw Error(t(308));Np=a,fv.dependencies={lanes:0,firstContext:a}}else Np=Np.next=a;return l}var ad=null;function Ex(a){ad===null?ad=[a]:ad.push(a)}function ET(a,l,p,y){var v=l.interleaved;return v===null?(p.next=p,Ex(l)):(p.next=v.next,v.next=p),l.interleaved=p,To(a,y)}function To(a,l){a.lanes|=l;var p=a.alternate;for(p!==null&&(p.lanes|=l),p=a,a=a.return;a!==null;)a.childLanes|=l,p=a.alternate,p!==null&&(p.childLanes|=l),p=a,a=a.return;return p.tag===3?p.stateNode:null}var tc=!1;function bx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bT(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ko(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function nc(a,l,p){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(ct&2)!==0){var v=y.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),y.pending=l,To(a,p)}return v=y.interleaved,v===null?(l.next=l,Ex(y)):(l.next=v.next,v.next=l),y.interleaved=l,To(a,p)}function mv(a,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var y=l.lanes;y&=a.pendingLanes,p|=y,l.lanes=p,v2(a,p)}}function CT(a,l){var p=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var v=null,x=null;if(p=p.firstBaseUpdate,p!==null){do{var M={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};x===null?v=x=M:x=x.next=M,p=p.next}while(p!==null);x===null?v=x=l:x=x.next=l}else v=x=l;p={baseState:y.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:y.shared,effects:y.effects},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=l:a.next=l,p.lastBaseUpdate=l}function gv(a,l,p,y){var v=a.updateQueue;tc=!1;var x=v.firstBaseUpdate,M=v.lastBaseUpdate,H=v.shared.pending;if(H!==null){v.shared.pending=null;var q=H,ee=q.next;q.next=null,M===null?x=ee:M.next=ee,M=q;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,H=ue.lastBaseUpdate,H!==M&&(H===null?ue.firstBaseUpdate=ee:H.next=ee,ue.lastBaseUpdate=q))}if(x!==null){var de=v.baseState;M=0,ue=ee=q=null,H=x;do{var le=H.lane,Ee=H.eventTime;if((y&le)===le){ue!==null&&(ue=ue.next={eventTime:Ee,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var ke=a,Ie=H;switch(le=l,Ee=p,Ie.tag){case 1:if(ke=Ie.payload,typeof ke=="function"){de=ke.call(Ee,de,le);break e}de=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Ie.payload,le=typeof ke=="function"?ke.call(Ee,de,le):ke,le==null)break e;de=fe({},de,le);break e;case 2:tc=!0}}H.callback!==null&&H.lane!==0&&(a.flags|=64,le=v.effects,le===null?v.effects=[H]:le.push(H))}else Ee={eventTime:Ee,lane:le,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ue===null?(ee=ue=Ee,q=de):ue=ue.next=Ee,M|=le;if(H=H.next,H===null){if(H=v.shared.pending,H===null)break;le=H,H=le.next,le.next=null,v.lastBaseUpdate=le,v.shared.pending=null}}while(!0);if(ue===null&&(q=de),v.baseState=q,v.firstBaseUpdate=ee,v.lastBaseUpdate=ue,l=v.shared.interleaved,l!==null){v=l;do M|=v.lane,v=v.next;while(v!==l)}else x===null&&(v.shared.lanes=0);cd|=M,a.lanes=M,a.memoizedState=de}}function ST(a,l,p){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var y=a[l],v=y.callback;if(v!==null){if(y.callback=null,y=p,typeof v!="function")throw Error(t(191,v));v.call(y)}}}var V2={},wa=Jl(V2),U2=Jl(V2),j2=Jl(V2);function od(a){if(a===V2)throw Error(t(174));return a}function Cx(a,l){switch(Nt(j2,l),Nt(U2,a),Nt(wa,V2),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:rp(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=rp(l,a)}jt(wa),Nt(wa,l)}function Lp(){jt(wa),jt(U2),jt(j2)}function FT(a){od(j2.current);var l=od(wa.current),p=rp(l,a.type);l!==p&&(Nt(U2,a),Nt(wa,p))}function Sx(a){U2.current===a&&(jt(wa),jt(U2))}var Qt=Jl(0);function yv(a){for(var l=a;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Fx=[];function Tx(){for(var a=0;a<Fx.length;a++)Fx[a]._workInProgressVersionPrimary=null;Fx.length=0}var wv=j.ReactCurrentDispatcher,kx=j.ReactCurrentBatchConfig,ld=0,Xt=null,Dn=null,$n=null,vv=!1,$2=!1,z2=0,NO=0;function wr(){throw Error(t(321))}function Ix(a,l){if(l===null)return!1;for(var p=0;p<l.length&&p<a.length;p++)if(!ki(a[p],l[p]))return!1;return!0}function Px(a,l,p,y,v,x){if(ld=x,Xt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,wv.current=a===null||a.memoizedState===null?BO:VO,a=p(y,v),$2){x=0;do{if($2=!1,z2=0,25<=x)throw Error(t(301));x+=1,$n=Dn=null,l.updateQueue=null,wv.current=UO,a=p(y,v)}while($2)}if(wv.current=xv,l=Dn!==null&&Dn.next!==null,ld=0,$n=Dn=Xt=null,vv=!1,l)throw Error(t(300));return a}function Rx(){var a=z2!==0;return z2=0,a}function va(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?Xt.memoizedState=$n=a:$n=$n.next=a,$n}function Zs(){if(Dn===null){var a=Xt.alternate;a=a!==null?a.memoizedState:null}else a=Dn.next;var l=$n===null?Xt.memoizedState:$n.next;if(l!==null)$n=l,Dn=a;else{if(a===null)throw Error(t(310));Dn=a,a={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},$n===null?Xt.memoizedState=$n=a:$n=$n.next=a}return $n}function H2(a,l){return typeof l=="function"?l(a):l}function Dx(a){var l=Zs(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=a;var y=Dn,v=y.baseQueue,x=p.pending;if(x!==null){if(v!==null){var M=v.next;v.next=x.next,x.next=M}y.baseQueue=v=x,p.pending=null}if(v!==null){x=v.next,y=y.baseState;var H=M=null,q=null,ee=x;do{var ue=ee.lane;if((ld&ue)===ue)q!==null&&(q=q.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),y=ee.hasEagerState?ee.eagerState:a(y,ee.action);else{var de={lane:ue,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};q===null?(H=q=de,M=y):q=q.next=de,Xt.lanes|=ue,cd|=ue}ee=ee.next}while(ee!==null&&ee!==x);q===null?M=y:q.next=H,ki(y,l.memoizedState)||(qr=!0),l.memoizedState=y,l.baseState=M,l.baseQueue=q,p.lastRenderedState=y}if(a=p.interleaved,a!==null){v=a;do x=v.lane,Xt.lanes|=x,cd|=x,v=v.next;while(v!==a)}else v===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function Nx(a){var l=Zs(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=a;var y=p.dispatch,v=p.pending,x=l.memoizedState;if(v!==null){p.pending=null;var M=v=v.next;do x=a(x,M.action),M=M.next;while(M!==v);ki(x,l.memoizedState)||(qr=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),p.lastRenderedState=x}return[x,y]}function TT(){}function kT(a,l){var p=Xt,y=Zs(),v=l(),x=!ki(y.memoizedState,v);if(x&&(y.memoizedState=v,qr=!0),y=y.queue,Mx(RT.bind(null,p,y,a),[a]),y.getSnapshot!==l||x||$n!==null&&$n.memoizedState.tag&1){if(p.flags|=2048,W2(9,PT.bind(null,p,y,v,l),void 0,null),zn===null)throw Error(t(349));(ld&30)!==0||IT(p,l,v)}return v}function IT(a,l,p){a.flags|=16384,a={getSnapshot:l,value:p},l=Xt.updateQueue,l===null?(l={lastEffect:null,stores:null},Xt.updateQueue=l,l.stores=[a]):(p=l.stores,p===null?l.stores=[a]:p.push(a))}function PT(a,l,p,y){l.value=p,l.getSnapshot=y,DT(l)&&NT(a)}function RT(a,l,p){return p(function(){DT(l)&&NT(a)})}function DT(a){var l=a.getSnapshot;a=a.value;try{var p=l();return!ki(a,p)}catch{return!0}}function NT(a){var l=To(a,1);l!==null&&Ni(l,a,1,-1)}function MT(a){var l=va();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:H2,lastRenderedState:a},l.queue=a,a=a.dispatch=OO.bind(null,Xt,a),[l.memoizedState,a]}function W2(a,l,p,y){return a={tag:a,create:l,destroy:p,deps:y,next:null},l=Xt.updateQueue,l===null?(l={lastEffect:null,stores:null},Xt.updateQueue=l,l.lastEffect=a.next=a):(p=l.lastEffect,p===null?l.lastEffect=a.next=a:(y=p.next,p.next=a,a.next=y,l.lastEffect=a)),a}function LT(){return Zs().memoizedState}function Av(a,l,p,y){var v=va();Xt.flags|=a,v.memoizedState=W2(1|l,p,void 0,y===void 0?null:y)}function _v(a,l,p,y){var v=Zs();y=y===void 0?null:y;var x=void 0;if(Dn!==null){var M=Dn.memoizedState;if(x=M.destroy,y!==null&&Ix(y,M.deps)){v.memoizedState=W2(l,p,x,y);return}}Xt.flags|=a,v.memoizedState=W2(1|l,p,x,y)}function OT(a,l){return Av(8390656,8,a,l)}function Mx(a,l){return _v(2048,8,a,l)}function BT(a,l){return _v(4,2,a,l)}function VT(a,l){return _v(4,4,a,l)}function UT(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function jT(a,l,p){return p=p!=null?p.concat([a]):null,_v(4,4,UT.bind(null,l,a),p)}function Lx(){}function $T(a,l){var p=Zs();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&Ix(l,y[1])?y[0]:(p.memoizedState=[a,l],a)}function zT(a,l){var p=Zs();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&Ix(l,y[1])?y[0]:(a=a(),p.memoizedState=[a,l],a)}function HT(a,l,p){return(ld&21)===0?(a.baseState&&(a.baseState=!1,qr=!0),a.memoizedState=p):(ki(p,l)||(p=y2(),Xt.lanes|=p,cd|=p,a.baseState=!0),l)}function MO(a,l){var p=it;it=p!==0&&4>p?p:4,a(!0);var y=kx.transition;kx.transition={};try{a(!1),l()}finally{it=p,kx.transition=y}}function WT(){return Zs().memoizedState}function LO(a,l,p){var y=ac(a);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},GT(a))qT(l,p);else if(p=ET(a,l,p,y),p!==null){var v=Dr();Ni(p,a,y,v),KT(p,l,y)}}function OO(a,l,p){var y=ac(a),v={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(GT(a))qT(l,v);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var M=l.lastRenderedState,H=x(M,p);if(v.hasEagerState=!0,v.eagerState=H,ki(H,M)){var q=l.interleaved;q===null?(v.next=v,Ex(l)):(v.next=q.next,q.next=v),l.interleaved=v;return}}catch{}finally{}p=ET(a,l,v,y),p!==null&&(v=Dr(),Ni(p,a,y,v),KT(p,l,y))}}function GT(a){var l=a.alternate;return a===Xt||l!==null&&l===Xt}function qT(a,l){$2=vv=!0;var p=a.pending;p===null?l.next=l:(l.next=p.next,p.next=l),a.pending=l}function KT(a,l,p){if((p&4194240)!==0){var y=l.lanes;y&=a.pendingLanes,p|=y,l.lanes=p,v2(a,p)}}var xv={readContext:Js,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useInsertionEffect:wr,useLayoutEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useMutableSource:wr,useSyncExternalStore:wr,useId:wr,unstable_isNewReconciler:!1},BO={readContext:Js,useCallback:function(a,l){return va().memoizedState=[a,l===void 0?null:l],a},useContext:Js,useEffect:OT,useImperativeHandle:function(a,l,p){return p=p!=null?p.concat([a]):null,Av(4194308,4,UT.bind(null,l,a),p)},useLayoutEffect:function(a,l){return Av(4194308,4,a,l)},useInsertionEffect:function(a,l){return Av(4,2,a,l)},useMemo:function(a,l){var p=va();return l=l===void 0?null:l,a=a(),p.memoizedState=[a,l],a},useReducer:function(a,l,p){var y=va();return l=p!==void 0?p(l):l,y.memoizedState=y.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},y.queue=a,a=a.dispatch=LO.bind(null,Xt,a),[y.memoizedState,a]},useRef:function(a){var l=va();return a={current:a},l.memoizedState=a},useState:MT,useDebugValue:Lx,useDeferredValue:function(a){return va().memoizedState=a},useTransition:function(){var a=MT(!1),l=a[0];return a=MO.bind(null,a[1]),va().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,p){var y=Xt,v=va();if(Ht){if(p===void 0)throw Error(t(407));p=p()}else{if(p=l(),zn===null)throw Error(t(349));(ld&30)!==0||IT(y,l,p)}v.memoizedState=p;var x={value:p,getSnapshot:l};return v.queue=x,OT(RT.bind(null,y,x,a),[a]),y.flags|=2048,W2(9,PT.bind(null,y,x,p,l),void 0,null),p},useId:function(){var a=va(),l=zn.identifierPrefix;if(Ht){var p=Fo,y=So;p=(y&~(1<<32-ds(y)-1)).toString(32)+p,l=":"+l+"R"+p,p=z2++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=NO++,l=":"+l+"r"+p.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},VO={readContext:Js,useCallback:$T,useContext:Js,useEffect:Mx,useImperativeHandle:jT,useInsertionEffect:BT,useLayoutEffect:VT,useMemo:zT,useReducer:Dx,useRef:LT,useState:function(){return Dx(H2)},useDebugValue:Lx,useDeferredValue:function(a){var l=Zs();return HT(l,Dn.memoizedState,a)},useTransition:function(){var a=Dx(H2)[0],l=Zs().memoizedState;return[a,l]},useMutableSource:TT,useSyncExternalStore:kT,useId:WT,unstable_isNewReconciler:!1},UO={readContext:Js,useCallback:$T,useContext:Js,useEffect:Mx,useImperativeHandle:jT,useInsertionEffect:BT,useLayoutEffect:VT,useMemo:zT,useReducer:Nx,useRef:LT,useState:function(){return Nx(H2)},useDebugValue:Lx,useDeferredValue:function(a){var l=Zs();return Dn===null?l.memoizedState=a:HT(l,Dn.memoizedState,a)},useTransition:function(){var a=Nx(H2)[0],l=Zs().memoizedState;return[a,l]},useMutableSource:TT,useSyncExternalStore:kT,useId:WT,unstable_isNewReconciler:!1};function Pi(a,l){if(a&&a.defaultProps){l=fe({},l),a=a.defaultProps;for(var p in a)l[p]===void 0&&(l[p]=a[p]);return l}return l}function Ox(a,l,p,y){l=a.memoizedState,p=p(y,l),p=p==null?l:fe({},l,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Ev={isMounted:function(a){return(a=a._reactInternals)?Fi(a)===a:!1},enqueueSetState:function(a,l,p){a=a._reactInternals;var y=Dr(),v=ac(a),x=ko(y,v);x.payload=l,p!=null&&(x.callback=p),l=nc(a,x,v),l!==null&&(Ni(l,a,v,y),mv(l,a,v))},enqueueReplaceState:function(a,l,p){a=a._reactInternals;var y=Dr(),v=ac(a),x=ko(y,v);x.tag=1,x.payload=l,p!=null&&(x.callback=p),l=nc(a,x,v),l!==null&&(Ni(l,a,v,y),mv(l,a,v))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var p=Dr(),y=ac(a),v=ko(p,y);v.tag=2,l!=null&&(v.callback=l),l=nc(a,v,y),l!==null&&(Ni(l,a,y,p),mv(l,a,y))}};function QT(a,l,p,y,v,x,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,x,M):l.prototype&&l.prototype.isPureReactComponent?!P2(p,y)||!P2(v,x):!0}function XT(a,l,p){var y=!1,v=Zl,x=l.contextType;return typeof x=="object"&&x!==null?x=Js(x):(v=Gr(l)?rd:yr.current,y=l.contextTypes,x=(y=y!=null)?kp(a,v):Zl),l=new l(p,x),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Ev,a.stateNode=l,l._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=v,a.__reactInternalMemoizedMaskedChildContext=x),l}function YT(a,l,p,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,y),l.state!==a&&Ev.enqueueReplaceState(l,l.state,null)}function Bx(a,l,p,y){var v=a.stateNode;v.props=p,v.state=a.memoizedState,v.refs={},bx(a);var x=l.contextType;typeof x=="object"&&x!==null?v.context=Js(x):(x=Gr(l)?rd:yr.current,v.context=kp(a,x)),v.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Ox(a,l,x,p),v.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&Ev.enqueueReplaceState(v,v.state,null),gv(a,p,v,y),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308)}function Op(a,l){try{var p="",y=l;do p+=be(y),y=y.return;while(y);var v=p}catch(x){v=`
Error generating stack: `+x.message+`
`+x.stack}return{value:a,source:l,stack:v,digest:null}}function Vx(a,l,p){return{value:a,source:null,stack:p??null,digest:l??null}}function Ux(a,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var jO=typeof WeakMap=="function"?WeakMap:Map;function JT(a,l,p){p=ko(-1,p),p.tag=3,p.payload={element:null};var y=l.value;return p.callback=function(){Iv||(Iv=!0,tE=y),Ux(a,l)},p}function ZT(a,l,p){p=ko(-1,p),p.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=l.value;p.payload=function(){return y(v)},p.callback=function(){Ux(a,l)}}var x=a.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(p.callback=function(){Ux(a,l),typeof y!="function"&&(sc===null?sc=new Set([this]):sc.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),p}function ek(a,l,p){var y=a.pingCache;if(y===null){y=a.pingCache=new jO;var v=new Set;y.set(l,v)}else v=y.get(l),v===void 0&&(v=new Set,y.set(l,v));v.has(p)||(v.add(p),a=t4.bind(null,a,l,p),l.then(a,a))}function tk(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function nk(a,l,p,y,v){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=ko(-1,1),l.tag=2,nc(p,l,1))),p.lanes|=1),a):(a.flags|=65536,a.lanes=v,a)}var $O=j.ReactCurrentOwner,qr=!1;function Rr(a,l,p,y){l.child=a===null?xT(l,null,p,y):Dp(l,a.child,p,y)}function rk(a,l,p,y,v){p=p.render;var x=l.ref;return Mp(l,v),y=Px(a,l,p,y,x,v),p=Rx(),a!==null&&!qr?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,Io(a,l,v)):(Ht&&p&&fx(l),l.flags|=1,Rr(a,l,y,v),l.child)}function sk(a,l,p,y,v){if(a===null){var x=p.type;return typeof x=="function"&&!lE(x)&&x.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=x,ik(a,l,x,y,v)):(a=Lv(p.type,null,y,l,l.mode,v),a.ref=l.ref,a.return=l,l.child=a)}if(x=a.child,(a.lanes&v)===0){var M=x.memoizedProps;if(p=p.compare,p=p!==null?p:P2,p(M,y)&&a.ref===l.ref)return Io(a,l,v)}return l.flags|=1,a=lc(x,y),a.ref=l.ref,a.return=l,l.child=a}function ik(a,l,p,y,v){if(a!==null){var x=a.memoizedProps;if(P2(x,y)&&a.ref===l.ref)if(qr=!1,l.pendingProps=y=x,(a.lanes&v)!==0)(a.flags&131072)!==0&&(qr=!0);else return l.lanes=a.lanes,Io(a,l,v)}return jx(a,l,p,y,v)}function ak(a,l,p){var y=l.pendingProps,v=y.children,x=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(Vp,ws),ws|=p;else{if((p&1073741824)===0)return a=x!==null?x.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Nt(Vp,ws),ws|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=x!==null?x.baseLanes:p,Nt(Vp,ws),ws|=y}else x!==null?(y=x.baseLanes|p,l.memoizedState=null):y=p,Nt(Vp,ws),ws|=y;return Rr(a,l,v,p),l.child}function ok(a,l){var p=l.ref;(a===null&&p!==null||a!==null&&a.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function jx(a,l,p,y,v){var x=Gr(p)?rd:yr.current;return x=kp(l,x),Mp(l,v),p=Px(a,l,p,y,x,v),y=Rx(),a!==null&&!qr?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,Io(a,l,v)):(Ht&&y&&fx(l),l.flags|=1,Rr(a,l,p,v),l.child)}function lk(a,l,p,y,v){if(Gr(p)){var x=!0;ov(l)}else x=!1;if(Mp(l,v),l.stateNode===null)Cv(a,l),XT(l,p,y),Bx(l,p,y,v),y=!0;else if(a===null){var M=l.stateNode,H=l.memoizedProps;M.props=H;var q=M.context,ee=p.contextType;typeof ee=="object"&&ee!==null?ee=Js(ee):(ee=Gr(p)?rd:yr.current,ee=kp(l,ee));var ue=p.getDerivedStateFromProps,de=typeof ue=="function"||typeof M.getSnapshotBeforeUpdate=="function";de||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==y||q!==ee)&&YT(l,M,y,ee),tc=!1;var le=l.memoizedState;M.state=le,gv(l,y,M,v),q=l.memoizedState,H!==y||le!==q||Wr.current||tc?(typeof ue=="function"&&(Ox(l,p,ue,y),q=l.memoizedState),(H=tc||QT(l,p,H,y,le,q,ee))?(de||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=q),M.props=y,M.state=q,M.context=ee,y=H):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{M=l.stateNode,bT(a,l),H=l.memoizedProps,ee=l.type===l.elementType?H:Pi(l.type,H),M.props=ee,de=l.pendingProps,le=M.context,q=p.contextType,typeof q=="object"&&q!==null?q=Js(q):(q=Gr(p)?rd:yr.current,q=kp(l,q));var Ee=p.getDerivedStateFromProps;(ue=typeof Ee=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==de||le!==q)&&YT(l,M,y,q),tc=!1,le=l.memoizedState,M.state=le,gv(l,y,M,v);var ke=l.memoizedState;H!==de||le!==ke||Wr.current||tc?(typeof Ee=="function"&&(Ox(l,p,Ee,y),ke=l.memoizedState),(ee=tc||QT(l,p,ee,y,le,ke,q)||!1)?(ue||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(y,ke,q),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(y,ke,q)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||H===a.memoizedProps&&le===a.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&le===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=ke),M.props=y,M.state=ke,M.context=q,y=ee):(typeof M.componentDidUpdate!="function"||H===a.memoizedProps&&le===a.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&le===a.memoizedState||(l.flags|=1024),y=!1)}return $x(a,l,p,y,x,v)}function $x(a,l,p,y,v,x){ok(a,l);var M=(l.flags&128)!==0;if(!y&&!M)return v&&pT(l,p,!1),Io(a,l,x);y=l.stateNode,$O.current=l;var H=M&&typeof p.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,a!==null&&M?(l.child=Dp(l,a.child,null,x),l.child=Dp(l,null,H,x)):Rr(a,l,H,x),l.memoizedState=y.state,v&&pT(l,p,!0),l.child}function ck(a){var l=a.stateNode;l.pendingContext?dT(a,l.pendingContext,l.pendingContext!==l.context):l.context&&dT(a,l.context,!1),Cx(a,l.containerInfo)}function uk(a,l,p,y,v){return Rp(),wx(v),l.flags|=256,Rr(a,l,p,y),l.child}var zx={dehydrated:null,treeContext:null,retryLane:0};function Hx(a){return{baseLanes:a,cachePool:null,transitions:null}}function dk(a,l,p){var y=l.pendingProps,v=Qt.current,x=!1,M=(l.flags&128)!==0,H;if((H=M)||(H=a!==null&&a.memoizedState===null?!1:(v&2)!==0),H?(x=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(v|=1),Nt(Qt,v&1),a===null)return yx(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(M=y.children,a=y.fallback,x?(y=l.mode,x=l.child,M={mode:"hidden",children:M},(y&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=M):x=Ov(M,y,0,null),a=pd(a,y,p,null),x.return=l,a.return=l,x.sibling=a,l.child=x,l.child.memoizedState=Hx(p),l.memoizedState=zx,a):Wx(l,M));if(v=a.memoizedState,v!==null&&(H=v.dehydrated,H!==null))return zO(a,l,M,y,H,v,p);if(x){x=y.fallback,M=l.mode,v=a.child,H=v.sibling;var q={mode:"hidden",children:y.children};return(M&1)===0&&l.child!==v?(y=l.child,y.childLanes=0,y.pendingProps=q,l.deletions=null):(y=lc(v,q),y.subtreeFlags=v.subtreeFlags&14680064),H!==null?x=lc(H,x):(x=pd(x,M,p,null),x.flags|=2),x.return=l,y.return=l,y.sibling=x,l.child=y,y=x,x=l.child,M=a.child.memoizedState,M=M===null?Hx(p):{baseLanes:M.baseLanes|p,cachePool:null,transitions:M.transitions},x.memoizedState=M,x.childLanes=a.childLanes&~p,l.memoizedState=zx,y}return x=a.child,a=x.sibling,y=lc(x,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=p),y.return=l,y.sibling=null,a!==null&&(p=l.deletions,p===null?(l.deletions=[a],l.flags|=16):p.push(a)),l.child=y,l.memoizedState=null,y}function Wx(a,l){return l=Ov({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function bv(a,l,p,y){return y!==null&&wx(y),Dp(l,a.child,null,p),a=Wx(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function zO(a,l,p,y,v,x,M){if(p)return l.flags&256?(l.flags&=-257,y=Vx(Error(t(422))),bv(a,l,M,y)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(x=y.fallback,v=l.mode,y=Ov({mode:"visible",children:y.children},v,0,null),x=pd(x,v,M,null),x.flags|=2,y.return=l,x.return=l,y.sibling=x,l.child=y,(l.mode&1)!==0&&Dp(l,a.child,null,M),l.child.memoizedState=Hx(M),l.memoizedState=zx,x);if((l.mode&1)===0)return bv(a,l,M,null);if(v.data==="$!"){if(y=v.nextSibling&&v.nextSibling.dataset,y)var H=y.dgst;return y=H,x=Error(t(419)),y=Vx(x,y,void 0),bv(a,l,M,y)}if(H=(M&a.childLanes)!==0,qr||H){if(y=zn,y!==null){switch(M&-M){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(y.suspendedLanes|M))!==0?0:v,v!==0&&v!==x.retryLane&&(x.retryLane=v,To(a,v),Ni(y,a,v,-1))}return oE(),y=Vx(Error(t(421))),bv(a,l,M,y)}return v.data==="$?"?(l.flags|=128,l.child=a.child,l=n4.bind(null,a),v._reactRetry=l,null):(a=x.treeContext,ys=Yl(v.nextSibling),gs=l,Ht=!0,Ii=null,a!==null&&(Xs[Ys++]=So,Xs[Ys++]=Fo,Xs[Ys++]=sd,So=a.id,Fo=a.overflow,sd=l),l=Wx(l,y.children),l.flags|=4096,l)}function hk(a,l,p){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),xx(a.return,l,p)}function Gx(a,l,p,y,v){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:v}:(x.isBackwards=l,x.rendering=null,x.renderingStartTime=0,x.last=y,x.tail=p,x.tailMode=v)}function pk(a,l,p){var y=l.pendingProps,v=y.revealOrder,x=y.tail;if(Rr(a,l,y.children,p),y=Qt.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&hk(a,p,l);else if(a.tag===19)hk(a,p,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(Nt(Qt,y),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(p=l.child,v=null;p!==null;)a=p.alternate,a!==null&&yv(a)===null&&(v=p),p=p.sibling;p=v,p===null?(v=l.child,l.child=null):(v=p.sibling,p.sibling=null),Gx(l,!1,v,p,x);break;case"backwards":for(p=null,v=l.child,l.child=null;v!==null;){if(a=v.alternate,a!==null&&yv(a)===null){l.child=v;break}a=v.sibling,v.sibling=p,p=v,v=a}Gx(l,!0,p,null,x);break;case"together":Gx(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Cv(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Io(a,l,p){if(a!==null&&(l.dependencies=a.dependencies),cd|=l.lanes,(p&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,p=lc(a,a.pendingProps),l.child=p,p.return=l;a.sibling!==null;)a=a.sibling,p=p.sibling=lc(a,a.pendingProps),p.return=l;p.sibling=null}return l.child}function HO(a,l,p){switch(l.tag){case 3:ck(l),Rp();break;case 5:FT(l);break;case 1:Gr(l.type)&&ov(l);break;case 4:Cx(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,v=l.memoizedProps.value;Nt(pv,y._currentValue),y._currentValue=v;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(Nt(Qt,Qt.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?dk(a,l,p):(Nt(Qt,Qt.current&1),a=Io(a,l,p),a!==null?a.sibling:null);Nt(Qt,Qt.current&1);break;case 19:if(y=(p&l.childLanes)!==0,(a.flags&128)!==0){if(y)return pk(a,l,p);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Nt(Qt,Qt.current),y)break;return null;case 22:case 23:return l.lanes=0,ak(a,l,p)}return Io(a,l,p)}var fk,qx,mk,gk;fk=function(a,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},qx=function(){},mk=function(a,l,p,y){var v=a.memoizedProps;if(v!==y){a=l.stateNode,od(wa.current);var x=null;switch(p){case"input":v=Nl(a,v),y=Nl(a,y),x=[];break;case"select":v=fe({},v,{value:void 0}),y=fe({},y,{value:void 0}),x=[];break;case"textarea":v=a2(a,v),y=a2(a,y),x=[];break;default:typeof v.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=sv)}Si(p,y);var M;p=null;for(ee in v)if(!y.hasOwnProperty(ee)&&v.hasOwnProperty(ee)&&v[ee]!=null)if(ee==="style"){var H=v[ee];for(M in H)H.hasOwnProperty(M)&&(p||(p={}),p[M]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(r.hasOwnProperty(ee)?x||(x=[]):(x=x||[]).push(ee,null));for(ee in y){var q=y[ee];if(H=v!=null?v[ee]:void 0,y.hasOwnProperty(ee)&&q!==H&&(q!=null||H!=null))if(ee==="style")if(H){for(M in H)!H.hasOwnProperty(M)||q&&q.hasOwnProperty(M)||(p||(p={}),p[M]="");for(M in q)q.hasOwnProperty(M)&&H[M]!==q[M]&&(p||(p={}),p[M]=q[M])}else p||(x||(x=[]),x.push(ee,p)),p=q;else ee==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,H=H?H.__html:void 0,q!=null&&H!==q&&(x=x||[]).push(ee,q)):ee==="children"?typeof q!="string"&&typeof q!="number"||(x=x||[]).push(ee,""+q):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(r.hasOwnProperty(ee)?(q!=null&&ee==="onScroll"&&Ut("scroll",a),x||H===q||(x=[])):(x=x||[]).push(ee,q))}p&&(x=x||[]).push("style",p);var ee=x;(l.updateQueue=ee)&&(l.flags|=4)}},gk=function(a,l,p,y){p!==y&&(l.flags|=4)};function G2(a,l){if(!Ht)switch(a.tailMode){case"hidden":l=a.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function vr(a){var l=a.alternate!==null&&a.alternate.child===a.child,p=0,y=0;if(l)for(var v=a.child;v!==null;)p|=v.lanes|v.childLanes,y|=v.subtreeFlags&14680064,y|=v.flags&14680064,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)p|=v.lanes|v.childLanes,y|=v.subtreeFlags,y|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=y,a.childLanes=p,l}function WO(a,l,p){var y=l.pendingProps;switch(mx(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vr(l),null;case 1:return Gr(l.type)&&av(),vr(l),null;case 3:return y=l.stateNode,Lp(),jt(Wr),jt(yr),Tx(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(dv(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ii!==null&&(sE(Ii),Ii=null))),qx(a,l),vr(l),null;case 5:Sx(l);var v=od(j2.current);if(p=l.type,a!==null&&l.stateNode!=null)mk(a,l,p,y,v),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return vr(l),null}if(a=od(wa.current),dv(l)){y=l.stateNode,p=l.type;var x=l.memoizedProps;switch(y[ya]=l,y[L2]=x,a=(l.mode&1)!==0,p){case"dialog":Ut("cancel",y),Ut("close",y);break;case"iframe":case"object":case"embed":Ut("load",y);break;case"video":case"audio":for(v=0;v<D2.length;v++)Ut(D2[v],y);break;case"source":Ut("error",y);break;case"img":case"image":case"link":Ut("error",y),Ut("load",y);break;case"details":Ut("toggle",y);break;case"input":k0(y,x),Ut("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!x.multiple},Ut("invalid",y);break;case"textarea":o2(y,x),Ut("invalid",y)}Si(p,x),v=null;for(var M in x)if(x.hasOwnProperty(M)){var H=x[M];M==="children"?typeof H=="string"?y.textContent!==H&&(x.suppressHydrationWarning!==!0&&rv(y.textContent,H,a),v=["children",H]):typeof H=="number"&&y.textContent!==""+H&&(x.suppressHydrationWarning!==!0&&rv(y.textContent,H,a),v=["children",""+H]):r.hasOwnProperty(M)&&H!=null&&M==="onScroll"&&Ut("scroll",y)}switch(p){case"input":Hr(y),i2(y,x,!0);break;case"textarea":Hr(y),Ml(y);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(y.onclick=sv)}y=v,l.updateQueue=y,y!==null&&(l.flags|=4)}else{M=v.nodeType===9?v:v.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=l2(p)),a==="http://www.w3.org/1999/xhtml"?p==="script"?(a=M.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=M.createElement(p,{is:y.is}):(a=M.createElement(p),p==="select"&&(M=a,y.multiple?M.multiple=!0:y.size&&(M.size=y.size))):a=M.createElementNS(a,p),a[ya]=l,a[L2]=y,fk(a,l,!1,!1),l.stateNode=a;e:{switch(M=ip(p,y),p){case"dialog":Ut("cancel",a),Ut("close",a),v=y;break;case"iframe":case"object":case"embed":Ut("load",a),v=y;break;case"video":case"audio":for(v=0;v<D2.length;v++)Ut(D2[v],a);v=y;break;case"source":Ut("error",a),v=y;break;case"img":case"image":case"link":Ut("error",a),Ut("load",a),v=y;break;case"details":Ut("toggle",a),v=y;break;case"input":k0(a,y),v=Nl(a,y),Ut("invalid",a);break;case"option":v=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},v=fe({},y,{value:void 0}),Ut("invalid",a);break;case"textarea":o2(a,y),v=a2(a,y),Ut("invalid",a);break;default:v=y}Si(p,v),H=v;for(x in H)if(H.hasOwnProperty(x)){var q=H[x];x==="style"?sp(a,q):x==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&P0(a,q)):x==="children"?typeof q=="string"?(p!=="textarea"||q!=="")&&$u(a,q):typeof q=="number"&&$u(a,""+q):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(r.hasOwnProperty(x)?q!=null&&x==="onScroll"&&Ut("scroll",a):q!=null&&N(a,x,q,M))}switch(p){case"input":Hr(a),i2(a,y,!1);break;case"textarea":Hr(a),Ml(a);break;case"option":y.value!=null&&a.setAttribute("value",""+et(y.value));break;case"select":a.multiple=!!y.multiple,x=y.value,x!=null?Ci(a,!!y.multiple,x,!1):y.defaultValue!=null&&Ci(a,!!y.multiple,y.defaultValue,!0);break;default:typeof v.onClick=="function"&&(a.onclick=sv)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return vr(l),null;case 6:if(a&&l.stateNode!=null)gk(a,l,a.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(p=od(j2.current),od(wa.current),dv(l)){if(y=l.stateNode,p=l.memoizedProps,y[ya]=l,(x=y.nodeValue!==p)&&(a=gs,a!==null))switch(a.tag){case 3:rv(y.nodeValue,p,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&rv(y.nodeValue,p,(a.mode&1)!==0)}x&&(l.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[ya]=l,l.stateNode=y}return vr(l),null;case 13:if(jt(Qt),y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Ht&&ys!==null&&(l.mode&1)!==0&&(l.flags&128)===0)vT(),Rp(),l.flags|=98560,x=!1;else if(x=dv(l),y!==null&&y.dehydrated!==null){if(a===null){if(!x)throw Error(t(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[ya]=l}else Rp(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;vr(l),x=!1}else Ii!==null&&(sE(Ii),Ii=null),x=!0;if(!x)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Qt.current&1)!==0?Nn===0&&(Nn=3):oE())),l.updateQueue!==null&&(l.flags|=4),vr(l),null);case 4:return Lp(),qx(a,l),a===null&&N2(l.stateNode.containerInfo),vr(l),null;case 10:return _x(l.type._context),vr(l),null;case 17:return Gr(l.type)&&av(),vr(l),null;case 19:if(jt(Qt),x=l.memoizedState,x===null)return vr(l),null;if(y=(l.flags&128)!==0,M=x.rendering,M===null)if(y)G2(x,!1);else{if(Nn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(M=yv(a),M!==null){for(l.flags|=128,G2(x,!1),y=M.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=p,p=l.child;p!==null;)x=p,a=y,x.flags&=14680066,M=x.alternate,M===null?(x.childLanes=0,x.lanes=a,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=M.childLanes,x.lanes=M.lanes,x.child=M.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=M.memoizedProps,x.memoizedState=M.memoizedState,x.updateQueue=M.updateQueue,x.type=M.type,a=M.dependencies,x.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),p=p.sibling;return Nt(Qt,Qt.current&1|2),l.child}a=a.sibling}x.tail!==null&&Vt()>Up&&(l.flags|=128,y=!0,G2(x,!1),l.lanes=4194304)}else{if(!y)if(a=yv(M),a!==null){if(l.flags|=128,y=!0,p=a.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),G2(x,!0),x.tail===null&&x.tailMode==="hidden"&&!M.alternate&&!Ht)return vr(l),null}else 2*Vt()-x.renderingStartTime>Up&&p!==1073741824&&(l.flags|=128,y=!0,G2(x,!1),l.lanes=4194304);x.isBackwards?(M.sibling=l.child,l.child=M):(p=x.last,p!==null?p.sibling=M:l.child=M,x.last=M)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=Vt(),l.sibling=null,p=Qt.current,Nt(Qt,y?p&1|2:p&1),l):(vr(l),null);case 22:case 23:return aE(),y=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(ws&1073741824)!==0&&(vr(l),l.subtreeFlags&6&&(l.flags|=8192)):vr(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function GO(a,l){switch(mx(l),l.tag){case 1:return Gr(l.type)&&av(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Lp(),jt(Wr),jt(yr),Tx(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Sx(l),null;case 13:if(jt(Qt),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Rp()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return jt(Qt),null;case 4:return Lp(),null;case 10:return _x(l.type._context),null;case 22:case 23:return aE(),null;case 24:return null;default:return null}}var Sv=!1,Ar=!1,qO=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Bp(a,l){var p=a.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){sn(a,l,y)}else p.current=null}function Kx(a,l,p){try{p()}catch(y){sn(a,l,y)}}var yk=!1;function KO(a,l){if(ax=_o,a=QF(),J1(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var v=y.anchorOffset,x=y.focusNode;y=y.focusOffset;try{p.nodeType,x.nodeType}catch{p=null;break e}var M=0,H=-1,q=-1,ee=0,ue=0,de=a,le=null;t:for(;;){for(var Ee;de!==p||v!==0&&de.nodeType!==3||(H=M+v),de!==x||y!==0&&de.nodeType!==3||(q=M+y),de.nodeType===3&&(M+=de.nodeValue.length),(Ee=de.firstChild)!==null;)le=de,de=Ee;for(;;){if(de===a)break t;if(le===p&&++ee===v&&(H=M),le===x&&++ue===y&&(q=M),(Ee=de.nextSibling)!==null)break;de=le,le=de.parentNode}de=Ee}p=H===-1||q===-1?null:{start:H,end:q}}else p=null}p=p||{start:0,end:0}}else p=null;for(ox={focusedElem:a,selectionRange:p},_o=!1,Te=l;Te!==null;)if(l=Te,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Te=a;else for(;Te!==null;){l=Te;try{var ke=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var Ie=ke.memoizedProps,yn=ke.memoizedState,Y=l.stateNode,Q=Y.getSnapshotBeforeUpdate(l.elementType===l.type?Ie:Pi(l.type,Ie),yn);Y.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var Z=l.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){sn(l,l.return,pe)}if(a=l.sibling,a!==null){a.return=l.return,Te=a;break}Te=l.return}return ke=yk,yk=!1,ke}function q2(a,l,p){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var v=y=y.next;do{if((v.tag&a)===a){var x=v.destroy;v.destroy=void 0,x!==void 0&&Kx(l,p,x)}v=v.next}while(v!==y)}}function Fv(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&a)===a){var y=p.create;p.destroy=y()}p=p.next}while(p!==l)}}function Qx(a){var l=a.ref;if(l!==null){var p=a.stateNode;switch(a.tag){case 5:a=p;break;default:a=p}typeof l=="function"?l(a):l.current=a}}function wk(a){var l=a.alternate;l!==null&&(a.alternate=null,wk(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[ya],delete l[L2],delete l[dx],delete l[IO],delete l[PO])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function vk(a){return a.tag===5||a.tag===3||a.tag===4}function Ak(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||vk(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Xx(a,l,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(a,l):p.insertBefore(a,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(a,p)):(l=p,l.appendChild(a)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=sv));else if(y!==4&&(a=a.child,a!==null))for(Xx(a,l,p),a=a.sibling;a!==null;)Xx(a,l,p),a=a.sibling}function Yx(a,l,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?p.insertBefore(a,l):p.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(Yx(a,l,p),a=a.sibling;a!==null;)Yx(a,l,p),a=a.sibling}var tr=null,Ri=!1;function rc(a,l,p){for(p=p.child;p!==null;)_k(a,l,p),p=p.sibling}function _k(a,l,p){if(us&&typeof us.onCommitFiberUnmount=="function")try{us.onCommitFiberUnmount(qu,p)}catch{}switch(p.tag){case 5:Ar||Bp(p,l);case 6:var y=tr,v=Ri;tr=null,rc(a,l,p),tr=y,Ri=v,tr!==null&&(Ri?(a=tr,p=p.stateNode,a.nodeType===8?a.parentNode.removeChild(p):a.removeChild(p)):tr.removeChild(p.stateNode));break;case 18:tr!==null&&(Ri?(a=tr,p=p.stateNode,a.nodeType===8?ux(a.parentNode,p):a.nodeType===1&&ux(a,p),ql(a)):ux(tr,p.stateNode));break;case 4:y=tr,v=Ri,tr=p.stateNode.containerInfo,Ri=!0,rc(a,l,p),tr=y,Ri=v;break;case 0:case 11:case 14:case 15:if(!Ar&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){v=y=y.next;do{var x=v,M=x.destroy;x=x.tag,M!==void 0&&((x&2)!==0||(x&4)!==0)&&Kx(p,l,M),v=v.next}while(v!==y)}rc(a,l,p);break;case 1:if(!Ar&&(Bp(p,l),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(H){sn(p,l,H)}rc(a,l,p);break;case 21:rc(a,l,p);break;case 22:p.mode&1?(Ar=(y=Ar)||p.memoizedState!==null,rc(a,l,p),Ar=y):rc(a,l,p);break;default:rc(a,l,p)}}function xk(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var p=a.stateNode;p===null&&(p=a.stateNode=new qO),l.forEach(function(y){var v=r4.bind(null,a,y);p.has(y)||(p.add(y),y.then(v,v))})}}function Di(a,l){var p=l.deletions;if(p!==null)for(var y=0;y<p.length;y++){var v=p[y];try{var x=a,M=l,H=M;e:for(;H!==null;){switch(H.tag){case 5:tr=H.stateNode,Ri=!1;break e;case 3:tr=H.stateNode.containerInfo,Ri=!0;break e;case 4:tr=H.stateNode.containerInfo,Ri=!0;break e}H=H.return}if(tr===null)throw Error(t(160));_k(x,M,v),tr=null,Ri=!1;var q=v.alternate;q!==null&&(q.return=null),v.return=null}catch(ee){sn(v,l,ee)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Ek(l,a),l=l.sibling}function Ek(a,l){var p=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Di(l,a),Aa(a),y&4){try{q2(3,a,a.return),Fv(3,a)}catch(Ie){sn(a,a.return,Ie)}try{q2(5,a,a.return)}catch(Ie){sn(a,a.return,Ie)}}break;case 1:Di(l,a),Aa(a),y&512&&p!==null&&Bp(p,p.return);break;case 5:if(Di(l,a),Aa(a),y&512&&p!==null&&Bp(p,p.return),a.flags&32){var v=a.stateNode;try{$u(v,"")}catch(Ie){sn(a,a.return,Ie)}}if(y&4&&(v=a.stateNode,v!=null)){var x=a.memoizedProps,M=p!==null?p.memoizedProps:x,H=a.type,q=a.updateQueue;if(a.updateQueue=null,q!==null)try{H==="input"&&x.type==="radio"&&x.name!=null&&np(v,x),ip(H,M);var ee=ip(H,x);for(M=0;M<q.length;M+=2){var ue=q[M],de=q[M+1];ue==="style"?sp(v,de):ue==="dangerouslySetInnerHTML"?P0(v,de):ue==="children"?$u(v,de):N(v,ue,de,ee)}switch(H){case"input":ju(v,x);break;case"textarea":I0(v,x);break;case"select":var le=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!x.multiple;var Ee=x.value;Ee!=null?Ci(v,!!x.multiple,Ee,!1):le!==!!x.multiple&&(x.defaultValue!=null?Ci(v,!!x.multiple,x.defaultValue,!0):Ci(v,!!x.multiple,x.multiple?[]:"",!1))}v[L2]=x}catch(Ie){sn(a,a.return,Ie)}}break;case 6:if(Di(l,a),Aa(a),y&4){if(a.stateNode===null)throw Error(t(162));v=a.stateNode,x=a.memoizedProps;try{v.nodeValue=x}catch(Ie){sn(a,a.return,Ie)}}break;case 3:if(Di(l,a),Aa(a),y&4&&p!==null&&p.memoizedState.isDehydrated)try{ql(l.containerInfo)}catch(Ie){sn(a,a.return,Ie)}break;case 4:Di(l,a),Aa(a);break;case 13:Di(l,a),Aa(a),v=a.child,v.flags&8192&&(x=v.memoizedState!==null,v.stateNode.isHidden=x,!x||v.alternate!==null&&v.alternate.memoizedState!==null||(eE=Vt())),y&4&&xk(a);break;case 22:if(ue=p!==null&&p.memoizedState!==null,a.mode&1?(Ar=(ee=Ar)||ue,Di(l,a),Ar=ee):Di(l,a),Aa(a),y&8192){if(ee=a.memoizedState!==null,(a.stateNode.isHidden=ee)&&!ue&&(a.mode&1)!==0)for(Te=a,ue=a.child;ue!==null;){for(de=Te=ue;Te!==null;){switch(le=Te,Ee=le.child,le.tag){case 0:case 11:case 14:case 15:q2(4,le,le.return);break;case 1:Bp(le,le.return);var ke=le.stateNode;if(typeof ke.componentWillUnmount=="function"){y=le,p=le.return;try{l=y,ke.props=l.memoizedProps,ke.state=l.memoizedState,ke.componentWillUnmount()}catch(Ie){sn(y,p,Ie)}}break;case 5:Bp(le,le.return);break;case 22:if(le.memoizedState!==null){Sk(de);continue}}Ee!==null?(Ee.return=le,Te=Ee):Sk(de)}ue=ue.sibling}e:for(ue=null,de=a;;){if(de.tag===5){if(ue===null){ue=de;try{v=de.stateNode,ee?(x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(H=de.stateNode,q=de.memoizedProps.style,M=q!=null&&q.hasOwnProperty("display")?q.display:null,H.style.display=Bl("display",M))}catch(Ie){sn(a,a.return,Ie)}}}else if(de.tag===6){if(ue===null)try{de.stateNode.nodeValue=ee?"":de.memoizedProps}catch(Ie){sn(a,a.return,Ie)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===a)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===a)break e;for(;de.sibling===null;){if(de.return===null||de.return===a)break e;ue===de&&(ue=null),de=de.return}ue===de&&(ue=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Di(l,a),Aa(a),y&4&&xk(a);break;case 21:break;default:Di(l,a),Aa(a)}}function Aa(a){var l=a.flags;if(l&2){try{e:{for(var p=a.return;p!==null;){if(vk(p)){var y=p;break e}p=p.return}throw Error(t(160))}switch(y.tag){case 5:var v=y.stateNode;y.flags&32&&($u(v,""),y.flags&=-33);var x=Ak(a);Yx(a,x,v);break;case 3:case 4:var M=y.stateNode.containerInfo,H=Ak(a);Xx(a,H,M);break;default:throw Error(t(161))}}catch(q){sn(a,a.return,q)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function QO(a,l,p){Te=a,bk(a)}function bk(a,l,p){for(var y=(a.mode&1)!==0;Te!==null;){var v=Te,x=v.child;if(v.tag===22&&y){var M=v.memoizedState!==null||Sv;if(!M){var H=v.alternate,q=H!==null&&H.memoizedState!==null||Ar;H=Sv;var ee=Ar;if(Sv=M,(Ar=q)&&!ee)for(Te=v;Te!==null;)M=Te,q=M.child,M.tag===22&&M.memoizedState!==null?Fk(v):q!==null?(q.return=M,Te=q):Fk(v);for(;x!==null;)Te=x,bk(x),x=x.sibling;Te=v,Sv=H,Ar=ee}Ck(a)}else(v.subtreeFlags&8772)!==0&&x!==null?(x.return=v,Te=x):Ck(a)}}function Ck(a){for(;Te!==null;){var l=Te;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Ar||Fv(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Ar)if(p===null)y.componentDidMount();else{var v=l.elementType===l.type?p.memoizedProps:Pi(l.type,p.memoizedProps);y.componentDidUpdate(v,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var x=l.updateQueue;x!==null&&ST(l,x,y);break;case 3:var M=l.updateQueue;if(M!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}ST(l,M,p)}break;case 5:var H=l.stateNode;if(p===null&&l.flags&4){p=H;var q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&p.focus();break;case"img":q.src&&(p.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ee=l.alternate;if(ee!==null){var ue=ee.memoizedState;if(ue!==null){var de=ue.dehydrated;de!==null&&ql(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ar||l.flags&512&&Qx(l)}catch(le){sn(l,l.return,le)}}if(l===a){Te=null;break}if(p=l.sibling,p!==null){p.return=l.return,Te=p;break}Te=l.return}}function Sk(a){for(;Te!==null;){var l=Te;if(l===a){Te=null;break}var p=l.sibling;if(p!==null){p.return=l.return,Te=p;break}Te=l.return}}function Fk(a){for(;Te!==null;){var l=Te;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{Fv(4,l)}catch(q){sn(l,p,q)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var v=l.return;try{y.componentDidMount()}catch(q){sn(l,v,q)}}var x=l.return;try{Qx(l)}catch(q){sn(l,x,q)}break;case 5:var M=l.return;try{Qx(l)}catch(q){sn(l,M,q)}}}catch(q){sn(l,l.return,q)}if(l===a){Te=null;break}var H=l.sibling;if(H!==null){H.return=l.return,Te=H;break}Te=l.return}}var XO=Math.ceil,Tv=j.ReactCurrentDispatcher,Jx=j.ReactCurrentOwner,ei=j.ReactCurrentBatchConfig,ct=0,zn=null,bn=null,nr=0,ws=0,Vp=Jl(0),Nn=0,K2=null,cd=0,kv=0,Zx=0,Q2=null,Kr=null,eE=0,Up=1/0,Po=null,Iv=!1,tE=null,sc=null,Pv=!1,ic=null,Rv=0,X2=0,nE=null,Dv=-1,Nv=0;function Dr(){return(ct&6)!==0?Vt():Dv!==-1?Dv:Dv=Vt()}function ac(a){return(a.mode&1)===0?1:(ct&2)!==0&&nr!==0?nr&-nr:DO.transition!==null?(Nv===0&&(Nv=y2()),Nv):(a=it,a!==0||(a=window.event,a=a===void 0?16:mp(a.type)),a)}function Ni(a,l,p,y){if(50<X2)throw X2=0,nE=null,Error(t(185));Yu(a,p,y),((ct&2)===0||a!==zn)&&(a===zn&&((ct&2)===0&&(kv|=p),Nn===4&&oc(a,nr)),Qr(a,y),p===1&&ct===0&&(l.mode&1)===0&&(Up=Vt()+500,lv&&ec()))}function Qr(a,l){var p=a.callbackNode;Xu(a,l);var y=wo(a,a===zn?nr:0);if(y===0)p!==null&&lp(p),a.callbackNode=null,a.callbackPriority=0;else if(l=y&-y,a.callbackPriority!==l){if(p!=null&&lp(p),l===1)a.tag===0?RO(kk.bind(null,a)):fT(kk.bind(null,a)),TO(function(){(ct&6)===0&&ec()}),p=null;else{switch(oa(y)){case 1:p=cp;break;case 4:p=f2;break;case 16:p=Gu;break;case 536870912:p=up;break;default:p=Gu}p=Ok(p,Tk.bind(null,a))}a.callbackPriority=l,a.callbackNode=p}}function Tk(a,l){if(Dv=-1,Nv=0,(ct&6)!==0)throw Error(t(327));var p=a.callbackNode;if(jp()&&a.callbackNode!==p)return null;var y=wo(a,a===zn?nr:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||l)l=Mv(a,y);else{l=y;var v=ct;ct|=2;var x=Pk();(zn!==a||nr!==l)&&(Po=null,Up=Vt()+500,dd(a,l));do try{ZO();break}catch(H){Ik(a,H)}while(!0);Ax(),Tv.current=x,ct=v,bn!==null?l=0:(zn=null,nr=0,l=Nn)}if(l!==0){if(l===2&&(v=g2(a),v!==0&&(y=v,l=rE(a,v))),l===1)throw p=K2,dd(a,0),oc(a,y),Qr(a,Vt()),p;if(l===6)oc(a,y);else{if(v=a.current.alternate,(y&30)===0&&!YO(v)&&(l=Mv(a,y),l===2&&(x=g2(a),x!==0&&(y=x,l=rE(a,x))),l===1))throw p=K2,dd(a,0),oc(a,y),Qr(a,Vt()),p;switch(a.finishedWork=v,a.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:hd(a,Kr,Po);break;case 3:if(oc(a,y),(y&130023424)===y&&(l=eE+500-Vt(),10<l)){if(wo(a,0)!==0)break;if(v=a.suspendedLanes,(v&y)!==y){Dr(),a.pingedLanes|=a.suspendedLanes&v;break}a.timeoutHandle=cx(hd.bind(null,a,Kr,Po),l);break}hd(a,Kr,Po);break;case 4:if(oc(a,y),(y&4194240)===y)break;for(l=a.eventTimes,v=-1;0<y;){var M=31-ds(y);x=1<<M,M=l[M],M>v&&(v=M),y&=~x}if(y=v,y=Vt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*XO(y/1960))-y,10<y){a.timeoutHandle=cx(hd.bind(null,a,Kr,Po),y);break}hd(a,Kr,Po);break;case 5:hd(a,Kr,Po);break;default:throw Error(t(329))}}}return Qr(a,Vt()),a.callbackNode===p?Tk.bind(null,a):null}function rE(a,l){var p=Q2;return a.current.memoizedState.isDehydrated&&(dd(a,l).flags|=256),a=Mv(a,l),a!==2&&(l=Kr,Kr=p,l!==null&&sE(l)),a}function sE(a){Kr===null?Kr=a:Kr.push.apply(Kr,a)}function YO(a){for(var l=a;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var v=p[y],x=v.getSnapshot;v=v.value;try{if(!ki(x(),v))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function oc(a,l){for(l&=~Zx,l&=~kv,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var p=31-ds(l),y=1<<p;a[p]=-1,l&=~y}}function kk(a){if((ct&6)!==0)throw Error(t(327));jp();var l=wo(a,0);if((l&1)===0)return Qr(a,Vt()),null;var p=Mv(a,l);if(a.tag!==0&&p===2){var y=g2(a);y!==0&&(l=y,p=rE(a,y))}if(p===1)throw p=K2,dd(a,0),oc(a,l),Qr(a,Vt()),p;if(p===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,hd(a,Kr,Po),Qr(a,Vt()),null}function iE(a,l){var p=ct;ct|=1;try{return a(l)}finally{ct=p,ct===0&&(Up=Vt()+500,lv&&ec())}}function ud(a){ic!==null&&ic.tag===0&&(ct&6)===0&&jp();var l=ct;ct|=1;var p=ei.transition,y=it;try{if(ei.transition=null,it=1,a)return a()}finally{it=y,ei.transition=p,ct=l,(ct&6)===0&&ec()}}function aE(){ws=Vp.current,jt(Vp)}function dd(a,l){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;if(p!==-1&&(a.timeoutHandle=-1,FO(p)),bn!==null)for(p=bn.return;p!==null;){var y=p;switch(mx(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&av();break;case 3:Lp(),jt(Wr),jt(yr),Tx();break;case 5:Sx(y);break;case 4:Lp();break;case 13:jt(Qt);break;case 19:jt(Qt);break;case 10:_x(y.type._context);break;case 22:case 23:aE()}p=p.return}if(zn=a,bn=a=lc(a.current,null),nr=ws=l,Nn=0,K2=null,Zx=kv=cd=0,Kr=Q2=null,ad!==null){for(l=0;l<ad.length;l++)if(p=ad[l],y=p.interleaved,y!==null){p.interleaved=null;var v=y.next,x=p.pending;if(x!==null){var M=x.next;x.next=v,y.next=M}p.pending=y}ad=null}return a}function Ik(a,l){do{var p=bn;try{if(Ax(),wv.current=xv,vv){for(var y=Xt.memoizedState;y!==null;){var v=y.queue;v!==null&&(v.pending=null),y=y.next}vv=!1}if(ld=0,$n=Dn=Xt=null,$2=!1,z2=0,Jx.current=null,p===null||p.return===null){Nn=1,K2=l,bn=null;break}e:{var x=a,M=p.return,H=p,q=l;if(l=nr,H.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var ee=q,ue=H,de=ue.tag;if((ue.mode&1)===0&&(de===0||de===11||de===15)){var le=ue.alternate;le?(ue.updateQueue=le.updateQueue,ue.memoizedState=le.memoizedState,ue.lanes=le.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var Ee=tk(M);if(Ee!==null){Ee.flags&=-257,nk(Ee,M,H,x,l),Ee.mode&1&&ek(x,ee,l),l=Ee,q=ee;var ke=l.updateQueue;if(ke===null){var Ie=new Set;Ie.add(q),l.updateQueue=Ie}else ke.add(q);break e}else{if((l&1)===0){ek(x,ee,l),oE();break e}q=Error(t(426))}}else if(Ht&&H.mode&1){var yn=tk(M);if(yn!==null){(yn.flags&65536)===0&&(yn.flags|=256),nk(yn,M,H,x,l),wx(Op(q,H));break e}}x=q=Op(q,H),Nn!==4&&(Nn=2),Q2===null?Q2=[x]:Q2.push(x),x=M;do{switch(x.tag){case 3:x.flags|=65536,l&=-l,x.lanes|=l;var Y=JT(x,q,l);CT(x,Y);break e;case 1:H=q;var Q=x.type,Z=x.stateNode;if((x.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(sc===null||!sc.has(Z)))){x.flags|=65536,l&=-l,x.lanes|=l;var pe=ZT(x,H,l);CT(x,pe);break e}}x=x.return}while(x!==null)}Dk(p)}catch(Re){l=Re,bn===p&&p!==null&&(bn=p=p.return);continue}break}while(!0)}function Pk(){var a=Tv.current;return Tv.current=xv,a===null?xv:a}function oE(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),zn===null||(cd&268435455)===0&&(kv&268435455)===0||oc(zn,nr)}function Mv(a,l){var p=ct;ct|=2;var y=Pk();(zn!==a||nr!==l)&&(Po=null,dd(a,l));do try{JO();break}catch(v){Ik(a,v)}while(!0);if(Ax(),ct=p,Tv.current=y,bn!==null)throw Error(t(261));return zn=null,nr=0,Nn}function JO(){for(;bn!==null;)Rk(bn)}function ZO(){for(;bn!==null&&!Wu();)Rk(bn)}function Rk(a){var l=Lk(a.alternate,a,ws);a.memoizedProps=a.pendingProps,l===null?Dk(a):bn=l,Jx.current=null}function Dk(a){var l=a;do{var p=l.alternate;if(a=l.return,(l.flags&32768)===0){if(p=WO(p,l,ws),p!==null){bn=p;return}}else{if(p=GO(p,l),p!==null){p.flags&=32767,bn=p;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Nn=6,bn=null;return}}if(l=l.sibling,l!==null){bn=l;return}bn=l=a}while(l!==null);Nn===0&&(Nn=5)}function hd(a,l,p){var y=it,v=ei.transition;try{ei.transition=null,it=1,e4(a,l,p,y)}finally{ei.transition=v,it=y}return null}function e4(a,l,p,y){do jp();while(ic!==null);if((ct&6)!==0)throw Error(t(327));p=a.finishedWork;var v=a.finishedLanes;if(p===null)return null;if(a.finishedWork=null,a.finishedLanes=0,p===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var x=p.lanes|p.childLanes;if(q1(a,x),a===zn&&(bn=zn=null,nr=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Pv||(Pv=!0,Ok(Gu,function(){return jp(),null})),x=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||x){x=ei.transition,ei.transition=null;var M=it;it=1;var H=ct;ct|=4,Jx.current=null,KO(a,p),Ek(p,a),AO(ox),_o=!!ax,ox=ax=null,a.current=p,QO(p),yo(),ct=H,it=M,ei.transition=x}else a.current=p;if(Pv&&(Pv=!1,ic=a,Rv=v),x=a.pendingLanes,x===0&&(sc=null),$0(p.stateNode),Qr(a,Vt()),l!==null)for(y=a.onRecoverableError,p=0;p<l.length;p++)v=l[p],y(v.value,{componentStack:v.stack,digest:v.digest});if(Iv)throw Iv=!1,a=tE,tE=null,a;return(Rv&1)!==0&&a.tag!==0&&jp(),x=a.pendingLanes,(x&1)!==0?a===nE?X2++:(X2=0,nE=a):X2=0,ec(),null}function jp(){if(ic!==null){var a=oa(Rv),l=ei.transition,p=it;try{if(ei.transition=null,it=16>a?16:a,ic===null)var y=!1;else{if(a=ic,ic=null,Rv=0,(ct&6)!==0)throw Error(t(331));var v=ct;for(ct|=4,Te=a.current;Te!==null;){var x=Te,M=x.child;if((Te.flags&16)!==0){var H=x.deletions;if(H!==null){for(var q=0;q<H.length;q++){var ee=H[q];for(Te=ee;Te!==null;){var ue=Te;switch(ue.tag){case 0:case 11:case 15:q2(8,ue,x)}var de=ue.child;if(de!==null)de.return=ue,Te=de;else for(;Te!==null;){ue=Te;var le=ue.sibling,Ee=ue.return;if(wk(ue),ue===ee){Te=null;break}if(le!==null){le.return=Ee,Te=le;break}Te=Ee}}}var ke=x.alternate;if(ke!==null){var Ie=ke.child;if(Ie!==null){ke.child=null;do{var yn=Ie.sibling;Ie.sibling=null,Ie=yn}while(Ie!==null)}}Te=x}}if((x.subtreeFlags&2064)!==0&&M!==null)M.return=x,Te=M;else e:for(;Te!==null;){if(x=Te,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:q2(9,x,x.return)}var Y=x.sibling;if(Y!==null){Y.return=x.return,Te=Y;break e}Te=x.return}}var Q=a.current;for(Te=Q;Te!==null;){M=Te;var Z=M.child;if((M.subtreeFlags&2064)!==0&&Z!==null)Z.return=M,Te=Z;else e:for(M=Q;Te!==null;){if(H=Te,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:Fv(9,H)}}catch(Re){sn(H,H.return,Re)}if(H===M){Te=null;break e}var pe=H.sibling;if(pe!==null){pe.return=H.return,Te=pe;break e}Te=H.return}}if(ct=v,ec(),us&&typeof us.onPostCommitFiberRoot=="function")try{us.onPostCommitFiberRoot(qu,a)}catch{}y=!0}return y}finally{it=p,ei.transition=l}}return!1}function Nk(a,l,p){l=Op(p,l),l=JT(a,l,1),a=nc(a,l,1),l=Dr(),a!==null&&(Yu(a,1,l),Qr(a,l))}function sn(a,l,p){if(a.tag===3)Nk(a,a,p);else for(;l!==null;){if(l.tag===3){Nk(l,a,p);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(sc===null||!sc.has(y))){a=Op(p,a),a=ZT(l,a,1),l=nc(l,a,1),a=Dr(),l!==null&&(Yu(l,1,a),Qr(l,a));break}}l=l.return}}function t4(a,l,p){var y=a.pingCache;y!==null&&y.delete(l),l=Dr(),a.pingedLanes|=a.suspendedLanes&p,zn===a&&(nr&p)===p&&(Nn===4||Nn===3&&(nr&130023424)===nr&&500>Vt()-eE?dd(a,0):Zx|=p),Qr(a,l)}function Mk(a,l){l===0&&((a.mode&1)===0?l=1:(l=Hl,Hl<<=1,(Hl&130023424)===0&&(Hl=4194304)));var p=Dr();a=To(a,l),a!==null&&(Yu(a,l,p),Qr(a,p))}function n4(a){var l=a.memoizedState,p=0;l!==null&&(p=l.retryLane),Mk(a,p)}function r4(a,l){var p=0;switch(a.tag){case 13:var y=a.stateNode,v=a.memoizedState;v!==null&&(p=v.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),Mk(a,p)}var Lk;Lk=function(a,l,p){if(a!==null)if(a.memoizedProps!==l.pendingProps||Wr.current)qr=!0;else{if((a.lanes&p)===0&&(l.flags&128)===0)return qr=!1,HO(a,l,p);qr=(a.flags&131072)!==0}else qr=!1,Ht&&(l.flags&1048576)!==0&&mT(l,uv,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Cv(a,l),a=l.pendingProps;var v=kp(l,yr.current);Mp(l,p),v=Px(null,l,y,a,v,p);var x=Rx();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Gr(y)?(x=!0,ov(l)):x=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,bx(l),v.updater=Ev,l.stateNode=v,v._reactInternals=l,Bx(l,y,a,p),l=$x(null,l,y,!0,x,p)):(l.tag=0,Ht&&x&&fx(l),Rr(null,l,v,p),l=l.child),l;case 16:y=l.elementType;e:{switch(Cv(a,l),a=l.pendingProps,v=y._init,y=v(y._payload),l.type=y,v=l.tag=i4(y),a=Pi(y,a),v){case 0:l=jx(null,l,y,a,p);break e;case 1:l=lk(null,l,y,a,p);break e;case 11:l=rk(null,l,y,a,p);break e;case 14:l=sk(null,l,y,Pi(y.type,a),p);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,v=l.pendingProps,v=l.elementType===y?v:Pi(y,v),jx(a,l,y,v,p);case 1:return y=l.type,v=l.pendingProps,v=l.elementType===y?v:Pi(y,v),lk(a,l,y,v,p);case 3:e:{if(ck(l),a===null)throw Error(t(387));y=l.pendingProps,x=l.memoizedState,v=x.element,bT(a,l),gv(l,y,null,p);var M=l.memoizedState;if(y=M.element,x.isDehydrated)if(x={element:y,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){v=Op(Error(t(423)),l),l=uk(a,l,y,p,v);break e}else if(y!==v){v=Op(Error(t(424)),l),l=uk(a,l,y,p,v);break e}else for(ys=Yl(l.stateNode.containerInfo.firstChild),gs=l,Ht=!0,Ii=null,p=xT(l,null,y,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Rp(),y===v){l=Io(a,l,p);break e}Rr(a,l,y,p)}l=l.child}return l;case 5:return FT(l),a===null&&yx(l),y=l.type,v=l.pendingProps,x=a!==null?a.memoizedProps:null,M=v.children,lx(y,v)?M=null:x!==null&&lx(y,x)&&(l.flags|=32),ok(a,l),Rr(a,l,M,p),l.child;case 6:return a===null&&yx(l),null;case 13:return dk(a,l,p);case 4:return Cx(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=Dp(l,null,y,p):Rr(a,l,y,p),l.child;case 11:return y=l.type,v=l.pendingProps,v=l.elementType===y?v:Pi(y,v),rk(a,l,y,v,p);case 7:return Rr(a,l,l.pendingProps,p),l.child;case 8:return Rr(a,l,l.pendingProps.children,p),l.child;case 12:return Rr(a,l,l.pendingProps.children,p),l.child;case 10:e:{if(y=l.type._context,v=l.pendingProps,x=l.memoizedProps,M=v.value,Nt(pv,y._currentValue),y._currentValue=M,x!==null)if(ki(x.value,M)){if(x.children===v.children&&!Wr.current){l=Io(a,l,p);break e}}else for(x=l.child,x!==null&&(x.return=l);x!==null;){var H=x.dependencies;if(H!==null){M=x.child;for(var q=H.firstContext;q!==null;){if(q.context===y){if(x.tag===1){q=ko(-1,p&-p),q.tag=2;var ee=x.updateQueue;if(ee!==null){ee=ee.shared;var ue=ee.pending;ue===null?q.next=q:(q.next=ue.next,ue.next=q),ee.pending=q}}x.lanes|=p,q=x.alternate,q!==null&&(q.lanes|=p),xx(x.return,p,l),H.lanes|=p;break}q=q.next}}else if(x.tag===10)M=x.type===l.type?null:x.child;else if(x.tag===18){if(M=x.return,M===null)throw Error(t(341));M.lanes|=p,H=M.alternate,H!==null&&(H.lanes|=p),xx(M,p,l),M=x.sibling}else M=x.child;if(M!==null)M.return=x;else for(M=x;M!==null;){if(M===l){M=null;break}if(x=M.sibling,x!==null){x.return=M.return,M=x;break}M=M.return}x=M}Rr(a,l,v.children,p),l=l.child}return l;case 9:return v=l.type,y=l.pendingProps.children,Mp(l,p),v=Js(v),y=y(v),l.flags|=1,Rr(a,l,y,p),l.child;case 14:return y=l.type,v=Pi(y,l.pendingProps),v=Pi(y.type,v),sk(a,l,y,v,p);case 15:return ik(a,l,l.type,l.pendingProps,p);case 17:return y=l.type,v=l.pendingProps,v=l.elementType===y?v:Pi(y,v),Cv(a,l),l.tag=1,Gr(y)?(a=!0,ov(l)):a=!1,Mp(l,p),XT(l,y,v),Bx(l,y,v,p),$x(null,l,y,!0,a,p);case 19:return pk(a,l,p);case 22:return ak(a,l,p)}throw Error(t(156,l.tag))};function Ok(a,l){return p2(a,l)}function s4(a,l,p,y){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(a,l,p,y){return new s4(a,l,p,y)}function lE(a){return a=a.prototype,!(!a||!a.isReactComponent)}function i4(a){if(typeof a=="function")return lE(a)?1:0;if(a!=null){if(a=a.$$typeof,a===G)return 11;if(a===ce)return 14}return 2}function lc(a,l){var p=a.alternate;return p===null?(p=ti(a.tag,l,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=l,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&14680064,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,l=a.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p}function Lv(a,l,p,y,v,x){var M=2;if(y=a,typeof a=="function")lE(a)&&(M=1);else if(typeof a=="string")M=5;else e:switch(a){case D:return pd(p.children,v,x,l);case R:M=8,v|=8;break;case L:return a=ti(12,p,l,v|2),a.elementType=L,a.lanes=x,a;case $:return a=ti(13,p,l,v),a.elementType=$,a.lanes=x,a;case ye:return a=ti(19,p,l,v),a.elementType=ye,a.lanes=x,a;case ge:return Ov(p,v,x,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case U:M=10;break e;case V:M=9;break e;case G:M=11;break e;case ce:M=14;break e;case he:M=16,y=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=ti(M,p,l,v),l.elementType=a,l.type=y,l.lanes=x,l}function pd(a,l,p,y){return a=ti(7,a,y,l),a.lanes=p,a}function Ov(a,l,p,y){return a=ti(22,a,y,l),a.elementType=ge,a.lanes=p,a.stateNode={isHidden:!1},a}function cE(a,l,p){return a=ti(6,a,null,l),a.lanes=p,a}function uE(a,l,p){return l=ti(4,a.children!==null?a.children:[],a.key,l),l.lanes=p,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function a4(a,l,p,y,v){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=w2(0),this.expirationTimes=w2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w2(0),this.identifierPrefix=y,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function dE(a,l,p,y,v,x,M,H,q){return a=new a4(a,l,p,H,q),l===1?(l=1,x===!0&&(l|=8)):l=0,x=ti(3,null,null,l),a.current=x,x.stateNode=a,x.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},bx(x),a}function o4(a,l,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:y==null?null:""+y,children:a,containerInfo:l,implementation:p}}function Bk(a){if(!a)return Zl;a=a._reactInternals;e:{if(Fi(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Gr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var p=a.type;if(Gr(p))return hT(a,p,l)}return l}function Vk(a,l,p,y,v,x,M,H,q){return a=dE(p,y,!0,a,v,x,M,H,q),a.context=Bk(null),p=a.current,y=Dr(),v=ac(p),x=ko(y,v),x.callback=l??null,nc(p,x,v),a.current.lanes=v,Yu(a,v,y),Qr(a,y),a}function Bv(a,l,p,y){var v=l.current,x=Dr(),M=ac(v);return p=Bk(p),l.context===null?l.context=p:l.pendingContext=p,l=ko(x,M),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=nc(v,l,M),a!==null&&(Ni(a,v,M,x),mv(a,v,M)),M}function Vv(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Uk(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<l?p:l}}function hE(a,l){Uk(a,l),(a=a.alternate)&&Uk(a,l)}function l4(){return null}var jk=typeof reportError=="function"?reportError:function(a){console.error(a)};function pE(a){this._internalRoot=a}Uv.prototype.render=pE.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));Bv(a,l,null,null)},Uv.prototype.unmount=pE.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;ud(function(){Bv(null,a,null,null)}),l[bo]=null}};function Uv(a){this._internalRoot=a}Uv.prototype.unstable_scheduleHydration=function(a){if(a){var l=x2();a={blockedOn:null,target:a,priority:l};for(var p=0;p<hs.length&&l!==0&&l<hs[p].priority;p++);hs.splice(p,0,a),p===0&&pp(a)}};function fE(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function jv(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function $k(){}function c4(a,l,p,y,v){if(v){if(typeof y=="function"){var x=y;y=function(){var ee=Vv(M);x.call(ee)}}var M=Vk(l,y,a,0,null,!1,!1,"",$k);return a._reactRootContainer=M,a[bo]=M.current,N2(a.nodeType===8?a.parentNode:a),ud(),M}for(;v=a.lastChild;)a.removeChild(v);if(typeof y=="function"){var H=y;y=function(){var ee=Vv(q);H.call(ee)}}var q=dE(a,0,!1,null,null,!1,!1,"",$k);return a._reactRootContainer=q,a[bo]=q.current,N2(a.nodeType===8?a.parentNode:a),ud(function(){Bv(l,q,p,y)}),q}function $v(a,l,p,y,v){var x=p._reactRootContainer;if(x){var M=x;if(typeof v=="function"){var H=v;v=function(){var q=Vv(M);H.call(q)}}Bv(l,M,a,v)}else M=c4(p,l,a,v,y);return Vv(M)}A2=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var p=mt(l.pendingLanes);p!==0&&(v2(l,p|1),Qr(l,Vt()),(ct&6)===0&&(Up=Vt()+500,ec()))}break;case 13:ud(function(){var y=To(a,1);if(y!==null){var v=Dr();Ni(y,a,1,v)}}),hE(a,1)}},dp=function(a){if(a.tag===13){var l=To(a,134217728);if(l!==null){var p=Dr();Ni(l,a,134217728,p)}hE(a,134217728)}},_2=function(a){if(a.tag===13){var l=ac(a),p=To(a,l);if(p!==null){var y=Dr();Ni(p,a,l,y)}hE(a,l)}},x2=function(){return it},E2=function(a,l){var p=it;try{return it=a,l()}finally{it=p}},fo=function(a,l,p){switch(l){case"input":if(ju(a,p),l=p.name,p.type==="radio"&&l!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var y=p[l];if(y!==a&&y.form===a.form){var v=iv(y);if(!v)throw Error(t(90));po(y),ju(y,v)}}}break;case"textarea":I0(a,p);break;case"select":l=p.value,l!=null&&Ci(a,!!p.multiple,l,!1)}},D0=iE,N0=ud;var u4={usingClientEntryPoint:!1,Events:[O2,Fp,iv,Ul,jl,iE]},Y2={findFiberByHostInstance:nd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},d4={bundleType:Y2.bundleType,version:Y2.version,rendererPackageName:Y2.rendererPackageName,rendererConfig:Y2.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=j0(a),a===null?null:a.stateNode},findFiberByHostInstance:Y2.findFiberByHostInstance||l4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zv.isDisabled&&zv.supportsFiber)try{qu=zv.inject(d4),us=zv}catch{}}return Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u4,Xr.createPortal=function(a,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fE(l))throw Error(t(200));return o4(a,l,null,p)},Xr.createRoot=function(a,l){if(!fE(a))throw Error(t(299));var p=!1,y="",v=jk;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=dE(a,1,!1,null,null,p,!1,y,v),a[bo]=l.current,N2(a.nodeType===8?a.parentNode:a),new pE(l)},Xr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=j0(l),a=a===null?null:a.stateNode,a},Xr.flushSync=function(a){return ud(a)},Xr.hydrate=function(a,l,p){if(!jv(l))throw Error(t(200));return $v(null,a,l,!0,p)},Xr.hydrateRoot=function(a,l,p){if(!fE(a))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,v=!1,x="",M=jk;if(p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(x=p.identifierPrefix),p.onRecoverableError!==void 0&&(M=p.onRecoverableError)),l=Vk(l,null,a,1,p??null,v,!1,x,M),a[bo]=l.current,N2(a),y)for(a=0;a<y.length;a++)p=y[a],v=p._getVersion,v=v(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,v]:l.mutableSourceEagerHydrationData.push(p,v);return new Uv(l)},Xr.render=function(a,l,p){if(!jv(l))throw Error(t(200));return $v(null,a,l,!1,p)},Xr.unmountComponentAtNode=function(a){if(!jv(a))throw Error(t(40));return a._reactRootContainer?(ud(function(){$v(null,null,a,!1,function(){a._reactRootContainer=null,a[bo]=null})}),!0):!1},Xr.unstable_batchedUpdates=iE,Xr.unstable_renderSubtreeIntoContainer=function(a,l,p,y){if(!jv(p))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return $v(a,l,p,!1,y)},Xr.version="18.3.1-next-f1338f8080-20240426",Xr}var Yk;function x4(){if(Yk)return wE.exports;Yk=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),wE.exports=_4(),wE.exports}var Jk;function E4(){if(Jk)return Wv;Jk=1;var s=x4();return Wv.createRoot=s.createRoot,Wv.hydrateRoot=s.hydrateRoot,Wv}var b4=E4();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zk="popstate";function C4(s={}){function e(r,i){let{pathname:o="/",search:u="",hash:d=""}=qh(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),QE("",{pathname:o,search:u,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){let o=r.document.querySelector("base"),u="";if(o&&o.getAttribute("href")){let d=r.location.href,h=d.indexOf("#");u=h===-1?d:d.slice(0,h)}return u+"#"+(typeof i=="string"?i:zg(i))}function n(r,i){xi(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return F4(e,t,n,s)}function Kt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function xi(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function S4(){return Math.random().toString(36).substring(2,10)}function eI(s,e){return{usr:s.state,key:s.key,idx:e}}function QE(s,e,t=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?qh(e):e,state:t,key:e&&e.key||n||S4()}}function zg({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function qh(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substring(n),s=s.substring(0,n)),s&&(e.pathname=s)}return e}function F4(s,e,t,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,o=r.history,u="POP",d=null,h=f();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function f(){return(o.state||{idx:null}).idx}function g(){u="POP";let T=f(),P=T==null?null:T-h;h=T,d&&d({action:u,location:C.location,delta:P})}function w(T,P){u="PUSH";let O=QE(C.location,T,P);t&&t(O,T),h=f()+1;let N=eI(O,h),j=C.createHref(O);try{o.pushState(N,"",j)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;r.location.assign(j)}i&&d&&d({action:u,location:C.location,delta:1})}function A(T,P){u="REPLACE";let O=QE(C.location,T,P);t&&t(O,T),h=f();let N=eI(O,h),j=C.createHref(O);o.replaceState(N,"",j),i&&d&&d({action:u,location:C.location,delta:0})}function S(T){return T4(T)}let C={get action(){return u},get location(){return s(r,o)},listen(T){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Zk,g),d=T,()=>{r.removeEventListener(Zk,g),d=null}},createHref(T){return e(r,T)},createURL:S,encodeLocation(T){let P=S(T);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:w,replace:A,go(T){return o.go(T)}};return C}function T4(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Kt(t,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:zg(s);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function CR(s,e,t="/"){return k4(s,e,t,!1)}function k4(s,e,t,n){let r=typeof e=="string"?qh(e):e,i=Sl(r.pathname||"/",t);if(i==null)return null;let o=SR(s);I4(o);let u=null;for(let d=0;u==null&&d<o.length;++d){let h=j4(i);u=V4(o[d],h,n)}return u}function SR(s,e=[],t=[],n="",r=!1){let i=(o,u,d=r,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Kt(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let g=xl([n,f.relativePath]),w=t.concat(f);o.children&&o.children.length>0&&(Kt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),SR(o.children,e,w,g,d)),!(o.path==null&&!o.index)&&e.push({path:g,score:O4(g,o.index),routesMeta:w})};return s.forEach((o,u)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,u);else for(let h of FR(o.path))i(o,u,!0,h)}),e}function FR(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let o=FR(n.join("/")),u=[];return u.push(...o.map(d=>d===""?i:[i,d].join("/"))),r&&u.push(...o),u.map(d=>s.startsWith("/")&&d===""?"/":d)}function I4(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:B4(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var P4=/^:[\w-]+$/,R4=3,D4=2,N4=1,M4=10,L4=-2,tI=s=>s==="*";function O4(s,e){let t=s.split("/"),n=t.length;return t.some(tI)&&(n+=L4),e&&(n+=D4),t.filter(r=>!tI(r)).reduce((r,i)=>r+(P4.test(i)?R4:i===""?N4:M4),n)}function B4(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function V4(s,e,t=!1){let{routesMeta:n}=s,r={},i="/",o=[];for(let u=0;u<n.length;++u){let d=n[u],h=u===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=i_({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),w=d.route;if(!g&&h&&t&&!n[n.length-1].route.index&&(g=i_({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!g)return null;Object.assign(r,g.params),o.push({params:r,pathname:xl([i,g.pathname]),pathnameBase:W4(xl([i,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(i=xl([i,g.pathnameBase]))}return o}function i_(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=U4(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:n.reduce((h,{paramName:f,isOptional:g},w)=>{if(f==="*"){let S=u[w]||"";o=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const A=u[w];return g&&!A?h[f]=void 0:h[f]=(A||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:s}}function U4(s,e=!1,t=!0){xi(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function j4(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xi(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Sl(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}var $4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function z4(s,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?qh(s):s,i;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?i=nI(t.substring(1),"/"):i=nI(t,e)):i=e,{pathname:i,search:G4(n),hash:q4(r)}}function nI(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function _E(s,e,t,n){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function H4(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rS(s){let e=H4(s);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function sS(s,e,t,n=!1){let r;typeof s=="string"?r=qh(s):(r={...s},Kt(!r.pathname||!r.pathname.includes("?"),_E("?","pathname","search",r)),Kt(!r.pathname||!r.pathname.includes("#"),_E("#","pathname","hash",r)),Kt(!r.search||!r.search.includes("#"),_E("#","search","hash",r)));let i=s===""||r.pathname==="",o=i?"/":r.pathname,u;if(o==null)u=t;else{let g=e.length-1;if(!n&&o.startsWith("..")){let w=o.split("/");for(;w[0]==="..";)w.shift(),g-=1;r.pathname=w.join("/")}u=g>=0?e[g]:"/"}let d=z4(r,u),h=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}var xl=s=>s.join("/").replace(/\/\/+/g,"/"),W4=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),G4=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,q4=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,K4=class{constructor(s,e,t,n=!1){this.status=s,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Q4(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function X4(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var TR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function kR(s,e){let t=s;if(typeof t!="string"||!$4.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,r=!1;if(TR)try{let i=new URL(window.location.href),o=t.startsWith("//")?new URL(i.protocol+t):new URL(t),u=Sl(o.pathname,e);o.origin===i.origin&&u!=null?t=u+o.search+o.hash:r=!0}catch{xi(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var IR=["POST","PUT","PATCH","DELETE"];new Set(IR);var Y4=["GET",...IR];new Set(Y4);var Qm=K.createContext(null);Qm.displayName="DataRouter";var s1=K.createContext(null);s1.displayName="DataRouterState";var J4=K.createContext(!1),PR=K.createContext({isTransitioning:!1});PR.displayName="ViewTransition";var Z4=K.createContext(new Map);Z4.displayName="Fetchers";var e7=K.createContext(null);e7.displayName="Await";var qs=K.createContext(null);qs.displayName="Navigation";var s0=K.createContext(null);s0.displayName="Location";var co=K.createContext({outlet:null,matches:[],isDataRoute:!1});co.displayName="Route";var iS=K.createContext(null);iS.displayName="RouteError";var RR="REACT_ROUTER_ERROR",t7="REDIRECT",n7="ROUTE_ERROR_RESPONSE";function r7(s){if(s.startsWith(`${RR}:${t7}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function s7(s){if(s.startsWith(`${RR}:${n7}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new K4(e.status,e.statusText,e.data)}catch{}}function i7(s,{relative:e}={}){Kt(Xm(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=K.useContext(qs),{hash:r,pathname:i,search:o}=i0(s,{relative:e}),u=i;return t!=="/"&&(u=i==="/"?t:xl([t,i])),n.createHref({pathname:u,search:o,hash:r})}function Xm(){return K.useContext(s0)!=null}function Nu(){return Kt(Xm(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(s0).location}var DR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NR(s){K.useContext(qs).static||K.useLayoutEffect(s)}function i1(){let{isDataRoute:s}=K.useContext(co);return s?w7():a7()}function a7(){Kt(Xm(),"useNavigate() may be used only in the context of a <Router> component.");let s=K.useContext(Qm),{basename:e,navigator:t}=K.useContext(qs),{matches:n}=K.useContext(co),{pathname:r}=Nu(),i=JSON.stringify(rS(n)),o=K.useRef(!1);return NR(()=>{o.current=!0}),K.useCallback((d,h={})=>{if(xi(o.current,DR),!o.current)return;if(typeof d=="number"){t.go(d);return}let f=sS(d,JSON.parse(i),r,h.relative==="path");s==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:xl([e,f.pathname])),(h.replace?t.replace:t.push)(f,h.state,h)},[e,t,i,r,s])}K.createContext(null);function i0(s,{relative:e}={}){let{matches:t}=K.useContext(co),{pathname:n}=Nu(),r=JSON.stringify(rS(t));return K.useMemo(()=>sS(s,JSON.parse(r),n,e==="path"),[s,r,n,e])}function o7(s,e){return MR(s,e)}function MR(s,e,t,n,r){var O;Kt(Xm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=K.useContext(qs),{matches:o}=K.useContext(co),u=o[o.length-1],d=u?u.params:{},h=u?u.pathname:"/",f=u?u.pathnameBase:"/",g=u&&u.route;{let N=g&&g.path||"";OR(h,!g||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let w=Nu(),A;if(e){let N=typeof e=="string"?qh(e):e;Kt(f==="/"||((O=N.pathname)==null?void 0:O.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${N.pathname}" was given in the \`location\` prop.`),A=N}else A=w;let S=A.pathname||"/",C=S;if(f!=="/"){let N=f.replace(/^\//,"").split("/");C="/"+S.replace(/^\//,"").split("/").slice(N.length).join("/")}let T=CR(s,{pathname:C});xi(g||T!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),xi(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=h7(T&&T.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:xl([f,i.encodeLocation?i.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:xl([f,i.encodeLocation?i.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),o,t,n,r);return e&&P?K.createElement(s0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},P):P}function l7(){let s=y7(),e=Q4(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:i},"ErrorBoundary")," or"," ",K.createElement("code",{style:i},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:r},t):null,o)}var c7=K.createElement(l7,null),LR=class extends K.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=s7(s.digest);t&&(s=t)}let e=s!==void 0?K.createElement(co.Provider,{value:this.props.routeContext},K.createElement(iS.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?K.createElement(u7,{error:s},e):e}};LR.contextType=J4;var xE=new WeakMap;function u7({children:s,error:e}){let{basename:t}=K.useContext(qs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=r7(e.digest);if(n){let r=xE.get(e);if(r)throw r;let i=kR(n.location,t);if(TR&&!xE.get(e))if(i.isExternal||n.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:n.replace}));throw xE.set(e,o),o}return K.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return s}function d7({routeContext:s,match:e,children:t}){let n=K.useContext(Qm);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(co.Provider,{value:s},t)}function h7(s,e=[],t=null,n=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let i=s,o=t==null?void 0:t.errors;if(o!=null){let f=i.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);Kt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let u=!1,d=-1;if(t)for(let f=0;f<i.length;f++){let g=i[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:w,errors:A}=t,S=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!A||A[g.route.id]===void 0);if(g.route.lazy||S){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}let h=t&&n?(f,g)=>{var w,A;n(f,{location:t.location,params:((A=(w=t.matches)==null?void 0:w[0])==null?void 0:A.params)??{},unstable_pattern:X4(t.matches),errorInfo:g})}:void 0;return i.reduceRight((f,g,w)=>{let A,S=!1,C=null,T=null;t&&(A=o&&g.route.id?o[g.route.id]:void 0,C=g.route.errorElement||c7,u&&(d<0&&w===0?(OR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,T=null):d===w&&(S=!0,T=g.route.hydrateFallbackElement||null)));let P=e.concat(i.slice(0,w+1)),O=()=>{let N;return A?N=C:S?N=T:g.route.Component?N=K.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=f,K.createElement(d7,{match:g,routeContext:{outlet:f,matches:P,isDataRoute:t!=null},children:N})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?K.createElement(LR,{location:t.location,revalidation:t.revalidation,component:C,error:A,children:O(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:h}):O()},null)}function aS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p7(s){let e=K.useContext(Qm);return Kt(e,aS(s)),e}function f7(s){let e=K.useContext(s1);return Kt(e,aS(s)),e}function m7(s){let e=K.useContext(co);return Kt(e,aS(s)),e}function oS(s){let e=m7(s),t=e.matches[e.matches.length-1];return Kt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function g7(){return oS("useRouteId")}function y7(){var n;let s=K.useContext(iS),e=f7("useRouteError"),t=oS("useRouteError");return s!==void 0?s:(n=e.errors)==null?void 0:n[t]}function w7(){let{router:s}=p7("useNavigate"),e=oS("useNavigate"),t=K.useRef(!1);return NR(()=>{t.current=!0}),K.useCallback(async(r,i={})=>{xi(t.current,DR),t.current&&(typeof r=="number"?await s.navigate(r):await s.navigate(r,{fromRouteId:e,...i}))},[s,e])}var rI={};function OR(s,e,t){!e&&!rI[s]&&(rI[s]=!0,xi(!1,t))}K.memo(v7);function v7({routes:s,future:e,state:t,onError:n}){return MR(s,void 0,t,n,e)}function XE({to:s,replace:e,state:t,relative:n}){Kt(Xm(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=K.useContext(qs);xi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=K.useContext(co),{pathname:o}=Nu(),u=i1(),d=sS(s,rS(i),o,n==="path"),h=JSON.stringify(d);return K.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:n})},[u,h,n,e,t]),null}function vs(s){Kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function A7({basename:s="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:i=!1,unstable_useTransitions:o}){Kt(!Xm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=s.replace(/^\/*/,"/"),d=K.useMemo(()=>({basename:u,navigator:r,static:i,unstable_useTransitions:o,future:{}}),[u,r,i,o]);typeof t=="string"&&(t=qh(t));let{pathname:h="/",search:f="",hash:g="",state:w=null,key:A="default"}=t,S=K.useMemo(()=>{let C=Sl(h,u);return C==null?null:{location:{pathname:C,search:f,hash:g,state:w,key:A},navigationType:n}},[u,h,f,g,w,A,n]);return xi(S!=null,`<Router basename="${u}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:K.createElement(qs.Provider,{value:d},K.createElement(s0.Provider,{children:e,value:S}))}function _7({children:s,location:e}){return o7(YE(s),e)}function YE(s,e=[]){let t=[];return K.Children.forEach(s,(n,r)=>{if(!K.isValidElement(n))return;let i=[...e,r];if(n.type===K.Fragment){t.push.apply(t,YE(n.props.children,i));return}Kt(n.type===vs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=YE(n.props.children,i)),t.push(o)}),t}var dA="get",hA="application/x-www-form-urlencoded";function a1(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function x7(s){return a1(s)&&s.tagName.toLowerCase()==="button"}function E7(s){return a1(s)&&s.tagName.toLowerCase()==="form"}function b7(s){return a1(s)&&s.tagName.toLowerCase()==="input"}function C7(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function S7(s,e){return s.button===0&&(!e||e==="_self")&&!C7(s)}var Gv=null;function F7(){if(Gv===null)try{new FormData(document.createElement("form"),0),Gv=!1}catch{Gv=!0}return Gv}var T7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function EE(s){return s!=null&&!T7.has(s)?(xi(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hA}"`),null):s}function k7(s,e){let t,n,r,i,o;if(E7(s)){let u=s.getAttribute("action");n=u?Sl(u,e):null,t=s.getAttribute("method")||dA,r=EE(s.getAttribute("enctype"))||hA,i=new FormData(s)}else if(x7(s)||b7(s)&&(s.type==="submit"||s.type==="image")){let u=s.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||u.getAttribute("action");if(n=d?Sl(d,e):null,t=s.getAttribute("formmethod")||u.getAttribute("method")||dA,r=EE(s.getAttribute("formenctype"))||EE(u.getAttribute("enctype"))||hA,i=new FormData(u,s),!F7()){let{name:h,type:f,value:g}=s;if(f==="image"){let w=h?`${h}.`:"";i.append(`${w}x`,"0"),i.append(`${w}y`,"0")}else h&&i.append(h,g)}}else{if(a1(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=dA,n=null,r=hA,o=s}return i&&r==="text/plain"&&(o=i,i=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lS(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function I7(s,e,t,n){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${n}`:r.pathname=`${r.pathname}.${n}`:r.pathname==="/"?r.pathname=`_root.${n}`:e&&Sl(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function P7(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function R7(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function D7(s,e,t){let n=await Promise.all(s.map(async r=>{let i=e.routes[r.route.id];if(i){let o=await P7(i,t);return o.links?o.links():[]}return[]}));return O7(n.flat(1).filter(R7).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function sI(s,e,t,n,r,i){let o=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var f;return t[h].pathname!==d.pathname||((f=t[h].route.path)==null?void 0:f.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return i==="assets"?e.filter((d,h)=>o(d,h)||u(d,h)):i==="data"?e.filter((d,h)=>{var g;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(o(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function N7(s,e,{includeHydrateFallback:t}={}){return M7(s.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function M7(s){return[...new Set(s)]}function L7(s){let e={},t=Object.keys(s).sort();for(let n of t)e[n]=s[n];return e}function O7(s,e){let t=new Set;return new Set(e),s.reduce((n,r)=>{let i=JSON.stringify(L7(r));return t.has(i)||(t.add(i),n.push({key:i,link:r})),n},[])}function BR(){let s=K.useContext(Qm);return lS(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function B7(){let s=K.useContext(s1);return lS(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var cS=K.createContext(void 0);cS.displayName="FrameworkContext";function VR(){let s=K.useContext(cS);return lS(s,"You must render this element inside a <HydratedRouter> element"),s}function V7(s,e){let t=K.useContext(cS),[n,r]=K.useState(!1),[i,o]=K.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:f,onTouchStart:g}=e,w=K.useRef(null);K.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let C=P=>{P.forEach(O=>{o(O.isIntersecting)})},T=new IntersectionObserver(C,{threshold:.5});return w.current&&T.observe(w.current),()=>{T.disconnect()}}},[s]),K.useEffect(()=>{if(n){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[n]);let A=()=>{r(!0)},S=()=>{r(!1),o(!1)};return t?s!=="intent"?[i,w,{}]:[i,w,{onFocus:Z2(u,A),onBlur:Z2(d,S),onMouseEnter:Z2(h,A),onMouseLeave:Z2(f,S),onTouchStart:Z2(g,A)}]:[!1,w,{}]}function Z2(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function U7({page:s,...e}){let{router:t}=BR(),n=K.useMemo(()=>CR(t.routes,s,t.basename),[t.routes,s,t.basename]);return n?K.createElement($7,{page:s,matches:n,...e}):null}function j7(s){let{manifest:e,routeModules:t}=VR(),[n,r]=K.useState([]);return K.useEffect(()=>{let i=!1;return D7(s,e,t).then(o=>{i||r(o)}),()=>{i=!0}},[s,e,t]),n}function $7({page:s,matches:e,...t}){let n=Nu(),{future:r,manifest:i,routeModules:o}=VR(),{basename:u}=BR(),{loaderData:d,matches:h}=B7(),f=K.useMemo(()=>sI(s,e,h,i,n,"data"),[s,e,h,i,n]),g=K.useMemo(()=>sI(s,e,h,i,n,"assets"),[s,e,h,i,n]),w=K.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let C=new Set,T=!1;if(e.forEach(O=>{var j;let N=i.routes[O.route.id];!N||!N.hasLoader||(!f.some(z=>z.route.id===O.route.id)&&O.route.id in d&&((j=o[O.route.id])!=null&&j.shouldRevalidate)||N.hasClientLoader?T=!0:C.add(O.route.id))}),C.size===0)return[];let P=I7(s,u,r.unstable_trailingSlashAwareDataRequests,"data");return T&&C.size>0&&P.searchParams.set("_routes",e.filter(O=>C.has(O.route.id)).map(O=>O.route.id).join(",")),[P.pathname+P.search]},[u,r.unstable_trailingSlashAwareDataRequests,d,n,i,f,e,s,o]),A=K.useMemo(()=>N7(g,i),[g,i]),S=j7(g);return K.createElement(K.Fragment,null,w.map(C=>K.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),A.map(C=>K.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),S.map(({key:C,link:T})=>K.createElement("link",{key:C,nonce:t.nonce,...T,crossOrigin:T.crossOrigin??t.crossOrigin})))}function z7(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var H7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{H7&&(window.__reactRouterVersion="7.13.0")}catch{}function W7({basename:s,children:e,unstable_useTransitions:t,window:n}){let r=K.useRef();r.current==null&&(r.current=C4({window:n,v5Compat:!0}));let i=r.current,[o,u]=K.useState({action:i.action,location:i.location}),d=K.useCallback(h=>{t===!1?u(h):K.startTransition(()=>u(h))},[t]);return K.useLayoutEffect(()=>i.listen(d),[i,d]),K.createElement(A7,{basename:s,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:t})}var UR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a_=K.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:o,state:u,target:d,to:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w,...A},S){let{basename:C,unstable_useTransitions:T}=K.useContext(qs),P=typeof h=="string"&&UR.test(h),O=kR(h,C);h=O.to;let N=i7(h,{relative:r}),[j,z,W]=V7(n,A),D=K7(h,{replace:o,state:u,target:d,preventScrollReset:f,relative:r,viewTransition:g,unstable_defaultShouldRevalidate:w,unstable_useTransitions:T});function R(U){e&&e(U),U.defaultPrevented||D(U)}let L=K.createElement("a",{...A,...W,href:O.absoluteURL||N,onClick:O.isExternal||i?e:R,ref:z7(S,z),target:d,"data-discover":!P&&t==="render"?"true":void 0});return j&&!P?K.createElement(K.Fragment,null,L,K.createElement(U7,{page:N})):L});a_.displayName="Link";var jR=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:o,viewTransition:u,children:d,...h},f){let g=i0(o,{relative:h.relative}),w=Nu(),A=K.useContext(s1),{navigator:S,basename:C}=K.useContext(qs),T=A!=null&&Z7(g)&&u===!0,P=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,O=w.pathname,N=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(O=O.toLowerCase(),N=N?N.toLowerCase():null,P=P.toLowerCase()),N&&C&&(N=Sl(N,C)||N);const j=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let z=O===P||!r&&O.startsWith(P)&&O.charAt(j)==="/",W=N!=null&&(N===P||!r&&N.startsWith(P)&&N.charAt(P.length)==="/"),D={isActive:z,isPending:W,isTransitioning:T},R=z?e:void 0,L;typeof n=="function"?L=n(D):L=[n,z?"active":null,W?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let U=typeof i=="function"?i(D):i;return K.createElement(a_,{...h,"aria-current":R,className:L,ref:f,style:U,to:o,viewTransition:u},typeof d=="function"?d(D):d)});jR.displayName="NavLink";var G7=K.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:i,method:o=dA,action:u,onSubmit:d,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w,...A},S)=>{let{unstable_useTransitions:C}=K.useContext(qs),T=Y7(),P=J7(u,{relative:h}),O=o.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&UR.test(u),j=z=>{if(d&&d(z),z.defaultPrevented)return;z.preventDefault();let W=z.nativeEvent.submitter,D=(W==null?void 0:W.getAttribute("formmethod"))||o,R=()=>T(W||z.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:r,state:i,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w});C&&t!==!1?K.startTransition(()=>R()):R()};return K.createElement("form",{ref:S,method:O,action:P,onSubmit:n?d:j,...A,"data-discover":!N&&s==="render"?"true":void 0})});G7.displayName="Form";function q7(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $R(s){let e=K.useContext(Qm);return Kt(e,q7(s)),e}function K7(s,{target:e,replace:t,state:n,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let h=i1(),f=Nu(),g=i0(s,{relative:i});return K.useCallback(w=>{if(S7(w,e)){w.preventDefault();let A=t!==void 0?t:zg(f)===zg(g),S=()=>h(s,{replace:A,state:n,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:u});d?K.startTransition(()=>S()):S()}},[f,h,g,t,n,e,s,r,i,o,u,d])}var Q7=0,X7=()=>`__${String(++Q7)}__`;function Y7(){let{router:s}=$R("useSubmit"),{basename:e}=K.useContext(qs),t=g7(),n=s.fetch,r=s.navigate;return K.useCallback(async(i,o={})=>{let{action:u,method:d,encType:h,formData:f,body:g}=k7(i,e);if(o.navigate===!1){let w=o.fetcherKey||X7();await n(w,t,o.action||u,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:g,formMethod:o.method||d,formEncType:o.encType||h,flushSync:o.flushSync})}else await r(o.action||u,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:g,formMethod:o.method||d,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,r,e,t])}function J7(s,{relative:e}={}){let{basename:t}=K.useContext(qs),n=K.useContext(co);Kt(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={...i0(s||".",{relative:e})},o=Nu();if(s==null){i.search=o.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(g=>g).forEach(g=>u.append("index",g));let f=u.toString();i.search=f?`?${f}`:""}}return(!s||s===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:xl([t,i.pathname])),zg(i)}function Z7(s,{relative:e}={}){let t=K.useContext(PR);Kt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=$R("useViewTransitionState"),r=i0(s,{relative:e});if(!t.isTransitioning)return!1;let i=Sl(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=Sl(t.nextLocation.pathname,n)||t.nextLocation.pathname;return i_(r.pathname,o)!=null||i_(r.pathname,i)!=null}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tB=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),iI=s=>{const e=tB(s);return e.charAt(0).toUpperCase()+e.slice(1)},zR=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),nB=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=K.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:o,...u},d)=>K.createElement("svg",{ref:d,...rB,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:zR("lucide",r),...!i&&!nB(u)&&{"aria-hidden":"true"},...u},[...o.map(([h,f])=>K.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(s,e)=>{const t=K.forwardRef(({className:n,...r},i)=>K.createElement(sB,{ref:i,iconNode:e,className:zR(`lucide-${eB(iI(s))}`,`lucide-${s}`,n),...r}));return t.displayName=iI(s),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],aB=pt("arrow-right",iB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],lB=pt("award",oB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],uB=pt("bell",cB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],hB=pt("book-open",dB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fB=pt("calendar",pB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],HR=pt("chart-no-axes-column-increasing",mB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yB=pt("check",gB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vB=pt("circle-check-big",wB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_B=pt("circle-x",AB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],EB=pt("dollar-sign",xB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],CB=pt("file-check",bB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],FB=pt("file-spreadsheet",SB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Hg=pt("file-text",TB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],IB=pt("graduation-cap",kB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],RB=pt("image",PB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],NB=pt("layout-dashboard",DB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],LB=pt("list",MB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],BB=pt("lock",OB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],UB=pt("log-out",VB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],WR=pt("mail",jB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],GR=pt("megaphone",$B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qR=pt("pen",zB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],a0=pt("plus",HB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],GB=pt("save",WB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],JE=pt("school",qB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],o1=pt("search",KB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],o0=pt("trash-2",QB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],YB=pt("upload",XB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],KR=pt("user",JB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],aI=pt("users",ZB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],t6=pt("video",e6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ZE=pt("x",n6),r6=()=>{};var oI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(s.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},s6=function(s){const e=[];let t=0,n=0;for(;t<s.length;){const r=s[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const i=s[t++];e[n++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=s[t++],o=s[t++],u=s[t++],d=((r&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=s[t++],o=s[t++];e[n++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},XR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<s.length;r+=3){const i=s[r],o=r+1<s.length,u=o?s[r+1]:0,d=r+2<s.length,h=d?s[r+2]:0,f=i>>2,g=(i&3)<<4|u>>4;let w=(u&15)<<2|h>>6,A=h&63;d||(A=64,o||(w=64)),n.push(t[f],t[g],t[w],t[A])}return n.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(QR(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):s6(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<s.length;){const i=t[s.charAt(r++)],u=r<s.length?t[s.charAt(r)]:0;++r;const h=r<s.length?t[s.charAt(r)]:64;++r;const g=r<s.length?t[s.charAt(r)]:64;if(++r,i==null||u==null||h==null||g==null)throw new i6;const w=i<<2|u>>4;if(n.push(w),h!==64){const A=u<<4&240|h>>2;if(n.push(A),g!==64){const S=h<<6&192|g;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class i6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a6=function(s){const e=QR(s);return XR.encodeByteArray(e,!0)},o_=function(s){return a6(s).replace(/\./g,"")},YR=function(s){try{return XR.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=()=>o6().__FIREBASE_DEFAULTS__,c6=()=>{if(typeof process>"u"||typeof oI>"u")return;const s=oI.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},u6=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&YR(s[1]);return e&&JSON.parse(e)},l1=()=>{try{return r6()||l6()||c6()||u6()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},JR=s=>{var e,t;return(t=(e=l1())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},ZR=s=>{const e=JR(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},eD=()=>{var s;return(s=l1())==null?void 0:s.config},tD=s=>{var e;return(e=l1())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uS(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=s.iat||0,i=s.sub||s.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...s};return[o_(JSON.stringify(t)),o_(JSON.stringify(o)),""].join(".")}const Lg={};function h6(){const s={prod:[],emulator:[]};for(const e of Object.keys(Lg))Lg[e]?s.emulator.push(e):s.prod.push(e);return s}function p6(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let lI=!1;function dS(s,e){if(typeof window>"u"||typeof document>"u"||!Mu(window.location.host)||Lg[s]===e||Lg[s]||lI)return;Lg[s]=e;function t(w){return`__firebase__banner__${w}`}const n="__firebase__banner",i=h6().prod.length>0;function o(){const w=document.getElementById(n);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,A){w.setAttribute("width","24"),w.setAttribute("id",A),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{lI=!0,o()},w}function f(w,A){w.setAttribute("id",A),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function g(){const w=p6(n),A=t("text"),S=document.getElementById(A)||document.createElement("span"),C=t("learnmore"),T=document.getElementById(C)||document.createElement("a"),P=t("preprendIcon"),O=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const N=w.element;u(N),f(T,C);const j=h();d(O,P),N.append(O,S,T,j),document.body.appendChild(N)}i?(S.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function f6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pr())}function m6(){var e;const s=(e=l1())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y6(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function w6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v6(){const s=Pr();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function A6(){return!m6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _6(){try{return typeof indexedDB=="object"}catch{return!1}}function x6(){return new Promise((s,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),s(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="FirebaseError";class uo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=E6,Object.setPrototypeOf(this,uo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l0.prototype.create)}}class l0{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?b6(i,n):"Error",u=`${this.serviceName}: ${o} (${r}).`;return new uo(r,u,n)}}function b6(s,e){return s.replace(C6,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const C6=/\{\$([^}]+)}/g;function S6(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Lh(s,e){if(s===e)return!0;const t=Object.keys(s),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const i=s[r],o=e[r];if(cI(i)&&cI(o)){if(!Lh(i,o))return!1}else if(i!==o)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function cI(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(s){const e=[];for(const[t,n]of Object.entries(s))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function cg(s){const e={};return s.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,i]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function ug(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function F6(s,e){const t=new T6(s,e);return t.subscribe.bind(t)}class T6{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");k6(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=bE),r.error===void 0&&(r.error=bE),r.complete===void 0&&(r.complete=bE);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function k6(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function bE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(s){return s&&s._delegate?s._delegate:s}class Au{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new d6;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R6(e))try{this.getOrInitializeService({instanceIdentifier:fd})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});n.resolve(i)}catch{}}}}clearInstance(e=fd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fd){return this.instances.has(e)}getOptions(e=fd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);n===u&&o.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:P6(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=fd){return this.component?this.component.multipleInstances?e:fd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function P6(s){return s===fd?void 0:s}function R6(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new I6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(nt||(nt={}));const N6={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},M6=nt.INFO,L6={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},O6=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),r=L6[e];if(r)console[r](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hS{constructor(e){this.name=e,this._logLevel=M6,this._logHandler=O6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?N6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const B6=(s,e)=>e.some(t=>s instanceof t);let uI,dI;function V6(){return uI||(uI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U6(){return dI||(dI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rD=new WeakMap,eb=new WeakMap,sD=new WeakMap,CE=new WeakMap,pS=new WeakMap;function j6(s){const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("success",i),s.removeEventListener("error",o)},i=()=>{t(fu(s.result)),r()},o=()=>{n(s.error),r()};s.addEventListener("success",i),s.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&rD.set(t,s)}).catch(()=>{}),pS.set(e,s),e}function $6(s){if(eb.has(s))return;const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("complete",i),s.removeEventListener("error",o),s.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(s.error||new DOMException("AbortError","AbortError")),r()};s.addEventListener("complete",i),s.addEventListener("error",o),s.addEventListener("abort",o)});eb.set(s,e)}let tb={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return eb.get(s);if(e==="objectStoreNames")return s.objectStoreNames||sD.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fu(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function z6(s){tb=s(tb)}function H6(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=s.call(SE(this),e,...t);return sD.set(n,e.sort?e.sort():[e]),fu(n)}:U6().includes(s)?function(...e){return s.apply(SE(this),e),fu(rD.get(this))}:function(...e){return fu(s.apply(SE(this),e))}}function W6(s){return typeof s=="function"?H6(s):(s instanceof IDBTransaction&&$6(s),B6(s,V6())?new Proxy(s,tb):s)}function fu(s){if(s instanceof IDBRequest)return j6(s);if(CE.has(s))return CE.get(s);const e=W6(s);return e!==s&&(CE.set(s,e),pS.set(e,s)),e}const SE=s=>pS.get(s);function G6(s,e,{blocked:t,upgrade:n,blocking:r,terminated:i}={}){const o=indexedDB.open(s,e),u=fu(o);return n&&o.addEventListener("upgradeneeded",d=>{n(fu(o.result),d.oldVersion,d.newVersion,fu(o.transaction),d)}),t&&o.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{i&&d.addEventListener("close",()=>i()),r&&d.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const q6=["get","getKey","getAll","getAllKeys","count"],K6=["put","add","delete","clear"],FE=new Map;function hI(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(FE.get(e))return FE.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=K6.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||q6.includes(t)))return;const i=async function(o,...u){const d=this.transaction(o,r?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),r&&d.done]))[0]};return FE.set(e,i),i}z6(s=>({...s,get:(e,t,n)=>hI(e,t)||s.get(e,t,n),has:(e,t)=>!!hI(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(X6(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function X6(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nb="@firebase/app",pI="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new hS("@firebase/app"),Y6="@firebase/app-compat",J6="@firebase/analytics-compat",Z6="@firebase/analytics",eV="@firebase/app-check-compat",tV="@firebase/app-check",nV="@firebase/auth",rV="@firebase/auth-compat",sV="@firebase/database",iV="@firebase/data-connect",aV="@firebase/database-compat",oV="@firebase/functions",lV="@firebase/functions-compat",cV="@firebase/installations",uV="@firebase/installations-compat",dV="@firebase/messaging",hV="@firebase/messaging-compat",pV="@firebase/performance",fV="@firebase/performance-compat",mV="@firebase/remote-config",gV="@firebase/remote-config-compat",yV="@firebase/storage",wV="@firebase/storage-compat",vV="@firebase/firestore",AV="@firebase/ai",_V="@firebase/firestore-compat",xV="firebase",EV="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="[DEFAULT]",bV={[nb]:"fire-core",[Y6]:"fire-core-compat",[Z6]:"fire-analytics",[J6]:"fire-analytics-compat",[tV]:"fire-app-check",[eV]:"fire-app-check-compat",[nV]:"fire-auth",[rV]:"fire-auth-compat",[sV]:"fire-rtdb",[iV]:"fire-data-connect",[aV]:"fire-rtdb-compat",[oV]:"fire-fn",[lV]:"fire-fn-compat",[cV]:"fire-iid",[uV]:"fire-iid-compat",[dV]:"fire-fcm",[hV]:"fire-fcm-compat",[pV]:"fire-perf",[fV]:"fire-perf-compat",[mV]:"fire-rc",[gV]:"fire-rc-compat",[yV]:"fire-gcs",[wV]:"fire-gcs-compat",[vV]:"fire-fst",[_V]:"fire-fst-compat",[AV]:"fire-vertex","fire-js":"fire-js",[xV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map,CV=new Map,sb=new Map;function fI(s,e){try{s.container.addComponent(e)}catch(t){Fl.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Oh(s){const e=s.name;if(sb.has(e))return Fl.debug(`There were multiple attempts to register component ${e}.`),!1;sb.set(e,s);for(const t of l_.values())fI(t,s);for(const t of CV.values())fI(t,s);return!0}function c1(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function wi(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mu=new l0("app","Firebase",SV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Au("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=EV;function iD(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const n={name:rb,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw mu.create("bad-app-name",{appName:String(r)});if(t||(t=eD()),!t)throw mu.create("no-options");const i=l_.get(r);if(i){if(Lh(t,i.options)&&Lh(n,i.config))return i;throw mu.create("duplicate-app",{appName:r})}const o=new D6(r);for(const d of sb.values())o.addComponent(d);const u=new FV(t,n,o);return l_.set(r,u),u}function fS(s=rb){const e=l_.get(s);if(!e&&s===rb&&eD())return iD();if(!e)throw mu.create("no-app",{appName:s});return e}function Ya(s,e,t){let n=bV[s]??s;t&&(n+=`-${t}`);const r=n.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${n}" with version "${e}":`];r&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fl.warn(o.join(" "));return}Oh(new Au(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="firebase-heartbeat-database",kV=1,Wg="firebase-heartbeat-store";let TE=null;function aD(){return TE||(TE=G6(TV,kV,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Wg)}catch(t){console.warn(t)}}}}).catch(s=>{throw mu.create("idb-open",{originalErrorMessage:s.message})})),TE}async function IV(s){try{const t=(await aD()).transaction(Wg),n=await t.objectStore(Wg).get(oD(s));return await t.done,n}catch(e){if(e instanceof uo)Fl.warn(e.message);else{const t=mu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fl.warn(t.message)}}}async function mI(s,e){try{const n=(await aD()).transaction(Wg,"readwrite");await n.objectStore(Wg).put(e,oD(s)),await n.done}catch(t){if(t instanceof uo)Fl.warn(t.message);else{const n=mu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fl.warn(n.message)}}}function oD(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=1024,RV=30;class DV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new MV(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>RV){const o=LV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Fl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gI(),{heartbeatsToSend:n,unsentEntries:r}=NV(this._heartbeatsCache.heartbeats),i=o_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Fl.warn(t),""}}}function gI(){return new Date().toISOString().substring(0,10)}function NV(s,e=PV){const t=[];let n=s.slice();for(const r of s){const i=t.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),yI(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),yI(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class MV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _6()?x6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await IV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return mI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return mI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function yI(s){return o_(JSON.stringify({version:2,heartbeats:s})).length}function LV(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let n=1;n<s.length;n++)s[n].date<t&&(t=s[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(s){Oh(new Au("platform-logger",e=>new Q6(e),"PRIVATE")),Oh(new Au("heartbeat",e=>new DV(e),"PRIVATE")),Ya(nb,pI,s),Ya(nb,pI,"esm2020"),Ya("fire-js","")}OV("");var BV="firebase",VV="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ya(BV,VV,"app");function lD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UV=lD,cD=new l0("auth","Firebase",lD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=new hS("@firebase/auth");function jV(s,...e){c_.logLevel<=nt.WARN&&c_.warn(`Auth (${Kh}): ${s}`,...e)}function pA(s,...e){c_.logLevel<=nt.ERROR&&c_.error(`Auth (${Kh}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(s,...e){throw mS(s,...e)}function Ja(s,...e){return mS(s,...e)}function uD(s,e,t){const n={...UV(),[e]:t};return new l0("auth","Firebase",n).create(e,{appName:s.name})}function gu(s){return uD(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mS(s,...e){if(typeof s!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=s.name),s._errorFactory.create(t,...n)}return cD.create(s,...e)}function Ve(s,e,...t){if(!s)throw mS(e,...t)}function Al(s){const e="INTERNAL ASSERTION FAILED: "+s;throw pA(e),new Error(e)}function Tl(s,e){s||Al(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function $V(){return wI()==="http:"||wI()==="https:"}function wI(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($V()||y6()||"connection"in navigator)?navigator.onLine:!0}function HV(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tl(t>e,"Short delay should be less than long delay!"),this.isMobile=f6()||w6()}get(){return zV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(s,e){Tl(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Al("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Al("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Al("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qV=new u0(3e4,6e4);function Qh(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Lu(s,e,t,n,r={}){return hD(s,r,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const u=c0({key:s.config.apiKey,...o}).slice(1),d=await s._getAdditionalHeaders();d["Content-Type"]="application/json",s.languageCode&&(d["X-Firebase-Locale"]=s.languageCode);const h={method:e,headers:d,...i};return g6()||(h.referrerPolicy="no-referrer"),s.emulatorConfig&&Mu(s.emulatorConfig.host)&&(h.credentials="include"),dD.fetch()(await pD(s,s.config.apiHost,t,u),h)})}async function hD(s,e,t){s._canInitEmulator=!1;const n={...WV,...e};try{const r=new QV(s),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw qv(s,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw qv(s,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw qv(s,"email-already-in-use",o);if(d==="USER_DISABLED")throw qv(s,"user-disabled",o);const f=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw uD(s,f,h);ea(s,f)}}catch(r){if(r instanceof uo)throw r;ea(s,"network-request-failed",{message:String(r)})}}async function u1(s,e,t,n,r={}){const i=await Lu(s,e,t,n,r);return"mfaPendingCredential"in i&&ea(s,"multi-factor-auth-required",{_serverResponse:i}),i}async function pD(s,e,t,n){const r=`${e}${t}?${n}`,i=s,o=i.config.emulator?gS(s.config,r):`${s.config.apiScheme}://${r}`;return GV.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function KV(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Ja(this.auth,"network-request-failed")),qV.get())})}}function qv(s,e,t){const n={appName:s.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=Ja(s,e,n);return r.customData._tokenResponse=t,r}function vI(s){return s!==void 0&&s.enterprise!==void 0}class XV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return KV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YV(s,e){return Lu(s,"GET","/v2/recaptchaConfig",Qh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(s,e){return Lu(s,"POST","/v1/accounts:delete",e)}async function u_(s,e){return Lu(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZV(s,e=!1){const t=dn(s),n=await t.getIdToken(e),r=yS(n);Ve(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:n,authTime:Og(kE(r.auth_time)),issuedAtTime:Og(kE(r.iat)),expirationTime:Og(kE(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function kE(s){return Number(s)*1e3}function yS(s){const[e,t,n]=s.split(".");if(e===void 0||t===void 0||n===void 0)return pA("JWT malformed, contained fewer than 3 sections"),null;try{const r=YR(t);return r?JSON.parse(r):(pA("Failed to decode base64 JWT payload"),null)}catch(r){return pA("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function AI(s){const e=yS(s);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gg(s,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof uo&&eU(n)&&s.auth.currentUser===s&&await s.auth.signOut(),n}}function eU({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Og(this.lastLoginAt),this.creationTime=Og(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_(s){var g;const e=s.auth,t=await s.getIdToken(),n=await Gg(s,u_(e,{idToken:t}));Ve(n==null?void 0:n.users.length,e,"internal-error");const r=n.users[0];s._notifyReloadListener(r);const i=(g=r.providerUserInfo)!=null&&g.length?fD(r.providerUserInfo):[],o=rU(s.providerData,i),u=s.isAnonymous,d=!(s.email&&r.passwordHash)&&!(o!=null&&o.length),h=u?d:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ab(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(s,f)}async function nU(s){const e=dn(s);await d_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rU(s,e){return[...s.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function fD(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(s,e){const t=await hD(s,{},async()=>{const n=c0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=s.config,o=await pD(s,r,"/v1/token",`key=${i}`),u=await s._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return s.emulatorConfig&&Mu(s.emulatorConfig.host)&&(d.credentials="include"),dD.fetch()(o,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function iU(s,e){return Lu(s,"POST","/v2/accounts:revokeToken",Qh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=AI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await sU(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new lf;return n&&(Ve(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),r&&(Ve(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ve(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lf,this.toJSON())}_performRefresh(){return Al("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(s,e){Ve(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Qi{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new tU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ab(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Gg(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ZV(this,e)}reload(){return nU(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await d_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wi(this.auth.app))return Promise.reject(gu(this.auth));const e=await this.getIdToken();return await Gg(this,JV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:g,emailVerified:w,isAnonymous:A,providerData:S,stsTokenManager:C}=t;Ve(g&&C,e,"internal-error");const T=lf.fromJSON(this.name,C);Ve(typeof g=="string",e,"internal-error"),uc(n,e.name),uc(r,e.name),Ve(typeof w=="boolean",e,"internal-error"),Ve(typeof A=="boolean",e,"internal-error"),uc(i,e.name),uc(o,e.name),uc(u,e.name),uc(d,e.name),uc(h,e.name),uc(f,e.name);const P=new Qi({uid:g,auth:e,email:r,emailVerified:w,displayName:n,isAnonymous:A,photoURL:o,phoneNumber:i,tenantId:u,stsTokenManager:T,createdAt:h,lastLoginAt:f});return S&&Array.isArray(S)&&(P.providerData=S.map(O=>({...O}))),d&&(P._redirectEventId=d),P}static async _fromIdTokenResponse(e,t,n=!1){const r=new lf;r.updateFromServerResponse(t);const i=new Qi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await d_(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ve(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?fD(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),u=new lf;u.updateFromIdToken(n);const d=new Qi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ab(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Map;function _l(s){Tl(s instanceof Function,"Expected a class definition");let e=_I.get(s);return e?(Tl(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,_I.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mD.type="NONE";const xI=mD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(s,e,t){return`firebase:${s}:${e}:${t}`}class cf{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fA(this.userKey,r.apiKey,i),this.fullPersistenceKey=fA("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await u_(this.auth,{idToken:e}).catch(()=>{});return t?Qi._fromGetAccountInfoResponse(this.auth,t,e):null}return Qi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new cf(_l(xI),e,n);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||_l(xI);const o=fA(n,e.config.apiKey,e.name);let u=null;for(const h of t)try{const f=await h._get(o);if(f){let g;if(typeof f=="string"){const w=await u_(e,{idToken:f}).catch(()=>{});if(!w)break;g=await Qi._fromGetAccountInfoResponse(e,w,f)}else g=Qi._fromJSON(e,f);h!==i&&(u=g),i=h;break}}catch{}const d=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new cf(i,e,n):(i=d[0],u&&await i._set(o,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new cf(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_D(e))return"Blackberry";if(xD(e))return"Webos";if(yD(e))return"Safari";if((e.includes("chrome/")||wD(e))&&!e.includes("edge/"))return"Chrome";if(AD(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=s.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function gD(s=Pr()){return/firefox\//i.test(s)}function yD(s=Pr()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wD(s=Pr()){return/crios\//i.test(s)}function vD(s=Pr()){return/iemobile/i.test(s)}function AD(s=Pr()){return/android/i.test(s)}function _D(s=Pr()){return/blackberry/i.test(s)}function xD(s=Pr()){return/webos/i.test(s)}function wS(s=Pr()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function aU(s=Pr()){var e;return wS(s)&&!!((e=window.navigator)!=null&&e.standalone)}function oU(){return v6()&&document.documentMode===10}function ED(s=Pr()){return wS(s)||AD(s)||xD(s)||_D(s)||/windows phone/i.test(s)||vD(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(s,e=[]){let t;switch(s){case"Browser":t=EI(Pr());break;case"Worker":t=`${EI(Pr())}-${s}`;break;default:t=s}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kh}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((o,u)=>{try{const d=e(i);o(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(s,e={}){return Lu(s,"GET","/v2/passwordPolicy",Qh(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=6;class dU{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??uU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bI(this),this.idTokenSubscription=new bI(this),this.beforeStateQueue=new lU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_l(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await cf.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await u_(this,{idToken:e}),n=await Qi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(wi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,u=n==null?void 0:n._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===u)&&(d!=null&&d.user)&&(n=d.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await d_(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wi(this.app))return Promise.reject(gu(this));const t=e?dn(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wi(this.app)?Promise.reject(gu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wi(this.app)?Promise.reject(gu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_l(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cU(this),t=new dU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new l0("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await iU(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_l(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await cf.create(this,[_l(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,r);return()=>{o=!0,d()}}else{const d=e.addObserver(t);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&jV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ym(s){return dn(s)}class bI{constructor(e){this.auth=e,this.observer=null,this.addObserver=F6(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pU(s){d1=s}function CD(s){return d1.loadJS(s)}function fU(){return d1.recaptchaEnterpriseScript}function mU(){return d1.gapiScript}function gU(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class yU{constructor(){this.enterprise=new wU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class wU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const vU="recaptcha-enterprise",SD="NO_RECAPTCHA";class AU{constructor(e){this.type=vU,this.auth=Ym(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,u)=>{YV(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new XV(d);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(d=>{u(d)})})}function r(i,o,u){const d=window.grecaptcha;vI(d)?d.enterprise.ready(()=>{d.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(SD)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yU().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{n(this.auth).then(u=>{if(!t&&vI(window.grecaptcha))r(u,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=fU();d.length!==0&&(d+=u),CD(d).then(()=>{r(u,i,o)}).catch(h=>{o(h)})}}).catch(u=>{o(u)})})}}async function CI(s,e,t,n=!1,r=!1){const i=new AU(s);let o;if(r)o=SD;else try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function SI(s,e,t,n,r){var i;if((i=s._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await CI(s,e,t,t==="getOobCode");return n(s,o)}else return n(s,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await CI(s,e,t,t==="getOobCode");return n(s,u)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(s,e){const t=c1(s,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(Lh(i,e??{}))return r;ea(r,"already-initialized")}return t.initialize({options:e})}function xU(s,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(_l);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function EU(s,e,t){const n=Ym(s);Ve(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,i=FD(e),{host:o,port:u}=bU(e),d=u===null?"":`:${u}`,h={url:`${i}//${o}${d}/`},f=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){Ve(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ve(Lh(h,n.config.emulator)&&Lh(f,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=f,n.settings.appVerificationDisabledForTesting=!0,Mu(o)?(uS(`${i}//${o}${d}`),dS("Auth",!0)):CU()}function FD(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function bU(s){const e=FD(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const i=r[1];return{host:i,port:FI(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:FI(o)}}}function FI(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function CU(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Al("not implemented")}_getIdTokenResponse(e){return Al("not implemented")}_linkToIdToken(e,t){return Al("not implemented")}_getReauthenticationResolver(e){return Al("not implemented")}}async function SU(s,e){return Lu(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(s,e){return u1(s,"POST","/v1/accounts:signInWithPassword",Qh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TU(s,e){return u1(s,"POST","/v1/accounts:signInWithEmailLink",Qh(s,e))}async function kU(s,e){return u1(s,"POST","/v1/accounts:signInWithEmailLink",Qh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends vS{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new qg(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new qg(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return SI(e,t,"signInWithPassword",FU);case"emailLink":return TU(e,{email:this._email,oobCode:this._password});default:ea(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return SI(e,n,"signUpPassword",SU);case"emailLink":return kU(e,{idToken:t,email:this._email,oobCode:this._password});default:ea(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uf(s,e){return u1(s,"POST","/v1/accounts:signInWithIdp",Qh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU="http://localhost";class Bh extends vS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ea("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const o=new Bh(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return uf(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,uf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,uf(e,t)}buildRequest(){const e={requestUri:IU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=c0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RU(s){const e=cg(ug(s)).link,t=e?cg(ug(e)).deep_link_id:null,n=cg(ug(s)).deep_link_id;return(n?cg(ug(n)).link:null)||n||t||e||s}class AS{constructor(e){const t=cg(ug(e)),n=t.apiKey??null,r=t.oobCode??null,i=PU(t.mode??null);Ve(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=RU(e);try{return new AS(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.providerId=Jm.PROVIDER_ID}static credential(e,t){return qg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=AS.parseLink(t);return Ve(n,"argument-error"),qg._fromEmailAndCode(e,n.code,n.tenantId)}}Jm.PROVIDER_ID="password";Jm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends TD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends d0{constructor(){super("facebook.com")}static credential(e){return Bh._fromParams({providerId:hc.PROVIDER_ID,signInMethod:hc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hc.credentialFromTaggedObject(e)}static credentialFromError(e){return hc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hc.credential(e.oauthAccessToken)}catch{return null}}}hc.FACEBOOK_SIGN_IN_METHOD="facebook.com";hc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends d0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bh._fromParams({providerId:pc.PROVIDER_ID,signInMethod:pc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pc.credentialFromTaggedObject(e)}static credentialFromError(e){return pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return pc.credential(t,n)}catch{return null}}}pc.GOOGLE_SIGN_IN_METHOD="google.com";pc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends d0{constructor(){super("github.com")}static credential(e){return Bh._fromParams({providerId:fc.PROVIDER_ID,signInMethod:fc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fc.credentialFromTaggedObject(e)}static credentialFromError(e){return fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fc.credential(e.oauthAccessToken)}catch{return null}}}fc.GITHUB_SIGN_IN_METHOD="github.com";fc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends d0{constructor(){super("twitter.com")}static credential(e,t){return Bh._fromParams({providerId:mc.PROVIDER_ID,signInMethod:mc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mc.credentialFromTaggedObject(e)}static credentialFromError(e){return mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return mc.credential(t,n)}catch{return null}}}mc.TWITTER_SIGN_IN_METHOD="twitter.com";mc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Qi._fromIdTokenResponse(e,n,r),o=TI(n);return new jm({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=TI(n);return new jm({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function TI(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_ extends uo{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,h_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new h_(e,t,n,r)}}function kD(s,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?h_._fromErrorAndOperation(s,i,e,n):i})}async function DU(s,e,t=!1){const n=await Gg(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return jm._forOperation(s,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(s,e,t=!1){const{auth:n}=s;if(wi(n.app))return Promise.reject(gu(n));const r="reauthenticate";try{const i=await Gg(s,kD(n,r,e,s),t);Ve(i.idToken,n,"internal-error");const o=yS(i.idToken);Ve(o,n,"internal-error");const{sub:u}=o;return Ve(s.uid===u,n,"user-mismatch"),jm._forOperation(s,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ea(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(s,e,t=!1){if(wi(s.app))return Promise.reject(gu(s));const n="signIn",r=await kD(s,n,e),i=await jm._fromIdTokenResponse(s,n,r);return t||await s._updateCurrentUser(i.user),i}async function MU(s,e){return ID(Ym(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LU(s){const e=Ym(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function OU(s,e,t){return wi(s.app)?Promise.reject(gu(s)):MU(dn(s),Jm.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&LU(s),n})}function BU(s,e,t,n){return dn(s).onIdTokenChanged(e,t,n)}function VU(s,e,t){return dn(s).beforeAuthStateChanged(e,t)}function UU(s,e,t,n){return dn(s).onAuthStateChanged(e,t,n)}const p_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(p_,"1"),this.storage.removeItem(p_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=1e3,$U=10;class RD extends PD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ED(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,u,d)=>{this.notifyListeners(o,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(n);!t&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);oU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,$U):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},jU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RD.type="LOCAL";const zU=RD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD extends PD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}DD.type="SESSION";const ND=DD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new h1(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const u=Array.from(o).map(async h=>h(t.origin,i)),d=await HU(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}h1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(s="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((u,d)=>{const h=_S("",20);r.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(g){const w=g;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(w.data.response);break;default:clearTimeout(f),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(){return window}function GU(s){Za().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){return typeof Za().WorkerGlobalScope<"u"&&typeof Za().importScripts=="function"}async function qU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KU(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function QU(){return MD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebaseLocalStorageDb",XU=1,f_="firebaseLocalStorage",OD="fbase_key";class h0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function p1(s,e){return s.transaction([f_],e?"readwrite":"readonly").objectStore(f_)}function YU(){const s=indexedDB.deleteDatabase(LD);return new h0(s).toPromise()}function ob(){const s=indexedDB.open(LD,XU);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const n=s.result;try{n.createObjectStore(f_,{keyPath:OD})}catch(r){t(r)}}),s.addEventListener("success",async()=>{const n=s.result;n.objectStoreNames.contains(f_)?e(n):(n.close(),await YU(),e(await ob()))})})}async function kI(s,e,t){const n=p1(s,!0).put({[OD]:e,value:t});return new h0(n).toPromise()}async function JU(s,e){const t=p1(s,!1).get(e),n=await new h0(t).toPromise();return n===void 0?null:n.value}function II(s,e){const t=p1(s,!0).delete(e);return new h0(t).toPromise()}const ZU=800,e5=3;class BD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ob(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>e5)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=h1._getInstance(QU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await qU(),!this.activeServiceWorker)return;this.sender=new WU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ob();return await kI(e,p_,"1"),await II(e,p_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>kI(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>JU(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>II(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=p1(r,!1).getAll();return new h0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BD.type="LOCAL";const t5=BD;new u0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(s,e){return e?_l(e):(Ve(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends vS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return uf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return uf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function r5(s){return ID(s.auth,new xS(s),s.bypassAuthState)}function s5(s){const{auth:e,user:t}=s;return Ve(t,e,"internal-error"),NU(t,new xS(s),s.bypassAuthState)}async function i5(s){const{auth:e,user:t}=s;return Ve(t,e,"internal-error"),DU(t,new xS(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return r5;case"linkViaPopup":case"linkViaRedirect":return i5;case"reauthViaPopup":case"reauthViaRedirect":return s5;default:ea(this.auth,"internal-error")}}resolve(e){Tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=new u0(2e3,1e4);class ef extends VD{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ef.currentPopupAction&&ef.currentPopupAction.cancel(),ef.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){Tl(this.filter.length===1,"Popup operations only handle one event");const e=_S();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ja(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ja(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ef.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ja(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,a5.get())};e()}}ef.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5="pendingRedirect",mA=new Map;class l5 extends VD{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=mA.get(this.auth._key());if(!e){try{const n=await c5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}mA.set(this.auth._key(),e)}return this.bypassAuthState||mA.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function c5(s,e){const t=h5(e),n=d5(s);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function u5(s,e){mA.set(s._key(),e)}function d5(s){return _l(s._redirectPersistence)}function h5(s){return fA(o5,s.config.apiKey,s.name)}async function p5(s,e,t=!1){if(wi(s.app))return Promise.reject(gu(s));const n=Ym(s),r=n5(n,e),o=await new l5(n,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=600*1e3;class m5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!UD(e)){const r=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ja(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f5&&this.cachedEventUids.clear(),this.cachedEventUids.has(PI(e))}saveEventToCache(e){this.cachedEventUids.add(PI(e)),this.lastProcessedEventTime=Date.now()}}function PI(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function UD({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function g5(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UD(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(s,e={}){return Lu(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v5=/^https?/;async function A5(s){if(s.config.emulator)return;const{authorizedDomains:e}=await y5(s);for(const t of e)try{if(_5(t))return}catch{}ea(s,"unauthorized-domain")}function _5(s){const e=ib(),{protocol:t,hostname:n}=new URL(e);if(s.startsWith("chrome-extension://")){const o=new URL(s);return o.hostname===""&&n===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!v5.test(t))return!1;if(w5.test(s))return n===s;const r=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=new u0(3e4,6e4);function RI(){const s=Za().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function E5(s){return new Promise((e,t)=>{var r,i,o;function n(){RI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RI(),t(Ja(s,"network-request-failed"))},timeout:x5.get()})}if((i=(r=Za().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Za().gapi)!=null&&o.load)n();else{const u=gU("iframefcb");return Za()[u]=()=>{gapi.load?n():t(Ja(s,"network-request-failed"))},CD(`${mU()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw gA=null,e})}let gA=null;function b5(s){return gA=gA||E5(s),gA}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=new u0(5e3,15e3),S5="__/auth/iframe",F5="emulator/auth/iframe",T5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I5(s){const e=s.config;Ve(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?gS(e,F5):`https://${s.config.authDomain}/${S5}`,n={apiKey:e.apiKey,appName:s.name,v:Kh},r=k5.get(s.config.apiHost);r&&(n.eid=r);const i=s._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${c0(n).slice(1)}`}async function P5(s){const e=await b5(s),t=Za().gapi;return Ve(t,s,"internal-error"),e.open({where:document.body,url:I5(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T5,dontclear:!0},n=>new Promise(async(r,i)=>{await n.restyle({setHideOnLeave:!1});const o=Ja(s,"network-request-failed"),u=Za().setTimeout(()=>{i(o)},C5.get());function d(){Za().clearTimeout(u),r(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D5=500,N5=600,M5="_blank",L5="http://localhost";class DI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O5(s,e,t,n=D5,r=N5){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...R5,width:n.toString(),height:r.toString(),top:i,left:o},h=Pr().toLowerCase();t&&(u=wD(h)?M5:t),gD(h)&&(e=e||L5,d.scrollbars="yes");const f=Object.entries(d).reduce((w,[A,S])=>`${w}${A}=${S},`,"");if(aU(h)&&u!=="_self")return B5(e||"",u),new DI(null);const g=window.open(e||"",u,f);Ve(g,s,"popup-blocked");try{g.focus()}catch{}return new DI(g)}function B5(s,e){const t=document.createElement("a");t.href=s,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="__/auth/handler",U5="emulator/auth/handler",j5=encodeURIComponent("fac");async function NI(s,e,t,n,r,i){Ve(s.config.authDomain,s,"auth-domain-config-required"),Ve(s.config.apiKey,s,"invalid-api-key");const o={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:n,v:Kh,eventId:r};if(e instanceof TD){e.setDefaultLanguage(s.languageCode),o.providerId=e.providerId||"",S6(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof d0){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}s.tenantId&&(o.tid=s.tenantId);const u=o;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const d=await s._getAppCheckToken(),h=d?`#${j5}=${encodeURIComponent(d)}`:"";return`${$5(s)}?${c0(u).slice(1)}${h}`}function $5({config:s}){return s.emulator?gS(s,U5):`https://${s.authDomain}/${V5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="webStorageSupport";class z5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ND,this._completeRedirectFn=p5,this._overrideRedirectResult=u5}async _openPopup(e,t,n,r){var o;Tl((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await NI(e,t,n,ib(),r);return O5(e,i,_S())}async _openRedirect(e,t,n,r){await this._originValidation(e);const i=await NI(e,t,n,ib(),r);return GU(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(Tl(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await P5(e),n=new m5(e);return t.register("authEvent",r=>(Ve(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(IE,{type:IE},r=>{var o;const i=(o=r==null?void 0:r[0])==null?void 0:o[IE];i!==void 0&&t(!!i),ea(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=A5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ED()||yD()||wS()}}const H5=z5;var MI="@firebase/auth",LI="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q5(s){Oh(new Au("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=n.options;Ve(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:u,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bD(s)},h=new hU(n,r,i,d);return xU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Oh(new Au("auth-internal",e=>{const t=Ym(e.getProvider("auth").getImmediate());return(n=>new W5(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ya(MI,LI,G5(s)),Ya(MI,LI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=300,Q5=tD("authIdTokenMaxAge")||K5;let OI=null;const X5=s=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Q5)return;const r=t==null?void 0:t.token;OI!==r&&(OI=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Y5(s=fS()){const e=c1(s,"auth");if(e.isInitialized())return e.getImmediate();const t=_U(s,{popupRedirectResolver:H5,persistence:[t5,zU,ND]}),n=tD("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=X5(i.toString());VU(t,o,()=>o(t.currentUser)),BU(t,u=>o(u))}}const r=JR("auth");return r&&EU(t,`http://${r}`),t}function J5(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}pU({loadJS(s){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",s),n.onload=e,n.onerror=r=>{const i=Ja("internal-error");i.customData=r,t(i)},n.type="text/javascript",n.charset="UTF-8",J5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q5("Browser");var BI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yu,jD;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function L(){}L.prototype=R.prototype,D.F=R.prototype,D.prototype=new L,D.prototype.constructor=D,D.D=function(U,V,G){for(var $=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)$[ye-2]=arguments[ye];return R.prototype[V].apply(U,$)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,R,L){L||(L=0);const U=Array(16);if(typeof R=="string")for(var V=0;V<16;++V)U[V]=R.charCodeAt(L++)|R.charCodeAt(L++)<<8|R.charCodeAt(L++)<<16|R.charCodeAt(L++)<<24;else for(V=0;V<16;++V)U[V]=R[L++]|R[L++]<<8|R[L++]<<16|R[L++]<<24;R=D.g[0],L=D.g[1],V=D.g[2];let G=D.g[3],$;$=R+(G^L&(V^G))+U[0]+3614090360&4294967295,R=L+($<<7&4294967295|$>>>25),$=G+(V^R&(L^V))+U[1]+3905402710&4294967295,G=R+($<<12&4294967295|$>>>20),$=V+(L^G&(R^L))+U[2]+606105819&4294967295,V=G+($<<17&4294967295|$>>>15),$=L+(R^V&(G^R))+U[3]+3250441966&4294967295,L=V+($<<22&4294967295|$>>>10),$=R+(G^L&(V^G))+U[4]+4118548399&4294967295,R=L+($<<7&4294967295|$>>>25),$=G+(V^R&(L^V))+U[5]+1200080426&4294967295,G=R+($<<12&4294967295|$>>>20),$=V+(L^G&(R^L))+U[6]+2821735955&4294967295,V=G+($<<17&4294967295|$>>>15),$=L+(R^V&(G^R))+U[7]+4249261313&4294967295,L=V+($<<22&4294967295|$>>>10),$=R+(G^L&(V^G))+U[8]+1770035416&4294967295,R=L+($<<7&4294967295|$>>>25),$=G+(V^R&(L^V))+U[9]+2336552879&4294967295,G=R+($<<12&4294967295|$>>>20),$=V+(L^G&(R^L))+U[10]+4294925233&4294967295,V=G+($<<17&4294967295|$>>>15),$=L+(R^V&(G^R))+U[11]+2304563134&4294967295,L=V+($<<22&4294967295|$>>>10),$=R+(G^L&(V^G))+U[12]+1804603682&4294967295,R=L+($<<7&4294967295|$>>>25),$=G+(V^R&(L^V))+U[13]+4254626195&4294967295,G=R+($<<12&4294967295|$>>>20),$=V+(L^G&(R^L))+U[14]+2792965006&4294967295,V=G+($<<17&4294967295|$>>>15),$=L+(R^V&(G^R))+U[15]+1236535329&4294967295,L=V+($<<22&4294967295|$>>>10),$=R+(V^G&(L^V))+U[1]+4129170786&4294967295,R=L+($<<5&4294967295|$>>>27),$=G+(L^V&(R^L))+U[6]+3225465664&4294967295,G=R+($<<9&4294967295|$>>>23),$=V+(R^L&(G^R))+U[11]+643717713&4294967295,V=G+($<<14&4294967295|$>>>18),$=L+(G^R&(V^G))+U[0]+3921069994&4294967295,L=V+($<<20&4294967295|$>>>12),$=R+(V^G&(L^V))+U[5]+3593408605&4294967295,R=L+($<<5&4294967295|$>>>27),$=G+(L^V&(R^L))+U[10]+38016083&4294967295,G=R+($<<9&4294967295|$>>>23),$=V+(R^L&(G^R))+U[15]+3634488961&4294967295,V=G+($<<14&4294967295|$>>>18),$=L+(G^R&(V^G))+U[4]+3889429448&4294967295,L=V+($<<20&4294967295|$>>>12),$=R+(V^G&(L^V))+U[9]+568446438&4294967295,R=L+($<<5&4294967295|$>>>27),$=G+(L^V&(R^L))+U[14]+3275163606&4294967295,G=R+($<<9&4294967295|$>>>23),$=V+(R^L&(G^R))+U[3]+4107603335&4294967295,V=G+($<<14&4294967295|$>>>18),$=L+(G^R&(V^G))+U[8]+1163531501&4294967295,L=V+($<<20&4294967295|$>>>12),$=R+(V^G&(L^V))+U[13]+2850285829&4294967295,R=L+($<<5&4294967295|$>>>27),$=G+(L^V&(R^L))+U[2]+4243563512&4294967295,G=R+($<<9&4294967295|$>>>23),$=V+(R^L&(G^R))+U[7]+1735328473&4294967295,V=G+($<<14&4294967295|$>>>18),$=L+(G^R&(V^G))+U[12]+2368359562&4294967295,L=V+($<<20&4294967295|$>>>12),$=R+(L^V^G)+U[5]+4294588738&4294967295,R=L+($<<4&4294967295|$>>>28),$=G+(R^L^V)+U[8]+2272392833&4294967295,G=R+($<<11&4294967295|$>>>21),$=V+(G^R^L)+U[11]+1839030562&4294967295,V=G+($<<16&4294967295|$>>>16),$=L+(V^G^R)+U[14]+4259657740&4294967295,L=V+($<<23&4294967295|$>>>9),$=R+(L^V^G)+U[1]+2763975236&4294967295,R=L+($<<4&4294967295|$>>>28),$=G+(R^L^V)+U[4]+1272893353&4294967295,G=R+($<<11&4294967295|$>>>21),$=V+(G^R^L)+U[7]+4139469664&4294967295,V=G+($<<16&4294967295|$>>>16),$=L+(V^G^R)+U[10]+3200236656&4294967295,L=V+($<<23&4294967295|$>>>9),$=R+(L^V^G)+U[13]+681279174&4294967295,R=L+($<<4&4294967295|$>>>28),$=G+(R^L^V)+U[0]+3936430074&4294967295,G=R+($<<11&4294967295|$>>>21),$=V+(G^R^L)+U[3]+3572445317&4294967295,V=G+($<<16&4294967295|$>>>16),$=L+(V^G^R)+U[6]+76029189&4294967295,L=V+($<<23&4294967295|$>>>9),$=R+(L^V^G)+U[9]+3654602809&4294967295,R=L+($<<4&4294967295|$>>>28),$=G+(R^L^V)+U[12]+3873151461&4294967295,G=R+($<<11&4294967295|$>>>21),$=V+(G^R^L)+U[15]+530742520&4294967295,V=G+($<<16&4294967295|$>>>16),$=L+(V^G^R)+U[2]+3299628645&4294967295,L=V+($<<23&4294967295|$>>>9),$=R+(V^(L|~G))+U[0]+4096336452&4294967295,R=L+($<<6&4294967295|$>>>26),$=G+(L^(R|~V))+U[7]+1126891415&4294967295,G=R+($<<10&4294967295|$>>>22),$=V+(R^(G|~L))+U[14]+2878612391&4294967295,V=G+($<<15&4294967295|$>>>17),$=L+(G^(V|~R))+U[5]+4237533241&4294967295,L=V+($<<21&4294967295|$>>>11),$=R+(V^(L|~G))+U[12]+1700485571&4294967295,R=L+($<<6&4294967295|$>>>26),$=G+(L^(R|~V))+U[3]+2399980690&4294967295,G=R+($<<10&4294967295|$>>>22),$=V+(R^(G|~L))+U[10]+4293915773&4294967295,V=G+($<<15&4294967295|$>>>17),$=L+(G^(V|~R))+U[1]+2240044497&4294967295,L=V+($<<21&4294967295|$>>>11),$=R+(V^(L|~G))+U[8]+1873313359&4294967295,R=L+($<<6&4294967295|$>>>26),$=G+(L^(R|~V))+U[15]+4264355552&4294967295,G=R+($<<10&4294967295|$>>>22),$=V+(R^(G|~L))+U[6]+2734768916&4294967295,V=G+($<<15&4294967295|$>>>17),$=L+(G^(V|~R))+U[13]+1309151649&4294967295,L=V+($<<21&4294967295|$>>>11),$=R+(V^(L|~G))+U[4]+4149444226&4294967295,R=L+($<<6&4294967295|$>>>26),$=G+(L^(R|~V))+U[11]+3174756917&4294967295,G=R+($<<10&4294967295|$>>>22),$=V+(R^(G|~L))+U[2]+718787259&4294967295,V=G+($<<15&4294967295|$>>>17),$=L+(G^(V|~R))+U[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(V+($<<21&4294967295|$>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+G&4294967295}n.prototype.v=function(D,R){R===void 0&&(R=D.length);const L=R-this.blockSize,U=this.C;let V=this.h,G=0;for(;G<R;){if(V==0)for(;G<=L;)r(this,D,G),G+=this.blockSize;if(typeof D=="string"){for(;G<R;)if(U[V++]=D.charCodeAt(G++),V==this.blockSize){r(this,U),V=0;break}}else for(;G<R;)if(U[V++]=D[G++],V==this.blockSize){r(this,U),V=0;break}}this.h=V,this.o+=R},n.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;R=this.o*8;for(var L=D.length-8;L<D.length;++L)D[L]=R&255,R/=256;for(this.v(D),D=Array(16),R=0,L=0;L<4;++L)for(let U=0;U<32;U+=8)D[R++]=this.g[L]>>>U&255;return D};function i(D,R){var L=u;return Object.prototype.hasOwnProperty.call(L,D)?L[D]:L[D]=R(D)}function o(D,R){this.h=R;const L=[];let U=!0;for(let V=D.length-1;V>=0;V--){const G=D[V]|0;U&&G==R||(L[V]=G,U=!1)}this.g=L}var u={};function d(D){return-128<=D&&D<128?i(D,function(R){return new o([R|0],R<0?-1:0)}):new o([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return T(h(-D));const R=[];let L=1;for(let U=0;D>=L;U++)R[U]=D/L|0,L*=4294967296;return new o(R,0)}function f(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return T(f(D.substring(1),R));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=h(Math.pow(R,8));let U=g;for(let G=0;G<D.length;G+=8){var V=Math.min(8,D.length-G);const $=parseInt(D.substring(G,G+V),R);V<8?(V=h(Math.pow(R,V)),U=U.j(V).add(h($))):(U=U.j(L),U=U.add(h($)))}return U}var g=d(0),w=d(1),A=d(16777216);s=o.prototype,s.m=function(){if(C(this))return-T(this).m();let D=0,R=1;for(let L=0;L<this.g.length;L++){const U=this.i(L);D+=(U>=0?U:4294967296+U)*R,R*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(C(this))return"-"+T(this).toString(D);const R=h(Math.pow(D,6));var L=this;let U="";for(;;){const V=j(L,R).g;L=P(L,V.j(R));let G=((L.g.length>0?L.g[0]:L.h)>>>0).toString(D);if(L=V,S(L))return G+U;for(;G.length<6;)G="0"+G;U=G+U}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(let R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function C(D){return D.h==-1}s.l=function(D){return D=P(this,D),C(D)?-1:S(D)?0:1};function T(D){const R=D.g.length,L=[];for(let U=0;U<R;U++)L[U]=~D.g[U];return new o(L,~D.h).add(w)}s.abs=function(){return C(this)?T(this):this},s.add=function(D){const R=Math.max(this.g.length,D.g.length),L=[];let U=0;for(let V=0;V<=R;V++){let G=U+(this.i(V)&65535)+(D.i(V)&65535),$=(G>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);U=$>>>16,G&=65535,$&=65535,L[V]=$<<16|G}return new o(L,L[L.length-1]&-2147483648?-1:0)};function P(D,R){return D.add(T(R))}s.j=function(D){if(S(this)||S(D))return g;if(C(this))return C(D)?T(this).j(T(D)):T(T(this).j(D));if(C(D))return T(this.j(T(D)));if(this.l(A)<0&&D.l(A)<0)return h(this.m()*D.m());const R=this.g.length+D.g.length,L=[];for(var U=0;U<2*R;U++)L[U]=0;for(U=0;U<this.g.length;U++)for(let V=0;V<D.g.length;V++){const G=this.i(U)>>>16,$=this.i(U)&65535,ye=D.i(V)>>>16,ce=D.i(V)&65535;L[2*U+2*V]+=$*ce,O(L,2*U+2*V),L[2*U+2*V+1]+=G*ce,O(L,2*U+2*V+1),L[2*U+2*V+1]+=$*ye,O(L,2*U+2*V+1),L[2*U+2*V+2]+=G*ye,O(L,2*U+2*V+2)}for(D=0;D<R;D++)L[D]=L[2*D+1]<<16|L[2*D];for(D=R;D<2*R;D++)L[D]=0;return new o(L,0)};function O(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function N(D,R){this.g=D,this.h=R}function j(D,R){if(S(R))throw Error("division by zero");if(S(D))return new N(g,g);if(C(D))return R=j(T(D),R),new N(T(R.g),T(R.h));if(C(R))return R=j(D,T(R)),new N(T(R.g),R.h);if(D.g.length>30){if(C(D)||C(R))throw Error("slowDivide_ only works with positive integers.");for(var L=w,U=R;U.l(D)<=0;)L=z(L),U=z(U);var V=W(L,1),G=W(U,1);for(U=W(U,2),L=W(L,2);!S(U);){var $=G.add(U);$.l(D)<=0&&(V=V.add(L),G=$),U=W(U,1),L=W(L,1)}return R=P(D,V.j(R)),new N(V,R)}for(V=g;D.l(R)>=0;){for(L=Math.max(1,Math.floor(D.m()/R.m())),U=Math.ceil(Math.log(L)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),G=h(L),$=G.j(R);C($)||$.l(D)>0;)L-=U,G=h(L),$=G.j(R);S(G)&&(G=w),V=V.add(G),D=P(D,$)}return new N(V,D)}s.B=function(D){return j(this,D).h},s.and=function(D){const R=Math.max(this.g.length,D.g.length),L=[];for(let U=0;U<R;U++)L[U]=this.i(U)&D.i(U);return new o(L,this.h&D.h)},s.or=function(D){const R=Math.max(this.g.length,D.g.length),L=[];for(let U=0;U<R;U++)L[U]=this.i(U)|D.i(U);return new o(L,this.h|D.h)},s.xor=function(D){const R=Math.max(this.g.length,D.g.length),L=[];for(let U=0;U<R;U++)L[U]=this.i(U)^D.i(U);return new o(L,this.h^D.h)};function z(D){const R=D.g.length+1,L=[];for(let U=0;U<R;U++)L[U]=D.i(U)<<1|D.i(U-1)>>>31;return new o(L,D.h)}function W(D,R){const L=R>>5;R%=32;const U=D.g.length-L,V=[];for(let G=0;G<U;G++)V[G]=R>0?D.i(G+L)>>>R|D.i(G+L+1)<<32-R:D.i(G+L);return new o(V,D.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,jD=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,yu=o}).apply(typeof BI<"u"?BI:typeof self<"u"?self:typeof window<"u"?window:{});var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $D,dg,zD,yA,lb,HD,WD,GD;(function(){var s,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kv=="object"&&Kv];for(var E=0;E<m.length;++E){var k=m[E];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var n=t(this);function r(m,E){if(E)e:{var k=n;m=m.split(".");for(var B=0;B<m.length-1;B++){var J=m[B];if(!(J in k))break e;k=k[J]}m=m[m.length-1],B=k[m],E=E(B),E!=B&&E!=null&&e(k,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var k=[],B;for(B in E)Object.prototype.hasOwnProperty.call(E,B)&&k.push([B,E[B]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function d(m,E,k){return m.call.apply(m.bind,arguments)}function h(m,E,k){return h=d,h.apply(null,arguments)}function f(m,E){var k=Array.prototype.slice.call(arguments,1);return function(){var B=k.slice();return B.push.apply(B,arguments),m.apply(this,B)}}function g(m,E){function k(){}k.prototype=E.prototype,m.Z=E.prototype,m.prototype=new k,m.prototype.constructor=m,m.Ob=function(B,J,te){for(var me=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)me[Ge-2]=arguments[Ge];return E.prototype[J].apply(B,me)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function A(m){const E=m.length;if(E>0){const k=Array(E);for(let B=0;B<E;B++)k[B]=m[B];return k}return[]}function S(m,E){for(let B=1;B<arguments.length;B++){const J=arguments[B];var k=typeof J;if(k=k!="object"?k:J?Array.isArray(J)?"array":k:"null",k=="array"||k=="object"&&typeof J.length=="number"){k=m.length||0;const te=J.length||0;m.length=k+te;for(let me=0;me<te;me++)m[k+me]=J[me]}else m.push(J)}}class C{constructor(E,k){this.i=E,this.j=k,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function T(m){o.setTimeout(()=>{throw m},0)}function P(){var m=D;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class O{constructor(){this.h=this.g=null}add(E,k){const B=N.get();B.set(E,k),this.h?this.h.next=B:this.g=B,this.h=B}}var N=new C(()=>new j,m=>m.reset());class j{constructor(){this.next=this.g=this.h=null}set(E,k){this.h=E,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let z,W=!1,D=new O,R=()=>{const m=Promise.resolve(void 0);z=()=>{m.then(L)}};function L(){for(var m;m=P();){try{m.h.call(m.g)}catch(k){T(k)}var E=N;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}W=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const k=()=>{};o.addEventListener("test",k,E),o.removeEventListener("test",k,E)}catch{}return m})();function $(m){return/^[\s\xa0]*$/.test(m)}function ye(m,E){V.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}g(ye,V),ye.prototype.init=function(m,E){const k=this.type=m.type,B=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(k=="mouseover"?E=m.fromElement:k=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),he=0;function ge(m,E,k,B,J){this.listener=m,this.proxy=null,this.src=E,this.type=k,this.capture=!!B,this.ha=J,this.key=++he,this.da=this.fa=!1}function ae(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function _e(m,E,k){for(const B in m)E.call(k,m[B],B,m)}function fe(m,E){for(const k in m)E.call(void 0,m[k],k,m)}function X(m){const E={};for(const k in m)E[k]=m[k];return E}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(m,E){let k,B;for(let J=1;J<arguments.length;J++){B=arguments[J];for(k in B)m[k]=B[k];for(let te=0;te<re.length;te++)k=re[te],Object.prototype.hasOwnProperty.call(B,k)&&(m[k]=B[k])}}function we(m){this.src=m,this.g={},this.h=0}we.prototype.add=function(m,E,k,B,J){const te=m.toString();m=this.g[te],m||(m=this.g[te]=[],this.h++);const me=De(m,E,B,J);return me>-1?(E=m[me],k||(E.fa=!1)):(E=new ge(E,this.src,te,!!B,J),E.fa=k,m.push(E)),E};function be(m,E){const k=E.type;if(k in m.g){var B=m.g[k],J=Array.prototype.indexOf.call(B,E,void 0),te;(te=J>=0)&&Array.prototype.splice.call(B,J,1),te&&(ae(E),m.g[k].length==0&&(delete m.g[k],m.h--))}}function De(m,E,k,B){for(let J=0;J<m.length;++J){const te=m[J];if(!te.da&&te.listener==E&&te.capture==!!k&&te.ha==B)return J}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),et={};function ft(m,E,k,B,J){if(Array.isArray(E)){for(let te=0;te<E.length;te++)ft(m,E[te],k,B,J);return null}return k=i2(k),m&&m[ce]?m.J(E,k,u(B)?!!B.capture:!1,J):fn(m,E,k,!1,B,J)}function fn(m,E,k,B,J,te){if(!E)throw Error("Invalid event type");const me=u(J)?!!J.capture:!!J;let Ge=np(m);if(Ge||(m[Me]=Ge=new we(m)),k=Ge.add(E,k,B,me,te),k.proxy)return k;if(B=Hr(),k.proxy=B,B.src=m,B.listener=k,m.addEventListener)G||(J=me),J===void 0&&(J=!1),m.addEventListener(E.toString(),B,J);else if(m.attachEvent)m.attachEvent(Nl(E.toString()),B);else if(m.addListener&&m.removeListener)m.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Hr(){function m(k){return E.call(m.src,m.listener,k)}const E=k0;return m}function po(m,E,k,B,J){if(Array.isArray(E))for(var te=0;te<E.length;te++)po(m,E[te],k,B,J);else B=u(B)?!!B.capture:!!B,k=i2(k),m&&m[ce]?(m=m.i,te=String(E).toString(),te in m.g&&(E=m.g[te],k=De(E,k,B,J),k>-1&&(ae(E[k]),Array.prototype.splice.call(E,k,1),E.length==0&&(delete m.g[te],m.h--)))):m&&(m=np(m))&&(E=m.g[E.toString()],m=-1,E&&(m=De(E,k,B,J)),(k=m>-1?E[m]:null)&&bi(k))}function bi(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[ce])be(E.i,m);else{var k=m.type,B=m.proxy;E.removeEventListener?E.removeEventListener(k,B,m.capture):E.detachEvent?E.detachEvent(Nl(k),B):E.addListener&&E.removeListener&&E.removeListener(B),(k=np(E))?(be(k,m),k.h==0&&(k.src=null,E[Me]=null)):ae(m)}}}function Nl(m){return m in et?et[m]:et[m]="on"+m}function k0(m,E){if(m.da)m=!0;else{E=new ye(E,this);const k=m.listener,B=m.ha||m.src;m.fa&&bi(m),m=k.call(B,E)}return m}function np(m){return m=m[Me],m instanceof we?m:null}var ju="__closure_events_fn_"+(Math.random()*1e9>>>0);function i2(m){return typeof m=="function"?m:(m[ju]||(m[ju]=function(E){return m.handleEvent(E)}),m[ju])}function xn(){U.call(this),this.i=new we(this),this.M=this,this.G=null}g(xn,U),xn.prototype[ce]=!0,xn.prototype.removeEventListener=function(m,E,k,B){po(this,m,E,k,B)};function mn(m,E){var k,B=m.G;if(B)for(k=[];B;B=B.G)k.push(B);if(m=m.M,B=E.type||E,typeof E=="string")E=new V(E,m);else if(E instanceof V)E.target=E.target||m;else{var J=E;E=new V(B,m),se(E,J)}J=!0;let te,me;if(k)for(me=k.length-1;me>=0;me--)te=E.g=k[me],J=Ci(te,B,!0,E)&&J;if(te=E.g=m,J=Ci(te,B,!0,E)&&J,J=Ci(te,B,!1,E)&&J,k)for(me=0;me<k.length;me++)te=E.g=k[me],J=Ci(te,B,!1,E)&&J}xn.prototype.N=function(){if(xn.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const k=m.g[E];for(let B=0;B<k.length;B++)ae(k[B]);delete m.g[E],m.h--}}this.G=null},xn.prototype.J=function(m,E,k,B){return this.i.add(String(m),E,!1,k,B)},xn.prototype.K=function(m,E,k,B){return this.i.add(String(m),E,!0,k,B)};function Ci(m,E,k,B){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let J=!0;for(let te=0;te<E.length;++te){const me=E[te];if(me&&!me.da&&me.capture==k){const Ge=me.listener,gn=me.ha||me.src;me.fa&&be(m.i,me),J=Ge.call(gn,B)!==!1&&J}}return J&&!B.defaultPrevented}function a2(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:o.setTimeout(m,E||0)}function o2(m){m.g=a2(()=>{m.g=null,m.i&&(m.i=!1,o2(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class I0 extends U{constructor(E,k){super(),this.m=E,this.l=k,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:o2(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ml(m){U.call(this),this.h=m,this.g={}}g(Ml,U);var l2=[];function rp(m){_e(m.g,function(E,k){this.g.hasOwnProperty(k)&&bi(E)},m),m.g={}}Ml.prototype.N=function(){Ml.Z.N.call(this),rp(this)},Ml.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ll=o.JSON.stringify,P0=o.JSON.parse,$u=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function Ol(){}function R0(){}var Bl={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sp(){V.call(this,"d")}g(sp,V);function c2(){V.call(this,"c")}g(c2,V);var Si={},ip=null;function Vl(){return ip=ip||new xn}Si.Ia="serverreachability";function ap(m){V.call(this,Si.Ia,m)}g(ap,V);function fo(m){const E=Vl();mn(E,new ap(E))}Si.STAT_EVENT="statevent";function mo(m,E){V.call(this,Si.STAT_EVENT,m),this.stat=E}g(mo,V);function rn(m){const E=Vl();mn(E,new mo(E,m))}Si.Ja="timingevent";function u2(m,E){V.call(this,Si.Ja,m),this.size=E}g(u2,V);function Ul(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},E)}function jl(){this.g=!0}jl.prototype.ua=function(){this.g=!1};function D0(m,E,k,B,J,te){m.info(function(){if(m.g)if(te){var me="",Ge=te.split("&");for(let _t=0;_t<Ge.length;_t++){var gn=Ge[_t].split("=");if(gn.length>1){const En=gn[0];gn=gn[1];const ms=En.split("_");me=ms.length>=2&&ms[1]=="type"?me+(En+"="+gn+"&"):me+(En+"=redacted&")}}}else me=null;else me=te;return"XMLHTTP REQ ("+B+") [attempt "+J+"]: "+E+`
`+k+`
`+me})}function N0(m,E,k,B,J,te,me){m.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+J+"]: "+E+`
`+k+`
`+te+" "+me})}function ra(m,E,k,B){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+zu(m,k)+(B?" "+B:"")})}function M0(m,E){m.info(function(){return"TIMEOUT: "+E})}jl.prototype.info=function(){};function zu(m,E){if(!m.g)return E;if(!E)return null;try{const te=JSON.parse(E);if(te){for(m=0;m<te.length;m++)if(Array.isArray(te[m])){var k=te[m];if(!(k.length<2)){var B=k[1];if(Array.isArray(B)&&!(B.length<1)){var J=B[0];if(J!="noop"&&J!="stop"&&J!="close")for(let me=1;me<B.length;me++)B[me]=""}}}}return Ll(te)}catch{return E}}var $l={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},L0;function go(){}g(go,Ol),go.prototype.g=function(){return new XMLHttpRequest},L0=new go;function sa(m){return encodeURIComponent(String(m))}function op(m){var E=1;m=m.split(":");const k=[];for(;E>0&&m.length;)k.push(m.shift()),E--;return m.length&&k.push(m.join(":")),k}function Ks(m,E,k,B){this.j=m,this.i=E,this.l=k,this.S=B||1,this.V=new Ml(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new O0}function O0(){this.i=null,this.g="",this.h=!1}var B0={},d2={};function Fi(m,E,k){m.M=1,m.A=wo(Qs(E)),m.u=k,m.R=!0,h2(m,null)}function h2(m,E){m.F=Date.now(),Hu(m),m.B=Qs(m.A);var k=m.B,B=m.S;Array.isArray(B)||(B=[String(B)]),x2(k.i,"t",B),m.C=0,k=m.j.L,m.h=new O0,m.g=K0(m.j,k?E:null,!m.u),m.P>0&&(m.O=new I0(h(m.Y,m,m.g),m.P)),E=m.V,k=m.g,B=m.ba;var J="readystatechange";Array.isArray(J)||(J&&(l2[0]=J.toString()),J=l2);for(let te=0;te<J.length;te++){const me=ft(k,J[te],B||E.handleEvent,!1,E.h||E);if(!me)break;E.g[me.key]=me}E=m.J?X(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),fo(),D0(m.i,m.v,m.B,m.l,m.S,m.u)}Ks.prototype.ba=function(m){m=m.target;const E=this.O;E&&da(m)==3?E.j():this.Y(m)},Ks.prototype.Y=function(m){try{if(m==this.g)e:{const Ge=da(this.g),gn=this.g.ya(),_t=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||G0(this.g)))){this.K||Ge!=4||gn==7||(gn==8||_t<=0?fo(3):fo(2)),lp(this);var E=this.g.ca();this.X=E;var k=V0(this);if(this.o=E==200,N0(this.i,this.v,this.B,this.l,this.S,Ge,E),this.o){if(this.U&&!this.L){t:{if(this.g){var B,J=this.g;if((B=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(B)){var te=B;break t}}te=null}if(m=te)ra(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vt(this,m);else{this.o=!1,this.m=3,rn(12),yo(this),Wu(this);break e}}if(this.R){m=!0;let En;for(;!this.K&&this.C<k.length;)if(En=j0(this,k),En==d2){Ge==4&&(this.m=4,rn(14),m=!1),ra(this.i,this.l,null,"[Incomplete Response]");break}else if(En==B0){this.m=4,rn(15),ra(this.i,this.l,k,"[Invalid Chunk]"),m=!1;break}else ra(this.i,this.l,En,null),Vt(this,En);if(U0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||k.length!=0||this.h.h||(this.m=1,rn(16),m=!1),this.o=this.o&&m,!m)ra(this.i,this.l,k,"[Invalid Chunked Response]"),yo(this),Wu(this);else if(k.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),ed(me),me.P=!0,rn(11))}}else ra(this.i,this.l,k,null),Vt(this,k);Ge==4&&yo(this),this.o&&!this.K&&(Ge==4?wp(this.j,this):(this.o=!1,Hu(this)))}else b2(this.g),E==400&&k.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),yo(this),Wu(this)}}}catch{}finally{}};function V0(m){if(!U0(m))return m.g.la();const E=G0(m.g);if(E==="")return"";let k="";const B=E.length,J=da(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return yo(m),Wu(m),"";m.h.i=new o.TextDecoder}for(let te=0;te<B;te++)m.h.h=!0,k+=m.h.i.decode(E[te],{stream:!(J&&te==B-1)});return E.length=0,m.h.g+=k,m.C=0,m.h.g}function U0(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function j0(m,E){var k=m.C,B=E.indexOf(`
`,k);return B==-1?d2:(k=Number(E.substring(k,B)),isNaN(k)?B0:(B+=1,B+k>E.length?d2:(E=E.slice(B,B+k),m.C=B+k,E)))}Ks.prototype.cancel=function(){this.K=!0,yo(this)};function Hu(m){m.T=Date.now()+m.H,p2(m,m.H)}function p2(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ul(h(m.aa,m),E)}function lp(m){m.D&&(o.clearTimeout(m.D),m.D=null)}Ks.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(M0(this.i,this.B),this.M!=2&&(fo(),rn(17)),yo(this),this.m=2,Wu(this)):p2(this,this.T-m)};function Wu(m){m.j.I==0||m.K||wp(m.j,m)}function yo(m){lp(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,rp(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Vt(m,E){try{var k=m.j;if(k.I!=0&&(k.g==m||m2(k.h,m))){if(!m.L&&m2(k.h,m)&&k.I==3){try{var B=k.Ba.g.parse(E)}catch{B=null}if(Array.isArray(B)&&B.length==3){var J=B;if(J[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<m.F)yp(k),ps(k);else break e;fa(k),rn(18)}}else k.xa=J[1],0<k.xa-k.K&&J[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Ul(h(k.Va,k),6e3));Gu(k.h)<=1&&k.ta&&(k.ta=void 0)}else fs(k,11)}else if((m.L||k.g==m)&&yp(k),!$(E))for(J=k.Ba.g.parse(E),E=0;E<J.length;E++){let _t=J[E];const En=_t[0];if(!(En<=k.K))if(k.K=En,_t=_t[1],k.I==2)if(_t[0]=="c"){k.M=_t[1],k.ba=_t[2];const ms=_t[3];ms!=null&&(k.ka=ms,k.j.info("VER="+k.ka));const Eo=_t[4];Eo!=null&&(k.za=Eo,k.j.info("SVER="+k.za));const ma=_t[5];ma!=null&&typeof ma=="number"&&ma>0&&(B=1.5*ma,k.O=B,k.j.info("backChannelRequestTimeoutMs_="+B)),B=k;const ga=m.g;if(ga){const _p=ga.g?ga.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_p){var te=B.h;te.g||_p.indexOf("spdy")==-1&&_p.indexOf("quic")==-1&&_p.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(up(te,te.h),te.h=null))}if(B.G){const F2=ga.g?ga.g.getResponseHeader("X-HTTP-Session-Id"):null;F2&&(B.wa=F2,mt(B.J,B.G,F2))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-m.F,k.j.info("Handshake RTT: "+k.T+"ms")),B=k;var me=m;if(B.na=S2(B,B.L?B.ba:null,B.W),me.L){qu(B.h,me);var Ge=me,gn=B.O;gn&&(Ge.H=gn),Ge.D&&(lp(Ge),Hu(Ge)),B.g=me}else gr(B);k.i.length>0&&xo(k)}else _t[0]!="stop"&&_t[0]!="close"||fs(k,7);else k.I==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?fs(k,7):mp(k):_t[0]!="noop"&&k.l&&k.l.qa(_t),k.A=0)}}fo(4)}catch{}}var G1=class{constructor(m,E){this.g=m,this.map=E}};function cp(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function f2(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Gu(m){return m.h?1:m.g?m.g.size:0}function m2(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function up(m,E){m.g?m.g.add(E):m.h=E}function qu(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}cp.prototype.cancel=function(){if(this.i=us(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function us(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const k of m.g.values())E=E.concat(k.G);return E}return A(m.i)}var $0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ds(m,E){if(m){m=m.split("&");for(let k=0;k<m.length;k++){const B=m[k].indexOf("=");let J,te=null;B>=0?(J=m[k].substring(0,B),te=m[k].substring(B+1)):J=m[k],E(J,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function ia(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof ia?(this.l=m.l,Ku(this,m.j),this.o=m.o,this.g=m.g,aa(this,m.u),this.h=m.h,Hl(this,E2(m.i)),this.m=m.m):m&&(E=String(m).match($0))?(this.l=!1,Ku(this,E[1]||"",!0),this.o=Qu(E[2]||""),this.g=Qu(E[3]||"",!0),aa(this,E[4]),this.h=Qu(E[5]||"",!0),Hl(this,E[6]||"",!0),this.m=Qu(E[7]||"")):(this.l=!1,this.i=new it(null,this.l))}ia.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(Xu(E,y2,!0),":");var k=this.g;return(k||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Xu(E,y2,!0),"@"),m.push(sa(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&m.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&m.push("/"),m.push(Xu(k,k.charAt(0)=="/"?Yu:w2,!0))),(k=this.i.toString())&&m.push("?",k),(k=this.m)&&m.push("#",Xu(k,v2)),m.join("")},ia.prototype.resolve=function(m){const E=Qs(this);let k=!!m.j;k?Ku(E,m.j):k=!!m.o,k?E.o=m.o:k=!!m.g,k?E.g=m.g:k=m.u!=null;var B=m.h;if(k)aa(E,m.u);else if(k=!!m.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var J=E.h.lastIndexOf("/");J!=-1&&(B=E.h.slice(0,J+1)+B)}if(J=B,J==".."||J==".")B="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){B=J.lastIndexOf("/",0)==0,J=J.split("/");const te=[];for(let me=0;me<J.length;){const Ge=J[me++];Ge=="."?B&&me==J.length&&te.push(""):Ge==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),B&&me==J.length&&te.push("")):(te.push(Ge),B=!0)}B=te.join("/")}else B=J}return k?E.h=B:k=m.i.toString()!=="",k?Hl(E,E2(m.i)):k=!!m.m,k&&(E.m=m.m),E};function Qs(m){return new ia(m)}function Ku(m,E,k){m.j=k?Qu(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function aa(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Hl(m,E,k){E instanceof it?(m.i=E,hp(m.i,m.l)):(k||(E=Xu(E,q1)),m.i=new it(E,m.l))}function mt(m,E,k){m.i.set(E,k)}function wo(m){return mt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Qu(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Xu(m,E,k){return typeof m=="string"?(m=encodeURI(m).replace(E,g2),k&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function g2(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var y2=/[#\/\?@]/g,w2=/[#\?:]/g,Yu=/[#\?]/g,q1=/[#\?@]/g,v2=/#/g;function it(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function oa(m){m.g||(m.g=new Map,m.h=0,m.i&&ds(m.i,function(E,k){m.add(decodeURIComponent(E.replace(/\+/g," ")),k)}))}s=it.prototype,s.add=function(m,E){oa(this),this.i=null,m=la(this,m);let k=this.g.get(m);return k||this.g.set(m,k=[]),k.push(E),this.h+=1,this};function A2(m,E){oa(m),E=la(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function dp(m,E){return oa(m),E=la(m,E),m.g.has(E)}s.forEach=function(m,E){oa(this),this.g.forEach(function(k,B){k.forEach(function(J){m.call(E,J,B,this)},this)},this)};function _2(m,E){oa(m);let k=[];if(typeof E=="string")dp(m,E)&&(k=k.concat(m.g.get(la(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)k=k.concat(m[E]);return k}s.set=function(m,E){return oa(this),this.i=null,m=la(this,m),dp(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},s.get=function(m,E){return m?(m=_2(this,m),m.length>0?String(m[0]):E):E};function x2(m,E,k){A2(m,E),k.length>0&&(m.i=null,m.g.set(la(m,E),A(k)),m.h+=k.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let B=0;B<E.length;B++){var k=E[B];const J=sa(k);k=_2(this,k);for(let te=0;te<k.length;te++){let me=J;k[te]!==""&&(me+="="+sa(k[te])),m.push(me)}}return this.i=m.join("&")};function E2(m){const E=new it;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function la(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function hp(m,E){E&&!m.j&&(oa(m),m.i=null,m.g.forEach(function(k,B){const J=B.toLowerCase();B!=J&&(A2(this,B),x2(this,J,k))},m)),m.j=E}function ca(m,E){const k=new jl;if(o.Image){const B=new Image;B.onload=f(Zn,k,"TestLoadImage: loaded",!0,E,B),B.onerror=f(Zn,k,"TestLoadImage: error",!1,E,B),B.onabort=f(Zn,k,"TestLoadImage: abort",!1,E,B),B.ontimeout=f(Zn,k,"TestLoadImage: timeout",!1,E,B),o.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=m}else E(!1)}function ua(m,E){const k=new jl,B=new AbortController,J=setTimeout(()=>{B.abort(),Zn(k,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:B.signal}).then(te=>{clearTimeout(J),te.ok?Zn(k,"TestPingServer: ok",!0,E):Zn(k,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(J),Zn(k,"TestPingServer: error",!1,E)})}function Zn(m,E,k,B,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),B(k)}catch{}}function Ju(){this.g=new $u}function vo(m){this.i=m.Sb||null,this.h=m.ab||!1}g(vo,Ol),vo.prototype.g=function(){return new hs(this.i,this.h)};function hs(m,E){xn.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(hs,xn),s=hs.prototype,s.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,Ti(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||o).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wl(this)),this.readyState=0},s.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;z0(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function z0(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}s.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Wl(this):Ti(this),this.readyState==3&&z0(this)}},s.Oa=function(m){this.g&&(this.response=this.responseText=m,Wl(this))},s.Na=function(m){this.g&&(this.response=m,Wl(this))},s.ga=function(){this.g&&Wl(this)};function Wl(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ti(m)}s.setRequestHeader=function(m,E){this.A.append(m,E)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var k=E.next();!k.done;)k=k.value,m.push(k[0]+": "+k[1]),k=E.next();return m.join(`\r
`)};function Ti(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function H0(m){let E="";return _e(m,function(k,B){E+=B,E+=":",E+=k,E+=`\r
`}),E}function pp(m,E,k){e:{for(B in k){var B=!1;break e}B=!0}B||(k=H0(k),typeof m=="string"?k!=null&&sa(k):mt(m,E,k))}function Pt(m){xn.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Pt,xn);var W0=/^https?$/i,K1=["POST","PUT"];s=Pt.prototype,s.Fa=function(m){this.H=m},s.ea=function(m,E,k,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():L0.g(),this.g.onreadystatechange=w(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(te){Gl(this,te);return}if(m=k||"",k=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var J in B)k.set(J,B[J]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const te of B.keys())k.set(te,B.get(te));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(k.keys()).find(te=>te.toLowerCase()=="content-type"),J=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(K1,E,void 0)>=0)||B||J||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of k)this.g.setRequestHeader(te,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(te){Gl(this,te)}};function Gl(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,ql(m),_o(m)}function ql(m){m.A||(m.A=!0,mn(m,"complete"),mn(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,mn(this,"complete"),mn(this,"abort"),_o(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_o(this,!0)),Pt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ao(this):this.Xa())},s.Xa=function(){Ao(this)};function Ao(m){if(m.h&&typeof i<"u"){if(m.v&&da(m)==4)setTimeout(m.Ca.bind(m),0);else if(mn(m,"readystatechange"),da(m)==4){m.h=!1;try{const te=m.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var k;if(!(k=E)){var B;if(B=te===0){let me=String(m.D).match($0)[1]||null;!me&&o.self&&o.self.location&&(me=o.self.location.protocol.slice(0,-1)),B=!W0.test(me?me.toLowerCase():"")}k=B}if(k)mn(m,"complete"),mn(m,"success");else{m.o=6;try{var J=da(m)>2?m.g.statusText:""}catch{J=""}m.l=J+" ["+m.ca()+"]",ql(m)}}finally{_o(m)}}}}function _o(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const k=m.g;m.g=null,E||mn(m,"ready");try{k.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function da(m){return m.g?m.g.readyState:0}s.ca=function(){try{return da(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),P0(E)}};function G0(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function b2(m){const E={};m=(m.g&&da(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<m.length;B++){if($(m[B]))continue;var k=op(m[B]);const J=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const te=E[J]||[];E[J]=te,te.push(k)}fe(E,function(B){return B.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ha(m,E,k){return k&&k.internalChannelParams&&k.internalChannelParams[m]||E}function fp(m){this.za=0,this.i=[],this.j=new jl,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ha("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ha("baseRetryDelayMs",5e3,m),this.Za=ha("retryDelaySeedMs",1e4,m),this.Ta=ha("forwardChannelMaxRetries",2,m),this.va=ha("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new cp(m&&m.concurrentRequestLimit),this.Ba=new Ju,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=fp.prototype,s.ka=8,s.I=1,s.connect=function(m,E,k,B){rn(0),this.W=m,this.H=E||{},k&&B!==void 0&&(this.H.OSID=k,this.H.OAID=B),this.F=this.X,this.J=S2(this,null,this.W),xo(this)};function mp(m){if(gp(m),m.I==3){var E=m.V++,k=Qs(m.J);if(mt(k,"SID",m.M),mt(k,"RID",E),mt(k,"TYPE","terminate"),pa(m,k),E=new Ks(m,m.j,E),E.M=2,E.A=wo(Qs(k)),k=!1,o.navigator&&o.navigator.sendBeacon)try{k=o.navigator.sendBeacon(E.A.toString(),"")}catch{}!k&&o.Image&&(new Image().src=E.A,k=!0),k||(E.g=K0(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Hu(E)}td(m)}function ps(m){m.g&&(ed(m),m.g.cancel(),m.g=null)}function gp(m){ps(m),m.v&&(o.clearTimeout(m.v),m.v=null),yp(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function xo(m){if(!f2(m.h)&&!m.m){m.m=!0;var E=m.Ea;z||R(),W||(z(),W=!0),D.add(E,m),m.D=0}}function q0(m,E){return Gu(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ul(h(m.Ea,m,E),vp(m,m.D)),m.D++,!0)}s.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const J=new Ks(this,this.j,m);let te=this.o;if(this.U&&(te?(te=X(te),se(te,this.U)):te=this.U),this.u!==null||this.R||(J.J=te,te=null),this.S)e:{for(var E=0,k=0;k<this.i.length;k++){t:{var B=this.i[k];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(E+=B,E>4096){E=k;break e}if(E===4096||k===this.i.length-1){E=k+1;break e}}E=1e3}else E=1e3;E=C2(this,J,E),k=Qs(this.J),mt(k,"RID",m),mt(k,"CVER",22),this.G&&mt(k,"X-HTTP-Session-Id",this.G),pa(this,k),te&&(this.R?E="headers="+sa(H0(te))+"&"+E:this.u&&pp(k,this.u,te)),up(this.h,J),this.Ra&&mt(k,"TYPE","init"),this.S?(mt(k,"$req",E),mt(k,"SID","null"),J.U=!0,Fi(J,k,null)):Fi(J,k,E),this.I=2}}else this.I==3&&(m?Zu(this,m):this.i.length==0||f2(this.h)||Zu(this))};function Zu(m,E){var k;E?k=E.l:k=m.V++;const B=Qs(m.J);mt(B,"SID",m.M),mt(B,"RID",k),mt(B,"AID",m.K),pa(m,B),m.u&&m.o&&pp(B,m.u,m.o),k=new Ks(m,m.j,k,m.D+1),m.u===null&&(k.J=m.o),E&&(m.i=E.G.concat(m.i)),E=C2(m,k,1e3),k.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),up(m.h,k),Fi(k,B,E)}function pa(m,E){m.H&&_e(m.H,function(k,B){mt(E,B,k)}),m.l&&_e({},function(k,B){mt(E,B,k)})}function C2(m,E,k){k=Math.min(m.i.length,k);const B=m.l?h(m.l.Ka,m.l,m):null;e:{var J=m.i;let Ge=-1;for(;;){const gn=["count="+k];Ge==-1?k>0?(Ge=J[0].g,gn.push("ofs="+Ge)):Ge=0:gn.push("ofs="+Ge);let _t=!0;for(let En=0;En<k;En++){var te=J[En].g;const ms=J[En].map;if(te-=Ge,te<0)Ge=Math.max(0,J[En].g-100),_t=!1;else try{te="req"+te+"_"||"";try{var me=ms instanceof Map?ms:Object.entries(ms);for(const[Eo,ma]of me){let ga=ma;u(ma)&&(ga=Ll(ma)),gn.push(te+Eo+"="+encodeURIComponent(ga))}}catch(Eo){throw gn.push(te+"type="+encodeURIComponent("_badmap")),Eo}}catch{B&&B(ms)}}if(_t){me=gn.join("&");break e}}me=void 0}return m=m.i.splice(0,k),E.G=m,me}function gr(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;z||R(),W||(z(),W=!0),D.add(E,m),m.A=0}}function fa(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ul(h(m.Da,m),vp(m,m.A)),m.A++,!0)}s.Da=function(){if(this.v=null,Kl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ul(h(this.Wa,this),m)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),ps(this),Kl(this))};function ed(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function Kl(m){m.g=new Ks(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=Qs(m.na);mt(E,"RID","rpc"),mt(E,"SID",m.M),mt(E,"AID",m.K),mt(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&mt(E,"TO",m.ia),mt(E,"TYPE","xmlhttp"),pa(m,E),m.u&&m.o&&pp(E,m.u,m.o),m.O&&(m.g.H=m.O);var k=m.g;m=m.ba,k.M=1,k.A=wo(Qs(E)),k.u=null,k.R=!0,h2(k,m)}s.Va=function(){this.C!=null&&(this.C=null,ps(this),fa(this),rn(19))};function yp(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function wp(m,E){var k=null;if(m.g==E){yp(m),ed(m),m.g=null;var B=2}else if(m2(m.h,E))k=E.G,qu(m.h,E),B=1;else return;if(m.I!=0){if(E.o)if(B==1){k=E.u?E.u.length:0,E=Date.now()-E.F;var J=m.D;B=Vl(),mn(B,new u2(B,k)),xo(m)}else gr(m);else if(J=E.m,J==3||J==0&&E.X>0||!(B==1&&q0(m,E)||B==2&&fa(m)))switch(k&&k.length>0&&(E=m.h,E.i=E.i.concat(k)),J){case 1:fs(m,5);break;case 4:fs(m,10);break;case 3:fs(m,6);break;default:fs(m,2)}}}function vp(m,E){let k=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(k*=2),k*E}function fs(m,E){if(m.j.info("Error code "+E),E==2){var k=h(m.bb,m),B=m.Ua;const J=!B;B=new ia(B||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ku(B,"https"),wo(B),J?ca(B.toString(),k):ua(B.toString(),k)}else rn(2);m.I=0,m.l&&m.l.pa(E),td(m),gp(m)}s.bb=function(m){m?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function td(m){if(m.I=0,m.ja=[],m.l){const E=us(m.h);(E.length!=0||m.i.length!=0)&&(S(m.ja,E),S(m.ja,m.i),m.h.i.length=0,A(m.i),m.i.length=0),m.l.oa()}}function S2(m,E,k){var B=k instanceof ia?Qs(k):new ia(k);if(B.g!="")E&&(B.g=E+"."+B.g),aa(B,B.u);else{var J=o.location;B=J.protocol,E=E?E+"."+J.hostname:J.hostname,J=+J.port;const te=new ia(null);B&&Ku(te,B),E&&(te.g=E),J&&aa(te,J),k&&(te.h=k),B=te}return k=m.G,E=m.wa,k&&E&&mt(B,k,E),mt(B,"VER",m.ka),pa(m,B),B}function K0(m,E,k){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new Pt(new vo({ab:k})):new Pt(m.ma),E.Fa(m.L),E}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Q0(){}s=Q0.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ap(){}Ap.prototype.g=function(m,E){return new er(m,E)};function er(m,E){xn.call(this),this.g=new fp(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!$(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!$(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Ql(this)}g(er,xn),er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){mp(this.g)},er.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var k={};k.__data__=m,m=k}else this.v&&(k={},k.__data__=Ll(m),m=k);E.i.push(new G1(E.Ya++,m)),E.I==3&&xo(E)},er.prototype.N=function(){this.g.l=null,delete this.j,mp(this.g),delete this.g,er.Z.N.call(this)};function X0(m){sp.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const k in E){m=k;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}g(X0,sp);function Y0(){c2.call(this),this.status=1}g(Y0,c2);function Ql(m){this.g=m}g(Ql,Q0),Ql.prototype.ra=function(){mn(this.g,"a")},Ql.prototype.qa=function(m){mn(this.g,new X0(m))},Ql.prototype.pa=function(m){mn(this.g,new Y0)},Ql.prototype.oa=function(){mn(this.g,"b")},Ap.prototype.createWebChannel=Ap.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,GD=function(){return new Ap},WD=function(){return Vl()},HD=Si,lb={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$l.NO_ERROR=0,$l.TIMEOUT=8,$l.HTTP_ERROR=6,yA=$l,zl.COMPLETE="complete",zD=zl,R0.EventType=Bl,Bl.OPEN="a",Bl.CLOSE="b",Bl.ERROR="c",Bl.MESSAGE="d",xn.prototype.listen=xn.prototype.J,dg=R0,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,$D=Pt}).apply(typeof Kv<"u"?Kv:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zm="12.9.0";function Z5(s){Zm=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new hS("@firebase/firestore");function zp(){return Vh.logLevel}function Ce(s,...e){if(Vh.logLevel<=nt.DEBUG){const t=e.map(ES);Vh.debug(`Firestore (${Zm}): ${s}`,...t)}}function kl(s,...e){if(Vh.logLevel<=nt.ERROR){const t=e.map(ES);Vh.error(`Firestore (${Zm}): ${s}`,...t)}}function Uh(s,...e){if(Vh.logLevel<=nt.WARN){const t=e.map(ES);Vh.warn(`Firestore (${Zm}): ${s}`,...t)}}function ES(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(s,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,qD(s,n,t)}function qD(s,e,t){let n=`FIRESTORE (${Zm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw kl(n),new Error(n)}function vt(s,e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,s||qD(e,r,n)}function $e(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends uo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ej{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(kr.UNAUTHENTICATED)))}shutdown(){}}class tj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class nj{constructor(e){this.t=e,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vt(this.o===void 0,42304);let n=this.i;const r=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let i=new eo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new eo,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},u=d=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new eo)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(vt(typeof n.accessToken=="string",31837,{l:n}),new KD(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new kr(e)}}class rj{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=kr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class sj{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new rj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(kr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class VI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ij{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vt(this.o===void 0,3512);const n=i=>{i.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const r=i=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new VI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(vt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new VI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<s;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=aj(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function rt(s,e){return s<e?-1:s>e?1:0}function cb(s,e){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++){const r=s.charAt(n),i=e.charAt(n);if(r!==i)return PE(r)===PE(i)?rt(r,i):PE(r)?1:-1}return rt(s.length,e.length)}const oj=55296,lj=57343;function PE(s){const e=s.charCodeAt(0);return e>=oj&&e<=lj}function $m(s,e,t){return s.length===e.length&&s.every(((n,r)=>t(n,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="__name__";class Sa{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ue(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Ue(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Sa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sa?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const i=Sa.compareSegments(e.get(r),t.get(r));if(i!==0)return i}return rt(e.length,t.length)}static compareSegments(e,t){const n=Sa.isNumericId(e),r=Sa.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Sa.extractNumericId(e).compare(Sa.extractNumericId(t)):cb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yu.fromString(e.substring(4,e.length-2))}}class Ot extends Sa{construct(e,t,n){return new Ot(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ae(ie.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((r=>r.length>0)))}return new Ot(t)}static emptyPath(){return new Ot([])}}const cj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pr extends Sa{construct(e,t,n){return new pr(e,t,n)}static isValidIdentifier(e){return cj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UI}static keyField(){return new pr([UI])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(n.length===0)throw new Ae(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new Ae(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ae(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,r+=2}else u==="`"?(o=!o,r++):u!=="."||o?(n+=u,r++):(i(),r++)}if(i(),o)throw new Ae(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pr(t)}static emptyPath(){return new pr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Ot.fromString(e))}static fromName(e){return new Ne(Ot.fromString(e).popFirst(5))}static empty(){return new Ne(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(s,e,t){if(!t)throw new Ae(ie.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function uj(s,e,t,n){if(e===!0&&n===!0)throw new Ae(ie.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function jI(s){if(!Ne.isDocumentKey(s))throw new Ae(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function $I(s){if(Ne.isDocumentKey(s))throw new Ae(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function XD(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function f1(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ue(12329,{type:typeof s})}function so(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ae(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=f1(s);throw new Ae(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function dj(s,e){if(e<=0)throw new Ae(ie.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(s,e){const t={typeString:s};return e&&(t.value=e),t}function p0(s,e){if(!XD(s))throw new Ae(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const r=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in s)){t=`JSON missing required field: '${n}'`;break}const o=s[n];if(r&&typeof o!==r){t=`JSON field '${n}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${n}' field to equal '${i.value}'`;break}}if(t)throw new Ae(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=-62135596800,HI=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*HI);return new zt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zI)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HI}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(p0(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:In("string",zt._jsonSchemaVersion),seconds:In("number"),nanoseconds:In("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new zt(0,0))}static max(){return new ze(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=-1;function hj(s,e){const t=s.toTimestamp().seconds,n=s.toTimestamp().nanoseconds+1,r=ze.fromTimestamp(n===1e9?new zt(t+1,0):new zt(t,n));return new _u(r,Ne.empty(),e)}function pj(s){return new _u(s.readTime,s.key,Kg)}class _u{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new _u(ze.min(),Ne.empty(),Kg)}static max(){return new _u(ze.max(),Ne.empty(),Kg)}}function fj(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(s.documentKey,e.documentKey),t!==0?t:rt(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(s){if(s.code!==ie.FAILED_PRECONDITION||s.message!==mj)throw s;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((n,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,n)=>{t(e)}))}static reject(e){return new oe(((t,n)=>{n(e)}))}static waitFor(e){return new oe(((t,n)=>{let r=0,i=0,o=!1;e.forEach((u=>{++r,u.next((()=>{++i,o&&i===r&&t()}),(d=>n(d)))})),o=!0,i===r&&t()}))}static or(e){let t=oe.resolve(!1);for(const n of e)t=t.next((r=>r?oe.resolve(r):n()));return t}static forEach(e,t){const n=[];return e.forEach(((r,i)=>{n.push(t.call(this,r,i))})),this.waitFor(n)}static mapArray(e,t){return new oe(((n,r)=>{const i=e.length,o=new Array(i);let u=0;for(let d=0;d<i;d++){const h=d;t(e[h]).next((f=>{o[h]=f,++u,u===i&&n(o)}),(f=>r(f)))}}))}static doWhile(e,t){return new oe(((n,r)=>{const i=()=>{e()===!0?t().next((()=>{i()}),r):n()};i()}))}}function yj(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function t2(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}m1.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=-1;function g1(s){return s==null}function m_(s){return s===0&&1/s==-1/0}function wj(s){return typeof s=="number"&&Number.isInteger(s)&&!m_(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="";function vj(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=WI(e)),e=Aj(s.get(t),e);return WI(e)}function Aj(s,e){let t=e;const n=s.length;for(let r=0;r<n;r++){const i=s.charAt(r);switch(i){case"\0":t+="";break;case YD:t+="";break;default:t+=i}}return t}function WI(s){return s+YD+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Ou(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function _j(s,e){const t=[];for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.push(e(s[n],n,s));return t}function JD(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qv(this.root,e,this.comparator,!0)}}class Qv{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=n??ur.RED,this.left=r??ur.EMPTY,this.right=i??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ur(e??this.key,t??this.value,n??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return ur.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ur(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qI(this.data.getIterator())}getIteratorFrom(e){return new qI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=n.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Un(this.comparator);return t.data=e,t}}class qI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.fields=e,e.sort(pr.comparator)}static empty(){return new zs([])}unionWith(e){let t=new Un(pr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new zs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $m(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ZD("Invalid base64 string: "+i):i}})(e);return new mr(t)}static fromUint8Array(e){const t=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const xj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xu(s){if(vt(!!s,39018),typeof s=="string"){let e=0;const t=xj.exec(s);if(vt(!!t,46558,{timestamp:s}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(s);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:_n(s.seconds),nanos:_n(s.nanos)}}function _n(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Eu(s){return typeof s=="string"?mr.fromBase64String(s):mr.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="server_timestamp",t3="__type__",n3="__previous_value__",r3="__local_write_time__";function SS(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[t3])==null?void 0:n.stringValue)===e3}function y1(s){const e=s.mapValue.fields[n3];return SS(e)?y1(e):e}function Qg(s){const e=xu(s.mapValue.fields[r3].timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,t,n,r,i,o,u,d,h,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=f,this.apiKey=g}}const g_="(default)";class Xg{constructor(e,t){this.projectId=e,this.database=t||g_}static empty(){return new Xg("","")}get isDefaultDatabase(){return this.database===g_}isEqual(e){return e instanceof Xg&&e.projectId===this.projectId&&e.database===this.database}}function bj(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ae(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xg(s.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="__type__",Cj="__max__",Xv={mapValue:{}},i3="__vector__",y_="value";function bu(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?SS(s)?4:Fj(s)?9007199254740991:Sj(s)?10:11:Ue(28295,{value:s})}function io(s,e){if(s===e)return!0;const t=bu(s);if(t!==bu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Qg(s).isEqual(Qg(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=xu(r.timestampValue),u=xu(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(r,i){return Eu(r.bytesValue).isEqual(Eu(i.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(r,i){return _n(r.geoPointValue.latitude)===_n(i.geoPointValue.latitude)&&_n(r.geoPointValue.longitude)===_n(i.geoPointValue.longitude)})(s,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return _n(r.integerValue)===_n(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=_n(r.doubleValue),u=_n(i.doubleValue);return o===u?m_(o)===m_(u):isNaN(o)&&isNaN(u)}return!1})(s,e);case 9:return $m(s.arrayValue.values||[],e.arrayValue.values||[],io);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(GI(o)!==GI(u))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(u[d]===void 0||!io(o[d],u[d])))return!1;return!0})(s,e);default:return Ue(52216,{left:s})}}function Yg(s,e){return(s.values||[]).find((t=>io(t,e)))!==void 0}function zm(s,e){if(s===e)return 0;const t=bu(s),n=bu(e);if(t!==n)return rt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(s.booleanValue,e.booleanValue);case 2:return(function(i,o){const u=_n(i.integerValue||i.doubleValue),d=_n(o.integerValue||o.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(s,e);case 3:return KI(s.timestampValue,e.timestampValue);case 4:return KI(Qg(s),Qg(e));case 5:return cb(s.stringValue,e.stringValue);case 6:return(function(i,o){const u=Eu(i),d=Eu(o);return u.compareTo(d)})(s.bytesValue,e.bytesValue);case 7:return(function(i,o){const u=i.split("/"),d=o.split("/");for(let h=0;h<u.length&&h<d.length;h++){const f=rt(u[h],d[h]);if(f!==0)return f}return rt(u.length,d.length)})(s.referenceValue,e.referenceValue);case 8:return(function(i,o){const u=rt(_n(i.latitude),_n(o.latitude));return u!==0?u:rt(_n(i.longitude),_n(o.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return QI(s.arrayValue,e.arrayValue);case 10:return(function(i,o){var w,A,S,C;const u=i.fields||{},d=o.fields||{},h=(w=u[y_])==null?void 0:w.arrayValue,f=(A=d[y_])==null?void 0:A.arrayValue,g=rt(((S=h==null?void 0:h.values)==null?void 0:S.length)||0,((C=f==null?void 0:f.values)==null?void 0:C.length)||0);return g!==0?g:QI(h,f)})(s.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Xv.mapValue&&o===Xv.mapValue)return 0;if(i===Xv.mapValue)return 1;if(o===Xv.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),h=o.fields||{},f=Object.keys(h);d.sort(),f.sort();for(let g=0;g<d.length&&g<f.length;++g){const w=cb(d[g],f[g]);if(w!==0)return w;const A=zm(u[d[g]],h[f[g]]);if(A!==0)return A}return rt(d.length,f.length)})(s.mapValue,e.mapValue);default:throw Ue(23264,{he:t})}}function KI(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return rt(s,e);const t=xu(s),n=xu(e),r=rt(t.seconds,n.seconds);return r!==0?r:rt(t.nanos,n.nanos)}function QI(s,e){const t=s.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const i=zm(t[r],n[r]);if(i)return i}return rt(t.length,n.length)}function Hm(s){return ub(s)}function ub(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const n=xu(t);return`time(${n.seconds},${n.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Eu(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ne.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let n="[",r=!0;for(const i of t.values||[])r?r=!1:n+=",",n+=ub(i);return n+"]"})(s.arrayValue):"mapValue"in s?(function(t){const n=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const o of n)i?i=!1:r+=",",r+=`${o}:${ub(t.fields[o])}`;return r+"}"})(s.mapValue):Ue(61005,{value:s})}function wA(s){switch(bu(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=y1(s);return e?16+wA(e):16;case 5:return 2*s.stringValue.length;case 6:return Eu(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((r,i)=>r+wA(i)),0)})(s.arrayValue);case 10:case 11:return(function(n){let r=0;return Ou(n.fields,((i,o)=>{r+=i.length+wA(o)})),r})(s.mapValue);default:throw Ue(13486,{value:s})}}function XI(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function db(s){return!!s&&"integerValue"in s}function FS(s){return!!s&&"arrayValue"in s}function YI(s){return!!s&&"nullValue"in s}function JI(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vA(s){return!!s&&"mapValue"in s}function Sj(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[s3])==null?void 0:n.stringValue)===i3}function Bg(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ou(s.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Bg(n))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bg(s.arrayValue.values[t]);return e}return{...s}}function Fj(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Cj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.value=e}static empty(){return new jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!vA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bg(t)}setAll(e){let t=pr.emptyPath(),n={},r=[];e.forEach(((o,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,r),n={},r=[],t=u.popLast()}o?n[u.lastSegment()]=Bg(o):r.push(u.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());vA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return io(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];vA(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ou(t,((r,i)=>e[r]=i));for(const r of n)delete e[r]}clone(){return new jr(Bg(this.value))}}function a3(s){const e=[];return Ou(s.fields,((t,n)=>{const r=new pr([t]);if(vA(n)){const i=a3(n.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new zs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,t,n,r,i,o,u){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Ir(e,0,ze.min(),ze.min(),ze.min(),jr.empty(),0)}static newFoundDocument(e,t,n,r){return new Ir(e,1,t,ze.min(),n,r,0)}static newNoDocument(e,t){return new Ir(e,2,t,ze.min(),ze.min(),jr.empty(),0)}static newUnknownDocument(e,t){return new Ir(e,3,t,ze.min(),ze.min(),jr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t){this.position=e,this.inclusive=t}}function ZI(s,e,t){let n=0;for(let r=0;r<s.position.length;r++){const i=e[r],o=s.position[r];if(i.field.isKeyField()?n=Ne.comparator(Ne.fromName(o.referenceValue),t.key):n=zm(o,t.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function eP(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!io(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t="asc"){this.field=e,this.dir=t}}function Tj(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{}class kn extends o3{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Ij(e,t,n):t==="array-contains"?new Dj(e,n):t==="in"?new Nj(e,n):t==="not-in"?new Mj(e,n):t==="array-contains-any"?new Lj(e,n):new kn(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Pj(e,n):new Rj(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zm(t,this.value)):t!==null&&bu(this.value)===bu(t)&&this.matchesComparison(zm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ta extends o3{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ta(e,t)}matches(e){return l3(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function l3(s){return s.op==="and"}function c3(s){return kj(s)&&l3(s)}function kj(s){for(const e of s.filters)if(e instanceof ta)return!1;return!0}function hb(s){if(s instanceof kn)return s.field.canonicalString()+s.op.toString()+Hm(s.value);if(c3(s))return s.filters.map((e=>hb(e))).join(",");{const e=s.filters.map((t=>hb(t))).join(",");return`${s.op}(${e})`}}function u3(s,e){return s instanceof kn?(function(n,r){return r instanceof kn&&n.op===r.op&&n.field.isEqual(r.field)&&io(n.value,r.value)})(s,e):s instanceof ta?(function(n,r){return r instanceof ta&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce(((i,o,u)=>i&&u3(o,r.filters[u])),!0):!1})(s,e):void Ue(19439)}function d3(s){return s instanceof kn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Hm(t.value)}`})(s):s instanceof ta?(function(t){return t.op.toString()+" {"+t.getFilters().map(d3).join(" ,")+"}"})(s):"Filter"}class Ij extends kn{constructor(e,t,n){super(e,t,n),this.key=Ne.fromName(n.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pj extends kn{constructor(e,t){super(e,"in",t),this.keys=h3("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Rj extends kn{constructor(e,t){super(e,"not-in",t),this.keys=h3("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function h3(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>Ne.fromName(n.referenceValue)))}class Dj extends kn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return FS(t)&&Yg(t.arrayValue,this.value)}}class Nj extends kn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yg(this.value.arrayValue,t)}}class Mj extends kn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yg(this.value.arrayValue,t)}}class Lj extends kn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!FS(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>Yg(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,t=null,n=[],r=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function tP(s,e=null,t=[],n=[],r=null,i=null,o=null){return new Oj(s,e,t,n,r,i,o)}function TS(s){const e=$e(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>hb(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),g1(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Hm(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Hm(n))).join(",")),e.Te=t}return e.Te}function kS(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Tj(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!u3(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!eP(s.startAt,e.startAt)&&eP(s.endAt,e.endAt)}function pb(s){return Ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t=null,n=[],r=[],i=null,o="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Bj(s,e,t,n,r,i,o,u){return new n2(s,e,t,n,r,i,o,u)}function IS(s){return new n2(s)}function nP(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Vj(s){return Ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function p3(s){return s.collectionGroup!==null}function Vg(s){const e=$e(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Un(pr.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Jg(i,n))})),t.has(pr.keyField().canonicalString())||e.Ie.push(new Jg(pr.keyField(),n))}return e.Ie}function to(s){const e=$e(s);return e.Ee||(e.Ee=f3(e,Vg(s))),e.Ee}function Uj(s){const e=$e(s);return e.Re||(e.Re=f3(e,s.explicitOrderBy)),e.Re}function f3(s,e){if(s.limitType==="F")return tP(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Jg(r.field,i)}));const t=s.endAt?new w_(s.endAt.position,s.endAt.inclusive):null,n=s.startAt?new w_(s.startAt.position,s.startAt.inclusive):null;return tP(s.path,s.collectionGroup,e,s.filters,s.limit,t,n)}}function fb(s,e){const t=s.filters.concat([e]);return new n2(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function jj(s,e){const t=s.explicitOrderBy.concat([e]);return new n2(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function v_(s,e,t){return new n2(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function w1(s,e){return kS(to(s),to(e))&&s.limitType===e.limitType}function m3(s){return`${TS(to(s))}|lt:${s.limitType}`}function Hp(s){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((r=>d3(r))).join(", ")}]`),g1(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Hm(r))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Hm(r))).join(",")),`Target(${n})`})(to(s))}; limitType=${s.limitType})`}function v1(s,e){return e.isFoundDocument()&&(function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ne.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(s,e)&&(function(n,r){for(const i of Vg(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(s,e)&&(function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0})(s,e)&&(function(n,r){return!(n.startAt&&!(function(o,u,d){const h=ZI(o,u,d);return o.inclusive?h<=0:h<0})(n.startAt,Vg(n),r)||n.endAt&&!(function(o,u,d){const h=ZI(o,u,d);return o.inclusive?h>=0:h>0})(n.endAt,Vg(n),r))})(s,e)}function $j(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function g3(s){return(e,t)=>{let n=!1;for(const r of Vg(s)){const i=zj(r,e,t);if(i!==0)return i;n=n||r.field.isKeyField()}return 0}}function zj(s,e,t){const n=s.field.isKeyField()?Ne.comparator(e.key,t.key):(function(i,o,u){const d=o.data.field(i),h=u.data.field(i);return d!==null&&h!==null?zm(d,h):Ue(42886)})(s.field,e,t);switch(s.dir){case"asc":return n;case"desc":return-1*n;default:return Ue(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,i]of n)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ou(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return JD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=new tn(Ne.comparator);function Il(){return Hj}const y3=new tn(Ne.comparator);function hg(...s){let e=y3;for(const t of s)e=e.insert(t.key,t);return e}function w3(s){let e=y3;return s.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function _d(){return Ug()}function v3(){return Ug()}function Ug(){return new Xh((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Wj=new tn(Ne.comparator),Gj=new Un(Ne.comparator);function st(...s){let e=Gj;for(const t of s)e=e.add(t);return e}const qj=new Un(rt);function Kj(){return qj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:m_(e)?"-0":e}}function A3(s){return{integerValue:""+s}}function Qj(s,e){return wj(e)?A3(e):PS(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this._=void 0}}function Xj(s,e,t){return s instanceof Zg?(function(r,i){const o={fields:{[t3]:{stringValue:e3},[r3]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&SS(i)&&(i=y1(i)),i&&(o.fields[n3]=i),{mapValue:o}})(t,e):s instanceof ey?x3(s,e):s instanceof ty?E3(s,e):(function(r,i){const o=_3(r,i),u=rP(o)+rP(r.Ae);return db(o)&&db(r.Ae)?A3(u):PS(r.serializer,u)})(s,e)}function Yj(s,e,t){return s instanceof ey?x3(s,e):s instanceof ty?E3(s,e):t}function _3(s,e){return s instanceof A_?(function(n){return db(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class Zg extends A1{}class ey extends A1{constructor(e){super(),this.elements=e}}function x3(s,e){const t=b3(e);for(const n of s.elements)t.some((r=>io(r,n)))||t.push(n);return{arrayValue:{values:t}}}class ty extends A1{constructor(e){super(),this.elements=e}}function E3(s,e){let t=b3(e);for(const n of s.elements)t=t.filter((r=>!io(r,n)));return{arrayValue:{values:t}}}class A_ extends A1{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rP(s){return _n(s.integerValue||s.doubleValue)}function b3(s){return FS(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,t){this.field=e,this.transform=t}}function Zj(s,e){return s.field.isEqual(e.field)&&(function(n,r){return n instanceof ey&&r instanceof ey||n instanceof ty&&r instanceof ty?$m(n.elements,r.elements,io):n instanceof A_&&r instanceof A_?io(n.Ae,r.Ae):n instanceof Zg&&r instanceof Zg})(s.transform,e.transform)}class e9{constructor(e,t){this.version=e,this.transformResults=t}}class Yi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yi}static exists(e){return new Yi(void 0,e)}static updateTime(e){return new Yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function AA(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class _1{}function C3(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new RS(s.key,Yi.none()):new f0(s.key,s.data,Yi.none());{const t=s.data,n=jr.empty();let r=new Un(pr.comparator);for(let i of e.fields)if(!r.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?n.delete(i):n.set(i,o),r=r.add(i)}return new Bu(s.key,n,new zs(r.toArray()),Yi.none())}}function t9(s,e,t){s instanceof f0?(function(r,i,o){const u=r.value.clone(),d=iP(r.fieldTransforms,i,o.transformResults);u.setAll(d),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(s,e,t):s instanceof Bu?(function(r,i,o){if(!AA(r.precondition,i))return void i.convertToUnknownDocument(o.version);const u=iP(r.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(S3(r)),d.setAll(u),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(s,e,t):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function jg(s,e,t,n){return s instanceof f0?(function(i,o,u,d){if(!AA(i.precondition,o))return u;const h=i.value.clone(),f=aP(i.fieldTransforms,d,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(s,e,t,n):s instanceof Bu?(function(i,o,u,d){if(!AA(i.precondition,o))return u;const h=aP(i.fieldTransforms,d,o),f=o.data;return f.setAll(S3(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((g=>g.field)))})(s,e,t,n):(function(i,o,u){return AA(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u})(s,e,t)}function n9(s,e){let t=null;for(const n of s.fieldTransforms){const r=e.data.field(n.field),i=_3(n.transform,r||null);i!=null&&(t===null&&(t=jr.empty()),t.set(n.field,i))}return t||null}function sP(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&$m(n,r,((i,o)=>Zj(i,o)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class f0 extends _1{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Bu extends _1{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function S3(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=s.data.field(t);e.set(t,n)}})),e}function iP(s,e,t){const n=new Map;vt(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let r=0;r<t.length;r++){const i=s[r],o=i.transform,u=e.data.field(i.field);n.set(i.field,Yj(o,u,t[r]))}return n}function aP(s,e,t){const n=new Map;for(const r of s){const i=r.transform,o=t.data.field(r.field);n.set(r.field,Xj(i,o,e))}return n}class RS extends _1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r9 extends _1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&t9(i,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=v3();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=t.has(r.key)?null:u;const d=C3(o,u);d!==null&&n.set(r.key,d),o.isValidDocument()||o.convertToNoDocument(ze.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),st())}isEqual(e){return this.batchId===e.batchId&&$m(this.mutations,e.mutations,((t,n)=>sP(t,n)))&&$m(this.baseMutations,e.baseMutations,((t,n)=>sP(t,n)))}}class DS{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){vt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=(function(){return Wj})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new DS(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn,ot;function l9(s){switch(s){case ie.OK:return Ue(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ue(15467,{code:s})}}function F3(s){if(s===void 0)return kl("GRPC error has no .code"),ie.UNKNOWN;switch(s){case Fn.OK:return ie.OK;case Fn.CANCELLED:return ie.CANCELLED;case Fn.UNKNOWN:return ie.UNKNOWN;case Fn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Fn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Fn.INTERNAL:return ie.INTERNAL;case Fn.UNAVAILABLE:return ie.UNAVAILABLE;case Fn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Fn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Fn.NOT_FOUND:return ie.NOT_FOUND;case Fn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Fn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Fn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Fn.ABORTED:return ie.ABORTED;case Fn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Fn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Fn.DATA_LOSS:return ie.DATA_LOSS;default:return Ue(39323,{code:s})}}(ot=Fn||(Fn={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=new yu([4294967295,4294967295],0);function oP(s){const e=c9().encode(s),t=new jD;return t.update(e),new Uint8Array(t.digest())}function lP(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new yu([t,n],0),new yu([r,i],0)]}class NS{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new pg(`Invalid padding: ${t}`);if(n<0)throw new pg(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new pg(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new pg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=yu.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(yu.fromNumber(n)));return r.compare(u9)===1&&(r=new yu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=oP(e),[n,r]=lP(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(n,r,i);if(!this.we(o))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new NS(i,r,t);return n.forEach((u=>o.insert(u))),o}insert(e){if(this.ge===0)return;const t=oP(e),[n,r]=lP(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(n,r,i);this.be(o)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class pg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,m0.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new x1(ze.min(),r,new tn(rt),Il(),st())}}class m0{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new m0(n,t,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}}class T3{constructor(e,t){this.targetId=e,this.Ce=t}}class k3{constructor(e,t,n=mr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class cP{constructor(){this.ve=0,this.Fe=uP(),this.Me=mr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=st(),t=st(),n=st();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ue(38017,{changeType:i})}})),new m0(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=uP()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class d9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Il(),this.He=Yv(),this.Je=Yv(),this.Ze=new tn(rt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(pb(i))if(n===0){const o=new Ne(i.path);this.et(t,o,Ir.newNoDocument(o,ze.min()))}else vt(n===1,20013,{expectedCount:n});else{const o=this._t(t);if(o!==n){const u=this.ut(e),d=u?this.ct(u,e,o):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,u;try{o=Eu(n).toUint8Array()}catch(d){if(d instanceof ZD)return Uh("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new NS(o,r,i)}catch(d){return Uh(d instanceof pg?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach((i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(t,i,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((i,o)=>{const u=this.ot(o);if(u){if(i.current&&pb(u.target)){const d=new Ne(u.target.path);this.It(d).has(o)||this.Et(o,d)||this.et(o,d,Ir.newNoDocument(d,e))}i.Be&&(t.set(o,i.ke()),i.Ke())}}));let n=st();this.Je.forEach(((i,o)=>{let u=!0;o.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new x1(e,t,this.Ze,this.je,n);return this.je=Il(),this.He=Yv(),this.Je=Yv(),this.Ze=new tn(rt),r}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new cP,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Un(rt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Un(rt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cP),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Yv(){return new tn(Ne.comparator)}function uP(){return new tn(Ne.comparator)}const h9={asc:"ASCENDING",desc:"DESCENDING"},p9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f9={and:"AND",or:"OR"};class m9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mb(s,e){return s.useProto3Json||g1(e)?e:{value:e}}function __(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I3(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function g9(s,e){return __(s,e.toTimestamp())}function no(s){return vt(!!s,49232),ze.fromTimestamp((function(t){const n=xu(t);return new zt(n.seconds,n.nanos)})(s))}function MS(s,e){return gb(s,e).canonicalString()}function gb(s,e){const t=(function(r){return new Ot(["projects",r.projectId,"databases",r.database])})(s).child("documents");return e===void 0?t:t.child(e)}function P3(s){const e=Ot.fromString(s);return vt(O3(e),10190,{key:e.toString()}),e}function yb(s,e){return MS(s.databaseId,e.path)}function RE(s,e){const t=P3(e);if(t.get(1)!==s.databaseId.projectId)throw new Ae(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ae(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ne(D3(t))}function R3(s,e){return MS(s.databaseId,e)}function y9(s){const e=P3(s);return e.length===4?Ot.emptyPath():D3(e)}function wb(s){return new Ot(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function D3(s){return vt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function dP(s,e,t){return{name:yb(s,e),fields:t.value.mapValue.fields}}function w9(s,e){let t;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ue(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(vt(f===void 0||typeof f=="string",58123),mr.fromBase64String(f||"")):(vt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),mr.fromUint8Array(f||new Uint8Array))})(s,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&(function(h){const f=h.code===void 0?ie.UNKNOWN:F3(h.code);return new Ae(f,h.message||"")})(o);t=new k3(n,r,i,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=RE(s,n.document.name),i=no(n.document.updateTime),o=n.document.createTime?no(n.document.createTime):ze.min(),u=new jr({mapValue:{fields:n.document.fields}}),d=Ir.newFoundDocument(r,i,o,u),h=n.targetIds||[],f=n.removedTargetIds||[];t=new _A(h,f,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=RE(s,n.document),i=n.readTime?no(n.readTime):ze.min(),o=Ir.newNoDocument(r,i),u=n.removedTargetIds||[];t=new _A([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=RE(s,n.document),i=n.removedTargetIds||[];t=new _A([],i,r,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:i}=n,o=new o9(r,i),u=n.targetId;t=new T3(u,o)}}return t}function v9(s,e){let t;if(e instanceof f0)t={update:dP(s,e.key,e.value)};else if(e instanceof RS)t={delete:yb(s,e.key)};else if(e instanceof Bu)t={update:dP(s,e.key,e.data),updateMask:T9(e.fieldMask)};else{if(!(e instanceof r9))return Ue(16599,{dt:e.type});t={verify:yb(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(i,o){const u=o.transform;if(u instanceof Zg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ey)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ty)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof A_)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw Ue(20930,{transform:o.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:g9(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ue(27497)})(s,e.precondition)),t}function A9(s,e){return s&&s.length>0?(vt(e!==void 0,14353),s.map((t=>(function(r,i){let o=r.updateTime?no(r.updateTime):no(i);return o.isEqual(ze.min())&&(o=no(i)),new e9(o,r.transformResults||[])})(t,e)))):[]}function _9(s,e){return{documents:[R3(s,e.path)]}}function N3(s,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=R3(s,r);const i=(function(h){if(h.length!==0)return L3(ta.create(h,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((f=>(function(w){return{field:gc(w.field),direction:C9(w.dir)}})(f)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=mb(s,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function x9(s,e,t,n){const{ft:r,parent:i}=N3(s,e),o={},u=[];let d=0;return t.forEach((h=>{const f="aggregate_"+d++;o[f]=h.alias,h.aggregateType==="count"?u.push({alias:f,count:{}}):h.aggregateType==="avg"?u.push({alias:f,avg:{field:gc(h.fieldPath)}}):h.aggregateType==="sum"&&u.push({alias:f,sum:{field:gc(h.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:r.structuredQuery},parent:r.parent},gt:o,parent:i}}function E9(s){let e=y9(s.parent);const t=s.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){vt(n===1,65062);const f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=(function(g){const w=M3(g);return w instanceof ta&&c3(w)?w.getFilters():[w]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map((w=>(function(S){return new Jg(Wp(S.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(w)))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let w;return w=typeof g=="object"?g.value:g,g1(w)?null:w})(t.limit));let d=null;t.startAt&&(d=(function(g){const w=!!g.before,A=g.values||[];return new w_(A,w)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const w=!g.before,A=g.values||[];return new w_(A,w)})(t.endAt)),Bj(e,r,o,i,u,"F",d,h)}function b9(s,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function M3(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Wp(t.unaryFilter.field);return kn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Wp(t.unaryFilter.field);return kn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wp(t.unaryFilter.field);return kn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wp(t.unaryFilter.field);return kn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}})(s):s.fieldFilter!==void 0?(function(t){return kn.create(Wp(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ta.create(t.compositeFilter.filters.map((n=>M3(n))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}})(t.compositeFilter.op))})(s):Ue(30097,{filter:s})}function C9(s){return h9[s]}function S9(s){return p9[s]}function F9(s){return f9[s]}function gc(s){return{fieldPath:s.canonicalString()}}function Wp(s){return pr.fromServerFormat(s.fieldPath)}function L3(s){return s instanceof kn?(function(t){if(t.op==="=="){if(JI(t.value))return{unaryFilter:{field:gc(t.field),op:"IS_NAN"}};if(YI(t.value))return{unaryFilter:{field:gc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(JI(t.value))return{unaryFilter:{field:gc(t.field),op:"IS_NOT_NAN"}};if(YI(t.value))return{unaryFilter:{field:gc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gc(t.field),op:S9(t.op),value:t.value}}})(s):s instanceof ta?(function(t){const n=t.getFilters().map((r=>L3(r)));return n.length===1?n[0]:{compositeFilter:{op:F9(t.op),filters:n}}})(s):Ue(54877,{filter:s})}function T9(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function O3(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function B3(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t,n,r,i=ze.min(),o=ze.min(),u=mr.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new pu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e){this.yt=e}}function I9(s){const e=E9({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?v_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(){this.Sn=new R9}addToCollectionParentIndex(e,t){return this.Sn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(_u.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(_u.min())}updateCollectionGroup(e,t,n){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class R9{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Un(Ot.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Un(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},V3=41943040;class ls{static withCacheSize(e){return new ls(e,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls.DEFAULT_COLLECTION_PERCENTILE=10,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ls.DEFAULT=new ls(V3,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ls.DISABLED=new ls(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Wm(0)}static ar(){return new Wm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="LruGarbageCollector",D9=1048576;function fP([s,e],[t,n]){const r=rt(s,t);return r===0?rt(e,n):r}class N9{constructor(e){this.Pr=e,this.buffer=new Un(fP),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();fP(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class M9{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ce(pP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){t2(t)?Ce(pP,"Ignoring IndexedDB error during garbage collection: ",t):await e2(t)}await this.Ar(3e5)}))}}class L9{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(m1.ce);const n=new N9(t);return this.Vr.forEachTarget(e,(r=>n.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>n.Er(r))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(hP)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hP):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,o,u,d,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,o=Date.now(),this.nthSequenceNumber(e,r)))).next((g=>(n=g,u=Date.now(),this.removeTargets(e,n,t)))).next((g=>(i=g,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((g=>(h=Date.now(),zp()<=nt.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(u-o)+`ms
	Removed ${i} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-f}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:g}))))}}function O9(s,e){return new L9(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(){this.changes=new Xh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?oe.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(n!==null&&jg(n.mutation,r,zs.empty(),zt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,st()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=st()){const r=_d();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((i=>{let o=hg();return i.forEach(((u,d)=>{o=o.insert(u,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const n=_d();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,st())))}populateOverlays(e,t,n){const r=[];return n.forEach((i=>{t.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,u)=>{t.set(o,u)}))}))}computeViews(e,t,n,r){let i=Il();const o=Ug(),u=(function(){return Ug()})();return t.forEach(((d,h)=>{const f=n.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof Bu)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),jg(f.mutation,h,f.mutation.getFieldMask(),zt.now())):o.set(h.key,zs.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,f)=>o.set(h,f))),t.forEach(((h,f)=>u.set(h,new V9(f,o.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Ug();let r=new tn(((o,u)=>o-u)),i=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const u of o)u.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let f=n.get(d)||zs.empty();f=u.applyToLocalView(h,f),n.set(d,f);const g=(r.get(u.batchId)||st()).add(d);r=r.insert(u.batchId,g)}))})).next((()=>{const o=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,f=d.value,g=v3();f.forEach((w=>{if(!i.has(w)){const A=C3(t.get(w),n.get(w));A!==null&&g.set(w,A),i=i.add(w)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return oe.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,r){return Vj(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):p3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):oe.resolve(_d());let u=Kg,d=i;return o.next((h=>oe.forEach(h,((f,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),i.get(f)?oe.resolve():this.remoteDocumentCache.getEntry(e,f).next((w=>{d=d.insert(f,w)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,st()))).next((f=>({batchId:u,changes:w3(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((n=>{let r=hg();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=hg();return this.indexManager.getCollectionParents(e,i).next((u=>oe.forEach(u,(d=>{const h=(function(g,w){return new n2(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,r).next((f=>{f.forEach(((g,w)=>{o=o.insert(g,w)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((o=>{i.forEach(((d,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Ir.newInvalidDocument(f)))}));let u=hg();return o.forEach(((d,h)=>{const f=i.get(d);f!==void 0&&jg(f.mutation,h,zs.empty(),zt.now()),v1(t,h)&&(u=u.insert(d,h))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return oe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:no(r.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:I9(r.bundledQuery),readTime:no(r.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(){this.overlays=new tn(Ne.comparator),this.Lr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_d();return oe.forEach(t,(r=>this.getOverlay(e,r).next((i=>{i!==null&&n.set(r,i)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((r,i)=>{this.bt(e,t,i)})),oe.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Lr.get(n);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(n)),oe.resolve()}getOverlaysForCollection(e,t,n){const r=_d(),i=t.length+1,o=new Ne(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&r.set(d.getKey(),d)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new tn(((h,f)=>h-f));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let f=i.get(h.largestBatchId);f===null&&(f=_d(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const u=_d(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,f)=>u.set(h,f))),!(u.size()>=r)););return oe.resolve(u)}bt(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new i9(t,n));let i=this.Lr.get(t);i===void 0&&(i=st(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(){this.sessionToken=mr.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.kr=new Un(Jn.Kr),this.qr=new Un(Jn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new Jn(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Wr(new Jn(e,t))}Qr(e,t){e.forEach((n=>this.removeReference(n,t)))}Gr(e){const t=new Ne(new Ot([])),n=new Jn(t,e),r=new Jn(t,e+1),i=[];return this.qr.forEachInRange([n,r],(o=>{this.Wr(o),i.push(o.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ne(new Ot([])),n=new Jn(t,e),r=new Jn(t,e+1);let i=st();return this.qr.forEachInRange([n,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const t=new Jn(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Jn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ne.comparator(e.key,t.key)||rt(e.Hr,t.Hr)}static Ur(e,t){return rt(e.Hr,t.Hr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Un(Jn.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new s9(i,t,n,r);this.mutationQueue.push(o);for(const u of r)this.Jr=this.Jr.add(new Jn(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,t){return oe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return oe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?CS:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Jn(t,0),r=new Jn(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([n,r],(o=>{const u=this.Zr(o.Hr);i.push(u)})),oe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Un(rt);return t.forEach((r=>{const i=new Jn(r,0),o=new Jn(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],(u=>{n=n.add(u.Hr)}))})),oe.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ne.isDocumentKey(i)||(i=i.child(""));const o=new Jn(new Ne(i),0);let u=new Un(rt);return this.Jr.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===r&&(u=u.add(d.Hr)),!0)}),o),oe.resolve(this.Yr(u))}Yr(e){const t=[];return e.forEach((n=>{const r=this.Zr(n);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){vt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return oe.forEach(t.mutations,(r=>{const i=new Jn(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){const n=new Jn(t,0),r=this.Jr.firstAfterOrEqual(n);return oe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e){this.ti=e,this.docs=(function(){return new tn(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return oe.resolve(n?n.document.mutableCopy():Ir.newInvalidDocument(t))}getEntries(e,t){let n=Il();return t.forEach((r=>{const i=this.docs.get(r);n=n.insert(r,i?i.document.mutableCopy():Ir.newInvalidDocument(r))})),oe.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Il();const o=t.path,u=new Ne(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:f}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||fj(pj(f),n)<=0||(r.has(f.key)||v1(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return oe.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ue(9500)}ni(e,t){return oe.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new G9(this)}getSize(e){return oe.resolve(this.size)}}class G9 extends B9{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),oe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e){this.persistence=e,this.ri=new Xh((t=>TS(t)),kS),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.ii=0,this.si=new LS,this.targetCount=0,this.oi=Wm._r()}forEachTarget(e,t){return this.ri.forEach(((n,r)=>t(r))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),oe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Wm(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.lr(t),oe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ri.forEach(((o,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)})),oe.waitFor(i).next((()=>r))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return oe.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),oe.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),oe.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return oe.resolve(n)}containsKey(e,t){return oe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,t){this._i={},this.overlays={},this.ai=new m1(0),this.ui=!1,this.ui=!0,this.ci=new z9,this.referenceDelegate=e(this),this.li=new q9(this),this.indexManager=new P9,this.remoteDocumentCache=(function(r){return new W9(r)})((n=>this.referenceDelegate.hi(n))),this.serializer=new k9(t),this.Pi=new j9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new H9(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){Ce("MemoryPersistence","Starting transaction:",e);const r=new K9(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((i=>this.referenceDelegate.Ii(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ei(e,t){return oe.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}}class K9 extends gj{constructor(e){super(),this.currentSequenceNumber=e}}class OS{constructor(e){this.persistence=e,this.Ri=new LS,this.Ai=null}static Vi(e){return new OS(e)}get di(){if(this.Ai)return this.Ai;throw Ue(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),oe.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((i=>this.di.add(i.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(n=>{const r=Ne.fromPath(n);return this.mi(e,r).next((i=>{i||t.removeEntry(r,ze.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((n=>{n?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class x_{constructor(e,t){this.persistence=e,this.fi=new Xh((n=>vj(n.path)),((n,r)=>n.isEqual(r))),this.garbageCollector=O9(this,t)}static Vi(e,t){return new x_(e,t)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((r=>n+r))))}pr(e){let t=0;return this.mr(e,(n=>{t++})).next((()=>t))}mr(e,t){return oe.forEach(this.fi,((n,r)=>this.wr(e,n,r).next((i=>i?oe.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,(o=>this.wr(e,o,t).next((u=>{u||(n++,i.removeEntry(o,ze.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wA(e.data.value)),t}wr(e,t,n){return oe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return oe.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(e,t){let n=st(),r=st();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new BS(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return A6()?8:yj(Pr())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.gs(e,t).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new Q9;return this.ys(e,t,o).next((u=>{if(i.result=u,this.As)return this.ws(e,t,o,u.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(zp()<=nt.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",Hp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(zp()<=nt.DEBUG&&Ce("QueryEngine","Query:",Hp(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(zp()<=nt.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",Hp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,to(t))):oe.resolve())}gs(e,t){if(nP(t))return oe.resolve(null);let n=to(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=v_(t,null,"F"),n=to(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const o=st(...i);return this.fs.getDocuments(e,o).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.bs(t,u);return this.Ss(t,h,o,d.readTime)?this.gs(e,v_(t,null,"F")):this.Ds(e,h,t,d)}))))})))))}ps(e,t,n,r){return nP(t)||r.isEqual(ze.min())?oe.resolve(null):this.fs.getDocuments(e,n).next((i=>{const o=this.bs(t,i);return this.Ss(t,o,n,r)?oe.resolve(null):(zp()<=nt.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hp(t)),this.Ds(e,o,t,hj(r,Kg)).next((u=>u)))}))}bs(e,t){let n=new Un(g3(e));return t.forEach(((r,i)=>{v1(e,i)&&(n=n.add(i))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return zp()<=nt.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",Hp(t)),this.fs.getDocumentsMatchingQuery(e,t,_u.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((i=>(t.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="LocalStore",Y9=3e8;class J9{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new tn(rt),this.Fs=new Xh((i=>TS(i)),kS),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U9(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Z9(s,e,t,n){return new J9(s,e,t,n)}async function j3(s,e){const t=$e(s);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next((i=>(r=i,t.Os(e),t.mutationQueue.getAllMutationBatches(n)))).next((i=>{const o=[],u=[];let d=st();for(const h of r){o.push(h.batchId);for(const f of h.mutations)d=d.add(f.key)}for(const h of i){u.push(h.batchId);for(const f of h.mutations)d=d.add(f.key)}return t.localDocuments.getDocuments(n,d).next((h=>({Ns:h,removedBatchIds:o,addedBatchIds:u})))}))}))}function e8(s,e){const t=$e(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const r=e.batch.keys(),i=t.xs.newChangeBuffer({trackRemovals:!0});return(function(u,d,h,f){const g=h.batch,w=g.keys();let A=oe.resolve();return w.forEach((S=>{A=A.next((()=>f.getEntry(d,S))).next((C=>{const T=h.docVersions.get(S);vt(T!==null,48541),C.version.compareTo(T)<0&&(g.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),f.addEntry(C)))}))})),A.next((()=>u.mutationQueue.removeMutationBatch(d,g)))})(t,n,e,i).next((()=>i.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=st();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,r)))}))}function $3(s){const e=$e(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function t8(s,e){const t=$e(s),n=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const u=[];e.targetChanges.forEach(((f,g)=>{const w=r.get(g);if(!w)return;u.push(t.li.removeMatchingKeys(i,f.removedDocuments,g).next((()=>t.li.addMatchingKeys(i,f.addedDocuments,g))));let A=w.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?A=A.withResumeToken(mr.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,n)),r=r.insert(g,A),(function(C,T,P){return C.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=Y9?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(w,A,f)&&u.push(t.li.updateTargetData(i,A))}));let d=Il(),h=st();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))})),u.push(n8(i,o,e.documentUpdates).next((f=>{d=f.Bs,h=f.Ls}))),!n.isEqual(ze.min())){const f=t.li.getLastRemoteSnapshotVersion(i).next((g=>t.li.setTargetsMetadata(i,i.currentSequenceNumber,n)));u.push(f)}return oe.waitFor(u).next((()=>o.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(t.vs=r,i)))}function n8(s,e,t){let n=st(),r=st();return t.forEach((i=>n=n.add(i))),e.getEntries(s,n).next((i=>{let o=Il();return t.forEach(((u,d)=>{const h=i.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(ze.min())?(e.removeEntry(u,d.readTime),o=o.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(u,d)):Ce(VS,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)})),{Bs:o,Ls:r}}))}function r8(s,e){const t=$e(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=CS),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function s8(s,e){const t=$e(s);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let r;return t.li.getTargetData(n,e).next((i=>i?(r=i,oe.resolve(r)):t.li.allocateTargetId(n).next((o=>(r=new pu(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.li.addTargetData(n,r).next((()=>r)))))))})).then((n=>{const r=t.vs.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(n.targetId,n),t.Fs.set(e,n.targetId)),n}))}async function vb(s,e,t){const n=$e(s),r=n.vs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",i,(o=>n.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!t2(o))throw o;Ce(VS,`Failed to update sequence numbers for target ${e}: ${o}`)}n.vs=n.vs.remove(e),n.Fs.delete(r.target)}function mP(s,e,t){const n=$e(s);let r=ze.min(),i=st();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,f){const g=$e(d),w=g.Fs.get(f);return w!==void 0?oe.resolve(g.vs.get(w)):g.li.getTargetData(h,f)})(n,o,to(e)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(o,u.targetId).next((d=>{i=d}))})).next((()=>n.Cs.getDocumentsMatchingQuery(o,e,t?r:ze.min(),t?i:st()))).next((u=>(i8(n,$j(e),u),{documents:u,ks:i})))))}function i8(s,e,t){let n=s.Ms.get(e)||ze.min();t.forEach(((r,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),s.Ms.set(e,n)}class gP{constructor(){this.activeTargetIds=Kj()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a8{constructor(){this.vo=new gP,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new gP,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="ConnectivityMonitor";class wP{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ce(yP,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ce(yP,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jv=null;function Ab(){return Jv===null?Jv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jv++,"0x"+Jv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="RestConnection",l8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class c8{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===g_?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){const o=Ab(),u=this.Qo(e,t.toUriEncodedString());Ce(DE,`Sending RPC '${e}' ${o}:`,u,n);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,r,i);const{host:h}=new URL(u),f=Mu(h);return this.zo(e,u,d,n,f).then((g=>(Ce(DE,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw Uh(DE,`RPC '${e}' ${o} failed with error: `,g,"url: ",u,"request:",n),g}))}jo(e,t,n,r,i,o){return this.Wo(e,t,n,r,i)}Go(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,i)=>e[i]=r)),n&&n.headers.forEach(((r,i)=>e[i]=r))}Qo(e,t){const n=l8[e];let r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="WebChannelConnection",eg=(s,e,t)=>{s.listen(e,(n=>{try{t(n)}catch(r){setTimeout((()=>{throw r}),0)}}))};class df extends c8{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!df.c_){const e=WD();eg(e,HD.STAT_EVENT,(t=>{t.stat===lb.PROXY?Ce(_r,"STAT_EVENT: detected buffering proxy"):t.stat===lb.NOPROXY&&Ce(_r,"STAT_EVENT: detected no buffering proxy")})),df.c_=!0}}zo(e,t,n,r,i){const o=Ab();return new Promise(((u,d)=>{const h=new $D;h.setWithCredentials(!0),h.listenOnce(zD.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case yA.NO_ERROR:const g=h.getResponseJson();Ce(_r,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),u(g);break;case yA.TIMEOUT:Ce(_r,`RPC '${e}' ${o} timed out`),d(new Ae(ie.DEADLINE_EXCEEDED,"Request time out"));break;case yA.HTTP_ERROR:const w=h.getStatus();if(Ce(_r,`RPC '${e}' ${o} failed with status:`,w,"response text:",h.getResponseText()),w>0){let A=h.getResponseJson();Array.isArray(A)&&(A=A[0]);const S=A==null?void 0:A.error;if(S&&S.status&&S.message){const C=(function(P){const O=P.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(O)>=0?O:ie.UNKNOWN})(S.status);d(new Ae(C,S.message))}else d(new Ae(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Ae(ie.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Ce(_r,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(r);Ce(_r,`RPC '${e}' ${o} sending request:`,r),h.send(t,"POST",f,n,15)}))}T_(e,t,n){const r=Ab(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const h=i.join("");Ce(_r,`Creating RPC '${e}' stream ${r}: ${h}`,u);const f=o.createWebChannel(h,u);this.I_(f);let g=!1,w=!1;const A=new u8({Ho:S=>{w?Ce(_r,`Not sending because RPC '${e}' stream ${r} is closed:`,S):(g||(Ce(_r,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),Ce(_r,`RPC '${e}' stream ${r} sending:`,S),f.send(S))},Jo:()=>f.close()});return eg(f,dg.EventType.OPEN,(()=>{w||(Ce(_r,`RPC '${e}' stream ${r} transport opened.`),A.i_())})),eg(f,dg.EventType.CLOSE,(()=>{w||(w=!0,Ce(_r,`RPC '${e}' stream ${r} transport closed`),A.o_(),this.E_(f))})),eg(f,dg.EventType.ERROR,(S=>{w||(w=!0,Uh(_r,`RPC '${e}' stream ${r} transport errored. Name:`,S.name,"Message:",S.message),A.o_(new Ae(ie.UNAVAILABLE,"The operation could not be completed")))})),eg(f,dg.EventType.MESSAGE,(S=>{var C;if(!w){const T=S.data[0];vt(!!T,16349);const P=T,O=(P==null?void 0:P.error)||((C=P[0])==null?void 0:C.error);if(O){Ce(_r,`RPC '${e}' stream ${r} received error:`,O);const N=O.status;let j=(function(D){const R=Fn[D];if(R!==void 0)return F3(R)})(N),z=O.message;N==="NOT_FOUND"&&z.includes("database")&&z.includes("does not exist")&&z.includes(this.databaseId.database)&&Uh(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),j===void 0&&(j=ie.INTERNAL,z="Unknown error status: "+N+" with message "+O.message),w=!0,A.o_(new Ae(j,z)),f.close()}else Ce(_r,`RPC '${e}' stream ${r} received:`,T),A.__(T)}})),df.u_(),setTimeout((()=>{A.s_()}),0),A}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return GD()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(s){return new df(s)}function NE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(s){return new m9(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */df.c_=!1;class z3{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Ce("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="PersistentStream";class H3{constructor(e,t,n,r,i,o,u,d){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new z3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(kl(t.toString()),kl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,r])=>{this.D_===t&&this.G_(n,r)}),(n=>{e((()=>{const r=new Ae(ie.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(r)}))}))}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{n((()=>this.z_(r)))})),this.stream.onMessage((r=>{n((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ce(vP,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ce(vP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h8 extends H3{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=w9(this.serializer,e),n=(function(i){if(!("targetChange"in i))return ze.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ze.min():o.readTime?no(o.readTime):ze.min()})(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=wb(this.serializer),t.addTarget=(function(i,o){let u;const d=o.target;if(u=pb(d)?{documents:_9(i,d)}:{query:N3(i,d).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=I3(i,o.resumeToken);const h=mb(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(ze.min())>0){u.readTime=__(i,o.snapshotVersion.toTimestamp());const h=mb(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const n=b9(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=wb(this.serializer),t.removeTarget=e,this.K_(t)}}class p8 extends H3{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=A9(e.writeResults,e.commitTime),n=no(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=wb(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>v9(this.serializer,n)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{}class m8 extends f8{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ae(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Wo(e,gb(t,n),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(ie.UNKNOWN,i.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.jo(e,gb(t,n),r,o,u,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ie.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function g8(s,e,t,n){return new m8(s,e,t,n)}class y8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kl(t),this.aa=!1):Ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="RemoteStore";class w8{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((o=>{n.enqueueAndForget((async()=>{Yh(this)&&(Ce(jh,"Restarting streams for network reachability change."),await(async function(d){const h=$e(d);h.Ea.add(4),await g0(h),h.Va.set("Unknown"),h.Ea.delete(4),await b1(h)})(this))}))})),this.Va=new y8(n,r)}}async function b1(s){if(Yh(s))for(const e of s.Ra)await e(!0)}async function g0(s){for(const e of s.Ra)await e(!1)}function W3(s,e){const t=$e(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zS(t)?$S(t):r2(t).O_()&&jS(t,e))}function US(s,e){const t=$e(s),n=r2(t);t.Ia.delete(e),n.O_()&&G3(t,e),t.Ia.size===0&&(n.O_()?n.L_():Yh(t)&&t.Va.set("Unknown"))}function jS(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}r2(s).Z_(e)}function G3(s,e){s.da.$e(e),r2(s).X_(e)}function $S(s){s.da=new d9({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),r2(s).start(),s.Va.ua()}function zS(s){return Yh(s)&&!r2(s).x_()&&s.Ia.size>0}function Yh(s){return $e(s).Ea.size===0}function q3(s){s.da=void 0}async function v8(s){s.Va.set("Online")}async function A8(s){s.Ia.forEach(((e,t)=>{jS(s,e)}))}async function _8(s,e){q3(s),zS(s)?(s.Va.ha(e),$S(s)):s.Va.set("Unknown")}async function x8(s,e,t){if(s.Va.set("Online"),e instanceof k3&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const u of i.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,o),r.Ia.delete(u),r.da.removeTarget(u))})(s,e)}catch(n){Ce(jh,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await E_(s,n)}else if(e instanceof _A?s.da.Xe(e):e instanceof T3?s.da.st(e):s.da.tt(e),!t.isEqual(ze.min()))try{const n=await $3(s.localStore);t.compareTo(n)>=0&&await(function(i,o){const u=i.da.Tt(o);return u.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(d.resumeToken,o))}})),u.targetMismatches.forEach(((d,h)=>{const f=i.Ia.get(d);if(!f)return;i.Ia.set(d,f.withResumeToken(mr.EMPTY_BYTE_STRING,f.snapshotVersion)),G3(i,d);const g=new pu(f.target,d,h,f.sequenceNumber);jS(i,g)})),i.remoteSyncer.applyRemoteEvent(u)})(s,t)}catch(n){Ce(jh,"Failed to raise snapshot:",n),await E_(s,n)}}async function E_(s,e,t){if(!t2(e))throw e;s.Ea.add(1),await g0(s),s.Va.set("Offline"),t||(t=()=>$3(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Ce(jh,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await b1(s)}))}function K3(s,e){return e().catch((t=>E_(s,t,e)))}async function C1(s){const e=$e(s),t=Cu(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:CS;for(;E8(e);)try{const r=await r8(e.localStore,n);if(r===null){e.Ta.length===0&&t.L_();break}n=r.batchId,b8(e,r)}catch(r){await E_(e,r)}Q3(e)&&X3(e)}function E8(s){return Yh(s)&&s.Ta.length<10}function b8(s,e){s.Ta.push(e);const t=Cu(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function Q3(s){return Yh(s)&&!Cu(s).x_()&&s.Ta.length>0}function X3(s){Cu(s).start()}async function C8(s){Cu(s).ra()}async function S8(s){const e=Cu(s);for(const t of s.Ta)e.ea(t.mutations)}async function F8(s,e,t){const n=s.Ta.shift(),r=DS.from(n,e,t);await K3(s,(()=>s.remoteSyncer.applySuccessfulWrite(r))),await C1(s)}async function T8(s,e){e&&Cu(s).Y_&&await(async function(n,r){if((function(o){return l9(o)&&o!==ie.ABORTED})(r.code)){const i=n.Ta.shift();Cu(n).B_(),await K3(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r))),await C1(n)}})(s,e),Q3(s)&&X3(s)}async function AP(s,e){const t=$e(s);t.asyncQueue.verifyOperationInProgress(),Ce(jh,"RemoteStore received new credentials");const n=Yh(t);t.Ea.add(3),await g0(t),n&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await b1(t)}async function k8(s,e){const t=$e(s);e?(t.Ea.delete(2),await b1(t)):e||(t.Ea.add(2),await g0(t),t.Va.set("Unknown"))}function r2(s){return s.ma||(s.ma=(function(t,n,r){const i=$e(t);return i.sa(),new h8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(s.datastore,s.asyncQueue,{Zo:v8.bind(null,s),Yo:A8.bind(null,s),t_:_8.bind(null,s),J_:x8.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),zS(s)?$S(s):s.Va.set("Unknown")):(await s.ma.stop(),q3(s))}))),s.ma}function Cu(s){return s.fa||(s.fa=(function(t,n,r){const i=$e(t);return i.sa(),new p8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:C8.bind(null,s),t_:T8.bind(null,s),ta:S8.bind(null,s),na:F8.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await C1(s)):(await s.fa.stop(),s.Ta.length>0&&(Ce(jh,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,u=new HS(e,t,o,r,i);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function WS(s,e){if(kl("AsyncQueue",`${e}: ${s}`),t2(s))return new Ae(ie.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{static emptySet(e){return new hf(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ne.comparator(t.key,n.key):(t,n)=>Ne.comparator(t.key,n.key),this.keyedMap=hg(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new hf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.ga=new tn(Ne.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ue(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Gm{constructor(e,t,n,r,i,o,u,d,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((u=>{o.push({type:0,doc:u})})),new Gm(e,t,hf.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&w1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class P8{constructor(){this.queries=xP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const r=$e(t),i=r.queries;r.queries=xP(),i.forEach(((o,u)=>{for(const d of u.ba)d.onError(n)}))})(this,new Ae(ie.ABORTED,"Firestore shutting down"))}}function xP(){return new Xh((s=>m3(s)),w1)}async function Y3(s,e){const t=$e(s);let n=3;const r=e.query;let i=t.queries.get(r);i?!i.Sa()&&e.Da()&&(n=2):(i=new I8,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await t.onListen(r,!0);break;case 1:i.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const u=WS(o,`Initialization of query '${Hp(e.query)}' failed`);return void e.onError(u)}t.queries.set(r,i),i.ba.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&GS(t)}async function J3(s,e){const t=$e(s),n=e.query;let r=3;const i=t.queries.get(n);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?r=e.Da()?0:1:!i.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function R8(s,e){const t=$e(s);let n=!1;for(const r of e){const i=r.query,o=t.queries.get(i);if(o){for(const u of o.ba)u.Fa(r)&&(n=!0);o.wa=r}}n&&GS(t)}function D8(s,e,t){const n=$e(s),r=n.queries.get(e);if(r)for(const i of r.ba)i.onError(t);n.queries.delete(e)}function GS(s){s.Ca.forEach((e=>{e.next()}))}var _b,EP;(EP=_b||(_b={})).Ma="default",EP.Cache="cache";class Z3{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new Gm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Gm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_b.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.key=e}}class tN{constructor(e){this.key=e}}class N8{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=st(),this.mutatedKeys=st(),this.eu=g3(e),this.tu=new hf(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new _P,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((f,g)=>{const w=r.get(f),A=v1(this.query,g)?g:null,S=!!w&&this.mutatedKeys.has(w.key),C=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let T=!1;w&&A?w.data.isEqual(A.data)?S!==C&&(n.track({type:3,doc:A}),T=!0):this.su(w,A)||(n.track({type:2,doc:A}),T=!0,(d&&this.eu(A,d)>0||h&&this.eu(A,h)<0)&&(u=!0)):!w&&A?(n.track({type:0,doc:A}),T=!0):w&&!A&&(n.track({type:1,doc:w}),T=!0,(d||h)&&(u=!0)),T&&(A?(o=o.add(A),i=C?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{tu:o,iu:n,Ss:u,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,g)=>(function(A,S){const C=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:T})}};return C(A)-C(S)})(f.type,g.type)||this.eu(f.doc,g.doc))),this.ou(n),r=r??!1;const u=t&&!r?this._u():[],d=this.Ya.size===0&&this.current&&!r?1:0,h=d!==this.Xa;return this.Xa=d,o.length!==0||h?{snapshot:new Gm(this.query,e.tu,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _P,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=st(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))}));const t=[];return e.forEach((n=>{this.Ya.has(n)||t.push(new tN(n))})),this.Ya.forEach((n=>{e.has(n)||t.push(new eN(n))})),t}cu(e){this.Za=e.ks,this.Ya=st();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Gm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const qS="SyncEngine";class M8{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class L8{constructor(e){this.key=e,this.hu=!1}}class O8{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xh((u=>m3(u)),w1),this.Iu=new Map,this.Eu=new Set,this.Ru=new tn(Ne.comparator),this.Au=new Map,this.Vu=new LS,this.du={},this.mu=new Map,this.fu=Wm.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function B8(s,e,t=!0){const n=oN(s);let r;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await nN(n,e,t,!0),r}async function V8(s,e){const t=oN(s);await nN(t,e,!0,!1)}async function nN(s,e,t,n){const r=await s8(s.localStore,to(e)),i=r.targetId,o=s.sharedClientState.addLocalQueryTarget(i,t);let u;return n&&(u=await U8(s,e,i,o==="current",r.resumeToken)),s.isPrimaryClient&&t&&W3(s.remoteStore,r),u}async function U8(s,e,t,n,r){s.pu=(g,w,A)=>(async function(C,T,P,O){let N=T.view.ru(P);N.Ss&&(N=await mP(C.localStore,T.query,!1).then((({documents:D})=>T.view.ru(D,N))));const j=O&&O.targetChanges.get(T.targetId),z=O&&O.targetMismatches.get(T.targetId)!=null,W=T.view.applyChanges(N,C.isPrimaryClient,j,z);return CP(C,T.targetId,W.au),W.snapshot})(s,g,w,A);const i=await mP(s.localStore,e,!0),o=new N8(e,i.ks),u=o.ru(i.documents),d=m0.createSynthesizedTargetChangeForCurrentChange(t,n&&s.onlineState!=="Offline",r),h=o.applyChanges(u,s.isPrimaryClient,d);CP(s,t,h.au);const f=new M8(e,t,o);return s.Tu.set(e,f),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),h.snapshot}async function j8(s,e,t){const n=$e(s),r=n.Tu.get(e),i=n.Iu.get(r.targetId);if(i.length>1)return n.Iu.set(r.targetId,i.filter((o=>!w1(o,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await vb(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),t&&US(n.remoteStore,r.targetId),xb(n,r.targetId)})).catch(e2)):(xb(n,r.targetId),await vb(n.localStore,r.targetId,!0))}async function $8(s,e){const t=$e(s),n=t.Tu.get(e),r=t.Iu.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),US(t.remoteStore,n.targetId))}async function z8(s,e,t){const n=X8(s);try{const r=await(function(o,u){const d=$e(o),h=zt.now(),f=u.reduce(((A,S)=>A.add(S.key)),st());let g,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let S=Il(),C=st();return d.xs.getEntries(A,f).next((T=>{S=T,S.forEach(((P,O)=>{O.isValidDocument()||(C=C.add(P))}))})).next((()=>d.localDocuments.getOverlayedDocuments(A,S))).next((T=>{g=T;const P=[];for(const O of u){const N=n9(O,g.get(O.key).overlayedDocument);N!=null&&P.push(new Bu(O.key,N,a3(N.value.mapValue),Yi.exists(!0)))}return d.mutationQueue.addMutationBatch(A,h,P,u)})).next((T=>{w=T;const P=T.applyToLocalDocumentSet(g,C);return d.documentOverlayCache.saveOverlays(A,T.batchId,P)}))})).then((()=>({batchId:w.batchId,changes:w3(g)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),(function(o,u,d){let h=o.du[o.currentUser.toKey()];h||(h=new tn(rt)),h=h.insert(u,d),o.du[o.currentUser.toKey()]=h})(n,r.batchId,t),await y0(n,r.changes),await C1(n.remoteStore)}catch(r){const i=WS(r,"Failed to persist write");t.reject(i)}}async function rN(s,e){const t=$e(s);try{const n=await t8(t.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=t.Au.get(i);o&&(vt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?vt(o.hu,14607):r.removedDocuments.size>0&&(vt(o.hu,42227),o.hu=!1))})),await y0(t,n,e)}catch(n){await e2(n)}}function bP(s,e,t){const n=$e(s);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.Tu.forEach(((i,o)=>{const u=o.view.va(e);u.snapshot&&r.push(u.snapshot)})),(function(o,u){const d=$e(o);d.onlineState=u;let h=!1;d.queries.forEach(((f,g)=>{for(const w of g.ba)w.va(u)&&(h=!0)})),h&&GS(d)})(n.eventManager,e),r.length&&n.Pu.J_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function H8(s,e,t){const n=$e(s);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Au.get(e),i=r&&r.key;if(i){let o=new tn(Ne.comparator);o=o.insert(i,Ir.newNoDocument(i,ze.min()));const u=st().add(i),d=new x1(ze.min(),new Map,new tn(rt),o,u);await rN(n,d),n.Ru=n.Ru.remove(i),n.Au.delete(e),KS(n)}else await vb(n.localStore,e,!1).then((()=>xb(n,e,t))).catch(e2)}async function W8(s,e){const t=$e(s),n=e.batch.batchId;try{const r=await e8(t.localStore,e);iN(t,n,null),sN(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await y0(t,r)}catch(r){await e2(r)}}async function G8(s,e,t){const n=$e(s);try{const r=await(function(o,u){const d=$e(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return d.mutationQueue.lookupMutationBatch(h,u).next((g=>(vt(g!==null,37113),f=g.keys(),d.mutationQueue.removeMutationBatch(h,g)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,f,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>d.localDocuments.getDocuments(h,f)))}))})(n.localStore,e);iN(n,e,t),sN(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await y0(n,r)}catch(r){await e2(r)}}function sN(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function iN(s,e,t){const n=$e(s);let r=n.du[n.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),n.du[n.currentUser.toKey()]=r}}function xb(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const n of s.Iu.get(e))s.Tu.delete(n),t&&s.Pu.yu(n,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((n=>{s.Vu.containsKey(n)||aN(s,n)}))}function aN(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(US(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),KS(s))}function CP(s,e,t){for(const n of t)n instanceof eN?(s.Vu.addReference(n.key,e),q8(s,n)):n instanceof tN?(Ce(qS,"Document no longer in limbo: "+n.key),s.Vu.removeReference(n.key,e),s.Vu.containsKey(n.key)||aN(s,n.key)):Ue(19791,{wu:n})}function q8(s,e){const t=e.key,n=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(n)||(Ce(qS,"New document in limbo: "+t),s.Eu.add(n),KS(s))}function KS(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ne(Ot.fromString(e)),n=s.fu.next();s.Au.set(n,new L8(t)),s.Ru=s.Ru.insert(t,n),W3(s.remoteStore,new pu(to(IS(t.path)),n,"TargetPurposeLimboResolution",m1.ce))}}async function y0(s,e,t){const n=$e(s),r=[],i=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{o.push(n.pu(d,e,t).then((h=>{var f;if((h||t)&&n.isPrimaryClient){const g=h?!h.fromCache:(f=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:f.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(h){r.push(h);const g=BS.Es(d.targetId,h);i.push(g)}})))})),await Promise.all(o),n.Pu.J_(r),await(async function(d,h){const f=$e(d);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>oe.forEach(h,(w=>oe.forEach(w.Ts,(A=>f.persistence.referenceDelegate.addReference(g,w.targetId,A))).next((()=>oe.forEach(w.Is,(A=>f.persistence.referenceDelegate.removeReference(g,w.targetId,A)))))))))}catch(g){if(!t2(g))throw g;Ce(VS,"Failed to update sequence numbers: "+g)}for(const g of h){const w=g.targetId;if(!g.fromCache){const A=f.vs.get(w),S=A.snapshotVersion,C=A.withLastLimboFreeSnapshotVersion(S);f.vs=f.vs.insert(w,C)}}})(n.localStore,i))}async function K8(s,e){const t=$e(s);if(!t.currentUser.isEqual(e)){Ce(qS,"User change. New user:",e.toKey());const n=await j3(t.localStore,e);t.currentUser=e,(function(i,o){i.mu.forEach((u=>{u.forEach((d=>{d.reject(new Ae(ie.CANCELLED,o))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await y0(t,n.Ns)}}function Q8(s,e){const t=$e(s),n=t.Au.get(e);if(n&&n.hu)return st().add(n.key);{let r=st();const i=t.Iu.get(e);if(!i)return r;for(const o of i){const u=t.Tu.get(o);r=r.unionWith(u.view.nu)}return r}}function oN(s){const e=$e(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=rN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H8.bind(null,e),e.Pu.J_=R8.bind(null,e.eventManager),e.Pu.yu=D8.bind(null,e.eventManager),e}function X8(s){const e=$e(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G8.bind(null,e),e}class b_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=E1(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Z9(this.persistence,new X9,e.initialUser,this.serializer)}Cu(e){return new U3(OS.Vi,this.serializer)}Du(e){return new a8}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}b_.provider={build:()=>new b_};class Y8 extends b_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){vt(this.persistence.referenceDelegate instanceof x_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new M9(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ls.withCacheSize(this.cacheSizeBytes):ls.DEFAULT;return new U3((n=>x_.Vi(n,t)),this.serializer)}}class Eb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>bP(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=K8.bind(null,this.syncEngine),await k8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new P8})()}createDatastore(e){const t=E1(e.databaseInfo.databaseId),n=d8(e.databaseInfo);return g8(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,r,i,o,u){return new w8(n,r,i,o,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>bP(this.syncEngine,t,0)),(function(){return wP.v()?new wP:new o8})())}createSyncEngine(e,t){return(function(r,i,o,u,d,h,f){const g=new O8(r,i,o,u,d,h);return f&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const i=$e(r);Ce(jh,"RemoteStore shutting down."),i.Ea.add(5),await g0(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Eb.provider={build:()=>new Eb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su="FirestoreClient";class J8{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=kr.UNAUTHENTICATED,this.clientId=bS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async o=>{Ce(Su,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(Ce(Su,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new eo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=WS(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ME(s,e){s.asyncQueue.verifyOperationInProgress(),Ce(Su,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let n=t.initialUser;s.setCredentialChangeListener((async r=>{n.isEqual(r)||(await j3(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function SP(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Z8(s);Ce(Su,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((n=>AP(e.remoteStore,n))),s.setAppCheckTokenChangeListener(((n,r)=>AP(e.remoteStore,r))),s._onlineComponents=e}async function Z8(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ce(Su,"Using user provided OfflineComponentProvider");try{await ME(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ie.FAILED_PRECONDITION||r.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Uh("Error using user provided cache. Falling back to memory cache: "+t),await ME(s,new b_)}}else Ce(Su,"Using default OfflineComponentProvider"),await ME(s,new Y8(void 0));return s._offlineComponents}async function QS(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ce(Su,"Using user provided OnlineComponentProvider"),await SP(s,s._uninitializedComponentsProvider._online)):(Ce(Su,"Using default OnlineComponentProvider"),await SP(s,new Eb))),s._onlineComponents}function e$(s){return QS(s).then((e=>e.syncEngine))}function t$(s){return QS(s).then((e=>e.datastore))}async function cN(s){const e=await QS(s),t=e.eventManager;return t.onListen=B8.bind(null,e.syncEngine),t.onUnlisten=j8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=V8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$8.bind(null,e.syncEngine),t}function n$(s,e,t={}){const n=new eo;return s.asyncQueue.enqueueAndForget((async()=>(function(i,o,u,d,h){const f=new lN({next:w=>{f.Nu(),o.enqueueAndForget((()=>J3(i,g)));const A=w.docs.has(u);!A&&w.fromCache?h.reject(new Ae(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&w.fromCache&&d&&d.source==="server"?h.reject(new Ae(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new Z3(IS(u.path),f,{includeMetadataChanges:!0,Ka:!0});return Y3(i,g)})(await cN(s),s.asyncQueue,e,t,n))),n.promise}function r$(s,e,t={}){const n=new eo;return s.asyncQueue.enqueueAndForget((async()=>(function(i,o,u,d,h){const f=new lN({next:w=>{f.Nu(),o.enqueueAndForget((()=>J3(i,g))),w.fromCache&&d.source==="server"?h.reject(new Ae(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new Z3(u,f,{includeMetadataChanges:!0,Ka:!0});return Y3(i,g)})(await cN(s),s.asyncQueue,e,t,n))),n.promise}function s$(s,e,t){const n=new eo;return s.asyncQueue.enqueueAndForget((async()=>{try{const r=await t$(s);n.resolve((async function(o,u,d){var C;const h=$e(o),{request:f,gt:g,parent:w}=x9(h.serializer,Uj(u),d);h.connection.Ko||delete f.parent;const A=(await h.jo("RunAggregationQuery",h.serializer.databaseId,w,f,1)).filter((T=>!!T.result));vt(A.length===1,64727);const S=(C=A[0].result)==null?void 0:C.aggregateFields;return Object.keys(S).reduce(((T,P)=>(T[g[P]]=S[P],T)),{})})(r,e,t))}catch(r){n.reject(r)}})),n.promise}function i$(s,e){const t=new eo;return s.asyncQueue.enqueueAndForget((async()=>z8(await e$(s),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$="ComponentProvider",FP=new Map;function o$(s,e,t,n,r){return new Ej(s,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,uN(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="firestore.googleapis.com",TP=!0;class kP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dN,this.ssl=TP}else this.host=e.host,this.ssl=e.ssl??TP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=V3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D9)throw new Ae(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uN(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Ae(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Ae(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Ae(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class S1{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new ej;switch(n.type){case"firstParty":return new sj(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ae(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=FP.get(t);n&&(Ce(a$,"Removing Datastore"),FP.delete(t),n.terminate())})(this),Promise.resolve()}}function l$(s,e,t,n={}){var h;s=so(s,S1);const r=Mu(e),i=s._getSettings(),o={...i,emulatorOptions:s._getEmulatorOptions()},u=`${e}:${t}`;r&&(uS(`https://${u}`),dS("Firestore",!0)),i.host!==dN&&i.host!==u&&Uh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...i,host:u,ssl:r,emulatorOptions:n};if(!Lh(d,o)&&(s._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=kr.MOCK_USER;else{f=nD(n.mockUserToken,(h=s._app)==null?void 0:h.options.projectId);const w=n.mockUserToken.sub||n.mockUserToken.user_id;if(!w)throw new Ae(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new kr(w)}s._authCredentials=new tj(new KD(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vu(this.firestore,e,this._query)}}class Pn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}toJSON(){return{type:Pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(p0(t,Pn._jsonSchema))return new Pn(e,n||null,new Ne(Ot.fromString(t.referencePath)))}}Pn._jsonSchemaVersion="firestore/documentReference/1.0",Pn._jsonSchema={type:In("string",Pn._jsonSchemaVersion),referencePath:In("string")};class wu extends Vu{constructor(e,t,n){super(e,t,IS(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new Ne(e))}withConverter(e){return new wu(this.firestore,e,this._path)}}function cs(s,e,...t){if(s=dn(s),QD("collection","path",e),s instanceof S1){const n=Ot.fromString(e,...t);return $I(n),new wu(s,null,n)}{if(!(s instanceof Pn||s instanceof wu))throw new Ae(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(Ot.fromString(e,...t));return $I(n),new wu(s.firestore,null,n)}}function ho(s,e,...t){if(s=dn(s),arguments.length===1&&(e=bS.newId()),QD("doc","path",e),s instanceof S1){const n=Ot.fromString(e,...t);return jI(n),new Pn(s,null,new Ne(n))}{if(!(s instanceof Pn||s instanceof wu))throw new Ae(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(Ot.fromString(e,...t));return jI(n),new Pn(s.firestore,s instanceof wu?s.converter:null,new Ne(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="AsyncQueue";class PP{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new z3(this,"async_queue_retry"),this._c=()=>{const n=NE();n&&Ce(IP,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=NE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=NE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new eo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!t2(e))throw e;Ce(IP,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,kl("INTERNAL UNHANDLED ERROR: ",RP(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=HS.createAndSchedule(this,e,t,n,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&Ue(47125,{Pc:RP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function RP(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Jh extends S1{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new PP,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PP(e),this._firestoreClient=void 0,await e}}}function c$(s,e){const t=typeof s=="object"?s:fS(),n=typeof s=="string"?s:g_,r=c1(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const i=ZR("firestore");i&&l$(r,...i)}return r}function F1(s){if(s._terminated)throw new Ae(ie.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||u$(s),s._firestoreClient}function u$(s){var n,r,i,o;const e=s._freezeSettings(),t=o$(s._databaseId,((n=s._app)==null?void 0:n.options.appId)||"",s._persistenceKey,(r=s._app)==null?void 0:r.options.apiKey,e);s._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new J8(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vi(mr.fromBase64String(e))}catch(t){throw new Ae(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vi(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(p0(e,vi._jsonSchema))return vi.fromBase64String(e.bytes)}}vi._jsonSchemaVersion="firestore/bytes/1.0",vi._jsonSchema={type:In("string",vi._jsonSchemaVersion),bytes:In("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ro._jsonSchemaVersion}}static fromJSON(e){if(p0(e,ro._jsonSchema))return new ro(e.latitude,e.longitude)}}ro._jsonSchemaVersion="firestore/geoPoint/1.0",ro._jsonSchema={type:In("string",ro._jsonSchemaVersion),latitude:In("number"),longitude:In("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,r){if(n.length!==r.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(p0(e,Ji._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ji(e.vectorValues);throw new Ae(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ji._jsonSchemaVersion="firestore/vectorValue/1.0",Ji._jsonSchema={type:In("string",Ji._jsonSchemaVersion),vectorValues:In("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$=/^__.*__$/;class h${constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Bu(e,this.data,this.fieldMask,t,this.fieldTransforms):new f0(e,this.data,t,this.fieldTransforms)}}class hN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Bu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pN(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{dataSource:s})}}class YS{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new YS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return C_(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(pN(this.dataSource)&&d$.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class p${constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||E1(e)}createContext(e,t,n,r=!1){return new YS({dataSource:e,methodName:t,targetDoc:n,path:pr.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JS(s){const e=s._freezeSettings(),t=E1(s._databaseId);return new p$(s._databaseId,!!e.ignoreUndefinedProperties,t)}function f$(s,e,t,n,r,i={}){const o=s.createContext(i.merge||i.mergeFields?2:0,e,t,r);eF("Data must be an object, but it was:",o,n);const u=fN(n,o);let d,h;if(i.merge)d=new zs(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const w=$h(e,g,t);if(!o.contains(w))throw new Ae(ie.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);yN(f,w)||f.push(w)}d=new zs(f),h=o.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,h=o.fieldTransforms;return new h$(new jr(u),d,h)}class k1 extends T1{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof k1}}class ZS extends T1{_toFieldTransform(e){return new Jj(e.path,new Zg)}isEqual(e){return e instanceof ZS}}function m$(s,e,t,n){const r=s.createContext(1,e,t);eF("Data must be an object, but it was:",r,n);const i=[],o=jr.empty();Ou(n,((d,h)=>{const f=gN(e,d,t);h=dn(h);const g=r.childContextForFieldPath(f);if(h instanceof k1)i.push(f);else{const w=w0(h,g);w!=null&&(i.push(f),o.set(f,w))}}));const u=new zs(i);return new hN(o,u,r.fieldTransforms)}function g$(s,e,t,n,r,i){const o=s.createContext(1,e,t),u=[$h(e,n,t)],d=[r];if(i.length%2!=0)throw new Ae(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<i.length;w+=2)u.push($h(e,i[w])),d.push(i[w+1]);const h=[],f=jr.empty();for(let w=u.length-1;w>=0;--w)if(!yN(h,u[w])){const A=u[w];let S=d[w];S=dn(S);const C=o.childContextForFieldPath(A);if(S instanceof k1)h.push(A);else{const T=w0(S,C);T!=null&&(h.push(A),f.set(A,T))}}const g=new zs(h);return new hN(f,g,o.fieldTransforms)}function y$(s,e,t,n=!1){return w0(t,s.createContext(n?4:3,e))}function w0(s,e){if(mN(s=dn(s)))return eF("Unsupported field value:",e,s),fN(s,e);if(s instanceof T1)return(function(n,r){if(!pN(r.dataSource))throw r.createError(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(n,r){const i=[];let o=0;for(const u of n){let d=w0(u,r.childContextForArray(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(s,e)}return(function(n,r){if((n=dn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Qj(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=zt.fromDate(n);return{timestampValue:__(r.serializer,i)}}if(n instanceof zt){const i=new zt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:__(r.serializer,i)}}if(n instanceof ro)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof vi)return{bytesValue:I3(r.serializer,n._byteString)};if(n instanceof Pn){const i=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw r.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:MS(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Ji)return(function(o,u){const d=o instanceof Ji?o.toArray():o;return{mapValue:{fields:{[s3]:{stringValue:i3},[y_]:{arrayValue:{values:d.map((f=>{if(typeof f!="number")throw u.createError("VectorValues must only contain numeric values.");return PS(u.serializer,f)}))}}}}}})(n,r);if(B3(n))return n._toProto(r.serializer);throw r.createError(`Unsupported field value: ${f1(n)}`)})(s,e)}function fN(s,e){const t={};return JD(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ou(s,((n,r)=>{const i=w0(r,e.childContextForField(n));i!=null&&(t[n]=i)})),{mapValue:{fields:t}}}function mN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof zt||s instanceof ro||s instanceof vi||s instanceof Pn||s instanceof T1||s instanceof Ji||B3(s))}function eF(s,e,t){if(!mN(t)||!XD(t)){const n=f1(t);throw n==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+n)}}function $h(s,e,t){if((e=dn(e))instanceof XS)return e._internalPath;if(typeof e=="string")return gN(s,e);throw C_("Field path arguments must be of type string or ",s,!1,void 0,t)}const w$=new RegExp("[~\\*/\\[\\]]");function gN(s,e,t){if(e.search(w$)>=0)throw C_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new XS(...e.split("."))._internalPath}catch{throw C_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function C_(s,e,t,n,r){const i=n&&!n.isEmpty(),o=r!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${r}`),d+=")"),new Ae(ie.INVALID_ARGUMENT,u+s+d)}function yN(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${convertValue(e,t="none"){switch(bu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Eu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ou(e,((r,i)=>{n[r]=this.convertValue(i,t)})),n}convertVectorValue(e){var n,r,i;const t=(i=(r=(n=e.fields)==null?void 0:n[y_].arrayValue)==null?void 0:r.values)==null?void 0:i.map((o=>_n(o.doubleValue)));return new Ji(t)}convertGeoPoint(e){return new ro(_n(e.latitude),_n(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=y1(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Qg(e));default:return null}}convertTimestamp(e){const t=xu(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ot.fromString(e);vt(O3(n),9688,{name:e});const r=new Xg(n.get(1),n.get(3)),i=new Ne(n.popFirst(5));return r.isEqual(t)||kl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF extends v${constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,t)}}function v0(){return new ZS("serverTimestamp")}const DP="@firebase/firestore",NP="4.11.0";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class _${constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new jr({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field($h("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class x$ extends wN{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E$(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ae(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nF{}class rF extends nF{}function Zi(s,e,...t){let n=[];e instanceof nF&&n.push(e),n=n.concat(t),(function(i){const o=i.filter((d=>d instanceof sF)).length,u=i.filter((d=>d instanceof I1)).length;if(o>1||o>0&&u>0)throw new Ae(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const r of n)s=r._apply(s);return s}class I1 extends rF{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new I1(e,t,n)}_apply(e){const t=this._parse(e);return AN(e._query,t),new Vu(e.firestore,e.converter,fb(e._query,t))}_parse(e){const t=JS(e.firestore);return(function(i,o,u,d,h,f,g){let w;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){LP(g,f);const S=[];for(const C of g)S.push(MP(d,i,C));w={arrayValue:{values:S}}}else w=MP(d,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||LP(g,f),w=y$(u,o,g,f==="in"||f==="not-in");return kn.create(h,f,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function vu(s,e,t){const n=e,r=$h("where",s);return I1._create(r,n,t)}class sF extends nF{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sF(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:ta.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,i){let o=r;const u=i.getFlattenedFilters();for(const d of u)AN(o,d),o=fb(o,d)})(e._query,t),new Vu(e.firestore,e.converter,fb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iF extends rF{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new iF(e,t)}_apply(e){const t=(function(r,i,o){if(r.startAt!==null)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jg(i,o)})(e._query,this._field,this._direction);return new Vu(e.firestore,e.converter,jj(e._query,t))}}function Fu(s,e="asc"){const t=e,n=$h("orderBy",s);return iF._create(n,t)}class aF extends rF{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new aF(e,t,n)}_apply(e){return new Vu(e.firestore,e.converter,v_(e._query,this._limit,this._limitType))}}function vN(s){return dj("limit",s),aF._create("limit",s,"F")}function MP(s,e,t){if(typeof(t=dn(t))=="string"){if(t==="")throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p3(e)&&t.indexOf("/")!==-1)throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Ot.fromString(t));if(!Ne.isDocumentKey(n))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return XI(s,new Ne(n))}if(t instanceof Pn)return XI(s,t._key);throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${f1(t)}.`)}function LP(s,e){if(!Array.isArray(s)||s.length===0)throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AN(s,e){const t=(function(r,i){for(const o of r)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null})(s.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ae(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function b$(s,e,t){let n;return n=s?s.toFirestore(e):e,n}function C$(){return new A$("count")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(s){return S$(s,{count:C$()})}function S$(s,e){const t=so(s.firestore,Jh),n=F1(t),r=_j(e,((i,o)=>new a9(o,i.aggregateType,i._internalFieldPath)));return s$(n,s._query,r).then((i=>(function(u,d,h){const f=new tF(u);return new _$(d,f,h)})(t,s,i)))}class fg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nh extends wN{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field($h("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Nh._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Nh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nh._jsonSchema={type:In("string",Nh._jsonSchemaVersion),bundleSource:In("string","DocumentSnapshot"),bundleName:In("string"),bundle:In("string")};class xA extends Nh{data(e={}){return super.data(e)}}class pf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new fg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new xA(this._firestore,this._userDataWriter,n.key,n,new fg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((u=>{const d=new xA(r._firestore,r._userDataWriter,u.doc.key,u.doc,new fg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>i||u.type!==3)).map((u=>{const d=new xA(r._firestore,r._userDataWriter,u.doc.key,u.doc,new fg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:F$(u.type),doc:d,oldIndex:h,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F$(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:s})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pf._jsonSchemaVersion="firestore/querySnapshot/1.0",pf._jsonSchema={type:In("string",pf._jsonSchemaVersion),bundleSource:In("string","QuerySnapshot"),bundleName:In("string"),bundle:In("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(s){s=so(s,Pn);const e=so(s.firestore,Jh),t=F1(e);return n$(t,s._key).then((n=>k$(e,s,n)))}function Zh(s){s=so(s,Vu);const e=so(s.firestore,Jh),t=F1(e),n=new tF(e);return E$(s._query),r$(t,s._query).then((r=>new pf(e,n,s,r)))}function oF(s,e,t,...n){s=so(s,Pn);const r=so(s.firestore,Jh),i=JS(r);let o;return o=typeof(e=dn(e))=="string"||e instanceof XS?g$(i,"updateDoc",s._key,e,t,n):m$(i,"updateDoc",s._key,e),lF(r,[o.toMutation(s._key,Yi.exists(!0))])}function A0(s){return lF(so(s.firestore,Jh),[new RS(s._key,Yi.none())])}function _0(s,e){const t=so(s.firestore,Jh),n=ho(s),r=b$(s.converter,e),i=JS(s.firestore);return lF(t,[f$(i,"addDoc",n._key,r,s.converter!==null,{}).toMutation(n._key,Yi.exists(!1))]).then((()=>n))}function lF(s,e){const t=F1(s);return i$(t,e)}function k$(s,e,t){const n=t.docs.get(e._key),r=new tF(s);return new Nh(s,r,e._key,n,new fg(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Z5(Kh),Oh(new Au("firestore",((n,{instanceIdentifier:r,options:i})=>{const o=n.getProvider("app").getImmediate(),u=new Jh(new nj(n.getProvider("auth-internal")),new ij(o,n.getProvider("app-check-internal")),bj(o,r),o);return i={useFetchStreams:t,...i},u._setSettings(i),u}),"PUBLIC").setMultipleInstances(!0)),Ya(DP,NP,e),Ya(DP,NP,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="firebasestorage.googleapis.com",xN="storageBucket",I$=120*1e3,P$=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends uo{constructor(e,t,n=0){super(OE(e),`Firebase Storage: ${t} (${OE(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return OE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hn||(hn={}));function OE(s){return"storage/"+s}function cF(){const s="An unknown error occurred, please check the error payload for server response.";return new pn(hn.UNKNOWN,s)}function R$(s){return new pn(hn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function D$(s){return new pn(hn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function N$(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pn(hn.UNAUTHENTICATED,s)}function M$(){return new pn(hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function L$(s){return new pn(hn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function O$(){return new pn(hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function B$(){return new pn(hn.CANCELED,"User canceled the upload/download.")}function V$(s){return new pn(hn.INVALID_URL,"Invalid URL '"+s+"'.")}function U$(s){return new pn(hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function j$(){return new pn(hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xN+"' property when initializing the app?")}function $$(){return new pn(hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function z$(){return new pn(hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function H$(s){return new pn(hn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function bb(s){return new pn(hn.INVALID_ARGUMENT,s)}function EN(){return new pn(hn.APP_DELETED,"The Firebase app was deleted.")}function W$(s){return new pn(hn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $g(s,e){return new pn(hn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function tg(s){throw new pn(hn.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Hs.makeFromUrl(e,t)}catch{return new Hs(e,"")}if(n.path==="")return n;throw U$(e)}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";function i(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+r+o,"i"),d={bucket:1,path:3};function h(j){j.path_=decodeURIComponent(j.path)}const f="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",A=new RegExp(`^https?://${g}/${f}/b/${r}/o${w}`,"i"),S={bucket:1,path:3},C=t===_N?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",P=new RegExp(`^https?://${C}/${r}/${T}`,"i"),N=[{regex:u,indices:d,postModify:i},{regex:A,indices:S,postModify:h},{regex:P,indices:{bucket:1,path:2},postModify:h}];for(let j=0;j<N.length;j++){const z=N[j],W=z.regex.exec(e);if(W){const D=W[z.indices.bucket];let R=W[z.indices.path];R||(R=""),n=new Hs(D,R),z.postModify(n);break}}if(n==null)throw V$(e);return n}}class G${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(s,e,t){let n=1,r=null,i=null,o=!1,u=0;function d(){return u===2}let h=!1;function f(...T){h||(h=!0,e.apply(null,T))}function g(T){r=setTimeout(()=>{r=null,s(A,d())},T)}function w(){i&&clearTimeout(i)}function A(T,...P){if(h){w();return}if(T){w(),f.call(null,T,...P);return}if(d()||o){w(),f.call(null,T,...P);return}n<64&&(n*=2);let N;u===1?(u=2,N=0):N=(n+Math.random())*1e3,g(N)}let S=!1;function C(T){S||(S=!0,w(),!h&&(r!==null?(T||(u=2),clearTimeout(r),g(0)):T||(u=1)))}return g(0),i=setTimeout(()=>{o=!0,C(!0)},t),C}function K$(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(s){return s!==void 0}function X$(s){return typeof s=="object"&&!Array.isArray(s)}function uF(s){return typeof s=="string"||s instanceof String}function OP(s){return dF()&&s instanceof Blob}function dF(){return typeof Blob<"u"}function BP(s,e,t,n){if(n<e)throw bb(`Invalid value for '${s}'. Expected ${e} or greater.`);if(n>t)throw bb(`Invalid value for '${s}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(s,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${s}`}function bN(s){const e=encodeURIComponent;let t="?";for(const n in s)if(s.hasOwnProperty(n)){const r=e(n)+"="+e(s[n]);t=t+r+"&"}return t=t.slice(0,-1),t}var Mh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Mh||(Mh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(s,e){const t=s>=500&&s<600,r=[408,429].indexOf(s)!==-1,i=e.indexOf(s)!==-1;return t||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e,t,n,r,i,o,u,d,h,f,g,w=!0,A=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=g,this.retry=w,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,C)=>{this.resolve_=S,this.reject_=C,this.start_()})}start_(){const e=(n,r)=>{if(r){n(!1,new Zv(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=u=>{const d=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const u=i.getErrorCode()===Mh.NO_ERROR,d=i.getStatus();if(!u||Y$(d,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Mh.ABORT;n(!1,new Zv(!1,null,f));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new Zv(h,i))})},t=(n,r)=>{const i=this.resolve_,o=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());Q$(d)?i(d):i()}catch(d){o(d)}else if(u!==null){const d=cF();d.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,d)):o(d)}else if(r.canceled){const d=this.appDelete_?EN():B$();o(d)}else{const d=O$();o(d)}};this.canceled_?t(!1,new Zv(!1,null,!0)):this.backoffId_=q$(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&K$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Z$(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function ez(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tz(s,e){e&&(s["X-Firebase-GMPID"]=e)}function nz(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function rz(s,e,t,n,r,i,o=!0,u=!1){const d=bN(s.urlParams),h=s.url+d,f=Object.assign({},s.headers);return tz(f,e),Z$(f,t),ez(f,i),nz(f,n),new J$(h,s.method,f,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,r,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iz(...s){const e=sz();if(e!==void 0){const t=new e;for(let n=0;n<s.length;n++)t.append(s[n]);return t.getBlob()}else{if(dF())return new Blob(s);throw new pn(hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function az(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oz(s){if(typeof atob>"u")throw H$("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class BE{constructor(e,t){this.data=e,this.contentType=t||null}}function lz(s,e){switch(s){case Xa.RAW:return new BE(CN(e));case Xa.BASE64:case Xa.BASE64URL:return new BE(SN(s,e));case Xa.DATA_URL:return new BE(uz(e),dz(e))}throw cF()}function CN(s){const e=[];for(let t=0;t<s.length;t++){let n=s.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=s.charCodeAt(++t);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function cz(s){let e;try{e=decodeURIComponent(s)}catch{throw $g(Xa.DATA_URL,"Malformed data URL.")}return CN(e)}function SN(s,e){switch(s){case Xa.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw $g(s,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Xa.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw $g(s,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=oz(e)}catch(r){throw r.message.includes("polyfill")?r:$g(s,"Invalid character found")}const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}class FN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw $g(Xa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=hz(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function uz(s){const e=new FN(s);return e.base64?SN(Xa.BASE64,e.rest):cz(e.rest)}function dz(s){return new FN(s).contentType}function hz(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){let n=0,r="";OP(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(OP(this.data_)){const n=this.data_,r=az(n,e,t);return r===null?null:new yc(r)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new yc(n,!0)}}static getBlob(...e){if(dF()){const t=e.map(n=>n instanceof yc?n.data_:n);return new yc(iz.apply(null,t))}else{const t=e.map(o=>uF(o)?lz(Xa.RAW,o).data:o.data_);let n=0;t.forEach(o=>{n+=o.byteLength});const r=new Uint8Array(n);let i=0;return t.forEach(o=>{for(let u=0;u<o.length;u++)r[i++]=o[u]}),new yc(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(s){let e;try{e=JSON.parse(s)}catch{return null}return X$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function fz(s,e){const t=e.split("/").filter(n=>n.length>0).join("/");return s.length===0?t:s+"/"+t}function kN(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(s,e){return e}class Nr{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||mz}}let eA=null;function gz(s){return!uF(s)||s.length<2?s:kN(s)}function IN(){if(eA)return eA;const s=[];s.push(new Nr("bucket")),s.push(new Nr("generation")),s.push(new Nr("metageneration")),s.push(new Nr("name","fullPath",!0));function e(i,o){return gz(o)}const t=new Nr("name");t.xform=e,s.push(t);function n(i,o){return o!==void 0?Number(o):o}const r=new Nr("size");return r.xform=n,s.push(r),s.push(new Nr("timeCreated")),s.push(new Nr("updated")),s.push(new Nr("md5Hash",null,!0)),s.push(new Nr("cacheControl",null,!0)),s.push(new Nr("contentDisposition",null,!0)),s.push(new Nr("contentEncoding",null,!0)),s.push(new Nr("contentLanguage",null,!0)),s.push(new Nr("contentType",null,!0)),s.push(new Nr("metadata","customMetadata",!0)),eA=s,eA}function yz(s,e){function t(){const n=s.bucket,r=s.fullPath,i=new Hs(n,r);return e._makeStorageReference(i)}Object.defineProperty(s,"ref",{get:t})}function wz(s,e,t){const n={};n.type="file";const r=t.length;for(let i=0;i<r;i++){const o=t[i];n[o.local]=o.xform(n,e[o.server])}return yz(n,s),n}function PN(s,e,t){const n=TN(e);return n===null?null:wz(s,n,t)}function vz(s,e,t,n){const r=TN(e);if(r===null||!uF(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const f=s.bucket,g=s.fullPath,w="/b/"+o(f)+"/o/"+o(g),A=P1(w,t,n),S=bN({alt:"media",token:h});return A+S})[0]}function Az(s,e){const t={},n=e.length;for(let r=0;r<n;r++){const i=e[r];i.writable&&(t[i.server]=s[i.local])}return JSON.stringify(t)}class hF{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(s){if(!s)throw cF()}function _z(s,e){function t(n,r){const i=PN(s,r,e);return RN(i!==null),i}return t}function xz(s,e){function t(n,r){const i=PN(s,r,e);return RN(i!==null),vz(i,r,s.host,s._protocol)}return t}function DN(s){function e(t,n){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=M$():r=N$():t.getStatus()===402?r=D$(s.bucket):t.getStatus()===403?r=L$(s.path):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}return e}function NN(s){const e=DN(s);function t(n,r){let i=e(n,r);return n.getStatus()===404&&(i=R$(s.path)),i.serverResponse=r.serverResponse,i}return t}function Ez(s,e,t){const n=e.fullServerUrl(),r=P1(n,s.host,s._protocol),i="GET",o=s.maxOperationRetryTime,u=new hF(r,i,xz(s,t),o);return u.errorHandler=NN(e),u}function bz(s,e){const t=e.fullServerUrl(),n=P1(t,s.host,s._protocol),r="DELETE",i=s.maxOperationRetryTime;function o(d,h){}const u=new hF(n,r,o,i);return u.successCodes=[200,204],u.errorHandler=NN(e),u}function Cz(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Sz(s,e,t){const n=Object.assign({},t);return n.fullPath=s.path,n.size=e.size(),n.contentType||(n.contentType=Cz(null,e)),n}function Fz(s,e,t,n,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function u(){let N="";for(let j=0;j<2;j++)N=N+Math.random().toString().slice(2);return N}const d=u();o["Content-Type"]="multipart/related; boundary="+d;const h=Sz(e,n,r),f=Az(h,t),g="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+d+"--",A=yc.getBlob(g,n,w);if(A===null)throw $$();const S={name:h.fullPath},C=P1(i,s.host,s._protocol),T="POST",P=s.maxUploadRetryTime,O=new hF(C,T,_z(s,t),P);return O.urlParams=S,O.headers=o,O.body=A.uploadData(),O.errorHandler=DN(e),O}class Tz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw tg("cannot .send() more than once");if(Mu(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class kz extends Tz{initXhr(){this.xhr_.responseType="text"}}function pF(){return new kz}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t){this._service=e,t instanceof Hs?this._location=t:this._location=Hs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new zh(e,t)}get root(){const e=new Hs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kN(this._location.path)}get storage(){return this._service}get parent(){const e=pz(this._location.path);if(e===null)return null;const t=new Hs(this._location.bucket,e);return new zh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw W$(e)}}function Iz(s,e,t){s._throwIfRoot("uploadBytes");const n=Fz(s.storage,s._location,IN(),new yc(e,!0),t);return s.storage.makeRequestWithTokens(n,pF).then(r=>({metadata:r,ref:s}))}function Pz(s){s._throwIfRoot("getDownloadURL");const e=Ez(s.storage,s._location,IN());return s.storage.makeRequestWithTokens(e,pF).then(t=>{if(t===null)throw z$();return t})}function Rz(s){s._throwIfRoot("deleteObject");const e=bz(s.storage,s._location);return s.storage.makeRequestWithTokens(e,pF)}function Dz(s,e){const t=fz(s._location.path,e),n=new Hs(s._location.bucket,t);return new zh(s.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(s){return/^[A-Za-z]+:\/\//.test(s)}function Mz(s,e){return new zh(s,e)}function MN(s,e){if(s instanceof fF){const t=s;if(t._bucket==null)throw j$();const n=new zh(t,t._bucket);return e!=null?MN(n,e):n}else return e!==void 0?Dz(s,e):s}function Lz(s,e){if(e&&Nz(e)){if(s instanceof fF)return Mz(s,e);throw bb("To use ref(service, url), the first argument must be a Storage instance.")}else return MN(s,e)}function VP(s,e){const t=e==null?void 0:e[xN];return t==null?null:Hs.makeFromBucketSpec(t,s)}function Oz(s,e,t,n={}){s.host=`${e}:${t}`;const r=Mu(e);r&&(uS(`https://${s.host}/b`),dS("Storage",!0)),s._isUsingEmulator=!0,s._protocol=r?"https":"http";const{mockUserToken:i}=n;i&&(s._overrideAuthToken=typeof i=="string"?i:nD(i,s.app.options.projectId))}class fF{constructor(e,t,n,r,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=_N,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I$,this._maxUploadRetryTime=P$,this._requests=new Set,r!=null?this._bucket=Hs.makeFromBucketSpec(r,this._host):this._bucket=VP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hs.makeFromBucketSpec(this._url,e):this._bucket=VP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zh(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new G$(EN());{const o=rz(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const UP="@firebase/storage",jP="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="storage";function ny(s,e,t){return s=dn(s),Iz(s,e,t)}function ry(s){return s=dn(s),Pz(s)}function Cb(s){return s=dn(s),Rz(s)}function Tu(s,e){return s=dn(s),Lz(s,e)}function Bz(s=fS(),e){s=dn(s);const n=c1(s,LN).getImmediate({identifier:e}),r=ZR("storage");return r&&Vz(n,...r),n}function Vz(s,e,t,n={}){Oz(s,e,t,n)}function Uz(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),n=s.getProvider("auth-internal"),r=s.getProvider("app-check-internal");return new fF(t,n,r,e,Kh)}function jz(){Oh(new Au(LN,Uz,"PUBLIC").setMultipleInstances(!0)),Ya(UP,jP,""),Ya(UP,jP,"esm2020")}jz();const $z={apiKey:"AIzaSyD_jwiALUoQcZIOkfhgvJ1MTUsD4mQD8cU",authDomain:`studomate1.firebaseapp.com
`,projectId:"studomate1",storageBucket:"studomate1.firebasestorage.app",messagingSenderId:"819063499606",appId:"1:819063499606:web:79b8457a7333050e0404f7"},mF=iD($z),gF=Y5(mF),nn=c$(mF),ku=Bz(mF),$P=s=>{let e;const t=new Set,n=(h,f)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const w=e;e=f??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(A=>A(e,w))}},r=()=>e,u={setState:n,getState:r,getInitialState:()=>d,subscribe:h=>(t.add(h),()=>t.delete(h))},d=e=s(n,r,u);return u},zz=(s=>s?$P(s):$P),Hz=s=>s;function Wz(s,e=Hz){const t=Hv.useSyncExternalStore(s.subscribe,Hv.useCallback(()=>e(s.getState()),[s,e]),Hv.useCallback(()=>e(s.getInitialState()),[s,e]));return Hv.useDebugValue(t),t}const zP=s=>{const e=zz(s),t=n=>Wz(e,n);return Object.assign(t,e),t},Gz=(s=>s?zP(s):zP),x0=Gz(s=>({user:null,adminProfile:null,loading:!0,setUser:e=>s({user:e}),setAdminProfile:e=>s({adminProfile:e}),setLoading:e=>s({loading:e}),checkUserRole:async e=>{try{const t=await T$(ho(nn,"admins",e));t.exists()?s({adminProfile:t.data()}):s({adminProfile:null})}catch(t){console.error("Error fetching admin profile:",t),t.code==="permission-denied"&&console.error('Check your Firestore Security Rules. You might not have permission to read the "admins" collection.'),s({adminProfile:null})}}})),qz=()=>{const s=i1(),{setUser:e,setAdminProfile:t}=x0(),n=async()=>{try{await gF.signOut(),e(null),t(null),s("/login")}catch(i){console.error("Error signing out:",i)}},r=[{path:"/dashboard",label:"Dashboard",icon:NB},{path:"/universities",label:"Manage Universities",icon:JE},{path:"/modules",label:"Modules",icon:hB},{path:"/exams",label:"Exams",icon:Hg},{path:"/tests",label:"Tests",icon:FB},{path:"/supplementary-exams",label:"Supp. Exams",icon:CB},{path:"/users",label:"Manage Users",icon:aI},{path:"/analytics",label:"Analytics",icon:HR},{path:"/announcements",label:"Announcements",icon:GR}];return b.jsxs("div",{"trae-inspector-start-line":"47","trae-inspector-start-column":"4","trae-inspector-end-line":"92","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-screen w-64 bg-gradient-to-b from-blue-600 to-blue-800 text-white flex flex-col fixed left-0 top-0 z-10",children:[b.jsxs("div",{"trae-inspector-start-line":"48","trae-inspector-start-column":"6","trae-inspector-end-line":"53","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-6 flex items-center space-x-3",children:[b.jsx("div",{"trae-inspector-start-line":"49","trae-inspector-start-column":"8","trae-inspector-end-line":"51","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white/10 p-2 rounded-lg",children:b.jsx(JE,{className:"h-8 w-8 text-white"})}),b.jsx("span",{"trae-inspector-start-line":"52","trae-inspector-start-column":"8","trae-inspector-end-line":"52","trae-inspector-end-column":"62","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22StudentMATE%22%2C%22textStartLine%22%3A%2252%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%2252%22%2C%22textEndColumn%22%3A%2255%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xl font-bold",children:"StudentMATE"})]}),b.jsx("nav",{"trae-inspector-start-line":"55","trae-inspector-start-column":"6","trae-inspector-end-line":"72","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:r.map(i=>b.jsxs(jR,{to:i.path,className:({isActive:o})=>`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${o?"bg-white/20 text-white":"text-blue-100 hover:bg-white/10 hover:text-white"}`,children:[b.jsx(i.icon,{className:"h-5 w-5"}),b.jsx("span",{"trae-inspector-start-line":"69","trae-inspector-start-column":"12","trae-inspector-end-line":"69","trae-inspector-end-column":"61","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium",children:i.label})]},i.path))}),b.jsxs("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"6","trae-inspector-end-line":"91","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-t border-blue-500",children:[b.jsxs("div",{"trae-inspector-start-line":"75","trae-inspector-start-column":"8","trae-inspector-end-line":"83","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-900/50 rounded-lg p-4 mb-4 flex items-center space-x-3",children:[b.jsx("div",{"trae-inspector-start-line":"76","trae-inspector-start-column":"10","trae-inspector-end-line":"78","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center",children:b.jsx(aI,{className:"h-6 w-6 text-white"})}),b.jsxs("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"10","trae-inspector-end-line":"82","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("p",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"80","trae-inspector-end-column":"56","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Admin%22%2C%22textStartLine%22%3A%2280%22%2C%22textStartColumn%22%3A%2247%22%2C%22textEndLine%22%3A%2280%22%2C%22textEndColumn%22%3A%2252%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium",children:"Admin"}),b.jsx("p",{"trae-inspector-start-line":"81","trae-inspector-start-column":"12","trae-inspector-end-line":"81","trae-inspector-end-column":"64","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Super%20Admin%22%2C%22textStartLine%22%3A%2281%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%2281%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-blue-200",children:"Super Admin"})]})]}),b.jsxs("button",{"trae-inspector-start-line":"84","trae-inspector-start-column":"8","trae-inspector-end-line":"90","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:n,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-red-500/80 hover:bg-red-600 rounded-lg transition-colors text-sm",children:[b.jsx(UB,{className:"h-4 w-4"}),b.jsx("span",{"trae-inspector-start-line":"89","trae-inspector-start-column":"10","trae-inspector-end-line":"89","trae-inspector-end-column":"29","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logout%22%2C%22textStartLine%22%3A%2289%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2289%22%2C%22textEndColumn%22%3A%2222%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Logout"})]})]})]})},Kz=()=>{const{user:s}=x0();return b.jsxs("header",{"trae-inspector-start-line":"9","trae-inspector-start-column":"4","trae-inspector-end-line":"42","trae-inspector-end-column":"13","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white h-16 border-b border-gray-200 flex items-center justify-between px-6 sticky top-0 z-10",children:[b.jsx("div",{"trae-inspector-start-line":"10","trae-inspector-start-column":"6","trae-inspector-end-line":"21","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center flex-1",children:b.jsxs("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"8","trae-inspector-end-line":"20","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative w-96",children:[b.jsx("div",{"trae-inspector-start-line":"12","trae-inspector-start-column":"10","trae-inspector-end-line":"14","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(o1,{className:"h-5 w-5 text-gray-400"})}),b.jsx("input",{"trae-inspector-start-line":"15","trae-inspector-start-column":"10","trae-inspector-end-line":"19","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-full leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition duration-150 ease-in-out",placeholder:"Search..."})]})}),b.jsxs("div",{"trae-inspector-start-line":"23","trae-inspector-start-column":"6","trae-inspector-end-line":"41","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4",children:[b.jsxs("button",{"trae-inspector-start-line":"24","trae-inspector-start-column":"8","trae-inspector-end-line":"27","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[b.jsx(uB,{className:"h-6 w-6"}),b.jsx("span",{"trae-inspector-start-line":"26","trae-inspector-start-column":"10","trae-inspector-end-line":"26","trae-inspector-end-column":"114","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"})]}),b.jsxs("div",{"trae-inspector-start-line":"29","trae-inspector-start-column":"8","trae-inspector-end-line":"40","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-3 pl-4 border-l border-gray-200",children:[b.jsx("span",{"trae-inspector-start-line":"30","trae-inspector-start-column":"10","trae-inspector-end-line":"32","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-700",children:(s==null?void 0:s.email)||"Admin"}),b.jsx("div",{"trae-inspector-start-line":"33","trae-inspector-start-column":"10","trae-inspector-end-line":"39","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:s!=null&&s.photoURL?b.jsx("img",{"trae-inspector-start-line":"35","trae-inspector-start-column":"14","trae-inspector-end-line":"35","trae-inspector-end-column":"94","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:s.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):b.jsx(KR,{className:"h-5 w-5 text-gray-500"})})]})]})]})},_a=({children:s})=>b.jsxs("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"4","trae-inspector-end-line":"19","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen bg-gray-50 flex",children:[b.jsx(qz,{}),b.jsxs("div",{"trae-inspector-start-line":"13","trae-inspector-start-column":"6","trae-inspector-end-line":"18","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 ml-64 flex flex-col",children:[b.jsx(Kz,{}),b.jsx("main",{"trae-inspector-start-line":"15","trae-inspector-start-column":"8","trae-inspector-end-line":"17","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 p-6 overflow-auto",children:s})]})]}),xa=({children:s})=>{const{user:e,loading:t,setUser:n,setLoading:r,checkUserRole:i}=x0();return K.useEffect(()=>{const o=UU(gF,async u=>{n(u),u&&await i(u.uid),r(!1)});return()=>o()},[n,r,i]),t?b.jsx("div",{"trae-inspector-start-line":"24","trae-inspector-start-column":"6","trae-inspector-end-line":"26","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/ProtectedRoute.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen flex items-center justify-center bg-gray-50",children:b.jsx("div",{"trae-inspector-start-line":"25","trae-inspector-start-column":"8","trae-inspector-end-line":"25","trae-inspector-end-column":"105","trae-inspector-file-path":"src/components/ProtectedRoute.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?b.jsx(b.Fragment,{children:s}):b.jsx(XE,{to:"/login",replace:!0})},Qz=()=>{const[s,e]=K.useState(""),[t,n]=K.useState(""),[r,i]=K.useState(""),[o,u]=K.useState(!1),d=i1(),{checkUserRole:h}=x0(),f=async g=>{g.preventDefault(),i(""),u(!0);try{const w=await OU(gF,s,t);await h(w.user.uid),d("/dashboard")}catch(w){i("Failed to login. Please check your credentials."),console.error(w)}finally{u(!1)}};return b.jsxs("div",{"trae-inspector-start-line":"34","trae-inspector-start-column":"4","trae-inspector-end-line":"114","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[b.jsxs("div",{"trae-inspector-start-line":"35","trae-inspector-start-column":"6","trae-inspector-end-line":"47","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"sm:mx-auto sm:w-full sm:max-w-md",children:[b.jsx("div",{"trae-inspector-start-line":"36","trae-inspector-start-column":"8","trae-inspector-end-line":"40","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-center",children:b.jsx("div",{"trae-inspector-start-line":"37","trae-inspector-start-column":"10","trae-inspector-end-line":"39","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-600 p-2 rounded-full",children:b.jsx(IB,{className:"h-10 w-10 text-white"})})}),b.jsx("h2",{"trae-inspector-start-line":"41","trae-inspector-start-column":"8","trae-inspector-end-line":"43","trae-inspector-end-column":"13","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22StudentMATE%20Admin%22%2C%22textStartLine%22%3A%2241%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%2243%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"StudentMATE Admin"}),b.jsx("p",{"trae-inspector-start-line":"44","trae-inspector-start-column":"8","trae-inspector-end-line":"46","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Sign%20in%20to%20access%20the%20control%20panel%22%2C%22textStartLine%22%3A%2244%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%2246%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access the control panel"})]}),b.jsx("div",{"trae-inspector-start-line":"49","trae-inspector-start-column":"6","trae-inspector-end-line":"113","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:b.jsx("div",{"trae-inspector-start-line":"50","trae-inspector-start-column":"8","trae-inspector-end-line":"112","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:b.jsxs("form",{"trae-inspector-start-line":"51","trae-inspector-start-column":"10","trae-inspector-end-line":"111","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",onSubmit:f,children:[b.jsxs("div",{"trae-inspector-start-line":"52","trae-inspector-start-column":"12","trae-inspector-end-line":"72","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"53","trae-inspector-start-column":"14","trae-inspector-end-line":"55","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Email%20address%22%2C%22textStartLine%22%3A%2253%22%2C%22textStartColumn%22%3A%2289%22%2C%22textEndLine%22%3A%2255%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),b.jsxs("div",{"trae-inspector-start-line":"56","trae-inspector-start-column":"14","trae-inspector-end-line":"71","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 relative rounded-md shadow-sm",children:[b.jsx("div",{"trae-inspector-start-line":"57","trae-inspector-start-column":"16","trae-inspector-end-line":"59","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(WR,{className:"h-5 w-5 text-gray-400"})}),b.jsx("input",{"trae-inspector-start-line":"60","trae-inspector-start-column":"16","trae-inspector-end-line":"70","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:g=>e(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:"admin@studentmate.com"})]})]}),b.jsxs("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"12","trae-inspector-end-line":"94","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"75","trae-inspector-start-column":"14","trae-inspector-end-line":"77","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Password%22%2C%22textStartLine%22%3A%2275%22%2C%22textStartColumn%22%3A%2292%22%2C%22textEndLine%22%3A%2277%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),b.jsxs("div",{"trae-inspector-start-line":"78","trae-inspector-start-column":"14","trae-inspector-end-line":"93","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 relative rounded-md shadow-sm",children:[b.jsx("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"16","trae-inspector-end-line":"81","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(BB,{className:"h-5 w-5 text-gray-400"})}),b.jsx("input",{"trae-inspector-start-line":"82","trae-inspector-start-column":"16","trae-inspector-end-line":"92","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:g=>n(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:""})]})]}),r&&b.jsx("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"14","trae-inspector-end-line":"99","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-red-600 text-sm text-center",children:r}),b.jsx("div",{"trae-inspector-start-line":"102","trae-inspector-start-column":"12","trae-inspector-end-line":"110","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsx("button",{"trae-inspector-start-line":"103","trae-inspector-start-column":"14","trae-inspector-end-line":"109","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:o,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-75 cursor-not-allowed":""}`,children:o?"Signing in...":"Sign in"})})]})})})]})},Uu="assessments",Xz=async(s,e,t)=>{const n=Zi(cs(nn,Uu),vu("universityId","==",s),vu("moduleId","==",e),vu("type","==",t),Fu("year","desc"));return(await Zh(n)).docs.map(i=>({assessmentId:i.id,...i.data()}))},Yz=async(s=5)=>{const e=Zi(cs(nn,Uu),Fu("createdAt","desc"),vN(s));return(await Zh(e)).docs.map(n=>({assessmentId:n.id,...n.data()}))},Jz=async()=>{const s=cs(nn,Uu),e=await LE(Zi(s,vu("type","==","exam"))),t=await LE(Zi(s,vu("type","==","test"))),n=await LE(Zi(s,vu("type","==","supplementary")));return{exams:e.data().count,tests:t.data().count,supps:n.data().count}},Zz=async(s,e,t,n,r,i,o)=>{let u="";if(o){const h=Tu(ku,`assessments/${s}/${e}/${t}/${Date.now()}_${o.name}`);await ny(h,o),u=await ry(h)}return(await _0(cs(nn,Uu),{universityId:s,moduleId:e,type:t,title:n,year:r,pdfUrl:u||null,createdBy:i,createdAt:v0()})).id},eH=async s=>{if(s.pdfUrl)try{const e=Tu(ku,s.pdfUrl);await Cb(e)}catch(e){console.error("Error deleting file from storage:",e)}await A0(ho(nn,Uu,s.assessmentId))},tH=async s=>{const e=Zi(cs(nn,Uu,s,"questions"),Fu("order","asc"));return(await Zh(e)).docs.map(n=>({questionId:n.id,...n.data()}))},HP=async(s,e,t,n,r,i,o,u,d)=>{let h="";if(r){const g=Tu(ku,`questions/${s}/${Date.now()}_content_${r.name}`);await ny(g,r),h=await ry(g)}let f="";if(o){const g=Tu(ku,`questions/${s}/${Date.now()}_answer_${o.name}`);await ny(g,o),f=await ry(g)}await _0(cs(nn,Uu,s,"questions"),{title:e,marks:t,order:n,contentUrl:h||null,content:i||null,answerUrl:f||null,answerText:null,videoUrl:d||null,createdAt:v0()})},nH=async(s,e)=>{if(e.contentUrl)try{const t=Tu(ku,e.contentUrl);await Cb(t)}catch(t){console.error("Error deleting content image",t)}if(e.answerUrl)try{const t=Tu(ku,e.answerUrl);await Cb(t)}catch(t){console.error("Error deleting answer image",t)}await A0(ho(nn,Uu,s,"questions",e.questionId))},R1="universities",s2=async()=>{const s=Zi(cs(nn,R1),Fu("name"));return(await Zh(s)).docs.map(t=>({universityId:t.id,...t.data()}))},rH=async(s,e,t)=>{let n="";if(t){const i=Tu(ku,`university-logos/${Date.now()}_${t.name}`);await ny(i,t),n=await ry(i)}return(await _0(cs(nn,R1),{name:s,code:e,logoUrl:n,createdAt:v0()})).id},sH=async(s,e,t)=>{let n={...e};if(t){const r=Tu(ku,`university-logos/${Date.now()}_${t.name}`);await ny(r,t),n.logoUrl=await ry(r)}await oF(ho(nn,R1,s),n)},iH=async s=>{await A0(ho(nn,R1,s))},tA=43200,WP=1440,GP=Symbol.for("constructDateFrom");function yF(s,e){return typeof s=="function"?s(e):s&&typeof s=="object"&&GP in s?s[GP](e):s instanceof Date?new s.constructor(e):new Date(e)}function Iu(s,e){return yF(s,s)}let aH={};function oH(){return aH}function qP(s){const e=Iu(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function wF(s,...e){const t=yF.bind(null,s||e.find(n=>typeof n=="object"));return e.map(t)}function EA(s,e){const t=+Iu(s)-+Iu(e);return t<0?-1:t>0?1:t}function lH(s){return yF(s,Date.now())}function cH(s,e,t){const[n,r]=wF(t==null?void 0:t.in,s,e),i=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return i*12+o}function uH(s){return e=>{const n=(s?Math[s]:Math.trunc)(e);return n===0?0:n}}function dH(s,e){return+Iu(s)-+Iu(e)}function hH(s,e){const t=Iu(s);return t.setHours(23,59,59,999),t}function pH(s,e){const t=Iu(s),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function fH(s,e){const t=Iu(s);return+hH(t)==+pH(t)}function mH(s,e,t){const[n,r,i]=wF(t==null?void 0:t.in,s,s,e),o=EA(r,i),u=Math.abs(cH(r,i));if(u<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*u);let d=EA(r,i)===-o;fH(n)&&u===1&&EA(n,i)===1&&(d=!1);const h=o*(u-+d);return h===0?0:h}function gH(s,e,t){const n=dH(s,e)/1e3;return uH(t==null?void 0:t.roundingMethod)(n)}const yH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wH=(s,e,t)=>{let n;const r=yH[s];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function VE(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const vH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},AH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_H={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xH={date:VE({formats:vH,defaultWidth:"full"}),time:VE({formats:AH,defaultWidth:"full"}),dateTime:VE({formats:_H,defaultWidth:"full"})},EH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bH=(s,e,t,n)=>EH[s];function ng(s){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let r;if(n==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,u=t!=null&&t.width?String(t.width):o;r=s.formattingValues[u]||s.formattingValues[o]}else{const o=s.defaultWidth,u=t!=null&&t.width?String(t.width):s.defaultWidth;r=s.values[u]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(e):e;return r[i]}}const CH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},SH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},TH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},IH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},PH=(s,e)=>{const t=Number(s),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},RH={ordinalNumber:PH,era:ng({values:CH,defaultWidth:"wide"}),quarter:ng({values:SH,defaultWidth:"wide",argumentCallback:s=>s-1}),month:ng({values:FH,defaultWidth:"wide"}),day:ng({values:TH,defaultWidth:"wide"}),dayPeriod:ng({values:kH,defaultWidth:"wide",formattingValues:IH,defaultFormattingWidth:"wide"})};function rg(s){return(e,t={})=>{const n=t.width,r=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],i=e.match(r);if(!i)return null;const o=i[0],u=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],d=Array.isArray(u)?NH(u,g=>g.test(o)):DH(u,g=>g.test(o));let h;h=s.valueCallback?s.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(o.length);return{value:h,rest:f}}}function DH(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function NH(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function MH(s){return(e,t={})=>{const n=e.match(s.matchPattern);if(!n)return null;const r=n[0],i=e.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const u=e.slice(r.length);return{value:o,rest:u}}}const LH=/^(\d+)(th|st|nd|rd)?/i,OH=/\d+/i,BH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},VH={any:[/^b/i,/^(a|c)/i]},UH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jH={any:[/1/i,/2/i,/3/i,/4/i]},$H={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},HH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},WH={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},GH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},qH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},KH={ordinalNumber:MH({matchPattern:LH,parsePattern:OH,valueCallback:s=>parseInt(s,10)}),era:rg({matchPatterns:BH,defaultMatchWidth:"wide",parsePatterns:VH,defaultParseWidth:"any"}),quarter:rg({matchPatterns:UH,defaultMatchWidth:"wide",parsePatterns:jH,defaultParseWidth:"any",valueCallback:s=>s+1}),month:rg({matchPatterns:$H,defaultMatchWidth:"wide",parsePatterns:zH,defaultParseWidth:"any"}),day:rg({matchPatterns:HH,defaultMatchWidth:"wide",parsePatterns:WH,defaultParseWidth:"any"}),dayPeriod:rg({matchPatterns:GH,defaultMatchWidth:"any",parsePatterns:qH,defaultParseWidth:"any"})},QH={code:"en-US",formatDistance:wH,formatLong:xH,formatRelative:bH,localize:RH,match:KH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function XH(s,e,t){const n=oH(),r=(t==null?void 0:t.locale)??n.locale??QH,i=2520,o=EA(s,e);if(isNaN(o))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:o}),[d,h]=wF(t==null?void 0:t.in,...o>0?[e,s]:[s,e]),f=gH(h,d),g=(qP(h)-qP(d))/1e3,w=Math.round((f-g)/60);let A;if(w<2)return t!=null&&t.includeSeconds?f<5?r.formatDistance("lessThanXSeconds",5,u):f<10?r.formatDistance("lessThanXSeconds",10,u):f<20?r.formatDistance("lessThanXSeconds",20,u):f<40?r.formatDistance("halfAMinute",0,u):f<60?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",1,u):w===0?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",w,u);if(w<45)return r.formatDistance("xMinutes",w,u);if(w<90)return r.formatDistance("aboutXHours",1,u);if(w<WP){const S=Math.round(w/60);return r.formatDistance("aboutXHours",S,u)}else{if(w<i)return r.formatDistance("xDays",1,u);if(w<tA){const S=Math.round(w/WP);return r.formatDistance("xDays",S,u)}else if(w<tA*2)return A=Math.round(w/tA),r.formatDistance("aboutXMonths",A,u)}if(A=mH(h,d),A<12){const S=Math.round(w/tA);return r.formatDistance("xMonths",S,u)}else{const S=A%12,C=Math.trunc(A/12);return S<3?r.formatDistance("aboutXYears",C,u):S<9?r.formatDistance("overXYears",C,u):r.formatDistance("almostXYears",C+1,u)}}function YH(s,e){return XH(s,lH(s),e)}const UE=({title:s,value:e,icon:t,color:n})=>b.jsxs("div",{"trae-inspector-start-line":"16","trae-inspector-start-column":"2","trae-inspector-end-line":"24","trae-inspector-end-column":"8","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-6 flex items-center space-x-4",children:[b.jsx("div",{"trae-inspector-start-line":"17","trae-inspector-start-column":"4","trae-inspector-end-line":"19","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`p-4 rounded-lg ${n}`,children:b.jsx(t,{className:"h-6 w-6 text-white"})}),b.jsxs("div",{"trae-inspector-start-line":"20","trae-inspector-start-column":"4","trae-inspector-end-line":"23","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("h3",{"trae-inspector-start-line":"21","trae-inspector-start-column":"6","trae-inspector-end-line":"21","trae-inspector-end-column":"67","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:e}),b.jsx("p",{"trae-inspector-start-line":"22","trae-inspector-start-column":"6","trae-inspector-end-line":"22","trae-inspector-end-column":"54","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500",children:s})]})]}),JH=()=>{const[s,e]=K.useState([]),[t,n]=K.useState({exams:0,tests:0,supps:0}),[r,i]=K.useState([]),[o,u]=K.useState(!0);return K.useEffect(()=>{(async()=>{try{const[h,f,g]=await Promise.all([Yz(),Jz(),s2()]);e(h),n(f),i(g)}catch(h){console.error("Error loading dashboard data:",h)}finally{u(!1)}})()},[]),b.jsxs("div",{"trae-inspector-start-line":"54","trae-inspector-start-column":"4","trae-inspector-end-line":"161","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[b.jsxs("div",{"trae-inspector-start-line":"55","trae-inspector-start-column":"6","trae-inspector-end-line":"70","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center",children:[b.jsx("h1",{"trae-inspector-start-line":"56","trae-inspector-start-column":"8","trae-inspector-end-line":"56","trae-inspector-end-column":"77","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Admin%20Dashboard%22%2C%22textStartLine%22%3A%2256%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2256%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),b.jsxs("div",{"trae-inspector-start-line":"57","trae-inspector-start-column":"8","trae-inspector-end-line":"69","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-2 bg-white rounded-lg p-1 shadow-sm overflow-x-auto max-w-md",children:[r.slice(0,5).map(d=>b.jsx("button",{"trae-inspector-start-line":"59","trae-inspector-start-column":"12","trae-inspector-end-line":"64","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-4 py-1.5 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 whitespace-nowrap",children:d.code},d.universityId)),b.jsxs(a_,{to:"/universities",className:"px-4 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-md whitespace-nowrap flex items-center",children:["View All ",b.jsx(aB,{className:"ml-1 h-3 w-3"})]})]})]}),b.jsxs("div",{"trae-inspector-start-line":"73","trae-inspector-start-column":"6","trae-inspector-end-line":"92","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[b.jsx(UE,{title:"Total Exams",value:t.exams,icon:fB,color:"bg-blue-500"}),b.jsx(UE,{title:"Total Tests",value:t.tests,icon:Hg,color:"bg-orange-500"}),b.jsx(UE,{title:"Supp. Exams",value:t.supps,icon:EB,color:"bg-green-500"})]}),b.jsx("div",{"trae-inspector-start-line":"94","trae-inspector-start-column":"6","trae-inspector-end-line":"160","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:b.jsxs("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"8","trae-inspector-end-line":"159","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"lg:col-span-3 bg-white rounded-xl shadow-sm overflow-hidden",children:[b.jsxs("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"10","trae-inspector-end-line":"102","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[b.jsx("h2",{"trae-inspector-start-line":"98","trae-inspector-start-column":"12","trae-inspector-end-line":"98","trae-inspector-end-column":"71","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Recent%20Uploads%22%2C%22textStartLine%22%3A%2298%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%2298%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-bold text-gray-900",children:"Recent Uploads"}),b.jsx(a_,{to:"/exams",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:"+ Manage Assessments"})]}),b.jsx("div",{"trae-inspector-start-line":"103","trae-inspector-start-column":"10","trae-inspector-end-line":"158","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:b.jsxs("table",{"trae-inspector-start-line":"104","trae-inspector-start-column":"12","trae-inspector-end-line":"157","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[b.jsx("thead",{"trae-inspector-start-line":"105","trae-inspector-start-column":"14","trae-inspector-end-line":"113","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:b.jsxs("tr",{"trae-inspector-start-line":"106","trae-inspector-start-column":"16","trae-inspector-end-line":"112","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("th",{"trae-inspector-start-line":"107","trae-inspector-start-column":"18","trae-inspector-end-line":"107","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Type%22%2C%22textStartLine%22%3A%22107%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Type"}),b.jsx("th",{"trae-inspector-start-line":"108","trae-inspector-start-column":"18","trae-inspector-end-line":"108","trae-inspector-end-column":"54","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22108%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22108%22%2C%22textEndColumn%22%3A%2249%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Title"}),b.jsx("th",{"trae-inspector-start-line":"109","trae-inspector-start-column":"18","trae-inspector-end-line":"109","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22109%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22109%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Year"}),b.jsx("th",{"trae-inspector-start-line":"110","trae-inspector-start-column":"18","trae-inspector-end-line":"110","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Date%22%2C%22textStartLine%22%3A%22110%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22110%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Date"}),b.jsx("th",{"trae-inspector-start-line":"111","trae-inspector-start-column":"18","trae-inspector-end-line":"111","trae-inspector-end-column":"59","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Created%20By%22%2C%22textStartLine%22%3A%22111%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22111%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Created By"})]})}),b.jsx("tbody",{"trae-inspector-start-line":"114","trae-inspector-start-column":"14","trae-inspector-end-line":"156","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:o?b.jsx("tr",{"trae-inspector-start-line":"116","trae-inspector-start-column":"18","trae-inspector-end-line":"118","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsx("td",{"trae-inspector-start-line":"117","trae-inspector-start-column":"20","trae-inspector-end-line":"117","trae-inspector-end-column":"99","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22117%22%2C%22textStartColumn%22%3A%2284%22%2C%22textEndLine%22%3A%22117%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):s.length===0?b.jsx("tr",{"trae-inspector-start-line":"120","trae-inspector-start-column":"18","trae-inspector-end-line":"125","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsxs("td",{"trae-inspector-start-line":"121","trae-inspector-start-column":"20","trae-inspector-end-line":"124","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500 py-10",children:[b.jsx("p",{"trae-inspector-start-line":"122","trae-inspector-start-column":"22","trae-inspector-end-line":"122","trae-inspector-end-column":"92","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20recent%20uploads%22%2C%22textStartLine%22%3A%22122%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22122%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-medium text-gray-900",children:"No recent uploads"}),b.jsx("p",{"trae-inspector-start-line":"123","trae-inspector-start-column":"22","trae-inspector-end-line":"123","trae-inspector-end-column":"118","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Start%20by%20adding%20universities%2C%20modules%2C%20and%20assessments.%22%2C%22textStartLine%22%3A%22123%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22123%22%2C%22textEndColumn%22%3A%22114%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500",children:"Start by adding universities, modules, and assessments."})]})}):s.map(d=>{var h,f;return b.jsxs("tr",{"trae-inspector-start-line":"128","trae-inspector-start-column":"20","trae-inspector-end-line":"153","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50 transition-colors",children:[b.jsx("td",{"trae-inspector-start-line":"129","trae-inspector-start-column":"22","trae-inspector-end-line":"137","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-gray-900 capitalize",children:b.jsx("span",{"trae-inspector-start-line":"130","trae-inspector-start-column":"24","trae-inspector-end-line":"136","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`px-2 py-1 rounded-full text-xs ${d.type==="exam"?"bg-blue-100 text-blue-800":d.type==="test"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:d.type})}),b.jsx("td",{"trae-inspector-start-line":"138","trae-inspector-start-column":"22","trae-inspector-end-line":"140","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:b.jsx("div",{"trae-inspector-start-line":"139","trae-inspector-start-column":"24","trae-inspector-end-line":"139","trae-inspector-end-column":"91","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-bold text-gray-900",children:d.title})}),b.jsx("td",{"trae-inspector-start-line":"141","trae-inspector-start-column":"22","trae-inspector-end-line":"141","trae-inspector-end-column":"86","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:d.year}),b.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:b.jsx("div",{"trae-inspector-start-line":"143","trae-inspector-start-column":"24","trae-inspector-end-line":"145","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-900",children:(h=d.createdAt)!=null&&h.seconds?new Date(d.createdAt.seconds*1e3).toLocaleDateString():"Just now"})}),b.jsxs("td",{"trae-inspector-start-line":"147","trae-inspector-start-column":"22","trae-inspector-end-line":"152","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500 flex items-center space-x-2",children:[b.jsx("span",{"trae-inspector-start-line":"148","trae-inspector-start-column":"24","trae-inspector-end-line":"148","trae-inspector-end-column":"67","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:d.createdBy.split("@")[0]}),b.jsx("span",{"trae-inspector-start-line":"149","trae-inspector-start-column":"24","trae-inspector-end-line":"151","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-400",children:(f=d.createdAt)!=null&&f.seconds?YH(new Date(d.createdAt.seconds*1e3),{addSuffix:!0}):"now"})]})]},d.assessmentId)})})]})})]})})]})},E0=({isOpen:s,onClose:e,title:t,children:n})=>s?b.jsx("div",{"trae-inspector-start-line":"15","trae-inspector-start-column":"4","trae-inspector-end-line":"40","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-50 overflow-y-auto",children:b.jsxs("div",{"trae-inspector-start-line":"16","trae-inspector-start-column":"6","trae-inspector-end-line":"39","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[b.jsx("div",{"trae-inspector-start-line":"17","trae-inspector-start-column":"8","trae-inspector-end-line":"19","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:b.jsx("div",{"trae-inspector-start-line":"18","trae-inspector-start-column":"10","trae-inspector-end-line":"18","trae-inspector-end-column":"91","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),b.jsx("span",{"trae-inspector-start-line":"21","trae-inspector-start-column":"8","trae-inspector-end-line":"21","trae-inspector-end-column":"110","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%2221%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%2221%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),b.jsx("div",{"trae-inspector-start-line":"23","trae-inspector-start-column":"8","trae-inspector-end-line":"38","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:b.jsxs("div",{"trae-inspector-start-line":"24","trae-inspector-start-column":"10","trae-inspector-end-line":"37","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[b.jsxs("div",{"trae-inspector-start-line":"25","trae-inspector-start-column":"12","trae-inspector-end-line":"35","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-start mb-4",children:[b.jsx("h3",{"trae-inspector-start-line":"26","trae-inspector-start-column":"14","trae-inspector-end-line":"28","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:t}),b.jsx("button",{"trae-inspector-start-line":"29","trae-inspector-start-column":"14","trae-inspector-end-line":"34","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:e,className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none",children:b.jsx(ZE,{className:"h-6 w-6"})})]}),n]})})]})}):null,ZH=()=>{const[s,e]=K.useState([]),[t,n]=K.useState(!0),[r,i]=K.useState(!1),[o,u]=K.useState(""),[d,h]=K.useState(null),[f,g]=K.useState(""),[w,A]=K.useState(""),[S,C]=K.useState(null),[T,P]=K.useState(!1),O=async()=>{try{const D=await s2();e(D)}catch(D){console.error("Error fetching universities:",D)}finally{n(!1)}};K.useEffect(()=>{O()},[]);const N=D=>{D?(h(D),g(D.name),A(D.code)):(h(null),g(""),A("")),C(null),i(!0)},j=async D=>{D.preventDefault(),P(!0);try{d?await sH(d.universityId,{name:f,code:w},S):await rH(f,w,S),i(!1),O()}catch(R){console.error("Error saving university:",R)}finally{P(!1)}},z=async D=>{if(window.confirm("Are you sure you want to delete this university?"))try{await iH(D),O()}catch(R){console.error("Error deleting university:",R)}},W=s.filter(D=>D.name.toLowerCase().includes(o.toLowerCase())||D.code.toLowerCase().includes(o.toLowerCase()));return b.jsxs("div",{"trae-inspector-start-line":"85","trae-inspector-start-column":"4","trae-inspector-end-line":"214","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsxs("div",{"trae-inspector-start-line":"86","trae-inspector-start-column":"6","trae-inspector-end-line":"95","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{"trae-inspector-start-line":"87","trae-inspector-start-column":"8","trae-inspector-end-line":"87","trae-inspector-end-column":"81","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Universities%22%2C%22textStartLine%22%3A%2287%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2287%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Manage Universities"}),b.jsxs("button",{"trae-inspector-start-line":"88","trae-inspector-start-column":"8","trae-inspector-end-line":"94","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>N(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[b.jsx(a0,{className:"h-5 w-5"}),b.jsx("span",{"trae-inspector-start-line":"93","trae-inspector-start-column":"10","trae-inspector-end-line":"93","trae-inspector-end-column":"37","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20University%22%2C%22textStartLine%22%3A%2293%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2293%22%2C%22textEndColumn%22%3A%2230%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add University"})]})]}),b.jsxs("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"6","trae-inspector-end-line":"164","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[b.jsx("div",{"trae-inspector-start-line":"98","trae-inspector-start-column":"8","trae-inspector-end-line":"111","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100",children:b.jsxs("div",{"trae-inspector-start-line":"99","trae-inspector-start-column":"10","trae-inspector-end-line":"110","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative max-w-md",children:[b.jsx("div",{"trae-inspector-start-line":"100","trae-inspector-start-column":"12","trae-inspector-end-line":"102","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(o1,{className:"h-5 w-5 text-gray-400"})}),b.jsx("input",{"trae-inspector-start-line":"103","trae-inspector-start-column":"12","trae-inspector-end-line":"109","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search universities...",value:o,onChange:D=>u(D.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})}),b.jsx("div",{"trae-inspector-start-line":"113","trae-inspector-start-column":"8","trae-inspector-end-line":"163","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:b.jsxs("table",{"trae-inspector-start-line":"114","trae-inspector-start-column":"10","trae-inspector-end-line":"162","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[b.jsx("thead",{"trae-inspector-start-line":"115","trae-inspector-start-column":"12","trae-inspector-end-line":"122","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:b.jsxs("tr",{"trae-inspector-start-line":"116","trae-inspector-start-column":"14","trae-inspector-end-line":"121","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("th",{"trae-inspector-start-line":"117","trae-inspector-start-column":"16","trae-inspector-end-line":"117","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logo%22%2C%22textStartLine%22%3A%22117%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22117%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Logo"}),b.jsx("th",{"trae-inspector-start-line":"118","trae-inspector-start-column":"16","trae-inspector-end-line":"118","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Name%22%2C%22textStartLine%22%3A%22118%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22118%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Name"}),b.jsx("th",{"trae-inspector-start-line":"119","trae-inspector-start-column":"16","trae-inspector-end-line":"119","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Code%22%2C%22textStartLine%22%3A%22119%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22119%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Code"}),b.jsx("th",{"trae-inspector-start-line":"120","trae-inspector-start-column":"16","trae-inspector-end-line":"120","trae-inspector-end-column":"65","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22120%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22120%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),b.jsx("tbody",{"trae-inspector-start-line":"123","trae-inspector-start-column":"12","trae-inspector-end-line":"161","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:t?b.jsx("tr",{"trae-inspector-start-line":"125","trae-inspector-start-column":"16","trae-inspector-end-line":"127","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsx("td",{"trae-inspector-start-line":"126","trae-inspector-start-column":"18","trae-inspector-end-line":"126","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22126%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22126%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):W.length===0?b.jsx("tr",{"trae-inspector-start-line":"129","trae-inspector-start-column":"16","trae-inspector-end-line":"131","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsx("td",{"trae-inspector-start-line":"130","trae-inspector-start-column":"18","trae-inspector-end-line":"130","trae-inspector-end-column":"108","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20universities%20found%22%2C%22textStartLine%22%3A%22130%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22130%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No universities found"})}):W.map(D=>b.jsxs("tr",{"trae-inspector-start-line":"134","trae-inspector-start-column":"18","trae-inspector-end-line":"158","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[b.jsx("td",{"trae-inspector-start-line":"135","trae-inspector-start-column":"20","trae-inspector-end-line":"141","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:D.logoUrl?b.jsx("img",{"trae-inspector-start-line":"137","trae-inspector-start-column":"24","trae-inspector-end-line":"137","trae-inspector-end-column":"109","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:D.logoUrl,alt:D.name,className:"h-10 w-10 object-contain rounded"}):b.jsx("div",{"trae-inspector-start-line":"139","trae-inspector-start-column":"24","trae-inspector-end-line":"139","trae-inspector-end-column":"139","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20Logo%22%2C%22textStartLine%22%3A%22139%22%2C%22textStartColumn%22%3A%22126%22%2C%22textEndLine%22%3A%22139%22%2C%22textEndColumn%22%3A%22133%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 text-xs",children:"No Logo"})}),b.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"20","trae-inspector-end-line":"142","trae-inspector-end-column":"95","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-gray-900",children:D.name}),b.jsx("td",{"trae-inspector-start-line":"143","trae-inspector-start-column":"20","trae-inspector-end-line":"143","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:D.code}),b.jsxs("td",{"trae-inspector-start-line":"144","trae-inspector-start-column":"20","trae-inspector-end-line":"157","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:[b.jsx("button",{"trae-inspector-start-line":"145","trae-inspector-start-column":"22","trae-inspector-end-line":"150","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>N(D),className:"text-blue-600 hover:text-blue-900",children:b.jsx(qR,{className:"h-5 w-5"})}),b.jsx("button",{"trae-inspector-start-line":"151","trae-inspector-start-column":"22","trae-inspector-end-line":"156","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(D.universityId),className:"text-red-600 hover:text-red-900",children:b.jsx(o0,{className:"h-5 w-5"})})]})]},D.universityId))})]})})]}),b.jsx(E0,{isOpen:r,onClose:()=>i(!1),title:d?"Edit University":"Add University",children:b.jsxs("form",{"trae-inspector-start-line":"171","trae-inspector-start-column":"8","trae-inspector-end-line":"212","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:j,className:"space-y-4",children:[b.jsxs("div",{"trae-inspector-start-line":"172","trae-inspector-start-column":"10","trae-inspector-end-line":"182","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"173","trae-inspector-start-column":"12","trae-inspector-end-line":"173","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%20Name%22%2C%22textStartLine%22%3A%22173%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22173%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"University Name"}),b.jsx("input",{"trae-inspector-start-line":"174","trae-inspector-start-column":"12","trae-inspector-end-line":"181","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:f,onChange:D=>g(D.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"University of Pretoria"})]}),b.jsxs("div",{"trae-inspector-start-line":"183","trae-inspector-start-column":"10","trae-inspector-end-line":"193","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"184","trae-inspector-start-column":"12","trae-inspector-end-line":"184","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%20Code%22%2C%22textStartLine%22%3A%22184%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22184%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"University Code"}),b.jsx("input",{"trae-inspector-start-line":"185","trae-inspector-start-column":"12","trae-inspector-end-line":"192","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:w,onChange:D=>A(D.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"UP"})]}),b.jsxs("div",{"trae-inspector-start-line":"194","trae-inspector-start-column":"10","trae-inspector-end-line":"202","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"195","trae-inspector-start-column":"12","trae-inspector-end-line":"195","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logo%22%2C%22textStartLine%22%3A%22195%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22195%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Logo"}),b.jsx("input",{"trae-inspector-start-line":"196","trae-inspector-start-column":"12","trae-inspector-end-line":"201","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:"image/*",onChange:D=>C(D.target.files?D.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),b.jsx("div",{"trae-inspector-start-line":"203","trae-inspector-start-column":"10","trae-inspector-end-line":"211","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:b.jsx("button",{"trae-inspector-start-line":"204","trae-inspector-start-column":"12","trae-inspector-end-line":"210","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:T,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${T?"opacity-75 cursor-not-allowed":""}`,children:T?"Saving...":"Save"})})]})})]})},D1="modules",ON=async s=>{const e=Zi(cs(nn,D1),vu("universityId","==",s),Fu("code"));return(await Zh(e)).docs.map(n=>({moduleId:n.id,...n.data()}))},eW=async(s,e,t)=>(await _0(cs(nn,D1),{universityId:s,code:e,name:t,createdAt:v0()})).id,tW=async(s,e)=>{await oF(ho(nn,D1,s),e)},nW=async s=>{await A0(ho(nn,D1,s))},rW=()=>{const[s,e]=K.useState([]),[t,n]=K.useState(""),[r,i]=K.useState([]),[o,u]=K.useState(!1),[d,h]=K.useState(!1),[f,g]=K.useState(""),[w,A]=K.useState(null),[S,C]=K.useState(""),[T,P]=K.useState(""),[O,N]=K.useState(!1);K.useEffect(()=>{(async()=>{try{const U=await s2();e(U),U.length>0&&n(U[0].universityId)}catch(U){console.error("Error fetching universities:",U)}})()},[]),K.useEffect(()=>{t&&j(t)},[t]);const j=async L=>{u(!0);try{const U=await ON(L);i(U)}catch(U){console.error("Error fetching modules:",U)}finally{u(!1)}},z=L=>{L?(A(L),C(L.code),P(L.name)):(A(null),C(""),P("")),h(!0)},W=async L=>{if(L.preventDefault(),!!t){N(!0);try{w?await tW(w.moduleId,{code:S,name:T}):await eW(t,S,T),h(!1),j(t)}catch(U){console.error("Error saving module:",U)}finally{N(!1)}}},D=async L=>{if(window.confirm("Are you sure you want to delete this module?"))try{await nW(L),j(t)}catch(U){console.error("Error deleting module:",U)}},R=r.filter(L=>L.name.toLowerCase().includes(f.toLowerCase())||L.code.toLowerCase().includes(f.toLowerCase()));return b.jsxs("div",{"trae-inspector-start-line":"105","trae-inspector-start-column":"4","trae-inspector-end-line":"239","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsxs("div",{"trae-inspector-start-line":"106","trae-inspector-start-column":"6","trae-inspector-end-line":"116","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{"trae-inspector-start-line":"107","trae-inspector-start-column":"8","trae-inspector-end-line":"107","trae-inspector-end-column":"76","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Modules%22%2C%22textStartLine%22%3A%22107%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Manage Modules"}),b.jsxs("button",{"trae-inspector-start-line":"108","trae-inspector-start-column":"8","trae-inspector-end-line":"115","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(),disabled:!t,className:`bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 ${t?"":"opacity-50 cursor-not-allowed"}`,children:[b.jsx(a0,{className:"h-5 w-5"}),b.jsx("span",{"trae-inspector-start-line":"114","trae-inspector-start-column":"10","trae-inspector-end-line":"114","trae-inspector-end-column":"33","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20Module%22%2C%22textStartLine%22%3A%22114%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%22114%22%2C%22textEndColumn%22%3A%2226%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add Module"})]})]}),b.jsx("div",{"trae-inspector-start-line":"118","trae-inspector-start-column":"6","trae-inspector-end-line":"150","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:b.jsxs("div",{"trae-inspector-start-line":"119","trae-inspector-start-column":"8","trae-inspector-end-line":"149","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[b.jsxs("div",{"trae-inspector-start-line":"120","trae-inspector-start-column":"10","trae-inspector-end-line":"133","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[b.jsx("label",{"trae-inspector-start-line":"121","trae-inspector-start-column":"12","trae-inspector-end-line":"121","trae-inspector-end-column":"101","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20University%22%2C%22textStartLine%22%3A%22121%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22121%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select University"}),b.jsx("select",{"trae-inspector-start-line":"122","trae-inspector-start-column":"12","trae-inspector-end-line":"132","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:t,onChange:L=>n(L.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:s.map(L=>b.jsxs("option",{"trae-inspector-start-line":"128","trae-inspector-start-column":"16","trae-inspector-end-line":"130","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:L.universityId,children:[L.name," (",L.code,")"]},L.universityId))})]}),b.jsxs("div",{"trae-inspector-start-line":"134","trae-inspector-start-column":"10","trae-inspector-end-line":"148","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[b.jsx("label",{"trae-inspector-start-line":"135","trae-inspector-start-column":"12","trae-inspector-end-line":"135","trae-inspector-end-column":"98","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Search%20Modules%22%2C%22textStartLine%22%3A%22135%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22135%22%2C%22textEndColumn%22%3A%2290%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Modules"}),b.jsxs("div",{"trae-inspector-start-line":"136","trae-inspector-start-column":"12","trae-inspector-end-line":"147","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative",children:[b.jsx("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"14","trae-inspector-end-line":"139","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(o1,{className:"h-5 w-5 text-gray-400"})}),b.jsx("input",{"trae-inspector-start-line":"140","trae-inspector-start-column":"14","trae-inspector-end-line":"146","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search by code or name...",value:f,onChange:L=>g(L.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}),b.jsx("div",{"trae-inspector-start-line":"152","trae-inspector-start-column":"6","trae-inspector-end-line":"198","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:b.jsx("div",{"trae-inspector-start-line":"153","trae-inspector-start-column":"8","trae-inspector-end-line":"197","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:b.jsxs("table",{"trae-inspector-start-line":"154","trae-inspector-start-column":"10","trae-inspector-end-line":"196","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[b.jsx("thead",{"trae-inspector-start-line":"155","trae-inspector-start-column":"12","trae-inspector-end-line":"161","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:b.jsxs("tr",{"trae-inspector-start-line":"156","trae-inspector-start-column":"14","trae-inspector-end-line":"160","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("th",{"trae-inspector-start-line":"157","trae-inspector-start-column":"16","trae-inspector-end-line":"157","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Code%22%2C%22textStartLine%22%3A%22157%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22157%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Code"}),b.jsx("th",{"trae-inspector-start-line":"158","trae-inspector-start-column":"16","trae-inspector-end-line":"158","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Name%22%2C%22textStartLine%22%3A%22158%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22158%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Name"}),b.jsx("th",{"trae-inspector-start-line":"159","trae-inspector-start-column":"16","trae-inspector-end-line":"159","trae-inspector-end-column":"65","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22159%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22159%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),b.jsx("tbody",{"trae-inspector-start-line":"162","trae-inspector-start-column":"12","trae-inspector-end-line":"195","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:o?b.jsx("tr",{"trae-inspector-start-line":"164","trae-inspector-start-column":"16","trae-inspector-end-line":"166","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsx("td",{"trae-inspector-start-line":"165","trae-inspector-start-column":"18","trae-inspector-end-line":"165","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22165%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22165%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):R.length===0?b.jsx("tr",{"trae-inspector-start-line":"168","trae-inspector-start-column":"16","trae-inspector-end-line":"172","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsx("td",{"trae-inspector-start-line":"169","trae-inspector-start-column":"18","trae-inspector-end-line":"171","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:t?"No modules found for this university":"Please select a university"})}):R.map(L=>b.jsxs("tr",{"trae-inspector-start-line":"175","trae-inspector-start-column":"18","trae-inspector-end-line":"192","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[b.jsx("td",{"trae-inspector-start-line":"176","trae-inspector-start-column":"20","trae-inspector-end-line":"176","trae-inspector-end-column":"95","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-blue-600",children:L.code}),b.jsx("td",{"trae-inspector-start-line":"177","trae-inspector-start-column":"20","trae-inspector-end-line":"177","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-900",children:L.name}),b.jsxs("td",{"trae-inspector-start-line":"178","trae-inspector-start-column":"20","trae-inspector-end-line":"191","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:[b.jsx("button",{"trae-inspector-start-line":"179","trae-inspector-start-column":"22","trae-inspector-end-line":"184","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(L),className:"text-blue-600 hover:text-blue-900",children:b.jsx(qR,{className:"h-5 w-5"})}),b.jsx("button",{"trae-inspector-start-line":"185","trae-inspector-start-column":"22","trae-inspector-end-line":"190","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>D(L.moduleId),className:"text-red-600 hover:text-red-900",children:b.jsx(o0,{className:"h-5 w-5"})})]})]},L.moduleId))})]})})}),b.jsx(E0,{isOpen:d,onClose:()=>h(!1),title:w?"Edit Module":"Add Module",children:b.jsxs("form",{"trae-inspector-start-line":"205","trae-inspector-start-column":"8","trae-inspector-end-line":"237","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:W,className:"space-y-4",children:[b.jsxs("div",{"trae-inspector-start-line":"206","trae-inspector-start-column":"10","trae-inspector-end-line":"216","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"207","trae-inspector-start-column":"12","trae-inspector-end-line":"207","trae-inspector-end-column":"90","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Module%20Code%22%2C%22textStartLine%22%3A%22207%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22207%22%2C%22textEndColumn%22%3A%2282%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Module Code"}),b.jsx("input",{"trae-inspector-start-line":"208","trae-inspector-start-column":"12","trae-inspector-end-line":"215","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:S,onChange:L=>C(L.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"SMTH011"})]}),b.jsxs("div",{"trae-inspector-start-line":"217","trae-inspector-start-column":"10","trae-inspector-end-line":"227","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"218","trae-inspector-start-column":"12","trae-inspector-end-line":"218","trae-inspector-end-column":"90","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Module%20Name%22%2C%22textStartLine%22%3A%22218%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22218%22%2C%22textEndColumn%22%3A%2282%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Module Name"}),b.jsx("input",{"trae-inspector-start-line":"219","trae-inspector-start-column":"12","trae-inspector-end-line":"226","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:T,onChange:L=>P(L.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Introduction to Calculus"})]}),b.jsx("div",{"trae-inspector-start-line":"228","trae-inspector-start-column":"10","trae-inspector-end-line":"236","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:b.jsx("button",{"trae-inspector-start-line":"229","trae-inspector-start-column":"12","trae-inspector-end-line":"235","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:O,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${O?"opacity-75 cursor-not-allowed":""}`,children:O?"Saving...":"Save"})})]})})]})},Ur=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Sb=[.001,0,0,.001,0,0],jE=1.35,Us={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},wc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},sy="pdfjs_internal_editor_",Ke={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},at={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},sW={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Fb={TRIANGLES:1,LATTICE:2},Ln={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},bA={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Sn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Gp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},N1={ERRORS:0,WARNINGS:1,INFOS:5},iy={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},sg={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},iW={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let M1=N1.WARNINGS;function aW(s){Number.isInteger(s)&&(M1=s)}function oW(){return M1}function L1(s){M1>=N1.INFOS&&console.info(`Info: ${s}`)}function He(s){M1>=N1.WARNINGS&&console.warn(`Warning: ${s}`)}function wt(s){throw new Error(s)}function yt(s,e){s||wt(e)}function lW(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function BN(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"){if(t.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(t.tryConvertEncoding)try{s=fW(s)}catch{}}const n=e?URL.parse(s,e):URL.parse(s);return lW(n)?n:null}function VN(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&BN(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function We(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const ep=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class KP extends ep{constructor(e,t){super(e,"PasswordException"),this.code=t}}class $E extends ep{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Tb extends ep{constructor(e){super(e,"InvalidPDFException")}}class S_ extends ep{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class cW extends ep{constructor(e){super(e,"FormatError")}}class Pu extends ep{constructor(e){super(e,"AbortException")}}function uW(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&wt("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=s.subarray(r,i);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function O1(s){typeof s!="string"&&wt("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function dW(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function hW(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function pW(){try{return new Function(""),!0}catch{return!1}}class jn{static get isLittleEndian(){return We(this,"isLittleEndian",hW())}static get isEvalSupported(){return We(this,"isEvalSupported",pW())}static get isOffscreenCanvasSupported(){return We(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return We(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return We(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return We(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return We(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return We(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const zE=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var El,CA,kb;class xe{static makeHexColor(e,t,n){return`#${zE[e]}${zE[t]}${zE[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const r=e[n],i=e[n+1];e[n]=r*t[0]+i*t[2]+t[4],e[n+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],i=t[1],o=t[2],u=t[3],d=t[4],h=t[5];for(let f=0;f<6;f+=2){const g=e[n+f],w=e[n+f+1];e[n+f]=g*r+w*o+d,e[n+f+1]=g*i+w*u+h}}static applyInverseTransform(e,t){const n=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){const r=t[0],i=t[1],o=t[2],u=t[3],d=t[4],h=t[5],f=e[0],g=e[1],w=e[2],A=e[3];let S=r*f+d,C=S,T=r*w+d,P=T,O=u*g+h,N=O,j=u*A+h,z=j;if(i!==0||o!==0){const W=i*f,D=i*w,R=o*g,L=o*A;S+=R,P+=R,T+=L,C+=L,O+=W,z+=W,j+=D,N+=D}n[0]=Math.min(n[0],S,T,C,P),n[1]=Math.min(n[1],O,j,N,z),n[2]=Math.max(n[2],S,T,C,P),n[3]=Math.max(n[3],O,j,N,z)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],i=e[2],o=e[3],u=n**2+r**2,d=n*i+r*o,h=i**2+o**2,f=(u+h)/2,g=Math.sqrt(f**2-(u*h-d**2));t[0]=Math.sqrt(f+g||1),t[1]=Math.sqrt(f-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[n,i,r,o]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,n,r,i,o,u,d,h){h[0]=Math.min(h[0],e,u),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,u),h[3]=Math.max(h[3],t,d),I(this,El,kb).call(this,e,n,i,u,t,r,o,d,3*(-e+3*(n-i)+u),6*(e-2*n+i),3*(n-e),h),I(this,El,kb).call(this,e,n,i,u,t,r,o,d,3*(-t+3*(r-o)+d),6*(t-2*r+o),3*(r-t),h)}}El=new WeakSet,CA=function(e,t,n,r,i,o,u,d,h,f){if(h<=0||h>=1)return;const g=1-h,w=h*h,A=w*h,S=g*(g*(g*e+3*h*t)+3*w*n)+A*r,C=g*(g*(g*i+3*h*o)+3*w*u)+A*d;f[0]=Math.min(f[0],S),f[1]=Math.min(f[1],C),f[2]=Math.max(f[2],S),f[3]=Math.max(f[3],C)},kb=function(e,t,n,r,i,o,u,d,h,f,g,w){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&I(this,El,CA).call(this,e,t,n,r,i,o,u,d,-g/f,w);return}const A=f**2-4*g*h;if(A<0)return;const S=Math.sqrt(A),C=2*h;I(this,El,CA).call(this,e,t,n,r,i,o,u,d,(-f+S)/C,w),I(this,El,CA).call(this,e,t,n,r,i,o,u,d,(-f-S)/C,w)},F(xe,El);function fW(s){return decodeURIComponent(escape(s))}let HE=null,QP=null;function mW(s){return HE||(HE=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,QP=new Map([["","t"]])),s.replaceAll(HE,(e,t,n)=>t?t.normalize("NFKC"):QP.get(n))}function UN(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),uW(s)}const tf="pdfjs_internal_id_";function gW(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...i]=t;if(!s(n)&&!Number.isInteger(n)||!e(r))return!1;const o=i.length;let u=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;u=!1;break;default:return!1}for(const d of i)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function cr(s,e,t){return Math.min(Math.max(s,e),t)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});class ay{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(i){var d;if(!i)return;let o=null;const u=i.name;if(u==="#text")o=i.value;else if(ay.shouldBuildText(u))(d=i==null?void 0:i.attributes)!=null&&d.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const h of i.children)r(h)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class jN{static setupStorage(e,t,n,r,i){const o=r.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const u of n.children)u.attributes.value===o.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const d=u.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){const{attributes:o}=t,u=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[d,h]of Object.entries(o))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!u||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}u&&i.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var g,w;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:n});const u=i!=="richText",d=e.div;if(d.append(o),e.viewport){const A=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=A}u&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(r.children.length===0){if(r.value){const A=document.createTextNode(r.value);o.append(A),u&&ay.shouldBuildText(r.name)&&h.push(A)}return{textDivs:h}}const f=[[r,-1,o]];for(;f.length>0;){const[A,S,C]=f.at(-1);if(S+1===A.children.length){f.pop();continue}const T=A.children[++f.at(-1)[1]];if(T===null)continue;const{name:P}=T;if(P==="#text"){const N=document.createTextNode(T.value);h.push(N),C.append(N);continue}const O=(g=T==null?void 0:T.attributes)!=null&&g.xmlns?document.createElementNS(T.attributes.xmlns,P):document.createElement(P);if(C.append(O),T.attributes&&this.setAttributes({html:O,element:T,storage:t,intent:i,linkService:n}),((w=T.children)==null?void 0:w.length)>0)f.push([T,-1,O]);else if(T.value){const N=document.createTextNode(T.value);u&&ay.shouldBuildText(P)&&h.push(N),O.append(N)}}for(const A of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Ro="http://www.w3.org/2000/svg",wd=class wd{};ne(wd,"CSS",96),ne(wd,"PDF",72),ne(wd,"PDF_TO_CSS_UNITS",wd.CSS/wd.PDF);let Ru=wd;async function b0(s,e="text"){if(mg(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class C0{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=o,n*=t;const d=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,g,w,A;switch(r%=360,r<0&&(r+=360),r){case 180:f=-1,g=0,w=0,A=1;break;case 90:f=0,g=1,w=1,A=0;break;case 270:f=0,g=-1,w=-1,A=0;break;case 0:f=1,g=0,w=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(w=-w,A=-A);let S,C,T,P;f===0?(S=Math.abs(h-e[1])*n+i,C=Math.abs(d-e[0])*n+o,T=(e[3]-e[1])*n,P=(e[2]-e[0])*n):(S=Math.abs(d-e[0])*n+i,C=Math.abs(h-e[1])*n+o,T=(e[2]-e[0])*n,P=(e[3]-e[1])*n),this.transform=[f*n,g*n,w*n,A*n,S-f*n*d-w*n*h,C-g*n*d-A*n*h],this.width=T,this.height=P}get rawDims(){const e=this.viewBox;return We(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new C0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const n=[e,t];return xe.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];xe.applyTransform(t,this.transform);const n=[e[2],e[3]];return xe.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return xe.applyInverseTransform(n,this.transform),n}}class vF extends ep{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function B1(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function AF(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function yW(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function wW(s,e="document.pdf"){if(typeof s!="string")return e;if(B1(s))return He('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},i=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(i.test(o))return r(o);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const h of u)if(i.test(h))return r(h);const d=Array.from(n.searchParams.keys()).reverse();for(const h of d)if(i.test(h))return r(h)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return r(d[0])}return e}class XP{constructor(){ne(this,"started",Object.create(null));ne(this,"times",[])}time(e){e in this.started&&He(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||He(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms
`);return e.join("")}}function mg(s,e){const t=e?URL.parse(s,e):URL.parse(s);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Ei(s){s.preventDefault()}function un(s){s.preventDefault(),s.stopPropagation()}function vW(s){console.log("Deprecated API usage: "+s)}var uy;class F_{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;c(this,uy)||_(this,uy,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,uy).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(o+=f,u+=g):h==="+"&&(o-=f,u-=g),new Date(Date.UTC(n,r,i,o,u,d))}}uy=new WeakMap,F(F_,uy);function AW(s,{scale:e=1,rotation:t=0}){const{width:n,height:r}=s.attributes.style,i=[0,0,parseInt(n),parseInt(r)];return new C0({viewBox:i,userUnit:1,scale:e,rotation:t})}function S0(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(He(`Not a valid color format: "${s}"`),[0,0,0])}function _W(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,S0(n))}e.remove()}function Zt(s){const{a:e,b:t,c:n,d:r,e:i,f:o}=s.getTransform();return[e,t,n,r,i,o]}function Ea(s){const{a:e,b:t,c:n,d:r,e:i,f:o}=s.getTransform().invertSelf();return[e,t,n,r,i,o]}function Hh(s,e,t=!1,n=!0){if(e instanceof C0){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=s,u=jn.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,h=`var(--total-scale-factor) * ${i}px`,f=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,g=u?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(o.width=f,o.height=g):(o.width=g,o.height=f)}n&&s.setAttribute("data-main-rotation",e.rotation)}class ao{constructor(){const{pixelRatio:e}=ao;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,i=-1){let o=1/0,u=1/0,d=1/0;n=ao.capPixels(n,i),n>0&&(o=Math.sqrt(n/(e*t))),r!==-1&&(u=r/e,d=r/t);const h=Math.min(o,u,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Ib=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class xW{static get isDarkMode(){var e;return We(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class EW{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),We(this,"commentForegroundColor",S0(n))}}function bW(s,e,t,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return s=Math.round(s*n+r),e=Math.round(e*n+r),t=Math.round(t*n+r),[s,e,t]}function YP(s,e){const t=s[0]/255,n=s[1]/255,r=s[2]/255,i=Math.max(t,n,r),o=Math.min(t,n,r),u=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const d=i-o;switch(e[1]=u<.5?d/(i+o):d/(2-i-o),i){case t:e[0]=((n-r)/d+(n<r?6:0))*60;break;case n:e[0]=((r-t)/d+2)*60;break;case r:e[0]=((t-n)/d+4)*60;break}}e[2]=u}function Pb(s,e){const t=s[0],n=s[1],r=s[2],i=(1-Math.abs(2*r-1))*n,o=i*(1-Math.abs(t/60%2-1)),u=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+u,e[1]=o+u,e[2]=u;break;case 1:e[0]=o+u,e[1]=i+u,e[2]=u;break;case 2:e[0]=u,e[1]=i+u,e[2]=o+u;break;case 3:e[0]=u,e[1]=o+u,e[2]=i+u;break;case 4:e[0]=o+u,e[1]=u,e[2]=i+u;break;case 5:case 6:e[0]=i+u,e[1]=u,e[2]=o+u;break}}function JP(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function ZP(s,e,t){Pb(s,t),t.map(JP);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];Pb(e,t),t.map(JP);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const eR=new Map;function CW(s,e){const t=s[0]+s[1]*256+s[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=eR.get(t);if(n)return n;const r=new Float32Array(9),i=r.subarray(0,3),o=r.subarray(3,6);YP(s,o);const u=r.subarray(6,9);YP(e,u);const d=u[2]<.5,h=d?12:4.5;if(o[2]=d?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),ZP(o,u,i)<h){let f,g;d?(f=o[2],g=1):(f=0,g=o[2]);const w=.005;for(;g-f>w;){const A=o[2]=(f+g)/2;d===ZP(o,u,i)<h?f=A:g=A}o[2]=d?g:f}return Pb(o,i),n=xe.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),eR.set(t,n),n}function $N({html:s,dir:e,className:t},n){const r=document.createDocumentFragment();if(typeof s=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=s.split(/(?:\r\n?|\n)/);for(let u=0,d=o.length;u<d;++u){const h=o[u];i.append(document.createTextNode(h)),u<d-1&&i.append(document.createElement("br"))}r.append(i)}else jN.render({xfaHtml:s,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",t),n.append(r)}function zN(s){const e=new Path2D;if(!s)return e;for(let t=0,n=s.length;t<n;)switch(s[t++]){case sg.moveTo:e.moveTo(s[t++],s[t++]);break;case sg.lineTo:e.lineTo(s[t++],s[t++]);break;case sg.curveTo:e.bezierCurveTo(s[t++],s[t++],s[t++],s[t++],s[t++],s[t++]);break;case sg.quadraticCurveTo:e.quadraticCurveTo(s[t++],s[t++],s[t++],s[t++]);break;case sg.closePath:e.closePath();break;default:He(`Unrecognized drawing path operator: ${s[t-1]}`);break}return e}var Oo,Oi,mf,vc,xd,qm,HN,WN;const lt=class lt{constructor(){F(this,qm)}get pagesNumber(){return c(lt,vc)}set pagesNumber(e){c(lt,vc)!==e&&(_(lt,vc,e),e===0&&(_(lt,Oi,null),_(lt,Oo,null)))}addListener(e){c(lt,xd).push(e)}removeListener(e){const t=c(lt,xd).indexOf(e);t>=0&&c(lt,xd).splice(t,1)}movePages(e,t,n){I(this,qm,WN).call(this,!0);const r=c(lt,Oi),i=c(lt,Oo);c(lt,mf).set(i);const o=t.length,u=new Uint32Array(o);let d=0;for(let A=0;A<o;A++){const S=t[A]-1;u[A]=r[S],S<n&&(d+=1)}const h=c(lt,vc);let f=n-d;const g=h-o;f=cr(f,0,g);for(let A=0,S=0;A<h;A++)e.has(A+1)||(r[S++]=r[A]);r.copyWithin(f+o,f,g),r.set(u,f);let w=!1;for(let A=0,S=h;A<S;A++){const C=r[A];w||(w=C!==A+1),i[C-1]=A+1}I(this,qm,HN).call(this),w||(this.pagesNumber=0)}hasBeenAltered(){return c(lt,Oi)!==null}getPageMappingForSaving(){return{pageIndices:c(lt,Oo)?c(lt,Oo).map(e=>e-1):null}}getPrevPageNumber(e){return c(lt,mf)[c(lt,Oi)[e-1]-1]}getPageNumber(e){var t;return((t=c(lt,Oo))==null?void 0:t[e-1])??e}getPageId(e){var t;return((t=c(lt,Oi))==null?void 0:t[e-1])??e}static get instance(){return We(this,"instance",new lt)}getMapping(){return c(lt,Oi).subarray(0,this.pagesNumber)}};Oo=new WeakMap,Oi=new WeakMap,mf=new WeakMap,vc=new WeakMap,xd=new WeakMap,qm=new WeakSet,HN=function(){for(const e of c(lt,xd))e()},WN=function(e){if(c(lt,Oi))return;const t=c(lt,vc),n=new Uint32Array(3*t),r=_(lt,Oi,n.subarray(0,t)),i=_(lt,Oo,n.subarray(t,2*t));if(e)for(let o=0;o<t;o++)r[o]=i[o]=o+1;_(lt,mf,n.subarray(2*t))},F(lt,Oo,null),F(lt,Oi,null),F(lt,mf,null),F(lt,vc,0),F(lt,xd,[]);let oy=lt;var Ac,_c,si,ii,dy,xc,gf,yf,hy,V_,GN,fr,qN,KN,qp,gg;const Mo=class Mo{constructor(e){F(this,fr);F(this,Ac,null);F(this,_c,null);F(this,si);F(this,ii,null);F(this,dy,null);F(this,xc,null);F(this,gf,null);F(this,yf,null);_(this,si,e),c(Mo,hy)||_(Mo,hy,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=_(this,Ac,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,si)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Ei,{signal:t}),e.addEventListener("pointerdown",I(Mo,V_,GN),{signal:t}));const n=_(this,ii,document.createElement("div"));n.className="buttons",e.append(n);const r=c(this,si).toolbarPosition;if(r){const{style:i}=e,o=c(this,si)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return c(this,Ac)}hide(){var e;c(this,Ac).classList.add("hidden"),(e=c(this,_c))==null||e.hideDropdown()}show(){var e,t;c(this,Ac).classList.remove("hidden"),(e=c(this,dy))==null||e.shown(),(t=c(this,xc))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=c(this,si),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",c(Mo,hy)[e]),I(this,fr,qp).call(this,n)&&n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,ii).append(n)}async addAltText(e){const t=await e.render();I(this,fr,qp).call(this,t),c(this,ii).append(t,c(this,fr,gg)),_(this,dy,e)}addComment(e,t=null){if(c(this,xc))return;const n=e.renderForToolbar();if(!n)return;I(this,fr,qp).call(this,n);const r=_(this,gf,c(this,fr,gg));t?(c(this,ii).insertBefore(n,t),c(this,ii).insertBefore(r,t)):c(this,ii).append(n,r),_(this,xc,e),e.toolbar=this}addColorPicker(e){if(c(this,_c))return;_(this,_c,e);const t=e.renderButton();I(this,fr,qp).call(this,t),c(this,ii).append(t,c(this,fr,gg))}async addEditSignatureButton(e){const t=_(this,yf,await e.renderEditButton(c(this,si)));I(this,fr,qp).call(this,t),c(this,ii).append(t,c(this,fr,gg))}removeButton(e){var t,n;switch(e){case"comment":(t=c(this,xc))==null||t.removeToolbarCommentButton(),_(this,xc,null),(n=c(this,gf))==null||n.remove(),_(this,gf,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;const r=c(this,ii).querySelector(n);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){c(this,yf)&&(c(this,yf).title=e)}remove(){var e;c(this,Ac).remove(),(e=c(this,_c))==null||e.destroy(),_(this,_c,null)}};Ac=new WeakMap,_c=new WeakMap,si=new WeakMap,ii=new WeakMap,dy=new WeakMap,xc=new WeakMap,gf=new WeakMap,yf=new WeakMap,hy=new WeakMap,V_=new WeakSet,GN=function(e){e.stopPropagation()},fr=new WeakSet,qN=function(e){c(this,si)._focusEventsAllowed=!1,un(e)},KN=function(e){c(this,si)._focusEventsAllowed=!0,un(e)},qp=function(e){const t=c(this,si)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",I(this,fr,qN).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",I(this,fr,KN).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ei,{signal:t}),!0)},gg=function(){const e=document.createElement("div");return e.className="divider",e},F(Mo,V_),F(Mo,hy,null);let Rb=Mo;var py,Ed,Bo,Pl,QN,XN,Db;class SW{constructor(e){F(this,Pl);F(this,py,null);F(this,Ed,null);F(this,Bo);_(this,Bo,e)}show(e,t,n){const[r,i]=I(this,Pl,XN).call(this,t,n),{style:o}=c(this,Ed)||_(this,Ed,I(this,Pl,QN).call(this));e.append(c(this,Ed)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Ed).remove()}}py=new WeakMap,Ed=new WeakMap,Bo=new WeakMap,Pl=new WeakSet,QN=function(){const e=_(this,Ed,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=c(this,Bo)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Ei,{signal:t});const n=_(this,py,document.createElement("div"));return n.className="buttons",e.append(n),c(this,Bo).hasCommentManager()&&I(this,Pl,Db).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,Bo).commentSelection("floating_button")}),I(this,Pl,Db).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,Bo).highlightSelection("floating_button")}),e},XN=function(e,t){let n=0,r=0;for(const i of e){const o=i.y+i.height;if(o<n)continue;const u=i.x+(t?i.width:0);if(o>n){r=u,n=o;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,n]},Db=function(e,t,n,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const u=c(this,Bo)._signal;u instanceof AbortSignal&&!u.aborted&&(i.addEventListener("contextmenu",Ei,{signal:u}),i.addEventListener("click",r,{signal:u})),c(this,py).append(i)};function YN(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}var bd,Cd,wf,Sd;const Ct=class Ct{static initializeAndAddPointerId(e){(c(Ct,Cd)||_(Ct,Cd,new Set)).add(e)}static setPointer(e,t){c(Ct,bd)||_(Ct,bd,t),c(Ct,Sd)??_(Ct,Sd,e)}static setTimeStamp(e){_(Ct,wf,e)}static isSamePointerId(e){return c(Ct,bd)===e}static isSamePointerIdOrRemove(e){var t;return c(Ct,bd)===e?!0:((t=c(Ct,Cd))==null||t.delete(e),!1)}static isSamePointerType(e){return c(Ct,Sd)===e}static isInitializedAndDifferentPointerType(e){return c(Ct,Sd)!==null&&!Ct.isSamePointerType(e)}static isSameTimeStamp(e){return c(Ct,wf)===e}static isUsingMultiplePointers(){var e;return((e=c(Ct,Cd))==null?void 0:e.size)>=1}static clearPointerType(){_(Ct,Sd,null)}static clearPointerIds(){_(Ct,bd,NaN),_(Ct,Cd,null)}static clearTimeStamp(){_(Ct,wf,NaN)}};bd=new WeakMap,Cd=new WeakMap,wf=new WeakMap,Sd=new WeakMap,F(Ct,bd,NaN),F(Ct,Cd,null),F(Ct,wf,NaN),F(Ct,Sd,null);let Er=Ct;var U_;class FW{constructor(){F(this,U_,0)}get id(){return`${sy}${Mn(this,U_)._++}`}}U_=new WeakMap;var vf,fy,br,Af,SA;const kF=class kF{constructor(){F(this,Af);F(this,vf,UN());F(this,fy,0);F(this,br,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return We(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return I(this,Af,SA).call(this,`${t}_${n}_${r}_${i}`,e)}async getFromUrl(e){return I(this,Af,SA).call(this,e,e)}async getFromBlob(e,t){const n=await t;return I(this,Af,SA).call(this,e,n)}async getFromId(e){c(this,br)||_(this,br,new Map);const t=c(this,br).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,br)||_(this,br,new Map);let n=c(this,br).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${c(this,vf)}_${Mn(this,fy)._++}`,refCounter:1,isSvg:!1},c(this,br).set(e,n),c(this,br).set(n.id,n),n}getSvgUrl(e){const t=c(this,br).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,br)||_(this,br,new Map);const t=c(this,br).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,vf)}_`)}};vf=new WeakMap,fy=new WeakMap,br=new WeakMap,Af=new WeakSet,SA=async function(e,t){c(this,br)||_(this,br,new Map);let n=c(this,br).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,vf)}_${Mn(this,fy)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await b0(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=kF._isSVGFittingCanvas,o=new FileReader,u=new Image,d=new Promise((h,f)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,h()},o.onload=async()=>{const g=n.svgUrl=o.result;u.src=await i?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=o.onerror=f});o.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){He(r),n=null}return c(this,br).set(e,n),n&&c(this,br).set(n.id,n),n};let Nb=kF;var wn,Ec,my,Yt;class TW{constructor(e=128){F(this,wn,[]);F(this,Ec,!1);F(this,my);F(this,Yt,-1);_(this,my,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:u=!1}){if(r&&e(),c(this,Ec))return;const d={cmd:e,undo:t,post:n,type:i};if(c(this,Yt)===-1){c(this,wn).length>0&&(c(this,wn).length=0),_(this,Yt,0),c(this,wn).push(d);return}if(o&&c(this,wn)[c(this,Yt)].type===i){u&&(d.undo=c(this,wn)[c(this,Yt)].undo),c(this,wn)[c(this,Yt)]=d;return}const h=c(this,Yt)+1;h===c(this,my)?c(this,wn).splice(0,1):(_(this,Yt,h),h<c(this,wn).length&&c(this,wn).splice(h)),c(this,wn).push(d)}undo(){if(c(this,Yt)===-1)return;_(this,Ec,!0);const{undo:e,post:t}=c(this,wn)[c(this,Yt)];e(),t==null||t(),_(this,Ec,!1),_(this,Yt,c(this,Yt)-1)}redo(){if(c(this,Yt)<c(this,wn).length-1){_(this,Yt,c(this,Yt)+1),_(this,Ec,!0);const{cmd:e,post:t}=c(this,wn)[c(this,Yt)];e(),t==null||t(),_(this,Ec,!1)}}hasSomethingToUndo(){return c(this,Yt)!==-1}hasSomethingToRedo(){return c(this,Yt)<c(this,wn).length-1}cleanType(e){if(c(this,Yt)!==-1){for(let t=c(this,Yt);t>=0;t--)if(c(this,wn)[t].type!==e){c(this,wn).splice(t+1,c(this,Yt)-t),_(this,Yt,t);return}c(this,wn).length=0,_(this,Yt,-1)}}destroy(){_(this,wn,null)}}wn=new WeakMap,Ec=new WeakMap,my=new WeakMap,Yt=new WeakMap;var j_,JN;class F0{constructor(e){F(this,j_);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=jn.platform;for(const[n,r,i={}]of e)for(const o of n){const u=o.startsWith("mac+");t&&u?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!u&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(I(this,j_,JN).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:u=null}}=n;u&&!u(e,t)||(r.bind(e,...o,t)(),i||un(t))}}j_=new WeakSet,JN=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const $_=class $_{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return _W(e),We(this,"_colors",e)}convert(e){const t=S0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((i,o)=>i===t[o]))return $_._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?xe.makeHexColor(...t):e}};ne($_,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Mb=$_;var _f,_s,xf,Jt,vn,Ef,ai,bf,oi,Cr,bc,Cc,Cf,Sc,Fa,li,Fd,gy,yy,Sf,wy,Ta,Fc,Ff,Tc,ka,z_,kc,Tf,vy,Ic,Td,kf,Pc,Ay,Tn,xt,Vo,Rc,Dc,_y,If,xy,Nc,Ia,Uo,Ey,by,ci,ve,FA,Lb,ZN,eM,yg,tM,nM,rM,Ob,sM,iM,aM,oM,Mr,Do,lM,cM,Bb,uM,wg,Vb;const rf=class rf{constructor(e,t,n,r,i,o,u,d,h,f,g,w,A,S,C,T){F(this,ve);F(this,_f,new AbortController);F(this,_s,null);F(this,xf,null);F(this,Jt,new Map);F(this,vn,new Map);F(this,Ef,null);F(this,ai,null);F(this,bf,null);F(this,oi,new TW);F(this,Cr,null);F(this,bc,null);F(this,Cc,null);F(this,Cf,0);F(this,Sc,new Set);F(this,Fa,null);F(this,li,null);F(this,Fd,new Set);ne(this,"_editorUndoBar",null);F(this,gy,!1);F(this,yy,!1);F(this,Sf,!1);F(this,wy,null);F(this,Ta,null);F(this,Fc,null);F(this,Ff,null);F(this,Tc,!1);F(this,ka,null);F(this,z_,new FW);F(this,kc,!1);F(this,Tf,!1);F(this,vy,!1);F(this,Ic,null);F(this,Td,null);F(this,kf,null);F(this,Pc,null);F(this,Ay,null);F(this,Tn,Ke.NONE);F(this,xt,new Set);F(this,Vo,null);F(this,Rc,null);F(this,Dc,null);F(this,_y,null);F(this,If,null);F(this,xy,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});F(this,Nc,[0,0]);F(this,Ia,null);F(this,Uo,null);F(this,Ey,null);F(this,by,null);F(this,ci,null);const P=this._signal=c(this,_f).signal;_(this,Uo,e),_(this,Ey,t),_(this,by,n),_(this,Ef,r),_(this,Cr,i),_(this,Rc,o),_(this,If,d),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:P}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:P}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:P}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:P}),u._on("setpreference",this.onSetPreference.bind(this),{signal:P}),u._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:P}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:P}),window.addEventListener("pointerdown",()=>{_(this,Tf,!0)},{capture:!0,signal:P}),window.addEventListener("pointerup",()=>{_(this,Tf,!1)},{capture:!0,signal:P}),I(this,ve,tM).call(this),I(this,ve,oM).call(this),I(this,ve,Ob).call(this),_(this,ai,d.annotationStorage),_(this,wy,d.filterFactory),_(this,Dc,h),_(this,Ff,f||null),_(this,gy,g),_(this,yy,w),_(this,Sf,A),_(this,Ay,S||null),this.viewParameters={realScale:Ru.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=C||null,this._supportsPinchToZoom=T!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=rf.prototype,t=o=>c(o,Uo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return We(this,"_keyboardManager",new F0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&c(o,Uo).contains(u)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&c(o,Uo).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,r,i,o,u,d,h;(e=c(this,ci))==null||e.resolve(),_(this,ci,null),(t=c(this,_f))==null||t.abort(),_(this,_f,null),this._signal=null;for(const f of c(this,vn).values())f.destroy();c(this,vn).clear(),c(this,Jt).clear(),c(this,Fd).clear(),(n=c(this,Pc))==null||n.clear(),_(this,_s,null),c(this,xt).clear(),c(this,oi).destroy(),(r=c(this,Ef))==null||r.destroy(),(i=c(this,Cr))==null||i.destroy(),(o=c(this,Rc))==null||o.destroy(),(u=c(this,ka))==null||u.hide(),_(this,ka,null),(d=c(this,kf))==null||d.destroy(),_(this,kf,null),_(this,xf,null),c(this,Ta)&&(clearTimeout(c(this,Ta)),_(this,Ta,null)),c(this,Ia)&&(clearTimeout(c(this,Ia)),_(this,Ia,null)),(h=this._editorUndoBar)==null||h.destroy(),_(this,If,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,Ay)}get useNewAltTextFlow(){return c(this,yy)}get useNewAltTextWhenAddingImage(){return c(this,Sf)}get hcmFilter(){return We(this,"hcmFilter",c(this,Dc)?c(this,wy).addHCMFilter(c(this,Dc).foreground,c(this,Dc).background):"none")}get direction(){return We(this,"direction",getComputedStyle(c(this,Uo)).direction)}get _highlightColors(){return We(this,"_highlightColors",c(this,Ff)?new Map(c(this,Ff).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return We(this,"highlightColors",null);const t=new Map,n=!!c(this,Dc);for(const[r,i]of e){const o=r.endsWith("_HCM");if(n&&o){t.set(r.replace("_HCM",""),i);continue}!n&&!o&&t.set(r,i)}return We(this,"highlightColors",t)}get highlightColorNames(){return We(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),_(this,Cc,e)}setMainHighlightColorPicker(e){_(this,kf,e)}editAltText(e,t=!1){var n;(n=c(this,Ef))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!c(this,Cr)}editComment(e,t,n,r){var i;(i=c(this,Cr))==null||i.showDialog(this,e,t,n,r)}selectComment(e,t){const n=c(this,vn).get(e),r=n==null?void 0:n.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=c(this,Cr))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=c(this,Cr))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=c(this,Cr))==null||t.removeComments([e.uid])}deleteComment(e,t){const n=()=>{e.comment=t},r=()=>{var i;(i=this._editorUndoBar)==null||i.show(n,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:r,undo:n,mustExec:!0})}toggleComment(e,t,n=void 0){var r;(r=c(this,Cr))==null||r.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=c(this,Cr))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=c(this,Cr))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(c(this,vn).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await n}getSignature(e){var t;(t=c(this,Rc))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(this,Rc)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":_(this,Sf,t);break}}onPagesEdited({pagesMapper:e}){for(const r of c(this,Jt).values())r.updatePageIndex(e.getPrevPageNumber(r.pageIndex+1)-1);const t=c(this,vn),n=_(this,vn,new Map);for(const[r,i]of t){const o=e.getPrevPageNumber(r+1)-1;if(o===-1){i.destroy();continue}n.set(o,i),i.updatePageIndex(o)}}onPageChanging({pageNumber:e}){_(this,Cf,e-1)}focusMainContainer(){c(this,Uo).focus()}findParent(e,t){for(const n of c(this,vn).values()){const{x:r,y:i,width:o,height:u}=n.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+u)return n}return null}disableUserSelect(e=!1){c(this,Ey).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,Fd).add(e)}removeShouldRescale(e){c(this,Fd).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Ru.PDF_TO_CSS_UNITS;for(const n of c(this,Fd))n.onScaleChanging();(t=c(this,Cc))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:u}=n,d=n.toString(),f=I(this,ve,FA).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;n.empty();const w=I(this,ve,Lb).call(this,f),A=c(this,Tn)===Ke.NONE,S=()=>{const C=w==null?void 0:w.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),t&&(C==null||C.editComment())};if(A){this.switchToMode(Ke.HIGHLIGHT,S);return}S()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!c(this,ai))return null;const t=`${sy}${e}`,n=c(this,ai).getRawValue(t);return n&&c(this,ai).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&c(this,ai)&&!c(this,ai).has(e.id)&&c(this,ai).setValue(e.id,e)}a11yAlert(e,t=null){const n=c(this,by);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,Tc)&&(_(this,Tc,!1),I(this,ve,yg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,xt))if(t.div.contains(e)){_(this,Td,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,Td))return;const[e,t]=c(this,Td);_(this,Td,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){I(this,ve,Ob).call(this),this.setEditingState(!0)}removeEditListeners(){I(this,ve,sM).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of c(this,li))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of c(this,li))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=c(this,_s))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,xt)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of c(this,li))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){He(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const d of n){const h=await r.deserialize(d);if(!h)return;i.push(h)}const o=()=>{for(const d of i)I(this,ve,Bb).call(this,d);I(this,ve,Vb).call(this,i)},u=()=>{for(const d of i)d.remove()};this.addCommands({cmd:o,undo:u,mustExec:!0})}catch(i){He(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Tn)!==Ke.NONE&&!this.isEditorHandlingKeyboard&&rf._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Tc)&&(_(this,Tc,!1),I(this,ve,yg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(I(this,ve,nM).call(this),I(this,ve,iM).call(this),I(this,ve,Mr).call(this,{isEditing:c(this,Tn)!==Ke.NONE,isEmpty:I(this,ve,wg).call(this),hasSomethingToUndo:c(this,oi).hasSomethingToUndo(),hasSomethingToRedo:c(this,oi).hasSomethingToRedo(),hasSelectedEditor:!1})):(I(this,ve,rM).call(this),I(this,ve,aM).call(this),I(this,ve,Mr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,li)){_(this,li,e);for(const t of c(this,li))I(this,ve,Do).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,z_).id}get currentLayer(){return c(this,vn).get(c(this,Cf))}getLayer(e){return c(this,vn).get(e)}get currentPageIndex(){return c(this,Cf)}addLayer(e){c(this,vn).set(e.pageIndex,e),c(this,kc)?e.enable():e.disable()}removeLayer(e){c(this,vn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,i=!1,o=!1){var u,d,h,f,g,w;if(c(this,Tn)!==e&&!(c(this,ci)&&(await c(this,ci).promise,!c(this,ci)))){if(_(this,ci,Promise.withResolvers()),(u=c(this,Cc))==null||u.commitOrRemove(),c(this,Tn)===Ke.POPUP&&((d=c(this,Cr))==null||d.hideSidebar()),(h=c(this,Cr))==null||h.destroyPopup(),_(this,Tn,e),e===Ke.NONE){this.setEditingState(!1),I(this,ve,cM).call(this);for(const A of c(this,Jt).values())A.hideStandaloneCommentButton();(f=this._editorUndoBar)==null||f.hide(),this.toggleComment(null),c(this,ci).resolve();return}for(const A of c(this,Jt).values())A.addStandaloneCommentButton();e===Ke.SIGNATURE&&await((g=c(this,Rc))==null?void 0:g.loadSignatures()),n&&Er.clearPointerType(),this.setEditingState(!0),await I(this,ve,lM).call(this),this.unselectAll();for(const A of c(this,vn).values())A.updateMode(e);if(e===Ke.POPUP){c(this,xf)||_(this,xf,await c(this,If).getAnnotationsByType(new Set(c(this,li).map(C=>C._editorType))));const A=new Set,S=[];for(const C of c(this,Jt).values()){const{annotationElementId:T,hasComment:P,deleted:O}=C;T&&A.add(T),P&&!O&&S.push(C.getData())}for(const C of c(this,xf)){const{id:T,popupRef:P,contentsObj:O}=C;P&&(O!=null&&O.str)&&!A.has(T)&&!c(this,Sc).has(T)&&S.push(C)}(w=c(this,Cr))==null||w.showSidebar(S)}if(!t){r&&this.addNewEditorFromKeyboard(),c(this,ci).resolve();return}for(const A of c(this,Jt).values())A.uid===t?(this.setSelected(A),o?A.editComment():i?A.enterInEditMode():A.focus()):A.unselect();c(this,ci).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(this,Tn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(c(this,li)){switch(e){case at.CREATE:this.currentLayer.addNewEditor(t);return;case at.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,_y)||_(this,_y,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of c(this,xt))n.updateParams(e,t);else for(const n of c(this,li))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const o of c(this,Jt).values())o.editorType===e&&o.show(t);(((i=c(this,_y))==null?void 0:i.get(at.HIGHLIGHT_SHOW_ALL))??!0)!==t&&I(this,ve,Do).call(this,[[at.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,vy)!==e){_(this,vy,e);for(const t of c(this,vn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of c(this,Jt).values())t.pageIndex===e&&(yield t)}getEditor(e){return c(this,Jt).get(e)}addEditor(e){c(this,Jt).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(c(this,Ta)&&clearTimeout(c(this,Ta)),_(this,Ta,setTimeout(()=>{this.focusMainContainer(),_(this,Ta,null)},0))),c(this,Jt).delete(e.id),e.annotationElementId&&((t=c(this,Pc))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!c(this,Sc).has(e.annotationElementId))&&((n=c(this,ai))==null||n.remove(e.id))}addDeletedAnnotationElement(e){c(this,Sc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Sc).has(e)}removeDeletedAnnotationElement(e){c(this,Sc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,_s)!==e&&(_(this,_s,e),e&&I(this,ve,Do).call(this,e.propertiesToUpdate))}updateUI(e){c(this,ve,uM)===e&&I(this,ve,Do).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){I(this,ve,Do).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,xt).has(e)){c(this,xt).delete(e),e.unselect(),I(this,ve,Mr).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,xt).add(e),e.select(),I(this,ve,Do).call(this,e.propertiesToUpdate),I(this,ve,Mr).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=c(this,Cc))==null||t.commitOrRemove();for(const n of c(this,xt))n!==e&&n.unselect();c(this,xt).clear(),c(this,xt).add(e),e.select(),I(this,ve,Do).call(this,e.propertiesToUpdate),I(this,ve,Mr).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,xt).has(e)}get firstSelectedEditor(){return c(this,xt).values().next().value}unselect(e){e.unselect(),c(this,xt).delete(e),I(this,ve,Mr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,xt).size!==0}get isEnterHandled(){return c(this,xt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,oi).undo(),I(this,ve,Mr).call(this,{hasSomethingToUndo:c(this,oi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:I(this,ve,wg).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,oi).redo(),I(this,ve,Mr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,oi).hasSomethingToRedo(),isEmpty:I(this,ve,wg).call(this)})}addCommands(e){c(this,oi).add(e),I(this,ve,Mr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:I(this,ve,wg).call(this)})}cleanUndoStack(e){c(this,oi).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,xt)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const u of t)u.remove()},r=()=>{for(const o of t)I(this,ve,Bb).call(this,o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=c(this,_s))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,_s)||this.hasSelection}selectAll(){for(const e of c(this,xt))e.commit();I(this,ve,Vb).call(this,c(this,Jt).values())}unselectAll(){var e;if(!(c(this,_s)&&(c(this,_s).commitOrRemove(),c(this,Tn)!==Ke.NONE))&&!((e=c(this,Cc))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,xt))t.unselect();c(this,xt).clear(),I(this,ve,Mr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,Nc)[0]+=e,c(this,Nc)[1]+=t;const[r,i]=c(this,Nc),o=[...c(this,xt)],u=1e3;c(this,Ia)&&clearTimeout(c(this,Ia)),_(this,Ia,setTimeout(()=>{_(this,Ia,null),c(this,Nc)[0]=c(this,Nc)[1]=0,this.addCommands({cmd:()=>{for(const d of o)c(this,Jt).has(d.id)&&(d.translateInPage(r,i),d.translationDone())},undo:()=>{for(const d of o)c(this,Jt).has(d.id)&&(d.translateInPage(-r,-i),d.translationDone())},mustExec:!1})},u));for(const d of o)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),_(this,Fa,new Map);for(const e of c(this,xt))c(this,Fa).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Fa))return!1;this.disableUserSelect(!1);const e=c(this,Fa);_(this,Fa,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},u]of e)u.newX=r,u.newY=i,u.newPageIndex=o,t||(t=r!==u.savedX||i!==u.savedY||o!==u.savedPageIndex);if(!t)return!1;const n=(r,i,o,u)=>{if(c(this,Jt).has(r.id)){const d=c(this,vn).get(u);d?r._setParentAndPosition(d,i,o):(r.pageIndex=u,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:u}]of e)n(r,i,o,u)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:u}]of e)n(r,i,o,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,Fa))for(const n of c(this,Fa).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,xt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,_s)===e}getActive(){return c(this,_s)}getMode(){return c(this,Tn)}isEditingMode(){return c(this,Tn)!==Ke.NONE}get imageManager(){return We(this,"imageManager",new Nb)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:o}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(h,f,g,w)=>({x:(f-r)/o,y:1-(h+g-n)/i,width:w/o,height:g/i});break;case"180":u=(h,f,g,w)=>({x:1-(h+g-n)/i,y:1-(f+w-r)/o,width:g/i,height:w/o});break;case"270":u=(h,f,g,w)=>({x:1-(f+w-r)/o,y:(h-n)/i,width:w/o,height:g/i});break;default:u=(h,f,g,w)=>({x:(h-n)/i,y:(f-r)/o,width:g/i,height:w/o});break}const d=[];for(let h=0,f=t.rangeCount;h<f;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x:w,y:A,width:S,height:C}of g.getClientRects())S===0||C===0||d.push(u(w,A,S,C))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,bf)||_(this,bf,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,bf))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,bf))==null?void 0:r.get(e.data.id);if(!t)return;const n=c(this,ai).getRawValue(t);n&&(c(this,Tn)===Ke.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var i;const r=(i=c(this,Pc))==null?void 0:i.get(e);r&&(r.setCanvas(t,n),c(this,Pc).delete(e))}addMissingCanvas(e,t){(c(this,Pc)||_(this,Pc,new Map)).set(e,t)}};_f=new WeakMap,_s=new WeakMap,xf=new WeakMap,Jt=new WeakMap,vn=new WeakMap,Ef=new WeakMap,ai=new WeakMap,bf=new WeakMap,oi=new WeakMap,Cr=new WeakMap,bc=new WeakMap,Cc=new WeakMap,Cf=new WeakMap,Sc=new WeakMap,Fa=new WeakMap,li=new WeakMap,Fd=new WeakMap,gy=new WeakMap,yy=new WeakMap,Sf=new WeakMap,wy=new WeakMap,Ta=new WeakMap,Fc=new WeakMap,Ff=new WeakMap,Tc=new WeakMap,ka=new WeakMap,z_=new WeakMap,kc=new WeakMap,Tf=new WeakMap,vy=new WeakMap,Ic=new WeakMap,Td=new WeakMap,kf=new WeakMap,Pc=new WeakMap,Ay=new WeakMap,Tn=new WeakMap,xt=new WeakMap,Vo=new WeakMap,Rc=new WeakMap,Dc=new WeakMap,_y=new WeakMap,If=new WeakMap,xy=new WeakMap,Nc=new WeakMap,Ia=new WeakMap,Uo=new WeakMap,Ey=new WeakMap,by=new WeakMap,ci=new WeakMap,ve=new WeakSet,FA=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Lb=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of c(this,vn).values())if(n.hasTextLayer(e))return n;return null},ZN=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=I(this,ve,FA).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(c(this,ka)||_(this,ka,new SW(this)),c(this,ka).show(n,r,this.direction==="ltr"))},eM=function(){var i,o,u;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Vo)&&((i=c(this,ka))==null||i.hide(),_(this,Vo,null),I(this,ve,Mr).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Vo))return;const r=I(this,ve,FA).call(this,e).closest(".textLayer");if(!r){c(this,Vo)&&((o=c(this,ka))==null||o.hide(),_(this,Vo,null),I(this,ve,Mr).call(this,{hasSelectedText:!1}));return}if((u=c(this,ka))==null||u.hide(),_(this,Vo,t),I(this,ve,Mr).call(this,{hasSelectedText:!0}),!(c(this,Tn)!==Ke.HIGHLIGHT&&c(this,Tn)!==Ke.NONE)&&(c(this,Tn)===Ke.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),_(this,Tc,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=c(this,Tn)===Ke.HIGHLIGHT?I(this,ve,Lb).call(this,r):null;if(d==null||d.toggleDrawing(),c(this,Tf)){const h=new AbortController,f=this.combinedSignal(h),g=w=>{w.type==="pointerup"&&w.button!==0||(h.abort(),d==null||d.toggleDrawing(!0),w.type==="pointerup"&&I(this,ve,yg).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("blur",g,{signal:f})}else d==null||d.toggleDrawing(!0),I(this,ve,yg).call(this,"main_toolbar")}},yg=function(e=""){c(this,Tn)===Ke.HIGHLIGHT?this.highlightSelection(e):c(this,gy)&&I(this,ve,ZN).call(this)},tM=function(){document.addEventListener("selectionchange",I(this,ve,eM).bind(this),{signal:this._signal})},nM=function(){if(c(this,Fc))return;_(this,Fc,new AbortController);const e=this.combinedSignal(c(this,Fc));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},rM=function(){var e;(e=c(this,Fc))==null||e.abort(),_(this,Fc,null)},Ob=function(){if(c(this,Ic))return;_(this,Ic,new AbortController);const e=this.combinedSignal(c(this,Ic));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},sM=function(){var e;(e=c(this,Ic))==null||e.abort(),_(this,Ic,null)},iM=function(){if(c(this,bc))return;_(this,bc,new AbortController);const e=this.combinedSignal(c(this,bc));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},aM=function(){var e;(e=c(this,bc))==null||e.abort(),_(this,bc,null)},oM=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Mr=function(e){Object.entries(e).some(([n,r])=>c(this,xy)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,xy),e)}),c(this,Tn)===Ke.HIGHLIGHT&&e.hasSelectedEditor===!1&&I(this,ve,Do).call(this,[[at.HIGHLIGHT_FREE,!0]]))},Do=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},lM=async function(){if(!c(this,kc)){_(this,kc,!0);const e=[];for(const t of c(this,vn).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,Jt).values())t.enable()}},cM=function(){if(this.unselectAll(),c(this,kc)){_(this,kc,!1);for(const e of c(this,vn).values())e.disable();for(const e of c(this,Jt).values())e.disable()}},Bb=function(e){const t=c(this,vn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},uM=function(){let e=null;for(e of c(this,xt));return e},wg=function(){if(c(this,Jt).size===0)return!0;if(c(this,Jt).size===1)for(const e of c(this,Jt).values())return e.isEmpty();return!1},Vb=function(e){for(const t of c(this,xt))t.unselect();c(this,xt).clear();for(const t of e)t.isEmpty()||(c(this,xt).add(t),t.select());I(this,ve,Mr).call(this,{hasSelectedEditor:this.hasSelection})},ne(rf,"TRANSLATE_SMALL",1),ne(rf,"TRANSLATE_BIG",10);let Wh=rf;var Wn,Pa,Bi,Pf,Ra,xs,Rf,Da,Zr,jo,kd,Na,Mc,Xi,vg,TA;const Lr=class Lr{constructor(e){F(this,Xi);F(this,Wn,null);F(this,Pa,!1);F(this,Bi,null);F(this,Pf,null);F(this,Ra,null);F(this,xs,null);F(this,Rf,!1);F(this,Da,null);F(this,Zr,null);F(this,jo,null);F(this,kd,null);F(this,Na,!1);_(this,Zr,e),_(this,Na,e._uiManager.useNewAltTextFlow),c(Lr,Mc)||_(Lr,Mc,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Lr._l10n??(Lr._l10n=e)}async render(){const e=_(this,Bi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=_(this,Pf,document.createElement("span"));e.append(t),c(this,Na)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(Lr,Mc).missing),t.setAttribute("data-l10n-id",c(Lr,Mc)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,Zr)._uiManager._signal;e.addEventListener("contextmenu",Ei,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),c(this,Zr)._uiManager.editAltText(c(this,Zr)),c(this,Na)&&c(this,Zr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Xi,vg)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(_(this,Rf,!0),r(i))},{signal:n}),await I(this,Xi,TA).call(this),e}finish(){c(this,Bi)&&(c(this,Bi).focus({focusVisible:c(this,Rf)}),_(this,Rf,!1))}isEmpty(){return c(this,Na)?c(this,Wn)===null:!c(this,Wn)&&!c(this,Pa)}hasData(){return c(this,Na)?c(this,Wn)!==null||!!c(this,jo):this.isEmpty()}get guessedText(){return c(this,jo)}async setGuessedText(e){c(this,Wn)===null&&(_(this,jo,e),_(this,kd,await Lr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),I(this,Xi,TA).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,Na)||c(this,Wn)){(t=c(this,Da))==null||t.remove(),_(this,Da,null);return}if(!c(this,Da)){const n=_(this,Da,document.createElement("div"));n.className="noAltTextBadge",c(this,Zr).div.append(n)}c(this,Da).classList.toggle("hidden",!e)}serialize(e){let t=c(this,Wn);return!e&&c(this,jo)===t&&(t=c(this,kd)),{altText:t,decorative:c(this,Pa),guessedText:c(this,jo),textWithDisclaimer:c(this,kd)}}get data(){return{altText:c(this,Wn),decorative:c(this,Pa)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:i=!1}){n&&(_(this,jo,n),_(this,kd,r)),!(c(this,Wn)===e&&c(this,Pa)===t)&&(i||(_(this,Wn,e),_(this,Pa,t)),I(this,Xi,TA).call(this))}toggle(e=!1){c(this,Bi)&&(!e&&c(this,xs)&&(clearTimeout(c(this,xs)),_(this,xs,null)),c(this,Bi).disabled=!e)}shown(){c(this,Zr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Xi,vg)}})}destroy(){var e,t;(e=c(this,Bi))==null||e.remove(),_(this,Bi,null),_(this,Pf,null),_(this,Ra,null),(t=c(this,Da))==null||t.remove(),_(this,Da,null)}};Wn=new WeakMap,Pa=new WeakMap,Bi=new WeakMap,Pf=new WeakMap,Ra=new WeakMap,xs=new WeakMap,Rf=new WeakMap,Da=new WeakMap,Zr=new WeakMap,jo=new WeakMap,kd=new WeakMap,Na=new WeakMap,Mc=new WeakMap,Xi=new WeakSet,vg=function(){return c(this,Wn)&&"added"||c(this,Wn)===null&&this.guessedText&&"review"||"missing"},TA=async function(){var r,i,o;const e=c(this,Bi);if(!e)return;if(c(this,Na)){if(e.classList.toggle("done",!!c(this,Wn)),e.setAttribute("data-l10n-id",c(Lr,Mc)[c(this,Xi,vg)]),(r=c(this,Pf))==null||r.setAttribute("data-l10n-id",c(Lr,Mc)[`${c(this,Xi,vg)}-label`]),!c(this,Wn)){(i=c(this,Ra))==null||i.remove();return}}else{if(!c(this,Wn)&&!c(this,Pa)){e.classList.remove("done"),(o=c(this,Ra))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,Ra);if(!t){_(this,Ra,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,Zr).id}`;const u=100,d=c(this,Zr)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(c(this,xs)),_(this,xs,null)},{once:!0}),e.addEventListener("mouseenter",()=>{_(this,xs,setTimeout(()=>{_(this,xs,null),c(this,Ra).classList.add("show"),c(this,Zr)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),e.addEventListener("mouseleave",()=>{var h;c(this,xs)&&(clearTimeout(c(this,xs)),_(this,xs,null)),(h=c(this,Ra))==null||h.classList.remove("show")},{signal:d})}c(this,Pa)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,Wn)),t.parentNode||e.append(t);const n=c(this,Zr).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},F(Lr,Mc,null),ne(Lr,"_l10n",null);let T_=Lr;var sr,ui,Id,Lt,Cy,Lc,di,Oc,Bc,Pd,Sy,Ub;class nA{constructor(e){F(this,Sy);F(this,sr,null);F(this,ui,null);F(this,Id,!1);F(this,Lt,null);F(this,Cy,null);F(this,Lc,null);F(this,di,null);F(this,Oc,null);F(this,Bc,!1);F(this,Pd,null);_(this,Lt,e)}renderForToolbar(){const e=_(this,ui,document.createElement("button"));return e.className="comment",I(this,Sy,Ub).call(this,e,!1)}renderForStandalone(){const e=_(this,sr,document.createElement("button"));e.className="annotationCommentButton";const t=c(this,Lt).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(c(this,Lt)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=c(this,Lt).commentButtonColor;r&&(n.backgroundColor=r)}return I(this,Sy,Ub).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=c(this,sr)??c(this,ui))==null||e.focus()},0)}onUpdatedColor(){if(!c(this,sr))return;const e=c(this,Lt).commentButtonColor;e&&(c(this,sr).style.backgroundColor=e),c(this,Lt)._uiManager.updatePopupColor(c(this,Lt))}get commentButtonWidth(){var e;return(((e=c(this,sr))==null?void 0:e.getBoundingClientRect().width)??0)/c(this,Lt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,Pd))return c(this,Pd);if(!c(this,sr))return null;const{x:e,y:t,height:n}=c(this,sr).getBoundingClientRect(),{x:r,y:i,width:o,height:u}=c(this,Lt).parent.boundingClientRect;return[(e-r)/o,(t+n-i)/u]}set commentPopupPositionInLayer(e){_(this,Pd,e)}hasDefaultPopupPosition(){return c(this,Pd)===null}removeStandaloneCommentButton(){var e;(e=c(this,sr))==null||e.remove(),_(this,sr,null)}removeToolbarCommentButton(){var e;(e=c(this,ui))==null||e.remove(),_(this,ui,null)}setCommentButtonStates({selected:e,hasPopup:t}){c(this,sr)&&(c(this,sr).classList.toggle("selected",e),c(this,sr).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,r;if(t)[n,r]=t;else{[n,r]=c(this,Lt).commentButtonPosition;const{width:f,height:g,x:w,y:A}=c(this,Lt);n=w+n*f,r=A+r*g}const i=c(this,Lt).parent.boundingClientRect,{x:o,y:u,width:d,height:h}=i;c(this,Lt)._uiManager.editComment(c(this,Lt),o+n*d,u+r*h,{...e,parentDimensions:i})}finish(){c(this,ui)&&(c(this,ui).focus({focusVisible:c(this,Id)}),_(this,Id,!1))}isDeleted(){return c(this,Bc)||c(this,di)===""}isEmpty(){return c(this,di)===null}hasBeenEdited(){return this.isDeleted()||c(this,di)!==c(this,Cy)}serialize(){return this.data}get data(){return{text:c(this,di),richText:c(this,Lc),date:c(this,Oc),deleted:this.isDeleted()}}set data(e){if(e!==c(this,di)&&_(this,Lc,null),e===null){_(this,di,""),_(this,Bc,!0);return}_(this,di,e),_(this,Oc,new Date),_(this,Bc,!1)}restoreData({text:e,richText:t,date:n}){_(this,di,e),_(this,Lc,t),_(this,Oc,n),_(this,Bc,!1)}setInitialText(e,t=null){_(this,Cy,e),this.data=e,_(this,Oc,null),_(this,Lc,t)}shown(){}destroy(){var e,t;(e=c(this,ui))==null||e.remove(),_(this,ui,null),(t=c(this,sr))==null||t.remove(),_(this,sr,null),_(this,di,""),_(this,Lc,null),_(this,Oc,null),_(this,Lt,null),_(this,Id,!1),_(this,Bc,!1)}}sr=new WeakMap,ui=new WeakMap,Id=new WeakMap,Lt=new WeakMap,Cy=new WeakMap,Lc=new WeakMap,di=new WeakMap,Oc=new WeakMap,Bc=new WeakMap,Pd=new WeakMap,Sy=new WeakSet,Ub=function(e,t){if(!c(this,Lt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[c(this,Lt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=c(this,Lt)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Ei,{signal:n}),t&&(e.addEventListener("focusin",i=>{c(this,Lt)._focusEventsAllowed=!1,un(i)},{capture:!0,signal:n}),e.addEventListener("focusout",i=>{c(this,Lt)._focusEventsAllowed=!0,un(i)},{capture:!0,signal:n})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),e===c(this,ui)?this.edit():c(this,Lt).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(_(this,Id,!0),r(i))},{signal:n}),e.addEventListener("pointerenter",()=>{c(this,Lt).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{c(this,Lt).toggleComment(!1,!1)},{signal:n}),e};var Df,Rd,Fy,Ty,ky,Iy,Py,$o,Dd,zo,Nd,Ho,Du,dM,hM,pM;const IF=class IF{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:u}){F(this,Du);F(this,Df);F(this,Rd,!1);F(this,Fy,null);F(this,Ty);F(this,ky);F(this,Iy);F(this,Py);F(this,$o,null);F(this,Dd);F(this,zo,null);F(this,Nd);F(this,Ho,null);_(this,Df,e),_(this,Fy,n),_(this,Ty,t),_(this,ky,r),_(this,Iy,i),_(this,Py,o),_(this,Nd,new AbortController),_(this,Dd,AbortSignal.any([u,c(this,Nd).signal])),e.addEventListener("touchstart",I(this,Du,dM).bind(this),{passive:!1,signal:c(this,Dd)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ao.pixelRatio}destroy(){var e,t;(e=c(this,Nd))==null||e.abort(),_(this,Nd,null),(t=c(this,$o))==null||t.abort(),_(this,$o,null)}};Df=new WeakMap,Rd=new WeakMap,Fy=new WeakMap,Ty=new WeakMap,ky=new WeakMap,Iy=new WeakMap,Py=new WeakMap,$o=new WeakMap,Dd=new WeakMap,zo=new WeakMap,Nd=new WeakMap,Ho=new WeakMap,Du=new WeakSet,dM=function(e){var r,i,o;if((r=c(this,Ty))!=null&&r.call(this))return;if(e.touches.length===1){if(c(this,$o))return;const u=_(this,$o,new AbortController),d=AbortSignal.any([c(this,Dd),u.signal]),h=c(this,Df),f={capture:!0,signal:d,passive:!1},g=w=>{var A;w.pointerType==="touch"&&((A=c(this,$o))==null||A.abort(),_(this,$o,null))};h.addEventListener("pointerdown",w=>{w.pointerType==="touch"&&(un(w),g(w))},f),h.addEventListener("pointerup",g,f),h.addEventListener("pointercancel",g,f);return}if(!c(this,Ho)){_(this,Ho,new AbortController);const u=AbortSignal.any([c(this,Dd),c(this,Ho).signal]),d=c(this,Df),h={signal:u,capture:!1,passive:!1};d.addEventListener("touchmove",I(this,Du,hM).bind(this),h);const f=I(this,Du,pM).bind(this);d.addEventListener("touchend",f,h),d.addEventListener("touchcancel",f,h),h.capture=!0,d.addEventListener("pointerdown",un,h),d.addEventListener("pointermove",un,h),d.addEventListener("pointercancel",un,h),d.addEventListener("pointerup",un,h),(i=c(this,ky))==null||i.call(this)}if(un(e),e.touches.length!==2||(o=c(this,Fy))!=null&&o.call(this)){_(this,zo,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),_(this,zo,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},hM=function(e){var j;if(!c(this,zo)||e.touches.length!==2)return;un(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:u}=n,d=c(this,zo),{touch0X:h,touch0Y:f,touch1X:g,touch1Y:w}=d,A=g-h,S=w-f,C=o-r,T=u-i,P=Math.hypot(C,T)||1,O=Math.hypot(A,S)||1;if(!c(this,Rd)&&Math.abs(O-P)<=IF.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=i,d.touch1X=o,d.touch1Y=u,!c(this,Rd)){_(this,Rd,!0);return}const N=[(r+o)/2,(i+u)/2];(j=c(this,Iy))==null||j.call(this,N,O,P)},pM=function(e){var t;e.touches.length>=2||(c(this,Ho)&&(c(this,Ho).abort(),_(this,Ho,null),(t=c(this,Py))==null||t.call(this)),c(this,zo)&&(un(e),_(this,zo,null),_(this,Rd,!1)))};let k_=IF;var Md,Vi,Gt,Et,Wo,Nf,Vc,Ry,ir,Ld,Go,hi,Uc,Dy,Od,Es,Ny,Bd,qo,Ma,Mf,Lf,pi,Vd,My,H_,Be,jb,Ly,$b,kA,fM,mM,zb,IA,Hb,gM,yM,wM,Wb,vM,Gb,AM,_M,xM,qb,Ag;const qe=class qe{constructor(e){F(this,Be);F(this,Md,null);F(this,Vi,null);F(this,Gt,null);F(this,Et,null);F(this,Wo,null);F(this,Nf,!1);F(this,Vc,null);F(this,Ry,"");F(this,ir,null);F(this,Ld,null);F(this,Go,null);F(this,hi,null);F(this,Uc,null);F(this,Dy,"");F(this,Od,!1);F(this,Es,null);F(this,Ny,!1);F(this,Bd,!1);F(this,qo,!1);F(this,Ma,null);F(this,Mf,0);F(this,Lf,0);F(this,pi,null);F(this,Vd,null);ne(this,"isSelected",!1);ne(this,"_isCopy",!1);ne(this,"_editToolbar",null);ne(this,"_initialOptions",Object.create(null));ne(this,"_initialData",null);ne(this,"_isVisible",!0);ne(this,"_uiManager",null);ne(this,"_focusEventsAllowed",!0);F(this,My,!1);F(this,H_,qe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,o];const[u,d]=this.parentDimensions;this.x=e.x/u,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=qe.prototype._resizeWithKeyboard,t=Wh.TRANSLATE_SMALL,n=Wh.TRANSLATE_BIG;return We(this,"_resizerKeyboardManager",new F0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],qe.prototype._stopResizingWithKeyboard]]))}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return We(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new kW({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(qe._l10n??(qe._l10n=e),qe._l10nResizer||(qe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),qe._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);qe._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){wt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,My)}set _isDraggable(e){var t;_(this,My,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,H_)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(I(this,Be,Ag).call(this),(t=c(this,hi))==null||t.remove(),_(this,hi,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Od)?_(this,Od,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,o]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){I(this,Be,jb).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,Es)||_(this,Es,[this.x,this.y,this.width,this.height]),I(this,Be,jb).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c(this,Es)||_(this,Es,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:u}=this;const[d,h]=this.getBaseTranslation();o+=d,u+=h;const{style:f}=n;f.left=`${(100*o).toFixed(2)}%`,f.top=`${(100*u).toFixed(2)}%`,this._onTranslating(o,u),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,Es)&&(c(this,Es)[0]!==this.x||c(this,Es)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Es)&&(c(this,Es)[2]!==this.width||c(this,Es)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=qe,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:i,y:o,width:u,height:d}=this;if(u*=n,d*=r,i*=n,o*=r,this._mustFixPosition)switch(e){case 0:i=cr(i,0,n-u),o=cr(o,0,r-d);break;case 90:i=cr(i,0,n-d),o=cr(o,u,r);break;case 180:i=cr(i,u,n),o=cr(o,d,r);break;case 270:i=cr(i,d,n),o=cr(o,0,r-u);break}this.x=i/=n,this.y=o/=r;const[h,f]=this.getBaseTranslation();i+=h,o+=f,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return I(n=qe,Ly,$b).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return I(n=qe,Ly,$b).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,Gt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,Bd))return this._editToolbar;this._editToolbar=new Rb(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=c(this,Gt))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,Gt)||(T_.initialize(qe._l10n),_(this,Gt,new T_(this)),c(this,Md)&&(c(this,Gt).data=c(this,Md),_(this,Md,null))),c(this,Gt)}get altTextData(){var e;return(e=c(this,Gt))==null?void 0:e.data}set altTextData(e){c(this,Gt)&&(c(this,Gt).data=e)}get guessedAltText(){var e;return(e=c(this,Gt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,Gt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,Gt))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,Gt)&&!c(this,Gt).isEmpty()}hasAltTextData(){var e;return((e=c(this,Gt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=c(this,Et))==null||e.focusButton()}addCommentButton(){return this.canAddComment?c(this,Et)||_(this,Et,new nA(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(c(this,Wo)){this._uiManager.isEditingMode()&&c(this,Wo).classList.remove("hidden");return}this.hasComment&&(_(this,Wo,c(this,Et).renderForStandalone()),this.div.append(c(this,Wo)))}}removeStandaloneCommentButton(){c(this,Et).removeStandaloneCommentButton(),_(this,Wo,null)}hideStandaloneCommentButton(){var e;(e=c(this,Wo))==null||e.classList.add("hidden")}get comment(){if(!c(this,Et))return null;const{data:{richText:e,text:t,date:n,deleted:r}}=c(this,Et);return{text:t,richText:e,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){c(this,Et)||_(this,Et,new nA(this)),typeof e=="object"&&e!==null?c(this,Et).restoreData(e):c(this,Et).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(c(this,Et)||_(this,Et,new nA(this)),c(this,Et).setInitialText(e,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=c(this,Et))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=c(this,Et))==null?void 0:e.isDeleted()}get hasComment(){return!!c(this,Et)&&!c(this,Et).isEmpty()&&!c(this,Et).isDeleted()}async editComment(e){c(this,Et)||_(this,Et,new nA(this)),c(this,Et).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){c(this,Et).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,u=o+i+1,d=r-100,h=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,h,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){c(this,Et).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=c(this,Nf)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),I(this,Be,Gb).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),YN(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Vd)||_(this,Vd,new k_({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:I(this,Be,gM).bind(this),onPinching:I(this,Be,yM).bind(this),onPinchEnd:I(this,Be,wM).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=jn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(_(this,Od,!0),this._isDraggable){I(this,Be,vM).call(this,e);return}I(this,Be,Wb).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Ma)&&clearTimeout(c(this,Ma)),_(this,Ma,setTimeout(()=>{var e;_(this,Ma,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[u,d]=this.pageTranslation,h=e/r,f=t/r,g=this.x*i,w=this.y*o,A=this.width*i,S=this.height*o;switch(n){case 0:return[g+h+u,o-w-f-S+d,g+h+A+u,o-w-f+d];case 90:return[g+f+u,o-w+h+d,g+f+S+u,o-w+h+A+d];case 180:return[g-h-A+u,o-w+f+d,g-h+u,o-w+f+S+d];case 270:return[g-f-S+u,o-w-h-A+d,g-f+u,o-w-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,o]=e,u=i-n,d=o-r;switch(this.rotation){case 0:return[n,t-o,u,d];case 90:return[n,t-r,d,u];case 180:return[i,t-r,u,d];case 270:return[i,t-o,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&qe._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=c(this,Et))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:r,deleted:i,richText:o},uid:u,pageIndex:d,creationDate:h,modificationDate:f}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:h,modificationDate:n||f,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),_(this,Bd,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),_(this,Bd,!1),!0):!1}isInEditMode(){return c(this,Bd)}shouldGetKeyboardEvents(){return c(this,qo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&n>0}rebuild(){I(this,Be,Gb).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,_(r,Md,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[u,d,h,f]=r.getRectInCurrentCoords(e.rect,o);return r.x=u/i,r.y=d/o,r.width=h/i,r.height=f/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,n;if((e=c(this,Uc))==null||e.abort(),_(this,Uc,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),c(this,Ma)&&(clearTimeout(c(this,Ma)),_(this,Ma,null)),I(this,Be,Ag).call(this),this.removeEditToolbar(),c(this,pi)){for(const r of c(this,pi).values())clearTimeout(r);_(this,pi,null)}this.parent=null,(t=c(this,Vd))==null||t.destroy(),_(this,Vd,null),(n=c(this,hi))==null||n.remove(),_(this,hi,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(I(this,Be,fM).call(this),c(this,ir).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,r,i,o]=this.getPDFRect();return[qe._round(n+(i-n)*e),qe._round(r+(o-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,Et).commentPopupPositionInLayer}set commentPopupPosition(e){c(this,Et).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return c(this,Et).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,Et).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=c(this,Et))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),_(this,Go,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,ir).children;if(!c(this,Vi)){_(this,Vi,Array.from(t));const o=I(this,Be,AM).bind(this),u=I(this,Be,_M).bind(this),d=this._uiManager._signal;for(const h of c(this,Vi)){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:d}),h.addEventListener("blur",u,{signal:d}),h.addEventListener("focus",I(this,Be,xM).bind(this,f),{signal:d}),h.setAttribute("data-l10n-id",qe._l10nResizer[f])}}const n=c(this,Vi)[0];let r=0;for(const o of t){if(o===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(c(this,Vi).length/4);if(i!==r){if(i<r)for(let u=0;u<r-i;u++)c(this,ir).append(c(this,ir).firstElementChild);else if(i>r)for(let u=0;u<i-r;u++)c(this,ir).firstElementChild.before(c(this,ir).lastElementChild);let o=0;for(const u of t){const h=c(this,Vi)[o++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",qe._l10nResizer[h])}}I(this,Be,qb).call(this,0),_(this,qo,!0),c(this,ir).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,qo)&&I(this,Be,Hb).call(this,c(this,Dy),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){I(this,Be,Ag).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=c(this,Gt))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,r,i;this.isSelected&&(this.isSelected=!1,(e=c(this,ir))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=c(this,Gt))==null||i.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Ny)}set isEditing(e){_(this,Ny,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,pi)||_(this,pi,new Map);const{action:n}=e;let r=c(this,pi).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,pi).delete(n),c(this,pi).size===0&&_(this,pi,null)},qe._telemetryTimeout),c(this,pi).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),_(this,Nf,!1)}disable(){this.div&&(this.div.tabIndex=-1),_(this,Nf,!0)}updateFakeAnnotationElement(e){if(!c(this,hi)&&!this.deleted){_(this,hi,e.addFakeAnnotation(this));return}if(this.deleted){c(this,hi).remove(),_(this,hi,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,hi).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Md=new WeakMap,Vi=new WeakMap,Gt=new WeakMap,Et=new WeakMap,Wo=new WeakMap,Nf=new WeakMap,Vc=new WeakMap,Ry=new WeakMap,ir=new WeakMap,Ld=new WeakMap,Go=new WeakMap,hi=new WeakMap,Uc=new WeakMap,Dy=new WeakMap,Od=new WeakMap,Es=new WeakMap,Ny=new WeakMap,Bd=new WeakMap,qo=new WeakMap,Ma=new WeakMap,Mf=new WeakMap,Lf=new WeakMap,pi=new WeakMap,Vd=new WeakMap,My=new WeakMap,H_=new WeakMap,Be=new WeakSet,jb=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ly=new WeakSet,$b=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},kA=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},fM=function(){if(c(this,ir))return;_(this,ir,document.createElement("div")),c(this,ir).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");c(this,ir).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",I(this,Be,mM).bind(this,n),{signal:t}),r.addEventListener("contextmenu",Ei,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,ir))},mM=function(e,t){var f;t.preventDefault();const{isMac:n}=jn.platform;if(t.button!==0||t.ctrlKey&&n)return;(f=c(this,Gt))==null||f.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,_(this,Ld,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",I(this,Be,Hb).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",un,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ei,{signal:o}),_(this,Go,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{var g;i.abort(),this.parent.togglePointerEvents(!0),(g=c(this,Gt))==null||g.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,I(this,Be,IA).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},zb=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},IA=function(){if(!c(this,Go))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=c(this,Go);_(this,Go,null);const i=this.x,o=this.y,u=this.width,d=this.height;i===e&&o===t&&u===n&&d===r||this.addCommands({cmd:I(this,Be,zb).bind(this,i,o,u,d),undo:I(this,Be,zb).bind(this,e,t,n,r),mustExec:!0})},Hb=function(e,t){const[n,r]=this.parentDimensions,i=this.x,o=this.y,u=this.width,d=this.height,h=qe.MIN_SIZE/n,f=qe.MIN_SIZE/r,g=I(this,Be,kA).call(this,this.rotation),w=(he,ge)=>[g[0]*he+g[2]*ge,g[1]*he+g[3]*ge],A=I(this,Be,kA).call(this,360-this.rotation),S=(he,ge)=>[A[0]*he+A[2]*ge,A[1]*he+A[3]*ge];let C,T,P=!1,O=!1;switch(e){case"topLeft":P=!0,C=(he,ge)=>[0,0],T=(he,ge)=>[he,ge];break;case"topMiddle":C=(he,ge)=>[he/2,0],T=(he,ge)=>[he/2,ge];break;case"topRight":P=!0,C=(he,ge)=>[he,0],T=(he,ge)=>[0,ge];break;case"middleRight":O=!0,C=(he,ge)=>[he,ge/2],T=(he,ge)=>[0,ge/2];break;case"bottomRight":P=!0,C=(he,ge)=>[he,ge],T=(he,ge)=>[0,0];break;case"bottomMiddle":C=(he,ge)=>[he/2,ge],T=(he,ge)=>[he/2,0];break;case"bottomLeft":P=!0,C=(he,ge)=>[0,ge],T=(he,ge)=>[he,0];break;case"middleLeft":O=!0,C=(he,ge)=>[0,ge/2],T=(he,ge)=>[he,ge/2];break}const N=C(u,d),j=T(u,d);let z=w(...j);const W=qe._round(i+z[0]),D=qe._round(o+z[1]);let R=1,L=1,U,V;if(t.fromKeyboard)({deltaX:U,deltaY:V}=t);else{const{screenX:he,screenY:ge}=t,[ae,_e]=c(this,Ld);[U,V]=this.screenToPageTranslation(he-ae,ge-_e),c(this,Ld)[0]=he,c(this,Ld)[1]=ge}if([U,V]=S(U/n,V/r),P){const he=Math.hypot(u,d);R=L=Math.max(Math.min(Math.hypot(j[0]-N[0]-U,j[1]-N[1]-V)/he,1/u,1/d),h/u,f/d)}else O?R=cr(Math.abs(j[0]-N[0]-U),h,1)/u:L=cr(Math.abs(j[1]-N[1]-V),f,1)/d;const G=qe._round(u*R),$=qe._round(d*L);z=w(...T(G,$));const ye=W-z[0],ce=D-z[1];c(this,Es)||_(this,Es,[this.x,this.y,this.width,this.height]),this.width=G,this.height=$,this.x=ye,this.y=ce,this.setDims(),this.fixAndSetPosition(),this._onResizing()},gM=function(){var e;_(this,Go,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,Gt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},yM=function(e,t,n){let i=.7*(n/t)+1-.7;if(i===1)return;const o=I(this,Be,kA).call(this,this.rotation),u=(W,D)=>[o[0]*W+o[2]*D,o[1]*W+o[3]*D],[d,h]=this.parentDimensions,f=this.x,g=this.y,w=this.width,A=this.height,S=qe.MIN_SIZE/d,C=qe.MIN_SIZE/h;i=Math.max(Math.min(i,1/w,1/A),S/w,C/A);const T=qe._round(w*i),P=qe._round(A*i);if(T===w&&P===A)return;c(this,Es)||_(this,Es,[f,g,w,A]);const O=u(w/2,A/2),N=qe._round(f+O[0]),j=qe._round(g+O[1]),z=u(T/2,P/2);this.x=N-z[0],this.y=j-z[1],this.width=T,this.height=P,this.setDims(),this.fixAndSetPosition(),this._onResizing()},wM=function(){var e;(e=c(this,Gt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),I(this,Be,IA).call(this)},Wb=function(e){const{isMac:t}=jn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},vM=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},u=h=>{r.abort(),_(this,Vc,null),_(this,Od,!1),this._uiManager.endDragSession()||I(this,Be,Wb).call(this,h),n&&this._onStopDragging()};t&&(_(this,Mf,e.clientX),_(this,Lf,e.clientY),_(this,Vc,e.pointerId),_(this,Ry,e.pointerType),window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:g,pointerId:w}=h;if(w!==c(this,Vc)){un(h);return}const[A,S]=this.screenToPageTranslation(f-c(this,Mf),g-c(this,Lf));_(this,Mf,f),_(this,Lf,g),this._uiManager.dragSelectedEditors(A,S)},o),window.addEventListener("touchmove",un,o),window.addEventListener("pointerdown",h=>{h.pointerType===c(this,Ry)&&(c(this,Vd)||h.isPrimary)&&u(h),un(h)},o));const d=h=>{if(!c(this,Vc)||c(this,Vc)===h.pointerId){u(h);return}un(h)};window.addEventListener("pointerup",d,{signal:i}),window.addEventListener("blur",d,{signal:i})},Gb=function(){if(c(this,Uc)||!this.div)return;_(this,Uc,new AbortController);const e=this._uiManager.combinedSignal(c(this,Uc));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},AM=function(e){qe._resizerKeyboardManager.exec(this,e)},_M=function(e){var t;c(this,qo)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,ir)&&I(this,Be,Ag).call(this)},xM=function(e){_(this,Dy,c(this,qo)?e:"")},qb=function(e){if(c(this,Vi))for(const t of c(this,Vi))t.tabIndex=e},Ag=function(){_(this,qo,!1),I(this,Be,qb).call(this,-1),I(this,Be,IA).call(this)},F(qe,Ly),ne(qe,"_l10n",null),ne(qe,"_l10nResizer",null),ne(qe,"_borderLineWidth",-1),ne(qe,"_colorManager",new Mb),ne(qe,"_zIndex",1),ne(qe,"_telemetryTimeout",1e3);let Bt=qe;class kW extends Bt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const tR=3285377520,ni=4294901760,ba=65535;class EM{constructor(e){this.h1=e?e&4294967295:tR,this.h2=e?e&4294967295:tR}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let C=0,T=e.length;C<T;C++){const P=e.charCodeAt(C);P<=255?t[n++]=P:(t[n++]=P>>>8,t[n++]=P&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,i=n-r*4,o=new Uint32Array(t.buffer,0,r);let u=0,d=0,h=this.h1,f=this.h2;const g=3432918353,w=461845907,A=g&ba,S=w&ba;for(let C=0;C<r;C++)C&1?(u=o[C],u=u*g&ni|u*A&ba,u=u<<15|u>>>17,u=u*w&ni|u*S&ba,h^=u,h=h<<13|h>>>19,h=h*5+3864292196):(d=o[C],d=d*g&ni|d*A&ba,d=d<<15|d>>>17,d=d*w&ni|d*S&ba,f^=d,f=f<<13|f>>>19,f=f*5+3864292196);switch(u=0,i){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*g&ni|u*A&ba,u=u<<15|u>>>17,u=u*w&ni|u*S&ba,r&1?h^=u:f^=u}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ni|e*36045&ba,t=t*4283543511&ni|((t<<16|e>>>16)*2950163797&ni)>>>16,e^=t>>>1,e=e*444984403&ni|e*60499&ba,t=t*3301882366&ni|((t<<16|e>>>16)*3120437893&ni)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Kb=Object.freeze({map:null,hash:"",transfer:void 0});var Ud,jd,Ko,ar,W_,bM;class _F{constructor(){F(this,W_);F(this,Ud,!1);F(this,jd,null);F(this,Ko,null);F(this,ar,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=c(this,ar).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return c(this,ar).get(e)}remove(e){const t=c(this,ar).get(e);if(t!==void 0&&(t instanceof Bt&&c(this,Ko).delete(t.annotationElementId),c(this,ar).delete(e),c(this,ar).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of c(this,ar).values())if(n instanceof Bt)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=c(this,ar).get(e);let r=!1;if(n!==void 0)for(const[i,o]of Object.entries(t))n[i]!==o&&(r=!0,n[i]=o);else r=!0,c(this,ar).set(e,t);r&&I(this,W_,bM).call(this),t instanceof Bt&&((c(this,Ko)||_(this,Ko,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return c(this,ar).has(e)}get size(){return c(this,ar).size}resetModified(){c(this,Ud)&&(_(this,Ud,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new CM(this)}get serializable(){if(c(this,ar).size===0)return Kb;const e=new Map,t=new EM,n=[],r=Object.create(null);let i=!1;for(const[o,u]of c(this,ar)){const d=u instanceof Bt?u.serialize(!1,r):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(e.set(o,d),t.update(`${o}:${JSON.stringify(d)}`),i||(i=!!d.bitmap))}if(i)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Kb}get editorStats(){let e=null;const t=new Map;let n=0,r=0;for(const i of c(this,ar).values()){if(!(i instanceof Bt)){i.popup&&(i.popup.deleted?r+=1:n+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(n+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:u}=o;t.has(u)||t.set(u,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const d=e[u]||(e[u]=new Map);for(const[h,f]of Object.entries(o)){if(h==="type")continue;let g=d.get(h);g||(g=new Map,d.set(h,g));const w=g.get(f)??0;g.set(f,w+1)}}if((r>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:n}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){_(this,jd,null)}updateEditor(e,t){var r;const n=(r=c(this,Ko))==null?void 0:r.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=c(this,Ko))==null?void 0:t.get(e))||null}get modifiedIds(){if(c(this,jd))return c(this,jd);const e=[];if(c(this,Ko))for(const t of c(this,Ko).values())t.serialize()&&e.push(t.annotationElementId);return _(this,jd,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(this,ar).entries()}}Ud=new WeakMap,jd=new WeakMap,Ko=new WeakMap,ar=new WeakMap,W_=new WeakSet,bM=function(){c(this,Ud)||(_(this,Ud,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Oy;class CM extends _F{constructor(t){super();F(this,Oy);const{map:n,hash:r,transfer:i}=t.serializable,o=structuredClone(n,i?{transfer:i}:null);_(this,Oy,{map:o,hash:r,transfer:i})}get print(){wt("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Oy)}get modifiedIds(){return We(this,"modifiedIds",{ids:new Set,hash:""})}}Oy=new WeakMap;var Of;class IW{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){F(this,Of,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Of).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||c(this,Of).has(e.loadedName))){if(yt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,u=new FontFace(r,i,o);this.addNativeFontFace(u);try{await u.load(),c(this,Of).add(r),n==null||n(e)}catch{He(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}wt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw He(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return We(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return We(this,"isSyncFontLoadingSupported",Ur||jn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(yt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return We(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(j,z){return j.charCodeAt(z)<<24|j.charCodeAt(z+1)<<16|j.charCodeAt(z+2)<<8|j.charCodeAt(z+3)&255}function r(j,z,W,D){const R=j.substring(0,z),L=j.substring(z+W);return R+D+L}let i,o;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let h=0;function f(j,z){if(++h>30){He("Load test font never loaded."),z();return}if(d.font="30px "+j,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(f.bind(null,j,z))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,g.length,g);const S=16,C=1482184792;let T=n(w,S);for(i=0,o=g.length-3;i<o;i+=4)T=T-C+n(g,i)|0;i<g.length&&(T=T-C+n(g+"XXX",i)|0),w=r(w,S,4,dW(T));const P=`url(data:font/opentype;base64,${btoa(w)});`,O=`@font-face {font-family:"${g}";src:${P}}`;this.insertRule(O);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const j of[e.loadedName,g]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=j,N.append(z)}this._document.body.append(N),f(g,()=>{N.remove(),t.complete()})}}Of=new WeakMap;var St;class PW{constructor(e,t=null,n,r){F(this,St);this.compiledGlyphs=Object.create(null),_(this,St,e),this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(o){He(`getPathGenerator - ignoring character: "${o}".`)}const i=zN(r==null?void 0:r.path);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}get black(){return c(this,St).black}get bold(){return c(this,St).bold}get disableFontFace(){return c(this,St).disableFontFace??!1}set disableFontFace(e){We(this,"disableFontFace",!!e)}get fontExtraProperties(){return c(this,St).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,St).isInvalidPDFjsFont}get isType3Font(){return c(this,St).isType3Font}get italic(){return c(this,St).italic}get missingFile(){return c(this,St).missingFile}get remeasure(){return c(this,St).remeasure}get vertical(){return c(this,St).vertical}get ascent(){return c(this,St).ascent}get defaultWidth(){return c(this,St).defaultWidth}get descent(){return c(this,St).descent}get bbox(){return c(this,St).bbox}set bbox(e){We(this,"bbox",e)}get fontMatrix(){return c(this,St).fontMatrix}get fallbackName(){return c(this,St).fallbackName}get loadedName(){return c(this,St).loadedName}get mimetype(){return c(this,St).mimetype}get name(){return c(this,St).name}get data(){return c(this,St).data}clearData(){c(this,St).clearData()}get cssFontInfo(){return c(this,St).cssFontInfo}get systemFontInfo(){return c(this,St).systemFontInfo}get defaultVMetrics(){return c(this,St).defaultVMetrics}}St=new WeakMap;var Bf,Vf,By,Uf,PA;const sf=class sf{constructor(e){F(this,Uf);F(this,Bf);F(this,Vf);F(this,By);_(this,Bf,e),_(this,Vf,new DataView(c(this,Bf))),_(this,By,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const h of sf.strings){const f=t.encode(e[h]);n[h]=f,r+=4+f.length}const i=new ArrayBuffer(r),o=new Uint8Array(i),u=new DataView(i);let d=0;for(const h of sf.strings){const f=n[h],g=f.length;u.setUint32(d,g),o.set(f,d+4),d+=4+g}return yt(d===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return I(this,Uf,PA).call(this,0)}get fontWeight(){return I(this,Uf,PA).call(this,1)}get italicAngle(){return I(this,Uf,PA).call(this,2)}};Bf=new WeakMap,Vf=new WeakMap,By=new WeakMap,Uf=new WeakSet,PA=function(e){yt(e<sf.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=c(this,Vf).getUint32(t)+4;const n=c(this,Vf).getUint32(t);return c(this,By).decode(new Uint8Array(c(this,Bf),t+4,n))},ne(sf,"strings",["fontFamily","fontWeight","italicAngle"]);let I_=sf;var jc,La,$d,zd,_g;const af=class af{constructor(e){F(this,zd);F(this,jc);F(this,La);F(this,$d);_(this,jc,e),_(this,La,new DataView(c(this,jc))),_(this,$d,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const w of af.strings){const A=t.encode(e[w]);n[w]=A,r+=4+A.length}r+=4;let i,o,u=1+r;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),u+=4+i.length+4+o.length);const d=new ArrayBuffer(u),h=new Uint8Array(d),f=new DataView(d);let g=0;f.setUint8(g++,e.guessFallback?1:0),f.setUint32(g,0),g+=4,r=0;for(const w of af.strings){const A=n[w],S=A.length;r+=4+S,f.setUint32(g,S),h.set(A,g+4),g+=4+S}return f.setUint32(g-r-4,r),e.style&&(f.setUint32(g,i.length),h.set(i,g+4),g+=4+i.length,f.setUint32(g,o.length),h.set(o,g+4),g+=4+o.length),yt(g<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(g)}get guessFallback(){return c(this,La).getUint8(0)!==0}get css(){return I(this,zd,_g).call(this,0)}get loadedName(){return I(this,zd,_g).call(this,1)}get baseFontName(){return I(this,zd,_g).call(this,2)}get src(){return I(this,zd,_g).call(this,3)}get style(){let e=1;e+=4+c(this,La).getUint32(e);const t=c(this,La).getUint32(e),n=c(this,$d).decode(new Uint8Array(c(this,jc),e+4,t));e+=4+t;const r=c(this,La).getUint32(e),i=c(this,$d).decode(new Uint8Array(c(this,jc),e+4,r));return{style:n,weight:i}}};jc=new WeakMap,La=new WeakMap,$d=new WeakMap,zd=new WeakSet,_g=function(e){yt(e<af.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=c(this,La).getUint32(t)+4;const n=c(this,La).getUint32(t);return c(this,$d).decode(new Uint8Array(c(this,jc),t+4,n))},ne(af,"strings",["css","loadedName","baseFontName","src"]);let P_=af;var jf,$f,zf,Hf,bs,Oa,Vy,Ft,cn,Mi,RA,xg;const Qe=class Qe{constructor({data:e,extra:t}){F(this,cn);F(this,Oa);F(this,Vy);F(this,Ft);_(this,Oa,e),_(this,Vy,new TextDecoder),_(this,Ft,new DataView(c(this,Oa))),t&&Object.assign(this,t)}get black(){return I(this,cn,Mi).call(this,0)}get bold(){return I(this,cn,Mi).call(this,1)}get disableFontFace(){return I(this,cn,Mi).call(this,2)}get fontExtraProperties(){return I(this,cn,Mi).call(this,3)}get isInvalidPDFjsFont(){return I(this,cn,Mi).call(this,4)}get isType3Font(){return I(this,cn,Mi).call(this,5)}get italic(){return I(this,cn,Mi).call(this,6)}get missingFile(){return I(this,cn,Mi).call(this,7)}get remeasure(){return I(this,cn,Mi).call(this,8)}get vertical(){return I(this,cn,Mi).call(this,9)}get ascent(){return I(this,cn,RA).call(this,0)}get defaultWidth(){return I(this,cn,RA).call(this,1)}get descent(){return I(this,cn,RA).call(this,2)}get bbox(){let e=c(Qe,$f);if(c(this,Ft).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<4;r++)n.push(c(this,Ft).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=c(Qe,zf);if(c(this,Ft).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<6;r++)n.push(c(this,Ft).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=c(Qe,Hf);if(c(this,Ft).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<3;r++)n.push(c(this,Ft).getInt16(e,!0)),e+=2;return n}get fallbackName(){return I(this,cn,xg).call(this,0)}get loadedName(){return I(this,cn,xg).call(this,1)}get mimetype(){return I(this,cn,xg).call(this,2)}get name(){return I(this,cn,xg).call(this,3)}get data(){let e=c(Qe,bs);const t=c(this,Ft).getUint32(e);e+=4+t;const n=c(this,Ft).getUint32(e);e+=4+n;const r=c(this,Ft).getUint32(e);e+=4+r;const i=c(this,Ft).getUint32(e);if(i!==0)return new Uint8Array(c(this,Oa),e+4,i)}clearData(){let e=c(Qe,bs);const t=c(this,Ft).getUint32(e);e+=4+t;const n=c(this,Ft).getUint32(e);e+=4+n;const r=c(this,Ft).getUint32(e);e+=4+r;const i=c(this,Ft).getUint32(e);new Uint8Array(c(this,Oa),e+4,i).fill(0),c(this,Ft).setUint32(e,0)}get cssFontInfo(){let e=c(Qe,bs);const t=c(this,Ft).getUint32(e);e+=4+t;const n=c(this,Ft).getUint32(e);e+=4+n;const r=c(this,Ft).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(c(this,Oa),e+4,r)),new I_(i.buffer)}get systemFontInfo(){let e=c(Qe,bs);const t=c(this,Ft).getUint32(e);e+=4+t;const n=c(this,Ft).getUint32(e);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(c(this,Oa),e+4,n)),new P_(r.buffer)}static write(e){const t=e.systemFontInfo?P_.write(e.systemFontInfo):null,n=e.cssFontInfo?I_.write(e.cssFontInfo):null,r=new TextEncoder,i={};let o=0;for(const C of Qe.strings)i[C]=r.encode(e[C]),o+=4+i[C].length;const u=c(Qe,bs)+4+o+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),d=new ArrayBuffer(u),h=new Uint8Array(d),f=new DataView(d);let g=0;const w=Qe.bools.length;let A=0,S=0;for(let C=0;C<w;C++){const T=e[Qe.bools[C]];A|=(T===void 0?0:T?2:1)<<S,S+=2,(S===8||C===w-1)&&(f.setUint8(g++,A),A=0,S=0)}yt(g===c(Qe,jf),"FontInfo.write: Boolean properties offset mismatch");for(const C of Qe.numbers)f.setFloat64(g,e[C]),g+=8;if(yt(g===c(Qe,$f),"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(g++,4);for(const C of e.bbox)f.setInt16(g,C,!0),g+=2}else f.setUint8(g++,0),g+=8;if(yt(g===c(Qe,zf),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(g++,6);for(const C of e.fontMatrix)f.setFloat64(g,C,!0),g+=8}else f.setUint8(g++,0),g+=48;if(yt(g===c(Qe,Hf),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(g++,1);for(const C of e.defaultVMetrics)f.setInt16(g,C,!0),g+=2}else f.setUint8(g++,0),g+=6;yt(g===c(Qe,bs),"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(c(Qe,bs),0),g+=4;for(const C of Qe.strings){const T=i[C],P=T.length;f.setUint32(g,P),h.set(T,g+4),g+=4+P}if(f.setUint32(c(Qe,bs),g-c(Qe,bs)-4),!t)f.setUint32(g,0),g+=4;else{const C=t.byteLength;f.setUint32(g,C),yt(g+4+C<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),g+4),g+=4+C}if(!n)f.setUint32(g,0),g+=4;else{const C=n.byteLength;f.setUint32(g,C),yt(g+4+C<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),g+4),g+=4+C}return e.data===void 0?(f.setUint32(g,0),g+=4):(f.setUint32(g,e.data.length),h.set(e.data,g+4),g+=4+e.data.length),yt(g<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(g)}};jf=new WeakMap,$f=new WeakMap,zf=new WeakMap,Hf=new WeakMap,bs=new WeakMap,Oa=new WeakMap,Vy=new WeakMap,Ft=new WeakMap,cn=new WeakSet,Mi=function(e){yt(e<Qe.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,r=c(this,Ft).getUint8(t)>>n&3;return r===0?void 0:r===2},RA=function(e){return yt(e<Qe.numbers.length,"Invalid number index"),c(this,Ft).getFloat64(c(Qe,jf)+e*8)},xg=function(e){yt(e<Qe.strings.length,"Invalid string index");let t=c(Qe,bs)+4;for(let i=0;i<e;i++)t+=c(this,Ft).getUint32(t)+4;const n=c(this,Ft).getUint32(t),r=new Uint8Array(n);return r.set(new Uint8Array(c(this,Oa),t+4,n)),c(this,Vy).decode(r)},ne(Qe,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),ne(Qe,"numbers",["ascent","defaultWidth","descent"]),ne(Qe,"strings",["fallbackName","loadedName","mimetype","name"]),F(Qe,jf,Math.ceil(Qe.bools.length*2/8)),F(Qe,$f,c(Qe,jf)+Qe.numbers.length*8),F(Qe,zf,c(Qe,$f)+1+8),F(Qe,Hf,c(Qe,zf)+1+48),F(Qe,bs,c(Qe,Hf)+1+6);let Qb=Qe;var Uy,jy,$y,zy,Hy,Wy,Gy,qy;const Mt=class Mt{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,r=[],i=[],o=[],u=[],d=null,h=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],o=e[3],t===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,d=e[1],r=e[2],i=e[3],u=e[4]||[],n=e[6],h=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const f=Math.floor(r.length/2),g=Math.floor(i.length/3),w=o.length,A=u.length;let S=0;for(const z of u)S+=1,S=Math.ceil(S/4)*4,S+=4+z.coords.length*4,S+=4+z.colors.length*4,z.verticesPerRow!==void 0&&(S+=4);const C=20+f*8+g*3+w*8+(n?16:0)+(h?3:0)+S,T=new ArrayBuffer(C),P=new DataView(T),O=new Uint8Array(T);P.setUint8(c(Mt,Uy),t),P.setUint8(c(Mt,jy),n?1:0),P.setUint8(c(Mt,$y),h?1:0),P.setUint8(c(Mt,zy),d),P.setUint32(c(Mt,Hy),f,!0),P.setUint32(c(Mt,Wy),g,!0),P.setUint32(c(Mt,Gy),w,!0),P.setUint32(c(Mt,qy),A,!0);let N=20;new Float32Array(T,N,f*2).set(r),N+=f*8,O.set(i,N),N+=g*3;for(const[z,W]of o)P.setFloat32(N,z,!0),N+=4,P.setUint32(N,parseInt(W.slice(1),16),!0),N+=4;if(n)for(const z of n)P.setFloat32(N,z,!0),N+=4;h&&(O.set(h,N),N+=3);for(let z=0;z<u.length;z++){const W=u[z];P.setUint8(N,W.type),N+=1,N=Math.ceil(N/4)*4,P.setUint32(N,W.coords.length,!0),N+=4,new Int32Array(T,N,W.coords.length).set(W.coords),N+=W.coords.length*4,P.setUint32(N,W.colors.length,!0),N+=4,new Int32Array(T,N,W.colors.length).set(W.colors),N+=W.colors.length*4,W.verticesPerRow!==void 0&&(P.setUint32(N,W.verticesPerRow,!0),N+=4)}return T}getIR(){const e=this.view,t=this.data[c(Mt,Uy)],n=!!this.data[c(Mt,jy)],r=!!this.data[c(Mt,$y)],i=e.getUint32(c(Mt,Hy),!0),o=e.getUint32(c(Mt,Wy),!0),u=e.getUint32(c(Mt,Gy),!0),d=e.getUint32(c(Mt,qy),!0);let h=20;const f=new Float32Array(this.buffer,h,i*2);h+=i*8;const g=new Uint8Array(this.buffer,h,o*3);h+=o*3;const w=[];for(let T=0;T<u;++T){const P=e.getFloat32(h,!0);h+=4;const O=e.getUint32(h,!0);h+=4,w.push([P,`#${O.toString(16).padStart(6,"0")}`])}let A=null;if(n){A=[];for(let T=0;T<4;++T)A.push(e.getFloat32(h,!0)),h+=4}let S=null;r&&(S=new Uint8Array(this.buffer,h,3),h+=3);const C=[];for(let T=0;T<d;++T){const P=e.getUint8(h);h+=1,h=Math.ceil(h/4)*4;const O=e.getUint32(h,!0);h+=4;const N=new Int32Array(this.buffer,h,O);h+=O*4;const j=e.getUint32(h,!0);h+=4;const z=new Int32Array(this.buffer,h,j);h+=j*4;const W={type:P,coords:N,colors:z};P===Fb.LATTICE&&(W.verticesPerRow=e.getUint32(h,!0),h+=4),C.push(W)}if(t===1)return["RadialAxial","axial",A,w,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",A,w,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(t===3){const T=this.data[c(Mt,zy)];let P=null;if(f.length>0){let O=f[0],N=f[0],j=f[1],z=f[1];for(let W=0;W<f.length;W+=2){const D=f[W],R=f[W+1];O=O>D?D:O,j=j>R?R:j,N=N<D?D:N,z=z<R?R:z}P=[O,j,N,z]}return["Mesh",T,f,g,C,P,A,S]}throw new Error(`Unsupported pattern kind: ${t}`)}};Uy=new WeakMap,jy=new WeakMap,$y=new WeakMap,zy=new WeakMap,Hy=new WeakMap,Wy=new WeakMap,Gy=new WeakMap,qy=new WeakMap,F(Mt,Uy,0),F(Mt,jy,1),F(Mt,$y,2),F(Mt,zy,3),F(Mt,Hy,4),F(Mt,Wy,8),F(Mt,Gy,12),F(Mt,qy,16);let Xb=Mt;var Wf;class RW{constructor(e){F(this,Wf);_(this,Wf,e)}static write(e){let t,n;return jn.isFloat16ArraySupported?(n=new ArrayBuffer(e.length*2),t=new Float16Array(n)):(n=new ArrayBuffer(e.length*4),t=new Float32Array(n)),t.set(e),n}get path(){return jn.isFloat16ArraySupported?new Float16Array(c(this,Wf)):new Float32Array(c(this,Wf))}}Wf=new WeakMap;function DW(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(Ur)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function NW(s){if(Ur&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return O1(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function rA(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const Yb=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,MW=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",LW=gW.bind(null,Yb,MW);var Qo,G_;class OW{constructor(){F(this,Qo,new Map);F(this,G_,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};c(this,G_).then(()=>{for(const[r]of c(this,Qo))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){He("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}c(this,Qo).set(t,r)}removeEventListener(e,t){const n=c(this,Qo).get(t);n==null||n(),c(this,Qo).delete(t)}terminate(){for(const[,e]of c(this,Qo))e==null||e();c(this,Qo).clear()}}Qo=new WeakMap,G_=new WeakMap;const sA={DATA:1,ERROR:2},Cn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function nR(){}function Yr(s){if(s instanceof Pu||s instanceof Tb||s instanceof KP||s instanceof S_||s instanceof $E)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||wt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Pu(s.message);case"InvalidPDFException":return new Tb(s.message);case"PasswordException":return new KP(s.message,s.code);case"ResponseException":return new S_(s.message,s.status,s.missing);case"UnknownErrorException":return new $E(s.message,s.details)}return new $E(s.message,s.toString())}var Gf,_i,SM,FM,TM,DA;class Eg{constructor(e,t,n){F(this,_i);F(this,Gf,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",I(this,_i,SM).bind(this),{signal:c(this,Gf).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,o=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:o,targetName:u,action:e,streamId:i,data:t,desiredSize:h.desiredSize},r),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[i].pullCall=f,d.postMessage({sourceName:o,targetName:u,stream:Cn.PULL,streamId:i,desiredSize:h.desiredSize}),f.promise},cancel:h=>{yt(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[i].cancelCall=f,this.streamControllers[i].isClosed=!0,d.postMessage({sourceName:o,targetName:u,stream:Cn.CANCEL,streamId:i,reason:Yr(h)}),f.promise}},n)}destroy(){var e;(e=c(this,Gf))==null||e.abort(),_(this,Gf,null)}}Gf=new WeakMap,_i=new WeakSet,SM=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){I(this,_i,TM).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===sA.DATA)r.resolve(e.data);else if(e.callback===sA.ERROR)r.reject(Yr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:n,targetName:r,callback:sA.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:n,targetName:r,callback:sA.ERROR,callbackId:e.callbackId,reason:Yr(o)})});return}if(e.streamId){I(this,_i,FM).call(this,e);return}t(e.data)},FM=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,o=this,u=this.actionHandler[e.action],d={enqueue(h,f=1,g){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=f,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:Cn.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Cn.CLOSE,streamId:t}),delete o.streamSinks[t])},error(h){yt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Cn.ERROR,streamId:t,reason:Yr(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(u,e.data,d).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Cn.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Cn.START_COMPLETE,streamId:t,reason:Yr(h)})})},TM=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case Cn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Yr(e.reason));break;case Cn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Yr(e.reason));break;case Cn.PULL:if(!u){i.postMessage({sourceName:n,targetName:r,stream:Cn.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||nR).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Cn.PULL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Cn.PULL_COMPLETE,streamId:t,reason:Yr(h)})});break;case Cn.ENQUEUE:if(yt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Cn.CLOSE:if(yt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),I(this,_i,DA).call(this,o,t);break;case Cn.ERROR:yt(o,"error should have stream controller"),o.controller.error(Yr(e.reason)),I(this,_i,DA).call(this,o,t);break;case Cn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Yr(e.reason)),I(this,_i,DA).call(this,o,t);break;case Cn.CANCEL:if(!u)break;const d=Yr(e.reason);Promise.try(u.onCancel||nR,d).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Cn.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Cn.CANCEL_COMPLETE,streamId:t,reason:Yr(h)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},DA=async function(e,t){var n,r,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Ky;class kM{constructor({enableHWA:e=!1}){F(this,Ky,!1);_(this,Ky,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,Ky)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){wt("Abstract method `_createCanvas` called.")}}Ky=new WeakMap;class BW extends kM{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class IM{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){wt("Abstract method `_fetch` called.")}}class rR extends IM{async _fetch(e){const t=await b0(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):O1(t)}}class PM{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(e=!1){}}var Hd,qf,Xo,Yo,Sr,Wd,Gd,Se,xr,bg,Kp,NA,Qp,RM,Jb,Xp,Cg,Sg,Zb,Fg;class VW extends PM{constructor({docId:t,ownerDocument:n=globalThis.document}){super();F(this,Se);F(this,Hd);F(this,qf);F(this,Xo);F(this,Yo);F(this,Sr);F(this,Wd);F(this,Gd,0);_(this,Yo,t),_(this,Sr,n)}addFilter(t){if(!t)return"none";let n=c(this,Se,xr).get(t);if(n)return n;const[r,i,o]=I(this,Se,NA).call(this,t),u=t.length===1?r:`${r}${i}${o}`;if(n=c(this,Se,xr).get(u),n)return c(this,Se,xr).set(t,n),n;const d=`g_${c(this,Yo)}_transfer_map_${Mn(this,Gd)._++}`,h=I(this,Se,Qp).call(this,d);c(this,Se,xr).set(t,h),c(this,Se,xr).set(u,h);const f=I(this,Se,Xp).call(this,d);return I(this,Se,Sg).call(this,r,i,o,f),h}addHCMFilter(t,n){var S;const r=`${t}-${n}`,i="base";let o=c(this,Se,bg).get(i);if((o==null?void 0:o.key)===r||(o?((S=o.filter)==null||S.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},c(this,Se,bg).set(i,o)),!t||!n))return o.url;const u=I(this,Se,Fg).call(this,t);t=xe.makeHexColor(...u);const d=I(this,Se,Fg).call(this,n);if(n=xe.makeHexColor(...d),c(this,Se,Kp).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const h=new Array(256);for(let C=0;C<=255;C++){const T=C/255;h[C]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const f=h.join(","),g=`g_${c(this,Yo)}_hcm_filter`,w=o.filter=I(this,Se,Xp).call(this,g);I(this,Se,Sg).call(this,f,f,f,w),I(this,Se,Jb).call(this,w);const A=(C,T)=>{const P=u[C]/255,O=d[C]/255,N=new Array(T+1);for(let j=0;j<=T;j++)N[j]=P+j/T*(O-P);return N.join(",")};return I(this,Se,Sg).call(this,A(0,5),A(1,5),A(2,5),w),o.url=I(this,Se,Qp).call(this,g),o.url}addAlphaFilter(t){let n=c(this,Se,xr).get(t);if(n)return n;const[r]=I(this,Se,NA).call(this,[t]),i=`alpha_${r}`;if(n=c(this,Se,xr).get(i),n)return c(this,Se,xr).set(t,n),n;const o=`g_${c(this,Yo)}_alpha_map_${Mn(this,Gd)._++}`,u=I(this,Se,Qp).call(this,o);c(this,Se,xr).set(t,u),c(this,Se,xr).set(i,u);const d=I(this,Se,Xp).call(this,o);return I(this,Se,Zb).call(this,r,d),u}addLuminosityFilter(t){let n=c(this,Se,xr).get(t||"luminosity");if(n)return n;let r,i;if(t?([r]=I(this,Se,NA).call(this,[t]),i=`luminosity_${r}`):i="luminosity",n=c(this,Se,xr).get(i),n)return c(this,Se,xr).set(t,n),n;const o=`g_${c(this,Yo)}_luminosity_map_${Mn(this,Gd)._++}`,u=I(this,Se,Qp).call(this,o);c(this,Se,xr).set(t,u),c(this,Se,xr).set(i,u);const d=I(this,Se,Xp).call(this,o);return I(this,Se,RM).call(this,d),t&&I(this,Se,Zb).call(this,r,d),u}addHighlightHCMFilter(t,n,r,i,o){var O;const u=`${n}-${r}-${i}-${o}`;let d=c(this,Se,bg).get(t);if((d==null?void 0:d.key)===u||(d?((O=d.filter)==null||O.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},c(this,Se,bg).set(t,d)),!n||!r))return d.url;const[h,f]=[n,r].map(I(this,Se,Fg).bind(this));let g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),w=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[A,S]=[i,o].map(I(this,Se,Fg).bind(this));w<g&&([g,w,A,S]=[w,g,S,A]),c(this,Se,Kp).style.color="";const C=(N,j,z)=>{const W=new Array(256),D=(w-g)/z,R=N/255,L=(j-N)/(255*z);let U=0;for(let V=0;V<=z;V++){const G=Math.round(g+V*D),$=R+V*L;for(let ye=U;ye<=G;ye++)W[ye]=$;U=G+1}for(let V=U;V<256;V++)W[V]=W[U-1];return W.join(",")},T=`g_${c(this,Yo)}_hcm_${t}_filter`,P=d.filter=I(this,Se,Xp).call(this,T);return I(this,Se,Jb).call(this,P),I(this,Se,Sg).call(this,C(A[0],S[0],5),C(A[1],S[1],5),C(A[2],S[2],5),P),d.url=I(this,Se,Qp).call(this,T),d.url}destroy(t=!1){var n,r,i,o;t&&((n=c(this,Wd))!=null&&n.size)||((r=c(this,Xo))==null||r.parentNode.parentNode.remove(),_(this,Xo,null),(i=c(this,qf))==null||i.clear(),_(this,qf,null),(o=c(this,Wd))==null||o.clear(),_(this,Wd,null),_(this,Gd,0))}}Hd=new WeakMap,qf=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Sr=new WeakMap,Wd=new WeakMap,Gd=new WeakMap,Se=new WeakSet,xr=function(){return c(this,qf)||_(this,qf,new Map)},bg=function(){return c(this,Wd)||_(this,Wd,new Map)},Kp=function(){if(!c(this,Xo)){const t=c(this,Sr).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=c(this,Sr).createElementNS(Ro,"svg");r.setAttribute("width",0),r.setAttribute("height",0),_(this,Xo,c(this,Sr).createElementNS(Ro,"defs")),t.append(r),r.append(c(this,Xo)),c(this,Sr).body.append(t)}return c(this,Xo)},NA=function(t){if(t.length===1){const h=t[0],f=new Array(256);for(let w=0;w<256;w++)f[w]=h[w]/255;const g=f.join(",");return[g,g,g]}const[n,r,i]=t,o=new Array(256),u=new Array(256),d=new Array(256);for(let h=0;h<256;h++)o[h]=n[h]/255,u[h]=r[h]/255,d[h]=i[h]/255;return[o.join(","),u.join(","),d.join(",")]},Qp=function(t){if(c(this,Hd)===void 0){_(this,Hd,"");const n=c(this,Sr).URL;n!==c(this,Sr).baseURI&&(B1(n)?He('#createUrl: ignore "data:"-URL for performance reasons.'):_(this,Hd,VN(n,"")))}return`url(${c(this,Hd)}#${t})`},RM=function(t){const n=c(this,Sr).createElementNS(Ro,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Jb=function(t){const n=c(this,Sr).createElementNS(Ro,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Xp=function(t){const n=c(this,Sr).createElementNS(Ro,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),c(this,Se,Kp).append(n),n},Cg=function(t,n,r){const i=c(this,Sr).createElementNS(Ro,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Sg=function(t,n,r,i){const o=c(this,Sr).createElementNS(Ro,"feComponentTransfer");i.append(o),I(this,Se,Cg).call(this,o,"feFuncR",t),I(this,Se,Cg).call(this,o,"feFuncG",n),I(this,Se,Cg).call(this,o,"feFuncB",r)},Zb=function(t,n){const r=c(this,Sr).createElementNS(Ro,"feComponentTransfer");n.append(r),I(this,Se,Cg).call(this,r,"feFuncA",t)},Fg=function(t){return c(this,Se,Kp).style.color=t,S0(getComputedStyle(c(this,Se,Kp)).getPropertyValue("color"))};class DM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){wt("Abstract method `_fetch` called.")}}class sR extends DM{async _fetch(e){const t=await b0(e,"arraybuffer");return new Uint8Array(t)}}class NM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){wt("Abstract method `_fetch` called.")}}class iR extends NM{async _fetch(e){const t=await b0(e,"arraybuffer");return new Uint8Array(t)}}Ur&&He("Please use the `legacy` build in Node.js environments.");async function xF(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class UW extends PM{}class jW extends kM{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class $W extends IM{async _fetch(e){return xF(e)}}class zW extends DM{async _fetch(e){return xF(e)}}class HW extends NM{async _fetch(e){return xF(e)}}const $p="__forcedDependency",{floor:aR,ceil:oR}=Math;function iA(s,e,t,n,r,i){s[e*4+0]=Math.min(s[e*4+0],t),s[e*4+1]=Math.min(s[e*4+1],n),s[e*4+2]=Math.max(s[e*4+2],r),s[e*4+3]=Math.max(s[e*4+3],i)}const eC=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Kf,$c;class WW{constructor(e,t){F(this,Kf);F(this,$c);_(this,Kf,e),_(this,$c,t)}get length(){return c(this,Kf).length}isEmpty(e){return c(this,Kf)[e]===eC}minX(e){return c(this,$c)[e*4+0]/256}minY(e){return c(this,$c)[e*4+1]/256}maxX(e){return(c(this,$c)[e*4+2]+1)/256}maxY(e){return(c(this,$c)[e*4+3]+1)/256}}Kf=new WeakMap,$c=new WeakMap;const aA=(s,e)=>{if(!s)return;let t=s.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},s.set(e,t)),t};var es,ts,qd,Ui,Kd,Jo,bt,Tt,Zo,ns,Qy,Qf,Qd,Xd,el,Fr,Ba,Xy,tC;class GW{constructor(e,t,n=!1){F(this,Xy);F(this,es,{__proto__:null});F(this,ts,{__proto__:null,transform:[],moveText:[],sameLineText:[],[$p]:[]});F(this,qd,new Map);F(this,Ui,[]);F(this,Kd,[]);F(this,Jo,[[1,0,0,1,0,0]]);F(this,bt,[-1/0,-1/0,1/0,1/0]);F(this,Tt,new Float64Array([1/0,1/0,-1/0,-1/0]));F(this,Zo,-1);F(this,ns,new Set);F(this,Qy,new Map);F(this,Qf,new Map);F(this,Qd);F(this,Xd);F(this,el);F(this,Fr);F(this,Ba);_(this,Qd,e.width),_(this,Xd,e.height),I(this,Xy,tC).call(this,t),n&&_(this,Ba,new Map)}growOperationsCount(e){e>=c(this,Fr).length&&I(this,Xy,tC).call(this,e,c(this,Fr))}save(e){return _(this,es,{__proto__:c(this,es)}),_(this,ts,{__proto__:c(this,ts),transform:{__proto__:c(this,ts).transform},moveText:{__proto__:c(this,ts).moveText},sameLineText:{__proto__:c(this,ts).sameLineText},[$p]:{__proto__:c(this,ts)[$p]}}),_(this,bt,{__proto__:c(this,bt)}),c(this,Ui).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(c(this,es));if(t===null)return this;_(this,es,t),_(this,ts,Object.getPrototypeOf(c(this,ts))),_(this,bt,Object.getPrototypeOf(c(this,bt)));const n=c(this,Ui).pop();return n!==void 0&&((r=aA(c(this,Ba),e))==null||r.dependencies.add(n),c(this,Fr)[e]=c(this,Fr)[n]),this}recordOpenMarker(e){return c(this,Ui).push(e),this}getOpenMarker(){return c(this,Ui).length===0?null:c(this,Ui).at(-1)}recordCloseMarker(e){var n;const t=c(this,Ui).pop();return t!==void 0&&((n=aA(c(this,Ba),e))==null||n.dependencies.add(t),c(this,Fr)[e]=c(this,Fr)[t]),this}beginMarkedContent(e){return c(this,Kd).push(e),this}endMarkedContent(e){var n;const t=c(this,Kd).pop();return t!==void 0&&((n=aA(c(this,Ba),e))==null||n.dependencies.add(t),c(this,Fr)[e]=c(this,Fr)[t]),this}pushBaseTransform(e){return c(this,Jo).push(xe.multiplyByDOMMatrix(c(this,Jo).at(-1),e.getTransform())),this}popBaseTransform(){return c(this,Jo).length>1&&c(this,Jo).pop(),this}recordSimpleData(e,t){return c(this,es)[e]=t,this}recordIncrementalData(e,t){return c(this,ts)[e].push(t),this}resetIncrementalData(e,t){return c(this,ts)[e].length=0,this}recordNamedData(e,t){return c(this,qd).set(e,t),this}recordSimpleDataFromNamed(e,t,n){c(this,es)[e]=c(this,qd).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData($p,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in c(this,es)&&this.recordFutureForcedDependency(t,c(this,es)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of c(this,ns))this.recordFutureForcedDependency($p,e);return this}resetBBox(e){return c(this,Zo)!==e&&(_(this,Zo,e),c(this,Tt)[0]=1/0,c(this,Tt)[1]=1/0,c(this,Tt)[2]=-1/0,c(this,Tt)[3]=-1/0),this}recordClipBox(e,t,n,r,i,o){const u=xe.multiplyByDOMMatrix(c(this,Jo).at(-1),t.getTransform()),d=[1/0,1/0,-1/0,-1/0];xe.axialAlignedBoundingBox([n,i,r,o],u,d);const h=xe.intersect(c(this,bt),d);return h?(c(this,bt)[0]=h[0],c(this,bt)[1]=h[1],c(this,bt)[2]=h[2],c(this,bt)[3]=h[3]):(c(this,bt)[0]=c(this,bt)[1]=1/0,c(this,bt)[2]=c(this,bt)[3]=-1/0),this}recordBBox(e,t,n,r,i,o){const u=c(this,bt);if(u[0]===1/0)return this;const d=xe.multiplyByDOMMatrix(c(this,Jo).at(-1),t.getTransform());if(u[0]===-1/0)return xe.axialAlignedBoundingBox([n,i,r,o],d,c(this,Tt)),this;const h=[1/0,1/0,-1/0,-1/0];return xe.axialAlignedBoundingBox([n,i,r,o],d,h),c(this,Tt)[0]=Math.min(c(this,Tt)[0],Math.max(h[0],u[0])),c(this,Tt)[1]=Math.min(c(this,Tt)[1],Math.max(h[1],u[1])),c(this,Tt)[2]=Math.max(c(this,Tt)[2],Math.min(h[2],u[2])),c(this,Tt)[3]=Math.max(c(this,Tt)[3],Math.min(h[3],u[3])),this}recordCharacterBBox(e,t,n,r=1,i=0,o=0,u){const d=n.bbox;let h,f;if(d&&(h=d[2]!==d[0]&&d[3]!==d[1]&&c(this,Qf).get(n),h!==!1&&(f=[0,0,0,0],xe.axialAlignedBoundingBox(d,n.fontMatrix,f),(r!==1||i!==0||o!==0)&&xe.scaleMinMax([r,0,0,-r,i,o],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!u)return this.recordFullPageBBox(e);const g=u();return d&&f&&h===void 0&&(h=f[0]<=i-g.actualBoundingBoxLeft&&f[2]>=i+g.actualBoundingBoxRight&&f[1]<=o-g.actualBoundingBoxAscent&&f[3]>=o+g.actualBoundingBoxDescent,c(this,Qf).set(n,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,i-g.actualBoundingBoxLeft,i+g.actualBoundingBoxRight,o-g.actualBoundingBoxAscent,o+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return c(this,Tt)[0]=Math.max(0,c(this,bt)[0]),c(this,Tt)[1]=Math.max(0,c(this,bt)[1]),c(this,Tt)[2]=Math.min(c(this,Qd),c(this,bt)[2]),c(this,Tt)[3]=Math.min(c(this,Xd),c(this,bt)[3]),this}getSimpleIndex(e){return c(this,es)[e]}recordDependencies(e,t){const n=c(this,ns),r=c(this,es),i=c(this,ts);for(const o of t)o in c(this,es)?n.add(r[o]):o in i&&i[o].forEach(n.add,n);return this}recordNamedDependency(e,t){return c(this,qd).has(t)&&c(this,ns).add(c(this,qd).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[$p]),c(this,Ba)){const n=aA(c(this,Ba),e),{dependencies:r}=n;c(this,ns).forEach(r.add,r),c(this,Ui).forEach(r.add,r),c(this,Kd).forEach(r.add,r),r.delete(e),n.isRenderingOperation=!0}if(c(this,Zo)===e){const n=aR(c(this,Tt)[0]*256/c(this,Qd)),r=aR(c(this,Tt)[1]*256/c(this,Xd)),i=oR(c(this,Tt)[2]*256/c(this,Qd)),o=oR(c(this,Tt)[3]*256/c(this,Xd));iA(c(this,el),e,n,r,i,o);for(const u of c(this,ns))u!==e&&iA(c(this,el),u,n,r,i,o);for(const u of c(this,Ui))u!==e&&iA(c(this,el),u,n,r,i,o);for(const u of c(this,Kd))u!==e&&iA(c(this,el),u,n,r,i,o);t||(c(this,ns).clear(),_(this,Zo,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(c(this,ns));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return c(this,Zo)===e&&(_(this,Zo,-1),c(this,bt)[0]=Math.max(c(this,bt)[0],c(this,Tt)[0]),c(this,bt)[1]=Math.max(c(this,bt)[1],c(this,Tt)[1]),c(this,bt)[2]=Math.min(c(this,bt)[2],c(this,Tt)[2]),c(this,bt)[3]=Math.min(c(this,bt)[3],c(this,Tt)[3]),t||c(this,ns).clear()),this}_takePendingDependencies(){const e=c(this,ns);return _(this,ns,new Set),e}_extractOperation(e){const t=c(this,Qy).get(e);return c(this,Qy).delete(e),t}_pushPendingDependencies(e){for(const t of e)c(this,ns).add(t)}take(){return c(this,Qf).clear(),new WW(c(this,Fr),c(this,el))}takeDebugMetadata(){return c(this,Ba)}}es=new WeakMap,ts=new WeakMap,qd=new WeakMap,Ui=new WeakMap,Kd=new WeakMap,Jo=new WeakMap,bt=new WeakMap,Tt=new WeakMap,Zo=new WeakMap,ns=new WeakMap,Qy=new WeakMap,Qf=new WeakMap,Qd=new WeakMap,Xd=new WeakMap,el=new WeakMap,Fr=new WeakMap,Ba=new WeakMap,Xy=new WeakSet,tC=function(e,t){const n=new ArrayBuffer(e*4);_(this,el,new Uint8ClampedArray(n)),_(this,Fr,new Uint32Array(n)),t&&t.length>0?(c(this,Fr).set(t),c(this,Fr).fill(eC,t.length)):c(this,Fr).fill(eC)};var Rt,an,ji,Xf,Yf;const PF=class PF{constructor(e,t,n){F(this,Rt);F(this,an);F(this,ji);F(this,Xf,0);F(this,Yf,0);if(e instanceof PF&&c(e,ji)===!!n)return e;_(this,Rt,e),_(this,an,t),_(this,ji,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Mn(this,Yf)._++,c(this,Rt).save(c(this,an)),this}restore(e){return c(this,Yf)>0&&(c(this,Rt).restore(c(this,an)),Mn(this,Yf)._--),this}recordOpenMarker(e){return Mn(this,Xf)._++,this}getOpenMarker(){return c(this,Xf)>0?c(this,an):c(this,Rt).getOpenMarker()}recordCloseMarker(e){return Mn(this,Xf)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return c(this,Rt).pushBaseTransform(e),this}popBaseTransform(){return c(this,Rt).popBaseTransform(),this}recordSimpleData(e,t){return c(this,Rt).recordSimpleData(e,c(this,an)),this}recordIncrementalData(e,t){return c(this,Rt).recordIncrementalData(e,c(this,an)),this}resetIncrementalData(e,t){return c(this,Rt).resetIncrementalData(e,c(this,an)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return c(this,Rt).recordSimpleDataFromNamed(e,t,c(this,an)),this}recordFutureForcedDependency(e,t){return c(this,Rt).recordFutureForcedDependency(e,c(this,an)),this}inheritSimpleDataAsFutureForcedDependencies(e){return c(this,Rt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,Rt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return c(this,ji)||c(this,Rt).resetBBox(c(this,an)),this}recordClipBox(e,t,n,r,i,o){return c(this,ji)||c(this,Rt).recordClipBox(c(this,an),t,n,r,i,o),this}recordBBox(e,t,n,r,i,o){return c(this,ji)||c(this,Rt).recordBBox(c(this,an),t,n,r,i,o),this}recordCharacterBBox(e,t,n,r,i,o,u){return c(this,ji)||c(this,Rt).recordCharacterBBox(c(this,an),t,n,r,i,o,u),this}recordFullPageBBox(e){return c(this,ji)||c(this,Rt).recordFullPageBBox(c(this,an)),this}getSimpleIndex(e){return c(this,Rt).getSimpleIndex(e)}recordDependencies(e,t){return c(this,Rt).recordDependencies(c(this,an),t),this}recordNamedDependency(e,t){return c(this,Rt).recordNamedDependency(c(this,an),t),this}recordOperation(e){return c(this,Rt).recordOperation(c(this,an),!0),this}recordShowTextOperation(e){return c(this,Rt).recordShowTextOperation(c(this,an),!0),this}bboxToClipBoxDropOperation(e){return c(this,ji)||c(this,Rt).bboxToClipBoxDropOperation(c(this,an),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Rt=new WeakMap,an=new WeakMap,ji=new WeakMap,Xf=new WeakMap,Yf=new WeakMap;let R_=PF;const ri={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},dr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function nC(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),s.clip(r)}class EF{isModifyingCurrentTransform(){return!1}getPattern(){wt("Abstract method `getPattern` called.")}}class qW extends EF{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let n,r=this._p0,i=this._p1;if(t&&(r=r.slice(),i=i.slice(),xe.applyTransform(r,t),xe.applyTransform(i,t)),this._type==="axial")n=e.createLinearGradient(r[0],r[1],i[0],i[1]);else if(this._type==="radial"){let o=this._r0,u=this._r1;if(t){const d=new Float32Array(2);xe.singularValueDecompose2dScale(t,d),o*=d[0],u*=d[0]}n=e.createRadialGradient(r[0],r[1],o,i[0],i[1],u)}for(const o of this._colorStops)n.addColorStop(o[0],o[1]);return n}getPattern(e,t,n,r){let i;if(r===dr.STROKE||r===dr.FILL){if(this.isOriginBased()){let w=xe.transform(n,t.baseTransform);this.matrix&&(w=xe.transform(w,this.matrix));const A=.001,S=Math.hypot(w[0],w[1]),C=Math.hypot(w[2],w[3]),T=(w[0]*w[2]+w[1]*w[3])/(S*C);if(Math.abs(T)<A)if(this.isRadial()){if(Math.abs(S-C)<A)return this._createGradient(e,w)}else return this._createGradient(e,w)}const o=t.current.getClippedPathBoundingBox(r,Zt(e))||[0,0,0,0],u=Math.ceil(o[2]-o[0])||1,d=Math.ceil(o[3]-o[1])||1,h=t.cachedCanvases.getCanvas("pattern",u,d),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),n=xe.transform(n,[1,0,0,1,o[0],o[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),nC(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),i=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(n);i.setTransform(g)}else nC(e,this._bbox),i=this._createGradient(e);return i}}function WE(s,e,t,n,r,i,o,u){const d=e.coords,h=e.colors,f=s.data,g=s.width*4;let w;d[t+1]>d[n+1]&&(w=t,t=n,n=w,w=i,i=o,o=w),d[n+1]>d[r+1]&&(w=n,n=r,r=w,w=o,o=u,u=w),d[t+1]>d[n+1]&&(w=t,t=n,n=w,w=i,i=o,o=w);const A=(d[t]+e.offsetX)*e.scaleX,S=(d[t+1]+e.offsetY)*e.scaleY,C=(d[n]+e.offsetX)*e.scaleX,T=(d[n+1]+e.offsetY)*e.scaleY,P=(d[r]+e.offsetX)*e.scaleX,O=(d[r+1]+e.offsetY)*e.scaleY;if(S>=O)return;const N=h[i],j=h[i+1],z=h[i+2],W=h[o],D=h[o+1],R=h[o+2],L=h[u],U=h[u+1],V=h[u+2],G=Math.round(S),$=Math.round(O);let ye,ce,he,ge,ae,_e,fe,X;for(let re=G;re<=$;re++){if(re<T){const Me=re<S?0:(S-re)/(S-T);ye=A-(A-C)*Me,ce=N-(N-W)*Me,he=j-(j-D)*Me,ge=z-(z-R)*Me}else{let Me;re>O?Me=1:T===O?Me=0:Me=(T-re)/(T-O),ye=C-(C-P)*Me,ce=W-(W-L)*Me,he=D-(D-U)*Me,ge=R-(R-V)*Me}let se;re<S?se=0:re>O?se=1:se=(S-re)/(S-O),ae=A-(A-P)*se,_e=N-(N-L)*se,fe=j-(j-U)*se,X=z-(z-V)*se;const we=Math.round(Math.min(ye,ae)),be=Math.round(Math.max(ye,ae));let De=g*re+we*4;for(let Me=we;Me<=be;Me++)se=(ye-Me)/(ye-ae),se<0?se=0:se>1&&(se=1),f[De++]=ce-(ce-_e)*se|0,f[De++]=he-(he-fe)*se|0,f[De++]=ge-(ge-X)*se|0,f[De++]=255}}function KW(s,e,t){const n=e.coords,r=e.colors;let i,o;switch(e.type){case Fb.LATTICE:const u=e.verticesPerRow,d=Math.floor(n.length/u)-1,h=u-1;for(i=0;i<d;i++){let f=i*u;for(let g=0;g<h;g++,f++)WE(s,t,n[f],n[f+1],n[f+u],r[f],r[f+1],r[f+u]),WE(s,t,n[f+u+1],n[f+1],n[f+u],r[f+u+1],r[f+1],r[f+u])}break;case Fb.TRIANGLES:for(i=0,o=n.length;i<o;i+=3)WE(s,t,n[i],n[i+1],n[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class QW extends EF{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-u,f=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),A=h/g,S=f/w,C={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/S},T=g+4,P=w+4,O=n.getCanvas("mesh",T,P),N=O.context,j=N.createImageData(g,w);if(t){const W=j.data;for(let D=0,R=W.length;D<R;D+=4)W[D]=t[0],W[D+1]=t[1],W[D+2]=t[2],W[D+3]=255}for(const W of this._figures)KW(j,W,C);return N.putImageData(j,2,2),{canvas:O.canvas,offsetX:u-2*A,offsetY:d-2*S,scaleX:A,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){nC(e,this._bbox);const i=new Float32Array(2);if(r===dr.SHADING)xe.singularValueDecompose2dScale(Zt(e),i);else if(this.matrix){xe.singularValueDecompose2dScale(this.matrix,i);const[u,d]=i;xe.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=u,i[1]*=d}else xe.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===dr.SHADING?null:this._background,t.cachedCanvases);return r!==dr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class XW extends EF{getPattern(){return"hotpink"}}function YW(s){switch(s[0]){case"RadialAxial":return new qW(s);case"Mesh":return new QW(s);case"Dummy":return new XW}throw new Error(`Unknown IR type: ${s[0]}`)}const lR={COLORED:1,UNCOLORED:2},q_=class q_{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){var _e,fe;const{bbox:n,operatorList:r,paintType:i,tilingType:o,color:u,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),L1("TilingType: "+o);const g=n[0],w=n[1],A=n[2],S=n[3],C=A-g,T=S-w,P=new Float32Array(2);xe.singularValueDecompose2dScale(this.matrix,P);const[O,N]=P;xe.singularValueDecompose2dScale(this.baseTransform,P);const j=O*P[0],z=N*P[1];let W=C,D=T,R=!1,L=!1;const U=Math.ceil(h*j),V=Math.ceil(f*z),G=Math.ceil(C*j),$=Math.ceil(T*z);U>=G?W=h:R=!0,V>=$?D=f:L=!0;const ye=this.getSizeAndScale(W,this.ctx.canvas.width,j),ce=this.getSizeAndScale(D,this.ctx.canvas.height,z),he=e.cachedCanvases.getCanvas("pattern",ye.size,ce.size),ge=he.context,ae=d.createCanvasGraphics(ge,t);if(ae.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ae,i,u),ge.translate(-ye.scale*g,-ce.scale*w),ae.transform(0,ye.scale,0,0,ce.scale,0,0),ge.save(),(_e=ae.dependencyTracker)==null||_e.save(),this.clipBbox(ae,g,w,A,S),ae.baseTransform=Zt(ae.ctx),ae.executeOperatorList(r),ae.endDrawing(),(fe=ae.dependencyTracker)==null||fe.restore(),ge.restore(),R||L){const X=he.canvas;R&&(W=h),L&&(D=f);const re=this.getSizeAndScale(W,this.ctx.canvas.width,j),se=this.getSizeAndScale(D,this.ctx.canvas.height,z),we=re.size,be=se.size,De=e.cachedCanvases.getCanvas("pattern-workaround",we,be),Me=De.context,et=R?Math.floor(C/h):0,ft=L?Math.floor(T/f):0;for(let fn=0;fn<=et;fn++)for(let Hr=0;Hr<=ft;Hr++)Me.drawImage(X,we*fn,be*Hr,we,be,0,0,we,be);return{canvas:De.canvas,scaleX:re.scale,scaleY:se.scale,offsetX:g,offsetY:w}}return{canvas:he.canvas,scaleX:ye.scale,scaleY:ce.scale,offsetX:g,offsetY:w}}getSizeAndScale(e,t,n){const r=Math.max(q_.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const o=r-t,u=i-n;e.ctx.rect(t,n,o,u),xe.axialAlignedBoundingBox([t,n,r,i],Zt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case lR.COLORED:const{fillStyle:o,strokeStyle:u}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=u;break;case lR.UNCOLORED:r.fillStyle=r.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new cW(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,i){let o=n;r!==dr.SHADING&&(o=xe.transform(o,t.baseTransform),this.matrix&&(o=xe.transform(o,this.matrix)));const u=this.createPatternCanvas(t,i);let d=new DOMMatrix(o);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const h=e.createPattern(u.canvas,"repeat");return h.setTransform(d),h}};ne(q_,"MAX_PATTERN_SIZE",3e3);let rC=q_;function JW({src:s,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const u=jn.isLittleEndian?4278190080:255,[d,h]=o?[i,u]:[u,i],f=n>>3,g=n&7,w=s.length;t=new Uint32Array(t.buffer);let A=0;for(let S=0;S<r;S++){for(const T=e+f;e<T;e++){const P=e<w?s[e]:255;t[A++]=P&128?h:d,t[A++]=P&64?h:d,t[A++]=P&32?h:d,t[A++]=P&16?h:d,t[A++]=P&8?h:d,t[A++]=P&4?h:d,t[A++]=P&2?h:d,t[A++]=P&1?h:d}if(g===0)continue;const C=e<w?s[e++]:255;for(let T=0;T<g;T++)t[A++]=C&1<<7-T?h:d}return{srcPos:e,destPos:A}}const cR=16,uR=100,ZW=15,dR=10,os=16,GE=new DOMMatrix,js=new Float32Array(2),nf=new Float32Array([1/0,1/0,-1/0,-1/0]);function eG(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,r,i,o,u){e.transform(t,n,r,i,o,u),this.__originalTransform(t,n,r,i,o,u)},s.setTransform=function(t,n,r,i,o,u){e.setTransform(t,n,r,i,o,u),this.__originalSetTransform(t,n,r,i,o,u)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,r,i,o,u){e.bezierCurveTo(t,n,r,i,o,u),this.__originalBezierCurveTo(t,n,r,i,o,u)},s.rect=function(t,n,r,i){e.rect(t,n,r,i),this.__originalRect(t,n,r,i)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class tG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function oA(s,e,t,n,r,i,o,u,d,h){const[f,g,w,A,S,C]=Zt(s);if(g===0&&w===0){const O=o*f+S,N=Math.round(O),j=u*A+C,z=Math.round(j),W=(o+d)*f+S,D=Math.abs(Math.round(W)-N)||1,R=(u+h)*A+C,L=Math.abs(Math.round(R)-z)||1;return s.setTransform(Math.sign(f),0,0,Math.sign(A),N,z),s.drawImage(e,t,n,r,i,0,0,D,L),s.setTransform(f,g,w,A,S,C),[D,L]}if(f===0&&A===0){const O=u*w+S,N=Math.round(O),j=o*g+C,z=Math.round(j),W=(u+h)*w+S,D=Math.abs(Math.round(W)-N)||1,R=(o+d)*g+C,L=Math.abs(Math.round(R)-z)||1;return s.setTransform(0,Math.sign(g),Math.sign(w),0,N,z),s.drawImage(e,t,n,r,i,0,0,L,D),s.setTransform(f,g,w,A,S,C),[L,D]}s.drawImage(e,t,n,r,i,o,u,d,h);const T=Math.hypot(f,g),P=Math.hypot(w,A);return[T*d,P*h]}class hR{constructor(e,t,n){ne(this,"alphaIsShape",!1);ne(this,"fontSize",0);ne(this,"fontSizeScale",1);ne(this,"textMatrix",null);ne(this,"textMatrixScale",1);ne(this,"fontMatrix",Sb);ne(this,"leading",0);ne(this,"x",0);ne(this,"y",0);ne(this,"lineX",0);ne(this,"lineY",0);ne(this,"charSpacing",0);ne(this,"wordSpacing",0);ne(this,"textHScale",1);ne(this,"textRenderingMode",Ln.FILL);ne(this,"textRise",0);ne(this,"fillColor","#000000");ne(this,"strokeColor","#000000");ne(this,"patternFill",!1);ne(this,"patternStroke",!1);ne(this,"fillAlpha",1);ne(this,"strokeAlpha",1);ne(this,"lineWidth",1);ne(this,"activeSMask",null);ne(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=nf.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=dr.FILL,t=null){const n=this.minMax.slice();if(e===dr.STROKE){t||wt("Stroke bounding box must include transform."),xe.singularValueDecompose2dScale(t,js);const r=js[0]*this.lineWidth/2,i=js[1]*this.lineWidth/2;n[0]-=r,n[1]-=i,n[2]+=r,n[3]+=i}return n}updateClipFromPath(){const e=xe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(nf,0)}getClippedPathBoundingBox(e=dr.FILL,t=null){return xe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function pR(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%os,i=(t-r)/os,o=r===0?i:i+1,u=s.createImageData(n,os);let d=0,h;const f=e.data,g=u.data;let w,A,S,C;if(e.kind===bA.GRAYSCALE_1BPP){const T=f.byteLength,P=new Uint32Array(g.buffer,0,g.byteLength>>2),O=P.length,N=n+7>>3,j=4294967295,z=jn.isLittleEndian?4278190080:255;for(w=0;w<o;w++){for(S=w<i?os:r,h=0,A=0;A<S;A++){const W=T-d;let D=0;const R=W>N?n:W*8-7,L=R&-8;let U=0,V=0;for(;D<L;D+=8)V=f[d++],P[h++]=V&128?j:z,P[h++]=V&64?j:z,P[h++]=V&32?j:z,P[h++]=V&16?j:z,P[h++]=V&8?j:z,P[h++]=V&4?j:z,P[h++]=V&2?j:z,P[h++]=V&1?j:z;for(;D<R;D++)U===0&&(V=f[d++],U=128),P[h++]=V&U?j:z,U>>=1}for(;h<O;)P[h++]=0;s.putImageData(u,0,w*os)}}else if(e.kind===bA.RGBA_32BPP){for(A=0,C=n*os*4,w=0;w<i;w++)g.set(f.subarray(d,d+C)),d+=C,s.putImageData(u,0,A),A+=os;w<o&&(C=n*r*4,g.set(f.subarray(d,d+C)),s.putImageData(u,0,A))}else if(e.kind===bA.RGB_24BPP)for(S=os,C=n*S,w=0;w<o;w++){for(w>=i&&(S=r,C=n*S),h=0,A=C;A--;)g[h++]=f[d++],g[h++]=f[d++],g[h++]=f[d++],g[h++]=255;s.putImageData(u,0,w*os)}else throw new Error(`bad image kind: ${e.kind}`)}function fR(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%os,i=(t-r)/os,o=r===0?i:i+1,u=s.createImageData(n,os);let d=0;const h=e.data,f=u.data;for(let g=0;g<o;g++){const w=g<i?os:r;({srcPos:d}=JW({src:h,srcPos:d,dest:f,width:n,height:w,nonBlackColor:0})),s.putImageData(u,0,g*os)}}function ig(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function lA(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function mR(s,e){if(e)return!0;xe.singularValueDecompose2dScale(s,js);const t=Math.fround(ao.pixelRatio*Ru.PDF_TO_CSS_UNITS);return js[0]<=t&&js[1]<=t}const nG=["butt","round","square"],rG=["miter","round","bevel"],sG={},gR={};var na,sC,iC,aC;const RF=class RF{constructor(e,t,n,r,i,{optionalContentConfig:o,markedContentStack:u=null},d,h,f){F(this,na);this.ctx=e,this.current=new hR(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=o,this.cachedCanvases=new tG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,n=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Zt(this.compositeCtx))}this.ctx.save(),lA(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Zt(this.ctx)}executeOperatorList(e,t,n,r,i){var P;const o=e.argsArray,u=e.fnArray;let d=t||0;const h=o.length;if(h===d)return d;const f=h-d>dR&&typeof n=="function",g=f?Date.now()+ZW:0;let w=0;const A=this.commonObjs,S=this.objs;let C,T;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,n),d;if(!i||i(d))if(C=u[d],T=o[d]??null,C!==iy.dependency)T===null?this[C](d):this[C](d,...T);else for(const O of T){(P=this.dependencyTracker)==null||P.recordNamedData(O,d);const N=O.startsWith("g_")?A:S;if(!N.has(O))return N.get(O,n),d}if(d++,d===h)return d;if(f&&++w>dR){if(Date.now()>g)return n(),d;w=0}}}endDrawing(){I(this,na,sC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),I(this,na,iC).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),u=n,d=r,h="prescale1",f,g;for(;i>2&&u>1||o>2&&d>1;){let w=u,A=d;i>2&&u>1&&(w=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),i/=u/w),o>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,o/=d/A),f=this.cachedCanvases.getCanvas(h,w,A),g=f.context,g.clearRect(0,0,w,A),g.drawImage(e,0,0,u,d,0,0,w,A),e=f.canvas,u=w,d=A,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:d}}_createMaskCanvas(e,t){var U,V;const n=this.ctx,{width:r,height:i}=t,o=this.current.fillColor,u=this.current.patternFill,d=Zt(n);let h,f,g,w;if((t.bitmap||t.data)&&t.count>1){const G=t.bitmap||t.data.buffer;f=JSON.stringify(u?d:[d.slice(0,4),o]),h=this._cachedBitmapsMap.get(G),h||(h=new Map,this._cachedBitmapsMap.set(G,h));const $=h.get(f);if($&&!u){const ye=Math.round(Math.min(d[0],d[2])+d[4]),ce=Math.round(Math.min(d[1],d[3])+d[5]);return(U=this.dependencyTracker)==null||U.recordDependencies(e,ri.transformAndFill),{canvas:$,offsetX:ye,offsetY:ce}}g=$}g||(w=this.cachedCanvases.getCanvas("maskCanvas",r,i),fR(w.context,t));let A=xe.transform(d,[1/r,0,0,-1/i,0,0]);A=xe.transform(A,[1,0,0,1,0,-i]);const S=nf.slice();xe.axialAlignedBoundingBox([0,0,r,i],A,S);const[C,T,P,O]=S,N=Math.round(P-C)||1,j=Math.round(O-T)||1,z=this.cachedCanvases.getCanvas("fillCanvas",N,j),W=z.context,D=C,R=T;W.translate(-D,-R),W.transform(...A),g||(g=this._scaleImage(w.canvas,Ea(W)),g=g.img,h&&u&&h.set(f,g)),W.imageSmoothingEnabled=mR(Zt(W),t.interpolate),oA(W,g,0,0,g.width,g.height,0,0,r,i),W.globalCompositeOperation="source-in";const L=xe.transform(Ea(W),[1,0,0,1,-D,-R]);return W.fillStyle=u?o.getPattern(n,this,L,dr.FILL,e):o,W.fillRect(0,0,r,i),h&&!u&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,z.canvas)),(V=this.dependencyTracker)==null||V.recordDependencies(e,ri.transformAndFill),{canvas:z.canvas,offsetX:Math.round(D),offsetY:Math.round(R)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=nG[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=rG[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,r,i,o,u;for(const[d,h]of t)switch(d){case"LW":this.setLineWidth(e,h);break;case"LC":this.setLineCap(e,h);break;case"LJ":this.setLineJoin(e,h);break;case"ML":this.setMiterLimit(e,h);break;case"D":this.setDash(e,h[0],h[1]);break;case"RI":this.setRenderingIntent(e,h);break;case"FL":this.setFlatness(e,h);break;case"Font":this.setFont(e,h[0],h[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=h;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=h;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=h;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=h?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(h);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),ig(this.suspendedCtx,o),eG(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ig(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],o=r[1],u=r[2]-i,d=r[3]-o;u===0||d===0||(this.genericComposeSMask(t.context,n,u,d,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,o,u,d,h,f,g){let w=e.canvas,A=d-f,S=h-g;if(o)if(A<0||S<0||A+n>w.width||S+r>w.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,r),P=T.context;P.drawImage(w,-A,-S),P.globalCompositeOperation="destination-atop",P.fillStyle=o,P.fillRect(0,0,n,r),P.globalCompositeOperation="source-over",w=T.canvas,A=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(A,S,n,r),e.clip(T),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(A,S,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const C=new Path2D;C.rect(d,h,n,r),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(w,A,S,n,r,d,h,n,r),t.restore()}save(e){var n;this.inSMaskMode&&ig(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ig(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,i,o,u){var d;(d=this.dependencyTracker)==null||d.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,i,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[i]=n;if(!r){i||(i=n[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===iy.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(e,["transform"])}i instanceof Path2D||(i=n[0]=zN(i)),xe.axialAlignedBoundingBox(r,Zt(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var o;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const u=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,Ea(r),dr.STROKE,e),u){const d=new Path2D;d.addPath(t,r.getTransform().invertSelf().multiplySelf(u)),t=d}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,ri.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(dr.STROKE,Zt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var h,f,g;const r=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let u=!1;if(o){const w=i.isModifyingCurrentTransform()?r.getTransform():null;if((h=this.dependencyTracker)==null||h.save(e),r.save(),r.fillStyle=i.getPattern(r,this,Ea(r),dr.FILL,e),w){const A=new Path2D;A.addPath(t,r.getTransform().invertSelf().multiplySelf(w)),t=A}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(f=this.dependencyTracker)==null||f.recordDependencies(e,ri.fill),u&&(r.restore(),(g=this.dependencyTracker)==null||g.restore(e)),n&&this.consumePath(e,t,d)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,ri.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=sG}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=gR}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=n.getTransform().invertSelf();for(const{transform:o,x:u,y:d,fontSize:h,path:f}of t)f&&r.addPath(f,new DOMMatrix(o).preMultiplySelf(i).translate(u,d).scale(h,-h));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var g,w;(g=this.dependencyTracker)==null||g.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||Sb,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&He("Invalid font matrix for font "+t),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const o=r.loadedName||"sans-serif",u=((w=r.systemFontInfo)==null?void 0:w.css)||`"${o}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const h=r.italic?"italic":"normal";let f=n;n<cR?f=cR:n>uR&&(f=uR),this.current.fontSizeScale=n/f,this.ctx.font=`${h} ${d} ${f}px ${u}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,r,i,o){var P,O,N,j;const u=this.ctx,d=this.current,h=d.font,f=d.textRenderingMode,g=d.fontSize/d.fontSizeScale,w=f&Ln.FILL_STROKE_MASK,A=!!(f&Ln.ADD_TO_PATH_FLAG),S=d.patternFill&&!h.missingFile,C=d.patternStroke&&!h.missingFile;let T;if((h.disableFontFace||A||S||C)&&!h.missingFile&&(T=h.getPathGenerator(this.commonObjs,t)),T&&(h.disableFontFace||S||C)){u.save(),u.translate(n,r),u.scale(g,-g),(P=this.dependencyTracker)==null||P.recordCharacterBBox(e,u,h);let z;if(w===Ln.FILL||w===Ln.FILL_STROKE)if(i){z=u.getTransform(),u.setTransform(...i);const W=I(this,na,aC).call(this,T,z,i);u.fill(W)}else u.fill(T);if(w===Ln.STROKE||w===Ln.FILL_STROKE)if(o){z||(z=u.getTransform()),u.setTransform(...o);const{a:W,b:D,c:R,d:L}=z,U=xe.inverseTransform(o),V=xe.transform([W,D,R,L,0,0],U);xe.singularValueDecompose2dScale(V,js),u.lineWidth*=Math.max(js[0],js[1])/g,u.stroke(I(this,na,aC).call(this,T,z,o))}else u.lineWidth/=g,u.stroke(T);u.restore()}else(w===Ln.FILL||w===Ln.FILL_STROKE)&&(u.fillText(t,n,r),(O=this.dependencyTracker)==null||O.recordCharacterBBox(e,u,h,g,n,r,()=>u.measureText(t))),(w===Ln.STROKE||w===Ln.FILL_STROKE)&&(this.dependencyTracker&&((N=this.dependencyTracker)==null||N.recordCharacterBBox(e,u,h,g,n,r,()=>u.measureText(t)).recordDependencies(e,ri.stroke)),u.strokeText(t,n,r));A&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Zt(u),x:n,y:r,fontSize:g,path:T}),(j=this.dependencyTracker)==null||j.recordCharacterBBox(e,u,h,g,n,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return We(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var V,G,$,ye;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ri.showText).resetBBox(e),this.current.textRenderingMode&Ln.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(e,t),(V=this.dependencyTracker)==null||V.recordShowTextOperation(e);return}const i=n.fontSize;if(i===0){(G=this.dependencyTracker)==null||G.recordOperation(e);return}const o=this.ctx,u=n.fontSizeScale,d=n.charSpacing,h=n.wordSpacing,f=n.fontDirection,g=n.textHScale*f,w=t.length,A=r.vertical,S=A?1:-1,C=r.defaultVMetrics,T=i*n.fontMatrix[0],P=n.textRenderingMode===Ln.FILL&&!r.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),f>0?o.scale(g,-1):o.scale(g,1);let O,N;const j=n.textRenderingMode&Ln.FILL_STROKE_MASK,z=j===Ln.FILL||j===Ln.FILL_STROKE,W=j===Ln.STROKE||j===Ln.FILL_STROKE;if(z&&n.patternFill){o.save();const ce=n.fillColor.getPattern(o,this,Ea(o),dr.FILL,e);O=Zt(o),o.restore(),o.fillStyle=ce}if(W&&n.patternStroke){o.save();const ce=n.strokeColor.getPattern(o,this,Ea(o),dr.STROKE,e);N=Zt(o),o.restore(),o.strokeStyle=ce}let D=n.lineWidth;const R=n.textMatrixScale;if(R===0||D===0?W&&(D=this.getSinglePixelWidth()):D/=R,u!==1&&(o.scale(u,u),D/=u),o.lineWidth=D,r.isInvalidPDFjsFont){const ce=[];let he=0;for(const ae of t)ce.push(ae.unicode),he+=ae.width;const ge=ce.join("");if(o.fillText(ge,0,0),this.dependencyTracker!==null){const ae=o.measureText(ge);this.dependencyTracker.recordBBox(e,this.ctx,-ae.actualBoundingBoxLeft,ae.actualBoundingBoxRight,-ae.actualBoundingBoxAscent,ae.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=he*T*g,o.restore(),this.compose();return}let L=0,U;for(U=0;U<w;++U){const ce=t[U];if(typeof ce=="number"){L+=S*ce*i/1e3;continue}let he=!1;const ge=(ce.isSpace?h:0)+d,ae=ce.fontChar,_e=ce.accent;let fe,X,re=ce.width;if(A){const be=ce.vmetric||C,De=-(ce.vmetric?be[1]:re*.5)*T,Me=be[2]*T;re=be?-be[0]:re,fe=De/u,X=(L+Me)/u}else fe=L/u,X=0;let se;if(r.remeasure&&re>0){se=o.measureText(ae);const be=se.width*1e3/i*u;if(re<be&&this.isFontSubpixelAAEnabled){const De=re/be;he=!0,o.save(),o.scale(De,1),fe/=De}else re!==be&&(fe+=(re-be)/2e3*i/u)}if(this.contentVisible&&(ce.isInFont||r.missingFile)){if(P&&!_e)o.fillText(ae,fe,X),($=this.dependencyTracker)==null||$.recordCharacterBBox(e,o,se?{bbox:null}:r,i/u,fe,X,()=>se??o.measureText(ae));else if(this.paintChar(e,ae,fe,X,O,N),_e){const be=fe+i*_e.offset.x/u,De=X-i*_e.offset.y/u;this.paintChar(e,_e.fontChar,be,De,O,N)}}const we=A?re*T-ge*f:re*T+ge*f;L+=we,he&&o.restore()}A?n.y-=L:n.x+=L*g,o.restore(),this.compose(),(ye=this.dependencyTracker)==null||ye.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,r=this.current,i=r.font,o=r.fontSize,u=r.fontDirection,d=i.vertical?1:-1,h=r.charSpacing,f=r.wordSpacing,g=r.textHScale*u,w=r.fontMatrix||Sb,A=t.length,S=r.textRenderingMode===Ln.INVISIBLE;let C,T,P,O;if(S||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(g,u);const N=this.dependencyTracker;for(this.dependencyTracker=N?new R_(N,e):null,C=0;C<A;++C){if(T=t[C],typeof T=="number"){O=d*T*o/1e3,this.ctx.translate(O,0),r.x+=O*g;continue}const j=(T.isSpace?f:0)+h,z=i.charProcOperatorList[T.operatorListId];z?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...w),this.executeOperatorList(z),this.restore()):He(`Type3 character "${T.operatorListId}" is not available.`);const W=[T.width,0];xe.applyTransform(W,w),P=W[0]*o+j,n.translate(P,0),r.x+=P*g}n.restore(),N&&(this.dependencyTracker=N)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,i,o,u){var h;const d=new Path2D;d.rect(r,i,o-r,u-i),this.ctx.clip(d),(h=this.dependencyTracker)==null||h.recordBBox(e,this.ctx,r,o,i,u).recordClipBox(e,this.ctx,r,o,i,u),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const r=this.baseTransform||Zt(this.ctx),i={createCanvasGraphics:(o,u)=>new RF(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new R_(this.dependencyTracker,u,!0):null)};n=new rC(t,this.ctx,i,r)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=YW(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const r=this._getPattern(e,t);n.fillStyle=r.getPattern(n,this,Ea(n),dr.SHADING,e);const i=Ea(n);if(i){const{width:u,height:d}=n.canvas,h=nf.slice();xe.axialAlignedBoundingBox([0,0,u,d],i,h);const[f,g,w,A]=h;this.ctx.fillRect(f,g,w-f,A-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ri.transform).recordDependencies(e,ri.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){wt("Should not call beginInlineImage")}beginImageData(){wt("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Zt(this.ctx),n)){xe.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,o,u,d]=n,h=new Path2D;h.rect(i,o,u-i,d-o),this.ctx.clip(h),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,u,o,d),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var N;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||L1("TODO: Support non-isolated groups."),t.knockout&&He("Knockout groups not supported.");const r=Zt(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=nf.slice();xe.axialAlignedBoundingBox(t.bbox,Zt(n),i);const o=[0,0,n.canvas.width,n.canvas.height];i=xe.intersect(i,o)||[0,0,0,0];const u=Math.floor(i[0]),d=Math.floor(i[1]),h=Math.max(Math.ceil(i[2])-u,1),f=Math.max(Math.ceil(i[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const w=this.cachedCanvases.getCanvas(g,h,f),A=w.context;A.translate(-u,-d),A.transform(...r);let S=new Path2D;const[C,T,P,O]=t.bbox;if(S.rect(C,T,P-C,O-T),t.matrix){const j=new Path2D;j.addPath(S,new DOMMatrix(t.matrix)),S=j}A.clip(S),t.smask&&this.smaskStack.push({canvas:w.canvas,context:A,offsetX:u,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,d),n.save()),ig(n,A),this.ctx=A,(N=this.dependencyTracker)==null||N.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Zt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const u=nf.slice();xe.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(e,t,n,r,i,o){if(I(this,na,sC).call(this),lA(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],d=n[3]-n[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=d,xe.singularValueDecompose2dScale(Zt(this.ctx),js);const{viewportScale:h}=this,f=Math.ceil(u*this.outputScaleX*h),g=Math.ceil(d*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:w,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(js[0],0,0,-js[1],0,d*js[1]),lA(this.ctx)}else{lA(this.ctx),this.endPath(e);const h=new Path2D;h.rect(n[0],n[1],u,d),this.ctx.clip(h)}}this.current=new hR(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),I(this,na,iC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var u;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const r=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,i=0,o,u){var g,w,A;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const h=Zt(d);d.transform(n,r,i,o,0,0);const f=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),(g=this.dependencyTracker)==null||g.resetBBox(e);for(let S=0,C=u.length;S<C;S+=2){const T=xe.transform(h,[n,r,i,o,u[S],u[S+1]]);d.drawImage(f.canvas,T[4],T[5]),(w=this.dependencyTracker)==null||w.recordBBox(e,this.ctx,T[4],T[4]+f.canvas.width,T[5],T[5]+f.canvas.height)}d.restore(),this.compose(),(A=this.dependencyTracker)==null||A.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,u,d;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,ri.transformAndFill);for(const h of t){const{data:f,width:g,height:w,transform:A}=h,S=this.cachedCanvases.getCanvas("maskCanvas",g,w),C=S.context;C.save();const T=this.getObject(e,f,h);fR(C,T),C.globalCompositeOperation="source-in",C.fillStyle=i?r.getPattern(C,this,Ea(n),dr.FILL,e):r,C.fillRect(0,0,g,w),C.restore(),n.save(),n.transform(...A),n.scale(1,-1),oA(n,S.canvas,0,0,g,w,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(e,n,0,g,0,w),n.restore()}this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){He("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,r,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){He("Dependent image isn't ready yet");return}const u=o.width,d=o.height,h=[];for(let f=0,g=i.length;f<g;f+=2)h.push({transform:[n,0,0,r,i[f],i[f+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(e,o,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var h;if(!this.contentVisible)return;const n=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/n,-1/r);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,r).context;pR(g,t),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,Ea(i));i.imageSmoothingEnabled=mR(Zt(i),t.interpolate),(h=this.dependencyTracker)==null||h.resetBBox(e).recordBBox(e,i,0,n,-r,0).recordDependencies(e,ri.imageXObject).recordOperation(e),oA(i,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,n,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var o,u,d;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const h=t.width,f=t.height,w=this.cachedCanvases.getCanvas("inlineImage",h,f).context;pR(w,t),i=this.applyTransferMapsToCanvas(w)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const h of n)r.save(),r.transform(...h.transform),r.scale(1,-1),oA(r,i,h.x,h.y,h.w,h.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(e,r,0,1,-1,0),r.restore();(d=this.dependencyTracker)==null||d.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ri.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var o,u;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===gR?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(u=this.dependencyTracker)==null||u.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Zt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let o,u;if(n===0&&r===0){const d=Math.abs(t),h=Math.abs(i);if(d===h)if(e===0)o=u=1/d;else{const f=d*e;o=u=f<1?1/f:1}else if(e===0)o=1/d,u=1/h;else{const f=d*e,g=h*e;o=f<1?1/f:1,u=g<1?1/g:1}}else{const d=Math.abs(t*i-n*r),h=Math.hypot(t,n),f=Math.hypot(r,i);if(e===0)o=f/d,u=h/d;else{const g=e*d;o=f>g?f/g:1,u=h>g?h/g:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){n.lineWidth=(r||1)*i,n.stroke(e);return}const u=n.getLineDash();t&&n.save(),n.scale(i,o),GE.a=1/i,GE.d=1/o;const d=new Path2D;if(d.addPath(e,GE),u.length>0){const h=Math.max(i,o);n.setLineDash(u.map(f=>f/h)),n.lineDashOffset/=h}n.lineWidth=r||1,n.stroke(d),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};na=new WeakSet,sC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},iC=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},aC=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let ff=RF;for(const s in iy)ff.prototype[s]!==void 0&&(ff.prototype[iy[s]]=ff.prototype[s]);var Yy,Jy;class Qa{static get workerPort(){return c(this,Yy)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");_(this,Yy,e)}static get workerSrc(){return c(this,Jy)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");_(this,Jy,e)}}Yy=new WeakMap,Jy=new WeakMap,F(Qa,Yy,null),F(Qa,Jy,"");var Jf,Zy;class iG{constructor({parsedData:e,rawData:t}){F(this,Jf);F(this,Zy);_(this,Jf,e),_(this,Zy,t)}getRaw(){return c(this,Zy)}get(e){return c(this,Jf).get(e)??null}[Symbol.iterator](){return c(this,Jf).entries()}}Jf=new WeakMap,Zy=new WeakMap;const Yp=Symbol("INTERNAL");var ew,tw,nw,Zf;class aG{constructor(e,{name:t,intent:n,usage:r,rbGroups:i}){F(this,ew,!1);F(this,tw,!1);F(this,nw,!1);F(this,Zf,!0);_(this,ew,!!(e&Us.DISPLAY)),_(this,tw,!!(e&Us.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=i}get visible(){if(c(this,nw))return c(this,Zf);if(!c(this,Zf))return!1;const{print:e,view:t}=this.usage;return c(this,ew)?(t==null?void 0:t.viewState)!=="OFF":c(this,tw)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Yp&&wt("Internal method `_setVisible` called."),_(this,nw,n),_(this,Zf,t)}}ew=new WeakMap,tw=new WeakMap,nw=new WeakMap,Zf=new WeakMap;var zc,kt,em,tm,rw,oC;class oG{constructor(e,t=Us.DISPLAY){F(this,rw);F(this,zc,null);F(this,kt,new Map);F(this,em,null);F(this,tm,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,_(this,tm,e.order);for(const n of e.groups)c(this,kt).set(n.id,new aG(t,n));if(e.baseState==="OFF")for(const n of c(this,kt).values())n._setVisible(Yp,!1);for(const n of e.on)c(this,kt).get(n)._setVisible(Yp,!0);for(const n of e.off)c(this,kt).get(n)._setVisible(Yp,!1);_(this,em,this.getHash())}}isVisible(e){if(c(this,kt).size===0)return!0;if(!e)return L1("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,kt).has(e.id)?c(this,kt).get(e.id).visible:(He(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return I(this,rw,oC).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,kt).has(t))return He(`Optional content group not found: ${t}`),!0;if(c(this,kt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,kt).has(t))return He(`Optional content group not found: ${t}`),!0;if(!c(this,kt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,kt).has(t))return He(`Optional content group not found: ${t}`),!0;if(!c(this,kt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,kt).has(t))return He(`Optional content group not found: ${t}`),!0;if(c(this,kt).get(t).visible)return!1}return!0}return He(`Unknown optional content policy ${e.policy}.`),!0}return He(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const r=c(this,kt).get(e);if(!r){He(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const u of o)u!==e&&((i=c(this,kt).get(u))==null||i._setVisible(Yp,!1,!0));r._setVisible(Yp,!!t,!0),_(this,zc,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const i=c(this,kt).get(r);if(i)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}_(this,zc,null)}get hasInitialVisibility(){return c(this,em)===null||this.getHash()===c(this,em)}getOrder(){return c(this,kt).size?c(this,tm)?c(this,tm).slice():[...c(this,kt).keys()]:null}getGroup(e){return c(this,kt).get(e)||null}getHash(){if(c(this,zc)!==null)return c(this,zc);const e=new EM;for(const[t,n]of c(this,kt))e.update(`${t}:${n.visible}`);return _(this,zc,e.hexdigest())}[Symbol.iterator](){return c(this,kt).entries()}}zc=new WeakMap,kt=new WeakMap,em=new WeakMap,tm=new WeakMap,rw=new WeakSet,oC=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=I(this,rw,oC).call(this,i);else if(c(this,kt).has(i))o=c(this,kt).get(i).visible;else return He(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};var sw,iw;class V1{constructor(e,t,n){F(this,sw,null);F(this,iw,null);ne(this,"_fullReader",null);ne(this,"_rangeReaders",new Set);ne(this,"_source",null);this._source=e,_(this,sw,t),_(this,iw,n)}get _progressiveDataLength(){var e;return((e=this._fullReader)==null?void 0:e._loaded)??0}getFullReader(){return yt(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(c(this,sw))(this)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new(c(this,iw))(this,e,t);return this._rangeReaders.add(n),n}cancelAllRequests(e){var t;(t=this._fullReader)==null||t.cancel(e);for(const n of new Set(this._rangeReaders))n.cancel(e)}}sw=new WeakMap,iw=new WeakMap;class U1{constructor(e){ne(this,"onProgress",null);ne(this,"_contentLength",0);ne(this,"_filename",null);ne(this,"_headersCapability",Promise.withResolvers());ne(this,"_isRangeSupported",!1);ne(this,"_isStreamingSupported",!1);ne(this,"_loaded",0);ne(this,"_stream",null);this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){wt("Abstract method `read` called")}cancel(e){wt("Abstract method `cancel` called")}}class j1{constructor(e,t,n){ne(this,"_stream",null);this._stream=e}async read(){wt("Abstract method `read` called")}cancel(e){wt("Abstract method `cancel` called")}}function yR(s){return s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}var aw,lC;class lG extends V1{constructor(t){super(t,cG,uG);F(this,aw);ne(this,"_progressiveDone",!1);ne(this,"_queuedChunks",[]);const{pdfDataRangeTransport:n}=t,{initialData:r,progressiveDone:i}=n;if((r==null?void 0:r.length)>0){const o=yR(r);this._queuedChunks.push(o)}this._progressiveDone=i,n.addRangeListener((o,u)=>{I(this,aw,lC).call(this,o,u)}),n.addProgressListener((o,u)=>{var d,h;u!==void 0&&((h=(d=this._fullReader)==null?void 0:d.onProgress)==null||h.call(d,{loaded:o,total:u}))}),n.addProgressiveReadListener(o=>{I(this,aw,lC).call(this,void 0,o)}),n.addProgressiveDoneListener(()=>{var o;(o=this._fullReader)==null||o.progressiveDone(),this._progressiveDone=!0}),n.transportReady()}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,n){const r=super.getRangeReader(t,n);return r&&(r.onDone=()=>this._rangeReaders.delete(r),this._source.pdfDataRangeTransport.requestDataRange(t,n)),r}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}aw=new WeakSet,lC=function(t,n){const r=yR(n);if(t===void 0)this._fullReader?this._fullReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.keys().find(o=>o._begin===t);yt(i,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),i._enqueue(r)}};class cG extends U1{constructor(t){super(t);ne(this,"_done",!1);ne(this,"_queuedChunks",null);ne(this,"_requests",[]);const{pdfDataRangeTransport:n,disableRange:r,disableStream:i}=t._source,{length:o,contentDispositionFilename:u}=n;this._queuedChunks=t._queuedChunks||[];for(const d of this._queuedChunks)this._loaded+=d.byteLength;this._done=t._progressiveDone,this._contentLength=o,this._isStreamingSupported=!i,this._isRangeSupported=!r,AF(u)&&(this._filename=u),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class uG extends j1{constructor(t,n,r){super(t,n,r);ne(this,"onDone",null);ne(this,"_begin",-1);ne(this,"_done",!1);ne(this,"_queuedChunk",null);ne(this,"_requests",[]);this._begin=n}_enqueue(t){var n;if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(n=this.onDone)==null||n.call(this)}}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onDone)==null||n.call(this)}}function dG(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let f=u(t);return f=unescape(f),f=d(f),f=h(f),i(f)}if(t=o(s),t){const f=h(t);return i(f)}if(t=n("filename","i").exec(s),t){t=t[1];let f=u(t);return f=h(f),i(f)}function n(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function r(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const w=new TextDecoder(f,{fatal:!0}),A=O1(g);g=w.decode(A),e=!1}catch{}}return g}function i(f){return e&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),e&&(f=r("iso-8859-1",f))),f}function o(f){const g=[];let w;const A=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=A.exec(f))!==null;){let[,C,T,P]=w;if(C=parseInt(C,10),C in g){if(C===0)break;continue}g[C]=[T,P]}const S=[];for(let C=0;C<g.length&&C in g;++C){let[T,P]=g[C];P=u(P),T&&(P=unescape(P),C===0&&(P=d(P))),S.push(P)}return S.join("")}function u(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let w=0;w<g.length;++w){const A=g[w].indexOf('"');A!==-1&&(g[w]=g[w].slice(0,A),g.length=w+1),g[w]=g[w].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function d(f){const g=f.indexOf("'");if(g===-1)return f;const w=f.slice(0,g),S=f.slice(g+1).replace(/^[^']*'/,"");return r(w,S)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,w,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,T){return String.fromCharCode(parseInt(T,16))}),r(w,S);try{S=atob(S)}catch{}return r(w,S)})}return""}function MM(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function $1(s){var e;return((e=URL.parse(s))==null?void 0:e.origin)??null}function LM({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(s.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function OM(s){const e=s.get("Content-Disposition");if(e){let t=dG(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(AF(t))return t}return null}function z1(s,e){return new S_(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function BM(s,e){if(s!==e)throw new Error(`Expected range response-origin "${s}" to match "${e}".`)}function VM(s,e,t,n){return fetch(s,{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"})}function UM(s,e){if(s!==200&&s!==206)throw z1(s,e)}function jM(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(He(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class hG extends V1{constructor(t){super(t,pG,fG);ne(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(t.url),this.headers=MM(this.isHttp,t.httpHeaders)}}class pG extends U1{constructor(t){super(t);ne(this,"_abortController",new AbortController);ne(this,"_reader",null);const{disableRange:n,disableStream:r,length:i,rangeChunkSize:o,url:u,withCredentials:d}=t._source;this._contentLength=i,this._isStreamingSupported=!r,this._isRangeSupported=!n;const h=new Headers(t.headers);VM(u,h,d,this._abortController).then(f=>{t._responseOrigin=$1(f.url),UM(f.status,u),this._reader=f.body.getReader();const g=f.headers,{allowRangeRequests:w,suggestedLength:A}=LM({responseHeaders:g,isHttp:t.isHttp,rangeChunkSize:o,disableRange:n});this._isRangeSupported=w,this._contentLength=A||this._contentLength,this._filename=OM(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Pu("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var r;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:jM(t),done:!1})}cancel(t){var n;(n=this._reader)==null||n.cancel(t),this._abortController.abort()}}class fG extends j1{constructor(t,n,r){super(t,n,r);ne(this,"_abortController",new AbortController);ne(this,"_readCapability",Promise.withResolvers());ne(this,"_reader",null);const{url:i,withCredentials:o}=t._source,u=new Headers(t.headers);u.append("Range",`bytes=${n}-${r-1}`),VM(i,u,o,this._abortController).then(d=>{const h=$1(d.url);BM(h,t._responseOrigin),UM(d.status,i),this._reader=d.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:{value:jM(t),done:!1}}cancel(t){var n;(n=this._reader)==null||n.cancel(t),this._abortController.abort()}}const qE=200,wR=206;function mG(s){return typeof s!="string"?s:O1(s).buffer}var Va,Km,$M,zM;class gG extends V1{constructor(t){super(t,yG,wG);F(this,Km);F(this,Va,new WeakMap);ne(this,"_responseOrigin",null);this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=MM(this.isHttp,t.httpHeaders)}_request(t){const n=new XMLHttpRequest,r={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};c(this,Va).set(n,r),n.open("GET",this.url),n.withCredentials=this._source.withCredentials;for(const[i,o]of this.headers)n.setRequestHeader(i,o);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.validateStatus=i=>i===wR||i===qE):r.validateStatus=i=>i===qE,n.responseType="arraybuffer",yt(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>t.onError(n.status),n.onreadystatechange=I(this,Km,zM).bind(this,n),n.onprogress=I(this,Km,$M).bind(this,n),n.send(null),n}_abortRequest(t){c(this,Va).has(t)&&(c(this,Va).delete(t),t.abort())}getRangeReader(t,n){const r=super.getRangeReader(t,n);return r&&(r.onClosed=()=>this._rangeReaders.delete(r)),r}}Va=new WeakMap,Km=new WeakSet,$M=function(t,n){var i;const r=c(this,Va).get(t);(i=r==null?void 0:r.onProgress)==null||i.call(r,n)},zM=function(t,n){const r=c(this,Va).get(t);if(!r||(t.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),t.readyState!==4)||!c(this,Va).has(t))return;if(c(this,Va).delete(t),t.status===0&&this.isHttp){r.onError(t.status);return}const i=t.status||qE;if(!r.validateStatus(i)){r.onError(t.status);return}const o=mG(t.response);if(i===wR){const u=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(u)?r.onDone(o):(He('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone(o):r.onError(t.status)};var oo,HM,WM,GM,qM;class yG extends U1{constructor(t){super(t);F(this,oo);ne(this,"_cachedChunks",[]);ne(this,"_done",!1);ne(this,"_requests",[]);ne(this,"_storedError",null);const{length:n}=t._source;this._contentLength=n,this._fullRequestXhr=t._request({onHeadersReceived:I(this,oo,HM).bind(this),onDone:I(this,oo,WM).bind(this),onError:I(this,oo,GM).bind(this),onProgress:I(this,oo,qM).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}oo=new WeakSet,HM=function(){const t=this._stream,{disableRange:n,rangeChunkSize:r}=t._source,i=this._fullRequestXhr;t._responseOrigin=$1(i.responseURL);const o=i.getAllResponseHeaders(),u=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[g,...w]=f.split(": ");return[g,w.join(": ")]}):[]),{allowRangeRequests:d,suggestedLength:h}=LM({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:r,disableRange:n});d&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=OM(u),this._isRangeSupported&&t._abortRequest(i),this._headersCapability.resolve()},WM=function(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}},GM=function(t){this._storedError=z1(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},qM=function(t){var n;(n=this.onProgress)==null||n.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})};var Rl,KM,QM,cC;class wG extends j1{constructor(t,n,r){super(t,n,r);F(this,Rl);ne(this,"onClosed",null);ne(this,"_done",!1);ne(this,"_queuedChunk",null);ne(this,"_requests",[]);ne(this,"_storedError",null);this._requestXhr=t._request({begin:n,end:r,onHeadersReceived:I(this,Rl,KM).bind(this),onDone:I(this,Rl,QM).bind(this),onError:I(this,Rl,cC).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(n=this.onClosed)==null||n.call(this)}}Rl=new WeakSet,KM=function(){var n;const t=$1((n=this._requestXhr)==null?void 0:n.responseURL);try{BM(t,this._stream._responseOrigin)}catch(r){this._storedError=r,I(this,Rl,cC).call(this,0)}},QM=function(t){var n;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onClosed)==null||n.call(this)},cC=function(t){this._storedError??(this._storedError=z1(t,this._stream.url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const vG=/^[a-z][a-z0-9\-+.]+:/i;function AG(s){if(vG.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}function XM(s){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(s):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(s)}function YM(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(He(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class _G extends V1{constructor(e){super(e,xG,EG),this.url=AG(e.url),yt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class xG extends U1{constructor(t){super(t);ne(this,"_reader",null);const{disableRange:n,disableStream:r,length:i,rangeChunkSize:o}=t._source;this._contentLength=i,this._isStreamingSupported=!r,this._isRangeSupported=!n;const u=t.url,d=process.getBuiltinModule("fs");d.promises.lstat(u).then(h=>{const f=d.createReadStream(u),g=XM(f);this._reader=g.getReader();const{size:w}=h;w<=2*o&&(this._isRangeSupported=!1),this._contentLength=w,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Pu("Streaming is disabled.")),this._headersCapability.resolve()}).catch(h=>{h.code==="ENOENT"&&(h=z1(0,u.href)),this._headersCapability.reject(h)})}async read(){var r;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:YM(t),done:!1})}cancel(t){var n;(n=this._reader)==null||n.cancel(t)}}class EG extends j1{constructor(t,n,r){super(t,n,r);ne(this,"_readCapability",Promise.withResolvers());ne(this,"_reader",null);const i=t.url,o=process.getBuiltinModule("fs");try{const u=o.createReadStream(i,{start:n,end:r-1}),d=XM(u);this._reader=d.getReader(),this._readCapability.resolve()}catch(u){this._readCapability.reject(u)}}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:{value:YM(t),done:!1}}cancel(t){var n;(n=this._reader)==null||n.cancel(t)}}const ag=Symbol("INITIAL_DATA");var Cs,ow,uC;class JM{constructor(){F(this,ow);F(this,Cs,Object.create(null))}get(e,t=null){if(t){const r=I(this,ow,uC).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=c(this,Cs)[e];if(!n||n.data===ag)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=c(this,Cs)[e];return!!t&&t.data!==ag}delete(e){const t=c(this,Cs)[e];return!t||t.data===ag?!1:(delete c(this,Cs)[e],!0)}resolve(e,t=null){const n=I(this,ow,uC).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in c(this,Cs)){const{data:n}=c(this,Cs)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}_(this,Cs,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,Cs)){const{data:t}=c(this,Cs)[e];t!==ag&&(yield[e,t])}}}Cs=new WeakMap,ow=new WeakSet,uC=function(e){var t;return(t=c(this,Cs))[e]||(t[e]={...Promise.withResolvers(),data:ag})};const bG=1e5,vR=30;var bR,Hc,rs,lw,cw,Yd,tl,uw,dw,Jd,hw,nm,Wc,rm,pw,sm,Zd,fw,mw,im,eh,gw,am,om,Dl,ZM,eL,dC,Gs,MA,hC,tL,nL;const rr=class rr{constructor({textContentSource:e,container:t,viewport:n}){F(this,Dl);F(this,Hc,Promise.withResolvers());F(this,rs,null);F(this,lw,!1);F(this,cw,!!((bR=globalThis.FontInspector)!=null&&bR.enabled));F(this,Yd,null);F(this,tl,null);F(this,uw,0);F(this,dw,0);F(this,Jd,null);F(this,hw,null);F(this,nm,0);F(this,Wc,0);F(this,rm,Object.create(null));F(this,pw,[]);F(this,sm,null);F(this,Zd,[]);F(this,fw,new WeakMap);F(this,mw,null);var d;if(e instanceof ReadableStream)_(this,sm,e);else if(typeof e=="object")_(this,sm,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');_(this,rs,_(this,hw,t)),_(this,Wc,n.scale*ao.pixelRatio),_(this,nm,n.rotation),_(this,tl,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:u}=n.rawDims;_(this,mw,[1,0,0,-1,-o,u+i]),_(this,dw,r),_(this,uw,i),I(d=rr,Gs,tL).call(d),t.style.setProperty("--min-font-size",c(rr,am)),Hh(t,n),c(this,Hc).promise.finally(()=>{c(rr,om).delete(this),_(this,tl,null),_(this,rm,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=jn.platform;return We(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Jd).read().then(({value:t,done:n})=>{if(n){c(this,Hc).resolve();return}c(this,Yd)??_(this,Yd,t.lang),Object.assign(c(this,rm),t.styles),I(this,Dl,ZM).call(this,t.items),e()},c(this,Hc).reject)};return _(this,Jd,c(this,sm).getReader()),c(rr,om).add(this),e(),c(this,Hc).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*ao.pixelRatio,r=e.rotation;if(r!==c(this,nm)&&(t==null||t(),_(this,nm,r),Hh(c(this,hw),{rotation:r})),n!==c(this,Wc)){t==null||t(),_(this,Wc,n);const o={div:null,properties:null,ctx:I(i=rr,Gs,MA).call(i,c(this,Yd))};for(const u of c(this,Zd))o.properties=c(this,fw).get(u),o.div=u,I(this,Dl,dC).call(this,o)}}cancel(){var t;const e=new Pu("TextLayer task cancelled.");(t=c(this,Jd))==null||t.cancel(e).catch(()=>{}),_(this,Jd,null),c(this,Hc).reject(e)}get textDivs(){return c(this,Zd)}get textContentItemsStr(){return c(this,pw)}static cleanup(){if(!(c(this,om).size>0)){c(this,im).clear();for(const{canvas:e}of c(this,eh).values())e.remove();c(this,eh).clear()}}};Hc=new WeakMap,rs=new WeakMap,lw=new WeakMap,cw=new WeakMap,Yd=new WeakMap,tl=new WeakMap,uw=new WeakMap,dw=new WeakMap,Jd=new WeakMap,hw=new WeakMap,nm=new WeakMap,Wc=new WeakMap,rm=new WeakMap,pw=new WeakMap,sm=new WeakMap,Zd=new WeakMap,fw=new WeakMap,mw=new WeakMap,im=new WeakMap,eh=new WeakMap,gw=new WeakMap,am=new WeakMap,om=new WeakMap,Dl=new WeakSet,ZM=function(e){var r,i;if(c(this,lw))return;(i=c(this,tl)).ctx??(i.ctx=I(r=rr,Gs,MA).call(r,c(this,Yd)));const t=c(this,Zd),n=c(this,pw);for(const o of e){if(t.length>bG){He("Ignoring additional textDivs for performance reasons."),_(this,lw,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const u=c(this,rs);_(this,rs,document.createElement("span")),c(this,rs).classList.add("markedContent"),o.id&&c(this,rs).setAttribute("id",`${o.id}`),o.tag==="Artifact"&&(c(this,rs).ariaHidden=!0),u.append(c(this,rs))}else o.type==="endMarkedContent"&&_(this,rs,c(this,rs).parentNode);continue}n.push(o.str),I(this,Dl,eL).call(this,o)}},eL=function(e){var S;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Zd).push(t);const r=xe.transform(c(this,mw),e.transform);let i=Math.atan2(r[1],r[0]);const o=c(this,rm)[e.fontName];o.vertical&&(i+=Math.PI/2);let u=c(this,cw)&&o.fontSubstitution||o.fontFamily;u=rr.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),h=d*I(S=rr,Gs,nL).call(S,u,o,c(this,Yd));let f,g;i===0?(f=r[4],g=r[5]-h):(f=r[4]+h*Math.sin(i),g=r[5]-h*Math.cos(i));const w=t.style;w.left=`${(100*f/c(this,dw)).toFixed(2)}%`,w.top=`${(100*g/c(this,uw)).toFixed(2)}%`,w.setProperty("--font-height",`${d.toFixed(2)}px`),w.fontFamily=u,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,cw)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),T=Math.abs(e.transform[3]);C!==T&&Math.max(C,T)/Math.min(C,T)>1.5&&(A=!0)}if(A&&(n.canvasWidth=o.vertical?e.height:e.width),c(this,fw).set(t,n),c(this,tl).div=t,c(this,tl).properties=n,I(this,Dl,dC).call(this,c(this,tl)),n.hasText&&c(this,rs).append(t),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),c(this,rs).append(C)}},dC=function(e){var o;const{div:t,properties:n,ctx:r}=e,{style:i}=t;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=i,{canvasWidth:d,fontSize:h}=n;I(o=rr,Gs,hC).call(o,r,h*c(this,Wc),u);const{width:f}=r.measureText(t.textContent);f>0&&i.setProperty("--scale-x",d*c(this,Wc)/f)}n.angle!==0&&i.setProperty("--rotate",`${n.angle}deg`)},Gs=new WeakSet,MA=function(e=null){let t=c(this,eh).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,eh).set(e,t),c(this,gw).set(t,{size:0,family:""})}return t},hC=function(e,t,n){const r=c(this,gw).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},tL=function(){if(c(this,am)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),_(this,am,e.getBoundingClientRect().height),e.remove()},nL=function(e,t,n){const r=c(this,im).get(e);if(r)return r;const i=I(this,Gs,MA).call(this,n);i.canvas.width=i.canvas.height=vR,I(this,Gs,hC).call(this,i,vR,e);const o=i.measureText(""),u=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let h=.8;return u?h=u/(u+d):(jn.platform.isFirefox&&He("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),c(this,im).set(e,h),h},F(rr,Gs),F(rr,im,new Map),F(rr,eh,new Map),F(rr,gw,new WeakMap),F(rr,am,null),F(rr,om,new Set);let ly=rr;const CG=100;function rL(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new pC,{docId:t}=e,n=s.url?DW(s.url):null,r=s.data?NW(s.data):null,i=s.httpHeaders||null,o=s.withCredentials===!0,u=s.password??null,d=s.range instanceof sL?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let f=s.worker instanceof cy?s.worker:null;const g=s.verbosity,w=typeof s.docBaseUrl=="string"&&!B1(s.docBaseUrl)?s.docBaseUrl:null,A=rA(s.cMapUrl),S=s.cMapPacked!==!1,C=s.CMapReaderFactory||(Ur?$W:rR),T=rA(s.iccUrl),P=rA(s.standardFontDataUrl),O=s.StandardFontDataFactory||(Ur?zW:sR),N=rA(s.wasmUrl),j=s.WasmFactory||(Ur?HW:iR),z=s.stopAtErrors!==!0,W=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,D=s.isEvalSupported!==!1,R=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Ur,L=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Ur&&(jn.platform.isFirefox||!globalThis.chrome),U=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,V=typeof s.disableFontFace=="boolean"?s.disableFontFace:Ur,G=s.fontExtraProperties===!0,$=s.enableXfa===!0,ye=s.ownerDocument||globalThis.document,ce=s.disableRange===!0,he=s.disableStream===!0,ge=s.disableAutoFetch===!0,ae=s.pdfBug===!0,_e=s.CanvasFactory||(Ur?jW:BW),fe=s.FilterFactory||(Ur?UW:VW),X=s.enableHWA===!0,re=s.useWasm!==!1,se=d?d.length:s.length??NaN,we=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Ur&&!V,be=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(C===rR&&O===sR&&j===iR&&A&&P&&N&&mg(A,document.baseURI)&&mg(P,document.baseURI)&&mg(N,document.baseURI)),De=null;aW(g);const Me={canvasFactory:new _e({ownerDocument:ye,enableHWA:X}),filterFactory:new fe({docId:t,ownerDocument:ye}),cMapReaderFactory:be?null:new C({baseUrl:A,isCompressed:S}),standardFontDataFactory:be?null:new O({baseUrl:P}),wasmFactory:be?null:new j({baseUrl:N})};f||(f=cy.create({verbosity:g,port:Qa.workerPort}),e._worker=f);const et={docId:t,apiVersion:"5.4.624",data:r,password:u,disableAutoFetch:ge,rangeChunkSize:h,length:se,docBaseUrl:w,enableXfa:$,evaluatorOptions:{maxImageSize:W,disableFontFace:V,ignoreErrors:z,isEvalSupported:D,isOffscreenCanvasSupported:R,isImageDecoderSupported:L,canvasMaxAreaInBytes:U,fontExtraProperties:G,useSystemFonts:we,useWasm:re,useWorkerFetch:be,cMapUrl:A,iccUrl:T,standardFontDataUrl:P,wasmUrl:N}},ft={ownerDocument:ye,pdfBug:ae,styleElement:De,enableHWA:X,loadingParams:{disableAutoFetch:ge,enableXfa:$}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const fn=f.messageHandler.sendWithPromise("GetDocRequest",et,r?[r.buffer]:null);let Hr;if(d)Hr=new lG({pdfDataRangeTransport:d,disableRange:ce,disableStream:he});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const po=mg(n)?hG:Ur?_G:gG;Hr=new po({url:n,length:se,httpHeaders:i,withCredentials:o,rangeChunkSize:h,disableRange:ce,disableStream:he})}return fn.then(po=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const bi=new Eg(t,po,f.port),Nl=new TG(bi,e,Hr,ft,Me);e._transport=Nl,bi.send("Ready",null)})}).catch(e._capability.reject),e}var K_;const Q_=class Q_{constructor(){ne(this,"_capability",Promise.withResolvers());ne(this,"_transport",null);ne(this,"_worker",null);ne(this,"docId",`d${Mn(Q_,K_)._++}`);ne(this,"destroyed",!1);ne(this,"onPassword",null);ne(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};K_=new WeakMap,F(Q_,K_,0);let pC=Q_;var th,yw,ww,vw,Aw;class sL{constructor(e,t,n=!1,r=null){F(this,th,Promise.withResolvers());F(this,yw,[]);F(this,ww,[]);F(this,vw,[]);F(this,Aw,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){c(this,Aw).push(e)}addProgressListener(e){c(this,vw).push(e)}addProgressiveReadListener(e){c(this,ww).push(e)}addProgressiveDoneListener(e){c(this,yw).push(e)}onDataRange(e,t){for(const n of c(this,Aw))n(e,t)}onDataProgress(e,t){c(this,th).promise.then(()=>{for(const n of c(this,vw))n(e,t)})}onDataProgressiveRead(e){c(this,th).promise.then(()=>{for(const t of c(this,ww))t(e)})}onDataProgressiveDone(){c(this,th).promise.then(()=>{for(const e of c(this,yw))e()})}transportReady(){c(this,th).resolve()}requestDataRange(e,t){wt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}th=new WeakMap,yw=new WeakMap,ww=new WeakMap,vw=new WeakMap,Aw=new WeakMap;class SG{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return We(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var nl,_w,nh,Tg;class FG{constructor(e,t,n,r=!1){F(this,nh);F(this,nl,!1);F(this,_w,oy.instance);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new XP:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new JM,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new C0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return We(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:i=wc.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:w=!1,recordOperations:A=!1,operationsFilter:S=null}){var L,U,V;(L=this._stats)==null||L.time("Overall");const C=this._transport.getRenderingIntent(r,i,g,w),{renderingIntent:T,cacheKey:P}=C;_(this,nl,!1),d||(d=this._transport.getOptionalContentConfig(T));let O=this._intentStates.get(P);O||(O=Object.create(null),this._intentStates.set(P,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const N=!!(T&Us.PRINT);O.displayReadyCapability||(O.displayReadyCapability=Promise.withResolvers(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(U=this._stats)==null||U.time("Page Request"),this._pumpOperatorList(C));const j=!!(this._pdfBug&&((V=globalThis.StepperManager)!=null&&V.enabled)),z=!this.recordedBBoxes&&(A||j),W=G=>{var $,ye;if(O.renderTasks.delete(D),z){const ce=($=D.gfx)==null?void 0:$.dependencyTracker.take();ce&&(D.stepper&&D.stepper.setOperatorBBoxes(ce,D.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=ce))}N&&_(this,nl,!0),I(this,nh,Tg).call(this),G?(D.capability.reject(G),this._abortOperatorList({intentState:O,reason:G instanceof Error?G:new Error(G)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(ye=globalThis.Stats)!=null&&ye.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new fC({callback:W,params:{canvas:t,canvasContext:e,dependencyTracker:z?new GW(t,O.operatorList.length,j):null,viewport:n,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:S});(O.renderTasks||(O.renderTasks=new Set)).add(D);const R=D.task;return Promise.all([O.displayReadyCapability.promise,d]).then(([G,$])=>{var ye;if(this.destroyed){W();return}if((ye=this._stats)==null||ye.time("Rendering"),!($.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:G,optionalContentConfig:$}),D.operatorListChanged()}).catch(W),R}getOperatorList({intent:e="display",annotationMode:t=wc.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var h;function i(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const o=this._transport.getRenderingIntent(e,t,n,r,!0);let u=this._intentStates.get(o.cacheKey);u||(u=Object.create(null),this._intentStates.set(o.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=i,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:c(this,_w).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ay.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function i(){o.read().then(function({value:d,done:h}){if(h){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),i()},r)}const o=t.getReader(),u={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),_(this,nl,!1),Promise.all(e)}cleanup(e=!1){_(this,nl,!0);const t=I(this,nh,Tg).call(this);return e&&t&&this._stats&&(this._stats=new XP),t}_startRenderPage(e,t){var r,i;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&I(this,nh,Tg).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:i,transfer:o}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:c(this,_w).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),h=this._intentStates.get(t);h.streamReader=d;const f=()=>{d.read().then(({value:g,done:w})=>{if(w){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const w of h.renderTasks)w.operatorListChanged();I(this,nh,Tg).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof vF){let r=CG;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Pu(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}nl=new WeakMap,_w=new WeakMap,nh=new WeakSet,Tg=function(){if(!c(this,nl)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_(this,nl,!1),!0};var Gc,$i,rl,rh,X_,sh,ih,$r,LA,iL,aL,kg,lm,OA;const Wt=class Wt{constructor({name:e=null,port:t=null,verbosity:n=oW()}={}){F(this,$r);F(this,Gc,Promise.withResolvers());F(this,$i,null);F(this,rl,null);F(this,rh,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(c(Wt,ih).has(t))throw new Error("Cannot use more than one PDFWorker per port.");c(Wt,ih).set(t,this),I(this,$r,iL).call(this,t)}else I(this,$r,aL).call(this)}get promise(){return c(this,Gc).promise}get port(){return c(this,rl)}get messageHandler(){return c(this,$i)}destroy(){var e,t;this.destroyed=!0,(e=c(this,rh))==null||e.terminate(),_(this,rh,null),c(Wt,ih).delete(c(this,rl)),_(this,rl,null),(t=c(this,$i))==null||t.destroy(),_(this,$i,null)}static create(e){const t=c(this,ih).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Wt(e)}static get workerSrc(){if(Qa.workerSrc)return Qa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return We(this,"_setupFakeWorkerGlobal",(async()=>c(this,lm,OA)?c(this,lm,OA):(await import(this.workerSrc)).WorkerMessageHandler)())}};Gc=new WeakMap,$i=new WeakMap,rl=new WeakMap,rh=new WeakMap,X_=new WeakMap,sh=new WeakMap,ih=new WeakMap,$r=new WeakSet,LA=function(){c(this,Gc).resolve(),c(this,$i).send("configure",{verbosity:this.verbosity})},iL=function(e){_(this,rl,e),_(this,$i,new Eg("main","worker",e)),c(this,$i).on("ready",()=>{}),I(this,$r,LA).call(this)},aL=function(){if(c(Wt,sh)||c(Wt,lm,OA)){I(this,$r,kg).call(this);return}let{workerSrc:e}=Wt;try{Wt._isSameOrigin(window.location,e)||(e=Wt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Eg("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?c(this,Gc).reject(new Error("Worker was destroyed")):I(this,$r,kg).call(this)},i=new AbortController;t.addEventListener("error",()=>{c(this,rh)||r()},{signal:i.signal}),n.on("test",u=>{if(i.abort(),this.destroyed||!u){r();return}_(this,$i,n),_(this,rl,t),_(this,rh,t),I(this,$r,LA).call(this)}),n.on("ready",u=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{I(this,$r,kg).call(this)}});const o=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};o();return}catch{L1("The worker has been disabled.")}I(this,$r,kg).call(this)},kg=function(){c(Wt,sh)||(He("Setting up fake worker."),_(Wt,sh,!0)),Wt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){c(this,Gc).reject(new Error("Worker was destroyed"));return}const t=new OW;_(this,rl,t);const n=`fake${Mn(Wt,X_)._++}`,r=new Eg(n+"_worker",n,t);e.setup(r,t),_(this,$i,new Eg(n,n+"_worker",t)),I(this,$r,LA).call(this)}).catch(e=>{c(this,Gc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},lm=new WeakSet,OA=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},F(Wt,lm),F(Wt,X_,0),F(Wt,sh,!1),F(Wt,ih,new WeakMap),Ur&&(_(Wt,sh,!0),Qa.workerSrc||(Qa.workerSrc="./pdf.worker.mjs")),Wt._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},Wt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Wt.fromPort=e=>{if(vW("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Wt.create(e)};let cy=Wt;var Ss,sl,il,fi,qc,cm,al,ss,Ws,oL,Ig,BA;class TG{constructor(e,t,n,r,i){F(this,Ws);ne(this,"downloadInfoCapability",Promise.withResolvers());F(this,Ss,null);F(this,sl,new Map);F(this,il,null);F(this,fi,new Map);F(this,qc,new Map);F(this,cm,new Map);F(this,al,null);F(this,ss,oy.instance);this.messageHandler=e,this.loadingTask=t,_(this,il,n),this.commonObjs=new JM,this.fontLoader=new IW({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),c(this,ss).addListener(I(this,Ws,oL).bind(this))}get annotationStorage(){return We(this,"annotationStorage",new _F)}getRenderingIntent(e,t=wc.ENABLE,n=null,r=!1,i=!1){let o=Us.DISPLAY,u=Kb;switch(e){case"any":o=Us.ANY;break;case"display":break;case"print":o=Us.PRINT;break;default:He(`getRenderingIntent - invalid intent: ${e}`)}const d=o&Us.PRINT&&n instanceof CM?n:this.annotationStorage;switch(t){case wc.DISABLE:o+=Us.ANNOTATIONS_DISABLE;break;case wc.ENABLE:break;case wc.ENABLE_FORMS:o+=Us.ANNOTATIONS_FORMS;break;case wc.ENABLE_STORAGE:o+=Us.ANNOTATIONS_STORAGE,u=d.serializable;break;default:He(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=Us.IS_EDITING),i&&(o+=Us.OPLIST);const{ids:h,hash:f}=d.modifiedIds,g=[o,u.hash,f];return{renderingIntent:o,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,al))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,fi).values())e.push(r._destroy());c(this,fi).clear(),c(this,qc).clear(),c(this,cm).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),c(this,sl).clear(),this.filterFactory.destroy(),ly.cleanup(),(r=c(this,il))==null||r.cancelAllRequests(new Pu("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{yt(c(this,il),"GetReader - no `BasePDFStream` instance available."),_(this,Ss,c(this,il).getFullReader()),c(this,Ss).onProgress=i=>I(this,Ws,BA).call(this,i),r.onPull=()=>{c(this,Ss).read().then(function({value:i,done:o}){if(o){r.close();return}yt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{c(this,Ss).cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{await c(this,Ss).headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=c(this,Ss);return r&&i&&(c(this,Ss).onProgress=null),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(n,r)=>{yt(c(this,il),"GetRangeReader - no `BasePDFStream` instance available.");const i=c(this,il).getRangeReader(n.begin,n.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:u}){if(u){r.close();return}yt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:n})=>{c(this,ss).pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new SG(n,this))}),e.on("DocException",n=>{t._capability.reject(Yr(n))}),e.on("PasswordRequest",n=>{_(this,al,Promise.withResolvers());try{if(!t.onPassword)throw Yr(n);const r=i=>{i instanceof Error?c(this,al).reject(i):c(this,al).resolve({password:i})};t.onPassword(r,n.code)}catch(r){c(this,al).reject(r)}return c(this,al).promise}),e.on("DataLoaded",n=>{I(this,Ws,BA).call(this,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,fi).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in i){const w=i.error;He(`Error during font loading: ${w}`),this.commonObjs.resolve(n,w);break}const u=new Qb(i),d=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(w,A)=>globalThis.FontInspector.fontAdded(w,A):null,h=new PW(u,d,i.extra,i.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:f}=i;yt(f,"The imageRef must be defined.");for(const w of c(this,fi).values())for(const[,A]of w.objs)if((A==null?void 0:A.ref)===f)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new RW(i));break;case"Image":this.commonObjs.resolve(n,i);break;case"Pattern":const g=new Xb(i);this.commonObjs.resolve(n,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,i,o])=>{var d;if(this.destroyed)return;const u=c(this,fi).get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=o==null?void 0:o.bitmap)==null||d.close();return}switch(i){case"Image":case"Pattern":u.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{this.destroyed||I(this,Ws,BA).call(this,n)}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&He("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=c(this,Ss))==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>c(this,ss).pagesNumber)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=c(this,ss).getPageId(e)-1,r=c(this,qc).get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&c(this,cm).set(o.refStr,n);const u=new FG(t,o,this,this._params.pdfBug);return c(this,fi).set(t,u),u});return c(this,qc).set(t,i),i}async getPageIndex(e){if(!Yb(e))throw new Error("Invalid pageIndex request.");const t=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return c(this,ss).getPageNumber(t+1)-1}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c(this,ss).getPageId(e+1)-1,intent:t})}getFieldObjects(){return I(this,Ws,Ig).call(this,"GetFieldObjects")}hasJSActions(){return I(this,Ws,Ig).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return I(this,Ws,Ig).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c(this,ss).getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c(this,ss).getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return I(this,Ws,Ig).call(this,"GetOptionalContentConfig").then(t=>new oG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,sl).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new iG(r[1]):null,contentDispositionFilename:((i=c(this,Ss))==null?void 0:i.filename)??null,contentLength:((o=c(this,Ss))==null?void 0:o.contentLength)??null,hasStructTree:r[2]}});return c(this,sl).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,fi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,sl).clear(),this.filterFactory.destroy(!0),ly.cleanup()}}cachedPageNumber(e){if(!Yb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,n=c(this,cm).get(t);return n>=0?c(this,ss).getPageNumber(n+1):null}}Ss=new WeakMap,sl=new WeakMap,il=new WeakMap,fi=new WeakMap,qc=new WeakMap,cm=new WeakMap,al=new WeakMap,ss=new WeakMap,Ws=new WeakSet,oL=function(){const e=new Map,t=new Map;for(let n=0,r=c(this,ss).pagesNumber;n<r;n++){const i=c(this,ss).getPrevPageNumber(n+1)-1,o=c(this,fi).get(i);o&&e.set(n,o);const u=c(this,qc).get(i);u&&t.set(n,u)}_(this,fi,e),_(this,qc,t)},Ig=function(e,t=null){const n=c(this,sl).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return c(this,sl).set(e,r),r},BA=function({loaded:e,total:t}){var n,r;(r=(n=this.loadingTask).onProgress)==null||r.call(n,{loaded:e,total:t,percent:cr(Math.round(e/t*100),0,100)})};class kG{constructor(e){ne(this,"_internalRenderTask",null);ne(this,"onContinue",null);ne(this,"onError",null);this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this._internalRenderTask;return e.form||e.canvas&&(t==null?void 0:t.size)>0}}var Kc,ah;const vd=class vd{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:u,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:w=null,enableHWA:A=!1,operationsFilter:S=null}){F(this,Kc,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=g,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new kG(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=A,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var d,h;if(this.cancelled)return;if(this._canvas){if(c(vd,ah).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(vd,ah).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:i,dependencyTracker:o}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ff(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(e=null,t=0){var n,r,i;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,Kc)&&(window.cancelAnimationFrame(c(this,Kc)),_(this,Kc,null)),c(vd,ah).delete(this._canvas),e||(e=new vF(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?_(this,Kc,window.requestAnimationFrame(()=>{_(this,Kc,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(vd,ah).delete(this._canvas),this.callback())))}};Kc=new WeakMap,ah=new WeakMap,F(vd,ah,new WeakSet);let fC=vd;const IG="5.4.624",PG="384c6208b";var Fs,oh,um,Bn,xw,dm,ol,Ew,Qc,zi,bw,It,mC,gC,yC,md,lL,dc;const Jr=class Jr{constructor({editor:e=null,uiManager:t=null}){F(this,It);F(this,Fs,null);F(this,oh,null);F(this,um);F(this,Bn,null);F(this,xw,!1);F(this,dm,!1);F(this,ol,null);F(this,Ew);F(this,Qc,null);F(this,zi,null);var n,r;e?(_(this,dm,!1),_(this,ol,e)):_(this,dm,!0),_(this,zi,(e==null?void 0:e._uiManager)||t),_(this,Ew,c(this,zi)._eventBus),_(this,um,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((r=c(this,zi))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),c(Jr,bw)||_(Jr,bw,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return We(this,"_keyboardManager",new F0([[["Escape","mac+Escape"],Jr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Jr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Jr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Jr.prototype._moveToPrevious],[["Home","mac+Home"],Jr.prototype._moveToBeginning],[["End","mac+End"],Jr.prototype._moveToEnd]]))}renderButton(){const e=_(this,Fs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",c(this,ol)&&(e.ariaControls=`${c(this,ol).id}_colorpicker_dropdown`);const t=c(this,zi)._signal;e.addEventListener("click",I(this,It,md).bind(this),{signal:t}),e.addEventListener("keydown",I(this,It,yC).bind(this),{signal:t});const n=_(this,oh,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=c(this,um),e.append(n),e}renderMainDropdown(){const e=_(this,Bn,I(this,It,mC).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===c(this,Fs)){I(this,It,md).call(this,e);return}const t=e.target.getAttribute("data-color");t&&I(this,It,gC).call(this,t,e)}_moveToNext(e){var t,n;if(!c(this,It,dc)){I(this,It,md).call(this,e);return}if(e.target===c(this,Fs)){(t=c(this,Bn).firstElementChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=c(this,Bn))==null?void 0:t.firstElementChild)||e.target===c(this,Fs)){c(this,It,dc)&&this._hideDropdownFromKeyboard();return}c(this,It,dc)||I(this,It,md).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!c(this,It,dc)){I(this,It,md).call(this,e);return}(t=c(this,Bn).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,It,dc)){I(this,It,md).call(this,e);return}(t=c(this,Bn).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,Bn))==null||e.classList.add("hidden"),c(this,Fs).ariaExpanded="false",(t=c(this,Qc))==null||t.abort(),_(this,Qc,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,dm)){if(!c(this,It,dc)){(e=c(this,ol))==null||e.unselect();return}this.hideDropdown(),c(this,Fs).focus({preventScroll:!0,focusVisible:c(this,xw)})}}updateColor(e){if(c(this,oh)&&(c(this,oh).style.backgroundColor=e),!c(this,Bn))return;const t=c(this,zi).highlightColors.values();for(const n of c(this,Bn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=c(this,Fs))==null||e.remove(),_(this,Fs,null),_(this,oh,null),(t=c(this,Bn))==null||t.remove(),_(this,Bn,null)}};Fs=new WeakMap,oh=new WeakMap,um=new WeakMap,Bn=new WeakMap,xw=new WeakMap,dm=new WeakMap,ol=new WeakMap,Ew=new WeakMap,Qc=new WeakMap,zi=new WeakMap,bw=new WeakMap,It=new WeakSet,mC=function(){const e=document.createElement("div"),t=c(this,zi)._signal;e.addEventListener("contextmenu",Ei,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,ol)&&(e.id=`${c(this,ol).id}_colorpicker_dropdown`);for(const[n,r]of c(this,zi).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",c(Jr,bw)[n]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===c(this,um),i.addEventListener("click",I(this,It,gC).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",I(this,It,yC).bind(this),{signal:t}),e},gC=function(e,t){t.stopPropagation(),c(this,Ew).dispatch("switchannotationeditorparams",{source:this,type:at.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},yC=function(e){Jr._keyboardManager.exec(this,e)},md=function(e){if(c(this,It,dc)){this.hideDropdown();return}if(_(this,xw,e.detail===0),c(this,Qc)||(_(this,Qc,new AbortController),window.addEventListener("pointerdown",I(this,It,lL).bind(this),{signal:c(this,zi).combinedSignal(c(this,Qc))})),c(this,Fs).ariaExpanded="true",c(this,Bn)){c(this,Bn).classList.remove("hidden");return}const t=_(this,Bn,I(this,It,mC).call(this));c(this,Fs).append(t)},lL=function(e){var t;(t=c(this,Bn))!=null&&t.contains(e.target)||this.hideDropdown()},dc=function(){return c(this,Bn)&&!c(this,Bn).classList.contains("hidden")},F(Jr,bw,null);let D_=Jr;var Ua,Cw,hm,Sw;const Ad=class Ad{constructor(e){F(this,Ua,null);F(this,Cw,null);F(this,hm,null);_(this,Cw,e),_(this,hm,e._uiManager),c(Ad,Sw)||_(Ad,Sw,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,Ua))return c(this,Ua);const{editorType:e,colorType:t,color:n}=c(this,Cw),r=_(this,Ua,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",c(Ad,Sw)[e]),r.addEventListener("input",()=>{c(this,hm).updateParams(t,r.value)},{signal:c(this,hm)._signal}),r}update(e){c(this,Ua)&&(c(this,Ua).value=e)}destroy(){var e;(e=c(this,Ua))==null||e.remove(),_(this,Ua,null)}hideDropdown(){}};Ua=new WeakMap,Cw=new WeakMap,hm=new WeakMap,Sw=new WeakMap,F(Ad,Sw,null);let N_=Ad;function AR(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function og(s){return Math.max(0,Math.min(255,255*s))}class _R{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=og(e),[e,e,e]}static G_HTML([e]){const t=AR(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(og)}static RGB_HTML(e){return`#${e.map(AR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[og(1-Math.min(1,e+r)),og(1-Math.min(1,n+r)),og(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,i=1-t,o=1-n,u=Math.min(r,i,o);return["CMYK",r,i,o,u]}}class RG{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){wt("Abstract method `_createSVG` called.")}}class M_ extends RG{_createSVG(e){return document.createElementNS(Ro,e)}}const DG=9,Gh=new WeakSet,NG=new Date().getTimezoneOffset()*60*1e3;class KE{static create(e){switch(e.data.annotationType){case Sn.LINK:return new bF(e);case Sn.TEXT:return new LG(e);case Sn.WIDGET:switch(e.data.fieldType){case"Tx":return new OG(e);case"Btn":return e.data.radioButton?new dL(e):e.data.checkBox?new VG(e):new UG(e);case"Ch":return new jG(e);case"Sig":return new BG(e)}return new tp(e);case Sn.POPUP:return new vC(e);case Sn.FREETEXT:return new gL(e);case Sn.LINE:return new zG(e);case Sn.SQUARE:return new HG(e);case Sn.CIRCLE:return new WG(e);case Sn.POLYLINE:return new yL(e);case Sn.CARET:return new qG(e);case Sn.INK:return new CF(e);case Sn.POLYGON:return new GG(e);case Sn.HIGHLIGHT:return new wL(e);case Sn.UNDERLINE:return new KG(e);case Sn.SQUIGGLY:return new QG(e);case Sn.STRIKEOUT:return new XG(e);case Sn.STAMP:return new vL(e);case Sn.FILEATTACHMENT:return new YG(e);default:return new en(e)}}}var lh,pm,mi,Fw,wC;const DF=class DF{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){F(this,Fw);F(this,lh,null);F(this,pm,!1);F(this,mi,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return DF._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const e=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:r}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let d=0;d<t.length;d+=8)t[d+1]>o?(o=t[d+1],i=t[d+2]):t[d+1]===o&&(i=Math.max(i,t[d+2]));return[i,o]}if((n==null?void 0:n.length)>=1){for(const d of n)for(let h=0,f=d.length;h<f;h+=2)d[h+1]>o?(o=d[h+1],i=d[h]):d[h+1]===o&&(i=Math.max(i,d[h]));if(i!==1/0)return[i,o]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/n,e[1]=100*(e[1]-o)/r,e}get commentText(){var t,n,r;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${sy}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${sy}${t.id}`,{id:t.id,annotationType:t.annotationType,page:this.parent.page,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=c(this,mi))==null?void 0:e.popup)||this.popup)==null||t.remove(),_(this,mi,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(c(this,lh)||_(this,lh,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&I(this,Fw,wC).call(this,t);let r=((i=c(this,mi))==null?void 0:i.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=c(this,mi).popup),r&&(r.updateEdited(e),n!=null&&n.deleted&&(r.remove(),_(this,mi,null),this.popup=null))}resetEdited(){var e;c(this,lh)&&(I(this,Fw,wC).call(this,c(this,lh).rect),(e=c(this,mi))==null||e.popup.resetEdited(),_(this,lh,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof tp)&&!(this instanceof bF)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof vC){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,i),i}const{width:u,height:d}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,T=t.borderStyle.verticalCornerRadius;if(C>0||T>0){const O=`calc(${C}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;o.borderRadius=O}else if(this instanceof dL){const O=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;o.borderRadius=O}switch(t.borderStyle.style){case Gp.SOLID:o.borderStyle="solid";break;case Gp.DASHED:o.borderStyle="dashed";break;case Gp.BEVELED:He("Unimplemented border style: beveled");break;case Gp.INSET:He("Unimplemented border style: inset");break;case Gp.UNDERLINE:o.borderBottomStyle="solid";break}const P=t.borderColor||null;P?(_(this,pm,!0),o.borderColor=xe.makeHexColor(P[0]|0,P[1]|0,P[2]|0)):o.borderWidth=0}const h=xe.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:g,pageX:w,pageY:A}=r.rawDims;o.left=`${100*(h[0]-w)/f}%`,o.top=`${100*(h[1]-A)/g}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(o.width=`${100*u/f}%`,o.height=`${100*d/g}%`):this.setRotation(S,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/n}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const i=r.detail[t],o=i[0],u=i.slice(1);r.target.style[n]=_R[`${o}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:_R[`${o}_rgb`](u)})};return We(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const o=n[r];if(o){const u={detail:{[r]:i},target:e};o(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,T,P,O]=e.subarray(2,6);if(r===C&&i===T&&t===P&&n===O)return}const{style:o}=this.container;let u;if(c(this,pm)){const{borderColor:C,borderWidth:T}=o;o.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=r-t,h=i-n,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const w=f.createElement("defs");g.append(w);const A=f.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),w.append(A);for(let C=2,T=e.length;C<T;C+=8){const P=e[C],O=e[C+1],N=e[C+2],j=e[C+3],z=f.createElement("rect"),W=(N-t)/d,D=(i-O)/h,R=(P-N)/d,L=(O-j)/h;z.setAttribute("x",W),z.setAttribute("y",D),z.setAttribute("width",R),z.setAttribute("height",L),A.append(z),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${W}" y="${D}" width="${R}" height="${L}"/>`)}c(this,pm)&&(u.push("</g></svg>')"),o.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate),_(this,mi,new vC({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(c(this,mi)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,mi)}render(){wt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:u}of r){if(i===-1||o===t)continue;const d=typeof u=="string"?u:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Gh.has(h)){He(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:d,domElement:h})}return n}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&Gh.has(r)&&n.push({id:o,exportValue:i,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};lh=new WeakMap,pm=new WeakMap,mi=new WeakMap,Fw=new WeakSet,wC=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-u)/i}%`,t.top=`${100*(o-e[3]+d)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let en=DF;class MG extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var $s,gd,cL,uL;class bF extends en{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});F(this,$s);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(I(this,$s,cL).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(I(this,$s,uL).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(t,n,r=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&I(this,$s,gd).call(this),r&&(t.title=r)}_bindNamedAction(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(t.title=r),I(this,$s,gd).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const o=r.get(i);o&&(t[o]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),I(this,$s,gd).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),I(this,$s,gd).call(this),!this._fieldObjects){He('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var g;r==null||r();const{fields:i,refs:o,include:u}=n,d=[];if(i.length!==0||o.length!==0){const w=new Set(o);for(const A of i){const S=this._fieldObjects[A]||[];for(const{id:C}of S)w.add(C)}for(const A of Object.values(this._fieldObjects))for(const S of A)w.has(S.id)===u&&d.push(S)}else for(const w of Object.values(this._fieldObjects))d.push(...w);const h=this.annotationStorage,f=[];for(const w of d){const{id:A}=w;switch(f.push(A),w.type){case"text":{const C=w.defaultValue||"";h.setValue(A,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;h.setValue(A,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";h.setValue(A,{value:C});break}default:continue}const S=document.querySelector(`[data-element-id="${A}"]`);if(S){if(!Gh.has(S)){He(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}$s=new WeakSet,gd=function(){this.container.setAttribute("data-internal-link","")},cL=function(t,n,r="",i=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,i),!1},I(this,$s,gd).call(this)},uL=function(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(t.title=r),I(this,$s,gd).call(this)};class LG extends en{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class tp extends en{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return jn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,o=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var u;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,n,r){var i,o,u;for(const[d,h]of n)(h==="Action"||(i=this.data.actions)!=null&&i[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,h,r),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":xe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||DG,i=e.style;let o;const u=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u),f=Math.round(h/(jE*r))||1,g=h/f;o=Math.min(r,d(g/jE))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u);o=Math.min(r,d(h/jE))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=xe.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class OG extends tp{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),i.setValue(o.id,{[r]:n})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let u=o.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let h=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const f={userValue:u,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",h??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Gh.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:w,timeStep:A}=this.data,S=!!w&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",T=>{e.setValue(t,{value:T.target.value}),this.setPropertyOnSiblings(n,"value",T.target.value,"value"),f.formattedValue=null}),n.addEventListener("resetform",T=>{const P=this.data.defaultFieldValue??"";n.value=f.userValue=P,f.formattedValue=null});let C=T=>{const{formattedValue:P}=f;P!=null&&(T.target.value=P),T.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",P=>{var N;if(f.focused)return;const{target:O}=P;if(S&&(O.type=w,A&&(O.step=A)),f.userValue){const j=f.userValue;if(S)if(w==="time"){const z=new Date(j),W=[z.getHours(),z.getMinutes(),z.getSeconds()];O.value=W.map(D=>D.toString().padStart(2,"0")).join(":")}else O.value=new Date(j-NG).toISOString().split(w==="date"?"T":".",1)[0];else O.value=j}f.lastCommittedValue=O.value,f.commitKey=1,(N=this.data.actions)!=null&&N.Focus||(f.focused=!0)}),n.addEventListener("updatefromsandbox",P=>{this.showElementAndHideCanvas(P.target);const O={value(N){f.userValue=N.detail.value??"",S||e.setValue(t,{value:f.userValue.toString()}),N.target.value=f.userValue},formattedValue(N){const{formattedValue:j}=N.detail;f.formattedValue=j,j!=null&&N.target!==document.activeElement&&(N.target.value=j);const z={formattedValue:j};S&&(z.value=j),e.setValue(t,z)},selRange(N){N.target.setSelectionRange(...N.detail.selRange)},charLimit:N=>{var D;const{charLimit:j}=N.detail,{target:z}=N;if(j===0){z.removeAttribute("maxLength");return}z.setAttribute("maxLength",j);let W=f.userValue;!W||W.length<=j||(W=W.slice(0,j),z.value=f.userValue=W,e.setValue(t,{value:W}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:W,willCommit:!0,commitKey:1,selStart:z.selectionStart,selEnd:z.selectionEnd}}))}};this._dispatchEventFromSandbox(O,P)}),n.addEventListener("keydown",P=>{var j;f.commitKey=1;let O=-1;if(P.key==="Escape"?O=0:P.key==="Enter"&&!this.data.multiLine?O=2:P.key==="Tab"&&(f.commitKey=3),O===-1)return;const{value:N}=P.target;f.lastCommittedValue!==N&&(f.lastCommittedValue=N,f.userValue=N,(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:O,selStart:P.target.selectionStart,selEnd:P.target.selectionEnd}}))});const T=C;C=null,n.addEventListener("blur",P=>{var j,z;if(!f.focused||!P.relatedTarget)return;(j=this.data.actions)!=null&&j.Blur||(f.focused=!1);const{target:O}=P;let{value:N}=O;if(S){if(N&&w==="time"){const W=N.split(":").map(D=>parseInt(D,10));N=new Date(2e3,0,1,W[0],W[1],W[2]||0).valueOf(),O.step=""}else N.includes("T")||(N=`${N}T00:00`),N=new Date(N).valueOf();O.type="text"}f.userValue=N,f.lastCommittedValue!==N&&((z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:f.commitKey,selStart:P.target.selectionStart,selEnd:P.target.selectionEnd}})),T(P)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",P=>{var L;f.lastCommittedValue=null;const{data:O,target:N}=P,{value:j,selectionStart:z,selectionEnd:W}=N;let D=z,R=W;switch(P.inputType){case"deleteWordBackward":{const U=j.substring(0,z).match(/\w*[^\w]*$/);U&&(D-=U[0].length);break}case"deleteWordForward":{const U=j.substring(z).match(/^[^\w]*\w*/);U&&(R+=U[0].length);break}case"deleteContentBackward":z===W&&(D-=1);break;case"deleteContentForward":z===W&&(R+=1);break}P.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:j,change:O||"",willCommit:!1,selStart:D,selEnd:R}})}),this._setEventListeners(n,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],P=>P.target.value)}if(C&&n.addEventListener("blur",C),this.data.comb){const P=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${P}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class BG extends tp{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class VG extends tp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Gh.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:u,checked:d}=o.target;for(const h of this._getElementsByName(u,n)){const f=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(n,{value:d})}),i.addEventListener("resetform",o=>{const u=t.defaultFieldValue||"Off";o.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const u={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class dL extends tp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Gh.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:u,checked:d}=o.target;for(const h of this._getElementsByName(u,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:d})}),i.addEventListener("resetform",o=>{const u=t.defaultFieldValue;o.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",u=>{const d={value:h=>{const f=o===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const w=f&&g.id===n;g.domElement&&(g.domElement.checked=w),e.setValue(g.id,{value:w})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class UG extends bF{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class jG extends tp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Gh.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,n.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),i=!1),r.append(g)}let o=null;if(i){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),o=()=>{f.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const u=f=>{const g=f?"value":"textContent",{options:w,multiple:A}=r;return A?Array.prototype.filter.call(w,S=>S.selected).map(S=>S[g]):w.selectedIndex===-1?null:w[w.selectedIndex][g]};let d=u(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const g={value(w){o==null||o();const A=w.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const C of r.options)C.selected=S.has(C.value);e.setValue(t,{value:u(!0)}),d=u(!1)},multipleSelection(w){r.multiple=!0},remove(w){const A=r.options,S=w.detail.remove;A[S].selected=!1,r.remove(S),A.length>0&&Array.prototype.findIndex.call(A,T=>T.selected)===-1&&(A[0].selected=!0),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},clear(w){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=u(!1)},insert(w){const{index:A,displayValue:S,exportValue:C}=w.detail.insert,T=r.children[A],P=document.createElement("option");P.textContent=S,P.value=C,T?T.before(P):r.append(P),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},items(w){const{items:A}=w.detail;for(;r.length!==0;)r.remove(0);for(const S of A){const{displayValue:C,exportValue:T}=S,P=document.createElement("option");P.textContent=C,P.value=T,r.append(P)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},indices(w){const A=new Set(w.detail.indices);for(const S of w.target.options)S.selected=A.has(S.index);e.setValue(t,{value:u(!0)}),d=u(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(g,f)}),r.addEventListener("input",f=>{var A;const g=u(!0),w=u(!1);e.setValue(t,{value:g}),f.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:w,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Tw,AC;class vC extends en{constructor(t){const{data:n,elements:r,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&en._hasPopupData(n)});F(this,Tw);if(this.elements=r,o&&en._hasPopupData(n)){const u=this.popup=I(this,Tw,AC).call(this);for(const d of r)d.popup=u}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=I(this,Tw,AC).call(this),r=[];for(const i of this.elements)i.popup=n,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${tf}${i}`).join(",")),this.container}}Tw=new WeakSet,AC=function(){return new $G({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Ts,Xc,Y_,J_,fm,mm,on,ja,Yc,ch,gm,ym,$a,ks,ll,cl,ln,ul,Jc,kw,dl,wm,uh,Zc,Gn,eu,Ye,VA,_C,xC,EC,UA,bC,hL,pL,fL,mL,jA,$A,CC;class $G{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:i,contentsObj:o,richText:u,parent:d,rect:h,parentRect:f,open:g,commentManager:w=null}){F(this,Ye);F(this,Ts,null);F(this,Xc,I(this,Ye,fL).bind(this));F(this,Y_,I(this,Ye,CC).bind(this));F(this,J_,I(this,Ye,$A).bind(this));F(this,fm,I(this,Ye,jA).bind(this));F(this,mm,null);F(this,on,null);F(this,ja,null);F(this,Yc,null);F(this,ch,null);F(this,gm,null);F(this,ym,null);F(this,$a,!1);F(this,ks,null);F(this,ll,null);F(this,cl,null);F(this,ln,null);F(this,ul,null);F(this,Jc,null);F(this,kw,null);F(this,dl,null);F(this,wm,null);F(this,uh,null);F(this,Zc,!1);F(this,Gn,null);F(this,eu,null);_(this,on,e),_(this,wm,r),_(this,ja,o),_(this,dl,u),_(this,gm,d),_(this,mm,t),_(this,kw,h),_(this,ym,f),_(this,ch,n),_(this,Ts,w),_(this,Gn,n[0]),_(this,Yc,F_.toDateObject(i)),this.trigger=n.flatMap(A=>A.getElementsToTriggerPopup()),w||(I(this,Ye,VA).call(this),c(this,on).hidden=!0,g&&I(this,Ye,jA).call(this))}renderCommentButton(){if(c(this,ln)){c(this,ln).parentNode||c(this,Gn).container.after(c(this,ln));return}if(c(this,ul)||I(this,Ye,_C).call(this),!c(this,ul))return;const{signal:e}=_(this,ll,new AbortController),t=c(this,Gn).hasOwnCommentButton,n=()=>{c(this,Ts).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{c(this,Ts).toggleCommentPopup(this,!1,!0,!t)},i=()=>{c(this,Ts).toggleCommentPopup(this,!1,!1)};if(t){_(this,ln,c(this,Gn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",c(this,Xc),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=_(this,ln,document.createElement("button"));o.className="annotationCommentButton";const u=c(this,Gn).container;o.style.zIndex=u.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),I(this,Ye,EC).call(this),I(this,Ye,xC).call(this),o.addEventListener("keydown",c(this,Xc),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),u.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=c(this,Gn).commentData;return e?c(this,gm)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=c(this,ln))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}=c(this,Gn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}}get elementBeforePopup(){return c(this,ln)}get comment(){return c(this,eu)||_(this,eu,c(this,Gn).commentText),c(this,eu)}set comment(e){e!==this.comment&&(c(this,Gn).commentText=_(this,eu,e))}focus(){var e;(e=c(this,Gn).container)==null||e.focus()}get parentBoundingClientRect(){return c(this,Gn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){c(this,ln)&&(c(this,ln).classList.toggle("selected",e),c(this,ln).ariaExpanded=t)}setSelectedCommentButton(e){c(this,ln).classList.toggle("selected",e)}get commentPopupPosition(){if(c(this,Jc))return c(this,Jc);const{x:e,y:t,height:n}=c(this,ln).getBoundingClientRect(),{x:r,y:i,width:o,height:u}=c(this,Gn).layer.getBoundingClientRect();return[(e-r)/o,(t+n-i)/u]}set commentPopupPosition(e){_(this,Jc,e)}hasDefaultPopupPosition(){return c(this,Jc)===null}get commentButtonPosition(){return c(this,ul)}get commentButtonWidth(){return c(this,ln).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=c(this,Jc)||this.commentButtonPosition.map(h=>h/100),r=this.parentBoundingClientRect,{x:i,y:o,width:u,height:d}=r;c(this,Ts).showDialog(null,this,i+t*u,o+n*d,{...e,parentDimensions:r})}render(){var n,r;if(c(this,ks))return;const e=_(this,ks,document.createElement("div"));if(e.className="popup",c(this,mm)){const i=e.style.outlineColor=xe.makeHexColor(...c(this,mm));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=c(this,wm))!=null&&n.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=c(this,wm)}if(e.append(t),c(this,Yc)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Yc).valueOf()})),i.dateTime=c(this,Yc).toISOString(),t.append(i)}$N({html:c(this,Ye,UA)||c(this,ja).str,dir:(r=c(this,ja))==null?void 0:r.dir,className:"popupContent"},e),c(this,on).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var r;if(c(this,Ts)){n?(this.remove(),_(this,eu,null)):t&&(t.deleted?this.remove():(I(this,Ye,EC).call(this),_(this,eu,t.text))),e&&(_(this,ul,null),I(this,Ye,_C).call(this),I(this,Ye,xC).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}I(this,Ye,VA).call(this),c(this,uh)||_(this,uh,{contentsObj:c(this,ja),richText:c(this,dl)}),e&&_(this,cl,null),t&&t.text&&(_(this,dl,I(this,Ye,pL).call(this,t.text)),_(this,Yc,F_.toDateObject(t.date)),_(this,ja,null)),(r=c(this,ks))==null||r.remove(),_(this,ks,null)}resetEdited(){var e;c(this,uh)&&({contentsObj:Mn(this,ja)._,richText:Mn(this,dl)._}=c(this,uh),_(this,uh,null),(e=c(this,ks))==null||e.remove(),_(this,ks,null),_(this,cl,null))}remove(){var e,t,n;if((e=c(this,ll))==null||e.abort(),_(this,ll,null),(t=c(this,ks))==null||t.remove(),_(this,ks,null),_(this,Zc,!1),_(this,$a,!1),(n=c(this,ln))==null||n.remove(),_(this,ln,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){_(this,Zc,this.isVisible),c(this,Zc)&&(c(this,on).hidden=!0)}maybeShow(){c(this,Ts)||(I(this,Ye,VA).call(this),c(this,Zc)&&(c(this,ks)||I(this,Ye,$A).call(this),_(this,Zc,!1),c(this,on).hidden=!1))}get isVisible(){return c(this,Ts)?!1:c(this,on).hidden===!1}}Ts=new WeakMap,Xc=new WeakMap,Y_=new WeakMap,J_=new WeakMap,fm=new WeakMap,mm=new WeakMap,on=new WeakMap,ja=new WeakMap,Yc=new WeakMap,ch=new WeakMap,gm=new WeakMap,ym=new WeakMap,$a=new WeakMap,ks=new WeakMap,ll=new WeakMap,cl=new WeakMap,ln=new WeakMap,ul=new WeakMap,Jc=new WeakMap,kw=new WeakMap,dl=new WeakMap,wm=new WeakMap,uh=new WeakMap,Zc=new WeakMap,Gn=new WeakMap,eu=new WeakMap,Ye=new WeakSet,VA=function(){var t;if(c(this,ll))return;_(this,ll,new AbortController);const{signal:e}=c(this,ll);for(const n of this.trigger)n.addEventListener("click",c(this,fm),{signal:e}),n.addEventListener("pointerenter",c(this,J_),{signal:e}),n.addEventListener("pointerleave",c(this,Y_),{signal:e}),n.classList.add("popupTriggerArea");for(const n of c(this,ch))(t=n.container)==null||t.addEventListener("keydown",c(this,Xc),{signal:e})},_C=function(){const e=c(this,ch).find(t=>t.hasCommentButton);e&&_(this,ul,e._normalizePoint(e.commentButtonPosition))},xC=function(){if(c(this,Gn).extraPopupElement&&!c(this,Gn).editor)return;c(this,ln)||this.renderCommentButton();const[e,t]=c(this,ul),{style:n}=c(this,ln);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},EC=function(){c(this,Gn).extraPopupElement||(c(this,ln)||this.renderCommentButton(),c(this,ln).style.backgroundColor=this.commentButtonColor||"")},UA=function(){const e=c(this,dl),t=c(this,ja);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,dl).html||null},bC=function(){var e,t,n;return((n=(t=(e=c(this,Ye,UA))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},hL=function(){var e,t,n;return((n=(t=(e=c(this,Ye,UA))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},pL=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,Ye,hL),fontSize:c(this,Ye,bC)?`calc(${c(this,Ye,bC)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return n},fL=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,$a))&&I(this,Ye,jA).call(this)},mL=function(){if(c(this,cl)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=c(this,gm);let o=!!c(this,ym),u=o?c(this,ym):c(this,kw);for(const S of c(this,ch))if(!u||xe.intersect(S.data.rect,u)!==null){u=S.data.rect,o=!0;break}const d=xe.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),f=o?u[2]-u[0]+5:0,g=d[0]+f,w=d[1];_(this,cl,[100*(g-r)/t,100*(w-i)/n]);const{style:A}=c(this,on);A.left=`${c(this,cl)[0]}%`,A.top=`${c(this,cl)[1]}%`},jA=function(){if(c(this,Ts)){c(this,Ts).toggleCommentPopup(this,!1);return}_(this,$a,!c(this,$a)),c(this,$a)?(I(this,Ye,$A).call(this),c(this,on).addEventListener("click",c(this,fm)),c(this,on).addEventListener("keydown",c(this,Xc))):(I(this,Ye,CC).call(this),c(this,on).removeEventListener("click",c(this,fm)),c(this,on).removeEventListener("keydown",c(this,Xc)))},$A=function(){c(this,ks)||this.render(),this.isVisible?c(this,$a)&&c(this,on).classList.add("focused"):(I(this,Ye,mL).call(this),c(this,on).hidden=!1,c(this,on).style.zIndex=parseInt(c(this,on).style.zIndex)+1e3)},CC=function(){c(this,on).classList.remove("focused"),!(c(this,$a)||!this.isVisible)&&(c(this,on).hidden=!0,c(this,on).style.zIndex=parseInt(c(this,on).style.zIndex)-1e3)};class gL extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ke.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Iw;class zG extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});F(this,Iw,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=_(this,Iw,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Iw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Iw=new WeakMap;var Pw;class HG extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});F(this,Pw,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,u=_(this,Pw,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",o/2),u.setAttribute("y",o/2),u.setAttribute("width",n-o),u.setAttribute("height",r-o),u.setAttribute("stroke-width",o||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),i.append(u),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Pw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pw=new WeakMap;var Rw;class WG extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});F(this,Rw,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,u=_(this,Rw,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",r/2),u.setAttribute("rx",n/2-o/2),u.setAttribute("ry",r/2-o/2),u.setAttribute("stroke-width",o||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),i.append(u),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Rw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rw=new WeakMap;var Dw;class yL extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});F(this,Dw,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:i},width:o,height:u}=this;if(!n)return this.container;const d=this.svgFactory.create(o,u,!0);let h=[];for(let g=0,w=n.length;g<w;g+=2){const A=n[g]-t[0],S=t[3]-n[g+1];h.push(`${A},${S}`)}h=h.join(" ");const f=_(this,Dw,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",h),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),d.append(f),this.container.append(d),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Dw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dw=new WeakMap;class GG extends yL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class qG extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Nw,dh,Mw,SC;class CF extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});F(this,Mw);F(this,Nw,null);F(this,dh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ke.HIGHLIGHT:Ke.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:u,width:d,height:h}=I(this,Mw,SC).call(this,n,t),f=this.svgFactory.create(d,h,!0),g=_(this,Nw,this.svgFactory.createElement("svg:g"));f.append(g),g.setAttribute("stroke-width",i.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",u);for(let w=0,A=r.length;w<A;w++){const S=this.svgFactory.createElement(this.svgElementName);c(this,dh).push(S),S.setAttribute("points",r[w].join(",")),g.append(S)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:i}=t,o=c(this,Nw);if(n>=0&&o.setAttribute("stroke-width",n||1),r)for(let u=0,d=c(this,dh).length;u<d;u++)c(this,dh)[u].setAttribute("points",r[u].join(","));if(i){const{transform:u,width:d,height:h}=I(this,Mw,SC).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${d} ${h}`),o.setAttribute("transform",u)}}getElementsToTriggerPopup(){return c(this,dh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nw=new WeakMap,dh=new WeakMap,Mw=new WeakSet,SC=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class wL extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ke.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class KG extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class QG extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class XG extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class vL extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ke.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Lw,Ow,FC;class YG extends en{constructor(t){var r;super(t,{isRenderable:!0});F(this,Ow);F(this,Lw,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",I(this,Ow,FC).bind(this)),_(this,Lw,r);const{isMac:i}=jn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&I(this,Ow,FC).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,Lw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lw=new WeakMap,Ow=new WeakSet,FC=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var hh,ph,vm,tu,Bw,fh,Is,Vw,bl,zA,kC;const NF=class NF{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:u,commentManager:d,linkService:h,annotationStorage:f}){F(this,bl);F(this,hh,null);F(this,ph,null);F(this,vm,null);F(this,tu,new Map);F(this,Bw,null);F(this,fh,null);F(this,Is,[]);F(this,Vw,!1);this.div=e,_(this,hh,t),_(this,ph,n),_(this,Bw,u||null),_(this,fh,h||null),_(this,vm,f||new _F),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return c(this,tu).size>0}async render(e){var u;const{annotations:t}=e,n=this.div;Hh(n,this.viewport);const r=new Map,i=[],o={data:null,layer:n,linkService:c(this,fh),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new M_,annotationStorage:c(this,vm),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const h=d.annotationType===Sn.POPUP;if(h){const w=r.get(d.id);if(!w)continue;if(!this._commentManager){i.push(d);continue}o.elements=w}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;o.data=d;const f=KE.create(o);if(!f.isRenderable)continue;if(!h&&(c(this,Is).push(f),d.popupRef)){const w=r.get(d.popupRef);w?w.push(f):r.set(d.popupRef,[f])}const g=f.render();d.hidden&&(g.style.visibility="hidden"),f._isEditable&&(c(this,tu).set(f.data.id,f),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(f))}await I(this,bl,zA).call(this);for(const d of i){const h=o.elements=r.get(d.id);o.data=d;const f=KE.create(o);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${tf}${d.id}`,d.hidden&&(g.style.visibility="hidden"),h.at(-1).container.after(g)}I(this,bl,kC).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:c(this,fh),svgFactory:new M_,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=NF._defaultBorderStyle),t.data=n;const r=KE.create(t);r.isRenderable&&(r.render(),r.contentElement.id=`${tf}${n.id}`,c(this,Is).push(r))}await I(this,bl,zA).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Hh(t,{rotation:e.rotation}),I(this,bl,kC).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,tu).values())}getEditableAnnotation(e){return c(this,tu).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:r}=e,i=new MG({data:{id:n,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:c(this,fh),annotationStorage:c(this,vm)});return i.render(),i.contentElement.id=`${tf}${n}`,i.createOrUpdatePopup(),c(this,Is).push(i),i}removeAnnotation(e){var r;const t=c(this,Is).findIndex(i=>i.data.id===e);if(t<0)return;const[n]=c(this,Is).splice(t,1);(r=c(this,hh))==null||r.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);I(this,bl,zA).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return We(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Gp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};hh=new WeakMap,ph=new WeakMap,vm=new WeakMap,tu=new WeakMap,Bw=new WeakMap,fh=new WeakMap,Is=new WeakMap,Vw=new WeakMap,bl=new WeakSet,zA=async function(){var n,r,i;if(c(this,Is).length===0)return;this.div.replaceChildren();const e=[];if(!c(this,Vw)){_(this,Vw,!0);for(const{contentElement:o,data:{id:u}}of c(this,Is)){const d=o.id=`${tf}${u}`;e.push((n=c(this,Bw))==null?void 0:n.getAriaAttributes(d).then(h=>{if(h)for(const[f,g]of h)o.setAttribute(f,g)}))}}c(this,Is).sort(({data:{rect:[o,u,d,h]}},{data:{rect:[f,g,w,A]}})=>{if(o===d&&u===h)return 1;if(f===w&&g===A)return-1;const S=h,C=u,T=(u+h)/2,P=A,O=g,N=(g+A)/2;if(T>=P&&N<=C)return-1;if(N>=S&&T<=O)return 1;const j=(o+d)/2,z=(f+w)/2;return j-z});const t=document.createDocumentFragment();for(const o of c(this,Is))t.append(o.container),this._commentManager?(i=((r=o.extraPopupElement)==null?void 0:r.popup)||o.popup)==null||i.renderCommentButton():o.extraPopupElement&&t.append(o.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),c(this,hh))for(const o of c(this,Is))c(this,hh).addPointerInTextLayer(o.contentElement,!1)},kC=function(){var t;if(!c(this,ph))return;const e=this.div;for(const[n,r]of c(this,ph)){const i=e.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const u=c(this,tu).get(n);u&&(u._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,i.id,r),u._hasNoCanvas=!1):u.canvas=r)}c(this,ph).clear()};let TC=NF;const cA=/\r\n?|\n/g;var Ps,Uw,mh,Rs,Rn,AL,_L,xL,HA,Cl,WA,GA,EL,PC,bL;const $t=class $t extends Bt{constructor(t){super({...t,name:"freeTextEditor"});F(this,Rn);F(this,Ps,"");F(this,Uw,`${this.id}-editor`);F(this,mh,null);F(this,Rs);ne(this,"_colorPicker",null);this.color=t.color||$t._defaultColor||Bt._defaultLineColor,_(this,Rs,t.fontSize||$t._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=$t.prototype,n=o=>o.isEmpty(),r=Wh.TRANSLATE_SMALL,i=Wh.TRANSLATE_BIG;return We(this,"_keyboardManager",new F0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){Bt.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case at.FREETEXT_SIZE:$t._defaultFontSize=n;break;case at.FREETEXT_COLOR:$t._defaultColor=n;break}}updateParams(t,n){switch(t){case at.FREETEXT_SIZE:I(this,Rn,AL).call(this,n);break;case at.FREETEXT_COLOR:I(this,Rn,_L).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[at.FREETEXT_SIZE,$t._defaultFontSize],[at.FREETEXT_COLOR,$t._defaultColor||Bt._defaultLineColor]]}get propertiesToUpdate(){return[[at.FREETEXT_SIZE,c(this,Rs)],[at.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new N_(this)),[["colorPicker",this._colorPicker]]}get colorType(){return at.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-$t._internalPadding*t,-($t._internalPadding+c(this,Rs))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),_(this,mh,new AbortController);const t=this._uiManager.combinedSignal(c(this,mh));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Uw)),this._isDraggable=!0,(t=c(this,mh))==null||t.abort(),_(this,mh,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,Ps),n=_(this,Ps,I(this,Rn,xL).call(this).trimEnd());if(t===n)return;const r=i=>{if(_(this,Ps,i),!i){this.remove();return}I(this,Rn,GA).call(this),this._uiManager.rebuild(this),I(this,Rn,HA).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),I(this,Rn,HA).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){$t._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Uw)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,Rs)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,h]=this.getInitialTranslation();[d,h]=this.pageTranslationToScreen(d,h);const[f,g]=this.pageDimensions,[w,A]=this.pageTranslation;let S,C;switch(this.rotation){case 0:S=t+(u[0]-w)/f,C=n+this.height-(u[1]-A)/g;break;case 90:S=t+(u[0]-w)/f,C=n-(u[1]-A)/g,[d,h]=[h,-d];break;case 180:S=t-this.width+(u[0]-w)/f,C=n-(u[1]-A)/g,[d,h]=[-d,-h];break;case 270:S=t+(u[0]-w-this.height*g)/f,C=n+(u[1]-A-this.width*f)/g,[d,h]=[-h,d];break}this.setAt(S*i,C*o,d,h)}else this._moveAfterPaste(t,n);I(this,Rn,GA).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var S,C,T;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=I(S=$t,Cl,PC).call(S,n.getData("text")||"").replaceAll(cA,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const u=o.getRangeAt(0);if(!i.includes(`
`)){u.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:d,startOffset:h}=u,f=[],g=[];if(d.nodeType===Node.TEXT_NODE){const P=d.parentElement;if(g.push(d.nodeValue.slice(h).replaceAll(cA,"")),P!==this.editorDiv){let O=f;for(const N of this.editorDiv.childNodes){if(N===P){O=g;continue}O.push(I(C=$t,Cl,WA).call(C,N))}}f.push(d.nodeValue.slice(0,h).replaceAll(cA,""))}else if(d===this.editorDiv){let P=f,O=0;for(const N of this.editorDiv.childNodes)O++===h&&(P=g),P.push(I(T=$t,Cl,WA).call(T,N))}_(this,Ps,`${f.join(`
`)}${i}${g.join(`
`)}`),I(this,Rn,GA).call(this);const w=new Range;let A=Math.sumPrecise(f.map(P=>P.length));for(const{firstChild:P}of this.editorDiv.childNodes)if(P.nodeType===Node.TEXT_NODE){const O=P.nodeValue.length;if(A<=O){w.setStart(P,A),w.setEnd(P,A);break}A-=O}o.removeAllRanges(),o.addRange(w)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=$t._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,r){var u;let i=null;if(t instanceof gL){const{data:{defaultAppearanceData:{fontSize:d,fontColor:h},rect:f,rotation:g,id:w,popupRef:A,richText:S,contentsObj:C,creationDate:T,modificationDate:P},textContent:O,textPosition:N,parent:{page:{pageNumber:j}}}=t;if(!O||O.length===0)return null;i=t={annotationType:Ke.FREETEXT,color:Array.from(h),fontSize:d,value:O.join(`
`),position:N,pageIndex:j-1,rect:f.slice(0),rotation:g,annotationElementId:w,id:w,deleted:!1,popupRef:A,comment:(C==null?void 0:C.str)||null,richText:S,creationDate:T,modificationDate:P}}const o=await super.deserialize(t,n,r);return _(o,Rs,t.fontSize),o.color=xe.makeHexColor(...t.color),_(o,Ps,I(u=$t,Cl,PC).call(u,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Bt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:n,fontSize:c(this,Rs),value:I(this,Rn,EL).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!I(this,Rn,bL).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${c(this,Rs)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const i of c(this,Ps).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),n.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,Ps)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ps=new WeakMap,Uw=new WeakMap,mh=new WeakMap,Rs=new WeakMap,Rn=new WeakSet,AL=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-c(this,Rs))*this.parentScale),_(this,Rs,i),I(this,Rn,HA).call(this)},r=c(this,Rs);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},_L=function(t){const n=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},xL=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(I(r=$t,Cl,WA).call(r,i)),n=i);return t.join(`
`)},HA=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,u=o.style.display,d=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=u,o.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},Cl=new WeakSet,WA=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(cA,"")},GA=function(){if(this.editorDiv.replaceChildren(),!!c(this,Ps))for(const t of c(this,Ps).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},EL=function(){return c(this,Ps).replaceAll(""," ")},PC=function(t){return t.replaceAll(" ","")},bL=function(t){const{value:n,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((u,d)=>u!==i[d])||t.pageIndex!==o},F($t,Cl),ne($t,"_freeTextDefaultContent",""),ne($t,"_internalPadding",0),ne($t,"_defaultColor",null),ne($t,"_defaultFontSize",10),ne($t,"_type","freetext"),ne($t,"_editorType",Ke.FREETEXT);let IC=$t;class Fe{toSVGPath(){wt("Abstract method `toSVGPath` must be implemented.")}get box(){wt("Abstract getter `box` must be implemented.")}serialize(e,t){wt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,o){o||(o=new Float32Array(e.length));for(let u=0,d=e.length;u<d;u+=2)o[u]=t+e[u]*r,o[u+1]=n+e[u+1]*i;return o}static _rescaleAndSwap(e,t,n,r,i,o){o||(o=new Float32Array(e.length));for(let u=0,d=e.length;u<d;u+=2)o[u]=t+e[u+1]*r,o[u+1]=n+e[u]*i;return o}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,o){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+o)/6,(n+i)/2,(r+o)/2]}}ne(Fe,"PRECISION",1e-4);var Ds,Hi,Am,_m,za,Ze,gh,yh,jw,$w,xm,Em,nu,zw,Z_,e1,Vn,Pg,CL,SL,FL,TL,kL,IL;const Lo=class Lo{constructor({x:e,y:t},n,r,i,o,u=0){F(this,Vn);F(this,Ds);F(this,Hi,[]);F(this,Am);F(this,_m);F(this,za,[]);F(this,Ze,new Float32Array(18));F(this,gh);F(this,yh);F(this,jw);F(this,$w);F(this,xm);F(this,Em);F(this,nu,[]);_(this,Ds,n),_(this,Em,i*r),_(this,_m,o),c(this,Ze).set([NaN,NaN,NaN,NaN,e,t],6),_(this,Am,u),_(this,$w,c(Lo,zw)*r),_(this,jw,c(Lo,e1)*r),_(this,xm,r),c(this,nu).push(e,t)}isEmpty(){return isNaN(c(this,Ze)[8])}add({x:e,y:t}){var L;_(this,gh,e),_(this,yh,t);const[n,r,i,o]=c(this,Ds);let[u,d,h,f]=c(this,Ze).subarray(8,12);const g=e-h,w=t-f,A=Math.hypot(g,w);if(A<c(this,jw))return!1;const S=A-c(this,$w),C=S/A,T=C*g,P=C*w;let O=u,N=d;u=h,d=f,h+=T,f+=P,(L=c(this,nu))==null||L.push(e,t);const j=-P/S,z=T/S,W=j*c(this,Em),D=z*c(this,Em);return c(this,Ze).set(c(this,Ze).subarray(2,8),0),c(this,Ze).set([h+W,f+D],4),c(this,Ze).set(c(this,Ze).subarray(14,18),12),c(this,Ze).set([h-W,f-D],16),isNaN(c(this,Ze)[6])?(c(this,za).length===0&&(c(this,Ze).set([u+W,d+D],2),c(this,za).push(NaN,NaN,NaN,NaN,(u+W-n)/i,(d+D-r)/o),c(this,Ze).set([u-W,d-D],14),c(this,Hi).push(NaN,NaN,NaN,NaN,(u-W-n)/i,(d-D-r)/o)),c(this,Ze).set([O,N,u,d,h,f],6),!this.isEmpty()):(c(this,Ze).set([O,N,u,d,h,f],6),Math.abs(Math.atan2(N-d,O-u)-Math.atan2(P,T))<Math.PI/2?([u,d,h,f]=c(this,Ze).subarray(2,6),c(this,za).push(NaN,NaN,NaN,NaN,((u+h)/2-n)/i,((d+f)/2-r)/o),[u,d,O,N]=c(this,Ze).subarray(14,18),c(this,Hi).push(NaN,NaN,NaN,NaN,((O+u)/2-n)/i,((N+d)/2-r)/o),!0):([O,N,u,d,h,f]=c(this,Ze).subarray(0,6),c(this,za).push(((O+5*u)/6-n)/i,((N+5*d)/6-r)/o,((5*u+h)/6-n)/i,((5*d+f)/6-r)/o,((u+h)/2-n)/i,((d+f)/2-r)/o),[h,f,u,d,O,N]=c(this,Ze).subarray(12,18),c(this,Hi).push(((O+5*u)/6-n)/i,((N+5*d)/6-r)/o,((5*u+h)/6-n)/i,((5*d+f)/6-r)/o,((u+h)/2-n)/i,((d+f)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,za),t=c(this,Hi);if(isNaN(c(this,Ze)[6])&&!this.isEmpty())return I(this,Vn,CL).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);I(this,Vn,FL).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return I(this,Vn,SL).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,o){return new PL(e,t,n,r,i,o)}getOutlines(){var g;const e=c(this,za),t=c(this,Hi),n=c(this,Ze),[r,i,o,u]=c(this,Ds),d=new Float32Array((((g=c(this,nu))==null?void 0:g.length)??0)+2);for(let w=0,A=d.length-2;w<A;w+=2)d[w]=(c(this,nu)[w]-r)/o,d[w+1]=(c(this,nu)[w+1]-i)/u;if(d[d.length-2]=(c(this,gh)-r)/o,d[d.length-1]=(c(this,yh)-i)/u,isNaN(n[6])&&!this.isEmpty())return I(this,Vn,TL).call(this,d);const h=new Float32Array(c(this,za).length+24+c(this,Hi).length);let f=e.length;for(let w=0;w<f;w+=2){if(isNaN(e[w])){h[w]=h[w+1]=NaN;continue}h[w]=e[w],h[w+1]=e[w+1]}f=I(this,Vn,IL).call(this,h,f);for(let w=t.length-6;w>=6;w-=6)for(let A=0;A<6;A+=2){if(isNaN(t[w+A])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[w+A],h[f+1]=t[w+A+1],f+=2}return I(this,Vn,kL).call(this,h,f),this.newFreeDrawOutline(h,d,c(this,Ds),c(this,xm),c(this,Am),c(this,_m))}};Ds=new WeakMap,Hi=new WeakMap,Am=new WeakMap,_m=new WeakMap,za=new WeakMap,Ze=new WeakMap,gh=new WeakMap,yh=new WeakMap,jw=new WeakMap,$w=new WeakMap,xm=new WeakMap,Em=new WeakMap,nu=new WeakMap,zw=new WeakMap,Z_=new WeakMap,e1=new WeakMap,Vn=new WeakSet,Pg=function(){const e=c(this,Ze).subarray(4,6),t=c(this,Ze).subarray(16,18),[n,r,i,o]=c(this,Ds);return[(c(this,gh)+(e[0]-t[0])/2-n)/i,(c(this,yh)+(e[1]-t[1])/2-r)/o,(c(this,gh)+(t[0]-e[0])/2-n)/i,(c(this,yh)+(t[1]-e[1])/2-r)/o]},CL=function(){const[e,t,n,r]=c(this,Ds),[i,o,u,d]=I(this,Vn,Pg).call(this);return`M${(c(this,Ze)[2]-e)/n} ${(c(this,Ze)[3]-t)/r} L${(c(this,Ze)[4]-e)/n} ${(c(this,Ze)[5]-t)/r} L${i} ${o} L${u} ${d} L${(c(this,Ze)[16]-e)/n} ${(c(this,Ze)[17]-t)/r} L${(c(this,Ze)[14]-e)/n} ${(c(this,Ze)[15]-t)/r} Z`},SL=function(e){const t=c(this,Hi);e.push(`L${t[4]} ${t[5]} Z`)},FL=function(e){const[t,n,r,i]=c(this,Ds),o=c(this,Ze).subarray(4,6),u=c(this,Ze).subarray(16,18),[d,h,f,g]=I(this,Vn,Pg).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-n)/i} L${d} ${h} L${f} ${g} L${(u[0]-t)/r} ${(u[1]-n)/i}`)},TL=function(e){const t=c(this,Ze),[n,r,i,o]=c(this,Ds),[u,d,h,f]=I(this,Vn,Pg).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(g,e,c(this,Ds),c(this,xm),c(this,Am),c(this,_m))},kL=function(e,t){const n=c(this,Hi);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},IL=function(e,t){const n=c(this,Ze).subarray(4,6),r=c(this,Ze).subarray(16,18),[i,o,u,d]=c(this,Ds),[h,f,g,w]=I(this,Vn,Pg).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/u,(n[1]-o)/d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,w,NaN,NaN,NaN,NaN,(r[0]-i)/u,(r[1]-o)/d],t),t+=24},F(Lo,zw,8),F(Lo,Z_,2),F(Lo,e1,c(Lo,zw)+c(Lo,Z_));let L_=Lo;var bm,wh,hl,Hw,Ns,Ww,An,t1,RL;class PL extends Fe{constructor(t,n,r,i,o,u){super();F(this,t1);F(this,bm);F(this,wh,new Float32Array(4));F(this,hl);F(this,Hw);F(this,Ns);F(this,Ww);F(this,An);_(this,An,t),_(this,Ns,n),_(this,bm,r),_(this,Ww,i),_(this,hl,o),_(this,Hw,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],I(this,t1,RL).call(this,u);const[d,h,f,g]=c(this,wh);for(let w=0,A=t.length;w<A;w+=2)t[w]=(t[w]-d)/f,t[w+1]=(t[w+1]-h)/g;for(let w=0,A=n.length;w<A;w+=2)n[w]=(n[w]-d)/f,n[w+1]=(n[w+1]-h)/g}toSVGPath(){const t=[`M${c(this,An)[4]} ${c(this,An)[5]}`];for(let n=6,r=c(this,An).length;n<r;n+=6){if(isNaN(c(this,An)[n])){t.push(`L${c(this,An)[n+4]} ${c(this,An)[n+5]}`);continue}t.push(`C${c(this,An)[n]} ${c(this,An)[n+1]} ${c(this,An)[n+2]} ${c(this,An)[n+3]} ${c(this,An)[n+4]} ${c(this,An)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,i],o){const u=r-t,d=i-n;let h,f;switch(o){case 0:h=Fe._rescale(c(this,An),t,i,u,-d),f=Fe._rescale(c(this,Ns),t,i,u,-d);break;case 90:h=Fe._rescaleAndSwap(c(this,An),t,n,u,d),f=Fe._rescaleAndSwap(c(this,Ns),t,n,u,d);break;case 180:h=Fe._rescale(c(this,An),r,n,-u,d),f=Fe._rescale(c(this,Ns),r,n,-u,d);break;case 270:h=Fe._rescaleAndSwap(c(this,An),r,i,-u,-d),f=Fe._rescaleAndSwap(c(this,Ns),r,i,-u,-d);break}return{outline:Array.from(h),points:[Array.from(f)]}}get box(){return c(this,wh)}newOutliner(t,n,r,i,o,u=0){return new L_(t,n,r,i,o,u)}getNewOutline(t,n){const[r,i,o,u]=c(this,wh),[d,h,f,g]=c(this,bm),w=o*f,A=u*g,S=r*f+d,C=i*g+h,T=this.newOutliner({x:c(this,Ns)[0]*w+S,y:c(this,Ns)[1]*A+C},c(this,bm),c(this,Ww),t,c(this,Hw),n??c(this,hl));for(let P=2;P<c(this,Ns).length;P+=2)T.add({x:c(this,Ns)[P]*w+S,y:c(this,Ns)[P+1]*A+C});return T.getOutlines()}}bm=new WeakMap,wh=new WeakMap,hl=new WeakMap,Hw=new WeakMap,Ns=new WeakMap,Ww=new WeakMap,An=new WeakMap,t1=new WeakSet,RL=function(t){const n=c(this,An);let r=n[4],i=n[5];const o=[r,i,r,i];let u=r,d=i,h=r,f=i;const g=t?Math.max:Math.min,w=new Float32Array(4);for(let S=6,C=n.length;S<C;S+=6){const T=n[S+4],P=n[S+5];isNaN(n[S])?(xe.pointBoundingBox(T,P,o),d>P?(u=T,d=P):d===P&&(u=g(u,T)),f<P?(h=T,f=P):f===P&&(h=g(h,T))):(w[0]=w[1]=1/0,w[2]=w[3]=-1/0,xe.bezierBoundingBox(r,i,...n.slice(S,S+6),w),xe.rectBoundingBox(w[0],w[1],w[2],w[3],o),d>w[1]?(u=w[0],d=w[1]):d===w[1]&&(u=g(u,w[0])),f<w[3]?(h=w[2],f=w[3]):f===w[3]&&(h=g(h,w[2]))),r=T,i=P}const A=c(this,wh);A[0]=o[0]-c(this,hl),A[1]=o[1]-c(this,hl),A[2]=o[2]-o[0]+2*c(this,hl),A[3]=o[3]-o[1]+2*c(this,hl),this.firstPoint=[u,d],this.lastPoint=[h,f]};var Gw,qw,Kw,ru,Wi,zr,DL,qA,NL,ML,DC;class RC{constructor(e,t=0,n=0,r=!0){F(this,zr);F(this,Gw);F(this,qw);F(this,Kw);F(this,ru,[]);F(this,Wi,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:C,y:T,width:P,height:O}of e){const N=Math.floor((C-t)/o)*o,j=Math.ceil((C+P+t)/o)*o,z=Math.floor((T-t)/o)*o,W=Math.ceil((T+O+t)/o)*o,D=[N,z,W,!0],R=[j,z,W,!1];c(this,ru).push(D,R),xe.rectBoundingBox(N,z,j,W,i)}const u=i[2]-i[0]+2*n,d=i[3]-i[1]+2*n,h=i[0]-n,f=i[1]-n;let g=r?-1/0:1/0,w=1/0;const A=c(this,ru).at(r?-1:-2),S=[A[0],A[2]];for(const C of c(this,ru)){const[T,P,O,N]=C;!N&&r?P<w?(w=P,g=T):P===w&&(g=Math.max(g,T)):N&&!r&&(P<w?(w=P,g=T):P===w&&(g=Math.min(g,T))),C[0]=(T-h)/u,C[1]=(P-f)/d,C[2]=(O-f)/d}_(this,Gw,new Float32Array([h,f,u,d])),_(this,qw,[g,w]),_(this,Kw,S)}getOutlines(){c(this,ru).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of c(this,ru))t[3]?(e.push(...I(this,zr,DC).call(this,t)),I(this,zr,NL).call(this,t)):(I(this,zr,ML).call(this,t),e.push(...I(this,zr,DC).call(this,t)));return I(this,zr,DL).call(this,e)}}Gw=new WeakMap,qw=new WeakMap,Kw=new WeakMap,ru=new WeakMap,Wi=new WeakMap,zr=new WeakSet,DL=function(e){const t=[],n=new Set;for(const o of e){const[u,d,h]=o;t.push([u,d,o],[u,h,o])}t.sort((o,u)=>o[1]-u[1]||o[0]-u[0]);for(let o=0,u=t.length;o<u;o+=2){const d=t[o][2],h=t[o+1][2];d.push(h),h.push(d),n.add(d),n.add(h)}const r=[];let i;for(;n.size>0;){const o=n.values().next().value;let[u,d,h,f,g]=o;n.delete(o);let w=u,A=d;for(i=[u,h],r.push(i);;){let S;if(n.has(f))S=f;else if(n.has(g))S=g;else break;n.delete(S),[u,d,h,f,g]=S,w!==u&&(i.push(w,A,u,A===d?d:h),w=u),A=A===d?h:d}i.push(w,A)}return new JG(r,c(this,Gw),c(this,qw),c(this,Kw))},qA=function(e){const t=c(this,Wi);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,o=t[i][0];if(o===e)return i;o<e?n=i+1:r=i-1}return r+1},NL=function([,e,t]){const n=I(this,zr,qA).call(this,e);c(this,Wi).splice(n,0,[e,t])},ML=function([,e,t]){const n=I(this,zr,qA).call(this,e);for(let r=n;r<c(this,Wi).length;r++){const[i,o]=c(this,Wi)[r];if(i!==e)break;if(i===e&&o===t){c(this,Wi).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[i,o]=c(this,Wi)[r];if(i!==e)break;if(i===e&&o===t){c(this,Wi).splice(r,1);return}}},DC=function(e){const[t,n,r]=e,i=[[t,n,r]],o=I(this,zr,qA).call(this,r);for(let u=0;u<o;u++){const[d,h]=c(this,Wi)[u];for(let f=0,g=i.length;f<g;f++){const[,w,A]=i[f];if(!(h<=w||A<=d)){if(w>=d){if(A>h)i[f][1]=h;else{if(g===1)return[];i.splice(f,1),f--,g--}continue}i[f][2]=d,A>h&&i.push([t,h,A])}}}return i};var Qw,Cm;class JG extends Fe{constructor(t,n,r,i){super();F(this,Qw);F(this,Cm);_(this,Cm,t),_(this,Qw,n),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const n of c(this,Cm)){let[r,i]=n;t.push(`M${r} ${i}`);for(let o=2;o<n.length;o+=2){const u=n[o],d=n[o+1];u===r?(t.push(`V${d}`),i=d):d===i&&(t.push(`H${u}`),r=u)}t.push("Z")}return t.join(" ")}serialize([t,n,r,i],o){const u=[],d=r-t,h=i-n;for(const f of c(this,Cm)){const g=new Array(f.length);for(let w=0;w<f.length;w+=2)g[w]=t+f[w]*d,g[w+1]=i-f[w+1]*h;u.push(g)}return u}get box(){return c(this,Qw)}get classNamesForOutlining(){return["highlightOutline"]}}Qw=new WeakMap,Cm=new WeakMap;class NC extends L_{newFreeDrawOutline(e,t,n,r,i,o){return new ZG(e,t,n,r,i,o)}}class ZG extends PL{newOutliner(e,t,n,r,i,o=0){return new NC(e,t,n,r,i,o)}}var Sm,Xw,pl,vh,Yw,is,Jw,Zw,Ah,Ms,Ls,or,Fm,Tm,Tr,km,gi,e0,Xe,MC,KA,LL,OL,BL,LC,yd,Ai,Jp,VL,QA,XA,UL,jL,$L,zL,HL;const gt=class gt extends Bt{constructor(t){super({...t,name:"highlightEditor"});F(this,Xe);F(this,Sm,null);F(this,Xw,0);F(this,pl);F(this,vh,null);F(this,Yw,null);F(this,is,null);F(this,Jw,null);F(this,Zw,0);F(this,Ah,null);F(this,Ms,null);F(this,Ls,null);F(this,or,!1);F(this,Fm,null);F(this,Tm,null);F(this,Tr,null);F(this,km,"");F(this,gi);F(this,e0,"");this.color=t.color||gt._defaultColor,_(this,gi,t.thickness||gt._defaultThickness),this.opacity=t.opacity||gt._defaultOpacity,_(this,pl,t.boxes||null),_(this,e0,t.methodOfCreation||""),_(this,km,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(_(this,or,!0),I(this,Xe,KA).call(this,t),I(this,Xe,yd).call(this)):c(this,pl)&&(_(this,Sm,t.anchorNode),_(this,Xw,t.anchorOffset),_(this,Jw,t.focusNode),_(this,Zw,t.focusOffset),I(this,Xe,MC).call(this),I(this,Xe,yd).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=gt.prototype;return We(this,"_keyboardManager",new F0([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,or)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,gi),methodOfCreation:c(this,e0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;Bt.initialize(t,n),gt._defaultColor||(gt._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case at.HIGHLIGHT_COLOR:gt._defaultColor=n;break;case at.HIGHLIGHT_THICKNESS:gt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return c(this,Tm)}get commentButtonPosition(){return c(this,Fm)}updateParams(t,n){switch(t){case at.HIGHLIGHT_COLOR:I(this,Xe,LL).call(this,n);break;case at.HIGHLIGHT_THICKNESS:I(this,Xe,OL).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[at.HIGHLIGHT_COLOR,gt._defaultColor],[at.HIGHLIGHT_THICKNESS,gt._defaultThickness]]}get propertiesToUpdate(){return[[at.HIGHLIGHT_COLOR,this.color||gt._defaultColor],[at.HIGHLIGHT_THICKNESS,c(this,gi)||gt._defaultThickness],[at.HIGHLIGHT_FREE,c(this,or)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Ls),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=c(this,Yw))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",_(this,Yw,new D_({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(I(this,Xe,XA).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,I(this,Xe,XA).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){I(this,Xe,LC).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,Xe,yd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?I(this,Xe,LC).call(this):t&&(I(this,Xe,yd).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,o,u;const{drawLayer:n}=this.parent;let r;c(this,or)?(t=(t-this.rotation+360)%360,r=I(i=gt,Ai,Jp).call(i,c(this,Ms).box,t)):r=I(o=gt,Ai,Jp).call(o,[this.x,this.y,this.width,this.height],t),n.updateProperties(c(this,Ls),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(c(this,Tr),{bbox:I(u=gt,Ai,Jp).call(u,c(this,is).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,km)&&(t.setAttribute("aria-label",c(this,km)),t.setAttribute("role","mark")),c(this,or)?t.classList.add("free"):this.div.addEventListener("keydown",I(this,Xe,VL).bind(this),{signal:this._uiManager._signal});const n=_(this,Ah,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,vh),this.setDims(),YN(this,c(this,Ah),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Tr),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Tr),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:I(this,Xe,QA).call(this,!0);break;case 1:case 3:I(this,Xe,QA).call(this,!1);break}}select(){var t;super.select(),c(this,Tr)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Tr),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,Tr)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Tr),{rootClass:{selected:!1}}),c(this,or)||I(this,Xe,QA).call(this,!1))}get _mustFixPosition(){return!c(this,or)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Ls),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,Tr),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:i,y:o}){const{x:u,y:d,width:h,height:f}=r.getBoundingClientRect(),g=new AbortController,w=t.combinedSignal(g),A=S=>{g.abort(),I(this,Ai,zL).call(this,t,S)};window.addEventListener("blur",A,{signal:w}),window.addEventListener("pointerup",A,{signal:w}),window.addEventListener("pointerdown",un,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Ei,{signal:w}),r.addEventListener("pointermove",I(this,Ai,$L).bind(this,t),{signal:w}),this._freeHighlight=new NC({x:i,y:o},[u,d,h,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var C,T,P,O;let i=null;if(t instanceof wL){const{data:{quadPoints:N,rect:j,rotation:z,id:W,color:D,opacity:R,popupRef:L,richText:U,contentsObj:V,creationDate:G,modificationDate:$},parent:{page:{pageNumber:ye}}}=t;i=t={annotationType:Ke.HIGHLIGHT,color:Array.from(D),opacity:R,quadPoints:N,boxes:null,pageIndex:ye-1,rect:j.slice(0),rotation:z,annotationElementId:W,id:W,deleted:!1,popupRef:L,richText:U,comment:(V==null?void 0:V.str)||null,creationDate:G,modificationDate:$}}else if(t instanceof CF){const{data:{inkLists:N,rect:j,rotation:z,id:W,color:D,borderStyle:{rawWidth:R},popupRef:L,richText:U,contentsObj:V,creationDate:G,modificationDate:$},parent:{page:{pageNumber:ye}}}=t;i=t={annotationType:Ke.HIGHLIGHT,color:Array.from(D),thickness:R,inkLists:N,boxes:null,pageIndex:ye-1,rect:j.slice(0),rotation:z,annotationElementId:W,id:W,deleted:!1,popupRef:L,richText:U,comment:(V==null?void 0:V.str)||null,creationDate:G,modificationDate:$}}const{color:o,quadPoints:u,inkLists:d,opacity:h}=t,f=await super.deserialize(t,n,r);f.color=xe.makeHexColor(...o),f.opacity=h||1,d&&_(f,gi,t.thickness),f._initialData=i,t.comment&&f.setCommentData(t);const[g,w]=f.pageDimensions,[A,S]=f.pageTranslation;if(u){const N=_(f,pl,[]);for(let j=0;j<u.length;j+=8)N.push({x:(u[j]-A)/g,y:1-(u[j+1]-S)/w,width:(u[j+2]-u[j])/g,height:(u[j+1]-u[j+5])/w});I(C=f,Xe,MC).call(C),I(T=f,Xe,yd).call(T),f.rotate(f.rotation)}else if(d){_(f,or,!0);const N=d[0],j={x:N[0]-A,y:w-(N[1]-S)},z=new NC(j,[0,0,g,w],1,c(f,gi)/2,!0,.001);for(let R=0,L=N.length;R<L;R+=2)j.x=N[R]-A,j.y=w-(N[R+1]-S),z.add(j);const{id:W,clipPathId:D}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);I(P=f,Xe,KA).call(P,{highlightOutlines:z.getOutlines(),highlightId:W,clipPathId:D}),I(O=f,Xe,yd).call(O),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=Bt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:n,opacity:this.opacity,thickness:c(this,gi),quadPoints:I(this,Xe,UL).call(this),outlines:I(this,Xe,jL).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!I(this,Xe,HL).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Sm=new WeakMap,Xw=new WeakMap,pl=new WeakMap,vh=new WeakMap,Yw=new WeakMap,is=new WeakMap,Jw=new WeakMap,Zw=new WeakMap,Ah=new WeakMap,Ms=new WeakMap,Ls=new WeakMap,or=new WeakMap,Fm=new WeakMap,Tm=new WeakMap,Tr=new WeakMap,km=new WeakMap,gi=new WeakMap,e0=new WeakMap,Xe=new WeakSet,MC=function(){const t=new RC(c(this,pl),.001);_(this,Ms,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,Ms).box;const n=new RC(c(this,pl),.0025,.001,this._uiManager.direction==="ltr");_(this,is,n.getOutlines());const{firstPoint:r}=c(this,Ms);_(this,Fm,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=c(this,is);_(this,Tm,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},KA=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var w,A;if(_(this,Ms,t),_(this,is,t.getNewOutline(c(this,gi)/2+1.5,.0025)),n>=0)_(this,Ls,n),_(this,vh,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),_(this,Tr,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,is).box,path:{d:c(this,is).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Ls),{bbox:I(w=gt,Ai,Jp).call(w,c(this,Ms).box,(S-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Tr),{bbox:I(A=gt,Ai,Jp).call(A,c(this,is).box,S),path:{d:c(this,is).toSVGPath()}})}const[o,u,d,h]=t.box;switch(this.rotation){case 0:this.x=o,this.y=u,this.width=d,this.height=h;break;case 90:{const[S,C]=this.parentDimensions;this.x=u,this.y=1-o,this.width=d*C/S,this.height=h*S/C;break}case 180:this.x=1-o,this.y=1-u,this.width=d,this.height=h;break;case 270:{const[S,C]=this.parentDimensions;this.x=1-u,this.y=o,this.width=d*C/S,this.height=h*S/C;break}}const{firstPoint:f}=t;_(this,Fm,[(f[0]-o)/d,(f[1]-u)/h]);const{lastPoint:g}=c(this,is);_(this,Tm,[(g[0]-o)/d,(g[1]-u)/h])},LL=function(t){const n=(o,u)=>{this.color=o,this.opacity=u,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:n.bind(this,t,gt._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},OL=function(t){const n=c(this,gi),r=i=>{_(this,gi,i),I(this,Xe,BL).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},BL=function(t){c(this,or)&&(I(this,Xe,KA).call(this,{highlightOutlines:c(this,Ms).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},LC=function(){c(this,Ls)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Ls)),_(this,Ls,null),this.parent.drawLayer.remove(c(this,Tr)),_(this,Tr,null))},yd=function(t=this.parent){c(this,Ls)===null&&({id:Mn(this,Ls)._,clipPathId:Mn(this,vh)._}=t.drawLayer.draw({bbox:c(this,Ms).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,or)},path:{d:c(this,Ms).toSVGPath()}},!1,!0),_(this,Tr,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,or)},bbox:c(this,is).box,path:{d:c(this,is).toSVGPath()}},c(this,or))),c(this,Ah)&&(c(this,Ah).style.clipPath=c(this,vh)))},Ai=new WeakSet,Jp=function([t,n,r,i],o){switch(o){case 90:return[1-n-i,t,i,r];case 180:return[1-t-r,1-n-i,r,i];case 270:return[n,1-t-r,i,r]}return[t,n,r,i]},VL=function(t){gt._keyboardManager.exec(this,t)},QA=function(t){if(!c(this,Sm))return;const n=window.getSelection();t?n.setPosition(c(this,Sm),c(this,Xw)):n.setPosition(c(this,Jw),c(this,Zw))},XA=function(){return c(this,or)?this.rotation:0},UL=function(){if(c(this,or))return null;const[t,n]=this.pageDimensions,[r,i]=this.pageTranslation,o=c(this,pl),u=new Float32Array(o.length*8);let d=0;for(const{x:h,y:f,width:g,height:w}of o){const A=h*t+r,S=(1-f)*n+i;u[d]=u[d+4]=A,u[d+1]=u[d+3]=S,u[d+2]=u[d+6]=A+g*t,u[d+5]=u[d+7]=S-w*n,d+=8}return u},jL=function(t){return c(this,Ms).serialize(t,I(this,Xe,XA).call(this))},$L=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},zL=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},HL=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==n[i])},F(gt,Ai),ne(gt,"_defaultColor",null),ne(gt,"_defaultOpacity",1),ne(gt,"_defaultThickness",12),ne(gt,"_type","highlight"),ne(gt,"_editorType",Ke.HIGHLIGHT),ne(gt,"_freeHighlightId",-1),ne(gt,"_freeHighlight",null),ne(gt,"_freeHighlightClipId","");let O_=gt;var _h;class WL{constructor(){F(this,_h,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){c(this,_h)[e]=t}toSVGProperties(){const e=c(this,_h);return _(this,_h,Object.create(null)),{root:e}}reset(){_(this,_h,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){wt("Not implemented")}}_h=new WeakMap;var Os,Im,qn,xh,Eh,ut,OC,BC,VC,Rg,GL,YA,Dg,Zp;const tt=class tt extends Bt{constructor(t){super(t);F(this,ut);F(this,Os,null);F(this,Im);ne(this,"_colorPicker",null);ne(this,"_drawId",null);_(this,Im,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(I(this,ut,OC).call(this,t),I(this,ut,Rg).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(n))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){wt("Not implemented")}static get typesMap(){wt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(c(tt,qn).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,n[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,n[i]]);return t}_updateProperty(t,n,r){const i=this._drawingOptions,o=i[n],u=d=>{var f;i.updateProperty(n,d);const h=c(this,Os).updateProperty(n,d);h&&I(this,ut,Dg).call(this,h),(f=this.parent)==null||f.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,r),undo:u.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(c(this,Os).getPathResizingSVGProperties(I(this,ut,YA).call(this)),{bbox:I(this,ut,Zp).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(c(this,Os).getPathResizedSVGProperties(I(this,ut,YA).call(this)),{bbox:I(this,ut,Zp).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:I(this,ut,Zp).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(c(this,Os).getPathTranslatedSVGProperties(I(this,ut,YA).call(this),this.parentDimensions),{bbox:I(this,ut,Zp).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Im)&&(_(this,Im,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){I(this,ut,VC).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,ut,Rg).call(this),I(this,ut,Dg).call(this,c(this,Os).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),I(this,ut,VC).call(this)):t&&(this._uiManager.addShouldRescale(this),I(this,ut,Rg).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties({bbox:I(this,ut,Zp).call(this)},c(this,Os).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&I(this,ut,Dg).call(this,c(this,Os).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,i,o){wt("Not implemented")}static startDrawing(t,n,r,i){var T;const{target:o,offsetX:u,offsetY:d,pointerId:h,pointerType:f}=i;if(Er.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:w,height:A}=o.getBoundingClientRect(),S=_(tt,xh,new AbortController),C=t.combinedSignal(S);if(Er.setPointer(f,h),window.addEventListener("pointerup",P=>{Er.isSamePointerIdOrRemove(P.pointerId)&&this._endDraw(P)},{signal:C}),window.addEventListener("pointercancel",P=>{Er.isSamePointerIdOrRemove(P.pointerId)&&this._currentParent.endDrawingSession()},{signal:C}),window.addEventListener("pointerdown",P=>{Er.isSamePointerType(P.pointerType)&&(Er.initializeAndAddPointerId(P.pointerId),c(tt,qn).isCancellable()&&(c(tt,qn).removeLastElement(),c(tt,qn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",Ei,{signal:C}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),o.addEventListener("touchmove",P=>{Er.isSameTimeStamp(P.timeStamp)&&un(P)},{signal:C}),t.toggleDrawing(),(T=n._editorUndoBar)==null||T.hide(),c(tt,qn)){t.drawLayer.updateProperties(this._currentDrawId,c(tt,qn).startNew(u,d,w,A,g));return}n.updateUIForDefaultProperties(this),_(tt,qn,this.createDrawerInstance(u,d,w,A,g)),_(tt,Eh,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(tt,Eh).toSVGProperties(),c(tt,qn).defaultSVGProperties),!0,!1)}static _drawMove(t){if(Er.isSameTimeStamp(t.timeStamp),!c(tt,qn))return;const{offsetX:n,offsetY:r,pointerId:i}=t;if(Er.isSamePointerId(i)){if(Er.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(tt,qn).add(n,r)),Er.setTimeStamp(t.timeStamp),un(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,_(tt,qn,null),_(tt,Eh,null),Er.clearTimeStamp()),c(tt,xh)&&(c(tt,xh).abort(),_(tt,xh,null),Er.clearPointerIds())}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,c(tt,qn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=c(tt,qn),i=this._currentDrawId,o=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:at.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(at.DRAW_STEP),!c(tt,qn).isEmpty()){const{pageDimensions:[r,i],scale:o}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(tt,qn).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:c(tt,Eh),mustBeCommitted:!t});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,i,o,u){wt("Not implemented")}static async deserialize(t,n,r){var g,w;const{rawDims:{pageWidth:i,pageHeight:o,pageX:u,pageY:d}}=n.viewport,h=this.deserializeDraw(u,d,i,o,this._INNER_MARGIN,t),f=await super.deserialize(t,n,r);return f.createDrawingOptions(t),I(g=f,ut,OC).call(g,{drawOutlines:h}),I(w=f,ut,Rg).call(w),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[n,r]=this.pageTranslation,[i,o]=this.pageDimensions;return c(this,Os).serialize([n,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Os=new WeakMap,Im=new WeakMap,qn=new WeakMap,xh=new WeakMap,Eh=new WeakMap,ut=new WeakSet,OC=function({drawOutlines:t,drawId:n,drawingOptions:r}){_(this,Os,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=I(this,ut,BC).call(this,t,this.parent),I(this,ut,Dg).call(this,t.box)},BC=function(t,n){const{id:r}=n.drawLayer.draw(tt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},VC=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Rg=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=I(this,ut,BC).call(this,c(this,Os),t)}},GL=function([t,n,r,i]){const{parentDimensions:[o,u],rotation:d}=this;switch(d){case 90:return[n,1-t,r*(u/o),i*(o/u)];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,r*(u/o),i*(o/u)];default:return[t,n,r,i]}},YA=function(){const{x:t,y:n,width:r,height:i,parentDimensions:[o,u],rotation:d}=this;switch(d){case 90:return[1-n,t,r*(o/u),i*(u/o)];case 180:return[1-t,1-n,r,i];case 270:return[n,1-t,r*(o/u),i*(u/o)];default:return[t,n,r,i]}},Dg=function(t){[this.x,this.y,this.width,this.height]=I(this,ut,GL).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Zp=function(){const{x:t,y:n,width:r,height:i,rotation:o,parentRotation:u,parentDimensions:[d,h]}=this;switch((o*4+u)/90){case 1:return[1-n-i,t,i,r];case 2:return[1-t-r,1-n-i,r,i];case 3:return[n,1-t-r,i,r];case 4:return[t,n-r*(d/h),i*(h/d),r*(d/h)];case 5:return[1-n,t,r*(d/h),i*(h/d)];case 6:return[1-t-i*(h/d),1-n,i*(h/d),r*(d/h)];case 7:return[n-r*(d/h),1-t-i*(h/d),r*(d/h),i*(h/d)];case 8:return[t-r,n-i,r,i];case 9:return[1-n,t-r,i,r];case 10:return[1-t,1-n,r,i];case 11:return[n-i,1-t,i,r];case 12:return[t-i*(h/d),n,i*(h/d),r*(d/h)];case 13:return[1-n-r*(d/h),t-i*(h/d),r*(d/h),i*(h/d)];case 14:return[1-t,1-n-r*(d/h),i*(h/d),r*(d/h)];case 15:return[n,1-t,r*(d/h),i*(h/d)];default:return[t,n,r,i]}},ne(tt,"_currentDrawId",-1),ne(tt,"_currentParent",null),F(tt,qn,null),F(tt,xh,null),F(tt,Eh,null),ne(tt,"_INNER_MARGIN",3);let B_=tt;var Ha,Kn,Qn,bh,Pm,Or,lr,yi,Ch,Sh,Fh,Rm,JA;class eq{constructor(e,t,n,r,i,o){F(this,Rm);F(this,Ha,new Float64Array(6));F(this,Kn);F(this,Qn);F(this,bh);F(this,Pm);F(this,Or);F(this,lr,"");F(this,yi,0);F(this,Ch,new T0);F(this,Sh);F(this,Fh);_(this,Sh,n),_(this,Fh,r),_(this,bh,i),_(this,Pm,o),[e,t]=I(this,Rm,JA).call(this,e,t);const u=_(this,Kn,[NaN,NaN,NaN,NaN,e,t]);_(this,Or,[e,t]),_(this,Qn,[{line:u,points:c(this,Or)}]),c(this,Ha).set(u,0)}updateProperty(e,t){e==="stroke-width"&&_(this,Pm,t)}isEmpty(){return!c(this,Qn)||c(this,Qn).length===0}isCancellable(){return c(this,Or).length<=10}add(e,t){[e,t]=I(this,Rm,JA).call(this,e,t);const[n,r,i,o]=c(this,Ha).subarray(2,6),u=e-i,d=t-o;return Math.hypot(c(this,Sh)*u,c(this,Fh)*d)<=2?null:(c(this,Or).push(e,t),isNaN(n)?(c(this,Ha).set([i,o,e,t],2),c(this,Kn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Ha)[0])&&c(this,Kn).splice(6,6),c(this,Ha).set([n,r,i,o,e,t],0),c(this,Kn).push(...Fe.createBezierPoints(n,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(c(this,Or).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){_(this,Sh,n),_(this,Fh,r),_(this,bh,i),[e,t]=I(this,Rm,JA).call(this,e,t);const o=_(this,Kn,[NaN,NaN,NaN,NaN,e,t]);_(this,Or,[e,t]);const u=c(this,Qn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),c(this,Qn).push({line:o,points:c(this,Or)}),c(this,Ha).set(o,0),_(this,yi,0),this.toSVGPath(),null}getLastElement(){return c(this,Qn).at(-1)}setLastElement(e){return c(this,Qn)?(c(this,Qn).push(e),_(this,Kn,e.line),_(this,Or,e.points),_(this,yi,0),{path:{d:this.toSVGPath()}}):c(this,Ch).setLastElement(e)}removeLastElement(){if(!c(this,Qn))return c(this,Ch).removeLastElement();c(this,Qn).pop(),_(this,lr,"");for(let e=0,t=c(this,Qn).length;e<t;e++){const{line:n,points:r}=c(this,Qn)[e];_(this,Kn,n),_(this,Or,r),_(this,yi,0),this.toSVGPath()}return{path:{d:c(this,lr)}}}toSVGPath(){const e=Fe.svgRound(c(this,Kn)[4]),t=Fe.svgRound(c(this,Kn)[5]);if(c(this,Or).length===2)return _(this,lr,`${c(this,lr)} M ${e} ${t} Z`),c(this,lr);if(c(this,Or).length<=6){const r=c(this,lr).lastIndexOf("M");_(this,lr,`${c(this,lr).slice(0,r)} M ${e} ${t}`),_(this,yi,6)}if(c(this,Or).length===4){const r=Fe.svgRound(c(this,Kn)[10]),i=Fe.svgRound(c(this,Kn)[11]);return _(this,lr,`${c(this,lr)} L ${r} ${i}`),_(this,yi,12),c(this,lr)}const n=[];c(this,yi)===0&&(n.push(`M ${e} ${t}`),_(this,yi,6));for(let r=c(this,yi),i=c(this,Kn).length;r<i;r+=6){const[o,u,d,h,f,g]=c(this,Kn).slice(r,r+6).map(Fe.svgRound);n.push(`C${o} ${u} ${d} ${h} ${f} ${g}`)}return _(this,lr,c(this,lr)+n.join(" ")),_(this,yi,c(this,Kn).length),c(this,lr)}getOutlines(e,t,n,r){const i=c(this,Qn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),c(this,Ch).build(c(this,Qn),e,t,n,c(this,bh),c(this,Pm),r),_(this,Ha,null),_(this,Kn,null),_(this,Qn,null),_(this,lr,null),c(this,Ch)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ha=new WeakMap,Kn=new WeakMap,Qn=new WeakMap,bh=new WeakMap,Pm=new WeakMap,Or=new WeakMap,lr=new WeakMap,yi=new WeakMap,Ch=new WeakMap,Sh=new WeakMap,Fh=new WeakMap,Rm=new WeakSet,JA=function(e,t){return Fe._normalizePoint(e,t,c(this,Sh),c(this,Fh),c(this,bh))};var Br,t0,n0,Bs,Wa,Ga,Dm,Nm,Th,hr,No,qL,KL,QL;class T0 extends Fe{constructor(){super(...arguments);F(this,hr);F(this,Br);F(this,t0,0);F(this,n0);F(this,Bs);F(this,Wa);F(this,Ga);F(this,Dm);F(this,Nm);F(this,Th)}build(t,n,r,i,o,u,d){_(this,Wa,n),_(this,Ga,r),_(this,Dm,i),_(this,Nm,o),_(this,Th,u),_(this,n0,d??0),_(this,Bs,t),I(this,hr,KL).call(this)}get thickness(){return c(this,Th)}setLastElement(t){return c(this,Bs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Bs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of c(this,Bs)){if(t.push(`M${Fe.svgRound(n[4])} ${Fe.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Fe.svgRound(n[10])} ${Fe.svgRound(n[11])}`);continue}for(let r=6,i=n.length;r<i;r+=6){const[o,u,d,h,f,g]=n.subarray(r,r+6).map(Fe.svgRound);t.push(`C${o} ${u} ${d} ${h} ${f} ${g}`)}}return t.join("")}serialize([t,n,r,i],o){const u=[],d=[],[h,f,g,w]=I(this,hr,qL).call(this);let A,S,C,T,P,O,N,j,z;switch(c(this,Nm)){case 0:z=Fe._rescale,A=t,S=n+i,C=r,T=-i,P=t+h*r,O=n+(1-f-w)*i,N=t+(h+g)*r,j=n+(1-f)*i;break;case 90:z=Fe._rescaleAndSwap,A=t,S=n,C=r,T=i,P=t+f*r,O=n+h*i,N=t+(f+w)*r,j=n+(h+g)*i;break;case 180:z=Fe._rescale,A=t+r,S=n,C=-r,T=i,P=t+(1-h-g)*r,O=n+f*i,N=t+(1-h)*r,j=n+(f+w)*i;break;case 270:z=Fe._rescaleAndSwap,A=t+r,S=n+i,C=-r,T=-i,P=t+(1-f-w)*r,O=n+(1-h-g)*i,N=t+(1-f)*r,j=n+(1-h)*i;break}for(const{line:W,points:D}of c(this,Bs))u.push(z(W,A,S,C,T,o?new Array(W.length):null)),d.push(z(D,A,S,C,T,o?new Array(D.length):null));return{lines:u,points:d,rect:[P,O,N,j]}}static deserialize(t,n,r,i,o,{paths:{lines:u,points:d},rotation:h,thickness:f}){const g=[];let w,A,S,C,T;switch(h){case 0:T=Fe._rescale,w=-t/r,A=n/i+1,S=1/r,C=-1/i;break;case 90:T=Fe._rescaleAndSwap,w=-n/i,A=-t/r,S=1/i,C=1/r;break;case 180:T=Fe._rescale,w=t/r+1,A=-n/i,S=-1/r,C=1/i;break;case 270:T=Fe._rescaleAndSwap,w=n/i+1,A=t/r+1,S=-1/i,C=-1/r;break}if(!u){u=[];for(const O of d){const N=O.length;if(N===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1]]));continue}if(N===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1],NaN,NaN,NaN,NaN,O[2],O[3]]));continue}const j=new Float32Array(3*(N-2));u.push(j);let[z,W,D,R]=O.subarray(0,4);j.set([NaN,NaN,NaN,NaN,z,W],0);for(let L=4;L<N;L+=2){const U=O[L],V=O[L+1];j.set(Fe.createBezierPoints(z,W,D,R,U,V),(L-2)*3),[z,W,D,R]=[D,R,U,V]}}}for(let O=0,N=u.length;O<N;O++)g.push({line:T(u[O].map(j=>j??NaN),w,A,S,C),points:T(d[O].map(j=>j??NaN),w,A,S,C)});const P=new this.prototype.constructor;return P.build(g,r,i,1,h,f,o),P}get box(){return c(this,Br)}updateProperty(t,n){return t==="stroke-width"?I(this,hr,QL).call(this,n):null}updateParentDimensions([t,n],r){const[i,o]=I(this,hr,No).call(this);_(this,Wa,t),_(this,Ga,n),_(this,Dm,r);const[u,d]=I(this,hr,No).call(this),h=u-i,f=d-o,g=c(this,Br);return g[0]-=h,g[1]-=f,g[2]+=2*h,g[3]+=2*f,g}updateRotation(t){return _(this,t0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Br).map(Fe.svgRound).join(" ")}get defaultProperties(){const[t,n]=c(this,Br);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Fe.svgRound(t)} ${Fe.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=c(this,Br);let r=0,i=0,o=0,u=0,d=0,h=0;switch(c(this,t0)){case 90:i=n/t,o=-t/n,d=t;break;case 180:r=-1,u=-1,d=t,h=n;break;case 270:i=-n/t,o=t/n,h=n;break;default:return""}return`matrix(${r} ${i} ${o} ${u} ${Fe.svgRound(d)} ${Fe.svgRound(h)})`}getPathResizingSVGProperties([t,n,r,i]){const[o,u]=I(this,hr,No).call(this),[d,h,f,g]=c(this,Br);if(Math.abs(f-o)<=Fe.PRECISION||Math.abs(g-u)<=Fe.PRECISION){const T=t+r/2-(d+f/2),P=n+i/2-(h+g/2);return{path:{"transform-origin":`${Fe.svgRound(t)} ${Fe.svgRound(n)}`,transform:`${this.rotationTransform} translate(${T} ${P})`}}}const w=(r-2*o)/(f-2*o),A=(i-2*u)/(g-2*u),S=f/r,C=g/i;return{path:{"transform-origin":`${Fe.svgRound(d)} ${Fe.svgRound(h)}`,transform:`${this.rotationTransform} scale(${S} ${C}) translate(${Fe.svgRound(o)} ${Fe.svgRound(u)}) scale(${w} ${A}) translate(${Fe.svgRound(-o)} ${Fe.svgRound(-u)})`}}}getPathResizedSVGProperties([t,n,r,i]){const[o,u]=I(this,hr,No).call(this),d=c(this,Br),[h,f,g,w]=d;if(d[0]=t,d[1]=n,d[2]=r,d[3]=i,Math.abs(g-o)<=Fe.PRECISION||Math.abs(w-u)<=Fe.PRECISION){const P=t+r/2-(h+g/2),O=n+i/2-(f+w/2);for(const{line:N,points:j}of c(this,Bs))Fe._translate(N,P,O,N),Fe._translate(j,P,O,j);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Fe.svgRound(t)} ${Fe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(r-2*o)/(g-2*o),S=(i-2*u)/(w-2*u),C=-A*(h+o)+t+o,T=-S*(f+u)+n+u;if(A!==1||S!==1||C!==0||T!==0)for(const{line:P,points:O}of c(this,Bs))Fe._rescale(P,C,T,A,S,P),Fe._rescale(O,C,T,A,S,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Fe.svgRound(t)} ${Fe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[i,o]=r,u=c(this,Br),d=t-u[0],h=n-u[1];if(c(this,Wa)===i&&c(this,Ga)===o)for(const{line:f,points:g}of c(this,Bs))Fe._translate(f,d,h,f),Fe._translate(g,d,h,g);else{const f=c(this,Wa)/i,g=c(this,Ga)/o;_(this,Wa,i),_(this,Ga,o);for(const{line:w,points:A}of c(this,Bs))Fe._rescale(w,d,h,f,g,w),Fe._rescale(A,d,h,f,g,A);u[2]*=f,u[3]*=g}return u[0]=t,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Fe.svgRound(t)} ${Fe.svgRound(n)}`}}}get defaultSVGProperties(){const t=c(this,Br);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Fe.svgRound(t[0])} ${Fe.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Br=new WeakMap,t0=new WeakMap,n0=new WeakMap,Bs=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,Dm=new WeakMap,Nm=new WeakMap,Th=new WeakMap,hr=new WeakSet,No=function(t=c(this,Th)){const n=c(this,n0)+t/2*c(this,Dm);return c(this,Nm)%180===0?[n/c(this,Wa),n/c(this,Ga)]:[n/c(this,Ga),n/c(this,Wa)]},qL=function(){const[t,n,r,i]=c(this,Br),[o,u]=I(this,hr,No).call(this,0);return[t+o,n+u,r-2*o,i-2*u]},KL=function(){const t=_(this,Br,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of c(this,Bs)){if(i.length<=12){for(let d=4,h=i.length;d<h;d+=6)xe.pointBoundingBox(i[d],i[d+1],t);continue}let o=i[4],u=i[5];for(let d=6,h=i.length;d<h;d+=6){const[f,g,w,A,S,C]=i.subarray(d,d+6);xe.bezierBoundingBox(o,u,f,g,w,A,S,C,t),o=S,u=C}}const[n,r]=I(this,hr,No).call(this);t[0]=cr(t[0]-n,0,1),t[1]=cr(t[1]-r,0,1),t[2]=cr(t[2]+n,0,1),t[3]=cr(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},QL=function(t){const[n,r]=I(this,hr,No).call(this);_(this,Th,t);const[i,o]=I(this,hr,No).call(this),[u,d]=[i-n,o-r],h=c(this,Br);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h};class H1 extends WL{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Bt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new H1(this._viewParameters);return e.updateAll(this),e}}var n1,XL;const of=class of extends B_{constructor(t){super({...t,name:"inkEditor"});F(this,n1);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){Bt.initialize(t,n),this._defaultDrawingOptions=new H1(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return We(this,"typesMap",new Map([[at.INK_THICKNESS,"stroke-width"],[at.INK_COLOR,"stroke"],[at.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,i,o){return new eq(t,n,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,i,o,u){return T0.deserialize(t,n,r,i,o,u)}static async deserialize(t,n,r){let i=null;if(t instanceof CF){const{data:{inkLists:u,rect:d,rotation:h,id:f,color:g,opacity:w,borderStyle:{rawWidth:A},popupRef:S,richText:C,contentsObj:T,creationDate:P,modificationDate:O},parent:{page:{pageNumber:N}}}=t;i=t={annotationType:Ke.INK,color:Array.from(g),thickness:A,opacity:w,paths:{points:u},boxes:null,pageIndex:N-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:S,richText:C,comment:(T==null?void 0:T.str)||null,creationDate:P,modificationDate:O}}const o=await super.deserialize(t,n,r);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new N_(this)),[["colorPicker",this._colorPicker]]}get colorType(){return at.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=of.getDefaultDrawingOptions({stroke:xe.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":u}}=this,d=Object.assign(super.serialize(t),{color:Bt._colorManager.convert(i),opacity:o,thickness:u,paths:{lines:n,points:r}});return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!I(this,n1,XL).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};n1=new WeakSet,XL=function(t){const{color:n,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((u,d)=>u!==n[d])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},ne(of,"_type","ink"),ne(of,"_editorType",Ke.INK),ne(of,"_defaultDrawingOptions",null);let UC=of;class jC extends T0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const uA=8,lg=3;var kh,At,$C,Gi,YL,JL,zC,ZA,ZL,eO,tO,HC,WC,nO;class vl{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},i,o,u,d){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const g=200,w=f.font=`${n} ${r} ${g}px ${t}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:S,actualBoundingBoxAscent:C,actualBoundingBoxDescent:T,fontBoundingBoxAscent:P,fontBoundingBoxDescent:O,width:N}=f.measureText(e),j=1.5,z=Math.ceil(Math.max(Math.abs(A)+Math.abs(S)||0,N)*j),W=Math.ceil(Math.max(Math.abs(C)+Math.abs(T)||g,Math.abs(P)+Math.abs(O)||g)*j);h=new OffscreenCanvas(z,W),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=w,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,z,W),f.fillStyle="black",f.fillText(e,z*(j-1)/2,W*(3-j)/2);const D=I(this,At,HC).call(this,f.getImageData(0,0,z,W).data),R=I(this,At,tO).call(this,D),L=I(this,At,WC).call(this,R),U=I(this,At,zC).call(this,D,z,W,L);return this.processDrawnLines({lines:{curves:U,width:z,height:W},pageWidth:i,pageHeight:o,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,i){const[o,u,d]=I(this,At,nO).call(this,e),[h,f]=I(this,At,eO).call(this,o,u,d,Math.hypot(u,d)*c(this,kh).sigmaSFactor,c(this,kh).sigmaR,c(this,kh).kernelSize),g=I(this,At,WC).call(this,f),w=I(this,At,zC).call(this,h,u,d,g);return this.processDrawnLines({lines:{curves:w,width:u,height:d},pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:o,areContours:u}){r%180!==0&&([t,n]=[n,t]);const{curves:d,width:h,height:f}=e,g=e.thickness??0,w=[],A=Math.min(t/h,n/f),S=A/t,C=A/n,T=[];for(const{points:O}of d){const N=o?I(this,At,ZL).call(this,O):O;if(!N)continue;T.push(N);const j=N.length,z=new Float32Array(j),W=new Float32Array(3*(j===2?2:j-2));if(w.push({line:W,points:z}),j===2){z[0]=N[0]*S,z[1]=N[1]*C,W.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[D,R,L,U]=N;D*=S,R*=C,L*=S,U*=C,z.set([D,R,L,U],0),W.set([NaN,NaN,NaN,NaN,D,R],0);for(let V=4;V<j;V+=2){const G=z[V]=N[V]*S,$=z[V+1]=N[V+1]*C;W.set(Fe.createBezierPoints(D,R,L,U,G,$),(V-2)*3),[D,R,L,U]=[L,U,G,$]}}if(w.length===0)return null;const P=u?new jC:new T0;return P.build(w,t,n,1,r,u?0:g,i),{outline:P,newCurves:T,areContours:u,thickness:g,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:i}){let o=1/0,u=-1/0,d=0;for(const N of e){d+=N.length;for(let j=2,z=N.length;j<z;j++){const W=N[j]-N[j-2];o=Math.min(o,W),u=Math.max(u,W)}}let h;o>=-128&&u<=127?h=Int8Array:o>=-32768&&u<=32767?h=Int16Array:h=Int32Array;const f=e.length,g=uA+lg*f,w=new Uint32Array(g);let A=0;w[A++]=g*Uint32Array.BYTES_PER_ELEMENT+(d-2*f)*h.BYTES_PER_ELEMENT,w[A++]=0,w[A++]=r,w[A++]=i,w[A++]=t?0:1,w[A++]=Math.max(0,Math.floor(n??0)),w[A++]=f,w[A++]=h.BYTES_PER_ELEMENT;for(const N of e)w[A++]=N.length-2,w[A++]=N[0],w[A++]=N[1];const S=new CompressionStream("deflate-raw"),C=S.writable.getWriter();await C.ready,C.write(w);const T=h.prototype.constructor;for(const N of e){const j=new T(N.length-2);for(let z=2,W=N.length;z<W;z++)j[z-2]=N[z]-N[z-2];C.write(j)}C.close();const P=await new Response(S.readable).arrayBuffer();return new Uint8Array(P).toBase64()}static async decompressSignature(e){try{const t=Uint8Array.fromBase64(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,u=0;for await(const N of n)o||(o=new Uint8Array(new Uint32Array(N.buffer,0,4)[0])),o.set(N,u),u+=N.length;const d=new Uint32Array(o.buffer,0,o.length>>2),h=d[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=d[2],g=d[3],w=d[4]===0,A=d[5],S=d[6],C=d[7],T=[],P=(uA+lg*S)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(C){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(o.buffer,P);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(o.buffer,P);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(o.buffer,P);break}u=0;for(let N=0;N<S;N++){const j=d[lg*N+uA],z=new Float32Array(j+2);T.push(z);for(let W=0;W<lg-1;W++)z[W]=d[lg*N+uA+W+1];for(let W=0;W<j;W++)z[W+2]=z[W]+O[u++]}return{areContours:w,thickness:A,outlines:T,width:f,height:g}}catch(t){return He(`decompressSignature: ${t}`),null}}}kh=new WeakMap,At=new WeakSet,$C=function(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r},Gi=new WeakMap,YL=function(e,t,n,r,i,o,u){const d=I(this,At,$C).call(this,n,r,i,o);for(let h=0;h<8;h++){const f=(-h+d-u+16)%8,g=c(this,Gi)[2*f],w=c(this,Gi)[2*f+1];if(e[(n+g)*t+(r+w)]!==0)return f}return-1},JL=function(e,t,n,r,i,o,u){const d=I(this,At,$C).call(this,n,r,i,o);for(let h=0;h<8;h++){const f=(h+d+u+16)%8,g=c(this,Gi)[2*f],w=c(this,Gi)[2*f+1];if(e[(n+g)*t+(r+w)]!==0)return f}return-1},zC=function(e,t,n,r){const i=e.length,o=new Int32Array(i);for(let f=0;f<i;f++)o[f]=e[f]<=r?1:0;for(let f=1;f<n-1;f++)o[f*t]=o[f*t+t-1]=0;for(let f=0;f<t;f++)o[f]=o[t*n-1-f]=0;let u=1,d;const h=[];for(let f=1;f<n-1;f++){d=1;for(let g=1;g<t-1;g++){const w=f*t+g,A=o[w];if(A===0)continue;let S=f,C=g;if(A===1&&o[w-1]===0)u+=1,C-=1;else if(A>=1&&o[w+1]===0)u+=1,C+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const T=[g,f],P=C===g+1,O={isHole:P,points:T,id:u,parent:0};h.push(O);let N;for(const V of h)if(V.id===d){N=V;break}N?N.isHole?O.parent=P?N.parent:d:O.parent=P?d:N.parent:O.parent=P?d:0;const j=I(this,At,YL).call(this,o,t,f,g,S,C,0);if(j===-1){o[w]=-u,o[w]!==1&&(d=Math.abs(o[w]));continue}let z=c(this,Gi)[2*j],W=c(this,Gi)[2*j+1];const D=f+z,R=g+W;S=D,C=R;let L=f,U=g;for(;;){const V=I(this,At,JL).call(this,o,t,L,U,S,C,1);z=c(this,Gi)[2*V],W=c(this,Gi)[2*V+1];const G=L+z,$=U+W;T.push($,G);const ye=L*t+U;if(o[ye+1]===0?o[ye]=-u:o[ye]===1&&(o[ye]=u),G===f&&$===g&&L===D&&U===R){o[w]!==1&&(d=Math.abs(o[w]));break}else S=L,C=U,L=G,U=$}}}return h},ZA=function(e,t,n,r){if(n-t<=4){for(let D=t;D<n-2;D+=2)r.push(e[D],e[D+1]);return}const i=e[t],o=e[t+1],u=e[n-4]-i,d=e[n-3]-o,h=Math.hypot(u,d),f=u/h,g=d/h,w=f*o-g*i,A=d/u,S=1/h,C=Math.atan(A),T=Math.cos(C),P=Math.sin(C),O=S*(Math.abs(T)+Math.abs(P)),N=S*(1-O+O**2),j=Math.max(Math.atan(Math.abs(P+T)*N),Math.atan(Math.abs(P-T)*N));let z=0,W=t;for(let D=t+2;D<n-2;D+=2){const R=Math.abs(w-f*e[D+1]+g*e[D]);R>z&&(W=D,z=R)}z>(h*j)**2?(I(this,At,ZA).call(this,e,t,W+2,r),I(this,At,ZA).call(this,e,W,n,r)):r.push(i,o)},ZL=function(e){const t=[],n=e.length;return I(this,At,ZA).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},eO=function(e,t,n,r,i,o){const u=new Float32Array(o**2),d=-2*r**2,h=o>>1;for(let C=0;C<o;C++){const T=(C-h)**2;for(let P=0;P<o;P++)u[C*o+P]=Math.exp((T+(P-h)**2)/d)}const f=new Float32Array(256),g=-2*i**2;for(let C=0;C<256;C++)f[C]=Math.exp(C**2/g);const w=e.length,A=new Uint8Array(w),S=new Uint32Array(256);for(let C=0;C<n;C++)for(let T=0;T<t;T++){const P=C*t+T,O=e[P];let N=0,j=0;for(let W=0;W<o;W++){const D=C+W-h;if(!(D<0||D>=n))for(let R=0;R<o;R++){const L=T+R-h;if(L<0||L>=t)continue;const U=e[D*t+L],V=u[W*o+R]*f[Math.abs(U-O)];N+=U*V,j+=V}}const z=A[P]=Math.round(N/j);S[z]++}return[A,S]},tO=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},HC=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let u=0,d=n.length;u<d;u++){const h=n[u]=e[u<<2];r=Math.max(r,h),i=Math.min(i,h)}const o=255/(r-i);for(let u=0,d=n.length;u<d;u++)n[u]=(n[u]-i)*o;return n},WC=function(e){let t,n=-1/0,r=-1/0;const i=e.findIndex(d=>d!==0);let o=i,u=i;for(t=i;t<256;t++){const d=e[t];d>n&&(t-o>r&&(r=t-o,u=t-1),n=d,o=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t},nO=function(e){const t=e,{width:n,height:r}=e,{maxDim:i}=c(this,kh);let o=n,u=r;if(n>i||r>i){let w=n,A=r,S=Math.log2(Math.max(n,r)/i);const C=Math.floor(S);S=S===C?C-1:C;for(let P=0;P<S;P++){o=Math.ceil(w/2),u=Math.ceil(A/2);const O=new OffscreenCanvas(o,u);O.getContext("2d").drawImage(e,0,0,w,A,0,0,o,u),w=o,A=u,e!==t&&e.close(),e=O.transferToImageBitmap()}const T=Math.min(i/o,i/u);o=Math.round(o*T),u=Math.round(u*T)}const h=new OffscreenCanvas(o,u).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,o,u),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,o,u);const f=h.getImageData(0,0,o,u).data;return[I(this,At,HC).call(this,f),o,u]},F(vl,At),F(vl,kh,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),F(vl,Gi,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class SF extends WL{constructor(){super(),super.updateProperties({fill:Bt._defaultLineColor,"stroke-width":0})}clone(){const e=new SF;return e.updateAll(this),e}}class FF extends H1{constructor(e){super(e),super.updateProperties({stroke:Bt._defaultLineColor,"stroke-width":1})}clone(){const e=new FF(this._viewParameters);return e.updateAll(this),e}}var su,qa,iu,Ih;const As=class As extends B_{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});F(this,su,!1);F(this,qa,null);F(this,iu,null);F(this,Ih,null);this._willKeepAspectRatio=!0,_(this,iu,t.signatureData||null),_(this,qa,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){Bt.initialize(t,n),this._defaultDrawingOptions=new SF,this._defaultDrawnSignatureOptions=new FF(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return We(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,qa)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(c(this,iu)){const{lines:i,mustSmooth:o,areContours:u,description:d,uuid:h,heightInPage:f}=c(this,iu),{rawDims:{pageWidth:g,pageHeight:w},rotation:A}=this.parent.viewport,S=vl.processDrawnLines({lines:i,pageWidth:g,pageHeight:w,rotation:A,innerMargin:As._INNER_MARGIN,mustSmooth:o,areContours:u});this.addSignature(S,f,d,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,qa)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){_(this,Ih,t),this.addEditToolbar()}getUuid(){return c(this,Ih)}get description(){return c(this,qa)}set description(t){_(this,qa,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:r,width:i,height:o}=c(this,iu),u=Math.max(i,o),d=vl.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:r,width:i,height:o},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,i){const{x:o,y:u}=this,{outline:d}=_(this,iu,t);_(this,su,d instanceof jC),this.description=r;let h;c(this,su)?h=As.getDefaultDrawingOptions():(h=As._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:h});const[,f]=this.pageDimensions;let g=n/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return vl.process(t,n,r,i,As._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return vl.extractContoursFromText(t,n,r,i,o,As._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return vl.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:i,innerMargin:As._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=As.getDefaultDrawingOptions():(this._drawingOptions=As._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:c(this,su),color:[0,0,0],thickness:c(this,su)?0:i});return this.addComment(o),t?(o.paths={lines:n,points:r},o.uuid=c(this,Ih),o.isCopy=!0):o.lines=n,c(this,qa)&&(o.accessibilityData={type:"Figure",alt:c(this,qa)}),o}static deserializeDraw(t,n,r,i,o,u){return u.areContours?jC.deserialize(t,n,r,i,o,u):T0.deserialize(t,n,r,i,o,u)}static async deserialize(t,n,r){var o;const i=await super.deserialize(t,n,r);return _(i,su,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",_(i,Ih,t.uuid),i}};su=new WeakMap,qa=new WeakMap,iu=new WeakMap,Ih=new WeakMap,ne(As,"_type","signature"),ne(As,"_editorType",Ke.SIGNATURE),ne(As,"_defaultDrawingOptions",null);let GC=As;var qt,Xn,au,fl,ou,Mm,ml,Ph,Ka,Vs,Lm,dt,Ng,Mg,e_,t_,n_,KC,r_,rO;class qC extends Bt{constructor(t){super({...t,name:"stampEditor"});F(this,dt);F(this,qt,null);F(this,Xn,null);F(this,au,null);F(this,fl,null);F(this,ou,null);F(this,Mm,"");F(this,ml,null);F(this,Ph,!1);F(this,Ka,null);F(this,Vs,!1);F(this,Lm,!1);_(this,fl,t.bitmapUrl),_(this,ou,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){Bt.initialize(t,n)}static isHandlingMimeForPasting(t){return Ib.includes(t)}static paste(t,n){n.pasteEditor({mode:Ke.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:u}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:i,width:o,height:u,channels:i.length/(o*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const h=d.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t;c(this,Xn)&&(_(this,qt,null),this._uiManager.imageManager.deleteId(c(this,Xn)),(t=c(this,ml))==null||t.remove(),_(this,ml,null),c(this,Ka)&&(clearTimeout(c(this,Ka)),_(this,Ka,null))),super.remove()}rebuild(){if(!this.parent){c(this,Xn)&&I(this,dt,e_).call(this);return}super.rebuild(),this.div!==null&&(c(this,Xn)&&c(this,ml)===null&&I(this,dt,e_).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,au)||c(this,qt)||c(this,fl)||c(this,ou)||c(this,Xn)||c(this,Ph))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,Ph)||(c(this,qt)?I(this,dt,t_).call(this):I(this,dt,e_).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(_(this,Xn,r),i&&_(this,qt,i),_(this,Ph,!1),I(this,dt,t_).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Ka)!==null&&clearTimeout(c(this,Ka)),_(this,Ka,setTimeout(()=>{_(this,Ka,null),I(this,dt,KC).call(this)},200))}copyCanvas(t,n,r=!1){t||(t=224);const{width:i,height:o}=c(this,qt),u=new ao;let d=c(this,qt),h=i,f=o,g=null;if(n){if(i>n||o>n){const D=Math.min(n/i,n/o);h=Math.floor(i*D),f=Math.floor(o*D)}g=document.createElement("canvas");const A=g.width=Math.ceil(h*u.sx),S=g.height=Math.ceil(f*u.sy);c(this,Vs)||(d=I(this,dt,n_).call(this,A,S));const C=g.getContext("2d");C.filter=this._uiManager.hcmFilter;let T="white",P="#cfcfd8";this._uiManager.hcmFilter!=="none"?P="black":xW.isDarkMode&&(T="#8f8f9d",P="#42414d");const O=15,N=O*u.sx,j=O*u.sy,z=new OffscreenCanvas(N*2,j*2),W=z.getContext("2d");W.fillStyle=T,W.fillRect(0,0,N*2,j*2),W.fillStyle=P,W.fillRect(0,0,N,j),W.fillRect(N,j,N,j),C.fillStyle=C.createPattern(z,"repeat"),C.fillRect(0,0,A,S),C.drawImage(d,0,0,d.width,d.height,0,0,A,S)}let w=null;if(r){let A,S;if(u.symmetric&&d.width<t&&d.height<t)A=d.width,S=d.height;else if(d=c(this,qt),i>t||o>t){const P=Math.min(t/i,t/o);A=Math.floor(i*P),S=Math.floor(o*P),c(this,Vs)||(d=I(this,dt,n_).call(this,A,S))}const T=new OffscreenCanvas(A,S).getContext("2d",{willReadFrequently:!0});T.drawImage(d,0,0,d.width,d.height,0,0,A,S),w={width:A,height:S,data:T.getImageData(0,0,A,S).data}}return{canvas:g,width:h,height:f,imageData:w}}static async deserialize(t,n,r){var T;let i=null,o=!1;if(t instanceof vL){const{data:{rect:P,rotation:O,id:N,structParent:j,popupRef:z,richText:W,contentsObj:D,creationDate:R,modificationDate:L},container:U,parent:{page:{pageNumber:V}},canvas:G}=t;let $,ye;G?(delete t.canvas,{id:$,bitmap:ye}=r.imageManager.getFromCanvas(U.id,G),G.remove()):(o=!0,t._hasNoCanvas=!0);const ce=((T=await n._structTree.getAriaAttributes(`${tf}${N}`))==null?void 0:T.get("aria-label"))||"";i=t={annotationType:Ke.STAMP,bitmapId:$,bitmap:ye,pageIndex:V-1,rect:P.slice(0),rotation:O,annotationElementId:N,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:ce},isSvg:!1,structParent:j,popupRef:z,richText:W,comment:(D==null?void 0:D.str)||null,creationDate:R,modificationDate:L}}const u=await super.deserialize(t,n,r),{rect:d,bitmap:h,bitmapUrl:f,bitmapId:g,isSvg:w,accessibilityData:A}=t;o?(r.addMissingCanvas(t.id,u),_(u,Ph,!0)):g&&r.imageManager.isValidId(g)?(_(u,Xn,g),h&&_(u,qt,h)):_(u,fl,f),_(u,Vs,w);const[S,C]=u.pageDimensions;return u.width=(d[2]-d[0])/S,u.height=(d[3]-d[1])/C,A&&(u.altTextData=A),u._initialData=i,t.comment&&u.setCommentData(t),_(u,Lm,!!i),u}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:c(this,Xn),isSvg:c(this,Vs)});if(this.addComment(r),t)return r.bitmapUrl=I(this,dt,r_).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const d=I(this,dt,rO).call(this,r);return d.isSame?null:(d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const u=c(this,Vs)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(c(this,Xn)))n.stamps.set(c(this,Xn),{area:u,serialized:r}),r.bitmap=I(this,dt,r_).call(this,!1);else if(c(this,Vs)){const d=n.stamps.get(c(this,Xn));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=I(this,dt,r_).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}qt=new WeakMap,Xn=new WeakMap,au=new WeakMap,fl=new WeakMap,ou=new WeakMap,Mm=new WeakMap,ml=new WeakMap,Ph=new WeakMap,Ka=new WeakMap,Vs=new WeakMap,Lm=new WeakMap,dt=new WeakSet,Ng=function(t,n=!1){if(!t){this.remove();return}_(this,qt,t.bitmap),n||(_(this,Xn,t.id),_(this,Vs,t.isSvg)),t.file&&_(this,Mm,t.file.name),I(this,dt,t_).call(this)},Mg=function(){if(_(this,au,null),this._uiManager.enableWaiting(!1),!!c(this,ml)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,qt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,qt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},e_=function(){if(c(this,Xn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Xn)).then(r=>I(this,dt,Ng).call(this,r,!0)).finally(()=>I(this,dt,Mg).call(this));return}if(c(this,fl)){const r=c(this,fl);_(this,fl,null),this._uiManager.enableWaiting(!0),_(this,au,this._uiManager.imageManager.getFromUrl(r).then(i=>I(this,dt,Ng).call(this,i)).finally(()=>I(this,dt,Mg).call(this)));return}if(c(this,ou)){const r=c(this,ou);_(this,ou,null),this._uiManager.enableWaiting(!0),_(this,au,this._uiManager.imageManager.getFromFile(r).then(i=>I(this,dt,Ng).call(this,i)).finally(()=>I(this,dt,Mg).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Ib.join(",");const n=this._uiManager._signal;_(this,au,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),I(this,dt,Ng).call(this,i)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>I(this,dt,Mg).call(this))),t.click()},t_=function(){var h;const{div:t}=this;let{width:n,height:r}=c(this,qt);const[i,o]=this.pageDimensions,u=.75;if(this.width)n=this.width*i,r=this.height*o;else if(n>u*i||r>u*o){const f=Math.min(u*i/n,u*o/r);n*=f,r*=f}this._uiManager.enableWaiting(!1);const d=_(this,ml,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/i,this.height=r/o,this.setDims(),(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),I(this,dt,KC).call(this),c(this,Lm)||(this.parent.addUndoableEditor(this),_(this,Lm,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Mm)&&this.div.setAttribute("aria-description",c(this,Mm)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},n_=function(t,n){const{width:r,height:i}=c(this,qt);let o=r,u=i,d=c(this,qt);for(;o>2*t||u>2*n;){const h=o,f=u;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(o,u);g.getContext("2d").drawImage(d,0,0,h,f,0,0,o,u),d=g.transferToImageBitmap()}return d},KC=function(){const[t,n]=this.parentDimensions,{width:r,height:i}=this,o=new ao,u=Math.ceil(r*t*o.sx),d=Math.ceil(i*n*o.sy),h=c(this,ml);if(!h||h.width===u&&h.height===d)return;h.width=u,h.height=d;const f=c(this,Vs)?c(this,qt):I(this,dt,n_).call(this,u,d),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,u,d)},r_=function(t){if(t){if(c(this,Vs)){const i=this._uiManager.imageManager.getSvgUrl(c(this,Xn));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,qt),n.getContext("2d").drawImage(c(this,qt),0,0),n.toDataURL()}if(c(this,Vs)){const[n,r]=this.pageDimensions,i=Math.round(this.width*n*Ru.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Ru.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(i,o);return u.getContext("2d").drawImage(c(this,qt),0,0,c(this,qt).width,c(this,qt).height,0,0,i,o),u.transferToImageBitmap()}return structuredClone(c(this,qt))},rO=function(t){var u;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===n,o=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},ne(qC,"_type","stamp"),ne(qC,"_editorType",Ke.STAMP);var Rh,Om,lu,cu,gl,as,uu,Bm,Vm,qi,yl,Yn,wl,du,Um,Pe,hu,Dt,XC,sO,Ca,YC,JC,s_;const Li=class Li{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:u,textLayer:d,viewport:h,l10n:f}){F(this,Dt);F(this,Rh);F(this,Om,!1);F(this,lu,null);F(this,cu,null);F(this,gl,null);F(this,as,new Map);F(this,uu,!1);F(this,Bm,!1);F(this,Vm,!1);F(this,qi,null);F(this,yl,null);F(this,Yn,null);F(this,wl,null);F(this,du,null);F(this,Um,-1);F(this,Pe);const g=[...c(Li,hu).values()];if(!Li._initialized){Li._initialized=!0;for(const w of g)w.initialize(f,e)}e.registerEditorTypes(g),_(this,Pe,e),this.pageIndex=t,this.div=n,_(this,Rh,i),_(this,lu,o),this.viewport=h,_(this,Yn,d),this.drawLayer=u,this._structTree=r,c(this,Pe).addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return c(this,as).size===0}get isInvisible(){return this.isEmpty&&c(this,Pe).getMode()===Ke.NONE}updateToolbar(e){c(this,Pe).updateToolbar(e)}updateMode(e=c(this,Pe).getMode()){switch(I(this,Dt,s_).call(this),e){case Ke.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ke.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ke.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Ke.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of c(Li,hu).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,Yn))==null?void 0:t.div)}setEditingState(e){c(this,Pe).setEditingState(e)}addCommands(e){c(this,Pe).addCommands(e)}cleanUndoStack(e){c(this,Pe).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,lu))==null||t.togglePointerEvents(e)}async enable(){var n;_(this,Vm,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=c(this,du))==null||n.abort(),_(this,du,null);const e=new Set;for(const r of c(this,Dt,XC))r.enableEditing(),r.show(!0),r.annotationElementId&&(c(this,Pe).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=c(this,lu);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),c(this,Pe).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}_(this,Vm,!1),c(this,Pe)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(_(this,Bm,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,Yn)&&!c(this,du)){_(this,du,new AbortController);const i=c(this,Pe).combinedSignal(c(this,du));c(this,Yn).div.addEventListener("pointerdown",o=>{const{clientX:d,clientY:h,timeStamp:f}=o,g=c(this,Um);if(f-g>500){_(this,Um,f);return}_(this,Um,-1);const{classList:w}=this.div;w.toggle("getElements",!0);const A=document.elementsFromPoint(d,h);if(w.toggle("getElements",!1),!this.div.contains(A[0]))return;let S;const C=new RegExp(`^${sy}[0-9]+$`);for(const P of A)if(C.test(P.id)){S=P.id;break}if(!S)return;const T=c(this,as).get(S);(T==null?void 0:T.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),T.dblclick(o))},{signal:i,capture:!0})}const e=c(this,lu),t=[];if(e){const i=new Map,o=new Map;for(const d of c(this,Dt,XC)){if(d.disableEditing(),!d.annotationElementId){t.push(d);continue}if(d.serialize()!==null){i.set(d.annotationElementId,d);continue}else o.set(d.annotationElementId,d);(r=this.getEditableAnnotation(d.annotationElementId))==null||r.show(),d.remove()}const u=e.getEditableAnnotations();for(const d of u){const{id:h}=d.data;if(c(this,Pe).isDeletedAnnotationElement(h)){d.updateEdited({deleted:!0});continue}let f=o.get(h);if(f){f.resetAnnotationElement(d),f.show(!1),d.show();continue}f=i.get(h),f&&(c(this,Pe).addChangedExistingAnnotation(f),f.renderAnnotationElement(d)&&f.show(!1)),d.show()}}I(this,Dt,s_).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of c(Li,hu).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),_(this,Bm,!1)}getEditableAnnotation(e){var t;return((t=c(this,lu))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,Pe).getActive()!==e&&c(this,Pe).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,Yn))!=null&&e.div&&!c(this,wl)){_(this,wl,new AbortController);const t=c(this,Pe).combinedSignal(c(this,wl));c(this,Yn).div.addEventListener("pointerdown",I(this,Dt,sO).bind(this),{signal:t}),c(this,Yn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,Yn))!=null&&e.div&&c(this,wl)&&(c(this,wl).abort(),_(this,wl,null),c(this,Yn).div.classList.remove("highlighting"))}enableClick(){if(c(this,cu))return;_(this,cu,new AbortController);const e=c(this,Pe).combinedSignal(c(this,cu));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,cu))==null||e.abort(),_(this,cu,null)}attach(e){c(this,as).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,Pe).isDeletedAnnotationElement(t)&&c(this,Pe).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,as).delete(e.id),(t=c(this,Rh))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,Bm)&&e.annotationElementId&&c(this,Pe).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,Pe).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,Pe).addDeletedAnnotationElement(e),Bt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,Pe).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,Vm)),c(this,Pe).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,gl)&&(e._focusEventsAllowed=!1,_(this,gl,setTimeout(()=>{_(this,gl,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,Pe)._signal}),t.focus())},0))),e._structTreeParentId=(n=c(this,Rh))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of c(this,as).values())if(t.uid===e)return t;return null}getNextId(){return c(this,Pe).getId()}combinedSignal(e){return c(this,Pe).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,Dt,Ca))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c(this,Pe).updateMode(e.mode);const{offsetX:n,offsetY:r}=I(this,Dt,JC).call(this),i=this.getNextId(),o=I(this,Dt,YC).call(this,{parent:this,id:i,x:n,y:r,uiManager:c(this,Pe),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=c(Li,hu).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,Pe)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),i=I(this,Dt,YC).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,Pe),isCentered:t,...n});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(I(this,Dt,JC).call(this),!0,e)}setSelected(e){c(this,Pe).setSelected(e)}toggleSelected(e){c(this,Pe).toggleSelected(e)}unselect(e){c(this,Pe).unselect(e)}pointerup(e){var r;const{isMac:t}=jn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!c(this,uu)||(_(this,uu,!1),(r=c(this,Dt,Ca))!=null&&r.isDrawer&&c(this,Dt,Ca).supportMultipleDrawings))return;if(!c(this,Om)){_(this,Om,!0);return}const n=c(this,Pe).getMode();if(n===Ke.STAMP||n===Ke.SIGNATURE){c(this,Pe).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(c(this,Pe).getMode()===Ke.HIGHLIGHT&&this.enableTextSelection(),c(this,uu)){_(this,uu,!1);return}const{isMac:t}=jn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(_(this,uu,!0),(r=c(this,Dt,Ca))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=c(this,Pe).getActive();_(this,Om,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(this,qi)){c(this,Dt,Ca).startDrawing(this,c(this,Pe),!1,e);return}c(this,Pe).setCurrentDrawingSession(this),_(this,qi,new AbortController);const t=c(this,Pe).combinedSignal(c(this,qi));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(_(this,yl,null),this.commitOrRemove())},{signal:t}),c(this,Dt,Ca).startDrawing(this,c(this,Pe),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&_(this,yl,t);return}c(this,yl)&&setTimeout(()=>{var t;(t=c(this,yl))==null||t.focus(),_(this,yl,null)},0)}endDrawingSession(e=!1){return c(this,qi)?(c(this,Pe).setCurrentDrawingSession(null),c(this,qi).abort(),_(this,qi,null),_(this,yl,null),c(this,Dt,Ca).endDrawing(e)):null}findNewParent(e,t,n){const r=c(this,Pe).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return c(this,qi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,qi)&&c(this,Dt,Ca).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,Pe).getActive())==null?void 0:e.parent)===this&&(c(this,Pe).commitOrRemove(),c(this,Pe).setActiveEditor(null)),c(this,gl)&&(clearTimeout(c(this,gl)),_(this,gl,null));for(const n of c(this,as).values())(t=c(this,Rh))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,as).clear(),c(this,Pe).removeLayer(this)}render({viewport:e}){this.viewport=e,Hh(this.div,e);for(const t of c(this,Pe).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,Pe).commitOrRemove(),I(this,Dt,s_).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Hh(this.div,{rotation:n}),t!==n)for(const r of c(this,as).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,Pe).viewParameters.realScale}};Rh=new WeakMap,Om=new WeakMap,lu=new WeakMap,cu=new WeakMap,gl=new WeakMap,as=new WeakMap,uu=new WeakMap,Bm=new WeakMap,Vm=new WeakMap,qi=new WeakMap,yl=new WeakMap,Yn=new WeakMap,wl=new WeakMap,du=new WeakMap,Um=new WeakMap,Pe=new WeakMap,hu=new WeakMap,Dt=new WeakSet,XC=function(){return c(this,as).size!==0?c(this,as).values():c(this,Pe).getEditors(this.pageIndex)},sO=function(e){c(this,Pe).unselectAll();const{target:t}=e;if(t===c(this,Yn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,Yn).div.contains(t)){const{isMac:n}=jn.platform;if(e.button!==0||e.ctrlKey&&n)return;c(this,Pe).showAllEditors("highlight",!0,!0),c(this,Yn).div.classList.add("free"),this.toggleDrawing(),O_.startHighlighting(this,c(this,Pe).direction==="ltr",{target:c(this,Yn).div,x:e.x,y:e.y}),c(this,Yn).div.addEventListener("pointerup",()=>{c(this,Yn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,Pe)._signal}),e.preventDefault()}},Ca=function(){return c(Li,hu).get(c(this,Pe).getMode())},YC=function(e){const t=c(this,Dt,Ca);return t?new t.prototype.constructor(e):null},JC=function(){const{x:e,y:t,width:n,height:r}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),u=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+r),h=(i+u)/2-e,f=(o+d)/2-t,[g,w]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:w}},s_=function(){for(const e of c(this,as).values())e.isEmpty()&&e.remove()},ne(Li,"_initialized",!1),F(Li,hu,new Map([IC,UC,qC,O_,GC].map(e=>[e._editorType,e])));let QC=Li;var Ki,Vr,Dh,r0,r1,iO,lo,eS,aO,tS;const On=class On{constructor(){F(this,lo);F(this,Ki,null);F(this,Vr,new Map);F(this,Dh,new Map)}setParent(e){if(!c(this,Ki)){_(this,Ki,e);return}if(c(this,Ki)!==e){if(c(this,Vr).size>0)for(const t of c(this,Vr).values())t.remove(),e.append(t);_(this,Ki,e)}}static get _svgFactory(){return We(this,"_svgFactory",new M_)}draw(e,t=!1,n=!1){const r=Mn(On,r0)._++,i=I(this,lo,eS).call(this),o=On._svgFactory.createElement("defs");i.append(o);const u=On._svgFactory.createElement("path");o.append(u);const d=`path_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,Dh).set(r,u);const h=n?I(this,lo,aO).call(this,o,d):null,f=On._svgFactory.createElement("use");return i.append(f),f.setAttribute("href",`#${d}`),this.updateProperties(i,e),c(this,Vr).set(r,i),{id:r,clipPathId:`url(#${h})`}}drawOutline(e,t){const n=Mn(On,r0)._++,r=I(this,lo,eS).call(this),i=On._svgFactory.createElement("defs");r.append(i);const o=On._svgFactory.createElement("path");i.append(o);const u=`path_${n}`;o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const g=On._svgFactory.createElement("mask");i.append(g),d=`mask_${n}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const w=On._svgFactory.createElement("rect");g.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const A=On._svgFactory.createElement("use");g.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const h=On._svgFactory.createElement("use");r.append(h),h.setAttribute("href",`#${u}`),d&&h.setAttribute("mask",`url(#${d})`);const f=h.cloneNode();return r.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(r,e),c(this,Vr).set(n,r),n}finalizeDraw(e,t){c(this,Dh).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:n,bbox:r,rootClass:i,path:o}=t,u=typeof e=="number"?c(this,Vr).get(e):e;if(u){if(n&&I(this,lo,tS).call(this,u,n),r&&I(d=On,r1,iO).call(d,u,r),i){const{classList:h}=u;for(const[f,g]of Object.entries(i))h.toggle(f,g)}if(o){const f=u.firstElementChild.firstElementChild;I(this,lo,tS).call(this,f,o)}}}updateParent(e,t){if(t===this)return;const n=c(this,Vr).get(e);n&&(c(t,Ki).append(n),c(this,Vr).delete(e),c(t,Vr).set(e,n))}remove(e){c(this,Dh).delete(e),c(this,Ki)!==null&&(c(this,Vr).get(e).remove(),c(this,Vr).delete(e))}destroy(){_(this,Ki,null);for(const e of c(this,Vr).values())e.remove();c(this,Vr).clear(),c(this,Dh).clear()}};Ki=new WeakMap,Vr=new WeakMap,Dh=new WeakMap,r0=new WeakMap,r1=new WeakSet,iO=function(e,[t,n,r,i]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},lo=new WeakSet,eS=function(){const e=On._svgFactory.create(1,1,!0);return c(this,Ki).append(e),e.setAttribute("aria-hidden",!0),e},aO=function(e,t){const n=On._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=On._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},tS=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},F(On,r1),F(On,r0,0);let ZC=On;globalThis._pdfjsTestingUtils={HighlightOutliner:RC};globalThis.pdfjsLib={AbortException:Pu,AnnotationEditorLayer:QC,AnnotationEditorParamsType:at,AnnotationEditorType:Ke,AnnotationEditorUIManager:Wh,AnnotationLayer:TC,AnnotationMode:wc,AnnotationType:Sn,applyOpacity:bW,build:PG,ColorPicker:D_,createValidAbsoluteUrl:BN,CSSConstants:EW,DOMSVGFactory:M_,DrawLayer:ZC,FeatureTest:jn,fetchData:b0,findContrastColor:CW,getDocument:rL,getFilenameFromUrl:yW,getPdfFilenameFromUrl:wW,getRGB:S0,getUuid:UN,getXfaPageViewport:AW,GlobalWorkerOptions:Qa,ImageKind:bA,InvalidPDFException:Tb,isDataScheme:B1,isPdfFile:AF,isValidExplicitDest:LW,MathClamp:cr,noContextMenu:Ei,normalizeUnicode:mW,OPS:iy,OutputScale:ao,PagesMapper:oy,PasswordResponses:iW,PDFDataRangeTransport:sL,PDFDateString:F_,PDFWorker:cy,PermissionFlag:sW,PixelsPerInch:Ru,RenderingCancelledException:vF,renderRichText:$N,ResponseException:S_,setLayerDimensions:Hh,shadow:We,SignatureExtractor:vl,stopEvent:un,SupportedImageMimeTypes:Ib,TextLayer:ly,TouchManager:k_,updateUrlHash:VN,Util:xe,VerbosityLevel:N1,version:IG,XfaLayer:jN};Qa.workerSrc="/studentmate-admin-panel/pdf.worker.min.mjs";const tq=async s=>{const e=await s.arrayBuffer(),n=await rL({data:e}).promise;let r="";for(let i=1;i<=n.numPages;i++){const d=(await(await n.getPage(i)).getTextContent()).items.map(h=>h.str).join(" ");r+=d+`

`}return r},nq=s=>{const e=[],n=/(?:Memorandum|Memo|Solutions|Marking Guideline)/i.exec(s);let r=s,i="";n&&(r=s.substring(0,n.index),i=s.substring(n.index));const o=h=>{const f=h.replace(/\s+/g," "),g=/(?:Question|Q)\s*(\d+)[\s.:]*(.*?)(?=(?:Question|Q)\s*\d+|$)/gi,w=[];let A;for(;(A=g.exec(f))!==null;){const S=parseInt(A[1]),C=A[2].trim(),T=C.match(/[\[\(](\d+)[\]\)]\s*$/)||C.match(/Total\s*:\s*(\d+)/i),P=T?parseInt(T[1]):0;w.push({number:S,text:C,marks:P})}return w},u=o(r),d=o(i);return u.forEach(h=>{const f=d.find(g=>g.number===h.number);e.push({number:h.number,text:h.text,marks:h.marks,answerText:f?f.text:void 0,subQuestions:[]})}),e},rq=({assessmentId:s,assessmentTitle:e,onClose:t})=>{const[n,r]=K.useState([]),[i,o]=K.useState(!1),[u,d]=K.useState(!1),[h,f]=K.useState(!1),[g,w]=K.useState(!1),[A,S]=K.useState(""),[C,T]=K.useState(0),[P,O]=K.useState(1),[N,j]=K.useState(null),[z,W]=K.useState(null),[D,R]=K.useState(""),[L,U]=K.useState(null),[V,G]=K.useState([]),[$,ye]=K.useState(!1);K.useEffect(()=>{ce()},[s]);const ce=async()=>{o(!0);try{const se=await tH(s);r(se),se.length>0&&O(se.length+1)}catch(se){console.error("Error fetching questions:",se)}finally{o(!1)}},he=()=>{S(`Question ${n.length+1}`),T(0),j(null),W(null),R(""),O(n.length+1),d(!0)},ge=async se=>{if(se.preventDefault(),!!N){w(!0);try{await HP(s,A,C,P,N,void 0,z,void 0,D),d(!1),ce()}catch(we){console.error("Error adding question:",we)}finally{w(!1)}}},ae=async se=>{if(se.target.files&&se.target.files[0]){U(se.target.files[0]),ye(!0);try{const we=await tq(se.target.files[0]),be=nq(we);G(be)}catch(we){console.error("Error parsing PDF:",we),alert("Failed to parse PDF. Please ensure it is a valid text-based PDF.")}finally{ye(!1)}}},_e=async()=>{if(V.length!==0){w(!0);try{let se=n.length>0?n.length+1:1;for(const we of V)await HP(s,`Question ${we.number}`,we.marks,se++,void 0,we.text,void 0,void 0,void 0);f(!1),G([]),U(null),ce()}catch(se){console.error("Error saving bulk questions:",se),alert("Error saving questions. See console for details.")}finally{w(!1)}}},fe=se=>{const we=[...V];we.splice(se,1),G(we)},X=(se,we,be)=>{const De=[...V];De[se]={...De[se],[we]:be},G(De)},re=async se=>{if(window.confirm("Are you sure you want to delete this question?"))try{await nH(s,se),ce()}catch(we){console.error("Error deleting question:",we)}};return b.jsxs("div",{"trae-inspector-start-line":"164","trae-inspector-start-column":"4","trae-inspector-end-line":"486","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[b.jsxs("div",{"trae-inspector-start-line":"165","trae-inspector-start-column":"6","trae-inspector-end-line":"287","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[b.jsx("div",{"trae-inspector-start-line":"166","trae-inspector-start-column":"8","trae-inspector-end-line":"166","trae-inspector-end-column":"127","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t}),b.jsx("span",{"trae-inspector-start-line":"168","trae-inspector-start-column":"8","trae-inspector-end-line":"168","trae-inspector-end-column":"110","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%22168%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%22168%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),b.jsx("div",{"trae-inspector-start-line":"170","trae-inspector-start-column":"8","trae-inspector-end-line":"286","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",children:b.jsxs("div",{"trae-inspector-start-line":"171","trae-inspector-start-column":"10","trae-inspector-end-line":"285","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[b.jsxs("div",{"trae-inspector-start-line":"172","trae-inspector-start-column":"12","trae-inspector-end-line":"203","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[b.jsxs("div",{"trae-inspector-start-line":"173","trae-inspector-start-column":"14","trae-inspector-end-line":"180","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsxs("h3",{"trae-inspector-start-line":"174","trae-inspector-start-column":"16","trae-inspector-end-line":"176","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["Manage Questions: ",e]}),b.jsx("p",{"trae-inspector-start-line":"177","trae-inspector-start-column":"16","trae-inspector-end-line":"179","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20questions%20via%20image%20upload%20or%20auto-parse%20from%20PDF.%22%2C%22textStartLine%22%3A%22177%22%2C%22textStartColumn%22%3A%2258%22%2C%22textEndLine%22%3A%22179%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 text-sm text-gray-500",children:"Add questions via image upload or auto-parse from PDF."})]}),b.jsxs("div",{"trae-inspector-start-line":"181","trae-inspector-start-column":"14","trae-inspector-end-line":"202","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-3",children:[b.jsxs("button",{"trae-inspector-start-line":"182","trae-inspector-start-column":"16","trae-inspector-end-line":"188","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>f(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[b.jsx(Hg,{className:"h-5 w-5"}),b.jsx("span",{"trae-inspector-start-line":"187","trae-inspector-start-column":"18","trae-inspector-end-line":"187","trae-inspector-end-column":"46","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20PDF%22%2C%22textStartLine%22%3A%22187%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22187%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Bulk Upload PDF"})]}),b.jsxs("button",{"trae-inspector-start-line":"189","trae-inspector-start-column":"16","trae-inspector-end-line":"195","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:he,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[b.jsx(a0,{className:"h-5 w-5"}),b.jsx("span",{"trae-inspector-start-line":"194","trae-inspector-start-column":"18","trae-inspector-end-line":"194","trae-inspector-end-column":"41","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20Manual%22%2C%22textStartLine%22%3A%22194%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22194%22%2C%22textEndColumn%22%3A%2234%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add Manual"})]}),b.jsx("button",{"trae-inspector-start-line":"196","trae-inspector-start-column":"16","trae-inspector-end-line":"201","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Close%22%2C%22textStartLine%22%3A%22199%22%2C%22textStartColumn%22%3A%2217%22%2C%22textEndLine%22%3A%22201%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:t,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg",children:"Close"})]})]}),b.jsx("div",{"trae-inspector-start-line":"205","trae-inspector-start-column":"12","trae-inspector-end-line":"284","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 rounded-lg min-h-[400px] p-4 max-h-[70vh] overflow-y-auto",children:i?b.jsx("div",{"trae-inspector-start-line":"207","trae-inspector-start-column":"16","trae-inspector-end-line":"207","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading%20questions...%22%2C%22textStartLine%22%3A%22207%22%2C%22textStartColumn%22%3A%2251%22%2C%22textEndLine%22%3A%22207%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-10",children:"Loading questions..."}):n.length===0?b.jsx("div",{"trae-inspector-start-line":"209","trae-inspector-start-column":"16","trae-inspector-end-line":"211","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20questions%20added%20yet.%20Click%20%5C%22Add%20Manual%5C%22%20or%20%5C%22Bulk%20Upload%20PDF%5C%22%20to%20start.%22%2C%22textStartLine%22%3A%22209%22%2C%22textStartColumn%22%3A%2265%22%2C%22textEndLine%22%3A%22211%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-10 text-gray-500",children:'No questions added yet. Click "Add Manual" or "Bulk Upload PDF" to start.'}):b.jsx("div",{"trae-inspector-start-line":"213","trae-inspector-start-column":"16","trae-inspector-end-line":"282","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:n.map(se=>b.jsxs("div",{"trae-inspector-start-line":"215","trae-inspector-start-column":"20","trae-inspector-end-line":"280","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[b.jsxs("div",{"trae-inspector-start-line":"217","trae-inspector-start-column":"22","trae-inspector-end-line":"233","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center p-4 border-b border-gray-100 bg-gray-50",children:[b.jsxs("div",{"trae-inspector-start-line":"218","trae-inspector-start-column":"24","trae-inspector-end-line":"221","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-3",children:[b.jsx("div",{"trae-inspector-start-line":"219","trae-inspector-start-column":"26","trae-inspector-end-line":"219","trae-inspector-end-column":"82","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-1 h-6 bg-blue-600 rounded-full"}),b.jsx("h4",{"trae-inspector-start-line":"220","trae-inspector-start-column":"26","trae-inspector-end-line":"220","trae-inspector-end-column":"80","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-bold text-blue-900",children:se.title})]}),b.jsxs("div",{"trae-inspector-start-line":"222","trae-inspector-start-column":"24","trae-inspector-end-line":"232","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4",children:[b.jsxs("span",{"trae-inspector-start-line":"223","trae-inspector-start-column":"26","trae-inspector-end-line":"225","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-xs font-bold",children:[se.marks," Marks"]}),b.jsx("button",{"trae-inspector-start-line":"226","trae-inspector-start-column":"26","trae-inspector-end-line":"231","trae-inspector-end-column":"35","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>re(se),className:"text-red-500 hover:text-red-700",children:b.jsx(o0,{className:"h-5 w-5"})})]})]}),b.jsxs("div",{"trae-inspector-start-line":"236","trae-inspector-start-column":"22","trae-inspector-end-line":"279","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4",children:[b.jsxs("div",{"trae-inspector-start-line":"237","trae-inspector-start-column":"24","trae-inspector-end-line":"248","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mb-4",children:[b.jsx("p",{"trae-inspector-start-line":"238","trae-inspector-start-column":"26","trae-inspector-end-line":"238","trae-inspector-end-column":"112","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20Content%22%2C%22textStartLine%22%3A%22238%22%2C%22textStartColumn%22%3A%2292%22%2C%22textEndLine%22%3A%22238%22%2C%22textEndColumn%22%3A%22108%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Question Content"}),b.jsx("div",{"trae-inspector-start-line":"239","trae-inspector-start-column":"26","trae-inspector-end-line":"247","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border border-gray-100 rounded bg-gray-50 p-2",children:se.contentUrl?b.jsx("img",{"trae-inspector-start-line":"241","trae-inspector-start-column":"30","trae-inspector-end-line":"241","trae-inspector-end-column":"124","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:se.contentUrl,alt:se.title,className:"max-w-full h-auto max-h-64 object-contain"}):se.content?b.jsx("div",{"trae-inspector-start-line":"243","trae-inspector-start-column":"30","trae-inspector-end-line":"243","trae-inspector-end-column":"109","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"whitespace-pre-wrap text-gray-800 font-serif",children:se.content}):b.jsx("span",{"trae-inspector-start-line":"245","trae-inspector-start-column":"30","trae-inspector-end-line":"245","trae-inspector-end-column":"96","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20content%20available%22%2C%22textStartLine%22%3A%22245%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22245%22%2C%22textEndColumn%22%3A%2289%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-400 italic",children:"No content available"})})]}),b.jsxs("div",{"trae-inspector-start-line":"250","trae-inspector-start-column":"24","trae-inspector-end-line":"278","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{"trae-inspector-start-line":"251","trae-inspector-start-column":"26","trae-inspector-end-line":"264","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("p",{"trae-inspector-start-line":"252","trae-inspector-start-column":"28","trae-inspector-end-line":"252","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%22%2C%22textStartLine%22%3A%22252%22%2C%22textStartColumn%22%3A%2294%22%2C%22textEndLine%22%3A%22252%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Answer"}),se.answerUrl?b.jsxs("div",{"trae-inspector-start-line":"254","trae-inspector-start-column":"30","trae-inspector-end-line":"258","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2 text-green-600",children:[b.jsx(yB,{className:"h-4 w-4"}),b.jsx("span",{"trae-inspector-start-line":"256","trae-inspector-start-column":"32","trae-inspector-end-line":"256","trae-inspector-end-column":"86","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%20Image%20Uploaded%22%2C%22textStartLine%22%3A%22256%22%2C%22textStartColumn%22%3A%2258%22%2C%22textEndLine%22%3A%22256%22%2C%22textEndColumn%22%3A%2279%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm",children:"Answer Image Uploaded"}),b.jsx("a",{"trae-inspector-start-line":"257","trae-inspector-start-column":"32","trae-inspector-end-line":"257","trae-inspector-end-column":"147","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22(View)%22%2C%22textStartLine%22%3A%22257%22%2C%22textStartColumn%22%3A%22137%22%2C%22textEndLine%22%3A%22257%22%2C%22textEndColumn%22%3A%22143%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:se.answerUrl,target:"_blank",rel:"noreferrer",className:"text-blue-500 text-xs hover:underline",children:"(View)"})]}):se.answerText?b.jsx("div",{"trae-inspector-start-line":"260","trae-inspector-start-column":"32","trae-inspector-end-line":"260","trae-inspector-end-column":"91","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-700",children:se.answerText}):b.jsx("span",{"trae-inspector-start-line":"262","trae-inspector-start-column":"30","trae-inspector-end-line":"262","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20answer%20provided%22%2C%22textStartLine%22%3A%22262%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22262%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-400",children:"No answer provided"})]}),b.jsxs("div",{"trae-inspector-start-line":"265","trae-inspector-start-column":"26","trae-inspector-end-line":"277","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("p",{"trae-inspector-start-line":"266","trae-inspector-start-column":"28","trae-inspector-end-line":"266","trae-inspector-end-column":"112","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Video%20Solution%22%2C%22textStartLine%22%3A%22266%22%2C%22textStartColumn%22%3A%2294%22%2C%22textEndLine%22%3A%22266%22%2C%22textEndColumn%22%3A%22108%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Video Solution"}),se.videoUrl?b.jsxs("div",{"trae-inspector-start-line":"268","trae-inspector-start-column":"30","trae-inspector-end-line":"273","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2 text-blue-600",children:[b.jsx(t6,{className:"h-4 w-4"}),b.jsx("a",{"trae-inspector-start-line":"270","trae-inspector-start-column":"32","trae-inspector-end-line":"272","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:se.videoUrl,target:"_blank",rel:"noreferrer",className:"text-sm hover:underline truncate block max-w-[200px]",children:se.videoUrl})]}):b.jsx("span",{"trae-inspector-start-line":"275","trae-inspector-start-column":"30","trae-inspector-end-line":"275","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20video%20link%22%2C%22textStartLine%22%3A%22275%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22275%22%2C%22textEndColumn%22%3A%2283%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-400",children:"No video link"})]})]})]})]},se.questionId))})})]})})]}),b.jsx(E0,{isOpen:u,onClose:()=>d(!1),title:"Add New Question (Manual)",children:b.jsxs("form",{"trae-inspector-start-line":"295","trae-inspector-start-column":"8","trae-inspector-end-line":"386","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:ge,className:"space-y-4",children:[b.jsxs("div",{"trae-inspector-start-line":"296","trae-inspector-start-column":"10","trae-inspector-end-line":"319","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{"trae-inspector-start-line":"297","trae-inspector-start-column":"12","trae-inspector-end-line":"307","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"298","trae-inspector-start-column":"14","trae-inspector-end-line":"298","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20Title%22%2C%22textStartLine%22%3A%22298%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%22298%22%2C%22textEndColumn%22%3A%2287%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Question Title"}),b.jsx("input",{"trae-inspector-start-line":"299","trae-inspector-start-column":"14","trae-inspector-end-line":"306","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:A,onChange:se=>S(se.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Question 1"})]}),b.jsxs("div",{"trae-inspector-start-line":"308","trae-inspector-start-column":"12","trae-inspector-end-line":"318","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"309","trae-inspector-start-column":"14","trae-inspector-end-line":"309","trae-inspector-end-column":"86","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Marks%22%2C%22textStartLine%22%3A%22309%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%22309%22%2C%22textEndColumn%22%3A%2278%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Marks"}),b.jsx("input",{"trae-inspector-start-line":"310","trae-inspector-start-column":"14","trae-inspector-end-line":"317","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,min:"0",value:C,onChange:se=>T(parseInt(se.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),b.jsxs("div",{"trae-inspector-start-line":"321","trae-inspector-start-column":"10","trae-inspector-end-line":"331","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"322","trae-inspector-start-column":"12","trae-inspector-end-line":"322","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Order%22%2C%22textStartLine%22%3A%22322%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22322%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Order"}),b.jsx("input",{"trae-inspector-start-line":"323","trae-inspector-start-column":"12","trae-inspector-end-line":"330","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,min:"1",value:P,onChange:se=>O(parseInt(se.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),b.jsxs("div",{"trae-inspector-start-line":"333","trae-inspector-start-column":"10","trae-inspector-end-line":"349","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"334","trae-inspector-start-column":"12","trae-inspector-end-line":"334","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20Image%20(Required)%22%2C%22textStartLine%22%3A%22334%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22334%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Question Image (Required)"}),b.jsx("div",{"trae-inspector-start-line":"335","trae-inspector-start-column":"12","trae-inspector-end-line":"348","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:b.jsxs("div",{"trae-inspector-start-line":"336","trae-inspector-start-column":"14","trae-inspector-end-line":"347","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-1 text-center",children:[b.jsx(RB,{className:"mx-auto h-12 w-12 text-gray-400"}),b.jsxs("div",{"trae-inspector-start-line":"338","trae-inspector-start-column":"16","trae-inspector-end-line":"344","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex text-sm text-gray-600",children:[b.jsxs("label",{"trae-inspector-start-line":"339","trae-inspector-start-column":"18","trae-inspector-end-line":"342","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"content-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[b.jsx("span",{"trae-inspector-start-line":"340","trae-inspector-start-column":"20","trae-inspector-end-line":"340","trae-inspector-end-column":"46","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20a%20file%22%2C%22textStartLine%22%3A%22340%22%2C%22textStartColumn%22%3A%2226%22%2C%22textEndLine%22%3A%22340%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Upload a file"}),b.jsx("input",{"trae-inspector-start-line":"341","trae-inspector-start-column":"20","trae-inspector-end-line":"341","trae-inspector-end-column":"205","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"content-upload",name:"content-upload",type:"file",className:"sr-only",accept:"image/*",onChange:se=>j(se.target.files?se.target.files[0]:null),required:!0})]}),b.jsx("p",{"trae-inspector-start-line":"343","trae-inspector-start-column":"18","trae-inspector-end-line":"343","trae-inspector-end-column":"58","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22or%20drag%20and%20drop%22%2C%22textStartLine%22%3A%22343%22%2C%22textStartColumn%22%3A%2238%22%2C%22textEndLine%22%3A%22343%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"pl-1",children:"or drag and drop"})]}),b.jsx("p",{"trae-inspector-start-line":"345","trae-inspector-start-column":"16","trae-inspector-end-line":"345","trae-inspector-end-column":"75","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PNG%2C%20JPG%20up%20to%205MB%22%2C%22textStartLine%22%3A%22345%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22345%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"PNG, JPG up to 5MB"}),N&&b.jsx("p",{"trae-inspector-start-line":"346","trae-inspector-start-column":"32","trae-inspector-end-line":"346","trae-inspector-end-column":"106","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-green-600 font-semibold",children:N.name})]})})]}),b.jsxs("div",{"trae-inspector-start-line":"351","trae-inspector-start-column":"10","trae-inspector-end-line":"359","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"352","trae-inspector-start-column":"12","trae-inspector-end-line":"352","trae-inspector-end-column":"102","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%20Image%20(Optional)%22%2C%22textStartLine%22%3A%22352%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22352%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Answer Image (Optional)"}),b.jsx("input",{"trae-inspector-start-line":"353","trae-inspector-start-column":"12","trae-inspector-end-line":"358","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:"image/*",onChange:se=>W(se.target.files?se.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),b.jsxs("div",{"trae-inspector-start-line":"361","trae-inspector-start-column":"10","trae-inspector-end-line":"375","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"362","trae-inspector-start-column":"12","trae-inspector-end-line":"362","trae-inspector-end-column":"108","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Video%20Solution%20URL%20(Optional)%22%2C%22textStartLine%22%3A%22362%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22362%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Video Solution URL (Optional)"}),b.jsxs("div",{"trae-inspector-start-line":"363","trae-inspector-start-column":"12","trae-inspector-end-line":"374","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 flex rounded-md shadow-sm",children:[b.jsx("span",{"trae-inspector-start-line":"364","trae-inspector-start-column":"14","trae-inspector-end-line":"366","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22https%3A%2F%2F%22%2C%22textStartLine%22%3A%22364%22%2C%22textStartColumn%22%3A%22142%22%2C%22textEndLine%22%3A%22366%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"https://"}),b.jsx("input",{"trae-inspector-start-line":"367","trae-inspector-start-column":"14","trae-inspector-end-line":"373","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"url",value:D,onChange:se=>R(se.target.value),className:"focus:ring-blue-500 focus:border-blue-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300 py-2 px-3 border",placeholder:"youtube.com/watch?v=..."})]})]}),b.jsx("div",{"trae-inspector-start-line":"377","trae-inspector-start-column":"10","trae-inspector-end-line":"385","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:b.jsx("button",{"trae-inspector-start-line":"378","trae-inspector-start-column":"12","trae-inspector-end-line":"384","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:g,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${g?"opacity-75 cursor-not-allowed":""}`,children:g?"Saving Question...":"Save Question"})})]})}),h&&b.jsx("div",{"trae-inspector-start-line":"391","trae-inspector-start-column":"8","trae-inspector-end-line":"484","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-[60] overflow-y-auto",children:b.jsxs("div",{"trae-inspector-start-line":"392","trae-inspector-start-column":"10","trae-inspector-end-line":"483","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[b.jsx("div",{"trae-inspector-start-line":"393","trae-inspector-start-column":"12","trae-inspector-end-line":"395","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:b.jsx("div",{"trae-inspector-start-line":"394","trae-inspector-start-column":"14","trae-inspector-end-line":"394","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-0 bg-gray-500 opacity-75"})}),b.jsx("span",{"trae-inspector-start-line":"396","trae-inspector-start-column":"12","trae-inspector-end-line":"396","trae-inspector-end-column":"114","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%22396%22%2C%22textStartColumn%22%3A%22100%22%2C%22textEndLine%22%3A%22396%22%2C%22textEndColumn%22%3A%22107%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),b.jsx("div",{"trae-inspector-start-line":"397","trae-inspector-start-column":"12","trae-inspector-end-line":"482","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:b.jsxs("div",{"trae-inspector-start-line":"398","trae-inspector-start-column":"14","trae-inspector-end-line":"481","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[b.jsxs("div",{"trae-inspector-start-line":"399","trae-inspector-start-column":"16","trae-inspector-end-line":"404","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[b.jsx("h3",{"trae-inspector-start-line":"400","trae-inspector-start-column":"18","trae-inspector-end-line":"400","trae-inspector-end-column":"93","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20from%20PDF%22%2C%22textStartLine%22%3A%22400%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22400%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-medium text-gray-900",children:"Bulk Upload from PDF"}),b.jsx("button",{"trae-inspector-start-line":"401","trae-inspector-start-column":"18","trae-inspector-end-line":"403","trae-inspector-end-column":"27","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-500",children:b.jsx(ZE,{className:"h-6 w-6"})})]}),b.jsxs("div",{"trae-inspector-start-line":"406","trae-inspector-start-column":"16","trae-inspector-end-line":"480","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[b.jsxs("div",{"trae-inspector-start-line":"408","trae-inspector-start-column":"18","trae-inspector-end-line":"423","trae-inspector-end-column":"24","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50 transition-colors",children:[b.jsx("input",{"trae-inspector-start-line":"409","trae-inspector-start-column":"20","trae-inspector-end-line":"415","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:".pdf",onChange:ae,className:"hidden",id:"bulk-upload"}),b.jsxs("label",{"trae-inspector-start-line":"416","trae-inspector-start-column":"20","trae-inspector-end-line":"422","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"bulk-upload",className:"cursor-pointer block",children:[b.jsx(YB,{className:"mx-auto h-12 w-12 text-gray-400"}),b.jsx("p",{"trae-inspector-start-line":"418","trae-inspector-start-column":"22","trae-inspector-end-line":"420","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 text-sm text-gray-600",children:L?L.name:"Click to upload Exam PDF"}),b.jsx("p",{"trae-inspector-start-line":"421","trae-inspector-start-column":"22","trae-inspector-end-line":"421","trae-inspector-end-column":"98","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PDFs%20with%20selectable%20text%20only%22%2C%22textStartLine%22%3A%22421%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22421%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mt-1",children:"PDFs with selectable text only"})]})]}),$&&b.jsx("div",{"trae-inspector-start-line":"426","trae-inspector-start-column":"20","trae-inspector-end-line":"428","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Parsing%20PDF...%20Please%20wait.%22%2C%22textStartLine%22%3A%22426%22%2C%22textStartColumn%22%3A%2280%22%2C%22textEndLine%22%3A%22428%22%2C%22textEndColumn%22%3A%2220%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-4 text-blue-600 font-medium",children:"Parsing PDF... Please wait."}),V.length>0&&b.jsxs("div",{"trae-inspector-start-line":"433","trae-inspector-start-column":"20","trae-inspector-end-line":"478","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-6",children:[b.jsxs("div",{"trae-inspector-start-line":"434","trae-inspector-start-column":"22","trae-inspector-end-line":"444","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-4",children:[b.jsxs("h4",{"trae-inspector-start-line":"435","trae-inspector-start-column":"24","trae-inspector-end-line":"435","trae-inspector-end-column":"120","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium text-gray-900",children:["Extracted Questions (",V.length,")"]}),b.jsxs("button",{"trae-inspector-start-line":"436","trae-inspector-start-column":"24","trae-inspector-end-line":"443","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:_e,disabled:g,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm",children:[b.jsx(GB,{className:"h-4 w-4"}),b.jsx("span",{"trae-inspector-start-line":"442","trae-inspector-start-column":"26","trae-inspector-end-line":"442","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:g?"Saving...":"Save All to Database"})]})]}),b.jsx("div",{"trae-inspector-start-line":"446","trae-inspector-start-column":"22","trae-inspector-end-line":"477","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2",children:V.map((se,we)=>b.jsxs("div",{"trae-inspector-start-line":"448","trae-inspector-start-column":"26","trae-inspector-end-line":"475","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[b.jsxs("div",{"trae-inspector-start-line":"449","trae-inspector-start-column":"28","trae-inspector-end-line":"469","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-start mb-2",children:[b.jsxs("div",{"trae-inspector-start-line":"450","trae-inspector-start-column":"30","trae-inspector-end-line":"462","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[b.jsxs("span",{"trae-inspector-start-line":"451","trae-inspector-start-column":"32","trae-inspector-end-line":"453","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded",children:["#",se.number]}),b.jsx("input",{"trae-inspector-start-line":"454","trae-inspector-start-column":"32","trae-inspector-end-line":"460","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",value:se.marks,onChange:be=>X(we,"marks",parseInt(be.target.value)),className:"w-20 text-xs border-gray-300 rounded p-1",placeholder:"Marks"}),b.jsx("span",{"trae-inspector-start-line":"461","trae-inspector-start-column":"32","trae-inspector-end-line":"461","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22marks%22%2C%22textStartLine%22%3A%22461%22%2C%22textStartColumn%22%3A%2272%22%2C%22textEndLine%22%3A%22461%22%2C%22textEndColumn%22%3A%2277%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"marks"})]}),b.jsx("button",{"trae-inspector-start-line":"463","trae-inspector-start-column":"30","trae-inspector-end-line":"468","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>fe(we),className:"text-red-500 hover:text-red-700",children:b.jsx(ZE,{className:"h-4 w-4"})})]}),b.jsx("textarea",{"trae-inspector-start-line":"470","trae-inspector-start-column":"28","trae-inspector-end-line":"474","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:se.text,onChange:be=>X(we,"text",be.target.value),className:"w-full text-sm border-gray-300 rounded p-2 h-24 font-serif"})]},we))})]})]})]})})]})})]})},TF=({type:s,title:e})=>{const{user:t}=x0(),[n,r]=K.useState([]),[i,o]=K.useState(""),[u,d]=K.useState([]),[h,f]=K.useState(""),[g,w]=K.useState([]),[A,S]=K.useState(!1),[C,T]=K.useState(!1),[P,O]=K.useState(!1),[N,j]=K.useState(null),[z,W]=K.useState(""),[D,R]=K.useState(new Date().getFullYear()),[L,U]=K.useState(null);K.useEffect(()=>{(async()=>{try{const he=await s2();r(he),he.length>0&&o(he[0].universityId)}catch(he){console.error("Error fetching universities:",he)}})()},[]),K.useEffect(()=>{i&&(async()=>{try{const he=await ON(i);d(he),he.length>0?f(he[0].code):(f(""),w([]))}catch(he){console.error("Error fetching modules:",he)}})()},[i]),K.useEffect(()=>{i&&h&&V()},[i,h,s]);const V=async()=>{S(!0);try{const ce=await Xz(i,h,s);w(ce)}catch(ce){console.error("Error fetching assessments:",ce)}finally{S(!1)}},G=()=>{W(""),R(new Date().getFullYear()),U(null),T(!0)},$=async ce=>{if(ce.preventDefault(),!(!i||!h||!t)){O(!0);try{await Zz(i,h,s,z,D,t.email||"Admin",L),T(!1),V()}catch(he){console.error("Error saving assessment:",he)}finally{O(!1)}}},ye=async ce=>{if(window.confirm("Are you sure you want to delete this assessment?"))try{await eH(ce),V()}catch(he){console.error("Error deleting assessment:",he)}};return b.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"4","trae-inspector-end-line":"304","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[N?b.jsx(rq,{assessmentId:N.assessmentId,assessmentTitle:N.title,onClose:()=>j(null)}):null,b.jsxs("div",{"trae-inspector-start-line":"138","trae-inspector-start-column":"6","trae-inspector-end-line":"148","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{"trae-inspector-start-line":"139","trae-inspector-start-column":"8","trae-inspector-end-line":"139","trae-inspector-end-column":"69","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:e}),b.jsxs("button",{"trae-inspector-start-line":"140","trae-inspector-start-column":"8","trae-inspector-end-line":"147","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:G,disabled:!i||!h,className:`bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 ${!i||!h?"opacity-50 cursor-not-allowed":""}`,children:[b.jsx(a0,{className:"h-5 w-5"}),b.jsxs("span",{"trae-inspector-start-line":"146","trae-inspector-start-column":"10","trae-inspector-end-line":"146","trae-inspector-end-column":"50","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:["Create ",e.slice(0,-1)]})]})]}),b.jsx("div",{"trae-inspector-start-line":"150","trae-inspector-start-column":"6","trae-inspector-end-line":"183","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:b.jsxs("div",{"trae-inspector-start-line":"151","trae-inspector-start-column":"8","trae-inspector-end-line":"182","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[b.jsxs("div",{"trae-inspector-start-line":"152","trae-inspector-start-column":"10","trae-inspector-end-line":"165","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[b.jsx("label",{"trae-inspector-start-line":"153","trae-inspector-start-column":"12","trae-inspector-end-line":"153","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20University%22%2C%22textStartLine%22%3A%22153%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22153%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select University"}),b.jsx("select",{"trae-inspector-start-line":"154","trae-inspector-start-column":"12","trae-inspector-end-line":"164","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:i,onChange:ce=>o(ce.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:n.map(ce=>b.jsxs("option",{"trae-inspector-start-line":"160","trae-inspector-start-column":"16","trae-inspector-end-line":"162","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:ce.universityId,children:[ce.name," (",ce.code,")"]},ce.universityId))})]}),b.jsxs("div",{"trae-inspector-start-line":"166","trae-inspector-start-column":"10","trae-inspector-end-line":"181","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[b.jsx("label",{"trae-inspector-start-line":"167","trae-inspector-start-column":"12","trae-inspector-end-line":"167","trae-inspector-end-column":"97","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20Module%22%2C%22textStartLine%22%3A%22167%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22167%22%2C%22textEndColumn%22%3A%2289%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Module"}),b.jsxs("select",{"trae-inspector-start-line":"168","trae-inspector-start-column":"12","trae-inspector-end-line":"180","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:h,onChange:ce=>f(ce.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",disabled:!i,children:[u.length===0&&b.jsx("option",{"trae-inspector-start-line":"174","trae-inspector-start-column":"39","trae-inspector-end-line":"174","trae-inspector-end-column":"81","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20modules%20found%22%2C%22textStartLine%22%3A%22174%22%2C%22textStartColumn%22%3A%2256%22%2C%22textEndLine%22%3A%22174%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"",children:"No modules found"}),u.map(ce=>b.jsxs("option",{"trae-inspector-start-line":"176","trae-inspector-start-column":"16","trae-inspector-end-line":"178","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:ce.code,children:[" ",ce.code," - ",ce.name]},ce.moduleId))]})]})]})}),b.jsx("div",{"trae-inspector-start-line":"185","trae-inspector-start-column":"6","trae-inspector-end-line":"254","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:b.jsx("div",{"trae-inspector-start-line":"186","trae-inspector-start-column":"8","trae-inspector-end-line":"253","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:b.jsxs("table",{"trae-inspector-start-line":"187","trae-inspector-start-column":"10","trae-inspector-end-line":"252","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[b.jsx("thead",{"trae-inspector-start-line":"188","trae-inspector-start-column":"12","trae-inspector-end-line":"195","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:b.jsxs("tr",{"trae-inspector-start-line":"189","trae-inspector-start-column":"14","trae-inspector-end-line":"194","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("th",{"trae-inspector-start-line":"190","trae-inspector-start-column":"16","trae-inspector-end-line":"190","trae-inspector-end-column":"51","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22190%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22190%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Year"}),b.jsx("th",{"trae-inspector-start-line":"191","trae-inspector-start-column":"16","trae-inspector-end-line":"191","trae-inspector-end-column":"52","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22191%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22191%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Title"}),b.jsx("th",{"trae-inspector-start-line":"192","trae-inspector-start-column":"16","trae-inspector-end-line":"192","trae-inspector-end-column":"54","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Content%22%2C%22textStartLine%22%3A%22192%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22192%22%2C%22textEndColumn%22%3A%2249%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Content"}),b.jsx("th",{"trae-inspector-start-line":"193","trae-inspector-start-column":"16","trae-inspector-end-line":"193","trae-inspector-end-column":"65","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22193%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22193%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),b.jsx("tbody",{"trae-inspector-start-line":"196","trae-inspector-start-column":"12","trae-inspector-end-line":"251","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:A?b.jsx("tr",{"trae-inspector-start-line":"198","trae-inspector-start-column":"16","trae-inspector-end-line":"200","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsx("td",{"trae-inspector-start-line":"199","trae-inspector-start-column":"18","trae-inspector-end-line":"199","trae-inspector-end-column":"97","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22199%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22199%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):g.length===0?b.jsx("tr",{"trae-inspector-start-line":"202","trae-inspector-start-column":"16","trae-inspector-end-line":"206","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsx("td",{"trae-inspector-start-line":"203","trae-inspector-start-column":"18","trae-inspector-end-line":"205","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:h?"No assessments found":"Please select a module"})}):g.map(ce=>b.jsxs("tr",{"trae-inspector-start-line":"209","trae-inspector-start-column":"18","trae-inspector-end-line":"248","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[b.jsx("td",{"trae-inspector-start-line":"210","trae-inspector-start-column":"20","trae-inspector-end-line":"210","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-900",children:ce.year}),b.jsx("td",{"trae-inspector-start-line":"211","trae-inspector-start-column":"20","trae-inspector-end-line":"216","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:b.jsxs("div",{"trae-inspector-start-line":"212","trae-inspector-start-column":"22","trae-inspector-end-line":"215","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[b.jsx(Hg,{className:"h-4 w-4 text-blue-500"}),b.jsx("span",{"trae-inspector-start-line":"214","trae-inspector-start-column":"24","trae-inspector-end-line":"214","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-900",children:ce.title})]})}),b.jsx("td",{"trae-inspector-start-line":"217","trae-inspector-start-column":"20","trae-inspector-end-line":"238","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:b.jsxs("div",{"trae-inspector-start-line":"218","trae-inspector-start-column":"22","trae-inspector-end-line":"237","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-4",children:[ce.pdfUrl&&b.jsxs("a",{"trae-inspector-start-line":"220","trae-inspector-start-column":"26","trae-inspector-end-line":"228","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:ce.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-red-600 hover:text-red-900 text-xs",title:"Download PDF",children:[b.jsx(Hg,{className:"h-4 w-4 mr-1"})," PDF"]}),b.jsxs("button",{"trae-inspector-start-line":"230","trae-inspector-start-column":"24","trae-inspector-end-line":"236","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>j(ce),className:"flex items-center text-blue-600 hover:text-blue-900 text-xs",title:"Manage Questions",children:[b.jsx(LB,{className:"h-4 w-4 mr-1"})," Questions"]})]})}),b.jsx("td",{"trae-inspector-start-line":"239","trae-inspector-start-column":"20","trae-inspector-end-line":"247","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:b.jsx("button",{"trae-inspector-start-line":"240","trae-inspector-start-column":"22","trae-inspector-end-line":"246","trae-inspector-end-column":"31","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>ye(ce),className:"text-red-600 hover:text-red-900",title:"Delete Assessment",children:b.jsx(o0,{className:"h-5 w-5"})})})]},ce.assessmentId))})]})})}),b.jsx(E0,{isOpen:C,onClose:()=>T(!1),title:`Create ${e.slice(0,-1)}`,children:b.jsxs("form",{"trae-inspector-start-line":"261","trae-inspector-start-column":"8","trae-inspector-end-line":"302","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:$,className:"space-y-4",children:[b.jsxs("div",{"trae-inspector-start-line":"262","trae-inspector-start-column":"10","trae-inspector-end-line":"271","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"263","trae-inspector-start-column":"12","trae-inspector-end-line":"263","trae-inspector-end-column":"83","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22263%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22263%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Year"}),b.jsx("input",{"trae-inspector-start-line":"264","trae-inspector-start-column":"12","trae-inspector-end-line":"270","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,value:D,onChange:ce=>R(parseInt(ce.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),b.jsxs("div",{"trae-inspector-start-line":"272","trae-inspector-start-column":"10","trae-inspector-end-line":"282","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"273","trae-inspector-start-column":"12","trae-inspector-end-line":"273","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22273%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22273%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Title"}),b.jsx("input",{"trae-inspector-start-line":"274","trae-inspector-start-column":"12","trae-inspector-end-line":"281","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:z,onChange:ce=>W(ce.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g. Final Exam, Semester Test 1"})]}),b.jsxs("div",{"trae-inspector-start-line":"283","trae-inspector-start-column":"10","trae-inspector-end-line":"292","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"284","trae-inspector-start-column":"12","trae-inspector-end-line":"284","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Full%20Paper%20PDF%20(Optional)%22%2C%22textStartLine%22%3A%22284%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22284%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Full Paper PDF (Optional)"}),b.jsx("p",{"trae-inspector-start-line":"285","trae-inspector-start-column":"12","trae-inspector-end-line":"285","trae-inspector-end-column":"147","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20the%20full%20paper%20if%20you%20have%20it%2C%20otherwise%20you%20can%20add%20questions%20individually%20later.%22%2C%22textStartLine%22%3A%22285%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%22285%22%2C%22textEndColumn%22%3A%22143%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1",children:"Upload the full paper if you have it, otherwise you can add questions individually later."}),b.jsx("input",{"trae-inspector-start-line":"286","trae-inspector-start-column":"12","trae-inspector-end-line":"291","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:".pdf",onChange:ce=>U(ce.target.files?ce.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),b.jsx("div",{"trae-inspector-start-line":"293","trae-inspector-start-column":"10","trae-inspector-end-line":"301","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:b.jsx("button",{"trae-inspector-start-line":"294","trae-inspector-start-column":"12","trae-inspector-end-line":"300","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:P,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${P?"opacity-75 cursor-not-allowed":""}`,children:P?"Creating...":"Create Assessment"})})]})})]})},sq=()=>b.jsx(TF,{type:"exam",title:"Exams"}),iq=()=>b.jsx(TF,{type:"test",title:"Tests"}),aq=()=>b.jsx(TF,{type:"supplementary",title:"Supplementary Exams"}),xR="users",ER=async s=>{let e;return s?e=Zi(cs(nn,xR),vu("universityId","==",s),Fu("createdAt","desc")):e=Zi(cs(nn,xR),Fu("createdAt","desc"),vN(50)),(await Zh(e)).docs.map(n=>({userId:n.id,...n.data()}))},oq=()=>{const[s,e]=K.useState([]),[t,n]=K.useState([]),[r,i]=K.useState(""),[o,u]=K.useState(!0),[d,h]=K.useState("");K.useEffect(()=>{(async()=>{try{const[A,S]=await Promise.all([s2(),ER()]);n(A),e(S)}catch(A){console.error("Error loading data:",A)}finally{u(!1)}})()},[]),K.useEffect(()=>{(async()=>{u(!0);try{const A=await ER(r||void 0);e(A)}catch(A){console.error("Error fetching users:",A)}finally{u(!1)}})()},[r]);const f=s.filter(w=>w.name.toLowerCase().includes(d.toLowerCase())||w.email.toLowerCase().includes(d.toLowerCase())),g=w=>{const A=t.find(S=>S.universityId===w);return A?A.code:"Unknown"};return b.jsxs("div",{"trae-inspector-start-line":"58","trae-inspector-start-column":"4","trae-inspector-end-line":"167","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("h1",{"trae-inspector-start-line":"59","trae-inspector-start-column":"6","trae-inspector-end-line":"59","trae-inspector-end-column":"77","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Users%22%2C%22textStartLine%22%3A%2259%22%2C%22textStartColumn%22%3A%2260%22%2C%22textEndLine%22%3A%2259%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900 mb-6",children:"Manage Users"}),b.jsx("div",{"trae-inspector-start-line":"61","trae-inspector-start-column":"6","trae-inspector-end-line":"94","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:b.jsxs("div",{"trae-inspector-start-line":"62","trae-inspector-start-column":"8","trae-inspector-end-line":"93","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[b.jsxs("div",{"trae-inspector-start-line":"63","trae-inspector-start-column":"10","trae-inspector-end-line":"77","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[b.jsx("label",{"trae-inspector-start-line":"64","trae-inspector-start-column":"12","trae-inspector-end-line":"64","trae-inspector-end-column":"104","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Filter%20by%20University%22%2C%22textStartLine%22%3A%2264%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2264%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by University"}),b.jsxs("select",{"trae-inspector-start-line":"65","trae-inspector-start-column":"12","trae-inspector-end-line":"76","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:r,onChange:w=>i(w.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:[b.jsx("option",{"trae-inspector-start-line":"70","trae-inspector-start-column":"14","trae-inspector-end-line":"70","trae-inspector-end-column":"56","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22All%20Universities%22%2C%22textStartLine%22%3A%2270%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%2270%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"",children:"All Universities"}),t.map(w=>b.jsxs("option",{"trae-inspector-start-line":"72","trae-inspector-start-column":"16","trae-inspector-end-line":"74","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:w.universityId,children:[w.name," (",w.code,")"]},w.universityId))]})]}),b.jsxs("div",{"trae-inspector-start-line":"78","trae-inspector-start-column":"10","trae-inspector-end-line":"92","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[b.jsx("label",{"trae-inspector-start-line":"79","trae-inspector-start-column":"12","trae-inspector-end-line":"79","trae-inspector-end-column":"96","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Search%20Users%22%2C%22textStartLine%22%3A%2279%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2279%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Users"}),b.jsxs("div",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"91","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative",children:[b.jsx("div",{"trae-inspector-start-line":"81","trae-inspector-start-column":"14","trae-inspector-end-line":"83","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(o1,{className:"h-5 w-5 text-gray-400"})}),b.jsx("input",{"trae-inspector-start-line":"84","trae-inspector-start-column":"14","trae-inspector-end-line":"90","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search by name or email...",value:d,onChange:w=>h(w.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}),b.jsx("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"6","trae-inspector-end-line":"166","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:b.jsx("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"8","trae-inspector-end-line":"165","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:b.jsxs("table",{"trae-inspector-start-line":"98","trae-inspector-start-column":"10","trae-inspector-end-line":"164","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[b.jsx("thead",{"trae-inspector-start-line":"99","trae-inspector-start-column":"12","trae-inspector-end-line":"107","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:b.jsxs("tr",{"trae-inspector-start-line":"100","trae-inspector-start-column":"14","trae-inspector-end-line":"106","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("th",{"trae-inspector-start-line":"101","trae-inspector-start-column":"16","trae-inspector-end-line":"101","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22User%22%2C%22textStartLine%22%3A%22101%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22101%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"User"}),b.jsx("th",{"trae-inspector-start-line":"102","trae-inspector-start-column":"16","trae-inspector-end-line":"102","trae-inspector-end-column":"57","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%22%2C%22textStartLine%22%3A%22102%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22102%22%2C%22textEndColumn%22%3A%2252%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"University"}),b.jsx("th",{"trae-inspector-start-line":"103","trae-inspector-start-column":"16","trae-inspector-end-line":"103","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Points%22%2C%22textStartLine%22%3A%22103%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22103%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Points"}),b.jsx("th",{"trae-inspector-start-line":"104","trae-inspector-start-column":"16","trae-inspector-end-line":"104","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Status%22%2C%22textStartLine%22%3A%22104%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22104%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Status"}),b.jsx("th",{"trae-inspector-start-line":"105","trae-inspector-start-column":"16","trae-inspector-end-line":"105","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Joined%22%2C%22textStartLine%22%3A%22105%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22105%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Joined"})]})}),b.jsx("tbody",{"trae-inspector-start-line":"108","trae-inspector-start-column":"12","trae-inspector-end-line":"163","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:o?b.jsx("tr",{"trae-inspector-start-line":"110","trae-inspector-start-column":"16","trae-inspector-end-line":"112","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsx("td",{"trae-inspector-start-line":"111","trae-inspector-start-column":"18","trae-inspector-end-line":"111","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22111%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22111%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):f.length===0?b.jsx("tr",{"trae-inspector-start-line":"114","trae-inspector-start-column":"16","trae-inspector-end-line":"116","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:b.jsx("td",{"trae-inspector-start-line":"115","trae-inspector-start-column":"18","trae-inspector-end-line":"115","trae-inspector-end-column":"101","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20users%20found%22%2C%22textStartLine%22%3A%22115%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22115%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):f.map(w=>b.jsxs("tr",{"trae-inspector-start-line":"119","trae-inspector-start-column":"18","trae-inspector-end-line":"160","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[b.jsx("td",{"trae-inspector-start-line":"120","trae-inspector-start-column":"20","trae-inspector-end-line":"135","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:b.jsxs("div",{"trae-inspector-start-line":"121","trae-inspector-start-column":"22","trae-inspector-end-line":"134","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center",children:[b.jsx("div",{"trae-inspector-start-line":"122","trae-inspector-start-column":"24","trae-inspector-end-line":"126","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-shrink-0 h-10 w-10",children:b.jsx("div",{"trae-inspector-start-line":"123","trae-inspector-start-column":"26","trae-inspector-end-line":"125","trae-inspector-end-column":"32","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:b.jsx(KR,{className:"h-6 w-6 text-blue-600"})})}),b.jsxs("div",{"trae-inspector-start-line":"127","trae-inspector-start-column":"24","trae-inspector-end-line":"133","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"ml-4",children:[b.jsx("div",{"trae-inspector-start-line":"128","trae-inspector-start-column":"26","trae-inspector-end-line":"128","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-900",children:w.name}),b.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"26","trae-inspector-end-line":"132","trae-inspector-end-column":"32","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500 flex items-center",children:[b.jsx(WR,{className:"h-3 w-3 mr-1"}),w.email]})]})]})}),b.jsx("td",{"trae-inspector-start-line":"136","trae-inspector-start-column":"20","trae-inspector-end-line":"141","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:b.jsxs("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"22","trae-inspector-end-line":"140","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center text-sm text-gray-900",children:[b.jsx(JE,{className:"h-4 w-4 mr-2 text-gray-400"}),g(w.universityId)]})}),b.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"20","trae-inspector-end-line":"147","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:b.jsxs("div",{"trae-inspector-start-line":"143","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center text-sm text-gray-900",children:[b.jsx(lB,{className:"h-4 w-4 mr-2 text-yellow-500"}),w.points]})}),b.jsx("td",{"trae-inspector-start-line":"148","trae-inspector-start-column":"20","trae-inspector-end-line":"156","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:b.jsx("span",{"trae-inspector-start-line":"149","trae-inspector-start-column":"22","trae-inspector-end-line":"155","trae-inspector-end-column":"29","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w.subscriptionActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.subscriptionActive?"Premium":"Free"})}),b.jsx("td",{"trae-inspector-start-line":"157","trae-inspector-start-column":"20","trae-inspector-end-line":"159","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:w.createdAt?new Date(w.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]},w.userId))})]})})})]})},lq=()=>b.jsxs("div",{"trae-inspector-start-line":"6","trae-inspector-start-column":"4","trae-inspector-end-line":"20","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[b.jsx("h1",{"trae-inspector-start-line":"7","trae-inspector-start-column":"6","trae-inspector-end-line":"7","trae-inspector-end-column":"78","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Analytics%20Overview%22%2C%22textStartLine%22%3A%227%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%227%22%2C%22textEndColumn%22%3A%2273%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Analytics Overview"}),b.jsxs("div",{"trae-inspector-start-line":"9","trae-inspector-start-column":"6","trae-inspector-end-line":"19","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[b.jsx("div",{"trae-inspector-start-line":"10","trae-inspector-start-column":"8","trae-inspector-end-line":"14","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-center mb-6",children:b.jsx("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"10","trae-inspector-end-line":"13","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-100 p-4 rounded-full",children:b.jsx(HR,{className:"h-12 w-12 text-blue-600"})})}),b.jsx("h2",{"trae-inspector-start-line":"15","trae-inspector-start-column":"8","trae-inspector-end-line":"15","trae-inspector-end-column":"85","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Analytics%20Dashboard%22%2C%22textStartLine%22%3A%2215%22%2C%22textStartColumn%22%3A%2261%22%2C%22textEndLine%22%3A%2215%22%2C%22textEndColumn%22%3A%2280%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xl font-bold text-gray-900 mb-2",children:"Analytics Dashboard"}),b.jsx("p",{"trae-inspector-start-line":"16","trae-inspector-start-column":"8","trae-inspector-end-line":"18","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Detailed%20usage%20statistics%20and%20engagement%20metrics%20will%20appear%20here%20once%20students%20start%20using%20the%20mobile%20application.%22%2C%22textStartLine%22%3A%2216%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%2218%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-500 max-w-md mx-auto",children:"Detailed usage statistics and engagement metrics will appear here once students start using the mobile application."})]})]}),W1="announcements",cq=async()=>{const s=Zi(cs(nn,W1),Fu("createdAt","desc"));return(await Zh(s)).docs.map(t=>({announcementId:t.id,...t.data()}))},uq=async(s,e,t,n)=>(await _0(cs(nn,W1),{title:s,message:e,universityId:t,active:n,createdAt:v0()})).id,dq=async(s,e)=>{await oF(ho(nn,W1,s),{active:e})},hq=async s=>{await A0(ho(nn,W1,s))},pq=()=>{const[s,e]=K.useState([]),[t,n]=K.useState([]),[r,i]=K.useState(!0),[o,u]=K.useState(!1),[d,h]=K.useState(!1),[f,g]=K.useState(""),[w,A]=K.useState(""),[S,C]=K.useState(""),[T,P]=K.useState(!0);K.useEffect(()=>{O()},[]);const O=async()=>{try{const[R,L]=await Promise.all([cq(),s2()]);e(R),n(L)}catch(R){console.error("Error fetching data:",R)}finally{i(!1)}},N=()=>{g(""),A(""),C(""),P(!0),u(!0)},j=async R=>{R.preventDefault(),h(!0);try{await uq(f,w,S||"all",T),u(!1),O()}catch(L){console.error("Error creating announcement:",L)}finally{h(!1)}},z=async R=>{try{await dq(R.announcementId,!R.active),O()}catch(L){console.error("Error updating status:",L)}},W=async R=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await hq(R),O()}catch(L){console.error("Error deleting announcement:",L)}},D=R=>{if(R==="all")return"All Universities";const L=t.find(U=>U.universityId===R);return L?L.name:"Unknown"};return b.jsxs("div",{"trae-inspector-start-line":"89","trae-inspector-start-column":"4","trae-inspector-end-line":"229","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsxs("div",{"trae-inspector-start-line":"90","trae-inspector-start-column":"6","trae-inspector-end-line":"99","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{"trae-inspector-start-line":"91","trae-inspector-start-column":"8","trae-inspector-end-line":"91","trae-inspector-end-column":"75","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Announcements%22%2C%22textStartLine%22%3A%2291%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2291%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Announcements"}),b.jsxs("button",{"trae-inspector-start-line":"92","trae-inspector-start-column":"8","trae-inspector-end-line":"98","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:N,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[b.jsx(a0,{className:"h-5 w-5"}),b.jsx("span",{"trae-inspector-start-line":"97","trae-inspector-start-column":"10","trae-inspector-end-line":"97","trae-inspector-end-column":"42","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Create%20Announcement%22%2C%22textStartLine%22%3A%2297%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2297%22%2C%22textEndColumn%22%3A%2235%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Create Announcement"})]})]}),b.jsx("div",{"trae-inspector-start-line":"101","trae-inspector-start-column":"6","trae-inspector-end-line":"160","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid gap-6",children:r?b.jsx("div",{"trae-inspector-start-line":"103","trae-inspector-start-column":"10","trae-inspector-end-line":"103","trae-inspector-end-column":"75","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22103%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22103%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center text-gray-500 py-10",children:"Loading..."}):s.length===0?b.jsx("div",{"trae-inspector-start-line":"105","trae-inspector-start-column":"10","trae-inspector-end-line":"107","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20announcements%20found%22%2C%22textStartLine%22%3A%22105%22%2C%22textStartColumn%22%3A%2289%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center text-gray-500 py-10 bg-white rounded-xl shadow-sm",children:"No announcements found"}):s.map(R=>b.jsxs("div",{"trae-inspector-start-line":"110","trae-inspector-start-column":"12","trae-inspector-end-line":"157","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-6 flex justify-between items-start",children:[b.jsxs("div",{"trae-inspector-start-line":"111","trae-inspector-start-column":"14","trae-inspector-end-line":"127","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-start space-x-4",children:[b.jsx("div",{"trae-inspector-start-line":"112","trae-inspector-start-column":"16","trae-inspector-end-line":"114","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`p-3 rounded-lg ${R.active?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-500"}`,children:b.jsx(GR,{className:"h-6 w-6"})}),b.jsxs("div",{"trae-inspector-start-line":"115","trae-inspector-start-column":"16","trae-inspector-end-line":"126","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("h3",{"trae-inspector-start-line":"116","trae-inspector-start-column":"18","trae-inspector-end-line":"116","trae-inspector-end-column":"82","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-bold text-gray-900",children:R.title}),b.jsx("p",{"trae-inspector-start-line":"117","trae-inspector-start-column":"18","trae-inspector-end-line":"117","trae-inspector-end-column":"69","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-600 mt-1",children:R.message}),b.jsxs("div",{"trae-inspector-start-line":"118","trae-inspector-start-column":"18","trae-inspector-end-line":"125","trae-inspector-end-column":"24","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4 mt-3 text-sm text-gray-500",children:[b.jsxs("span",{"trae-inspector-start-line":"119","trae-inspector-start-column":"20","trae-inspector-end-line":"121","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-100 px-2 py-1 rounded-md",children:["Target: ",D(R.universityId)]}),b.jsxs("span",{"trae-inspector-start-line":"122","trae-inspector-start-column":"20","trae-inspector-end-line":"124","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:["Created: ",R.createdAt?new Date(R.createdAt.seconds*1e3).toLocaleDateString():"Just now"]})]})]})]}),b.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"14","trae-inspector-end-line":"156","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[b.jsx("button",{"trae-inspector-start-line":"130","trae-inspector-start-column":"16","trae-inspector-end-line":"149","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(R),className:`flex items-center space-x-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${R.active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:R.active?b.jsxs(b.Fragment,{children:[b.jsx(vB,{className:"h-4 w-4"}),b.jsx("span",{"trae-inspector-start-line":"141","trae-inspector-start-column":"22","trae-inspector-end-line":"141","trae-inspector-end-column":"41","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Active%22%2C%22textStartLine%22%3A%22141%22%2C%22textStartColumn%22%3A%2228%22%2C%22textEndLine%22%3A%22141%22%2C%22textEndColumn%22%3A%2234%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Active"})]}):b.jsxs(b.Fragment,{children:[b.jsx(_B,{className:"h-4 w-4"}),b.jsx("span",{"trae-inspector-start-line":"146","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"43","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Inactive%22%2C%22textStartLine%22%3A%22146%22%2C%22textStartColumn%22%3A%2228%22%2C%22textEndLine%22%3A%22146%22%2C%22textEndColumn%22%3A%2236%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Inactive"})]})}),b.jsx("button",{"trae-inspector-start-line":"150","trae-inspector-start-column":"16","trae-inspector-end-line":"155","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>W(R.announcementId),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:b.jsx(o0,{className:"h-5 w-5"})})]})]},R.announcementId))}),b.jsx(E0,{isOpen:o,onClose:()=>u(!1),title:"Create Announcement",children:b.jsxs("form",{"trae-inspector-start-line":"167","trae-inspector-start-column":"8","trae-inspector-end-line":"227","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:j,className:"space-y-4",children:[b.jsxs("div",{"trae-inspector-start-line":"168","trae-inspector-start-column":"10","trae-inspector-end-line":"178","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"169","trae-inspector-start-column":"12","trae-inspector-end-line":"169","trae-inspector-end-column":"84","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22169%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22169%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Title"}),b.jsx("input",{"trae-inspector-start-line":"170","trae-inspector-start-column":"12","trae-inspector-end-line":"177","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:f,onChange:R=>g(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g. System Maintenance"})]}),b.jsxs("div",{"trae-inspector-start-line":"179","trae-inspector-start-column":"10","trae-inspector-end-line":"189","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"180","trae-inspector-start-column":"12","trae-inspector-end-line":"180","trae-inspector-end-column":"86","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Message%22%2C%22textStartLine%22%3A%22180%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22180%22%2C%22textEndColumn%22%3A%2278%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Message"}),b.jsx("textarea",{"trae-inspector-start-line":"181","trae-inspector-start-column":"12","trae-inspector-end-line":"188","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",required:!0,rows:3,value:w,onChange:R=>A(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter announcement details..."})]}),b.jsxs("div",{"trae-inspector-start-line":"190","trae-inspector-start-column":"10","trae-inspector-end-line":"205","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[b.jsx("label",{"trae-inspector-start-line":"191","trae-inspector-start-column":"12","trae-inspector-end-line":"191","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Target%20Audience%22%2C%22textStartLine%22%3A%22191%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22191%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Target Audience"}),b.jsxs("select",{"trae-inspector-start-line":"192","trae-inspector-start-column":"12","trae-inspector-end-line":"204","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:S,onChange:R=>C(R.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[b.jsx("option",{"trae-inspector-start-line":"197","trae-inspector-start-column":"14","trae-inspector-end-line":"197","trae-inspector-end-column":"56","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20Target...%22%2C%22textStartLine%22%3A%22197%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%22197%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"",children:"Select Target..."}),b.jsx("option",{"trae-inspector-start-line":"198","trae-inspector-start-column":"14","trae-inspector-end-line":"198","trae-inspector-end-column":"59","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22All%20Universities%22%2C%22textStartLine%22%3A%22198%22%2C%22textStartColumn%22%3A%2234%22%2C%22textEndLine%22%3A%22198%22%2C%22textEndColumn%22%3A%2250%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"all",children:"All Universities"}),t.map(R=>b.jsx("option",{"trae-inspector-start-line":"200","trae-inspector-start-column":"16","trae-inspector-end-line":"202","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:R.universityId,children:R.name},R.universityId))]})]}),b.jsxs("div",{"trae-inspector-start-line":"206","trae-inspector-start-column":"10","trae-inspector-end-line":"217","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center",children:[b.jsx("input",{"trae-inspector-start-line":"207","trae-inspector-start-column":"12","trae-inspector-end-line":"213","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"active",type:"checkbox",checked:T,onChange:R=>P(R.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),b.jsx("label",{"trae-inspector-start-line":"214","trae-inspector-start-column":"12","trae-inspector-end-line":"216","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Set%20as%20Active%20immediately%22%2C%22textStartLine%22%3A%22214%22%2C%22textStartColumn%22%3A%2281%22%2C%22textEndLine%22%3A%22216%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Set as Active immediately"})]}),b.jsx("div",{"trae-inspector-start-line":"218","trae-inspector-start-column":"10","trae-inspector-end-line":"226","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:b.jsx("button",{"trae-inspector-start-line":"219","trae-inspector-start-column":"12","trae-inspector-end-line":"225","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:d,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${d?"opacity-75 cursor-not-allowed":""}`,children:d?"Creating...":"Create Announcement"})})]})})]})};function fq(){return b.jsx(W7,{children:b.jsxs(_7,{children:[b.jsx(vs,{path:"/login",element:b.jsx(Qz,{})}),b.jsx(vs,{path:"/",element:b.jsx(xa,{children:b.jsx(_a,{children:b.jsx(XE,{to:"/dashboard",replace:!0})})})}),b.jsx(vs,{path:"/dashboard",element:b.jsx(xa,{children:b.jsx(_a,{children:b.jsx(JH,{})})})}),b.jsx(vs,{path:"/universities",element:b.jsx(xa,{children:b.jsx(_a,{children:b.jsx(ZH,{})})})}),b.jsx(vs,{path:"/modules",element:b.jsx(xa,{children:b.jsx(_a,{children:b.jsx(rW,{})})})}),b.jsx(vs,{path:"/exams",element:b.jsx(xa,{children:b.jsx(_a,{children:b.jsx(sq,{})})})}),b.jsx(vs,{path:"/tests",element:b.jsx(xa,{children:b.jsx(_a,{children:b.jsx(iq,{})})})}),b.jsx(vs,{path:"/supplementary-exams",element:b.jsx(xa,{children:b.jsx(_a,{children:b.jsx(aq,{})})})}),b.jsx(vs,{path:"/users",element:b.jsx(xa,{children:b.jsx(_a,{children:b.jsx(oq,{})})})}),b.jsx(vs,{path:"/analytics",element:b.jsx(xa,{children:b.jsx(_a,{children:b.jsx(lq,{})})})}),b.jsx(vs,{path:"/announcements",element:b.jsx(xa,{children:b.jsx(_a,{children:b.jsx(pq,{})})})}),b.jsx(vs,{path:"*",element:b.jsx(XE,{to:"/",replace:!0})})]})})}b4.createRoot(document.getElementById("root")).render(b.jsx(K.StrictMode,{children:b.jsx(fq,{})}));

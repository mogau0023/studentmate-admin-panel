var d7=Object.defineProperty;var pI=s=>{throw TypeError(s)};var h7=(s,e,t)=>e in s?d7(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var ae=(s,e,t)=>h7(s,typeof e!="symbol"?e+"":e,t),wE=(s,e,t)=>e.has(s)||pI("Cannot "+t);var c=(s,e,t)=>(wE(s,e,"read from private field"),t?t.call(s):e.get(s)),T=(s,e,t)=>e.has(s)?pI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),x=(s,e,t,n)=>(wE(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),P=(s,e,t)=>(wE(s,e,"access private method"),t);var jn=(s,e,t,n)=>({set _(r){x(s,e,r,t)},get _(){return c(s,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function AD(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var vE={exports:{}},ng={},AE={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fI;function p7(){if(fI)return st;fI=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=g&&H[g]||H["@@iterator"],typeof H=="function"?H:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,C={};function S(H,q,ie){this.props=H,this.context=q,this.refs=C,this.updater=ie||v}S.prototype.isReactComponent={},S.prototype.setState=function(H,q){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,q,"setState")},S.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function I(){}I.prototype=S.prototype;function O(H,q,ie){this.props=H,this.context=q,this.refs=C,this.updater=ie||v}var R=O.prototype=new I;R.constructor=O,F(R,S.prototype),R.isPureReactComponent=!0;var V=Array.isArray,z=Object.prototype.hasOwnProperty,W={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function D(H,q,ie){var ye,Ae={},Ce=null,Se=null;if(q!=null)for(ye in q.ref!==void 0&&(Se=q.ref),q.key!==void 0&&(Ce=""+q.key),q)z.call(q,ye)&&!N.hasOwnProperty(ye)&&(Ae[ye]=q[ye]);var Be=arguments.length-2;if(Be===1)Ae.children=ie;else if(1<Be){for(var be=Array(Be),Me=0;Me<Be;Me++)be[Me]=arguments[Me+2];Ae.children=be}if(H&&H.defaultProps)for(ye in Be=H.defaultProps,Be)Ae[ye]===void 0&&(Ae[ye]=Be[ye]);return{$$typeof:s,type:H,key:Ce,ref:Se,props:Ae,_owner:W.current}}function L(H,q){return{$$typeof:s,type:H.type,key:q,ref:H.ref,props:H.props,_owner:H._owner}}function U(H){return typeof H=="object"&&H!==null&&H.$$typeof===s}function $(H){var q={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ie){return q[ie]})}var Q=/\/+/g;function j(H,q){return typeof H=="object"&&H!==null&&H.key!=null?$(""+H.key):q.toString(36)}function me(H,q,ie,ye,Ae){var Ce=typeof H;(Ce==="undefined"||Ce==="boolean")&&(H=null);var Se=!1;if(H===null)Se=!0;else switch(Ce){case"string":case"number":Se=!0;break;case"object":switch(H.$$typeof){case s:case e:Se=!0}}if(Se)return Se=H,Ae=Ae(Se),H=ye===""?"."+j(Se,0):ye,V(Ae)?(ie="",H!=null&&(ie=H.replace(Q,"$&/")+"/"),me(Ae,q,ie,"",function(Me){return Me})):Ae!=null&&(U(Ae)&&(Ae=L(Ae,ie+(!Ae.key||Se&&Se.key===Ae.key?"":(""+Ae.key).replace(Q,"$&/")+"/")+H)),q.push(Ae)),1;if(Se=0,ye=ye===""?".":ye+":",V(H))for(var Be=0;Be<H.length;Be++){Ce=H[Be];var be=ye+j(Ce,Be);Se+=me(Ce,q,ie,be,Ae)}else if(be=w(H),typeof be=="function")for(H=be.call(H),Be=0;!(Ce=H.next()).done;)Ce=Ce.value,be=ye+j(Ce,Be++),Se+=me(Ce,q,ie,be,Ae);else if(Ce==="object")throw q=String(H),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return Se}function _e(H,q,ie){if(H==null)return H;var ye=[],Ae=0;return me(H,ye,"","",function(Ce){return q.call(ie,Ce,Ae++)}),ye}function we(H){if(H._status===-1){var q=H._result;q=q(),q.then(function(ie){(H._status===0||H._status===-1)&&(H._status=1,H._result=ie)},function(ie){(H._status===0||H._status===-1)&&(H._status=2,H._result=ie)}),H._status===-1&&(H._status=0,H._result=q)}if(H._status===1)return H._result.default;throw H._result}var fe={current:null},oe={transition:null},Z={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:oe,ReactCurrentOwner:W};function J(){throw Error("act(...) is not supported in production builds of React.")}return st.Children={map:_e,forEach:function(H,q,ie){_e(H,function(){q.apply(this,arguments)},ie)},count:function(H){var q=0;return _e(H,function(){q++}),q},toArray:function(H){return _e(H,function(q){return q})||[]},only:function(H){if(!U(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},st.Component=S,st.Fragment=t,st.Profiler=r,st.PureComponent=O,st.StrictMode=n,st.Suspense=d,st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,st.act=J,st.cloneElement=function(H,q,ie){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var ye=F({},H.props),Ae=H.key,Ce=H.ref,Se=H._owner;if(q!=null){if(q.ref!==void 0&&(Ce=q.ref,Se=W.current),q.key!==void 0&&(Ae=""+q.key),H.type&&H.type.defaultProps)var Be=H.type.defaultProps;for(be in q)z.call(q,be)&&!N.hasOwnProperty(be)&&(ye[be]=q[be]===void 0&&Be!==void 0?Be[be]:q[be])}var be=arguments.length-2;if(be===1)ye.children=ie;else if(1<be){Be=Array(be);for(var Me=0;Me<be;Me++)Be[Me]=arguments[Me+2];ye.children=Be}return{$$typeof:s,type:H.type,key:Ae,ref:Ce,props:ye,_owner:Se}},st.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:i,_context:H},H.Consumer=H},st.createElement=D,st.createFactory=function(H){var q=D.bind(null,H);return q.type=H,q},st.createRef=function(){return{current:null}},st.forwardRef=function(H){return{$$typeof:u,render:H}},st.isValidElement=U,st.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:we}},st.memo=function(H,q){return{$$typeof:h,type:H,compare:q===void 0?null:q}},st.startTransition=function(H){var q=oe.transition;oe.transition={};try{H()}finally{oe.transition=q}},st.unstable_act=J,st.useCallback=function(H,q){return fe.current.useCallback(H,q)},st.useContext=function(H){return fe.current.useContext(H)},st.useDebugValue=function(){},st.useDeferredValue=function(H){return fe.current.useDeferredValue(H)},st.useEffect=function(H,q){return fe.current.useEffect(H,q)},st.useId=function(){return fe.current.useId()},st.useImperativeHandle=function(H,q,ie){return fe.current.useImperativeHandle(H,q,ie)},st.useInsertionEffect=function(H,q){return fe.current.useInsertionEffect(H,q)},st.useLayoutEffect=function(H,q){return fe.current.useLayoutEffect(H,q)},st.useMemo=function(H,q){return fe.current.useMemo(H,q)},st.useReducer=function(H,q,ie){return fe.current.useReducer(H,q,ie)},st.useRef=function(H){return fe.current.useRef(H)},st.useState=function(H){return fe.current.useState(H)},st.useSyncExternalStore=function(H,q,ie){return fe.current.useSyncExternalStore(H,q,ie)},st.useTransition=function(){return fe.current.useTransition()},st.version="18.3.1",st}var mI;function bF(){return mI||(mI=1,AE.exports=p7()),AE.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gI;function f7(){if(gI)return ng;gI=1;var s=bF(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,h){var f,g={},w=null,v=null;h!==void 0&&(w=""+h),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(v=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(g[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)g[f]===void 0&&(g[f]=d[f]);return{$$typeof:e,type:u,key:w,ref:v,props:g,_owner:r.current}}return ng.Fragment=t,ng.jsx=a,ng.jsxs=a,ng}var yI;function m7(){return yI||(yI=1,vE.exports=f7()),vE.exports}var _=m7(),K=bF();const Gv=AD(K);var qv={},_E={exports:{}},ts={},xE={exports:{}},EE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wI;function g7(){return wI||(wI=1,(function(s){function e(oe,Z){var J=oe.length;oe.push(Z);e:for(;0<J;){var H=J-1>>>1,q=oe[H];if(0<r(q,Z))oe[H]=Z,oe[J]=q,J=H;else break e}}function t(oe){return oe.length===0?null:oe[0]}function n(oe){if(oe.length===0)return null;var Z=oe[0],J=oe.pop();if(J!==Z){oe[0]=J;e:for(var H=0,q=oe.length,ie=q>>>1;H<ie;){var ye=2*(H+1)-1,Ae=oe[ye],Ce=ye+1,Se=oe[Ce];if(0>r(Ae,J))Ce<q&&0>r(Se,Ae)?(oe[H]=Se,oe[Ce]=J,H=Ce):(oe[H]=Ae,oe[ye]=J,H=ye);else if(Ce<q&&0>r(Se,J))oe[H]=Se,oe[Ce]=J,H=Ce;else break e}}return Z}function r(oe,Z){var J=oe.sortIndex-Z.sortIndex;return J!==0?J:oe.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var a=Date,u=a.now();s.unstable_now=function(){return a.now()-u}}var d=[],h=[],f=1,g=null,w=3,v=!1,F=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(oe){for(var Z=t(h);Z!==null;){if(Z.callback===null)n(h);else if(Z.startTime<=oe)n(h),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(h)}}function V(oe){if(C=!1,R(oe),!F)if(t(d)!==null)F=!0,we(z);else{var Z=t(h);Z!==null&&fe(V,Z.startTime-oe)}}function z(oe,Z){F=!1,C&&(C=!1,I(D),D=-1),v=!0;var J=w;try{for(R(Z),g=t(d);g!==null&&(!(g.expirationTime>Z)||oe&&!$());){var H=g.callback;if(typeof H=="function"){g.callback=null,w=g.priorityLevel;var q=H(g.expirationTime<=Z);Z=s.unstable_now(),typeof q=="function"?g.callback=q:g===t(d)&&n(d),R(Z)}else n(d);g=t(d)}if(g!==null)var ie=!0;else{var ye=t(h);ye!==null&&fe(V,ye.startTime-Z),ie=!1}return ie}finally{g=null,w=J,v=!1}}var W=!1,N=null,D=-1,L=5,U=-1;function $(){return!(s.unstable_now()-U<L)}function Q(){if(N!==null){var oe=s.unstable_now();U=oe;var Z=!0;try{Z=N(!0,oe)}finally{Z?j():(W=!1,N=null)}}else W=!1}var j;if(typeof O=="function")j=function(){O(Q)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,_e=me.port2;me.port1.onmessage=Q,j=function(){_e.postMessage(null)}}else j=function(){S(Q,0)};function we(oe){N=oe,W||(W=!0,j())}function fe(oe,Z){D=S(function(){oe(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(oe){oe.callback=null},s.unstable_continueExecution=function(){F||v||(F=!0,we(z))},s.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<oe?Math.floor(1e3/oe):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_getFirstCallbackNode=function(){return t(d)},s.unstable_next=function(oe){switch(w){case 1:case 2:case 3:var Z=3;break;default:Z=w}var J=w;w=Z;try{return oe()}finally{w=J}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(oe,Z){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var J=w;w=oe;try{return Z()}finally{w=J}},s.unstable_scheduleCallback=function(oe,Z,J){var H=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?H+J:H):J=H,oe){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=J+q,oe={id:f++,callback:Z,priorityLevel:oe,startTime:J,expirationTime:q,sortIndex:-1},J>H?(oe.sortIndex=J,e(h,oe),t(d)===null&&oe===t(h)&&(C?(I(D),D=-1):C=!0,fe(V,J-H))):(oe.sortIndex=q,e(d,oe),F||v||(F=!0,we(z))),oe},s.unstable_shouldYield=$,s.unstable_wrapCallback=function(oe){var Z=w;return function(){var J=w;w=Z;try{return oe.apply(this,arguments)}finally{w=J}}}})(EE)),EE}var vI;function y7(){return vI||(vI=1,xE.exports=g7()),xE.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AI;function w7(){if(AI)return ts;AI=1;var s=bF(),e=y7();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function i(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(r[o]=l,o=0;o<l.length;o++)n.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function w(o){return d.call(g,o)?!0:d.call(f,o)?!1:h.test(o)?g[o]=!0:(f[o]=!0,!1)}function v(o,l,p,y){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function F(o,l,p,y){if(l===null||typeof l>"u"||v(o,l,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(o,l,p,y,A,E,M){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=A,this.mustUseProperty=p,this.propertyName=o,this.type=l,this.sanitizeURL=E,this.removeEmptyString=M}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new C(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];S[l]=new C(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new C(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new C(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new C(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new C(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new C(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new C(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new C(o,5,!1,o.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function O(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(I,O);S[l]=new C(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(I,O);S[l]=new C(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(I,O);S[l]=new C(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new C(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new C(o,1,!1,o.toLowerCase(),null,!0,!0)});function R(o,l,p,y){var A=S.hasOwnProperty(l)?S[l]:null;(A!==null?A.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(F(l,p,A,y)&&(p=null),y||A===null?w(l)&&(p===null?o.removeAttribute(l):o.setAttribute(l,""+p)):A.mustUseProperty?o[A.propertyName]=p===null?A.type===3?!1:"":p:(l=A.attributeName,y=A.attributeNamespace,p===null?o.removeAttribute(l):(A=A.type,p=A===3||A===4&&p===!0?"":""+p,y?o.setAttributeNS(y,l,p):o.setAttribute(l,p))))}var V=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),W=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),$=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),oe=Symbol.iterator;function Z(o){return o===null||typeof o!="object"?null:(o=oe&&o[oe]||o["@@iterator"],typeof o=="function"?o:null)}var J=Object.assign,H;function q(o){if(H===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);H=l&&l[1]||""}return`
`+H+o}var ie=!1;function ye(o,l){if(!o||ie)return"";ie=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(re){var y=re}Reflect.construct(o,[],l)}else{try{l.call()}catch(re){y=re}o.call(l.prototype)}else{try{throw Error()}catch(re){y=re}o()}}catch(re){if(re&&y&&typeof re.stack=="string"){for(var A=re.stack.split(`
`),E=y.stack.split(`
`),M=A.length-1,G=E.length-1;1<=M&&0<=G&&A[M]!==E[G];)G--;for(;1<=M&&0<=G;M--,G--)if(A[M]!==E[G]){if(M!==1||G!==1)do if(M--,G--,0>G||A[M]!==E[G]){var X=`
`+A[M].replace(" at new "," at ");return o.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",o.displayName)),X}while(1<=M&&0<=G);break}}}finally{ie=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?q(o):""}function Ae(o){switch(o.tag){case 5:return q(o.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return o=ye(o.type,!1),o;case 11:return o=ye(o.type.render,!1),o;case 1:return o=ye(o.type,!0),o;default:return""}}function Ce(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case N:return"Fragment";case W:return"Portal";case L:return"Profiler";case D:return"StrictMode";case j:return"Suspense";case me:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case $:return(o.displayName||"Context")+".Consumer";case U:return(o._context.displayName||"Context")+".Provider";case Q:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case _e:return l=o.displayName||null,l!==null?l:Ce(o.type)||"Memo";case we:l=o._payload,o=o._init;try{return Ce(o(l))}catch{}}return null}function Se(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(l);case 8:return l===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Be(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function be(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Me(o){var l=be(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),y=""+o[l];if(!o.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var A=p.get,E=p.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return A.call(this)},set:function(M){y=""+M,E.call(this,M)}}),Object.defineProperty(o,l,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(M){y=""+M},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function rt(o){o._valueTracker||(o._valueTracker=Me(o))}function Wt(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var p=l.getValue(),y="";return o&&(y=be(o)?o.checked?"true":"false":o.value),o=y,o!==p?(l.setValue(o),!0):!1}function Vt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ue(o,l){var p=l.checked;return J({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function We(o,l){var p=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;p=Be(l.value!=null?l.value:p),o._wrapperState={initialChecked:y,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ct(o,l){l=l.checked,l!=null&&R(o,"checked",l,!1)}function ms(o,l){Ct(o,l);var p=Be(l.value),y=l.type;if(p!=null)y==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Tn(o,l.type,p):l.hasOwnProperty("defaultValue")&&Tn(o,l.type,Be(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function c2(o,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,p||l===o.value||(o.value=l),o.defaultValue=l}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function Tn(o,l,p){(l!=="number"||Vt(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var _n=Array.isArray;function Ii(o,l,p,y){if(o=o.options,l){l={};for(var A=0;A<p.length;A++)l["$"+p[A]]=!0;for(p=0;p<o.length;p++)A=l.hasOwnProperty("$"+o[p].value),o[p].selected!==A&&(o[p].selected=A),A&&y&&(o[p].defaultSelected=!0)}else{for(p=""+Be(p),l=null,A=0;A<o.length;A++){if(o[A].value===p){o[A].selected=!0,y&&(o[A].defaultSelected=!0);return}l!==null||o[A].disabled||(l=o[A])}l!==null&&(l.selected=!0)}}function u2(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function d2(o,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(t(92));if(_n(p)){if(1<p.length)throw Error(t(93));p=p[0]}l=p}l==null&&(l=""),p=l}o._wrapperState={initialValue:Be(p)}}function R0(o,l){var p=Be(l.value),y=Be(l.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),l.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),y!=null&&(o.defaultValue=""+y)}function jl(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function h2(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ap(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?h2(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var $l,D0=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,y,A){MSApp.execUnsafeLocalFunction(function(){return o(l,p,y,A)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for($l=$l||document.createElement("div"),$l.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=$l.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Hu(o,l){if(l){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=l;return}}o.textContent=l}var zl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N0=["Webkit","ms","Moz","O"];Object.keys(zl).forEach(function(o){N0.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),zl[l]=zl[o]})});function Hl(o,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||zl.hasOwnProperty(o)&&zl[o]?(""+l).trim():l+"px"}function op(o,l){o=o.style;for(var p in l)if(l.hasOwnProperty(p)){var y=p.indexOf("--")===0,A=Hl(p,l[p],y);p==="float"&&(p="cssFloat"),y?o.setProperty(p,A):o[p]=A}}var p2=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pi(o,l){if(l){if(p2[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function lp(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wl=null;function cp(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ao=null,_o=null,dn=null;function f2(o){if(o=j2(o)){if(typeof Ao!="function")throw Error(t(280));var l=o.stateNode;l&&(l=ov(l),Ao(o.stateNode,o.type,l))}}function Gl(o){_o?dn?dn.push(o):dn=[o]:_o=o}function ql(){if(_o){var o=_o,l=dn;if(dn=_o=null,f2(o),l)for(o=0;o<l.length;o++)f2(l[o])}}function M0(o,l){return o(l)}function L0(){}var ca=!1;function O0(o,l,p){if(ca)return o(l,p);ca=!0;try{return M0(o,l,p)}finally{ca=!1,(_o!==null||dn!==null)&&(L0(),ql())}}function Wu(o,l){var p=o.stateNode;if(p===null)return null;var y=ov(p);if(y===null)return null;p=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(t(231,l,typeof p));return p}var Ql=!1;if(u)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Ql=!1}function B0(o,l,p,y,A,E,M,G,X){var re=Array.prototype.slice.call(arguments,3);try{l.apply(p,re)}catch(he){this.onError(he)}}var xo=!1,ua=null,up=!1,ei=null,V0={onError:function(o){xo=!0,ua=o}};function U0(o,l,p,y,A,E,M,G,X){xo=!1,ua=null,B0.apply(V0,arguments)}function m2(o,l,p,y,A,E,M,G,X){if(U0.apply(this,arguments),xo){if(xo){var re=ua;xo=!1,ua=null}else throw Error(t(198));up||(up=!0,ei=re)}}function Ri(o){var l=o,p=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(p=l.return),o=l.return;while(o)}return l.tag===3?p:null}function g2(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function j0(o){if(Ri(o)!==o)throw Error(t(188))}function $0(o){var l=o.alternate;if(!l){if(l=Ri(o),l===null)throw Error(t(188));return l!==o?null:o}for(var p=o,y=l;;){var A=p.return;if(A===null)break;var E=A.alternate;if(E===null){if(y=A.return,y!==null){p=y;continue}break}if(A.child===E.child){for(E=A.child;E;){if(E===p)return j0(A),o;if(E===y)return j0(A),l;E=E.sibling}throw Error(t(188))}if(p.return!==y.return)p=A,y=E;else{for(var M=!1,G=A.child;G;){if(G===p){M=!0,p=A,y=E;break}if(G===y){M=!0,y=A,p=E;break}G=G.sibling}if(!M){for(G=E.child;G;){if(G===p){M=!0,p=E,y=A;break}if(G===y){M=!0,y=E,p=A;break}G=G.sibling}if(!M)throw Error(t(189))}}if(p.alternate!==y)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?o:l}function z0(o){return o=$0(o),o!==null?Gu(o):null}function Gu(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Gu(o);if(l!==null)return l;o=o.sibling}return null}var y2=e.unstable_scheduleCallback,dp=e.unstable_cancelCallback,qu=e.unstable_shouldYield,Eo=e.unstable_requestPaint,Gt=e.unstable_now,Kx=e.unstable_getCurrentPriorityLevel,hp=e.unstable_ImmediatePriority,w2=e.unstable_UserBlockingPriority,Qu=e.unstable_NormalPriority,v2=e.unstable_LowPriority,pp=e.unstable_IdlePriority,Ku=null,gs=null;function H0(o){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(Ku,o,void 0,(o.current.flags&128)===128)}catch{}}var ys=Math.clz32?Math.clz32:Xu,da=Math.log,ti=Math.LN2;function Xu(o){return o>>>=0,o===0?32:31-(da(o)/ti|0)|0}var ha=64,Xl=4194304;function vt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function bo(o,l){var p=o.pendingLanes;if(p===0)return 0;var y=0,A=o.suspendedLanes,E=o.pingedLanes,M=p&268435455;if(M!==0){var G=M&~A;G!==0?y=vt(G):(E&=M,E!==0&&(y=vt(E)))}else M=p&~A,M!==0?y=vt(M):E!==0&&(y=vt(E));if(y===0)return 0;if(l!==0&&l!==y&&(l&A)===0&&(A=y&-y,E=l&-l,A>=E||A===16&&(E&4194240)!==0))return l;if((y&4)!==0&&(y|=p&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=y;0<l;)p=31-ys(l),A=1<<p,y|=o[p],l&=~A;return y}function Yu(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ju(o,l){for(var p=o.suspendedLanes,y=o.pingedLanes,A=o.expirationTimes,E=o.pendingLanes;0<E;){var M=31-ys(E),G=1<<M,X=A[M];X===-1?((G&p)===0||(G&y)!==0)&&(A[M]=Yu(G,l)):X<=l&&(o.expiredLanes|=G),E&=~G}}function A2(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function _2(){var o=ha;return ha<<=1,(ha&4194240)===0&&(ha=64),o}function x2(o){for(var l=[],p=0;31>p;p++)l.push(o);return l}function Zu(o,l,p){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-ys(l),o[l]=p}function Xx(o,l){var p=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<p;){var A=31-ys(p),E=1<<A;l[A]=0,y[A]=-1,o[A]=-1,p&=~E}}function E2(o,l){var p=o.entangledLanes|=l;for(o=o.entanglements;p;){var y=31-ys(p),A=1<<y;A&l|o[y]&l&&(o[y]|=l),p&=~A}}var ut=0;function pa(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var b2,fp,C2,F2,S2,fa=!1,mp=[],ma=null,ga=null,ir=null,ed=new Map,Co=new Map,ws=[],W0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yl(o,l){switch(o){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":ed.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(l.pointerId)}}function Di(o,l,p,y,A,E){return o===null||o.nativeEvent!==E?(o={blockedOn:l,domEventName:p,eventSystemFlags:y,nativeEvent:E,targetContainers:[A]},l!==null&&(l=j2(l),l!==null&&fp(l)),o):(o.eventSystemFlags|=y,l=o.targetContainers,A!==null&&l.indexOf(A)===-1&&l.push(A),o)}function G0(o,l,p,y,A){switch(l){case"focusin":return ma=Di(ma,o,l,p,y,A),!0;case"dragenter":return ga=Di(ga,o,l,p,y,A),!0;case"mouseover":return ir=Di(ir,o,l,p,y,A),!0;case"pointerover":var E=A.pointerId;return ed.set(E,Di(ed.get(E)||null,o,l,p,y,A)),!0;case"gotpointercapture":return E=A.pointerId,Co.set(E,Di(Co.get(E)||null,o,l,p,y,A)),!0}return!1}function gp(o){var l=sd(o.target);if(l!==null){var p=Ri(l);if(p!==null){if(l=p.tag,l===13){if(l=g2(p),l!==null){o.blockedOn=l,S2(o.priority,function(){C2(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Lt(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var p=yp(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);Wl=y,p.target.dispatchEvent(y),Wl=null}else return l=j2(p),l!==null&&fp(l),o.blockedOn=p,!1;l.shift()}return!0}function q0(o,l,p){Lt(o)&&p.delete(l)}function Yx(){fa=!1,ma!==null&&Lt(ma)&&(ma=null),ga!==null&&Lt(ga)&&(ga=null),ir!==null&&Lt(ir)&&(ir=null),ed.forEach(q0),Co.forEach(q0)}function Jl(o,l){o.blockedOn===l&&(o.blockedOn=null,fa||(fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yx)))}function Zl(o){function l(A){return Jl(A,o)}if(0<mp.length){Jl(mp[0],o);for(var p=1;p<mp.length;p++){var y=mp[p];y.blockedOn===o&&(y.blockedOn=null)}}for(ma!==null&&Jl(ma,o),ga!==null&&Jl(ga,o),ir!==null&&Jl(ir,o),ed.forEach(l),Co.forEach(l),p=0;p<ws.length;p++)y=ws[p],y.blockedOn===o&&(y.blockedOn=null);for(;0<ws.length&&(p=ws[0],p.blockedOn===null);)gp(p),p.blockedOn===null&&ws.shift()}var Fo=V.ReactCurrentBatchConfig,So=!0;function ya(o,l,p,y){var A=ut,E=Fo.transition;Fo.transition=null;try{ut=1,T2(o,l,p,y)}finally{ut=A,Fo.transition=E}}function Q0(o,l,p,y){var A=ut,E=Fo.transition;Fo.transition=null;try{ut=4,T2(o,l,p,y)}finally{ut=A,Fo.transition=E}}function T2(o,l,p,y){if(So){var A=yp(o,l,p,y);if(A===null)l1(o,l,y,wa,p),Yl(o,y);else if(G0(A,o,l,p,y))y.stopPropagation();else if(Yl(o,y),l&4&&-1<W0.indexOf(o)){for(;A!==null;){var E=j2(A);if(E!==null&&b2(E),E=yp(o,l,p,y),E===null&&l1(o,l,y,wa,p),E===A)break;A=E}A!==null&&y.stopPropagation()}else l1(o,l,y,null,p)}}var wa=null;function yp(o,l,p,y){if(wa=null,o=cp(y),o=sd(o),o!==null)if(l=Ri(o),l===null)o=null;else if(p=l.tag,p===13){if(o=g2(l),o!==null)return o;o=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return wa=o,null}function wp(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kx()){case hp:return 1;case w2:return 4;case Qu:case v2:return 16;case pp:return 536870912;default:return 16}default:return 16}}var vs=null,vp=null,To=null;function K0(){if(To)return To;var o,l=vp,p=l.length,y,A="value"in vs?vs.value:vs.textContent,E=A.length;for(o=0;o<p&&l[o]===A[o];o++);var M=p-o;for(y=1;y<=M&&l[p-y]===A[E-y];y++);return To=A.slice(o,1<y?1-y:void 0)}function td(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function va(){return!0}function k2(){return!1}function xr(o){function l(p,y,A,E,M){this._reactName=p,this._targetInst=A,this.type=y,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var G in o)o.hasOwnProperty(G)&&(p=o[G],this[G]=p?p(E):E[G]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?va:k2,this.isPropagationStopped=k2,this}return J(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=va)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=va)},persist:function(){},isPersistent:va}),l}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nd=xr(Aa),ec=J({},Aa,{view:0,detail:0}),Ap=xr(ec),_p,xp,As,rd=J({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ye,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==As&&(As&&o.type==="mousemove"?(_p=o.screenX-As.screenX,xp=o.screenY-As.screenY):xp=_p=0,As=o),_p)},movementY:function(o){return"movementY"in o?o.movementY:xp}}),I2=xr(rd),X0=J({},rd,{dataTransfer:0}),Y0=xr(X0),Ep=J({},ec,{relatedTarget:0}),ar=xr(Ep),J0=J({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),Z0=xr(J0),tc=J({},Aa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),m=xr(tc),b=J({},Aa,{data:0}),k=xr(b),B={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},te={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},se={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ve(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=se[o])?!!l[o]:!1}function Ye(){return ve}var xn=J({},ec,{key:function(o){if(o.key){var l=B[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=td(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?te[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ye,charCode:function(o){return o.type==="keypress"?td(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?td(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Ft=xr(xn),kn=J({},rd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_s=xr(kn),ko=J({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ye}),_a=xr(ko),xa=J({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),bp=xr(xa),P2=J({},rd,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),i4=xr(P2),a4=[9,13,27,32],Jx=u&&"CompositionEvent"in window,R2=null;u&&"documentMode"in document&&(R2=document.documentMode);var o4=u&&"TextEvent"in window&&!R2,iT=u&&(!Jx||R2&&8<R2&&11>=R2),aT=" ",oT=!1;function lT(o,l){switch(o){case"keyup":return a4.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cT(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Cp=!1;function l4(o,l){switch(o){case"compositionend":return cT(l);case"keypress":return l.which!==32?null:(oT=!0,aT);case"textInput":return o=l.data,o===aT&&oT?null:o;default:return null}}function c4(o,l){if(Cp)return o==="compositionend"||!Jx&&lT(o,l)?(o=K0(),To=vp=vs=null,Cp=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return iT&&l.locale!=="ko"?null:l.data;default:return null}}var u4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uT(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!u4[o.type]:l==="textarea"}function dT(o,l,p,y){Gl(y),l=sv(l,"onChange"),0<l.length&&(p=new nd("onChange","change",null,p,y),o.push({event:p,listeners:l}))}var D2=null,N2=null;function d4(o){kT(o,0)}function ev(o){var l=Ip(o);if(Wt(l))return o}function h4(o,l){if(o==="change")return l}var hT=!1;if(u){var Zx;if(u){var e1="oninput"in document;if(!e1){var pT=document.createElement("div");pT.setAttribute("oninput","return;"),e1=typeof pT.oninput=="function"}Zx=e1}else Zx=!1;hT=Zx&&(!document.documentMode||9<document.documentMode)}function fT(){D2&&(D2.detachEvent("onpropertychange",mT),N2=D2=null)}function mT(o){if(o.propertyName==="value"&&ev(N2)){var l=[];dT(l,N2,o,cp(o)),O0(d4,l)}}function p4(o,l,p){o==="focusin"?(fT(),D2=l,N2=p,D2.attachEvent("onpropertychange",mT)):o==="focusout"&&fT()}function f4(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ev(N2)}function m4(o,l){if(o==="click")return ev(l)}function g4(o,l){if(o==="input"||o==="change")return ev(l)}function y4(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Ni=typeof Object.is=="function"?Object.is:y4;function M2(o,l){if(Ni(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var p=Object.keys(o),y=Object.keys(l);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var A=p[y];if(!d.call(l,A)||!Ni(o[A],l[A]))return!1}return!0}function gT(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function yT(o,l){var p=gT(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=l&&y>=l)return{node:p,offset:l-o};o=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=gT(p)}}function wT(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?wT(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function vT(){for(var o=window,l=Vt();l instanceof o.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)o=l.contentWindow;else break;l=Vt(o.document)}return l}function t1(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function w4(o){var l=vT(),p=o.focusedElem,y=o.selectionRange;if(l!==p&&p&&p.ownerDocument&&wT(p.ownerDocument.documentElement,p)){if(y!==null&&t1(p)){if(l=y.start,o=y.end,o===void 0&&(o=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(o,p.value.length);else if(o=(l=p.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var A=p.textContent.length,E=Math.min(y.start,A);y=y.end===void 0?E:Math.min(y.end,A),!o.extend&&E>y&&(A=y,y=E,E=A),A=yT(p,E);var M=yT(p,y);A&&M&&(o.rangeCount!==1||o.anchorNode!==A.node||o.anchorOffset!==A.offset||o.focusNode!==M.node||o.focusOffset!==M.offset)&&(l=l.createRange(),l.setStart(A.node,A.offset),o.removeAllRanges(),E>y?(o.addRange(l),o.extend(M.node,M.offset)):(l.setEnd(M.node,M.offset),o.addRange(l)))}}for(l=[],o=p;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)o=l[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var v4=u&&"documentMode"in document&&11>=document.documentMode,Fp=null,n1=null,L2=null,r1=!1;function AT(o,l,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;r1||Fp==null||Fp!==Vt(y)||(y=Fp,"selectionStart"in y&&t1(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),L2&&M2(L2,y)||(L2=y,y=sv(n1,"onSelect"),0<y.length&&(l=new nd("onSelect","select",null,l,p),o.push({event:l,listeners:y}),l.target=Fp)))}function tv(o,l){var p={};return p[o.toLowerCase()]=l.toLowerCase(),p["Webkit"+o]="webkit"+l,p["Moz"+o]="moz"+l,p}var Sp={animationend:tv("Animation","AnimationEnd"),animationiteration:tv("Animation","AnimationIteration"),animationstart:tv("Animation","AnimationStart"),transitionend:tv("Transition","TransitionEnd")},s1={},_T={};u&&(_T=document.createElement("div").style,"AnimationEvent"in window||(delete Sp.animationend.animation,delete Sp.animationiteration.animation,delete Sp.animationstart.animation),"TransitionEvent"in window||delete Sp.transitionend.transition);function nv(o){if(s1[o])return s1[o];if(!Sp[o])return o;var l=Sp[o],p;for(p in l)if(l.hasOwnProperty(p)&&p in _T)return s1[o]=l[p];return o}var xT=nv("animationend"),ET=nv("animationiteration"),bT=nv("animationstart"),CT=nv("transitionend"),FT=new Map,ST="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nc(o,l){FT.set(o,l),i(l,[o])}for(var i1=0;i1<ST.length;i1++){var a1=ST[i1],A4=a1.toLowerCase(),_4=a1[0].toUpperCase()+a1.slice(1);nc(A4,"on"+_4)}nc(xT,"onAnimationEnd"),nc(ET,"onAnimationIteration"),nc(bT,"onAnimationStart"),nc("dblclick","onDoubleClick"),nc("focusin","onFocus"),nc("focusout","onBlur"),nc(CT,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var O2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x4=new Set("cancel close invalid load scroll toggle".split(" ").concat(O2));function TT(o,l,p){var y=o.type||"unknown-event";o.currentTarget=p,m2(y,l,void 0,o),o.currentTarget=null}function kT(o,l){l=(l&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],A=y.event;y=y.listeners;e:{var E=void 0;if(l)for(var M=y.length-1;0<=M;M--){var G=y[M],X=G.instance,re=G.currentTarget;if(G=G.listener,X!==E&&A.isPropagationStopped())break e;TT(A,G,re),E=X}else for(M=0;M<y.length;M++){if(G=y[M],X=G.instance,re=G.currentTarget,G=G.listener,X!==E&&A.isPropagationStopped())break e;TT(A,G,re),E=X}}}if(up)throw o=ei,up=!1,ei=null,o}function qt(o,l){var p=l[f1];p===void 0&&(p=l[f1]=new Set);var y=o+"__bubble";p.has(y)||(IT(l,o,2,!1),p.add(y))}function o1(o,l,p){var y=0;l&&(y|=4),IT(p,o,y,l)}var rv="_reactListening"+Math.random().toString(36).slice(2);function B2(o){if(!o[rv]){o[rv]=!0,n.forEach(function(p){p!=="selectionchange"&&(x4.has(p)||o1(p,!1,o),o1(p,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[rv]||(l[rv]=!0,o1("selectionchange",!1,l))}}function IT(o,l,p,y){switch(wp(l)){case 1:var A=ya;break;case 4:A=Q0;break;default:A=T2}p=A.bind(null,l,p,o),A=void 0,!Ql||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(A=!0),y?A!==void 0?o.addEventListener(l,p,{capture:!0,passive:A}):o.addEventListener(l,p,!0):A!==void 0?o.addEventListener(l,p,{passive:A}):o.addEventListener(l,p,!1)}function l1(o,l,p,y,A){var E=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var M=y.tag;if(M===3||M===4){var G=y.stateNode.containerInfo;if(G===A||G.nodeType===8&&G.parentNode===A)break;if(M===4)for(M=y.return;M!==null;){var X=M.tag;if((X===3||X===4)&&(X=M.stateNode.containerInfo,X===A||X.nodeType===8&&X.parentNode===A))return;M=M.return}for(;G!==null;){if(M=sd(G),M===null)return;if(X=M.tag,X===5||X===6){y=E=M;continue e}G=G.parentNode}}y=y.return}O0(function(){var re=E,he=cp(p),pe=[];e:{var de=FT.get(o);if(de!==void 0){var Te=nd,De=o;switch(o){case"keypress":if(td(p)===0)break e;case"keydown":case"keyup":Te=Ft;break;case"focusin":De="focus",Te=ar;break;case"focusout":De="blur",Te=ar;break;case"beforeblur":case"afterblur":Te=ar;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=I2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=Y0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=_a;break;case xT:case ET:case bT:Te=Z0;break;case CT:Te=bp;break;case"scroll":Te=Ap;break;case"wheel":Te=i4;break;case"copy":case"cut":case"paste":Te=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=_s}var Ne=(l&4)!==0,En=!Ne&&o==="scroll",ee=Ne?de!==null?de+"Capture":null:de;Ne=[];for(var Y=re,ne;Y!==null;){ne=Y;var ge=ne.stateNode;if(ne.tag===5&&ge!==null&&(ne=ge,ee!==null&&(ge=Wu(Y,ee),ge!=null&&Ne.push(V2(Y,ge,ne)))),En)break;Y=Y.return}0<Ne.length&&(de=new Te(de,De,null,p,he),pe.push({event:de,listeners:Ne}))}}if((l&7)===0){e:{if(de=o==="mouseover"||o==="pointerover",Te=o==="mouseout"||o==="pointerout",de&&p!==Wl&&(De=p.relatedTarget||p.fromElement)&&(sd(De)||De[Io]))break e;if((Te||de)&&(de=he.window===he?he:(de=he.ownerDocument)?de.defaultView||de.parentWindow:window,Te?(De=p.relatedTarget||p.toElement,Te=re,De=De?sd(De):null,De!==null&&(En=Ri(De),De!==En||De.tag!==5&&De.tag!==6)&&(De=null)):(Te=null,De=re),Te!==De)){if(Ne=I2,ge="onMouseLeave",ee="onMouseEnter",Y="mouse",(o==="pointerout"||o==="pointerover")&&(Ne=_s,ge="onPointerLeave",ee="onPointerEnter",Y="pointer"),En=Te==null?de:Ip(Te),ne=De==null?de:Ip(De),de=new Ne(ge,Y+"leave",Te,p,he),de.target=En,de.relatedTarget=ne,ge=null,sd(he)===re&&(Ne=new Ne(ee,Y+"enter",De,p,he),Ne.target=ne,Ne.relatedTarget=En,ge=Ne),En=ge,Te&&De)t:{for(Ne=Te,ee=De,Y=0,ne=Ne;ne;ne=Tp(ne))Y++;for(ne=0,ge=ee;ge;ge=Tp(ge))ne++;for(;0<Y-ne;)Ne=Tp(Ne),Y--;for(;0<ne-Y;)ee=Tp(ee),ne--;for(;Y--;){if(Ne===ee||ee!==null&&Ne===ee.alternate)break t;Ne=Tp(Ne),ee=Tp(ee)}Ne=null}else Ne=null;Te!==null&&PT(pe,de,Te,Ne,!1),De!==null&&En!==null&&PT(pe,En,De,Ne,!0)}}e:{if(de=re?Ip(re):window,Te=de.nodeName&&de.nodeName.toLowerCase(),Te==="select"||Te==="input"&&de.type==="file")var Oe=h4;else if(uT(de))if(hT)Oe=g4;else{Oe=f4;var Ue=p4}else(Te=de.nodeName)&&Te.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(Oe=m4);if(Oe&&(Oe=Oe(o,re))){dT(pe,Oe,p,he);break e}Ue&&Ue(o,de,re),o==="focusout"&&(Ue=de._wrapperState)&&Ue.controlled&&de.type==="number"&&Tn(de,"number",de.value)}switch(Ue=re?Ip(re):window,o){case"focusin":(uT(Ue)||Ue.contentEditable==="true")&&(Fp=Ue,n1=re,L2=null);break;case"focusout":L2=n1=Fp=null;break;case"mousedown":r1=!0;break;case"contextmenu":case"mouseup":case"dragend":r1=!1,AT(pe,p,he);break;case"selectionchange":if(v4)break;case"keydown":case"keyup":AT(pe,p,he)}var je;if(Jx)e:{switch(o){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Cp?lT(o,p)&&(Ge="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Ge="onCompositionStart");Ge&&(iT&&p.locale!=="ko"&&(Cp||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Cp&&(je=K0()):(vs=he,vp="value"in vs?vs.value:vs.textContent,Cp=!0)),Ue=sv(re,Ge),0<Ue.length&&(Ge=new k(Ge,o,null,p,he),pe.push({event:Ge,listeners:Ue}),je?Ge.data=je:(je=cT(p),je!==null&&(Ge.data=je)))),(je=o4?l4(o,p):c4(o,p))&&(re=sv(re,"onBeforeInput"),0<re.length&&(he=new k("onBeforeInput","beforeinput",null,p,he),pe.push({event:he,listeners:re}),he.data=je))}kT(pe,l)})}function V2(o,l,p){return{instance:o,listener:l,currentTarget:p}}function sv(o,l){for(var p=l+"Capture",y=[];o!==null;){var A=o,E=A.stateNode;A.tag===5&&E!==null&&(A=E,E=Wu(o,p),E!=null&&y.unshift(V2(o,E,A)),E=Wu(o,l),E!=null&&y.push(V2(o,E,A))),o=o.return}return y}function Tp(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function PT(o,l,p,y,A){for(var E=l._reactName,M=[];p!==null&&p!==y;){var G=p,X=G.alternate,re=G.stateNode;if(X!==null&&X===y)break;G.tag===5&&re!==null&&(G=re,A?(X=Wu(p,E),X!=null&&M.unshift(V2(p,X,G))):A||(X=Wu(p,E),X!=null&&M.push(V2(p,X,G)))),p=p.return}M.length!==0&&o.push({event:l,listeners:M})}var E4=/\r\n?/g,b4=/\u0000|\uFFFD/g;function RT(o){return(typeof o=="string"?o:""+o).replace(E4,`
`).replace(b4,"")}function iv(o,l,p){if(l=RT(l),RT(o)!==l&&p)throw Error(t(425))}function av(){}var c1=null,u1=null;function d1(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var h1=typeof setTimeout=="function"?setTimeout:void 0,C4=typeof clearTimeout=="function"?clearTimeout:void 0,DT=typeof Promise=="function"?Promise:void 0,F4=typeof queueMicrotask=="function"?queueMicrotask:typeof DT<"u"?function(o){return DT.resolve(null).then(o).catch(S4)}:h1;function S4(o){setTimeout(function(){throw o})}function p1(o,l){var p=l,y=0;do{var A=p.nextSibling;if(o.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"){if(y===0){o.removeChild(A),Zl(l);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=A}while(p);Zl(l)}function rc(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function NT(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return o;l--}else p==="/$"&&l++}o=o.previousSibling}return null}var kp=Math.random().toString(36).slice(2),Ea="__reactFiber$"+kp,U2="__reactProps$"+kp,Io="__reactContainer$"+kp,f1="__reactEvents$"+kp,T4="__reactListeners$"+kp,k4="__reactHandles$"+kp;function sd(o){var l=o[Ea];if(l)return l;for(var p=o.parentNode;p;){if(l=p[Io]||p[Ea]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(o=NT(o);o!==null;){if(p=o[Ea])return p;o=NT(o)}return l}o=p,p=o.parentNode}return null}function j2(o){return o=o[Ea]||o[Io],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Ip(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function ov(o){return o[U2]||null}var m1=[],Pp=-1;function sc(o){return{current:o}}function Qt(o){0>Pp||(o.current=m1[Pp],m1[Pp]=null,Pp--)}function Ut(o,l){Pp++,m1[Pp]=o.current,o.current=l}var ic={},Er=sc(ic),Xr=sc(!1),id=ic;function Rp(o,l){var p=o.type.contextTypes;if(!p)return ic;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var A={},E;for(E in p)A[E]=l[E];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=A),A}function Yr(o){return o=o.childContextTypes,o!=null}function lv(){Qt(Xr),Qt(Er)}function MT(o,l,p){if(Er.current!==ic)throw Error(t(168));Ut(Er,l),Ut(Xr,p)}function LT(o,l,p){var y=o.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var A in y)if(!(A in l))throw Error(t(108,Se(o)||"Unknown",A));return J({},p,y)}function cv(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ic,id=Er.current,Ut(Er,o),Ut(Xr,Xr.current),!0}function OT(o,l,p){var y=o.stateNode;if(!y)throw Error(t(169));p?(o=LT(o,l,id),y.__reactInternalMemoizedMergedChildContext=o,Qt(Xr),Qt(Er),Ut(Er,o)):Qt(Xr),Ut(Xr,p)}var Po=null,uv=!1,g1=!1;function BT(o){Po===null?Po=[o]:Po.push(o)}function I4(o){uv=!0,BT(o)}function ac(){if(!g1&&Po!==null){g1=!0;var o=0,l=ut;try{var p=Po;for(ut=1;o<p.length;o++){var y=p[o];do y=y(!0);while(y!==null)}Po=null,uv=!1}catch(A){throw Po!==null&&(Po=Po.slice(o+1)),y2(hp,ac),A}finally{ut=l,g1=!1}}return null}var Dp=[],Np=0,dv=null,hv=0,ni=[],ri=0,ad=null,Ro=1,Do="";function od(o,l){Dp[Np++]=hv,Dp[Np++]=dv,dv=o,hv=l}function VT(o,l,p){ni[ri++]=Ro,ni[ri++]=Do,ni[ri++]=ad,ad=o;var y=Ro;o=Do;var A=32-ys(y)-1;y&=~(1<<A),p+=1;var E=32-ys(l)+A;if(30<E){var M=A-A%5;E=(y&(1<<M)-1).toString(32),y>>=M,A-=M,Ro=1<<32-ys(l)+A|p<<A|y,Do=E+o}else Ro=1<<E|p<<A|y,Do=o}function y1(o){o.return!==null&&(od(o,1),VT(o,1,0))}function w1(o){for(;o===dv;)dv=Dp[--Np],Dp[Np]=null,hv=Dp[--Np],Dp[Np]=null;for(;o===ad;)ad=ni[--ri],ni[ri]=null,Do=ni[--ri],ni[ri]=null,Ro=ni[--ri],ni[ri]=null}var xs=null,Es=null,Yt=!1,Mi=null;function UT(o,l){var p=oi(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=o,l=o.deletions,l===null?(o.deletions=[p],o.flags|=16):l.push(p)}function jT(o,l){switch(o.tag){case 5:var p=o.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,xs=o,Es=rc(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,xs=o,Es=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=ad!==null?{id:Ro,overflow:Do}:null,o.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=oi(18,null,null,0),p.stateNode=l,p.return=o,o.child=p,xs=o,Es=null,!0):!1;default:return!1}}function v1(o){return(o.mode&1)!==0&&(o.flags&128)===0}function A1(o){if(Yt){var l=Es;if(l){var p=l;if(!jT(o,l)){if(v1(o))throw Error(t(418));l=rc(p.nextSibling);var y=xs;l&&jT(o,l)?UT(y,p):(o.flags=o.flags&-4097|2,Yt=!1,xs=o)}}else{if(v1(o))throw Error(t(418));o.flags=o.flags&-4097|2,Yt=!1,xs=o}}}function $T(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xs=o}function pv(o){if(o!==xs)return!1;if(!Yt)return $T(o),Yt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!d1(o.type,o.memoizedProps)),l&&(l=Es)){if(v1(o))throw zT(),Error(t(418));for(;l;)UT(o,l),l=rc(l.nextSibling)}if($T(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(l===0){Es=rc(o.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}o=o.nextSibling}Es=null}}else Es=xs?rc(o.stateNode.nextSibling):null;return!0}function zT(){for(var o=Es;o;)o=rc(o.nextSibling)}function Mp(){Es=xs=null,Yt=!1}function _1(o){Mi===null?Mi=[o]:Mi.push(o)}var P4=V.ReactCurrentBatchConfig;function $2(o,l,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,o));var A=y,E=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(M){var G=A.refs;M===null?delete G[E]:G[E]=M},l._stringRef=E,l)}if(typeof o!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,o))}return o}function fv(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function HT(o){var l=o._init;return l(o._payload)}function WT(o){function l(ee,Y){if(o){var ne=ee.deletions;ne===null?(ee.deletions=[Y],ee.flags|=16):ne.push(Y)}}function p(ee,Y){if(!o)return null;for(;Y!==null;)l(ee,Y),Y=Y.sibling;return null}function y(ee,Y){for(ee=new Map;Y!==null;)Y.key!==null?ee.set(Y.key,Y):ee.set(Y.index,Y),Y=Y.sibling;return ee}function A(ee,Y){return ee=fc(ee,Y),ee.index=0,ee.sibling=null,ee}function E(ee,Y,ne){return ee.index=ne,o?(ne=ee.alternate,ne!==null?(ne=ne.index,ne<Y?(ee.flags|=2,Y):ne):(ee.flags|=2,Y)):(ee.flags|=1048576,Y)}function M(ee){return o&&ee.alternate===null&&(ee.flags|=2),ee}function G(ee,Y,ne,ge){return Y===null||Y.tag!==6?(Y=hE(ne,ee.mode,ge),Y.return=ee,Y):(Y=A(Y,ne),Y.return=ee,Y)}function X(ee,Y,ne,ge){var Oe=ne.type;return Oe===N?he(ee,Y,ne.props.children,ge,ne.key):Y!==null&&(Y.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===we&&HT(Oe)===Y.type)?(ge=A(Y,ne.props),ge.ref=$2(ee,Y,ne),ge.return=ee,ge):(ge=Bv(ne.type,ne.key,ne.props,null,ee.mode,ge),ge.ref=$2(ee,Y,ne),ge.return=ee,ge)}function re(ee,Y,ne,ge){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ne.containerInfo||Y.stateNode.implementation!==ne.implementation?(Y=pE(ne,ee.mode,ge),Y.return=ee,Y):(Y=A(Y,ne.children||[]),Y.return=ee,Y)}function he(ee,Y,ne,ge,Oe){return Y===null||Y.tag!==7?(Y=md(ne,ee.mode,ge,Oe),Y.return=ee,Y):(Y=A(Y,ne),Y.return=ee,Y)}function pe(ee,Y,ne){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=hE(""+Y,ee.mode,ne),Y.return=ee,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case z:return ne=Bv(Y.type,Y.key,Y.props,null,ee.mode,ne),ne.ref=$2(ee,null,Y),ne.return=ee,ne;case W:return Y=pE(Y,ee.mode,ne),Y.return=ee,Y;case we:var ge=Y._init;return pe(ee,ge(Y._payload),ne)}if(_n(Y)||Z(Y))return Y=md(Y,ee.mode,ne,null),Y.return=ee,Y;fv(ee,Y)}return null}function de(ee,Y,ne,ge){var Oe=Y!==null?Y.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return Oe!==null?null:G(ee,Y,""+ne,ge);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case z:return ne.key===Oe?X(ee,Y,ne,ge):null;case W:return ne.key===Oe?re(ee,Y,ne,ge):null;case we:return Oe=ne._init,de(ee,Y,Oe(ne._payload),ge)}if(_n(ne)||Z(ne))return Oe!==null?null:he(ee,Y,ne,ge,null);fv(ee,ne)}return null}function Te(ee,Y,ne,ge,Oe){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ee=ee.get(ne)||null,G(Y,ee,""+ge,Oe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case z:return ee=ee.get(ge.key===null?ne:ge.key)||null,X(Y,ee,ge,Oe);case W:return ee=ee.get(ge.key===null?ne:ge.key)||null,re(Y,ee,ge,Oe);case we:var Ue=ge._init;return Te(ee,Y,ne,Ue(ge._payload),Oe)}if(_n(ge)||Z(ge))return ee=ee.get(ne)||null,he(Y,ee,ge,Oe,null);fv(Y,ge)}return null}function De(ee,Y,ne,ge){for(var Oe=null,Ue=null,je=Y,Ge=Y=0,Xn=null;je!==null&&Ge<ne.length;Ge++){je.index>Ge?(Xn=je,je=null):Xn=je.sibling;var yt=de(ee,je,ne[Ge],ge);if(yt===null){je===null&&(je=Xn);break}o&&je&&yt.alternate===null&&l(ee,je),Y=E(yt,Y,Ge),Ue===null?Oe=yt:Ue.sibling=yt,Ue=yt,je=Xn}if(Ge===ne.length)return p(ee,je),Yt&&od(ee,Ge),Oe;if(je===null){for(;Ge<ne.length;Ge++)je=pe(ee,ne[Ge],ge),je!==null&&(Y=E(je,Y,Ge),Ue===null?Oe=je:Ue.sibling=je,Ue=je);return Yt&&od(ee,Ge),Oe}for(je=y(ee,je);Ge<ne.length;Ge++)Xn=Te(je,ee,Ge,ne[Ge],ge),Xn!==null&&(o&&Xn.alternate!==null&&je.delete(Xn.key===null?Ge:Xn.key),Y=E(Xn,Y,Ge),Ue===null?Oe=Xn:Ue.sibling=Xn,Ue=Xn);return o&&je.forEach(function(mc){return l(ee,mc)}),Yt&&od(ee,Ge),Oe}function Ne(ee,Y,ne,ge){var Oe=Z(ne);if(typeof Oe!="function")throw Error(t(150));if(ne=Oe.call(ne),ne==null)throw Error(t(151));for(var Ue=Oe=null,je=Y,Ge=Y=0,Xn=null,yt=ne.next();je!==null&&!yt.done;Ge++,yt=ne.next()){je.index>Ge?(Xn=je,je=null):Xn=je.sibling;var mc=de(ee,je,yt.value,ge);if(mc===null){je===null&&(je=Xn);break}o&&je&&mc.alternate===null&&l(ee,je),Y=E(mc,Y,Ge),Ue===null?Oe=mc:Ue.sibling=mc,Ue=mc,je=Xn}if(yt.done)return p(ee,je),Yt&&od(ee,Ge),Oe;if(je===null){for(;!yt.done;Ge++,yt=ne.next())yt=pe(ee,yt.value,ge),yt!==null&&(Y=E(yt,Y,Ge),Ue===null?Oe=yt:Ue.sibling=yt,Ue=yt);return Yt&&od(ee,Ge),Oe}for(je=y(ee,je);!yt.done;Ge++,yt=ne.next())yt=Te(je,ee,Ge,yt.value,ge),yt!==null&&(o&&yt.alternate!==null&&je.delete(yt.key===null?Ge:yt.key),Y=E(yt,Y,Ge),Ue===null?Oe=yt:Ue.sibling=yt,Ue=yt);return o&&je.forEach(function(u7){return l(ee,u7)}),Yt&&od(ee,Ge),Oe}function En(ee,Y,ne,ge){if(typeof ne=="object"&&ne!==null&&ne.type===N&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case z:e:{for(var Oe=ne.key,Ue=Y;Ue!==null;){if(Ue.key===Oe){if(Oe=ne.type,Oe===N){if(Ue.tag===7){p(ee,Ue.sibling),Y=A(Ue,ne.props.children),Y.return=ee,ee=Y;break e}}else if(Ue.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===we&&HT(Oe)===Ue.type){p(ee,Ue.sibling),Y=A(Ue,ne.props),Y.ref=$2(ee,Ue,ne),Y.return=ee,ee=Y;break e}p(ee,Ue);break}else l(ee,Ue);Ue=Ue.sibling}ne.type===N?(Y=md(ne.props.children,ee.mode,ge,ne.key),Y.return=ee,ee=Y):(ge=Bv(ne.type,ne.key,ne.props,null,ee.mode,ge),ge.ref=$2(ee,Y,ne),ge.return=ee,ee=ge)}return M(ee);case W:e:{for(Ue=ne.key;Y!==null;){if(Y.key===Ue)if(Y.tag===4&&Y.stateNode.containerInfo===ne.containerInfo&&Y.stateNode.implementation===ne.implementation){p(ee,Y.sibling),Y=A(Y,ne.children||[]),Y.return=ee,ee=Y;break e}else{p(ee,Y);break}else l(ee,Y);Y=Y.sibling}Y=pE(ne,ee.mode,ge),Y.return=ee,ee=Y}return M(ee);case we:return Ue=ne._init,En(ee,Y,Ue(ne._payload),ge)}if(_n(ne))return De(ee,Y,ne,ge);if(Z(ne))return Ne(ee,Y,ne,ge);fv(ee,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,Y!==null&&Y.tag===6?(p(ee,Y.sibling),Y=A(Y,ne),Y.return=ee,ee=Y):(p(ee,Y),Y=hE(ne,ee.mode,ge),Y.return=ee,ee=Y),M(ee)):p(ee,Y)}return En}var Lp=WT(!0),GT=WT(!1),mv=sc(null),gv=null,Op=null,x1=null;function E1(){x1=Op=gv=null}function b1(o){var l=mv.current;Qt(mv),o._currentValue=l}function C1(o,l,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),o===p)break;o=o.return}}function Bp(o,l){gv=o,x1=Op=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Jr=!0),o.firstContext=null)}function si(o){var l=o._currentValue;if(x1!==o)if(o={context:o,memoizedValue:l,next:null},Op===null){if(gv===null)throw Error(t(308));Op=o,gv.dependencies={lanes:0,firstContext:o}}else Op=Op.next=o;return l}var ld=null;function F1(o){ld===null?ld=[o]:ld.push(o)}function qT(o,l,p,y){var A=l.interleaved;return A===null?(p.next=p,F1(l)):(p.next=A.next,A.next=p),l.interleaved=p,No(o,y)}function No(o,l){o.lanes|=l;var p=o.alternate;for(p!==null&&(p.lanes|=l),p=o,o=o.return;o!==null;)o.childLanes|=l,p=o.alternate,p!==null&&(p.childLanes|=l),p=o,o=o.return;return p.tag===3?p.stateNode:null}var oc=!1;function S1(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QT(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Mo(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function lc(o,l,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(ft&2)!==0){var A=y.pending;return A===null?l.next=l:(l.next=A.next,A.next=l),y.pending=l,No(o,p)}return A=y.interleaved,A===null?(l.next=l,F1(y)):(l.next=A.next,A.next=l),y.interleaved=l,No(o,p)}function yv(o,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var y=l.lanes;y&=o.pendingLanes,p|=y,l.lanes=p,E2(o,p)}}function KT(o,l){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var A=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var M={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};E===null?A=E=M:E=E.next=M,p=p.next}while(p!==null);E===null?A=E=l:E=E.next=l}else A=E=l;p={baseState:y.baseState,firstBaseUpdate:A,lastBaseUpdate:E,shared:y.shared,effects:y.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=l:o.next=l,p.lastBaseUpdate=l}function wv(o,l,p,y){var A=o.updateQueue;oc=!1;var E=A.firstBaseUpdate,M=A.lastBaseUpdate,G=A.shared.pending;if(G!==null){A.shared.pending=null;var X=G,re=X.next;X.next=null,M===null?E=re:M.next=re,M=X;var he=o.alternate;he!==null&&(he=he.updateQueue,G=he.lastBaseUpdate,G!==M&&(G===null?he.firstBaseUpdate=re:G.next=re,he.lastBaseUpdate=X))}if(E!==null){var pe=A.baseState;M=0,he=re=X=null,G=E;do{var de=G.lane,Te=G.eventTime;if((y&de)===de){he!==null&&(he=he.next={eventTime:Te,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var De=o,Ne=G;switch(de=l,Te=p,Ne.tag){case 1:if(De=Ne.payload,typeof De=="function"){pe=De.call(Te,pe,de);break e}pe=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ne.payload,de=typeof De=="function"?De.call(Te,pe,de):De,de==null)break e;pe=J({},pe,de);break e;case 2:oc=!0}}G.callback!==null&&G.lane!==0&&(o.flags|=64,de=A.effects,de===null?A.effects=[G]:de.push(G))}else Te={eventTime:Te,lane:de,tag:G.tag,payload:G.payload,callback:G.callback,next:null},he===null?(re=he=Te,X=pe):he=he.next=Te,M|=de;if(G=G.next,G===null){if(G=A.shared.pending,G===null)break;de=G,G=de.next,de.next=null,A.lastBaseUpdate=de,A.shared.pending=null}}while(!0);if(he===null&&(X=pe),A.baseState=X,A.firstBaseUpdate=re,A.lastBaseUpdate=he,l=A.shared.interleaved,l!==null){A=l;do M|=A.lane,A=A.next;while(A!==l)}else E===null&&(A.shared.lanes=0);dd|=M,o.lanes=M,o.memoizedState=pe}}function XT(o,l,p){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var y=o[l],A=y.callback;if(A!==null){if(y.callback=null,y=p,typeof A!="function")throw Error(t(191,A));A.call(y)}}}var z2={},ba=sc(z2),H2=sc(z2),W2=sc(z2);function cd(o){if(o===z2)throw Error(t(174));return o}function T1(o,l){switch(Ut(W2,l),Ut(H2,o),Ut(ba,z2),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:ap(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=ap(l,o)}Qt(ba),Ut(ba,l)}function Vp(){Qt(ba),Qt(H2),Qt(W2)}function YT(o){cd(W2.current);var l=cd(ba.current),p=ap(l,o.type);l!==p&&(Ut(H2,o),Ut(ba,p))}function k1(o){H2.current===o&&(Qt(ba),Qt(H2))}var rn=sc(0);function vv(o){for(var l=o;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var I1=[];function P1(){for(var o=0;o<I1.length;o++)I1[o]._workInProgressVersionPrimary=null;I1.length=0}var Av=V.ReactCurrentDispatcher,R1=V.ReactCurrentBatchConfig,ud=0,sn=null,Vn=null,Qn=null,_v=!1,G2=!1,q2=0,R4=0;function br(){throw Error(t(321))}function D1(o,l){if(l===null)return!1;for(var p=0;p<l.length&&p<o.length;p++)if(!Ni(o[p],l[p]))return!1;return!0}function N1(o,l,p,y,A,E){if(ud=E,sn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Av.current=o===null||o.memoizedState===null?L4:O4,o=p(y,A),G2){E=0;do{if(G2=!1,q2=0,25<=E)throw Error(t(301));E+=1,Qn=Vn=null,l.updateQueue=null,Av.current=B4,o=p(y,A)}while(G2)}if(Av.current=bv,l=Vn!==null&&Vn.next!==null,ud=0,Qn=Vn=sn=null,_v=!1,l)throw Error(t(300));return o}function M1(){var o=q2!==0;return q2=0,o}function Ca(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?sn.memoizedState=Qn=o:Qn=Qn.next=o,Qn}function ii(){if(Vn===null){var o=sn.alternate;o=o!==null?o.memoizedState:null}else o=Vn.next;var l=Qn===null?sn.memoizedState:Qn.next;if(l!==null)Qn=l,Vn=o;else{if(o===null)throw Error(t(310));Vn=o,o={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Qn===null?sn.memoizedState=Qn=o:Qn=Qn.next=o}return Qn}function Q2(o,l){return typeof l=="function"?l(o):l}function L1(o){var l=ii(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var y=Vn,A=y.baseQueue,E=p.pending;if(E!==null){if(A!==null){var M=A.next;A.next=E.next,E.next=M}y.baseQueue=A=E,p.pending=null}if(A!==null){E=A.next,y=y.baseState;var G=M=null,X=null,re=E;do{var he=re.lane;if((ud&he)===he)X!==null&&(X=X.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),y=re.hasEagerState?re.eagerState:o(y,re.action);else{var pe={lane:he,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};X===null?(G=X=pe,M=y):X=X.next=pe,sn.lanes|=he,dd|=he}re=re.next}while(re!==null&&re!==E);X===null?M=y:X.next=G,Ni(y,l.memoizedState)||(Jr=!0),l.memoizedState=y,l.baseState=M,l.baseQueue=X,p.lastRenderedState=y}if(o=p.interleaved,o!==null){A=o;do E=A.lane,sn.lanes|=E,dd|=E,A=A.next;while(A!==o)}else A===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function O1(o){var l=ii(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var y=p.dispatch,A=p.pending,E=l.memoizedState;if(A!==null){p.pending=null;var M=A=A.next;do E=o(E,M.action),M=M.next;while(M!==A);Ni(E,l.memoizedState)||(Jr=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),p.lastRenderedState=E}return[E,y]}function JT(){}function ZT(o,l){var p=sn,y=ii(),A=l(),E=!Ni(y.memoizedState,A);if(E&&(y.memoizedState=A,Jr=!0),y=y.queue,B1(nk.bind(null,p,y,o),[o]),y.getSnapshot!==l||E||Qn!==null&&Qn.memoizedState.tag&1){if(p.flags|=2048,K2(9,tk.bind(null,p,y,A,l),void 0,null),Kn===null)throw Error(t(349));(ud&30)!==0||ek(p,l,A)}return A}function ek(o,l,p){o.flags|=16384,o={getSnapshot:l,value:p},l=sn.updateQueue,l===null?(l={lastEffect:null,stores:null},sn.updateQueue=l,l.stores=[o]):(p=l.stores,p===null?l.stores=[o]:p.push(o))}function tk(o,l,p,y){l.value=p,l.getSnapshot=y,rk(l)&&sk(o)}function nk(o,l,p){return p(function(){rk(l)&&sk(o)})}function rk(o){var l=o.getSnapshot;o=o.value;try{var p=l();return!Ni(o,p)}catch{return!0}}function sk(o){var l=No(o,1);l!==null&&Vi(l,o,1,-1)}function ik(o){var l=Ca();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Q2,lastRenderedState:o},l.queue=o,o=o.dispatch=M4.bind(null,sn,o),[l.memoizedState,o]}function K2(o,l,p,y){return o={tag:o,create:l,destroy:p,deps:y,next:null},l=sn.updateQueue,l===null?(l={lastEffect:null,stores:null},sn.updateQueue=l,l.lastEffect=o.next=o):(p=l.lastEffect,p===null?l.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,l.lastEffect=o)),o}function ak(){return ii().memoizedState}function xv(o,l,p,y){var A=Ca();sn.flags|=o,A.memoizedState=K2(1|l,p,void 0,y===void 0?null:y)}function Ev(o,l,p,y){var A=ii();y=y===void 0?null:y;var E=void 0;if(Vn!==null){var M=Vn.memoizedState;if(E=M.destroy,y!==null&&D1(y,M.deps)){A.memoizedState=K2(l,p,E,y);return}}sn.flags|=o,A.memoizedState=K2(1|l,p,E,y)}function ok(o,l){return xv(8390656,8,o,l)}function B1(o,l){return Ev(2048,8,o,l)}function lk(o,l){return Ev(4,2,o,l)}function ck(o,l){return Ev(4,4,o,l)}function uk(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function dk(o,l,p){return p=p!=null?p.concat([o]):null,Ev(4,4,uk.bind(null,l,o),p)}function V1(){}function hk(o,l){var p=ii();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&D1(l,y[1])?y[0]:(p.memoizedState=[o,l],o)}function pk(o,l){var p=ii();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&D1(l,y[1])?y[0]:(o=o(),p.memoizedState=[o,l],o)}function fk(o,l,p){return(ud&21)===0?(o.baseState&&(o.baseState=!1,Jr=!0),o.memoizedState=p):(Ni(p,l)||(p=_2(),sn.lanes|=p,dd|=p,o.baseState=!0),l)}function D4(o,l){var p=ut;ut=p!==0&&4>p?p:4,o(!0);var y=R1.transition;R1.transition={};try{o(!1),l()}finally{ut=p,R1.transition=y}}function mk(){return ii().memoizedState}function N4(o,l,p){var y=hc(o);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},gk(o))yk(l,p);else if(p=qT(o,l,p,y),p!==null){var A=Vr();Vi(p,o,y,A),wk(p,l,y)}}function M4(o,l,p){var y=hc(o),A={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(gk(o))yk(l,A);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var M=l.lastRenderedState,G=E(M,p);if(A.hasEagerState=!0,A.eagerState=G,Ni(G,M)){var X=l.interleaved;X===null?(A.next=A,F1(l)):(A.next=X.next,X.next=A),l.interleaved=A;return}}catch{}finally{}p=qT(o,l,A,y),p!==null&&(A=Vr(),Vi(p,o,y,A),wk(p,l,y))}}function gk(o){var l=o.alternate;return o===sn||l!==null&&l===sn}function yk(o,l){G2=_v=!0;var p=o.pending;p===null?l.next=l:(l.next=p.next,p.next=l),o.pending=l}function wk(o,l,p){if((p&4194240)!==0){var y=l.lanes;y&=o.pendingLanes,p|=y,l.lanes=p,E2(o,p)}}var bv={readContext:si,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useInsertionEffect:br,useLayoutEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useMutableSource:br,useSyncExternalStore:br,useId:br,unstable_isNewReconciler:!1},L4={readContext:si,useCallback:function(o,l){return Ca().memoizedState=[o,l===void 0?null:l],o},useContext:si,useEffect:ok,useImperativeHandle:function(o,l,p){return p=p!=null?p.concat([o]):null,xv(4194308,4,uk.bind(null,l,o),p)},useLayoutEffect:function(o,l){return xv(4194308,4,o,l)},useInsertionEffect:function(o,l){return xv(4,2,o,l)},useMemo:function(o,l){var p=Ca();return l=l===void 0?null:l,o=o(),p.memoizedState=[o,l],o},useReducer:function(o,l,p){var y=Ca();return l=p!==void 0?p(l):l,y.memoizedState=y.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},y.queue=o,o=o.dispatch=N4.bind(null,sn,o),[y.memoizedState,o]},useRef:function(o){var l=Ca();return o={current:o},l.memoizedState=o},useState:ik,useDebugValue:V1,useDeferredValue:function(o){return Ca().memoizedState=o},useTransition:function(){var o=ik(!1),l=o[0];return o=D4.bind(null,o[1]),Ca().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,p){var y=sn,A=Ca();if(Yt){if(p===void 0)throw Error(t(407));p=p()}else{if(p=l(),Kn===null)throw Error(t(349));(ud&30)!==0||ek(y,l,p)}A.memoizedState=p;var E={value:p,getSnapshot:l};return A.queue=E,ok(nk.bind(null,y,E,o),[o]),y.flags|=2048,K2(9,tk.bind(null,y,E,p,l),void 0,null),p},useId:function(){var o=Ca(),l=Kn.identifierPrefix;if(Yt){var p=Do,y=Ro;p=(y&~(1<<32-ys(y)-1)).toString(32)+p,l=":"+l+"R"+p,p=q2++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=R4++,l=":"+l+"r"+p.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},O4={readContext:si,useCallback:hk,useContext:si,useEffect:B1,useImperativeHandle:dk,useInsertionEffect:lk,useLayoutEffect:ck,useMemo:pk,useReducer:L1,useRef:ak,useState:function(){return L1(Q2)},useDebugValue:V1,useDeferredValue:function(o){var l=ii();return fk(l,Vn.memoizedState,o)},useTransition:function(){var o=L1(Q2)[0],l=ii().memoizedState;return[o,l]},useMutableSource:JT,useSyncExternalStore:ZT,useId:mk,unstable_isNewReconciler:!1},B4={readContext:si,useCallback:hk,useContext:si,useEffect:B1,useImperativeHandle:dk,useInsertionEffect:lk,useLayoutEffect:ck,useMemo:pk,useReducer:O1,useRef:ak,useState:function(){return O1(Q2)},useDebugValue:V1,useDeferredValue:function(o){var l=ii();return Vn===null?l.memoizedState=o:fk(l,Vn.memoizedState,o)},useTransition:function(){var o=O1(Q2)[0],l=ii().memoizedState;return[o,l]},useMutableSource:JT,useSyncExternalStore:ZT,useId:mk,unstable_isNewReconciler:!1};function Li(o,l){if(o&&o.defaultProps){l=J({},l),o=o.defaultProps;for(var p in o)l[p]===void 0&&(l[p]=o[p]);return l}return l}function U1(o,l,p,y){l=o.memoizedState,p=p(y,l),p=p==null?l:J({},l,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Cv={isMounted:function(o){return(o=o._reactInternals)?Ri(o)===o:!1},enqueueSetState:function(o,l,p){o=o._reactInternals;var y=Vr(),A=hc(o),E=Mo(y,A);E.payload=l,p!=null&&(E.callback=p),l=lc(o,E,A),l!==null&&(Vi(l,o,A,y),yv(l,o,A))},enqueueReplaceState:function(o,l,p){o=o._reactInternals;var y=Vr(),A=hc(o),E=Mo(y,A);E.tag=1,E.payload=l,p!=null&&(E.callback=p),l=lc(o,E,A),l!==null&&(Vi(l,o,A,y),yv(l,o,A))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var p=Vr(),y=hc(o),A=Mo(p,y);A.tag=2,l!=null&&(A.callback=l),l=lc(o,A,y),l!==null&&(Vi(l,o,y,p),yv(l,o,y))}};function vk(o,l,p,y,A,E,M){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,E,M):l.prototype&&l.prototype.isPureReactComponent?!M2(p,y)||!M2(A,E):!0}function Ak(o,l,p){var y=!1,A=ic,E=l.contextType;return typeof E=="object"&&E!==null?E=si(E):(A=Yr(l)?id:Er.current,y=l.contextTypes,E=(y=y!=null)?Rp(o,A):ic),l=new l(p,E),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Cv,o.stateNode=l,l._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=A,o.__reactInternalMemoizedMaskedChildContext=E),l}function _k(o,l,p,y){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,y),l.state!==o&&Cv.enqueueReplaceState(l,l.state,null)}function j1(o,l,p,y){var A=o.stateNode;A.props=p,A.state=o.memoizedState,A.refs={},S1(o);var E=l.contextType;typeof E=="object"&&E!==null?A.context=si(E):(E=Yr(l)?id:Er.current,A.context=Rp(o,E)),A.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(U1(o,l,E,p),A.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(l=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),l!==A.state&&Cv.enqueueReplaceState(A,A.state,null),wv(o,p,A,y),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308)}function Up(o,l){try{var p="",y=l;do p+=Ae(y),y=y.return;while(y);var A=p}catch(E){A=`
Error generating stack: `+E.message+`
`+E.stack}return{value:o,source:l,stack:A,digest:null}}function $1(o,l,p){return{value:o,source:null,stack:p??null,digest:l??null}}function z1(o,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var V4=typeof WeakMap=="function"?WeakMap:Map;function xk(o,l,p){p=Mo(-1,p),p.tag=3,p.payload={element:null};var y=l.value;return p.callback=function(){Rv||(Rv=!0,sE=y),z1(o,l)},p}function Ek(o,l,p){p=Mo(-1,p),p.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var A=l.value;p.payload=function(){return y(A)},p.callback=function(){z1(o,l)}}var E=o.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(p.callback=function(){z1(o,l),typeof y!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),p}function bk(o,l,p){var y=o.pingCache;if(y===null){y=o.pingCache=new V4;var A=new Set;y.set(l,A)}else A=y.get(l),A===void 0&&(A=new Set,y.set(l,A));A.has(p)||(A.add(p),o=Z4.bind(null,o,l,p),l.then(o,o))}function Ck(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Fk(o,l,p,y,A){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=Mo(-1,1),l.tag=2,lc(p,l,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=A,o)}var U4=V.ReactCurrentOwner,Jr=!1;function Br(o,l,p,y){l.child=o===null?GT(l,null,p,y):Lp(l,o.child,p,y)}function Sk(o,l,p,y,A){p=p.render;var E=l.ref;return Bp(l,A),y=N1(o,l,p,y,E,A),p=M1(),o!==null&&!Jr?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~A,Lo(o,l,A)):(Yt&&p&&y1(l),l.flags|=1,Br(o,l,y,A),l.child)}function Tk(o,l,p,y,A){if(o===null){var E=p.type;return typeof E=="function"&&!dE(E)&&E.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=E,kk(o,l,E,y,A)):(o=Bv(p.type,null,y,l,l.mode,A),o.ref=l.ref,o.return=l,l.child=o)}if(E=o.child,(o.lanes&A)===0){var M=E.memoizedProps;if(p=p.compare,p=p!==null?p:M2,p(M,y)&&o.ref===l.ref)return Lo(o,l,A)}return l.flags|=1,o=fc(E,y),o.ref=l.ref,o.return=l,l.child=o}function kk(o,l,p,y,A){if(o!==null){var E=o.memoizedProps;if(M2(E,y)&&o.ref===l.ref)if(Jr=!1,l.pendingProps=y=E,(o.lanes&A)!==0)(o.flags&131072)!==0&&(Jr=!0);else return l.lanes=o.lanes,Lo(o,l,A)}return H1(o,l,p,y,A)}function Ik(o,l,p){var y=l.pendingProps,A=y.children,E=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut($p,bs),bs|=p;else{if((p&1073741824)===0)return o=E!==null?E.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Ut($p,bs),bs|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=E!==null?E.baseLanes:p,Ut($p,bs),bs|=y}else E!==null?(y=E.baseLanes|p,l.memoizedState=null):y=p,Ut($p,bs),bs|=y;return Br(o,l,A,p),l.child}function Pk(o,l){var p=l.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function H1(o,l,p,y,A){var E=Yr(p)?id:Er.current;return E=Rp(l,E),Bp(l,A),p=N1(o,l,p,y,E,A),y=M1(),o!==null&&!Jr?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~A,Lo(o,l,A)):(Yt&&y&&y1(l),l.flags|=1,Br(o,l,p,A),l.child)}function Rk(o,l,p,y,A){if(Yr(p)){var E=!0;cv(l)}else E=!1;if(Bp(l,A),l.stateNode===null)Sv(o,l),Ak(l,p,y),j1(l,p,y,A),y=!0;else if(o===null){var M=l.stateNode,G=l.memoizedProps;M.props=G;var X=M.context,re=p.contextType;typeof re=="object"&&re!==null?re=si(re):(re=Yr(p)?id:Er.current,re=Rp(l,re));var he=p.getDerivedStateFromProps,pe=typeof he=="function"||typeof M.getSnapshotBeforeUpdate=="function";pe||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(G!==y||X!==re)&&_k(l,M,y,re),oc=!1;var de=l.memoizedState;M.state=de,wv(l,y,M,A),X=l.memoizedState,G!==y||de!==X||Xr.current||oc?(typeof he=="function"&&(U1(l,p,he,y),X=l.memoizedState),(G=oc||vk(l,p,G,y,de,X,re))?(pe||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=X),M.props=y,M.state=X,M.context=re,y=G):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{M=l.stateNode,QT(o,l),G=l.memoizedProps,re=l.type===l.elementType?G:Li(l.type,G),M.props=re,pe=l.pendingProps,de=M.context,X=p.contextType,typeof X=="object"&&X!==null?X=si(X):(X=Yr(p)?id:Er.current,X=Rp(l,X));var Te=p.getDerivedStateFromProps;(he=typeof Te=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(G!==pe||de!==X)&&_k(l,M,y,X),oc=!1,de=l.memoizedState,M.state=de,wv(l,y,M,A);var De=l.memoizedState;G!==pe||de!==De||Xr.current||oc?(typeof Te=="function"&&(U1(l,p,Te,y),De=l.memoizedState),(re=oc||vk(l,p,re,y,de,De,X)||!1)?(he||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(y,De,X),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(y,De,X)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||G===o.memoizedProps&&de===o.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&de===o.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=De),M.props=y,M.state=De,M.context=X,y=re):(typeof M.componentDidUpdate!="function"||G===o.memoizedProps&&de===o.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&de===o.memoizedState||(l.flags|=1024),y=!1)}return W1(o,l,p,y,E,A)}function W1(o,l,p,y,A,E){Pk(o,l);var M=(l.flags&128)!==0;if(!y&&!M)return A&&OT(l,p,!1),Lo(o,l,E);y=l.stateNode,U4.current=l;var G=M&&typeof p.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,o!==null&&M?(l.child=Lp(l,o.child,null,E),l.child=Lp(l,null,G,E)):Br(o,l,G,E),l.memoizedState=y.state,A&&OT(l,p,!0),l.child}function Dk(o){var l=o.stateNode;l.pendingContext?MT(o,l.pendingContext,l.pendingContext!==l.context):l.context&&MT(o,l.context,!1),T1(o,l.containerInfo)}function Nk(o,l,p,y,A){return Mp(),_1(A),l.flags|=256,Br(o,l,p,y),l.child}var G1={dehydrated:null,treeContext:null,retryLane:0};function q1(o){return{baseLanes:o,cachePool:null,transitions:null}}function Mk(o,l,p){var y=l.pendingProps,A=rn.current,E=!1,M=(l.flags&128)!==0,G;if((G=M)||(G=o!==null&&o.memoizedState===null?!1:(A&2)!==0),G?(E=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(A|=1),Ut(rn,A&1),o===null)return A1(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(M=y.children,o=y.fallback,E?(y=l.mode,E=l.child,M={mode:"hidden",children:M},(y&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=M):E=Vv(M,y,0,null),o=md(o,y,p,null),E.return=l,o.return=l,E.sibling=o,l.child=E,l.child.memoizedState=q1(p),l.memoizedState=G1,o):Q1(l,M));if(A=o.memoizedState,A!==null&&(G=A.dehydrated,G!==null))return j4(o,l,M,y,G,A,p);if(E){E=y.fallback,M=l.mode,A=o.child,G=A.sibling;var X={mode:"hidden",children:y.children};return(M&1)===0&&l.child!==A?(y=l.child,y.childLanes=0,y.pendingProps=X,l.deletions=null):(y=fc(A,X),y.subtreeFlags=A.subtreeFlags&14680064),G!==null?E=fc(G,E):(E=md(E,M,p,null),E.flags|=2),E.return=l,y.return=l,y.sibling=E,l.child=y,y=E,E=l.child,M=o.child.memoizedState,M=M===null?q1(p):{baseLanes:M.baseLanes|p,cachePool:null,transitions:M.transitions},E.memoizedState=M,E.childLanes=o.childLanes&~p,l.memoizedState=G1,y}return E=o.child,o=E.sibling,y=fc(E,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=p),y.return=l,y.sibling=null,o!==null&&(p=l.deletions,p===null?(l.deletions=[o],l.flags|=16):p.push(o)),l.child=y,l.memoizedState=null,y}function Q1(o,l){return l=Vv({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Fv(o,l,p,y){return y!==null&&_1(y),Lp(l,o.child,null,p),o=Q1(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function j4(o,l,p,y,A,E,M){if(p)return l.flags&256?(l.flags&=-257,y=$1(Error(t(422))),Fv(o,l,M,y)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(E=y.fallback,A=l.mode,y=Vv({mode:"visible",children:y.children},A,0,null),E=md(E,A,M,null),E.flags|=2,y.return=l,E.return=l,y.sibling=E,l.child=y,(l.mode&1)!==0&&Lp(l,o.child,null,M),l.child.memoizedState=q1(M),l.memoizedState=G1,E);if((l.mode&1)===0)return Fv(o,l,M,null);if(A.data==="$!"){if(y=A.nextSibling&&A.nextSibling.dataset,y)var G=y.dgst;return y=G,E=Error(t(419)),y=$1(E,y,void 0),Fv(o,l,M,y)}if(G=(M&o.childLanes)!==0,Jr||G){if(y=Kn,y!==null){switch(M&-M){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(y.suspendedLanes|M))!==0?0:A,A!==0&&A!==E.retryLane&&(E.retryLane=A,No(o,A),Vi(y,o,A,-1))}return uE(),y=$1(Error(t(421))),Fv(o,l,M,y)}return A.data==="$?"?(l.flags|=128,l.child=o.child,l=e7.bind(null,o),A._reactRetry=l,null):(o=E.treeContext,Es=rc(A.nextSibling),xs=l,Yt=!0,Mi=null,o!==null&&(ni[ri++]=Ro,ni[ri++]=Do,ni[ri++]=ad,Ro=o.id,Do=o.overflow,ad=l),l=Q1(l,y.children),l.flags|=4096,l)}function Lk(o,l,p){o.lanes|=l;var y=o.alternate;y!==null&&(y.lanes|=l),C1(o.return,l,p)}function K1(o,l,p,y,A){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:A}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=p,E.tailMode=A)}function Ok(o,l,p){var y=l.pendingProps,A=y.revealOrder,E=y.tail;if(Br(o,l,y.children,p),y=rn.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Lk(o,p,l);else if(o.tag===19)Lk(o,p,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(Ut(rn,y),(l.mode&1)===0)l.memoizedState=null;else switch(A){case"forwards":for(p=l.child,A=null;p!==null;)o=p.alternate,o!==null&&vv(o)===null&&(A=p),p=p.sibling;p=A,p===null?(A=l.child,l.child=null):(A=p.sibling,p.sibling=null),K1(l,!1,A,p,E);break;case"backwards":for(p=null,A=l.child,l.child=null;A!==null;){if(o=A.alternate,o!==null&&vv(o)===null){l.child=A;break}o=A.sibling,A.sibling=p,p=A,A=o}K1(l,!0,p,null,E);break;case"together":K1(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Sv(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Lo(o,l,p){if(o!==null&&(l.dependencies=o.dependencies),dd|=l.lanes,(p&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,p=fc(o,o.pendingProps),l.child=p,p.return=l;o.sibling!==null;)o=o.sibling,p=p.sibling=fc(o,o.pendingProps),p.return=l;p.sibling=null}return l.child}function $4(o,l,p){switch(l.tag){case 3:Dk(l),Mp();break;case 5:YT(l);break;case 1:Yr(l.type)&&cv(l);break;case 4:T1(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,A=l.memoizedProps.value;Ut(mv,y._currentValue),y._currentValue=A;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(Ut(rn,rn.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?Mk(o,l,p):(Ut(rn,rn.current&1),o=Lo(o,l,p),o!==null?o.sibling:null);Ut(rn,rn.current&1);break;case 19:if(y=(p&l.childLanes)!==0,(o.flags&128)!==0){if(y)return Ok(o,l,p);l.flags|=128}if(A=l.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Ut(rn,rn.current),y)break;return null;case 22:case 23:return l.lanes=0,Ik(o,l,p)}return Lo(o,l,p)}var Bk,X1,Vk,Uk;Bk=function(o,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},X1=function(){},Vk=function(o,l,p,y){var A=o.memoizedProps;if(A!==y){o=l.stateNode,cd(ba.current);var E=null;switch(p){case"input":A=ue(o,A),y=ue(o,y),E=[];break;case"select":A=J({},A,{value:void 0}),y=J({},y,{value:void 0}),E=[];break;case"textarea":A=u2(o,A),y=u2(o,y),E=[];break;default:typeof A.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=av)}Pi(p,y);var M;p=null;for(re in A)if(!y.hasOwnProperty(re)&&A.hasOwnProperty(re)&&A[re]!=null)if(re==="style"){var G=A[re];for(M in G)G.hasOwnProperty(M)&&(p||(p={}),p[M]="")}else re!=="dangerouslySetInnerHTML"&&re!=="children"&&re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(r.hasOwnProperty(re)?E||(E=[]):(E=E||[]).push(re,null));for(re in y){var X=y[re];if(G=A!=null?A[re]:void 0,y.hasOwnProperty(re)&&X!==G&&(X!=null||G!=null))if(re==="style")if(G){for(M in G)!G.hasOwnProperty(M)||X&&X.hasOwnProperty(M)||(p||(p={}),p[M]="");for(M in X)X.hasOwnProperty(M)&&G[M]!==X[M]&&(p||(p={}),p[M]=X[M])}else p||(E||(E=[]),E.push(re,p)),p=X;else re==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,G=G?G.__html:void 0,X!=null&&G!==X&&(E=E||[]).push(re,X)):re==="children"?typeof X!="string"&&typeof X!="number"||(E=E||[]).push(re,""+X):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&(r.hasOwnProperty(re)?(X!=null&&re==="onScroll"&&qt("scroll",o),E||G===X||(E=[])):(E=E||[]).push(re,X))}p&&(E=E||[]).push("style",p);var re=E;(l.updateQueue=re)&&(l.flags|=4)}},Uk=function(o,l,p,y){p!==y&&(l.flags|=4)};function X2(o,l){if(!Yt)switch(o.tailMode){case"hidden":l=o.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Cr(o){var l=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(l)for(var A=o.child;A!==null;)p|=A.lanes|A.childLanes,y|=A.subtreeFlags&14680064,y|=A.flags&14680064,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)p|=A.lanes|A.childLanes,y|=A.subtreeFlags,y|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=y,o.childLanes=p,l}function z4(o,l,p){var y=l.pendingProps;switch(w1(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(l),null;case 1:return Yr(l.type)&&lv(),Cr(l),null;case 3:return y=l.stateNode,Vp(),Qt(Xr),Qt(Er),P1(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(pv(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Mi!==null&&(oE(Mi),Mi=null))),X1(o,l),Cr(l),null;case 5:k1(l);var A=cd(W2.current);if(p=l.type,o!==null&&l.stateNode!=null)Vk(o,l,p,y,A),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return Cr(l),null}if(o=cd(ba.current),pv(l)){y=l.stateNode,p=l.type;var E=l.memoizedProps;switch(y[Ea]=l,y[U2]=E,o=(l.mode&1)!==0,p){case"dialog":qt("cancel",y),qt("close",y);break;case"iframe":case"object":case"embed":qt("load",y);break;case"video":case"audio":for(A=0;A<O2.length;A++)qt(O2[A],y);break;case"source":qt("error",y);break;case"img":case"image":case"link":qt("error",y),qt("load",y);break;case"details":qt("toggle",y);break;case"input":We(y,E),qt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!E.multiple},qt("invalid",y);break;case"textarea":d2(y,E),qt("invalid",y)}Pi(p,E),A=null;for(var M in E)if(E.hasOwnProperty(M)){var G=E[M];M==="children"?typeof G=="string"?y.textContent!==G&&(E.suppressHydrationWarning!==!0&&iv(y.textContent,G,o),A=["children",G]):typeof G=="number"&&y.textContent!==""+G&&(E.suppressHydrationWarning!==!0&&iv(y.textContent,G,o),A=["children",""+G]):r.hasOwnProperty(M)&&G!=null&&M==="onScroll"&&qt("scroll",y)}switch(p){case"input":rt(y),c2(y,E,!0);break;case"textarea":rt(y),jl(y);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(y.onclick=av)}y=A,l.updateQueue=y,y!==null&&(l.flags|=4)}else{M=A.nodeType===9?A:A.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=h2(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=M.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=M.createElement(p,{is:y.is}):(o=M.createElement(p),p==="select"&&(M=o,y.multiple?M.multiple=!0:y.size&&(M.size=y.size))):o=M.createElementNS(o,p),o[Ea]=l,o[U2]=y,Bk(o,l,!1,!1),l.stateNode=o;e:{switch(M=lp(p,y),p){case"dialog":qt("cancel",o),qt("close",o),A=y;break;case"iframe":case"object":case"embed":qt("load",o),A=y;break;case"video":case"audio":for(A=0;A<O2.length;A++)qt(O2[A],o);A=y;break;case"source":qt("error",o),A=y;break;case"img":case"image":case"link":qt("error",o),qt("load",o),A=y;break;case"details":qt("toggle",o),A=y;break;case"input":We(o,y),A=ue(o,y),qt("invalid",o);break;case"option":A=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},A=J({},y,{value:void 0}),qt("invalid",o);break;case"textarea":d2(o,y),A=u2(o,y),qt("invalid",o);break;default:A=y}Pi(p,A),G=A;for(E in G)if(G.hasOwnProperty(E)){var X=G[E];E==="style"?op(o,X):E==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&D0(o,X)):E==="children"?typeof X=="string"?(p!=="textarea"||X!=="")&&Hu(o,X):typeof X=="number"&&Hu(o,""+X):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(r.hasOwnProperty(E)?X!=null&&E==="onScroll"&&qt("scroll",o):X!=null&&R(o,E,X,M))}switch(p){case"input":rt(o),c2(o,y,!1);break;case"textarea":rt(o),jl(o);break;case"option":y.value!=null&&o.setAttribute("value",""+Be(y.value));break;case"select":o.multiple=!!y.multiple,E=y.value,E!=null?Ii(o,!!y.multiple,E,!1):y.defaultValue!=null&&Ii(o,!!y.multiple,y.defaultValue,!0);break;default:typeof A.onClick=="function"&&(o.onclick=av)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Cr(l),null;case 6:if(o&&l.stateNode!=null)Uk(o,l,o.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(p=cd(W2.current),cd(ba.current),pv(l)){if(y=l.stateNode,p=l.memoizedProps,y[Ea]=l,(E=y.nodeValue!==p)&&(o=xs,o!==null))switch(o.tag){case 3:iv(y.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&iv(y.nodeValue,p,(o.mode&1)!==0)}E&&(l.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[Ea]=l,l.stateNode=y}return Cr(l),null;case 13:if(Qt(rn),y=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Yt&&Es!==null&&(l.mode&1)!==0&&(l.flags&128)===0)zT(),Mp(),l.flags|=98560,E=!1;else if(E=pv(l),y!==null&&y.dehydrated!==null){if(o===null){if(!E)throw Error(t(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[Ea]=l}else Mp(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Cr(l),E=!1}else Mi!==null&&(oE(Mi),Mi=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(rn.current&1)!==0?Un===0&&(Un=3):uE())),l.updateQueue!==null&&(l.flags|=4),Cr(l),null);case 4:return Vp(),X1(o,l),o===null&&B2(l.stateNode.containerInfo),Cr(l),null;case 10:return b1(l.type._context),Cr(l),null;case 17:return Yr(l.type)&&lv(),Cr(l),null;case 19:if(Qt(rn),E=l.memoizedState,E===null)return Cr(l),null;if(y=(l.flags&128)!==0,M=E.rendering,M===null)if(y)X2(E,!1);else{if(Un!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(M=vv(o),M!==null){for(l.flags|=128,X2(E,!1),y=M.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=p,p=l.child;p!==null;)E=p,o=y,E.flags&=14680066,M=E.alternate,M===null?(E.childLanes=0,E.lanes=o,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=M.childLanes,E.lanes=M.lanes,E.child=M.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=M.memoizedProps,E.memoizedState=M.memoizedState,E.updateQueue=M.updateQueue,E.type=M.type,o=M.dependencies,E.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return Ut(rn,rn.current&1|2),l.child}o=o.sibling}E.tail!==null&&Gt()>zp&&(l.flags|=128,y=!0,X2(E,!1),l.lanes=4194304)}else{if(!y)if(o=vv(M),o!==null){if(l.flags|=128,y=!0,p=o.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),X2(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!Yt)return Cr(l),null}else 2*Gt()-E.renderingStartTime>zp&&p!==1073741824&&(l.flags|=128,y=!0,X2(E,!1),l.lanes=4194304);E.isBackwards?(M.sibling=l.child,l.child=M):(p=E.last,p!==null?p.sibling=M:l.child=M,E.last=M)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=Gt(),l.sibling=null,p=rn.current,Ut(rn,y?p&1|2:p&1),l):(Cr(l),null);case 22:case 23:return cE(),y=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(bs&1073741824)!==0&&(Cr(l),l.subtreeFlags&6&&(l.flags|=8192)):Cr(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function H4(o,l){switch(w1(l),l.tag){case 1:return Yr(l.type)&&lv(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Vp(),Qt(Xr),Qt(Er),P1(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return k1(l),null;case 13:if(Qt(rn),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Mp()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Qt(rn),null;case 4:return Vp(),null;case 10:return b1(l.type._context),null;case 22:case 23:return cE(),null;case 24:return null;default:return null}}var Tv=!1,Fr=!1,W4=typeof WeakSet=="function"?WeakSet:Set,Re=null;function jp(o,l){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){hn(o,l,y)}else p.current=null}function Y1(o,l,p){try{p()}catch(y){hn(o,l,y)}}var jk=!1;function G4(o,l){if(c1=So,o=vT(),t1(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var A=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var M=0,G=-1,X=-1,re=0,he=0,pe=o,de=null;t:for(;;){for(var Te;pe!==p||A!==0&&pe.nodeType!==3||(G=M+A),pe!==E||y!==0&&pe.nodeType!==3||(X=M+y),pe.nodeType===3&&(M+=pe.nodeValue.length),(Te=pe.firstChild)!==null;)de=pe,pe=Te;for(;;){if(pe===o)break t;if(de===p&&++re===A&&(G=M),de===E&&++he===y&&(X=M),(Te=pe.nextSibling)!==null)break;pe=de,de=pe.parentNode}pe=Te}p=G===-1||X===-1?null:{start:G,end:X}}else p=null}p=p||{start:0,end:0}}else p=null;for(u1={focusedElem:o,selectionRange:p},So=!1,Re=l;Re!==null;)if(l=Re,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Re=o;else for(;Re!==null;){l=Re;try{var De=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Ne=De.memoizedProps,En=De.memoizedState,ee=l.stateNode,Y=ee.getSnapshotBeforeUpdate(l.elementType===l.type?Ne:Li(l.type,Ne),En);ee.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var ne=l.stateNode.containerInfo;ne.nodeType===1?ne.textContent="":ne.nodeType===9&&ne.documentElement&&ne.removeChild(ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ge){hn(l,l.return,ge)}if(o=l.sibling,o!==null){o.return=l.return,Re=o;break}Re=l.return}return De=jk,jk=!1,De}function Y2(o,l,p){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var A=y=y.next;do{if((A.tag&o)===o){var E=A.destroy;A.destroy=void 0,E!==void 0&&Y1(l,p,E)}A=A.next}while(A!==y)}}function kv(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&o)===o){var y=p.create;p.destroy=y()}p=p.next}while(p!==l)}}function J1(o){var l=o.ref;if(l!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof l=="function"?l(o):l.current=o}}function $k(o){var l=o.alternate;l!==null&&(o.alternate=null,$k(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Ea],delete l[U2],delete l[f1],delete l[T4],delete l[k4])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function zk(o){return o.tag===5||o.tag===3||o.tag===4}function Hk(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||zk(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Z1(o,l,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(o,l):p.insertBefore(o,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(o,p)):(l=p,l.appendChild(o)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=av));else if(y!==4&&(o=o.child,o!==null))for(Z1(o,l,p),o=o.sibling;o!==null;)Z1(o,l,p),o=o.sibling}function eE(o,l,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?p.insertBefore(o,l):p.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for(eE(o,l,p),o=o.sibling;o!==null;)eE(o,l,p),o=o.sibling}var or=null,Oi=!1;function cc(o,l,p){for(p=p.child;p!==null;)Wk(o,l,p),p=p.sibling}function Wk(o,l,p){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(Ku,p)}catch{}switch(p.tag){case 5:Fr||jp(p,l);case 6:var y=or,A=Oi;or=null,cc(o,l,p),or=y,Oi=A,or!==null&&(Oi?(o=or,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):or.removeChild(p.stateNode));break;case 18:or!==null&&(Oi?(o=or,p=p.stateNode,o.nodeType===8?p1(o.parentNode,p):o.nodeType===1&&p1(o,p),Zl(o)):p1(or,p.stateNode));break;case 4:y=or,A=Oi,or=p.stateNode.containerInfo,Oi=!0,cc(o,l,p),or=y,Oi=A;break;case 0:case 11:case 14:case 15:if(!Fr&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){A=y=y.next;do{var E=A,M=E.destroy;E=E.tag,M!==void 0&&((E&2)!==0||(E&4)!==0)&&Y1(p,l,M),A=A.next}while(A!==y)}cc(o,l,p);break;case 1:if(!Fr&&(jp(p,l),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(G){hn(p,l,G)}cc(o,l,p);break;case 21:cc(o,l,p);break;case 22:p.mode&1?(Fr=(y=Fr)||p.memoizedState!==null,cc(o,l,p),Fr=y):cc(o,l,p);break;default:cc(o,l,p)}}function Gk(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new W4),l.forEach(function(y){var A=t7.bind(null,o,y);p.has(y)||(p.add(y),y.then(A,A))})}}function Bi(o,l){var p=l.deletions;if(p!==null)for(var y=0;y<p.length;y++){var A=p[y];try{var E=o,M=l,G=M;e:for(;G!==null;){switch(G.tag){case 5:or=G.stateNode,Oi=!1;break e;case 3:or=G.stateNode.containerInfo,Oi=!0;break e;case 4:or=G.stateNode.containerInfo,Oi=!0;break e}G=G.return}if(or===null)throw Error(t(160));Wk(E,M,A),or=null,Oi=!1;var X=A.alternate;X!==null&&(X.return=null),A.return=null}catch(re){hn(A,l,re)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)qk(l,o),l=l.sibling}function qk(o,l){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Bi(l,o),Fa(o),y&4){try{Y2(3,o,o.return),kv(3,o)}catch(Ne){hn(o,o.return,Ne)}try{Y2(5,o,o.return)}catch(Ne){hn(o,o.return,Ne)}}break;case 1:Bi(l,o),Fa(o),y&512&&p!==null&&jp(p,p.return);break;case 5:if(Bi(l,o),Fa(o),y&512&&p!==null&&jp(p,p.return),o.flags&32){var A=o.stateNode;try{Hu(A,"")}catch(Ne){hn(o,o.return,Ne)}}if(y&4&&(A=o.stateNode,A!=null)){var E=o.memoizedProps,M=p!==null?p.memoizedProps:E,G=o.type,X=o.updateQueue;if(o.updateQueue=null,X!==null)try{G==="input"&&E.type==="radio"&&E.name!=null&&Ct(A,E),lp(G,M);var re=lp(G,E);for(M=0;M<X.length;M+=2){var he=X[M],pe=X[M+1];he==="style"?op(A,pe):he==="dangerouslySetInnerHTML"?D0(A,pe):he==="children"?Hu(A,pe):R(A,he,pe,re)}switch(G){case"input":ms(A,E);break;case"textarea":R0(A,E);break;case"select":var de=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!E.multiple;var Te=E.value;Te!=null?Ii(A,!!E.multiple,Te,!1):de!==!!E.multiple&&(E.defaultValue!=null?Ii(A,!!E.multiple,E.defaultValue,!0):Ii(A,!!E.multiple,E.multiple?[]:"",!1))}A[U2]=E}catch(Ne){hn(o,o.return,Ne)}}break;case 6:if(Bi(l,o),Fa(o),y&4){if(o.stateNode===null)throw Error(t(162));A=o.stateNode,E=o.memoizedProps;try{A.nodeValue=E}catch(Ne){hn(o,o.return,Ne)}}break;case 3:if(Bi(l,o),Fa(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Zl(l.containerInfo)}catch(Ne){hn(o,o.return,Ne)}break;case 4:Bi(l,o),Fa(o);break;case 13:Bi(l,o),Fa(o),A=o.child,A.flags&8192&&(E=A.memoizedState!==null,A.stateNode.isHidden=E,!E||A.alternate!==null&&A.alternate.memoizedState!==null||(rE=Gt())),y&4&&Gk(o);break;case 22:if(he=p!==null&&p.memoizedState!==null,o.mode&1?(Fr=(re=Fr)||he,Bi(l,o),Fr=re):Bi(l,o),Fa(o),y&8192){if(re=o.memoizedState!==null,(o.stateNode.isHidden=re)&&!he&&(o.mode&1)!==0)for(Re=o,he=o.child;he!==null;){for(pe=Re=he;Re!==null;){switch(de=Re,Te=de.child,de.tag){case 0:case 11:case 14:case 15:Y2(4,de,de.return);break;case 1:jp(de,de.return);var De=de.stateNode;if(typeof De.componentWillUnmount=="function"){y=de,p=de.return;try{l=y,De.props=l.memoizedProps,De.state=l.memoizedState,De.componentWillUnmount()}catch(Ne){hn(y,p,Ne)}}break;case 5:jp(de,de.return);break;case 22:if(de.memoizedState!==null){Xk(pe);continue}}Te!==null?(Te.return=de,Re=Te):Xk(pe)}he=he.sibling}e:for(he=null,pe=o;;){if(pe.tag===5){if(he===null){he=pe;try{A=pe.stateNode,re?(E=A.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(G=pe.stateNode,X=pe.memoizedProps.style,M=X!=null&&X.hasOwnProperty("display")?X.display:null,G.style.display=Hl("display",M))}catch(Ne){hn(o,o.return,Ne)}}}else if(pe.tag===6){if(he===null)try{pe.stateNode.nodeValue=re?"":pe.memoizedProps}catch(Ne){hn(o,o.return,Ne)}}else if((pe.tag!==22&&pe.tag!==23||pe.memoizedState===null||pe===o)&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===o)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===o)break e;he===pe&&(he=null),pe=pe.return}he===pe&&(he=null),pe.sibling.return=pe.return,pe=pe.sibling}}break;case 19:Bi(l,o),Fa(o),y&4&&Gk(o);break;case 21:break;default:Bi(l,o),Fa(o)}}function Fa(o){var l=o.flags;if(l&2){try{e:{for(var p=o.return;p!==null;){if(zk(p)){var y=p;break e}p=p.return}throw Error(t(160))}switch(y.tag){case 5:var A=y.stateNode;y.flags&32&&(Hu(A,""),y.flags&=-33);var E=Hk(o);eE(o,E,A);break;case 3:case 4:var M=y.stateNode.containerInfo,G=Hk(o);Z1(o,G,M);break;default:throw Error(t(161))}}catch(X){hn(o,o.return,X)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function q4(o,l,p){Re=o,Qk(o)}function Qk(o,l,p){for(var y=(o.mode&1)!==0;Re!==null;){var A=Re,E=A.child;if(A.tag===22&&y){var M=A.memoizedState!==null||Tv;if(!M){var G=A.alternate,X=G!==null&&G.memoizedState!==null||Fr;G=Tv;var re=Fr;if(Tv=M,(Fr=X)&&!re)for(Re=A;Re!==null;)M=Re,X=M.child,M.tag===22&&M.memoizedState!==null?Yk(A):X!==null?(X.return=M,Re=X):Yk(A);for(;E!==null;)Re=E,Qk(E),E=E.sibling;Re=A,Tv=G,Fr=re}Kk(o)}else(A.subtreeFlags&8772)!==0&&E!==null?(E.return=A,Re=E):Kk(o)}}function Kk(o){for(;Re!==null;){var l=Re;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Fr||kv(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Fr)if(p===null)y.componentDidMount();else{var A=l.elementType===l.type?p.memoizedProps:Li(l.type,p.memoizedProps);y.componentDidUpdate(A,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&XT(l,E,y);break;case 3:var M=l.updateQueue;if(M!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}XT(l,M,p)}break;case 5:var G=l.stateNode;if(p===null&&l.flags&4){p=G;var X=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&p.focus();break;case"img":X.src&&(p.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var re=l.alternate;if(re!==null){var he=re.memoizedState;if(he!==null){var pe=he.dehydrated;pe!==null&&Zl(pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Fr||l.flags&512&&J1(l)}catch(de){hn(l,l.return,de)}}if(l===o){Re=null;break}if(p=l.sibling,p!==null){p.return=l.return,Re=p;break}Re=l.return}}function Xk(o){for(;Re!==null;){var l=Re;if(l===o){Re=null;break}var p=l.sibling;if(p!==null){p.return=l.return,Re=p;break}Re=l.return}}function Yk(o){for(;Re!==null;){var l=Re;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{kv(4,l)}catch(X){hn(l,p,X)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var A=l.return;try{y.componentDidMount()}catch(X){hn(l,A,X)}}var E=l.return;try{J1(l)}catch(X){hn(l,E,X)}break;case 5:var M=l.return;try{J1(l)}catch(X){hn(l,M,X)}}}catch(X){hn(l,l.return,X)}if(l===o){Re=null;break}var G=l.sibling;if(G!==null){G.return=l.return,Re=G;break}Re=l.return}}var Q4=Math.ceil,Iv=V.ReactCurrentDispatcher,tE=V.ReactCurrentOwner,ai=V.ReactCurrentBatchConfig,ft=0,Kn=null,In=null,lr=0,bs=0,$p=sc(0),Un=0,J2=null,dd=0,Pv=0,nE=0,Z2=null,Zr=null,rE=0,zp=1/0,Oo=null,Rv=!1,sE=null,uc=null,Dv=!1,dc=null,Nv=0,eg=0,iE=null,Mv=-1,Lv=0;function Vr(){return(ft&6)!==0?Gt():Mv!==-1?Mv:Mv=Gt()}function hc(o){return(o.mode&1)===0?1:(ft&2)!==0&&lr!==0?lr&-lr:P4.transition!==null?(Lv===0&&(Lv=_2()),Lv):(o=ut,o!==0||(o=window.event,o=o===void 0?16:wp(o.type)),o)}function Vi(o,l,p,y){if(50<eg)throw eg=0,iE=null,Error(t(185));Zu(o,p,y),((ft&2)===0||o!==Kn)&&(o===Kn&&((ft&2)===0&&(Pv|=p),Un===4&&pc(o,lr)),es(o,y),p===1&&ft===0&&(l.mode&1)===0&&(zp=Gt()+500,uv&&ac()))}function es(o,l){var p=o.callbackNode;Ju(o,l);var y=bo(o,o===Kn?lr:0);if(y===0)p!==null&&dp(p),o.callbackNode=null,o.callbackPriority=0;else if(l=y&-y,o.callbackPriority!==l){if(p!=null&&dp(p),l===1)o.tag===0?I4(Zk.bind(null,o)):BT(Zk.bind(null,o)),F4(function(){(ft&6)===0&&ac()}),p=null;else{switch(pa(y)){case 1:p=hp;break;case 4:p=w2;break;case 16:p=Qu;break;case 536870912:p=pp;break;default:p=Qu}p=oI(p,Jk.bind(null,o))}o.callbackPriority=l,o.callbackNode=p}}function Jk(o,l){if(Mv=-1,Lv=0,(ft&6)!==0)throw Error(t(327));var p=o.callbackNode;if(Hp()&&o.callbackNode!==p)return null;var y=bo(o,o===Kn?lr:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||l)l=Ov(o,y);else{l=y;var A=ft;ft|=2;var E=tI();(Kn!==o||lr!==l)&&(Oo=null,zp=Gt()+500,pd(o,l));do try{Y4();break}catch(G){eI(o,G)}while(!0);E1(),Iv.current=E,ft=A,In!==null?l=0:(Kn=null,lr=0,l=Un)}if(l!==0){if(l===2&&(A=A2(o),A!==0&&(y=A,l=aE(o,A))),l===1)throw p=J2,pd(o,0),pc(o,y),es(o,Gt()),p;if(l===6)pc(o,y);else{if(A=o.current.alternate,(y&30)===0&&!K4(A)&&(l=Ov(o,y),l===2&&(E=A2(o),E!==0&&(y=E,l=aE(o,E))),l===1))throw p=J2,pd(o,0),pc(o,y),es(o,Gt()),p;switch(o.finishedWork=A,o.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:fd(o,Zr,Oo);break;case 3:if(pc(o,y),(y&130023424)===y&&(l=rE+500-Gt(),10<l)){if(bo(o,0)!==0)break;if(A=o.suspendedLanes,(A&y)!==y){Vr(),o.pingedLanes|=o.suspendedLanes&A;break}o.timeoutHandle=h1(fd.bind(null,o,Zr,Oo),l);break}fd(o,Zr,Oo);break;case 4:if(pc(o,y),(y&4194240)===y)break;for(l=o.eventTimes,A=-1;0<y;){var M=31-ys(y);E=1<<M,M=l[M],M>A&&(A=M),y&=~E}if(y=A,y=Gt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*Q4(y/1960))-y,10<y){o.timeoutHandle=h1(fd.bind(null,o,Zr,Oo),y);break}fd(o,Zr,Oo);break;case 5:fd(o,Zr,Oo);break;default:throw Error(t(329))}}}return es(o,Gt()),o.callbackNode===p?Jk.bind(null,o):null}function aE(o,l){var p=Z2;return o.current.memoizedState.isDehydrated&&(pd(o,l).flags|=256),o=Ov(o,l),o!==2&&(l=Zr,Zr=p,l!==null&&oE(l)),o}function oE(o){Zr===null?Zr=o:Zr.push.apply(Zr,o)}function K4(o){for(var l=o;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var A=p[y],E=A.getSnapshot;A=A.value;try{if(!Ni(E(),A))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function pc(o,l){for(l&=~nE,l&=~Pv,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var p=31-ys(l),y=1<<p;o[p]=-1,l&=~y}}function Zk(o){if((ft&6)!==0)throw Error(t(327));Hp();var l=bo(o,0);if((l&1)===0)return es(o,Gt()),null;var p=Ov(o,l);if(o.tag!==0&&p===2){var y=A2(o);y!==0&&(l=y,p=aE(o,y))}if(p===1)throw p=J2,pd(o,0),pc(o,l),es(o,Gt()),p;if(p===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,fd(o,Zr,Oo),es(o,Gt()),null}function lE(o,l){var p=ft;ft|=1;try{return o(l)}finally{ft=p,ft===0&&(zp=Gt()+500,uv&&ac())}}function hd(o){dc!==null&&dc.tag===0&&(ft&6)===0&&Hp();var l=ft;ft|=1;var p=ai.transition,y=ut;try{if(ai.transition=null,ut=1,o)return o()}finally{ut=y,ai.transition=p,ft=l,(ft&6)===0&&ac()}}function cE(){bs=$p.current,Qt($p)}function pd(o,l){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,C4(p)),In!==null)for(p=In.return;p!==null;){var y=p;switch(w1(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&lv();break;case 3:Vp(),Qt(Xr),Qt(Er),P1();break;case 5:k1(y);break;case 4:Vp();break;case 13:Qt(rn);break;case 19:Qt(rn);break;case 10:b1(y.type._context);break;case 22:case 23:cE()}p=p.return}if(Kn=o,In=o=fc(o.current,null),lr=bs=l,Un=0,J2=null,nE=Pv=dd=0,Zr=Z2=null,ld!==null){for(l=0;l<ld.length;l++)if(p=ld[l],y=p.interleaved,y!==null){p.interleaved=null;var A=y.next,E=p.pending;if(E!==null){var M=E.next;E.next=A,y.next=M}p.pending=y}ld=null}return o}function eI(o,l){do{var p=In;try{if(E1(),Av.current=bv,_v){for(var y=sn.memoizedState;y!==null;){var A=y.queue;A!==null&&(A.pending=null),y=y.next}_v=!1}if(ud=0,Qn=Vn=sn=null,G2=!1,q2=0,tE.current=null,p===null||p.return===null){Un=1,J2=l,In=null;break}e:{var E=o,M=p.return,G=p,X=l;if(l=lr,G.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var re=X,he=G,pe=he.tag;if((he.mode&1)===0&&(pe===0||pe===11||pe===15)){var de=he.alternate;de?(he.updateQueue=de.updateQueue,he.memoizedState=de.memoizedState,he.lanes=de.lanes):(he.updateQueue=null,he.memoizedState=null)}var Te=Ck(M);if(Te!==null){Te.flags&=-257,Fk(Te,M,G,E,l),Te.mode&1&&bk(E,re,l),l=Te,X=re;var De=l.updateQueue;if(De===null){var Ne=new Set;Ne.add(X),l.updateQueue=Ne}else De.add(X);break e}else{if((l&1)===0){bk(E,re,l),uE();break e}X=Error(t(426))}}else if(Yt&&G.mode&1){var En=Ck(M);if(En!==null){(En.flags&65536)===0&&(En.flags|=256),Fk(En,M,G,E,l),_1(Up(X,G));break e}}E=X=Up(X,G),Un!==4&&(Un=2),Z2===null?Z2=[E]:Z2.push(E),E=M;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var ee=xk(E,X,l);KT(E,ee);break e;case 1:G=X;var Y=E.type,ne=E.stateNode;if((E.flags&128)===0&&(typeof Y.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(uc===null||!uc.has(ne)))){E.flags|=65536,l&=-l,E.lanes|=l;var ge=Ek(E,G,l);KT(E,ge);break e}}E=E.return}while(E!==null)}rI(p)}catch(Oe){l=Oe,In===p&&p!==null&&(In=p=p.return);continue}break}while(!0)}function tI(){var o=Iv.current;return Iv.current=bv,o===null?bv:o}function uE(){(Un===0||Un===3||Un===2)&&(Un=4),Kn===null||(dd&268435455)===0&&(Pv&268435455)===0||pc(Kn,lr)}function Ov(o,l){var p=ft;ft|=2;var y=tI();(Kn!==o||lr!==l)&&(Oo=null,pd(o,l));do try{X4();break}catch(A){eI(o,A)}while(!0);if(E1(),ft=p,Iv.current=y,In!==null)throw Error(t(261));return Kn=null,lr=0,Un}function X4(){for(;In!==null;)nI(In)}function Y4(){for(;In!==null&&!qu();)nI(In)}function nI(o){var l=aI(o.alternate,o,bs);o.memoizedProps=o.pendingProps,l===null?rI(o):In=l,tE.current=null}function rI(o){var l=o;do{var p=l.alternate;if(o=l.return,(l.flags&32768)===0){if(p=z4(p,l,bs),p!==null){In=p;return}}else{if(p=H4(p,l),p!==null){p.flags&=32767,In=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Un=6,In=null;return}}if(l=l.sibling,l!==null){In=l;return}In=l=o}while(l!==null);Un===0&&(Un=5)}function fd(o,l,p){var y=ut,A=ai.transition;try{ai.transition=null,ut=1,J4(o,l,p,y)}finally{ai.transition=A,ut=y}return null}function J4(o,l,p,y){do Hp();while(dc!==null);if((ft&6)!==0)throw Error(t(327));p=o.finishedWork;var A=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var E=p.lanes|p.childLanes;if(Xx(o,E),o===Kn&&(In=Kn=null,lr=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Dv||(Dv=!0,oI(Qu,function(){return Hp(),null})),E=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||E){E=ai.transition,ai.transition=null;var M=ut;ut=1;var G=ft;ft|=4,tE.current=null,G4(o,p),qk(p,o),w4(u1),So=!!c1,u1=c1=null,o.current=p,q4(p),Eo(),ft=G,ut=M,ai.transition=E}else o.current=p;if(Dv&&(Dv=!1,dc=o,Nv=A),E=o.pendingLanes,E===0&&(uc=null),H0(p.stateNode),es(o,Gt()),l!==null)for(y=o.onRecoverableError,p=0;p<l.length;p++)A=l[p],y(A.value,{componentStack:A.stack,digest:A.digest});if(Rv)throw Rv=!1,o=sE,sE=null,o;return(Nv&1)!==0&&o.tag!==0&&Hp(),E=o.pendingLanes,(E&1)!==0?o===iE?eg++:(eg=0,iE=o):eg=0,ac(),null}function Hp(){if(dc!==null){var o=pa(Nv),l=ai.transition,p=ut;try{if(ai.transition=null,ut=16>o?16:o,dc===null)var y=!1;else{if(o=dc,dc=null,Nv=0,(ft&6)!==0)throw Error(t(331));var A=ft;for(ft|=4,Re=o.current;Re!==null;){var E=Re,M=E.child;if((Re.flags&16)!==0){var G=E.deletions;if(G!==null){for(var X=0;X<G.length;X++){var re=G[X];for(Re=re;Re!==null;){var he=Re;switch(he.tag){case 0:case 11:case 15:Y2(8,he,E)}var pe=he.child;if(pe!==null)pe.return=he,Re=pe;else for(;Re!==null;){he=Re;var de=he.sibling,Te=he.return;if($k(he),he===re){Re=null;break}if(de!==null){de.return=Te,Re=de;break}Re=Te}}}var De=E.alternate;if(De!==null){var Ne=De.child;if(Ne!==null){De.child=null;do{var En=Ne.sibling;Ne.sibling=null,Ne=En}while(Ne!==null)}}Re=E}}if((E.subtreeFlags&2064)!==0&&M!==null)M.return=E,Re=M;else e:for(;Re!==null;){if(E=Re,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Y2(9,E,E.return)}var ee=E.sibling;if(ee!==null){ee.return=E.return,Re=ee;break e}Re=E.return}}var Y=o.current;for(Re=Y;Re!==null;){M=Re;var ne=M.child;if((M.subtreeFlags&2064)!==0&&ne!==null)ne.return=M,Re=ne;else e:for(M=Y;Re!==null;){if(G=Re,(G.flags&2048)!==0)try{switch(G.tag){case 0:case 11:case 15:kv(9,G)}}catch(Oe){hn(G,G.return,Oe)}if(G===M){Re=null;break e}var ge=G.sibling;if(ge!==null){ge.return=G.return,Re=ge;break e}Re=G.return}}if(ft=A,ac(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(Ku,o)}catch{}y=!0}return y}finally{ut=p,ai.transition=l}}return!1}function sI(o,l,p){l=Up(p,l),l=xk(o,l,1),o=lc(o,l,1),l=Vr(),o!==null&&(Zu(o,1,l),es(o,l))}function hn(o,l,p){if(o.tag===3)sI(o,o,p);else for(;l!==null;){if(l.tag===3){sI(l,o,p);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(uc===null||!uc.has(y))){o=Up(p,o),o=Ek(l,o,1),l=lc(l,o,1),o=Vr(),l!==null&&(Zu(l,1,o),es(l,o));break}}l=l.return}}function Z4(o,l,p){var y=o.pingCache;y!==null&&y.delete(l),l=Vr(),o.pingedLanes|=o.suspendedLanes&p,Kn===o&&(lr&p)===p&&(Un===4||Un===3&&(lr&130023424)===lr&&500>Gt()-rE?pd(o,0):nE|=p),es(o,l)}function iI(o,l){l===0&&((o.mode&1)===0?l=1:(l=Xl,Xl<<=1,(Xl&130023424)===0&&(Xl=4194304)));var p=Vr();o=No(o,l),o!==null&&(Zu(o,l,p),es(o,p))}function e7(o){var l=o.memoizedState,p=0;l!==null&&(p=l.retryLane),iI(o,p)}function t7(o,l){var p=0;switch(o.tag){case 13:var y=o.stateNode,A=o.memoizedState;A!==null&&(p=A.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),iI(o,p)}var aI;aI=function(o,l,p){if(o!==null)if(o.memoizedProps!==l.pendingProps||Xr.current)Jr=!0;else{if((o.lanes&p)===0&&(l.flags&128)===0)return Jr=!1,$4(o,l,p);Jr=(o.flags&131072)!==0}else Jr=!1,Yt&&(l.flags&1048576)!==0&&VT(l,hv,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Sv(o,l),o=l.pendingProps;var A=Rp(l,Er.current);Bp(l,p),A=N1(null,l,y,o,A,p);var E=M1();return l.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Yr(y)?(E=!0,cv(l)):E=!1,l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,S1(l),A.updater=Cv,l.stateNode=A,A._reactInternals=l,j1(l,y,o,p),l=W1(null,l,y,!0,E,p)):(l.tag=0,Yt&&E&&y1(l),Br(null,l,A,p),l=l.child),l;case 16:y=l.elementType;e:{switch(Sv(o,l),o=l.pendingProps,A=y._init,y=A(y._payload),l.type=y,A=l.tag=r7(y),o=Li(y,o),A){case 0:l=H1(null,l,y,o,p);break e;case 1:l=Rk(null,l,y,o,p);break e;case 11:l=Sk(null,l,y,o,p);break e;case 14:l=Tk(null,l,y,Li(y.type,o),p);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,A=l.pendingProps,A=l.elementType===y?A:Li(y,A),H1(o,l,y,A,p);case 1:return y=l.type,A=l.pendingProps,A=l.elementType===y?A:Li(y,A),Rk(o,l,y,A,p);case 3:e:{if(Dk(l),o===null)throw Error(t(387));y=l.pendingProps,E=l.memoizedState,A=E.element,QT(o,l),wv(l,y,null,p);var M=l.memoizedState;if(y=M.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){A=Up(Error(t(423)),l),l=Nk(o,l,y,p,A);break e}else if(y!==A){A=Up(Error(t(424)),l),l=Nk(o,l,y,p,A);break e}else for(Es=rc(l.stateNode.containerInfo.firstChild),xs=l,Yt=!0,Mi=null,p=GT(l,null,y,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Mp(),y===A){l=Lo(o,l,p);break e}Br(o,l,y,p)}l=l.child}return l;case 5:return YT(l),o===null&&A1(l),y=l.type,A=l.pendingProps,E=o!==null?o.memoizedProps:null,M=A.children,d1(y,A)?M=null:E!==null&&d1(y,E)&&(l.flags|=32),Pk(o,l),Br(o,l,M,p),l.child;case 6:return o===null&&A1(l),null;case 13:return Mk(o,l,p);case 4:return T1(l,l.stateNode.containerInfo),y=l.pendingProps,o===null?l.child=Lp(l,null,y,p):Br(o,l,y,p),l.child;case 11:return y=l.type,A=l.pendingProps,A=l.elementType===y?A:Li(y,A),Sk(o,l,y,A,p);case 7:return Br(o,l,l.pendingProps,p),l.child;case 8:return Br(o,l,l.pendingProps.children,p),l.child;case 12:return Br(o,l,l.pendingProps.children,p),l.child;case 10:e:{if(y=l.type._context,A=l.pendingProps,E=l.memoizedProps,M=A.value,Ut(mv,y._currentValue),y._currentValue=M,E!==null)if(Ni(E.value,M)){if(E.children===A.children&&!Xr.current){l=Lo(o,l,p);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var G=E.dependencies;if(G!==null){M=E.child;for(var X=G.firstContext;X!==null;){if(X.context===y){if(E.tag===1){X=Mo(-1,p&-p),X.tag=2;var re=E.updateQueue;if(re!==null){re=re.shared;var he=re.pending;he===null?X.next=X:(X.next=he.next,he.next=X),re.pending=X}}E.lanes|=p,X=E.alternate,X!==null&&(X.lanes|=p),C1(E.return,p,l),G.lanes|=p;break}X=X.next}}else if(E.tag===10)M=E.type===l.type?null:E.child;else if(E.tag===18){if(M=E.return,M===null)throw Error(t(341));M.lanes|=p,G=M.alternate,G!==null&&(G.lanes|=p),C1(M,p,l),M=E.sibling}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===l){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}Br(o,l,A.children,p),l=l.child}return l;case 9:return A=l.type,y=l.pendingProps.children,Bp(l,p),A=si(A),y=y(A),l.flags|=1,Br(o,l,y,p),l.child;case 14:return y=l.type,A=Li(y,l.pendingProps),A=Li(y.type,A),Tk(o,l,y,A,p);case 15:return kk(o,l,l.type,l.pendingProps,p);case 17:return y=l.type,A=l.pendingProps,A=l.elementType===y?A:Li(y,A),Sv(o,l),l.tag=1,Yr(y)?(o=!0,cv(l)):o=!1,Bp(l,p),Ak(l,y,A),j1(l,y,A,p),W1(null,l,y,!0,o,p);case 19:return Ok(o,l,p);case 22:return Ik(o,l,p)}throw Error(t(156,l.tag))};function oI(o,l){return y2(o,l)}function n7(o,l,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(o,l,p,y){return new n7(o,l,p,y)}function dE(o){return o=o.prototype,!(!o||!o.isReactComponent)}function r7(o){if(typeof o=="function")return dE(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Q)return 11;if(o===_e)return 14}return 2}function fc(o,l){var p=o.alternate;return p===null?(p=oi(o.tag,l,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=l,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,l=o.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function Bv(o,l,p,y,A,E){var M=2;if(y=o,typeof o=="function")dE(o)&&(M=1);else if(typeof o=="string")M=5;else e:switch(o){case N:return md(p.children,A,E,l);case D:M=8,A|=8;break;case L:return o=oi(12,p,l,A|2),o.elementType=L,o.lanes=E,o;case j:return o=oi(13,p,l,A),o.elementType=j,o.lanes=E,o;case me:return o=oi(19,p,l,A),o.elementType=me,o.lanes=E,o;case fe:return Vv(p,A,E,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case U:M=10;break e;case $:M=9;break e;case Q:M=11;break e;case _e:M=14;break e;case we:M=16,y=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=oi(M,p,l,A),l.elementType=o,l.type=y,l.lanes=E,l}function md(o,l,p,y){return o=oi(7,o,y,l),o.lanes=p,o}function Vv(o,l,p,y){return o=oi(22,o,y,l),o.elementType=fe,o.lanes=p,o.stateNode={isHidden:!1},o}function hE(o,l,p){return o=oi(6,o,null,l),o.lanes=p,o}function pE(o,l,p){return l=oi(4,o.children!==null?o.children:[],o.key,l),l.lanes=p,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function s7(o,l,p,y,A){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=x2(0),this.expirationTimes=x2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=x2(0),this.identifierPrefix=y,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function fE(o,l,p,y,A,E,M,G,X){return o=new s7(o,l,p,G,X),l===1?(l=1,E===!0&&(l|=8)):l=0,E=oi(3,null,null,l),o.current=E,E.stateNode=o,E.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},S1(E),o}function i7(o,l,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:y==null?null:""+y,children:o,containerInfo:l,implementation:p}}function lI(o){if(!o)return ic;o=o._reactInternals;e:{if(Ri(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Yr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var p=o.type;if(Yr(p))return LT(o,p,l)}return l}function cI(o,l,p,y,A,E,M,G,X){return o=fE(p,y,!0,o,A,E,M,G,X),o.context=lI(null),p=o.current,y=Vr(),A=hc(p),E=Mo(y,A),E.callback=l??null,lc(p,E,A),o.current.lanes=A,Zu(o,A,y),es(o,y),o}function Uv(o,l,p,y){var A=l.current,E=Vr(),M=hc(A);return p=lI(p),l.context===null?l.context=p:l.pendingContext=p,l=Mo(E,M),l.payload={element:o},y=y===void 0?null:y,y!==null&&(l.callback=y),o=lc(A,l,M),o!==null&&(Vi(o,A,M,E),yv(o,A,M)),M}function jv(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function uI(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<l?p:l}}function mE(o,l){uI(o,l),(o=o.alternate)&&uI(o,l)}function a7(){return null}var dI=typeof reportError=="function"?reportError:function(o){console.error(o)};function gE(o){this._internalRoot=o}$v.prototype.render=gE.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Uv(o,l,null,null)},$v.prototype.unmount=gE.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;hd(function(){Uv(null,o,null,null)}),l[Io]=null}};function $v(o){this._internalRoot=o}$v.prototype.unstable_scheduleHydration=function(o){if(o){var l=F2();o={blockedOn:null,target:o,priority:l};for(var p=0;p<ws.length&&l!==0&&l<ws[p].priority;p++);ws.splice(p,0,o),p===0&&gp(o)}};function yE(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function zv(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function hI(){}function o7(o,l,p,y,A){if(A){if(typeof y=="function"){var E=y;y=function(){var re=jv(M);E.call(re)}}var M=cI(l,y,o,0,null,!1,!1,"",hI);return o._reactRootContainer=M,o[Io]=M.current,B2(o.nodeType===8?o.parentNode:o),hd(),M}for(;A=o.lastChild;)o.removeChild(A);if(typeof y=="function"){var G=y;y=function(){var re=jv(X);G.call(re)}}var X=fE(o,0,!1,null,null,!1,!1,"",hI);return o._reactRootContainer=X,o[Io]=X.current,B2(o.nodeType===8?o.parentNode:o),hd(function(){Uv(l,X,p,y)}),X}function Hv(o,l,p,y,A){var E=p._reactRootContainer;if(E){var M=E;if(typeof A=="function"){var G=A;A=function(){var X=jv(M);G.call(X)}}Uv(l,M,o,A)}else M=o7(p,l,o,A,y);return jv(M)}b2=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var p=vt(l.pendingLanes);p!==0&&(E2(l,p|1),es(l,Gt()),(ft&6)===0&&(zp=Gt()+500,ac()))}break;case 13:hd(function(){var y=No(o,1);if(y!==null){var A=Vr();Vi(y,o,1,A)}}),mE(o,1)}},fp=function(o){if(o.tag===13){var l=No(o,134217728);if(l!==null){var p=Vr();Vi(l,o,134217728,p)}mE(o,134217728)}},C2=function(o){if(o.tag===13){var l=hc(o),p=No(o,l);if(p!==null){var y=Vr();Vi(p,o,l,y)}mE(o,l)}},F2=function(){return ut},S2=function(o,l){var p=ut;try{return ut=o,l()}finally{ut=p}},Ao=function(o,l,p){switch(l){case"input":if(ms(o,p),l=p.name,p.type==="radio"&&l!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var y=p[l];if(y!==o&&y.form===o.form){var A=ov(y);if(!A)throw Error(t(90));Wt(y),ms(y,A)}}}break;case"textarea":R0(o,p);break;case"select":l=p.value,l!=null&&Ii(o,!!p.multiple,l,!1)}},M0=lE,L0=hd;var l7={usingClientEntryPoint:!1,Events:[j2,Ip,ov,Gl,ql,lE]},tg={findFiberByHostInstance:sd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c7={bundleType:tg.bundleType,version:tg.version,rendererPackageName:tg.rendererPackageName,rendererConfig:tg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=z0(o),o===null?null:o.stateNode},findFiberByHostInstance:tg.findFiberByHostInstance||a7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wv.isDisabled&&Wv.supportsFiber)try{Ku=Wv.inject(c7),gs=Wv}catch{}}return ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l7,ts.createPortal=function(o,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yE(l))throw Error(t(200));return i7(o,l,null,p)},ts.createRoot=function(o,l){if(!yE(o))throw Error(t(299));var p=!1,y="",A=dI;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=fE(o,1,!1,null,null,p,!1,y,A),o[Io]=l.current,B2(o.nodeType===8?o.parentNode:o),new gE(l)},ts.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=z0(l),o=o===null?null:o.stateNode,o},ts.flushSync=function(o){return hd(o)},ts.hydrate=function(o,l,p){if(!zv(l))throw Error(t(200));return Hv(null,o,l,!0,p)},ts.hydrateRoot=function(o,l,p){if(!yE(o))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,A=!1,E="",M=dI;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onRecoverableError!==void 0&&(M=p.onRecoverableError)),l=cI(l,null,o,1,p??null,A,!1,E,M),o[Io]=l.current,B2(o),y)for(o=0;o<y.length;o++)p=y[o],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new $v(l)},ts.render=function(o,l,p){if(!zv(l))throw Error(t(200));return Hv(null,o,l,!1,p)},ts.unmountComponentAtNode=function(o){if(!zv(o))throw Error(t(40));return o._reactRootContainer?(hd(function(){Hv(null,null,o,!1,function(){o._reactRootContainer=null,o[Io]=null})}),!0):!1},ts.unstable_batchedUpdates=lE,ts.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!zv(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Hv(o,l,p,!1,y)},ts.version="18.3.1-next-f1338f8080-20240426",ts}var _I;function v7(){if(_I)return _E.exports;_I=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),_E.exports=w7(),_E.exports}var xI;function A7(){if(xI)return qv;xI=1;var s=v7();return qv.createRoot=s.createRoot,qv.hydrateRoot=s.hydrateRoot,qv}var _7=A7();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var EI="popstate";function x7(s={}){function e(r,i){let{pathname:a="/",search:u="",hash:d=""}=Yh(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),wb("",{pathname:a,search:u,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let d=r.location.href,h=d.indexOf("#");u=h===-1?d:d.slice(0,h)}return u+"#"+(typeof i=="string"?i:Kg(i))}function n(r,i){Ti(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return b7(e,t,n,s)}function tn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ti(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function E7(){return Math.random().toString(36).substring(2,10)}function bI(s,e){return{usr:s.state,key:s.key,idx:e}}function wb(s,e,t=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Yh(e):e,state:t,key:e&&e.key||n||E7()}}function Kg({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Yh(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substring(n),s=s.substring(0,n)),s&&(e.pathname=s)}return e}function b7(s,e,t,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,a=r.history,u="POP",d=null,h=f();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function f(){return(a.state||{idx:null}).idx}function g(){u="POP";let S=f(),I=S==null?null:S-h;h=S,d&&d({action:u,location:C.location,delta:I})}function w(S,I){u="PUSH";let O=wb(C.location,S,I);t&&t(O,S),h=f()+1;let R=bI(O,h),V=C.createHref(O);try{a.pushState(R,"",V)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;r.location.assign(V)}i&&d&&d({action:u,location:C.location,delta:1})}function v(S,I){u="REPLACE";let O=wb(C.location,S,I);t&&t(O,S),h=f();let R=bI(O,h),V=C.createHref(O);a.replaceState(R,"",V),i&&d&&d({action:u,location:C.location,delta:0})}function F(S){return C7(S)}let C={get action(){return u},get location(){return s(r,a)},listen(S){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(EI,g),d=S,()=>{r.removeEventListener(EI,g),d=null}},createHref(S){return e(r,S)},createURL:F,encodeLocation(S){let I=F(S);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:w,replace:v,go(S){return a.go(S)}};return C}function C7(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),tn(t,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:Kg(s);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function _D(s,e,t="/"){return F7(s,e,t,!1)}function F7(s,e,t,n){let r=typeof e=="string"?Yh(e):e,i=Rl(r.pathname||"/",t);if(i==null)return null;let a=xD(s);S7(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let h=B7(i);u=L7(a[d],h,n)}return u}function xD(s,e=[],t=[],n="",r=!1){let i=(a,u,d=r,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;tn(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let g=Tl([n,f.relativePath]),w=t.concat(f);a.children&&a.children.length>0&&(tn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),xD(a.children,e,w,g,d)),!(a.path==null&&!a.index)&&e.push({path:g,score:N7(g,a.index),routesMeta:w})};return s.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))i(a,u);else for(let h of ED(a.path))i(a,u,!0,h)}),e}function ED(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let a=ED(n.join("/")),u=[];return u.push(...a.map(d=>d===""?i:[i,d].join("/"))),r&&u.push(...a),u.map(d=>s.startsWith("/")&&d===""?"/":d)}function S7(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:M7(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var T7=/^:[\w-]+$/,k7=3,I7=2,P7=1,R7=10,D7=-2,CI=s=>s==="*";function N7(s,e){let t=s.split("/"),n=t.length;return t.some(CI)&&(n+=D7),e&&(n+=I7),t.filter(r=>!CI(r)).reduce((r,i)=>r+(T7.test(i)?k7:i===""?P7:R7),n)}function M7(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function L7(s,e,t=!1){let{routesMeta:n}=s,r={},i="/",a=[];for(let u=0;u<n.length;++u){let d=n[u],h=u===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=o_({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),w=d.route;if(!g&&h&&t&&!n[n.length-1].route.index&&(g=o_({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:Tl([i,g.pathname]),pathnameBase:$7(Tl([i,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(i=Tl([i,g.pathnameBase]))}return a}function o_(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=O7(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:n.reduce((h,{paramName:f,isOptional:g},w)=>{if(f==="*"){let F=u[w]||"";a=i.slice(0,i.length-F.length).replace(/(.)\/+$/,"$1")}const v=u[w];return g&&!v?h[f]=void 0:h[f]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:s}}function O7(s,e=!1,t=!0){Ti(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function B7(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ti(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Rl(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}var V7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function U7(s,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?Yh(s):s,i;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?i=FI(t.substring(1),"/"):i=FI(t,e)):i=e,{pathname:i,search:z7(n),hash:H7(r)}}function FI(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function bE(s,e,t,n){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j7(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function CF(s){let e=j7(s);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function FF(s,e,t,n=!1){let r;typeof s=="string"?r=Yh(s):(r={...s},tn(!r.pathname||!r.pathname.includes("?"),bE("?","pathname","search",r)),tn(!r.pathname||!r.pathname.includes("#"),bE("#","pathname","hash",r)),tn(!r.search||!r.search.includes("#"),bE("#","search","hash",r)));let i=s===""||r.pathname==="",a=i?"/":r.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!n&&a.startsWith("..")){let w=a.split("/");for(;w[0]==="..";)w.shift(),g-=1;r.pathname=w.join("/")}u=g>=0?e[g]:"/"}let d=U7(r,u),h=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}var Tl=s=>s.join("/").replace(/\/\/+/g,"/"),$7=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),z7=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,H7=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,W7=class{constructor(s,e,t,n=!1){this.status=s,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function G7(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function q7(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var bD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function CD(s,e){let t=s;if(typeof t!="string"||!V7.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,r=!1;if(bD)try{let i=new URL(window.location.href),a=t.startsWith("//")?new URL(i.protocol+t):new URL(t),u=Rl(a.pathname,e);a.origin===i.origin&&u!=null?t=u+a.search+a.hash:r=!0}catch{Ti(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var FD=["POST","PUT","PATCH","DELETE"];new Set(FD);var Q7=["GET",...FD];new Set(Q7);var Zm=K.createContext(null);Zm.displayName="DataRouter";var ax=K.createContext(null);ax.displayName="DataRouterState";var K7=K.createContext(!1),SD=K.createContext({isTransitioning:!1});SD.displayName="ViewTransition";var X7=K.createContext(new Map);X7.displayName="Fetchers";var Y7=K.createContext(null);Y7.displayName="Await";var Zs=K.createContext(null);Zs.displayName="Navigation";var o0=K.createContext(null);o0.displayName="Location";var wo=K.createContext({outlet:null,matches:[],isDataRoute:!1});wo.displayName="Route";var SF=K.createContext(null);SF.displayName="RouteError";var TD="REACT_ROUTER_ERROR",J7="REDIRECT",Z7="ROUTE_ERROR_RESPONSE";function eB(s){if(s.startsWith(`${TD}:${J7}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function tB(s){if(s.startsWith(`${TD}:${Z7}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new W7(e.status,e.statusText,e.data)}catch{}}function nB(s,{relative:e}={}){tn(e2(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=K.useContext(Zs),{hash:r,pathname:i,search:a}=l0(s,{relative:e}),u=i;return t!=="/"&&(u=i==="/"?t:Tl([t,i])),n.createHref({pathname:u,search:a,hash:r})}function e2(){return K.useContext(o0)!=null}function Bu(){return tn(e2(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(o0).location}var kD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ID(s){K.useContext(Zs).static||K.useLayoutEffect(s)}function ox(){let{isDataRoute:s}=K.useContext(wo);return s?mB():rB()}function rB(){tn(e2(),"useNavigate() may be used only in the context of a <Router> component.");let s=K.useContext(Zm),{basename:e,navigator:t}=K.useContext(Zs),{matches:n}=K.useContext(wo),{pathname:r}=Bu(),i=JSON.stringify(CF(n)),a=K.useRef(!1);return ID(()=>{a.current=!0}),K.useCallback((d,h={})=>{if(Ti(a.current,kD),!a.current)return;if(typeof d=="number"){t.go(d);return}let f=FF(d,JSON.parse(i),r,h.relative==="path");s==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Tl([e,f.pathname])),(h.replace?t.replace:t.push)(f,h.state,h)},[e,t,i,r,s])}K.createContext(null);function l0(s,{relative:e}={}){let{matches:t}=K.useContext(wo),{pathname:n}=Bu(),r=JSON.stringify(CF(t));return K.useMemo(()=>FF(s,JSON.parse(r),n,e==="path"),[s,r,n,e])}function sB(s,e){return PD(s,e)}function PD(s,e,t,n,r){var O;tn(e2(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=K.useContext(Zs),{matches:a}=K.useContext(wo),u=a[a.length-1],d=u?u.params:{},h=u?u.pathname:"/",f=u?u.pathnameBase:"/",g=u&&u.route;{let R=g&&g.path||"";DD(h,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let w=Bu(),v;if(e){let R=typeof e=="string"?Yh(e):e;tn(f==="/"||((O=R.pathname)==null?void 0:O.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),v=R}else v=w;let F=v.pathname||"/",C=F;if(f!=="/"){let R=f.replace(/^\//,"").split("/");C="/"+F.replace(/^\//,"").split("/").slice(R.length).join("/")}let S=_D(s,{pathname:C});Ti(g||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ti(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=cB(S&&S.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:Tl([f,i.encodeLocation?i.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Tl([f,i.encodeLocation?i.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),a,t,n,r);return e&&I?K.createElement(o0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},I):I}function iB(){let s=fB(),e=G7(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",s),a=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:i},"ErrorBoundary")," or"," ",K.createElement("code",{style:i},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:r},t):null,a)}var aB=K.createElement(iB,null),RD=class extends K.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=tB(s.digest);t&&(s=t)}let e=s!==void 0?K.createElement(wo.Provider,{value:this.props.routeContext},K.createElement(SF.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?K.createElement(oB,{error:s},e):e}};RD.contextType=K7;var CE=new WeakMap;function oB({children:s,error:e}){let{basename:t}=K.useContext(Zs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=eB(e.digest);if(n){let r=CE.get(e);if(r)throw r;let i=CD(n.location,t);if(bD&&!CE.get(e))if(i.isExternal||n.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:n.replace}));throw CE.set(e,a),a}return K.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return s}function lB({routeContext:s,match:e,children:t}){let n=K.useContext(Zm);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(wo.Provider,{value:s},t)}function cB(s,e=[],t=null,n=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let i=s,a=t==null?void 0:t.errors;if(a!=null){let f=i.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);tn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let u=!1,d=-1;if(t)for(let f=0;f<i.length;f++){let g=i[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:w,errors:v}=t,F=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||F){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}let h=t&&n?(f,g)=>{var w,v;n(f,{location:t.location,params:((v=(w=t.matches)==null?void 0:w[0])==null?void 0:v.params)??{},unstable_pattern:q7(t.matches),errorInfo:g})}:void 0;return i.reduceRight((f,g,w)=>{let v,F=!1,C=null,S=null;t&&(v=a&&g.route.id?a[g.route.id]:void 0,C=g.route.errorElement||aB,u&&(d<0&&w===0?(DD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,S=null):d===w&&(F=!0,S=g.route.hydrateFallbackElement||null)));let I=e.concat(i.slice(0,w+1)),O=()=>{let R;return v?R=C:F?R=S:g.route.Component?R=K.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=f,K.createElement(lB,{match:g,routeContext:{outlet:f,matches:I,isDataRoute:t!=null},children:R})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?K.createElement(RD,{location:t.location,revalidation:t.revalidation,component:C,error:v,children:O(),routeContext:{outlet:null,matches:I,isDataRoute:!0},onError:h}):O()},null)}function TF(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uB(s){let e=K.useContext(Zm);return tn(e,TF(s)),e}function dB(s){let e=K.useContext(ax);return tn(e,TF(s)),e}function hB(s){let e=K.useContext(wo);return tn(e,TF(s)),e}function kF(s){let e=hB(s),t=e.matches[e.matches.length-1];return tn(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function pB(){return kF("useRouteId")}function fB(){var n;let s=K.useContext(SF),e=dB("useRouteError"),t=kF("useRouteError");return s!==void 0?s:(n=e.errors)==null?void 0:n[t]}function mB(){let{router:s}=uB("useNavigate"),e=kF("useNavigate"),t=K.useRef(!1);return ID(()=>{t.current=!0}),K.useCallback(async(r,i={})=>{Ti(t.current,kD),t.current&&(typeof r=="number"?await s.navigate(r):await s.navigate(r,{fromRouteId:e,...i}))},[s,e])}var SI={};function DD(s,e,t){!e&&!SI[s]&&(SI[s]=!0,Ti(!1,t))}K.memo(gB);function gB({routes:s,future:e,state:t,onError:n}){return PD(s,void 0,t,n,e)}function vb({to:s,replace:e,state:t,relative:n}){tn(e2(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=K.useContext(Zs);Ti(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=K.useContext(wo),{pathname:a}=Bu(),u=ox(),d=FF(s,CF(i),a,n==="path"),h=JSON.stringify(d);return K.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:n})},[u,h,n,e,t]),null}function Cs(s){tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yB({basename:s="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:i=!1,unstable_useTransitions:a}){tn(!e2(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=s.replace(/^\/*/,"/"),d=K.useMemo(()=>({basename:u,navigator:r,static:i,unstable_useTransitions:a,future:{}}),[u,r,i,a]);typeof t=="string"&&(t=Yh(t));let{pathname:h="/",search:f="",hash:g="",state:w=null,key:v="default"}=t,F=K.useMemo(()=>{let C=Rl(h,u);return C==null?null:{location:{pathname:C,search:f,hash:g,state:w,key:v},navigationType:n}},[u,h,f,g,w,v,n]);return Ti(F!=null,`<Router basename="${u}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:K.createElement(Zs.Provider,{value:d},K.createElement(o0.Provider,{children:e,value:F}))}function wB({children:s,location:e}){return sB(Ab(s),e)}function Ab(s,e=[]){let t=[];return K.Children.forEach(s,(n,r)=>{if(!K.isValidElement(n))return;let i=[...e,r];if(n.type===K.Fragment){t.push.apply(t,Ab(n.props.children,i));return}tn(n.type===Cs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Ab(n.props.children,i)),t.push(a)}),t}var pA="get",fA="application/x-www-form-urlencoded";function lx(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function vB(s){return lx(s)&&s.tagName.toLowerCase()==="button"}function AB(s){return lx(s)&&s.tagName.toLowerCase()==="form"}function _B(s){return lx(s)&&s.tagName.toLowerCase()==="input"}function xB(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function EB(s,e){return s.button===0&&(!e||e==="_self")&&!xB(s)}var Qv=null;function bB(){if(Qv===null)try{new FormData(document.createElement("form"),0),Qv=!1}catch{Qv=!0}return Qv}var CB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function FE(s){return s!=null&&!CB.has(s)?(Ti(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fA}"`),null):s}function FB(s,e){let t,n,r,i,a;if(AB(s)){let u=s.getAttribute("action");n=u?Rl(u,e):null,t=s.getAttribute("method")||pA,r=FE(s.getAttribute("enctype"))||fA,i=new FormData(s)}else if(vB(s)||_B(s)&&(s.type==="submit"||s.type==="image")){let u=s.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||u.getAttribute("action");if(n=d?Rl(d,e):null,t=s.getAttribute("formmethod")||u.getAttribute("method")||pA,r=FE(s.getAttribute("formenctype"))||FE(u.getAttribute("enctype"))||fA,i=new FormData(u,s),!bB()){let{name:h,type:f,value:g}=s;if(f==="image"){let w=h?`${h}.`:"";i.append(`${w}x`,"0"),i.append(`${w}y`,"0")}else h&&i.append(h,g)}}else{if(lx(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=pA,n=null,r=fA,a=s}return i&&r==="text/plain"&&(a=i,i=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function IF(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function SB(s,e,t,n){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${n}`:r.pathname=`${r.pathname}.${n}`:r.pathname==="/"?r.pathname=`_root.${n}`:e&&Rl(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function TB(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kB(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function IB(s,e,t){let n=await Promise.all(s.map(async r=>{let i=e.routes[r.route.id];if(i){let a=await TB(i,t);return a.links?a.links():[]}return[]}));return NB(n.flat(1).filter(kB).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function TI(s,e,t,n,r,i){let a=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var f;return t[h].pathname!==d.pathname||((f=t[h].route.path)==null?void 0:f.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return i==="assets"?e.filter((d,h)=>a(d,h)||u(d,h)):i==="data"?e.filter((d,h)=>{var g;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(a(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function PB(s,e,{includeHydrateFallback:t}={}){return RB(s.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function RB(s){return[...new Set(s)]}function DB(s){let e={},t=Object.keys(s).sort();for(let n of t)e[n]=s[n];return e}function NB(s,e){let t=new Set;return new Set(e),s.reduce((n,r)=>{let i=JSON.stringify(DB(r));return t.has(i)||(t.add(i),n.push({key:i,link:r})),n},[])}function ND(){let s=K.useContext(Zm);return IF(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function MB(){let s=K.useContext(ax);return IF(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var PF=K.createContext(void 0);PF.displayName="FrameworkContext";function MD(){let s=K.useContext(PF);return IF(s,"You must render this element inside a <HydratedRouter> element"),s}function LB(s,e){let t=K.useContext(PF),[n,r]=K.useState(!1),[i,a]=K.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:f,onTouchStart:g}=e,w=K.useRef(null);K.useEffect(()=>{if(s==="render"&&a(!0),s==="viewport"){let C=I=>{I.forEach(O=>{a(O.isIntersecting)})},S=new IntersectionObserver(C,{threshold:.5});return w.current&&S.observe(w.current),()=>{S.disconnect()}}},[s]),K.useEffect(()=>{if(n){let C=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(C)}}},[n]);let v=()=>{r(!0)},F=()=>{r(!1),a(!1)};return t?s!=="intent"?[i,w,{}]:[i,w,{onFocus:rg(u,v),onBlur:rg(d,F),onMouseEnter:rg(h,v),onMouseLeave:rg(f,F),onTouchStart:rg(g,v)}]:[!1,w,{}]}function rg(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function OB({page:s,...e}){let{router:t}=ND(),n=K.useMemo(()=>_D(t.routes,s,t.basename),[t.routes,s,t.basename]);return n?K.createElement(VB,{page:s,matches:n,...e}):null}function BB(s){let{manifest:e,routeModules:t}=MD(),[n,r]=K.useState([]);return K.useEffect(()=>{let i=!1;return IB(s,e,t).then(a=>{i||r(a)}),()=>{i=!0}},[s,e,t]),n}function VB({page:s,matches:e,...t}){let n=Bu(),{future:r,manifest:i,routeModules:a}=MD(),{basename:u}=ND(),{loaderData:d,matches:h}=MB(),f=K.useMemo(()=>TI(s,e,h,i,n,"data"),[s,e,h,i,n]),g=K.useMemo(()=>TI(s,e,h,i,n,"assets"),[s,e,h,i,n]),w=K.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let C=new Set,S=!1;if(e.forEach(O=>{var V;let R=i.routes[O.route.id];!R||!R.hasLoader||(!f.some(z=>z.route.id===O.route.id)&&O.route.id in d&&((V=a[O.route.id])!=null&&V.shouldRevalidate)||R.hasClientLoader?S=!0:C.add(O.route.id))}),C.size===0)return[];let I=SB(s,u,r.unstable_trailingSlashAwareDataRequests,"data");return S&&C.size>0&&I.searchParams.set("_routes",e.filter(O=>C.has(O.route.id)).map(O=>O.route.id).join(",")),[I.pathname+I.search]},[u,r.unstable_trailingSlashAwareDataRequests,d,n,i,f,e,s,a]),v=K.useMemo(()=>PB(g,i),[g,i]),F=BB(g);return K.createElement(K.Fragment,null,w.map(C=>K.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),v.map(C=>K.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),F.map(({key:C,link:S})=>K.createElement("link",{key:C,nonce:t.nonce,...S,crossOrigin:S.crossOrigin??t.crossOrigin})))}function UB(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var jB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jB&&(window.__reactRouterVersion="7.13.0")}catch{}function $B({basename:s,children:e,unstable_useTransitions:t,window:n}){let r=K.useRef();r.current==null&&(r.current=x7({window:n,v5Compat:!0}));let i=r.current,[a,u]=K.useState({action:i.action,location:i.location}),d=K.useCallback(h=>{t===!1?u(h):K.startTransition(()=>u(h))},[t]);return K.useLayoutEffect(()=>i.listen(d),[i,d]),K.createElement(yB,{basename:s,children:e,location:a.location,navigationType:a.action,navigator:i,unstable_useTransitions:t})}var LD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,l_=K.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:a,state:u,target:d,to:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w,...v},F){let{basename:C,unstable_useTransitions:S}=K.useContext(Zs),I=typeof h=="string"&&LD.test(h),O=CD(h,C);h=O.to;let R=nB(h,{relative:r}),[V,z,W]=LB(n,v),N=WB(h,{replace:a,state:u,target:d,preventScrollReset:f,relative:r,viewTransition:g,unstable_defaultShouldRevalidate:w,unstable_useTransitions:S});function D(U){e&&e(U),U.defaultPrevented||N(U)}let L=K.createElement("a",{...v,...W,href:O.absoluteURL||R,onClick:O.isExternal||i?e:D,ref:UB(F,z),target:d,"data-discover":!I&&t==="render"?"true":void 0});return V&&!I?K.createElement(K.Fragment,null,L,K.createElement(OB,{page:R})):L});l_.displayName="Link";var OD=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:a,viewTransition:u,children:d,...h},f){let g=l0(a,{relative:h.relative}),w=Bu(),v=K.useContext(ax),{navigator:F,basename:C}=K.useContext(Zs),S=v!=null&&XB(g)&&u===!0,I=F.encodeLocation?F.encodeLocation(g).pathname:g.pathname,O=w.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(O=O.toLowerCase(),R=R?R.toLowerCase():null,I=I.toLowerCase()),R&&C&&(R=Rl(R,C)||R);const V=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let z=O===I||!r&&O.startsWith(I)&&O.charAt(V)==="/",W=R!=null&&(R===I||!r&&R.startsWith(I)&&R.charAt(I.length)==="/"),N={isActive:z,isPending:W,isTransitioning:S},D=z?e:void 0,L;typeof n=="function"?L=n(N):L=[n,z?"active":null,W?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let U=typeof i=="function"?i(N):i;return K.createElement(l_,{...h,"aria-current":D,className:L,ref:f,style:U,to:a,viewTransition:u},typeof d=="function"?d(N):d)});OD.displayName="NavLink";var zB=K.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:i,method:a=pA,action:u,onSubmit:d,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w,...v},F)=>{let{unstable_useTransitions:C}=K.useContext(Zs),S=QB(),I=KB(u,{relative:h}),O=a.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&LD.test(u),V=z=>{if(d&&d(z),z.defaultPrevented)return;z.preventDefault();let W=z.nativeEvent.submitter,N=(W==null?void 0:W.getAttribute("formmethod"))||a,D=()=>S(W||z.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:r,state:i,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w});C&&t!==!1?K.startTransition(()=>D()):D()};return K.createElement("form",{ref:F,method:O,action:I,onSubmit:n?d:V,...v,"data-discover":!R&&s==="render"?"true":void 0})});zB.displayName="Form";function HB(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BD(s){let e=K.useContext(Zm);return tn(e,HB(s)),e}function WB(s,{target:e,replace:t,state:n,preventScrollReset:r,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let h=ox(),f=Bu(),g=l0(s,{relative:i});return K.useCallback(w=>{if(EB(w,e)){w.preventDefault();let v=t!==void 0?t:Kg(f)===Kg(g),F=()=>h(s,{replace:v,state:n,preventScrollReset:r,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:u});d?K.startTransition(()=>F()):F()}},[f,h,g,t,n,e,s,r,i,a,u,d])}var GB=0,qB=()=>`__${String(++GB)}__`;function QB(){let{router:s}=BD("useSubmit"),{basename:e}=K.useContext(Zs),t=pB(),n=s.fetch,r=s.navigate;return K.useCallback(async(i,a={})=>{let{action:u,method:d,encType:h,formData:f,body:g}=FB(i,e);if(a.navigate===!1){let w=a.fetcherKey||qB();await n(w,t,a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||d,formEncType:a.encType||h,flushSync:a.flushSync})}else await r(a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||d,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,r,e,t])}function KB(s,{relative:e}={}){let{basename:t}=K.useContext(Zs),n=K.useContext(wo);tn(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={...l0(s||".",{relative:e})},a=Bu();if(s==null){i.search=a.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(g=>g).forEach(g=>u.append("index",g));let f=u.toString();i.search=f?`?${f}`:""}}return(!s||s===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Tl([t,i.pathname])),Kg(i)}function XB(s,{relative:e}={}){let t=K.useContext(SD);tn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=BD("useViewTransitionState"),r=l0(s,{relative:e});if(!t.isTransitioning)return!1;let i=Rl(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Rl(t.nextLocation.pathname,n)||t.nextLocation.pathname;return o_(r.pathname,a)!=null||o_(r.pathname,i)!=null}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JB=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),kI=s=>{const e=JB(s);return e.charAt(0).toUpperCase()+e.slice(1)},VD=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),ZB=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=K.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:a,...u},d)=>K.createElement("svg",{ref:d,...e6,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:VD("lucide",r),...!i&&!ZB(u)&&{"aria-hidden":"true"},...u},[...a.map(([h,f])=>K.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(s,e)=>{const t=K.forwardRef(({className:n,...r},i)=>K.createElement(t6,{ref:i,iconNode:e,className:VD(`lucide-${YB(kI(s))}`,`lucide-${s}`,n),...r}));return t.displayName=kI(s),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],r6=wt("arrow-right",n6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],i6=wt("award",s6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],o6=wt("bell",a6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],c6=wt("book-open",l6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],d6=wt("calendar",u6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],UD=wt("chart-no-axes-column-increasing",h6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],f6=wt("check",p6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],g6=wt("circle-check-big",m6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],w6=wt("circle-x",y6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],A6=wt("dollar-sign",v6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],x6=wt("file-check",_6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],b6=wt("file-spreadsheet",E6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Hm=wt("file-text",C6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],S6=wt("graduation-cap",F6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],k6=wt("image",T6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],P6=wt("layout-dashboard",I6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],D6=wt("list",R6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],M6=wt("lock",N6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],O6=wt("log-out",L6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jD=wt("mail",B6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],$D=wt("megaphone",V6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],RF=wt("pen",U6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],c0=wt("plus",j6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],II=wt("save",$6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],_b=wt("school",z6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],cx=wt("search",H6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],u0=wt("trash-2",W6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],PI=wt("upload",G6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],zD=wt("user",q6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],RI=wt("users",Q6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],X6=wt("video",K6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fg=wt("x",Y6),J6=()=>{};var DI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(s.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Z6=function(s){const e=[];let t=0,n=0;for(;t<s.length;){const r=s[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const i=s[t++];e[n++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=s[t++],a=s[t++],u=s[t++],d=((r&7)<<18|(i&63)<<12|(a&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=s[t++],a=s[t++];e[n++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},WD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<s.length;r+=3){const i=s[r],a=r+1<s.length,u=a?s[r+1]:0,d=r+2<s.length,h=d?s[r+2]:0,f=i>>2,g=(i&3)<<4|u>>4;let w=(u&15)<<2|h>>6,v=h&63;d||(v=64,a||(w=64)),n.push(t[f],t[g],t[w],t[v])}return n.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(HD(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Z6(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<s.length;){const i=t[s.charAt(r++)],u=r<s.length?t[s.charAt(r)]:0;++r;const h=r<s.length?t[s.charAt(r)]:64;++r;const g=r<s.length?t[s.charAt(r)]:64;if(++r,i==null||u==null||h==null||g==null)throw new e5;const w=i<<2|u>>4;if(n.push(w),h!==64){const v=u<<4&240|h>>2;if(n.push(v),g!==64){const F=h<<6&192|g;n.push(F)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class e5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const t5=function(s){const e=HD(s);return WD.encodeByteArray(e,!0)},c_=function(s){return t5(s).replace(/\./g,"")},GD=function(s){try{return WD.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=()=>n5().__FIREBASE_DEFAULTS__,s5=()=>{if(typeof process>"u"||typeof DI>"u")return;const s=DI.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},i5=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&GD(s[1]);return e&&JSON.parse(e)},ux=()=>{try{return J6()||r5()||s5()||i5()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},qD=s=>{var e,t;return(t=(e=ux())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},QD=s=>{const e=qD(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},KD=()=>{var s;return(s=ux())==null?void 0:s.config},XD=s=>{var e;return(e=ux())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DF(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=s.iat||0,i=s.sub||s.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...s};return[c_(JSON.stringify(t)),c_(JSON.stringify(a)),""].join(".")}const $g={};function o5(){const s={prod:[],emulator:[]};for(const e of Object.keys($g))$g[e]?s.emulator.push(e):s.prod.push(e);return s}function l5(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let NI=!1;function NF(s,e){if(typeof window>"u"||typeof document>"u"||!Vu(window.location.host)||$g[s]===e||$g[s]||NI)return;$g[s]=e;function t(w){return`__firebase__banner__${w}`}const n="__firebase__banner",i=o5().prod.length>0;function a(){const w=document.getElementById(n);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,v){w.setAttribute("width","24"),w.setAttribute("id",v),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{NI=!0,a()},w}function f(w,v){w.setAttribute("id",v),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function g(){const w=l5(n),v=t("text"),F=document.getElementById(v)||document.createElement("span"),C=t("learnmore"),S=document.getElementById(C)||document.createElement("a"),I=t("preprendIcon"),O=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const R=w.element;u(R),f(S,C);const V=h();d(O,I),R.append(O,F,S,V),document.body.appendChild(R)}i?(F.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function c5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Or())}function u5(){var e;const s=(e=ux())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function d5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function h5(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function p5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f5(){const s=Or();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function m5(){return!u5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function g5(){try{return typeof indexedDB=="object"}catch{return!1}}function y5(){return new Promise((s,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),s(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="FirebaseError";class vo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=w5,Object.setPrototypeOf(this,vo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d0.prototype.create)}}class d0{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?v5(i,n):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new vo(r,u,n)}}function v5(s,e){return s.replace(A5,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const A5=/\{\$([^}]+)}/g;function _5(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Bh(s,e){if(s===e)return!0;const t=Object.keys(s),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const i=s[r],a=e[r];if(MI(i)&&MI(a)){if(!Bh(i,a))return!1}else if(i!==a)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function MI(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(s){const e=[];for(const[t,n]of Object.entries(s))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function mg(s){const e={};return s.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,i]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function gg(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function x5(s,e){const t=new E5(s,e);return t.subscribe.bind(t)}class E5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");b5(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=SE),r.error===void 0&&(r.error=SE),r.complete===void 0&&(r.complete=SE);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b5(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function SE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(s){return s&&s._delegate?s._delegate:s}class Fu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new a5;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S5(e))try{this.getOrInitializeService({instanceIdentifier:gd})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});n.resolve(i)}catch{}}}}clearInstance(e=gd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gd){return this.instances.has(e)}getOptions(e=gd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);n===u&&a.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:F5(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=gd){return this.component?this.component.multipleInstances?e:gd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F5(s){return s===gd?void 0:s}function S5(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new C5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ot||(ot={}));const k5={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},I5=ot.INFO,P5={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},R5=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),r=P5[e];if(r)console[r](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class MF{constructor(e){this.name=e,this._logLevel=I5,this._logHandler=R5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const D5=(s,e)=>e.some(t=>s instanceof t);let LI,OI;function N5(){return LI||(LI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function M5(){return OI||(OI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JD=new WeakMap,xb=new WeakMap,ZD=new WeakMap,TE=new WeakMap,LF=new WeakMap;function L5(s){const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("success",i),s.removeEventListener("error",a)},i=()=>{t(Au(s.result)),r()},a=()=>{n(s.error),r()};s.addEventListener("success",i),s.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&JD.set(t,s)}).catch(()=>{}),LF.set(e,s),e}function O5(s){if(xb.has(s))return;const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("complete",i),s.removeEventListener("error",a),s.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(s.error||new DOMException("AbortError","AbortError")),r()};s.addEventListener("complete",i),s.addEventListener("error",a),s.addEventListener("abort",a)});xb.set(s,e)}let Eb={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return xb.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ZD.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Au(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function B5(s){Eb=s(Eb)}function V5(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=s.call(kE(this),e,...t);return ZD.set(n,e.sort?e.sort():[e]),Au(n)}:M5().includes(s)?function(...e){return s.apply(kE(this),e),Au(JD.get(this))}:function(...e){return Au(s.apply(kE(this),e))}}function U5(s){return typeof s=="function"?V5(s):(s instanceof IDBTransaction&&O5(s),D5(s,N5())?new Proxy(s,Eb):s)}function Au(s){if(s instanceof IDBRequest)return L5(s);if(TE.has(s))return TE.get(s);const e=U5(s);return e!==s&&(TE.set(s,e),LF.set(e,s)),e}const kE=s=>LF.get(s);function j5(s,e,{blocked:t,upgrade:n,blocking:r,terminated:i}={}){const a=indexedDB.open(s,e),u=Au(a);return n&&a.addEventListener("upgradeneeded",d=>{n(Au(a.result),d.oldVersion,d.newVersion,Au(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{i&&d.addEventListener("close",()=>i()),r&&d.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const $5=["get","getKey","getAll","getAllKeys","count"],z5=["put","add","delete","clear"],IE=new Map;function BI(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(IE.get(e))return IE.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=z5.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||$5.includes(t)))return;const i=async function(a,...u){const d=this.transaction(a,r?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),r&&d.done]))[0]};return IE.set(e,i),i}B5(s=>({...s,get:(e,t,n)=>BI(e,t)||s.get(e,t,n),has:(e,t)=>!!BI(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(W5(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function W5(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bb="@firebase/app",VI="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new MF("@firebase/app"),G5="@firebase/app-compat",q5="@firebase/analytics-compat",Q5="@firebase/analytics",K5="@firebase/app-check-compat",X5="@firebase/app-check",Y5="@firebase/auth",J5="@firebase/auth-compat",Z5="@firebase/database",eV="@firebase/data-connect",tV="@firebase/database-compat",nV="@firebase/functions",rV="@firebase/functions-compat",sV="@firebase/installations",iV="@firebase/installations-compat",aV="@firebase/messaging",oV="@firebase/messaging-compat",lV="@firebase/performance",cV="@firebase/performance-compat",uV="@firebase/remote-config",dV="@firebase/remote-config-compat",hV="@firebase/storage",pV="@firebase/storage-compat",fV="@firebase/firestore",mV="@firebase/ai",gV="@firebase/firestore-compat",yV="firebase",wV="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="[DEFAULT]",vV={[bb]:"fire-core",[G5]:"fire-core-compat",[Q5]:"fire-analytics",[q5]:"fire-analytics-compat",[X5]:"fire-app-check",[K5]:"fire-app-check-compat",[Y5]:"fire-auth",[J5]:"fire-auth-compat",[Z5]:"fire-rtdb",[eV]:"fire-data-connect",[tV]:"fire-rtdb-compat",[nV]:"fire-fn",[rV]:"fire-fn-compat",[sV]:"fire-iid",[iV]:"fire-iid-compat",[aV]:"fire-fcm",[oV]:"fire-fcm-compat",[lV]:"fire-perf",[cV]:"fire-perf-compat",[uV]:"fire-rc",[dV]:"fire-rc-compat",[hV]:"fire-gcs",[pV]:"fire-gcs-compat",[fV]:"fire-fst",[gV]:"fire-fst-compat",[mV]:"fire-vertex","fire-js":"fire-js",[yV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=new Map,AV=new Map,Fb=new Map;function UI(s,e){try{s.container.addComponent(e)}catch(t){Dl.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Vh(s){const e=s.name;if(Fb.has(e))return Dl.debug(`There were multiple attempts to register component ${e}.`),!1;Fb.set(e,s);for(const t of u_.values())UI(t,s);for(const t of AV.values())UI(t,s);return!0}function dx(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function bi(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_u=new d0("app","Firebase",_V);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _u.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=wV;function e3(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const n={name:Cb,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw _u.create("bad-app-name",{appName:String(r)});if(t||(t=KD()),!t)throw _u.create("no-options");const i=u_.get(r);if(i){if(Bh(t,i.options)&&Bh(n,i.config))return i;throw _u.create("duplicate-app",{appName:r})}const a=new T5(r);for(const d of Fb.values())a.addComponent(d);const u=new xV(t,n,a);return u_.set(r,u),u}function OF(s=Cb){const e=u_.get(s);if(!e&&s===Cb&&KD())return e3();if(!e)throw _u.create("no-app",{appName:s});return e}function ro(s,e,t){let n=vV[s]??s;t&&(n+=`-${t}`);const r=n.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const a=[`Unable to register library "${n}" with version "${e}":`];r&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dl.warn(a.join(" "));return}Vh(new Fu(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="firebase-heartbeat-database",bV=1,Xg="firebase-heartbeat-store";let PE=null;function t3(){return PE||(PE=j5(EV,bV,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Xg)}catch(t){console.warn(t)}}}}).catch(s=>{throw _u.create("idb-open",{originalErrorMessage:s.message})})),PE}async function CV(s){try{const t=(await t3()).transaction(Xg),n=await t.objectStore(Xg).get(n3(s));return await t.done,n}catch(e){if(e instanceof vo)Dl.warn(e.message);else{const t=_u.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dl.warn(t.message)}}}async function jI(s,e){try{const n=(await t3()).transaction(Xg,"readwrite");await n.objectStore(Xg).put(e,n3(s)),await n.done}catch(t){if(t instanceof vo)Dl.warn(t.message);else{const n=_u.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dl.warn(n.message)}}}function n3(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=1024,SV=30;class TV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IV(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$I();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>SV){const a=PV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Dl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$I(),{heartbeatsToSend:n,unsentEntries:r}=kV(this._heartbeatsCache.heartbeats),i=c_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Dl.warn(t),""}}}function $I(){return new Date().toISOString().substring(0,10)}function kV(s,e=FV){const t=[];let n=s.slice();for(const r of s){const i=t.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),zI(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),zI(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class IV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return g5()?y5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await CV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return jI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return jI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function zI(s){return c_(JSON.stringify({version:2,heartbeats:s})).length}function PV(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let n=1;n<s.length;n++)s[n].date<t&&(t=s[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(s){Vh(new Fu("platform-logger",e=>new H5(e),"PRIVATE")),Vh(new Fu("heartbeat",e=>new TV(e),"PRIVATE")),ro(bb,VI,s),ro(bb,VI,"esm2020"),ro("fire-js","")}RV("");var DV="firebase",NV="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ro(DV,NV,"app");function r3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MV=r3,s3=new d0("auth","Firebase",r3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=new MF("@firebase/auth");function LV(s,...e){d_.logLevel<=ot.WARN&&d_.warn(`Auth (${Jh}): ${s}`,...e)}function mA(s,...e){d_.logLevel<=ot.ERROR&&d_.error(`Auth (${Jh}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(s,...e){throw BF(s,...e)}function so(s,...e){return BF(s,...e)}function i3(s,e,t){const n={...MV(),[e]:t};return new d0("auth","Firebase",n).create(e,{appName:s.name})}function xu(s){return i3(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BF(s,...e){if(typeof s!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=s.name),s._errorFactory.create(t,...n)}return s3.create(s,...e)}function ze(s,e,...t){if(!s)throw BF(e,...t)}function Fl(s){const e="INTERNAL ASSERTION FAILED: "+s;throw mA(e),new Error(e)}function Nl(s,e){s||Fl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function OV(){return HI()==="http:"||HI()==="https:"}function HI(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OV()||h5()||"connection"in navigator)?navigator.onLine:!0}function VV(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nl(t>e,"Short delay should be less than long delay!"),this.isMobile=c5()||p5()}get(){return BV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(s,e){Nl(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$V=new p0(3e4,6e4);function Zh(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Uu(s,e,t,n,r={}){return o3(s,r,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const u=h0({key:s.config.apiKey,...a}).slice(1),d=await s._getAdditionalHeaders();d["Content-Type"]="application/json",s.languageCode&&(d["X-Firebase-Locale"]=s.languageCode);const h={method:e,headers:d,...i};return d5()||(h.referrerPolicy="no-referrer"),s.emulatorConfig&&Vu(s.emulatorConfig.host)&&(h.credentials="include"),a3.fetch()(await l3(s,s.config.apiHost,t,u),h)})}async function o3(s,e,t){s._canInitEmulator=!1;const n={...UV,...e};try{const r=new HV(s),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Kv(s,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const u=i.ok?a.errorMessage:a.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kv(s,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Kv(s,"email-already-in-use",a);if(d==="USER_DISABLED")throw Kv(s,"user-disabled",a);const f=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw i3(s,f,h);ia(s,f)}}catch(r){if(r instanceof vo)throw r;ia(s,"network-request-failed",{message:String(r)})}}async function hx(s,e,t,n,r={}){const i=await Uu(s,e,t,n,r);return"mfaPendingCredential"in i&&ia(s,"multi-factor-auth-required",{_serverResponse:i}),i}async function l3(s,e,t,n){const r=`${e}${t}?${n}`,i=s,a=i.config.emulator?VF(s.config,r):`${s.config.apiScheme}://${r}`;return jV.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function zV(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(so(this.auth,"network-request-failed")),$V.get())})}}function Kv(s,e,t){const n={appName:s.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=so(s,e,n);return r.customData._tokenResponse=t,r}function WI(s){return s!==void 0&&s.enterprise!==void 0}class WV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GV(s,e){return Uu(s,"GET","/v2/recaptchaConfig",Zh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV(s,e){return Uu(s,"POST","/v1/accounts:delete",e)}async function h_(s,e){return Uu(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QV(s,e=!1){const t=wn(s),n=await t.getIdToken(e),r=UF(n);ze(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:r,token:n,authTime:zg(RE(r.auth_time)),issuedAtTime:zg(RE(r.iat)),expirationTime:zg(RE(r.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function RE(s){return Number(s)*1e3}function UF(s){const[e,t,n]=s.split(".");if(e===void 0||t===void 0||n===void 0)return mA("JWT malformed, contained fewer than 3 sections"),null;try{const r=GD(t);return r?JSON.parse(r):(mA("Failed to decode base64 JWT payload"),null)}catch(r){return mA("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function GI(s){const e=UF(s);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yg(s,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof vo&&KV(n)&&s.auth.currentUser===s&&await s.auth.signOut(),n}}function KV({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zg(this.lastLoginAt),this.creationTime=zg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p_(s){var g;const e=s.auth,t=await s.getIdToken(),n=await Yg(s,h_(e,{idToken:t}));ze(n==null?void 0:n.users.length,e,"internal-error");const r=n.users[0];s._notifyReloadListener(r);const i=(g=r.providerUserInfo)!=null&&g.length?c3(r.providerUserInfo):[],a=JV(s.providerData,i),u=s.isAnonymous,d=!(s.email&&r.passwordHash)&&!(a!=null&&a.length),h=u?d:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Tb(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(s,f)}async function YV(s){const e=wn(s);await p_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JV(s,e){return[...s.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function c3(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV(s,e){const t=await o3(s,{},async()=>{const n=h0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=s.config,a=await l3(s,r,"/v1/token",`key=${i}`),u=await s._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return s.emulatorConfig&&Vu(s.emulatorConfig.host)&&(d.credentials="include"),a3.fetch()(a,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function eU(s,e){return Uu(s,"POST","/v2/accounts:revokeToken",Zh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const t=GI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await ZV(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,a=new df;return n&&(ze(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),r&&(ze(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),i&&(ze(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new df,this.toJSON())}_performRefresh(){return Fl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(s,e){ze(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ea{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new XV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Tb(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Yg(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return QV(this,e)}reload(){return YV(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ea({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await p_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(xu(this.auth));const e=await this.getIdToken();return await Yg(this,qV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,a=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:g,emailVerified:w,isAnonymous:v,providerData:F,stsTokenManager:C}=t;ze(g&&C,e,"internal-error");const S=df.fromJSON(this.name,C);ze(typeof g=="string",e,"internal-error"),gc(n,e.name),gc(r,e.name),ze(typeof w=="boolean",e,"internal-error"),ze(typeof v=="boolean",e,"internal-error"),gc(i,e.name),gc(a,e.name),gc(u,e.name),gc(d,e.name),gc(h,e.name),gc(f,e.name);const I=new ea({uid:g,auth:e,email:r,emailVerified:w,displayName:n,isAnonymous:v,photoURL:a,phoneNumber:i,tenantId:u,stsTokenManager:S,createdAt:h,lastLoginAt:f});return F&&Array.isArray(F)&&(I.providerData=F.map(O=>({...O}))),d&&(I._redirectEventId=d),I}static async _fromIdTokenResponse(e,t,n=!1){const r=new df;r.updateFromServerResponse(t);const i=new ea({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await p_(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ze(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?c3(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),u=new df;u.updateFromIdToken(n);const d=new ea({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Tb(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=new Map;function Sl(s){Nl(s instanceof Function,"Expected a class definition");let e=qI.get(s);return e?(Nl(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,qI.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}u3.type="NONE";const QI=u3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(s,e,t){return`firebase:${s}:${e}:${t}`}class hf{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=gA(this.userKey,r.apiKey,i),this.fullPersistenceKey=gA("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await h_(this.auth,{idToken:e}).catch(()=>{});return t?ea._fromGetAccountInfoResponse(this.auth,t,e):null}return ea._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new hf(Sl(QI),e,n);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||Sl(QI);const a=gA(n,e.config.apiKey,e.name);let u=null;for(const h of t)try{const f=await h._get(a);if(f){let g;if(typeof f=="string"){const w=await h_(e,{idToken:f}).catch(()=>{});if(!w)break;g=await ea._fromGetAccountInfoResponse(e,w,f)}else g=ea._fromJSON(e,f);h!==i&&(u=g),i=h;break}}catch{}const d=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new hf(i,e,n):(i=d[0],u&&await i._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(a)}catch{}})),new hf(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(f3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(g3(e))return"Blackberry";if(y3(e))return"Webos";if(h3(e))return"Safari";if((e.includes("chrome/")||p3(e))&&!e.includes("edge/"))return"Chrome";if(m3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=s.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function d3(s=Or()){return/firefox\//i.test(s)}function h3(s=Or()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p3(s=Or()){return/crios\//i.test(s)}function f3(s=Or()){return/iemobile/i.test(s)}function m3(s=Or()){return/android/i.test(s)}function g3(s=Or()){return/blackberry/i.test(s)}function y3(s=Or()){return/webos/i.test(s)}function jF(s=Or()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function tU(s=Or()){var e;return jF(s)&&!!((e=window.navigator)!=null&&e.standalone)}function nU(){return f5()&&document.documentMode===10}function w3(s=Or()){return jF(s)||m3(s)||y3(s)||g3(s)||/windows phone/i.test(s)||f3(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(s,e=[]){let t;switch(s){case"Browser":t=KI(Or());break;case"Worker":t=`${KI(Or())}-${s}`;break;default:t=s}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Jh}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((a,u)=>{try{const d=e(i);a(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(s,e={}){return Uu(s,"GET","/v2/passwordPolicy",Zh(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=6;class aU{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??iU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new XI(this),this.idTokenSubscription=new XI(this),this.beforeStateQueue=new rU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sl(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await hf.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await h_(this,{idToken:e}),n=await ea._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(bi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,u=n==null?void 0:n._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===u)&&(d!=null&&d.user)&&(n=d.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await p_(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(xu(this));const t=e?wn(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(xu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(xu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sU(this),t=new aU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new d0("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await eU(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sl(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=await hf.create(this,[Sl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(u,this,"internal-error"),u.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,r);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&LV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function t2(s){return wn(s)}class XI{constructor(e){this.auth=e,this.observer=null,this.addObserver=x5(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let px={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lU(s){px=s}function A3(s){return px.loadJS(s)}function cU(){return px.recaptchaEnterpriseScript}function uU(){return px.gapiScript}function dU(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class hU{constructor(){this.enterprise=new pU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const fU="recaptcha-enterprise",_3="NO_RECAPTCHA";class mU{constructor(e){this.type=fU,this.auth=t2(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,u)=>{GV(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new WV(d);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,a(h.siteKey)}}).catch(d=>{u(d)})})}function r(i,a,u){const d=window.grecaptcha;WI(d)?d.enterprise.ready(()=>{d.enterprise.execute(i,{action:e}).then(h=>{a(h)}).catch(()=>{a(_3)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hU().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{n(this.auth).then(u=>{if(!t&&WI(window.grecaptcha))r(u,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=cU();d.length!==0&&(d+=u),A3(d).then(()=>{r(u,i,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function YI(s,e,t,n=!1,r=!1){const i=new mU(s);let a;if(r)a=_3;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function JI(s,e,t,n,r){var i;if((i=s._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await YI(s,e,t,t==="getOobCode");return n(s,a)}else return n(s,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await YI(s,e,t,t==="getOobCode");return n(s,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(s,e){const t=dx(s,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(Bh(i,e??{}))return r;ia(r,"already-initialized")}return t.initialize({options:e})}function yU(s,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Sl);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function wU(s,e,t){const n=t2(s);ze(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,i=x3(e),{host:a,port:u}=vU(e),d=u===null?"":`:${u}`,h={url:`${i}//${a}${d}/`},f=Object.freeze({host:a,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){ze(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ze(Bh(h,n.config.emulator)&&Bh(f,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=f,n.settings.appVerificationDisabledForTesting=!0,Vu(a)?(DF(`${i}//${a}${d}`),NF("Auth",!0)):AU()}function x3(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function vU(s){const e=x3(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const i=r[1];return{host:i,port:ZI(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:ZI(a)}}}function ZI(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function AU(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fl("not implemented")}_getIdTokenResponse(e){return Fl("not implemented")}_linkToIdToken(e,t){return Fl("not implemented")}_getReauthenticationResolver(e){return Fl("not implemented")}}async function _U(s,e){return Uu(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(s,e){return hx(s,"POST","/v1/accounts:signInWithPassword",Zh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(s,e){return hx(s,"POST","/v1/accounts:signInWithEmailLink",Zh(s,e))}async function bU(s,e){return hx(s,"POST","/v1/accounts:signInWithEmailLink",Zh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends $F{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Jg(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Jg(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return JI(e,t,"signInWithPassword",xU);case"emailLink":return EU(e,{email:this._email,oobCode:this._password});default:ia(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return JI(e,n,"signUpPassword",_U);case"emailLink":return bU(e,{idToken:t,email:this._email,oobCode:this._password});default:ia(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pf(s,e){return hx(s,"POST","/v1/accounts:signInWithIdp",Zh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU="http://localhost";class Uh extends $F{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Uh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ia("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const a=new Uh(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return pf(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pf(e,t)}buildRequest(){const e={requestUri:CU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=h0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SU(s){const e=mg(gg(s)).link,t=e?mg(gg(e)).deep_link_id:null,n=mg(gg(s)).deep_link_id;return(n?mg(gg(n)).link:null)||n||t||e||s}class zF{constructor(e){const t=mg(gg(e)),n=t.apiKey??null,r=t.oobCode??null,i=FU(t.mode??null);ze(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=SU(e);try{return new zF(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.providerId=n2.PROVIDER_ID}static credential(e,t){return Jg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=zF.parseLink(t);return ze(n,"argument-error"),Jg._fromEmailAndCode(e,n.code,n.tenantId)}}n2.PROVIDER_ID="password";n2.EMAIL_PASSWORD_SIGN_IN_METHOD="password";n2.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0 extends E3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends f0{constructor(){super("facebook.com")}static credential(e){return Uh._fromParams({providerId:wc.PROVIDER_ID,signInMethod:wc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wc.credentialFromTaggedObject(e)}static credentialFromError(e){return wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wc.credential(e.oauthAccessToken)}catch{return null}}}wc.FACEBOOK_SIGN_IN_METHOD="facebook.com";wc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends f0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Uh._fromParams({providerId:vc.PROVIDER_ID,signInMethod:vc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vc.credentialFromTaggedObject(e)}static credentialFromError(e){return vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return vc.credential(t,n)}catch{return null}}}vc.GOOGLE_SIGN_IN_METHOD="google.com";vc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends f0{constructor(){super("github.com")}static credential(e){return Uh._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ac.credential(e.oauthAccessToken)}catch{return null}}}Ac.GITHUB_SIGN_IN_METHOD="github.com";Ac.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends f0{constructor(){super("twitter.com")}static credential(e,t){return Uh._fromParams({providerId:_c.PROVIDER_ID,signInMethod:_c.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _c.credentialFromTaggedObject(e)}static credentialFromError(e){return _c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return _c.credential(t,n)}catch{return null}}}_c.TWITTER_SIGN_IN_METHOD="twitter.com";_c.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await ea._fromIdTokenResponse(e,n,r),a=eP(n);return new Wm({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=eP(n);return new Wm({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function eP(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_ extends vo{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,f_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new f_(e,t,n,r)}}function b3(s,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?f_._fromErrorAndOperation(s,i,e,n):i})}async function TU(s,e,t=!1){const n=await Yg(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Wm._forOperation(s,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(s,e,t=!1){const{auth:n}=s;if(bi(n.app))return Promise.reject(xu(n));const r="reauthenticate";try{const i=await Yg(s,b3(n,r,e,s),t);ze(i.idToken,n,"internal-error");const a=UF(i.idToken);ze(a,n,"internal-error");const{sub:u}=a;return ze(s.uid===u,n,"user-mismatch"),Wm._forOperation(s,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ia(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3(s,e,t=!1){if(bi(s.app))return Promise.reject(xu(s));const n="signIn",r=await b3(s,n,e),i=await Wm._fromIdTokenResponse(s,n,r);return t||await s._updateCurrentUser(i.user),i}async function IU(s,e){return C3(t2(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(s){const e=t2(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function RU(s,e,t){return bi(s.app)?Promise.reject(xu(s)):IU(wn(s),n2.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&PU(s),n})}function DU(s,e,t,n){return wn(s).onIdTokenChanged(e,t,n)}function NU(s,e,t){return wn(s).beforeAuthStateChanged(e,t)}function MU(s,e,t,n){return wn(s).onAuthStateChanged(e,t,n)}const m_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(m_,"1"),this.storage.removeItem(m_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=1e3,OU=10;class S3 extends F3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);nU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,OU):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},LU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}S3.type="LOCAL";const BU=S3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3 extends F3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}T3.type="SESSION";const k3=T3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new fx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const u=Array.from(a).map(async h=>h(t.origin,i)),d=await VU(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(s="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((u,d)=>{const h=HF("",20);r.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(g){const w=g;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(w.data.response);break;default:clearTimeout(f),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(){return window}function jU(s){io().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(){return typeof io().WorkerGlobalScope<"u"&&typeof io().importScripts=="function"}async function $U(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zU(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function HU(){return I3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="firebaseLocalStorageDb",WU=1,g_="firebaseLocalStorage",R3="fbase_key";class m0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function mx(s,e){return s.transaction([g_],e?"readwrite":"readonly").objectStore(g_)}function GU(){const s=indexedDB.deleteDatabase(P3);return new m0(s).toPromise()}function kb(){const s=indexedDB.open(P3,WU);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const n=s.result;try{n.createObjectStore(g_,{keyPath:R3})}catch(r){t(r)}}),s.addEventListener("success",async()=>{const n=s.result;n.objectStoreNames.contains(g_)?e(n):(n.close(),await GU(),e(await kb()))})})}async function tP(s,e,t){const n=mx(s,!0).put({[R3]:e,value:t});return new m0(n).toPromise()}async function qU(s,e){const t=mx(s,!1).get(e),n=await new m0(t).toPromise();return n===void 0?null:n.value}function nP(s,e){const t=mx(s,!0).delete(e);return new m0(t).toPromise()}const QU=800,KU=3;class D3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kb(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>KU)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fx._getInstance(HU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await $U(),!this.activeServiceWorker)return;this.sender=new UU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kb();return await tP(e,m_,"1"),await nP(e,m_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>tP(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>qU(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nP(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=mx(r,!1).getAll();return new m0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D3.type="LOCAL";const XU=D3;new p0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(s,e){return e?Sl(e):(ze(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF extends $F{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JU(s){return C3(s.auth,new WF(s),s.bypassAuthState)}function ZU(s){const{auth:e,user:t}=s;return ze(t,e,"internal-error"),kU(t,new WF(s),s.bypassAuthState)}async function ej(s){const{auth:e,user:t}=s;return ze(t,e,"internal-error"),TU(t,new WF(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:u}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JU;case"linkViaPopup":case"linkViaRedirect":return ej;case"reauthViaPopup":case"reauthViaRedirect":return ZU;default:ia(this.auth,"internal-error")}}resolve(e){Nl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=new p0(2e3,1e4);class rf extends N3{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,rf.currentPopupAction&&rf.currentPopupAction.cancel(),rf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Nl(this.filter.length===1,"Popup operations only handle one event");const e=HF();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(so(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(so(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(so(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tj.get())};e()}}rf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="pendingRedirect",yA=new Map;class rj extends N3{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=yA.get(this.auth._key());if(!e){try{const n=await sj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}yA.set(this.auth._key(),e)}return this.bypassAuthState||yA.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sj(s,e){const t=oj(e),n=aj(s);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function ij(s,e){yA.set(s._key(),e)}function aj(s){return Sl(s._redirectPersistence)}function oj(s){return gA(nj,s.config.apiKey,s.name)}async function lj(s,e,t=!1){if(bi(s.app))return Promise.reject(xu(s));const n=t2(s),r=YU(n,e),a=await new rj(n,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=600*1e3;class uj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!M3(e)){const r=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(so(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cj&&this.cachedEventUids.clear(),this.cachedEventUids.has(rP(e))}saveEventToCache(e){this.cachedEventUids.add(rP(e)),this.lastProcessedEventTime=Date.now()}}function rP(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function M3({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dj(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M3(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(s,e={}){return Uu(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fj=/^https?/;async function mj(s){if(s.config.emulator)return;const{authorizedDomains:e}=await hj(s);for(const t of e)try{if(gj(t))return}catch{}ia(s,"unauthorized-domain")}function gj(s){const e=Sb(),{protocol:t,hostname:n}=new URL(e);if(s.startsWith("chrome-extension://")){const a=new URL(s);return a.hostname===""&&n===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!fj.test(t))return!1;if(pj.test(s))return n===s;const r=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=new p0(3e4,6e4);function sP(){const s=io().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function wj(s){return new Promise((e,t)=>{var r,i,a;function n(){sP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sP(),t(so(s,"network-request-failed"))},timeout:yj.get()})}if((i=(r=io().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=io().gapi)!=null&&a.load)n();else{const u=dU("iframefcb");return io()[u]=()=>{gapi.load?n():t(so(s,"network-request-failed"))},A3(`${uU()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw wA=null,e})}let wA=null;function vj(s){return wA=wA||wj(s),wA}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new p0(5e3,15e3),_j="__/auth/iframe",xj="emulator/auth/iframe",Ej={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cj(s){const e=s.config;ze(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?VF(e,xj):`https://${s.config.authDomain}/${_j}`,n={apiKey:e.apiKey,appName:s.name,v:Jh},r=bj.get(s.config.apiHost);r&&(n.eid=r);const i=s._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${h0(n).slice(1)}`}async function Fj(s){const e=await vj(s),t=io().gapi;return ze(t,s,"internal-error"),e.open({where:document.body,url:Cj(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ej,dontclear:!0},n=>new Promise(async(r,i)=>{await n.restyle({setHideOnLeave:!1});const a=so(s,"network-request-failed"),u=io().setTimeout(()=>{i(a)},Aj.get());function d(){io().clearTimeout(u),r(n)}n.ping(d).then(d,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tj=500,kj=600,Ij="_blank",Pj="http://localhost";class iP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rj(s,e,t,n=Tj,r=kj){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...Sj,width:n.toString(),height:r.toString(),top:i,left:a},h=Or().toLowerCase();t&&(u=p3(h)?Ij:t),d3(h)&&(e=e||Pj,d.scrollbars="yes");const f=Object.entries(d).reduce((w,[v,F])=>`${w}${v}=${F},`,"");if(tU(h)&&u!=="_self")return Dj(e||"",u),new iP(null);const g=window.open(e||"",u,f);ze(g,s,"popup-blocked");try{g.focus()}catch{}return new iP(g)}function Dj(s,e){const t=document.createElement("a");t.href=s,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="__/auth/handler",Mj="emulator/auth/handler",Lj=encodeURIComponent("fac");async function aP(s,e,t,n,r,i){ze(s.config.authDomain,s,"auth-domain-config-required"),ze(s.config.apiKey,s,"invalid-api-key");const a={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:n,v:Jh,eventId:r};if(e instanceof E3){e.setDefaultLanguage(s.languageCode),a.providerId=e.providerId||"",_5(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))a[f]=g}if(e instanceof f0){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(a.scopes=f.join(","))}s.tenantId&&(a.tid=s.tenantId);const u=a;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const d=await s._getAppCheckToken(),h=d?`#${Lj}=${encodeURIComponent(d)}`:"";return`${Oj(s)}?${h0(u).slice(1)}${h}`}function Oj({config:s}){return s.emulator?VF(s,Mj):`https://${s.authDomain}/${Nj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="webStorageSupport";class Bj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k3,this._completeRedirectFn=lj,this._overrideRedirectResult=ij}async _openPopup(e,t,n,r){var a;Nl((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await aP(e,t,n,Sb(),r);return Rj(e,i,HF())}async _openRedirect(e,t,n,r){await this._originValidation(e);const i=await aP(e,t,n,Sb(),r);return jU(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(Nl(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Fj(e),n=new uj(e);return t.register("authEvent",r=>(ze(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(DE,{type:DE},r=>{var a;const i=(a=r==null?void 0:r[0])==null?void 0:a[DE];i!==void 0&&t(!!i),ia(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return w3()||h3()||jF()}}const Vj=Bj;var oP="@firebase/auth",lP="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $j(s){Vh(new Fu("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=n.options;ze(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:a,authDomain:u,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v3(s)},h=new oU(n,r,i,d);return yU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Vh(new Fu("auth-internal",e=>{const t=t2(e.getProvider("auth").getImmediate());return(n=>new Uj(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ro(oP,lP,jj(s)),ro(oP,lP,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=300,Hj=XD("authIdTokenMaxAge")||zj;let cP=null;const Wj=s=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Hj)return;const r=t==null?void 0:t.token;cP!==r&&(cP=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Gj(s=OF()){const e=dx(s,"auth");if(e.isInitialized())return e.getImmediate();const t=gU(s,{popupRedirectResolver:Vj,persistence:[XU,BU,k3]}),n=XD("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=Wj(i.toString());NU(t,a,()=>a(t.currentUser)),DU(t,u=>a(u))}}const r=qD("auth");return r&&wU(t,`http://${r}`),t}function qj(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}lU({loadJS(s){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",s),n.onload=e,n.onerror=r=>{const i=so("internal-error");i.customData=r,t(i)},n.type="text/javascript",n.charset="UTF-8",qj().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$j("Browser");var uP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eu,L3;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,D){function L(){}L.prototype=D.prototype,N.F=D.prototype,N.prototype=new L,N.prototype.constructor=N,N.D=function(U,$,Q){for(var j=Array(arguments.length-2),me=2;me<arguments.length;me++)j[me-2]=arguments[me];return D.prototype[$].apply(U,j)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,D,L){L||(L=0);const U=Array(16);if(typeof D=="string")for(var $=0;$<16;++$)U[$]=D.charCodeAt(L++)|D.charCodeAt(L++)<<8|D.charCodeAt(L++)<<16|D.charCodeAt(L++)<<24;else for($=0;$<16;++$)U[$]=D[L++]|D[L++]<<8|D[L++]<<16|D[L++]<<24;D=N.g[0],L=N.g[1],$=N.g[2];let Q=N.g[3],j;j=D+(Q^L&($^Q))+U[0]+3614090360&4294967295,D=L+(j<<7&4294967295|j>>>25),j=Q+($^D&(L^$))+U[1]+3905402710&4294967295,Q=D+(j<<12&4294967295|j>>>20),j=$+(L^Q&(D^L))+U[2]+606105819&4294967295,$=Q+(j<<17&4294967295|j>>>15),j=L+(D^$&(Q^D))+U[3]+3250441966&4294967295,L=$+(j<<22&4294967295|j>>>10),j=D+(Q^L&($^Q))+U[4]+4118548399&4294967295,D=L+(j<<7&4294967295|j>>>25),j=Q+($^D&(L^$))+U[5]+1200080426&4294967295,Q=D+(j<<12&4294967295|j>>>20),j=$+(L^Q&(D^L))+U[6]+2821735955&4294967295,$=Q+(j<<17&4294967295|j>>>15),j=L+(D^$&(Q^D))+U[7]+4249261313&4294967295,L=$+(j<<22&4294967295|j>>>10),j=D+(Q^L&($^Q))+U[8]+1770035416&4294967295,D=L+(j<<7&4294967295|j>>>25),j=Q+($^D&(L^$))+U[9]+2336552879&4294967295,Q=D+(j<<12&4294967295|j>>>20),j=$+(L^Q&(D^L))+U[10]+4294925233&4294967295,$=Q+(j<<17&4294967295|j>>>15),j=L+(D^$&(Q^D))+U[11]+2304563134&4294967295,L=$+(j<<22&4294967295|j>>>10),j=D+(Q^L&($^Q))+U[12]+1804603682&4294967295,D=L+(j<<7&4294967295|j>>>25),j=Q+($^D&(L^$))+U[13]+4254626195&4294967295,Q=D+(j<<12&4294967295|j>>>20),j=$+(L^Q&(D^L))+U[14]+2792965006&4294967295,$=Q+(j<<17&4294967295|j>>>15),j=L+(D^$&(Q^D))+U[15]+1236535329&4294967295,L=$+(j<<22&4294967295|j>>>10),j=D+($^Q&(L^$))+U[1]+4129170786&4294967295,D=L+(j<<5&4294967295|j>>>27),j=Q+(L^$&(D^L))+U[6]+3225465664&4294967295,Q=D+(j<<9&4294967295|j>>>23),j=$+(D^L&(Q^D))+U[11]+643717713&4294967295,$=Q+(j<<14&4294967295|j>>>18),j=L+(Q^D&($^Q))+U[0]+3921069994&4294967295,L=$+(j<<20&4294967295|j>>>12),j=D+($^Q&(L^$))+U[5]+3593408605&4294967295,D=L+(j<<5&4294967295|j>>>27),j=Q+(L^$&(D^L))+U[10]+38016083&4294967295,Q=D+(j<<9&4294967295|j>>>23),j=$+(D^L&(Q^D))+U[15]+3634488961&4294967295,$=Q+(j<<14&4294967295|j>>>18),j=L+(Q^D&($^Q))+U[4]+3889429448&4294967295,L=$+(j<<20&4294967295|j>>>12),j=D+($^Q&(L^$))+U[9]+568446438&4294967295,D=L+(j<<5&4294967295|j>>>27),j=Q+(L^$&(D^L))+U[14]+3275163606&4294967295,Q=D+(j<<9&4294967295|j>>>23),j=$+(D^L&(Q^D))+U[3]+4107603335&4294967295,$=Q+(j<<14&4294967295|j>>>18),j=L+(Q^D&($^Q))+U[8]+1163531501&4294967295,L=$+(j<<20&4294967295|j>>>12),j=D+($^Q&(L^$))+U[13]+2850285829&4294967295,D=L+(j<<5&4294967295|j>>>27),j=Q+(L^$&(D^L))+U[2]+4243563512&4294967295,Q=D+(j<<9&4294967295|j>>>23),j=$+(D^L&(Q^D))+U[7]+1735328473&4294967295,$=Q+(j<<14&4294967295|j>>>18),j=L+(Q^D&($^Q))+U[12]+2368359562&4294967295,L=$+(j<<20&4294967295|j>>>12),j=D+(L^$^Q)+U[5]+4294588738&4294967295,D=L+(j<<4&4294967295|j>>>28),j=Q+(D^L^$)+U[8]+2272392833&4294967295,Q=D+(j<<11&4294967295|j>>>21),j=$+(Q^D^L)+U[11]+1839030562&4294967295,$=Q+(j<<16&4294967295|j>>>16),j=L+($^Q^D)+U[14]+4259657740&4294967295,L=$+(j<<23&4294967295|j>>>9),j=D+(L^$^Q)+U[1]+2763975236&4294967295,D=L+(j<<4&4294967295|j>>>28),j=Q+(D^L^$)+U[4]+1272893353&4294967295,Q=D+(j<<11&4294967295|j>>>21),j=$+(Q^D^L)+U[7]+4139469664&4294967295,$=Q+(j<<16&4294967295|j>>>16),j=L+($^Q^D)+U[10]+3200236656&4294967295,L=$+(j<<23&4294967295|j>>>9),j=D+(L^$^Q)+U[13]+681279174&4294967295,D=L+(j<<4&4294967295|j>>>28),j=Q+(D^L^$)+U[0]+3936430074&4294967295,Q=D+(j<<11&4294967295|j>>>21),j=$+(Q^D^L)+U[3]+3572445317&4294967295,$=Q+(j<<16&4294967295|j>>>16),j=L+($^Q^D)+U[6]+76029189&4294967295,L=$+(j<<23&4294967295|j>>>9),j=D+(L^$^Q)+U[9]+3654602809&4294967295,D=L+(j<<4&4294967295|j>>>28),j=Q+(D^L^$)+U[12]+3873151461&4294967295,Q=D+(j<<11&4294967295|j>>>21),j=$+(Q^D^L)+U[15]+530742520&4294967295,$=Q+(j<<16&4294967295|j>>>16),j=L+($^Q^D)+U[2]+3299628645&4294967295,L=$+(j<<23&4294967295|j>>>9),j=D+($^(L|~Q))+U[0]+4096336452&4294967295,D=L+(j<<6&4294967295|j>>>26),j=Q+(L^(D|~$))+U[7]+1126891415&4294967295,Q=D+(j<<10&4294967295|j>>>22),j=$+(D^(Q|~L))+U[14]+2878612391&4294967295,$=Q+(j<<15&4294967295|j>>>17),j=L+(Q^($|~D))+U[5]+4237533241&4294967295,L=$+(j<<21&4294967295|j>>>11),j=D+($^(L|~Q))+U[12]+1700485571&4294967295,D=L+(j<<6&4294967295|j>>>26),j=Q+(L^(D|~$))+U[3]+2399980690&4294967295,Q=D+(j<<10&4294967295|j>>>22),j=$+(D^(Q|~L))+U[10]+4293915773&4294967295,$=Q+(j<<15&4294967295|j>>>17),j=L+(Q^($|~D))+U[1]+2240044497&4294967295,L=$+(j<<21&4294967295|j>>>11),j=D+($^(L|~Q))+U[8]+1873313359&4294967295,D=L+(j<<6&4294967295|j>>>26),j=Q+(L^(D|~$))+U[15]+4264355552&4294967295,Q=D+(j<<10&4294967295|j>>>22),j=$+(D^(Q|~L))+U[6]+2734768916&4294967295,$=Q+(j<<15&4294967295|j>>>17),j=L+(Q^($|~D))+U[13]+1309151649&4294967295,L=$+(j<<21&4294967295|j>>>11),j=D+($^(L|~Q))+U[4]+4149444226&4294967295,D=L+(j<<6&4294967295|j>>>26),j=Q+(L^(D|~$))+U[11]+3174756917&4294967295,Q=D+(j<<10&4294967295|j>>>22),j=$+(D^(Q|~L))+U[2]+718787259&4294967295,$=Q+(j<<15&4294967295|j>>>17),j=L+(Q^($|~D))+U[9]+3951481745&4294967295,N.g[0]=N.g[0]+D&4294967295,N.g[1]=N.g[1]+($+(j<<21&4294967295|j>>>11))&4294967295,N.g[2]=N.g[2]+$&4294967295,N.g[3]=N.g[3]+Q&4294967295}n.prototype.v=function(N,D){D===void 0&&(D=N.length);const L=D-this.blockSize,U=this.C;let $=this.h,Q=0;for(;Q<D;){if($==0)for(;Q<=L;)r(this,N,Q),Q+=this.blockSize;if(typeof N=="string"){for(;Q<D;)if(U[$++]=N.charCodeAt(Q++),$==this.blockSize){r(this,U),$=0;break}}else for(;Q<D;)if(U[$++]=N[Q++],$==this.blockSize){r(this,U),$=0;break}}this.h=$,this.o+=D},n.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var D=1;D<N.length-8;++D)N[D]=0;D=this.o*8;for(var L=N.length-8;L<N.length;++L)N[L]=D&255,D/=256;for(this.v(N),N=Array(16),D=0,L=0;L<4;++L)for(let U=0;U<32;U+=8)N[D++]=this.g[L]>>>U&255;return N};function i(N,D){var L=u;return Object.prototype.hasOwnProperty.call(L,N)?L[N]:L[N]=D(N)}function a(N,D){this.h=D;const L=[];let U=!0;for(let $=N.length-1;$>=0;$--){const Q=N[$]|0;U&&Q==D||(L[$]=Q,U=!1)}this.g=L}var u={};function d(N){return-128<=N&&N<128?i(N,function(D){return new a([D|0],D<0?-1:0)}):new a([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return g;if(N<0)return S(h(-N));const D=[];let L=1;for(let U=0;N>=L;U++)D[U]=N/L|0,L*=4294967296;return new a(D,0)}function f(N,D){if(N.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(N.charAt(0)=="-")return S(f(N.substring(1),D));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=h(Math.pow(D,8));let U=g;for(let Q=0;Q<N.length;Q+=8){var $=Math.min(8,N.length-Q);const j=parseInt(N.substring(Q,Q+$),D);$<8?($=h(Math.pow(D,$)),U=U.j($).add(h(j))):(U=U.j(L),U=U.add(h(j)))}return U}var g=d(0),w=d(1),v=d(16777216);s=a.prototype,s.m=function(){if(C(this))return-S(this).m();let N=0,D=1;for(let L=0;L<this.g.length;L++){const U=this.i(L);N+=(U>=0?U:4294967296+U)*D,D*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(F(this))return"0";if(C(this))return"-"+S(this).toString(N);const D=h(Math.pow(N,6));var L=this;let U="";for(;;){const $=V(L,D).g;L=I(L,$.j(D));let Q=((L.g.length>0?L.g[0]:L.h)>>>0).toString(N);if(L=$,F(L))return Q+U;for(;Q.length<6;)Q="0"+Q;U=Q+U}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function F(N){if(N.h!=0)return!1;for(let D=0;D<N.g.length;D++)if(N.g[D]!=0)return!1;return!0}function C(N){return N.h==-1}s.l=function(N){return N=I(this,N),C(N)?-1:F(N)?0:1};function S(N){const D=N.g.length,L=[];for(let U=0;U<D;U++)L[U]=~N.g[U];return new a(L,~N.h).add(w)}s.abs=function(){return C(this)?S(this):this},s.add=function(N){const D=Math.max(this.g.length,N.g.length),L=[];let U=0;for(let $=0;$<=D;$++){let Q=U+(this.i($)&65535)+(N.i($)&65535),j=(Q>>>16)+(this.i($)>>>16)+(N.i($)>>>16);U=j>>>16,Q&=65535,j&=65535,L[$]=j<<16|Q}return new a(L,L[L.length-1]&-2147483648?-1:0)};function I(N,D){return N.add(S(D))}s.j=function(N){if(F(this)||F(N))return g;if(C(this))return C(N)?S(this).j(S(N)):S(S(this).j(N));if(C(N))return S(this.j(S(N)));if(this.l(v)<0&&N.l(v)<0)return h(this.m()*N.m());const D=this.g.length+N.g.length,L=[];for(var U=0;U<2*D;U++)L[U]=0;for(U=0;U<this.g.length;U++)for(let $=0;$<N.g.length;$++){const Q=this.i(U)>>>16,j=this.i(U)&65535,me=N.i($)>>>16,_e=N.i($)&65535;L[2*U+2*$]+=j*_e,O(L,2*U+2*$),L[2*U+2*$+1]+=Q*_e,O(L,2*U+2*$+1),L[2*U+2*$+1]+=j*me,O(L,2*U+2*$+1),L[2*U+2*$+2]+=Q*me,O(L,2*U+2*$+2)}for(N=0;N<D;N++)L[N]=L[2*N+1]<<16|L[2*N];for(N=D;N<2*D;N++)L[N]=0;return new a(L,0)};function O(N,D){for(;(N[D]&65535)!=N[D];)N[D+1]+=N[D]>>>16,N[D]&=65535,D++}function R(N,D){this.g=N,this.h=D}function V(N,D){if(F(D))throw Error("division by zero");if(F(N))return new R(g,g);if(C(N))return D=V(S(N),D),new R(S(D.g),S(D.h));if(C(D))return D=V(N,S(D)),new R(S(D.g),D.h);if(N.g.length>30){if(C(N)||C(D))throw Error("slowDivide_ only works with positive integers.");for(var L=w,U=D;U.l(N)<=0;)L=z(L),U=z(U);var $=W(L,1),Q=W(U,1);for(U=W(U,2),L=W(L,2);!F(U);){var j=Q.add(U);j.l(N)<=0&&($=$.add(L),Q=j),U=W(U,1),L=W(L,1)}return D=I(N,$.j(D)),new R($,D)}for($=g;N.l(D)>=0;){for(L=Math.max(1,Math.floor(N.m()/D.m())),U=Math.ceil(Math.log(L)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),Q=h(L),j=Q.j(D);C(j)||j.l(N)>0;)L-=U,Q=h(L),j=Q.j(D);F(Q)&&(Q=w),$=$.add(Q),N=I(N,j)}return new R($,N)}s.B=function(N){return V(this,N).h},s.and=function(N){const D=Math.max(this.g.length,N.g.length),L=[];for(let U=0;U<D;U++)L[U]=this.i(U)&N.i(U);return new a(L,this.h&N.h)},s.or=function(N){const D=Math.max(this.g.length,N.g.length),L=[];for(let U=0;U<D;U++)L[U]=this.i(U)|N.i(U);return new a(L,this.h|N.h)},s.xor=function(N){const D=Math.max(this.g.length,N.g.length),L=[];for(let U=0;U<D;U++)L[U]=this.i(U)^N.i(U);return new a(L,this.h^N.h)};function z(N){const D=N.g.length+1,L=[];for(let U=0;U<D;U++)L[U]=N.i(U)<<1|N.i(U-1)>>>31;return new a(L,N.h)}function W(N,D){const L=D>>5;D%=32;const U=N.g.length-L,$=[];for(let Q=0;Q<U;Q++)$[Q]=D>0?N.i(Q+L)>>>D|N.i(Q+L+1)<<32-D:N.i(Q+L);return new a($,N.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,L3=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Eu=a}).apply(typeof uP<"u"?uP:typeof self<"u"?self:typeof window<"u"?window:{});var Xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O3,yg,B3,vA,Ib,V3,U3,j3;(function(){var s,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xv=="object"&&Xv];for(var b=0;b<m.length;++b){var k=m[b];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var n=t(this);function r(m,b){if(b)e:{var k=n;m=m.split(".");for(var B=0;B<m.length-1;B++){var te=m[B];if(!(te in k))break e;k=k[te]}m=m[m.length-1],B=k[m],b=b(B),b!=B&&b!=null&&e(k,m,{configurable:!0,writable:!0,value:b})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(b){var k=[],B;for(B in b)Object.prototype.hasOwnProperty.call(b,B)&&k.push([B,b[B]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function u(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function d(m,b,k){return m.call.apply(m.bind,arguments)}function h(m,b,k){return h=d,h.apply(null,arguments)}function f(m,b){var k=Array.prototype.slice.call(arguments,1);return function(){var B=k.slice();return B.push.apply(B,arguments),m.apply(this,B)}}function g(m,b){function k(){}k.prototype=b.prototype,m.Z=b.prototype,m.prototype=new k,m.prototype.constructor=m,m.Ob=function(B,te,se){for(var ve=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)ve[Ye-2]=arguments[Ye];return b.prototype[te].apply(B,ve)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function v(m){const b=m.length;if(b>0){const k=Array(b);for(let B=0;B<b;B++)k[B]=m[B];return k}return[]}function F(m,b){for(let B=1;B<arguments.length;B++){const te=arguments[B];var k=typeof te;if(k=k!="object"?k:te?Array.isArray(te)?"array":k:"null",k=="array"||k=="object"&&typeof te.length=="number"){k=m.length||0;const se=te.length||0;m.length=k+se;for(let ve=0;ve<se;ve++)m[k+ve]=te[ve]}else m.push(te)}}class C{constructor(b,k){this.i=b,this.j=k,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function S(m){a.setTimeout(()=>{throw m},0)}function I(){var m=N;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class O{constructor(){this.h=this.g=null}add(b,k){const B=R.get();B.set(b,k),this.h?this.h.next=B:this.g=B,this.h=B}}var R=new C(()=>new V,m=>m.reset());class V{constructor(){this.next=this.g=this.h=null}set(b,k){this.h=b,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let z,W=!1,N=new O,D=()=>{const m=Promise.resolve(void 0);z=()=>{m.then(L)}};function L(){for(var m;m=I();){try{m.h.call(m.g)}catch(k){S(k)}var b=R;b.j(m),b.h<100&&(b.h++,m.next=b.g,b.g=m)}W=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const k=()=>{};a.addEventListener("test",k,b),a.removeEventListener("test",k,b)}catch{}return m})();function j(m){return/^[\s\xa0]*$/.test(m)}function me(m,b){$.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,b)}g(me,$),me.prototype.init=function(m,b){const k=this.type=m.type,B=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget,b||(k=="mouseover"?b=m.fromElement:k=="mouseout"&&(b=m.toElement)),this.relatedTarget=b,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),we=0;function fe(m,b,k,B,te){this.listener=m,this.proxy=null,this.src=b,this.type=k,this.capture=!!B,this.ha=te,this.key=++we,this.da=this.fa=!1}function oe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Z(m,b,k){for(const B in m)b.call(k,m[B],B,m)}function J(m,b){for(const k in m)b.call(void 0,m[k],k,m)}function H(m){const b={};for(const k in m)b[k]=m[k];return b}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(m,b){let k,B;for(let te=1;te<arguments.length;te++){B=arguments[te];for(k in B)m[k]=B[k];for(let se=0;se<q.length;se++)k=q[se],Object.prototype.hasOwnProperty.call(B,k)&&(m[k]=B[k])}}function ye(m){this.src=m,this.g={},this.h=0}ye.prototype.add=function(m,b,k,B,te){const se=m.toString();m=this.g[se],m||(m=this.g[se]=[],this.h++);const ve=Ce(m,b,B,te);return ve>-1?(b=m[ve],k||(b.fa=!1)):(b=new fe(b,this.src,se,!!B,te),b.fa=k,m.push(b)),b};function Ae(m,b){const k=b.type;if(k in m.g){var B=m.g[k],te=Array.prototype.indexOf.call(B,b,void 0),se;(se=te>=0)&&Array.prototype.splice.call(B,te,1),se&&(oe(b),m.g[k].length==0&&(delete m.g[k],m.h--))}}function Ce(m,b,k,B){for(let te=0;te<m.length;++te){const se=m[te];if(!se.da&&se.listener==b&&se.capture==!!k&&se.ha==B)return te}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),Be={};function be(m,b,k,B,te){if(Array.isArray(b)){for(let se=0;se<b.length;se++)be(m,b[se],k,B,te);return null}return k=c2(k),m&&m[_e]?m.J(b,k,u(B)?!!B.capture:!1,te):Me(m,b,k,!1,B,te)}function Me(m,b,k,B,te,se){if(!b)throw Error("Invalid event type");const ve=u(te)?!!te.capture:!!te;let Ye=Ct(m);if(Ye||(m[Se]=Ye=new ye(m)),k=Ye.add(b,k,B,ve,se),k.proxy)return k;if(B=rt(),k.proxy=B,B.src=m,B.listener=k,m.addEventListener)Q||(te=ve),te===void 0&&(te=!1),m.addEventListener(b.toString(),B,te);else if(m.attachEvent)m.attachEvent(ue(b.toString()),B);else if(m.addListener&&m.removeListener)m.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return k}function rt(){function m(k){return b.call(m.src,m.listener,k)}const b=We;return m}function Wt(m,b,k,B,te){if(Array.isArray(b))for(var se=0;se<b.length;se++)Wt(m,b[se],k,B,te);else B=u(B)?!!B.capture:!!B,k=c2(k),m&&m[_e]?(m=m.i,se=String(b).toString(),se in m.g&&(b=m.g[se],k=Ce(b,k,B,te),k>-1&&(oe(b[k]),Array.prototype.splice.call(b,k,1),b.length==0&&(delete m.g[se],m.h--)))):m&&(m=Ct(m))&&(b=m.g[b.toString()],m=-1,b&&(m=Ce(b,k,B,te)),(k=m>-1?b[m]:null)&&Vt(k))}function Vt(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[_e])Ae(b.i,m);else{var k=m.type,B=m.proxy;b.removeEventListener?b.removeEventListener(k,B,m.capture):b.detachEvent?b.detachEvent(ue(k),B):b.addListener&&b.removeListener&&b.removeListener(B),(k=Ct(b))?(Ae(k,m),k.h==0&&(k.src=null,b[Se]=null)):oe(m)}}}function ue(m){return m in Be?Be[m]:Be[m]="on"+m}function We(m,b){if(m.da)m=!0;else{b=new me(b,this);const k=m.listener,B=m.ha||m.src;m.fa&&Vt(m),m=k.call(B,b)}return m}function Ct(m){return m=m[Se],m instanceof ye?m:null}var ms="__closure_events_fn_"+(Math.random()*1e9>>>0);function c2(m){return typeof m=="function"?m:(m[ms]||(m[ms]=function(b){return m.handleEvent(b)}),m[ms])}function Tn(){U.call(this),this.i=new ye(this),this.M=this,this.G=null}g(Tn,U),Tn.prototype[_e]=!0,Tn.prototype.removeEventListener=function(m,b,k,B){Wt(this,m,b,k,B)};function _n(m,b){var k,B=m.G;if(B)for(k=[];B;B=B.G)k.push(B);if(m=m.M,B=b.type||b,typeof b=="string")b=new $(b,m);else if(b instanceof $)b.target=b.target||m;else{var te=b;b=new $(B,m),ie(b,te)}te=!0;let se,ve;if(k)for(ve=k.length-1;ve>=0;ve--)se=b.g=k[ve],te=Ii(se,B,!0,b)&&te;if(se=b.g=m,te=Ii(se,B,!0,b)&&te,te=Ii(se,B,!1,b)&&te,k)for(ve=0;ve<k.length;ve++)se=b.g=k[ve],te=Ii(se,B,!1,b)&&te}Tn.prototype.N=function(){if(Tn.Z.N.call(this),this.i){var m=this.i;for(const b in m.g){const k=m.g[b];for(let B=0;B<k.length;B++)oe(k[B]);delete m.g[b],m.h--}}this.G=null},Tn.prototype.J=function(m,b,k,B){return this.i.add(String(m),b,!1,k,B)},Tn.prototype.K=function(m,b,k,B){return this.i.add(String(m),b,!0,k,B)};function Ii(m,b,k,B){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();let te=!0;for(let se=0;se<b.length;++se){const ve=b[se];if(ve&&!ve.da&&ve.capture==k){const Ye=ve.listener,xn=ve.ha||ve.src;ve.fa&&Ae(m.i,ve),te=Ye.call(xn,B)!==!1&&te}}return te&&!B.defaultPrevented}function u2(m,b){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:a.setTimeout(m,b||0)}function d2(m){m.g=u2(()=>{m.g=null,m.i&&(m.i=!1,d2(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class R0 extends U{constructor(b,k){super(),this.m=b,this.l=k,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:d2(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jl(m){U.call(this),this.h=m,this.g={}}g(jl,U);var h2=[];function ap(m){Z(m.g,function(b,k){this.g.hasOwnProperty(k)&&Vt(b)},m),m.g={}}jl.prototype.N=function(){jl.Z.N.call(this),ap(this)},jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $l=a.JSON.stringify,D0=a.JSON.parse,Hu=class{stringify(m){return a.JSON.stringify(m,void 0)}parse(m){return a.JSON.parse(m,void 0)}};function zl(){}function N0(){}var Hl={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function op(){$.call(this,"d")}g(op,$);function p2(){$.call(this,"c")}g(p2,$);var Pi={},lp=null;function Wl(){return lp=lp||new Tn}Pi.Ia="serverreachability";function cp(m){$.call(this,Pi.Ia,m)}g(cp,$);function Ao(m){const b=Wl();_n(b,new cp(b))}Pi.STAT_EVENT="statevent";function _o(m,b){$.call(this,Pi.STAT_EVENT,m),this.stat=b}g(_o,$);function dn(m){const b=Wl();_n(b,new _o(b,m))}Pi.Ja="timingevent";function f2(m,b){$.call(this,Pi.Ja,m),this.size=b}g(f2,$);function Gl(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){m()},b)}function ql(){this.g=!0}ql.prototype.ua=function(){this.g=!1};function M0(m,b,k,B,te,se){m.info(function(){if(m.g)if(se){var ve="",Ye=se.split("&");for(let Ft=0;Ft<Ye.length;Ft++){var xn=Ye[Ft].split("=");if(xn.length>1){const kn=xn[0];xn=xn[1];const _s=kn.split("_");ve=_s.length>=2&&_s[1]=="type"?ve+(kn+"="+xn+"&"):ve+(kn+"=redacted&")}}}else ve=null;else ve=se;return"XMLHTTP REQ ("+B+") [attempt "+te+"]: "+b+`
`+k+`
`+ve})}function L0(m,b,k,B,te,se,ve){m.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+te+"]: "+b+`
`+k+`
`+se+" "+ve})}function ca(m,b,k,B){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Wu(m,k)+(B?" "+B:"")})}function O0(m,b){m.info(function(){return"TIMEOUT: "+b})}ql.prototype.info=function(){};function Wu(m,b){if(!m.g)return b;if(!b)return null;try{const se=JSON.parse(b);if(se){for(m=0;m<se.length;m++)if(Array.isArray(se[m])){var k=se[m];if(!(k.length<2)){var B=k[1];if(Array.isArray(B)&&!(B.length<1)){var te=B[0];if(te!="noop"&&te!="stop"&&te!="close")for(let ve=1;ve<B.length;ve++)B[ve]=""}}}}return $l(se)}catch{return b}}var Ql={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},B0;function xo(){}g(xo,zl),xo.prototype.g=function(){return new XMLHttpRequest},B0=new xo;function ua(m){return encodeURIComponent(String(m))}function up(m){var b=1;m=m.split(":");const k=[];for(;b>0&&m.length;)k.push(m.shift()),b--;return m.length&&k.push(m.join(":")),k}function ei(m,b,k,B){this.j=m,this.i=b,this.l=k,this.S=B||1,this.V=new jl(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new V0}function V0(){this.i=null,this.g="",this.h=!1}var U0={},m2={};function Ri(m,b,k){m.M=1,m.A=bo(ti(b)),m.u=k,m.R=!0,g2(m,null)}function g2(m,b){m.F=Date.now(),Gu(m),m.B=ti(m.A);var k=m.B,B=m.S;Array.isArray(B)||(B=[String(B)]),F2(k.i,"t",B),m.C=0,k=m.j.L,m.h=new V0,m.g=X0(m.j,k?b:null,!m.u),m.P>0&&(m.O=new R0(h(m.Y,m,m.g),m.P)),b=m.V,k=m.g,B=m.ba;var te="readystatechange";Array.isArray(te)||(te&&(h2[0]=te.toString()),te=h2);for(let se=0;se<te.length;se++){const ve=be(k,te[se],B||b.handleEvent,!1,b.h||b);if(!ve)break;b.g[ve.key]=ve}b=m.J?H(m.J):{},m.u?(m.v||(m.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,b)):(m.v="GET",m.g.ea(m.B,m.v,null,b)),Ao(),M0(m.i,m.v,m.B,m.l,m.S,m.u)}ei.prototype.ba=function(m){m=m.target;const b=this.O;b&&ya(m)==3?b.j():this.Y(m)},ei.prototype.Y=function(m){try{if(m==this.g)e:{const Ye=ya(this.g),xn=this.g.ya(),Ft=this.g.ca();if(!(Ye<3)&&(Ye!=3||this.g&&(this.h.h||this.g.la()||Q0(this.g)))){this.K||Ye!=4||xn==7||(xn==8||Ft<=0?Ao(3):Ao(2)),dp(this);var b=this.g.ca();this.X=b;var k=j0(this);if(this.o=b==200,L0(this.i,this.v,this.B,this.l,this.S,Ye,b),this.o){if(this.U&&!this.L){t:{if(this.g){var B,te=this.g;if((B=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(B)){var se=B;break t}}se=null}if(m=se)ca(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gt(this,m);else{this.o=!1,this.m=3,dn(12),Eo(this),qu(this);break e}}if(this.R){m=!0;let kn;for(;!this.K&&this.C<k.length;)if(kn=z0(this,k),kn==m2){Ye==4&&(this.m=4,dn(14),m=!1),ca(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==U0){this.m=4,dn(15),ca(this.i,this.l,k,"[Invalid Chunk]"),m=!1;break}else ca(this.i,this.l,kn,null),Gt(this,kn);if($0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||k.length!=0||this.h.h||(this.m=1,dn(16),m=!1),this.o=this.o&&m,!m)ca(this.i,this.l,k,"[Invalid Chunked Response]"),Eo(this),qu(this);else if(k.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),nd(ve),ve.P=!0,dn(11))}}else ca(this.i,this.l,k,null),Gt(this,k);Ye==4&&Eo(this),this.o&&!this.K&&(Ye==4?_p(this.j,this):(this.o=!1,Gu(this)))}else T2(this.g),b==400&&k.indexOf("Unknown SID")>0?(this.m=3,dn(12)):(this.m=0,dn(13)),Eo(this),qu(this)}}}catch{}finally{}};function j0(m){if(!$0(m))return m.g.la();const b=Q0(m.g);if(b==="")return"";let k="";const B=b.length,te=ya(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Eo(m),qu(m),"";m.h.i=new a.TextDecoder}for(let se=0;se<B;se++)m.h.h=!0,k+=m.h.i.decode(b[se],{stream:!(te&&se==B-1)});return b.length=0,m.h.g+=k,m.C=0,m.h.g}function $0(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function z0(m,b){var k=m.C,B=b.indexOf(`
`,k);return B==-1?m2:(k=Number(b.substring(k,B)),isNaN(k)?U0:(B+=1,B+k>b.length?m2:(b=b.slice(B,B+k),m.C=B+k,b)))}ei.prototype.cancel=function(){this.K=!0,Eo(this)};function Gu(m){m.T=Date.now()+m.H,y2(m,m.H)}function y2(m,b){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Gl(h(m.aa,m),b)}function dp(m){m.D&&(a.clearTimeout(m.D),m.D=null)}ei.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(O0(this.i,this.B),this.M!=2&&(Ao(),dn(17)),Eo(this),this.m=2,qu(this)):y2(this,this.T-m)};function qu(m){m.j.I==0||m.K||_p(m.j,m)}function Eo(m){dp(m);var b=m.O;b&&typeof b.dispose=="function"&&b.dispose(),m.O=null,ap(m.V),m.g&&(b=m.g,m.g=null,b.abort(),b.dispose())}function Gt(m,b){try{var k=m.j;if(k.I!=0&&(k.g==m||v2(k.h,m))){if(!m.L&&v2(k.h,m)&&k.I==3){try{var B=k.Ba.g.parse(b)}catch{B=null}if(Array.isArray(B)&&B.length==3){var te=B;if(te[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<m.F)Ap(k),vs(k);else break e;Aa(k),dn(18)}}else k.xa=te[1],0<k.xa-k.K&&te[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Gl(h(k.Va,k),6e3));Qu(k.h)<=1&&k.ta&&(k.ta=void 0)}else As(k,11)}else if((m.L||k.g==m)&&Ap(k),!j(b))for(te=k.Ba.g.parse(b),b=0;b<te.length;b++){let Ft=te[b];const kn=Ft[0];if(!(kn<=k.K))if(k.K=kn,Ft=Ft[1],k.I==2)if(Ft[0]=="c"){k.M=Ft[1],k.ba=Ft[2];const _s=Ft[3];_s!=null&&(k.ka=_s,k.j.info("VER="+k.ka));const ko=Ft[4];ko!=null&&(k.za=ko,k.j.info("SVER="+k.za));const _a=Ft[5];_a!=null&&typeof _a=="number"&&_a>0&&(B=1.5*_a,k.O=B,k.j.info("backChannelRequestTimeoutMs_="+B)),B=k;const xa=m.g;if(xa){const bp=xa.g?xa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bp){var se=B.h;se.g||bp.indexOf("spdy")==-1&&bp.indexOf("quic")==-1&&bp.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(pp(se,se.h),se.h=null))}if(B.G){const P2=xa.g?xa.g.getResponseHeader("X-HTTP-Session-Id"):null;P2&&(B.wa=P2,vt(B.J,B.G,P2))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-m.F,k.j.info("Handshake RTT: "+k.T+"ms")),B=k;var ve=m;if(B.na=I2(B,B.L?B.ba:null,B.W),ve.L){Ku(B.h,ve);var Ye=ve,xn=B.O;xn&&(Ye.H=xn),Ye.D&&(dp(Ye),Gu(Ye)),B.g=ve}else xr(B);k.i.length>0&&To(k)}else Ft[0]!="stop"&&Ft[0]!="close"||As(k,7);else k.I==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?As(k,7):wp(k):Ft[0]!="noop"&&k.l&&k.l.qa(Ft),k.A=0)}}Ao(4)}catch{}}var Kx=class{constructor(m,b){this.g=m,this.map=b}};function hp(m){this.l=m||10,a.PerformanceNavigationTiming?(m=a.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function w2(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Qu(m){return m.h?1:m.g?m.g.size:0}function v2(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function pp(m,b){m.g?m.g.add(b):m.h=b}function Ku(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}hp.prototype.cancel=function(){if(this.i=gs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function gs(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const k of m.g.values())b=b.concat(k.G);return b}return v(m.i)}var H0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ys(m,b){if(m){m=m.split("&");for(let k=0;k<m.length;k++){const B=m[k].indexOf("=");let te,se=null;B>=0?(te=m[k].substring(0,B),se=m[k].substring(B+1)):te=m[k],b(te,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function da(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;m instanceof da?(this.l=m.l,Xu(this,m.j),this.o=m.o,this.g=m.g,ha(this,m.u),this.h=m.h,Xl(this,S2(m.i)),this.m=m.m):m&&(b=String(m).match(H0))?(this.l=!1,Xu(this,b[1]||"",!0),this.o=Yu(b[2]||""),this.g=Yu(b[3]||"",!0),ha(this,b[4]),this.h=Yu(b[5]||"",!0),Xl(this,b[6]||"",!0),this.m=Yu(b[7]||"")):(this.l=!1,this.i=new ut(null,this.l))}da.prototype.toString=function(){const m=[];var b=this.j;b&&m.push(Ju(b,_2,!0),":");var k=this.g;return(k||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Ju(b,_2,!0),"@"),m.push(ua(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&m.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&m.push("/"),m.push(Ju(k,k.charAt(0)=="/"?Zu:x2,!0))),(k=this.i.toString())&&m.push("?",k),(k=this.m)&&m.push("#",Ju(k,E2)),m.join("")},da.prototype.resolve=function(m){const b=ti(this);let k=!!m.j;k?Xu(b,m.j):k=!!m.o,k?b.o=m.o:k=!!m.g,k?b.g=m.g:k=m.u!=null;var B=m.h;if(k)ha(b,m.u);else if(k=!!m.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var te=b.h.lastIndexOf("/");te!=-1&&(B=b.h.slice(0,te+1)+B)}if(te=B,te==".."||te==".")B="";else if(te.indexOf("./")!=-1||te.indexOf("/.")!=-1){B=te.lastIndexOf("/",0)==0,te=te.split("/");const se=[];for(let ve=0;ve<te.length;){const Ye=te[ve++];Ye=="."?B&&ve==te.length&&se.push(""):Ye==".."?((se.length>1||se.length==1&&se[0]!="")&&se.pop(),B&&ve==te.length&&se.push("")):(se.push(Ye),B=!0)}B=se.join("/")}else B=te}return k?b.h=B:k=m.i.toString()!=="",k?Xl(b,S2(m.i)):k=!!m.m,k&&(b.m=m.m),b};function ti(m){return new da(m)}function Xu(m,b,k){m.j=k?Yu(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function ha(m,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);m.u=b}else m.u=null}function Xl(m,b,k){b instanceof ut?(m.i=b,mp(m.i,m.l)):(k||(b=Ju(b,Xx)),m.i=new ut(b,m.l))}function vt(m,b,k){m.i.set(b,k)}function bo(m){return vt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Yu(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ju(m,b,k){return typeof m=="string"?(m=encodeURI(m).replace(b,A2),k&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function A2(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var _2=/[#\/\?@]/g,x2=/[#\?:]/g,Zu=/[#\?]/g,Xx=/[#\?@]/g,E2=/#/g;function ut(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function pa(m){m.g||(m.g=new Map,m.h=0,m.i&&ys(m.i,function(b,k){m.add(decodeURIComponent(b.replace(/\+/g," ")),k)}))}s=ut.prototype,s.add=function(m,b){pa(this),this.i=null,m=fa(this,m);let k=this.g.get(m);return k||this.g.set(m,k=[]),k.push(b),this.h+=1,this};function b2(m,b){pa(m),b=fa(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function fp(m,b){return pa(m),b=fa(m,b),m.g.has(b)}s.forEach=function(m,b){pa(this),this.g.forEach(function(k,B){k.forEach(function(te){m.call(b,te,B,this)},this)},this)};function C2(m,b){pa(m);let k=[];if(typeof b=="string")fp(m,b)&&(k=k.concat(m.g.get(fa(m,b))));else for(m=Array.from(m.g.values()),b=0;b<m.length;b++)k=k.concat(m[b]);return k}s.set=function(m,b){return pa(this),this.i=null,m=fa(this,m),fp(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},s.get=function(m,b){return m?(m=C2(this,m),m.length>0?String(m[0]):b):b};function F2(m,b,k){b2(m,b),k.length>0&&(m.i=null,m.g.set(fa(m,b),v(k)),m.h+=k.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(let B=0;B<b.length;B++){var k=b[B];const te=ua(k);k=C2(this,k);for(let se=0;se<k.length;se++){let ve=te;k[se]!==""&&(ve+="="+ua(k[se])),m.push(ve)}}return this.i=m.join("&")};function S2(m){const b=new ut;return b.i=m.i,m.g&&(b.g=new Map(m.g),b.h=m.h),b}function fa(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function mp(m,b){b&&!m.j&&(pa(m),m.i=null,m.g.forEach(function(k,B){const te=B.toLowerCase();B!=te&&(b2(this,B),F2(this,te,k))},m)),m.j=b}function ma(m,b){const k=new ql;if(a.Image){const B=new Image;B.onload=f(ir,k,"TestLoadImage: loaded",!0,b,B),B.onerror=f(ir,k,"TestLoadImage: error",!1,b,B),B.onabort=f(ir,k,"TestLoadImage: abort",!1,b,B),B.ontimeout=f(ir,k,"TestLoadImage: timeout",!1,b,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=m}else b(!1)}function ga(m,b){const k=new ql,B=new AbortController,te=setTimeout(()=>{B.abort(),ir(k,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:B.signal}).then(se=>{clearTimeout(te),se.ok?ir(k,"TestPingServer: ok",!0,b):ir(k,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(te),ir(k,"TestPingServer: error",!1,b)})}function ir(m,b,k,B,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),B(k)}catch{}}function ed(){this.g=new Hu}function Co(m){this.i=m.Sb||null,this.h=m.ab||!1}g(Co,zl),Co.prototype.g=function(){return new ws(this.i,this.h)};function ws(m,b){Tn.call(this),this.H=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(ws,Tn),s=ws.prototype,s.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=b,this.readyState=1,Di(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(b.body=m),(this.H||a).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Yl(this)),this.readyState=0},s.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;W0(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function W0(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}s.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?Yl(this):Di(this),this.readyState==3&&W0(this)}},s.Oa=function(m){this.g&&(this.response=this.responseText=m,Yl(this))},s.Na=function(m){this.g&&(this.response=m,Yl(this))},s.ga=function(){this.g&&Yl(this)};function Yl(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Di(m)}s.setRequestHeader=function(m,b){this.A.append(m,b)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var k=b.next();!k.done;)k=k.value,m.push(k[0]+": "+k[1]),k=b.next();return m.join(`\r
`)};function Di(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function G0(m){let b="";return Z(m,function(k,B){b+=B,b+=":",b+=k,b+=`\r
`}),b}function gp(m,b,k){e:{for(B in k){var B=!1;break e}B=!0}B||(k=G0(k),typeof m=="string"?k!=null&&ua(k):vt(m,b,k))}function Lt(m){Tn.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Lt,Tn);var q0=/^https?$/i,Yx=["POST","PUT"];s=Lt.prototype,s.Fa=function(m){this.H=m},s.ea=function(m,b,k,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():B0.g(),this.g.onreadystatechange=w(h(this.Ca,this));try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(se){Jl(this,se);return}if(m=k||"",k=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var te in B)k.set(te,B[te]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const se of B.keys())k.set(se,B.get(se));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(k.keys()).find(se=>se.toLowerCase()=="content-type"),te=a.FormData&&m instanceof a.FormData,!(Array.prototype.indexOf.call(Yx,b,void 0)>=0)||B||te||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,ve]of k)this.g.setRequestHeader(se,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(se){Jl(this,se)}};function Jl(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.o=5,Zl(m),So(m)}function Zl(m){m.A||(m.A=!0,_n(m,"complete"),_n(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,_n(this,"complete"),_n(this,"abort"),So(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),So(this,!0)),Lt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Fo(this):this.Xa())},s.Xa=function(){Fo(this)};function Fo(m){if(m.h&&typeof i<"u"){if(m.v&&ya(m)==4)setTimeout(m.Ca.bind(m),0);else if(_n(m,"readystatechange"),ya(m)==4){m.h=!1;try{const se=m.ca();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var k;if(!(k=b)){var B;if(B=se===0){let ve=String(m.D).match(H0)[1]||null;!ve&&a.self&&a.self.location&&(ve=a.self.location.protocol.slice(0,-1)),B=!q0.test(ve?ve.toLowerCase():"")}k=B}if(k)_n(m,"complete"),_n(m,"success");else{m.o=6;try{var te=ya(m)>2?m.g.statusText:""}catch{te=""}m.l=te+" ["+m.ca()+"]",Zl(m)}}finally{So(m)}}}}function So(m,b){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const k=m.g;m.g=null,b||_n(m,"ready");try{k.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ya(m){return m.g?m.g.readyState:0}s.ca=function(){try{return ya(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),D0(b)}};function Q0(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function T2(m){const b={};m=(m.g&&ya(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<m.length;B++){if(j(m[B]))continue;var k=up(m[B]);const te=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const se=b[te]||[];b[te]=se,se.push(k)}J(b,function(B){return B.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(m,b,k){return k&&k.internalChannelParams&&k.internalChannelParams[m]||b}function yp(m){this.za=0,this.i=[],this.j=new ql,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wa("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wa("baseRetryDelayMs",5e3,m),this.Za=wa("retryDelaySeedMs",1e4,m),this.Ta=wa("forwardChannelMaxRetries",2,m),this.va=wa("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new hp(m&&m.concurrentRequestLimit),this.Ba=new ed,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=yp.prototype,s.ka=8,s.I=1,s.connect=function(m,b,k,B){dn(0),this.W=m,this.H=b||{},k&&B!==void 0&&(this.H.OSID=k,this.H.OAID=B),this.F=this.X,this.J=I2(this,null,this.W),To(this)};function wp(m){if(vp(m),m.I==3){var b=m.V++,k=ti(m.J);if(vt(k,"SID",m.M),vt(k,"RID",b),vt(k,"TYPE","terminate"),va(m,k),b=new ei(m,m.j,b),b.M=2,b.A=bo(ti(k)),k=!1,a.navigator&&a.navigator.sendBeacon)try{k=a.navigator.sendBeacon(b.A.toString(),"")}catch{}!k&&a.Image&&(new Image().src=b.A,k=!0),k||(b.g=X0(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Gu(b)}rd(m)}function vs(m){m.g&&(nd(m),m.g.cancel(),m.g=null)}function vp(m){vs(m),m.v&&(a.clearTimeout(m.v),m.v=null),Ap(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&a.clearTimeout(m.m),m.m=null)}function To(m){if(!w2(m.h)&&!m.m){m.m=!0;var b=m.Ea;z||D(),W||(z(),W=!0),N.add(b,m),m.D=0}}function K0(m,b){return Qu(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=b.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Gl(h(m.Ea,m,b),xp(m,m.D)),m.D++,!0)}s.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const te=new ei(this,this.j,m);let se=this.o;if(this.U&&(se?(se=H(se),ie(se,this.U)):se=this.U),this.u!==null||this.R||(te.J=se,se=null),this.S)e:{for(var b=0,k=0;k<this.i.length;k++){t:{var B=this.i[k];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(b+=B,b>4096){b=k;break e}if(b===4096||k===this.i.length-1){b=k+1;break e}}b=1e3}else b=1e3;b=k2(this,te,b),k=ti(this.J),vt(k,"RID",m),vt(k,"CVER",22),this.G&&vt(k,"X-HTTP-Session-Id",this.G),va(this,k),se&&(this.R?b="headers="+ua(G0(se))+"&"+b:this.u&&gp(k,this.u,se)),pp(this.h,te),this.Ra&&vt(k,"TYPE","init"),this.S?(vt(k,"$req",b),vt(k,"SID","null"),te.U=!0,Ri(te,k,null)):Ri(te,k,b),this.I=2}}else this.I==3&&(m?td(this,m):this.i.length==0||w2(this.h)||td(this))};function td(m,b){var k;b?k=b.l:k=m.V++;const B=ti(m.J);vt(B,"SID",m.M),vt(B,"RID",k),vt(B,"AID",m.K),va(m,B),m.u&&m.o&&gp(B,m.u,m.o),k=new ei(m,m.j,k,m.D+1),m.u===null&&(k.J=m.o),b&&(m.i=b.G.concat(m.i)),b=k2(m,k,1e3),k.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),pp(m.h,k),Ri(k,B,b)}function va(m,b){m.H&&Z(m.H,function(k,B){vt(b,B,k)}),m.l&&Z({},function(k,B){vt(b,B,k)})}function k2(m,b,k){k=Math.min(m.i.length,k);const B=m.l?h(m.l.Ka,m.l,m):null;e:{var te=m.i;let Ye=-1;for(;;){const xn=["count="+k];Ye==-1?k>0?(Ye=te[0].g,xn.push("ofs="+Ye)):Ye=0:xn.push("ofs="+Ye);let Ft=!0;for(let kn=0;kn<k;kn++){var se=te[kn].g;const _s=te[kn].map;if(se-=Ye,se<0)Ye=Math.max(0,te[kn].g-100),Ft=!1;else try{se="req"+se+"_"||"";try{var ve=_s instanceof Map?_s:Object.entries(_s);for(const[ko,_a]of ve){let xa=_a;u(_a)&&(xa=$l(_a)),xn.push(se+ko+"="+encodeURIComponent(xa))}}catch(ko){throw xn.push(se+"type="+encodeURIComponent("_badmap")),ko}}catch{B&&B(_s)}}if(Ft){ve=xn.join("&");break e}}ve=void 0}return m=m.i.splice(0,k),b.G=m,ve}function xr(m){if(!m.g&&!m.v){m.Y=1;var b=m.Da;z||D(),W||(z(),W=!0),N.add(b,m),m.A=0}}function Aa(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Gl(h(m.Da,m),xp(m,m.A)),m.A++,!0)}s.Da=function(){if(this.v=null,ec(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Gl(h(this.Wa,this),m)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dn(10),vs(this),ec(this))};function nd(m){m.B!=null&&(a.clearTimeout(m.B),m.B=null)}function ec(m){m.g=new ei(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var b=ti(m.na);vt(b,"RID","rpc"),vt(b,"SID",m.M),vt(b,"AID",m.K),vt(b,"CI",m.F?"0":"1"),!m.F&&m.ia&&vt(b,"TO",m.ia),vt(b,"TYPE","xmlhttp"),va(m,b),m.u&&m.o&&gp(b,m.u,m.o),m.O&&(m.g.H=m.O);var k=m.g;m=m.ba,k.M=1,k.A=bo(ti(b)),k.u=null,k.R=!0,g2(k,m)}s.Va=function(){this.C!=null&&(this.C=null,vs(this),Aa(this),dn(19))};function Ap(m){m.C!=null&&(a.clearTimeout(m.C),m.C=null)}function _p(m,b){var k=null;if(m.g==b){Ap(m),nd(m),m.g=null;var B=2}else if(v2(m.h,b))k=b.G,Ku(m.h,b),B=1;else return;if(m.I!=0){if(b.o)if(B==1){k=b.u?b.u.length:0,b=Date.now()-b.F;var te=m.D;B=Wl(),_n(B,new f2(B,k)),To(m)}else xr(m);else if(te=b.m,te==3||te==0&&b.X>0||!(B==1&&K0(m,b)||B==2&&Aa(m)))switch(k&&k.length>0&&(b=m.h,b.i=b.i.concat(k)),te){case 1:As(m,5);break;case 4:As(m,10);break;case 3:As(m,6);break;default:As(m,2)}}}function xp(m,b){let k=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(k*=2),k*b}function As(m,b){if(m.j.info("Error code "+b),b==2){var k=h(m.bb,m),B=m.Ua;const te=!B;B=new da(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xu(B,"https"),bo(B),te?ma(B.toString(),k):ga(B.toString(),k)}else dn(2);m.I=0,m.l&&m.l.pa(b),rd(m),vp(m)}s.bb=function(m){m?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function rd(m){if(m.I=0,m.ja=[],m.l){const b=gs(m.h);(b.length!=0||m.i.length!=0)&&(F(m.ja,b),F(m.ja,m.i),m.h.i.length=0,v(m.i),m.i.length=0),m.l.oa()}}function I2(m,b,k){var B=k instanceof da?ti(k):new da(k);if(B.g!="")b&&(B.g=b+"."+B.g),ha(B,B.u);else{var te=a.location;B=te.protocol,b=b?b+"."+te.hostname:te.hostname,te=+te.port;const se=new da(null);B&&Xu(se,B),b&&(se.g=b),te&&ha(se,te),k&&(se.h=k),B=se}return k=m.G,b=m.wa,k&&b&&vt(B,k,b),vt(B,"VER",m.ka),va(m,B),B}function X0(m,b,k){if(b&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Aa&&!m.ma?new Lt(new Co({ab:k})):new Lt(m.ma),b.Fa(m.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Y0(){}s=Y0.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ep(){}Ep.prototype.g=function(m,b){return new ar(m,b)};function ar(m,b){Tn.call(this),this.g=new yp(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(m?m["X-WebChannel-Client-Profile"]=b.sa:m={"X-WebChannel-Client-Profile":b.sa}),this.g.U=m,(m=b&&b.Qb)&&!j(m)&&(this.g.u=m),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!j(b)&&(this.g.G=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new tc(this)}g(ar,Tn),ar.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ar.prototype.close=function(){wp(this.g)},ar.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var k={};k.__data__=m,m=k}else this.v&&(k={},k.__data__=$l(m),m=k);b.i.push(new Kx(b.Ya++,m)),b.I==3&&To(b)},ar.prototype.N=function(){this.g.l=null,delete this.j,wp(this.g),delete this.g,ar.Z.N.call(this)};function J0(m){op.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const k in b){m=k;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}g(J0,op);function Z0(){p2.call(this),this.status=1}g(Z0,p2);function tc(m){this.g=m}g(tc,Y0),tc.prototype.ra=function(){_n(this.g,"a")},tc.prototype.qa=function(m){_n(this.g,new J0(m))},tc.prototype.pa=function(m){_n(this.g,new Z0)},tc.prototype.oa=function(){_n(this.g,"b")},Ep.prototype.createWebChannel=Ep.prototype.g,ar.prototype.send=ar.prototype.o,ar.prototype.open=ar.prototype.m,ar.prototype.close=ar.prototype.close,j3=function(){return new Ep},U3=function(){return Wl()},V3=Pi,Ib={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ql.NO_ERROR=0,Ql.TIMEOUT=8,Ql.HTTP_ERROR=6,vA=Ql,Kl.COMPLETE="complete",B3=Kl,N0.EventType=Hl,Hl.OPEN="a",Hl.CLOSE="b",Hl.ERROR="c",Hl.MESSAGE="d",Tn.prototype.listen=Tn.prototype.J,yg=N0,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,O3=Lt}).apply(typeof Xv<"u"?Xv:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mr.UNAUTHENTICATED=new Mr(null),Mr.GOOGLE_CREDENTIALS=new Mr("google-credentials-uid"),Mr.FIRST_PARTY=new Mr("first-party-uid"),Mr.MOCK_USER=new Mr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r2="12.9.0";function Qj(s){r2=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new MF("@firebase/firestore");function Gp(){return jh.logLevel}function ke(s,...e){if(jh.logLevel<=ot.DEBUG){const t=e.map(GF);jh.debug(`Firestore (${r2}): ${s}`,...t)}}function Ml(s,...e){if(jh.logLevel<=ot.ERROR){const t=e.map(GF);jh.error(`Firestore (${r2}): ${s}`,...t)}}function $h(s,...e){if(jh.logLevel<=ot.WARN){const t=e.map(GF);jh.warn(`Firestore (${r2}): ${s}`,...t)}}function GF(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(s,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,$3(s,n,t)}function $3(s,e,t){let n=`FIRESTORE (${r2}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Ml(n),new Error(n)}function Et(s,e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,s||$3(e,r,n)}function qe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends vo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mr.UNAUTHENTICATED)))}shutdown(){}}class Xj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Yj{constructor(e){this.t=e,this.currentUser=Mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Et(this.o===void 0,42304);let n=this.i;const r=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let i=new ao;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ao,e.enqueueRetryable((()=>r(this.currentUser)))};const a=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},u=d=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ao)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Et(typeof n.accessToken=="string",31837,{l:n}),new z3(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new Mr(e)}}class Jj{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Mr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Zj{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Jj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e9{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Et(this.o===void 0,3512);const n=i=>{i.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,ke("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const r=i=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new dP(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new dP(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<s;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=t9(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function lt(s,e){return s<e?-1:s>e?1:0}function Pb(s,e){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++){const r=s.charAt(n),i=e.charAt(n);if(r!==i)return NE(r)===NE(i)?lt(r,i):NE(r)?1:-1}return lt(s.length,e.length)}const n9=55296,r9=57343;function NE(s){const e=s.charCodeAt(0);return e>=n9&&e<=r9}function Gm(s,e,t){return s.length===e.length&&s.every(((n,r)=>t(n,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="__name__";class Ra{constructor(e,t,n){t===void 0?t=0:t>e.length&&He(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&He(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ra.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ra?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const i=Ra.compareSegments(e.get(r),t.get(r));if(i!==0)return i}return lt(e.length,t.length)}static compareSegments(e,t){const n=Ra.isNumericId(e),r=Ra.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Ra.extractNumericId(e).compare(Ra.extractNumericId(t)):Pb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Eu.fromString(e.substring(4,e.length-2))}}class zt extends Ra{construct(e,t,n){return new zt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ee(le.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((r=>r.length>0)))}return new zt(t)}static emptyPath(){return new zt([])}}const s9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends Ra{construct(e,t,n){return new vr(e,t,n)}static isValidIdentifier(e){return s9.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hP}static keyField(){return new vr([hP])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(n.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new Ee(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ee(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(n+=u,r++):(i(),r++)}if(i(),a)throw new Ee(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(t)}static emptyPath(){return new vr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(zt.fromString(e))}static fromName(e){return new Ve(zt.fromString(e).popFirst(5))}static empty(){return new Ve(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new zt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(s,e,t){if(!t)throw new Ee(le.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function i9(s,e,t,n){if(e===!0&&n===!0)throw new Ee(le.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function pP(s){if(!Ve.isDocumentKey(s))throw new Ee(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function fP(s){if(Ve.isDocumentKey(s))throw new Ee(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function W3(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function gx(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":He(12329,{type:typeof s})}function uo(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ee(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gx(s);throw new Ee(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function a9(s,e){if(e<=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(s,e){const t={typeString:s};return e&&(t.value=e),t}function g0(s,e){if(!W3(s))throw new Ee(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const r=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in s)){t=`JSON missing required field: '${n}'`;break}const a=s[n];if(r&&typeof a!==r){t=`JSON field '${n}' must be a ${r}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${n}' field to equal '${i.value}'`;break}}if(t)throw new Ee(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=-62135596800,gP=1e6;class Xt{static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*gP);return new Xt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mP)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gP}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(g0(e,Xt._jsonSchema))return new Xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xt._jsonSchemaVersion="firestore/timestamp/1.0",Xt._jsonSchema={type:Ln("string",Xt._jsonSchemaVersion),seconds:Ln("number"),nanoseconds:Ln("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new Xt(0,0))}static max(){return new Qe(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=-1;function o9(s,e){const t=s.toTimestamp().seconds,n=s.toTimestamp().nanoseconds+1,r=Qe.fromTimestamp(n===1e9?new Xt(t+1,0):new Xt(t,n));return new Su(r,Ve.empty(),e)}function l9(s){return new Su(s.readTime,s.key,Zg)}class Su{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Su(Qe.min(),Ve.empty(),Zg)}static max(){return new Su(Qe.max(),Ve.empty(),Zg)}}function c9(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ve.comparator(s.documentKey,e.documentKey),t!==0?t:lt(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(s){if(s.code!==le.FAILED_PRECONDITION||s.message!==u9)throw s;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce(((n,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.reject(t)}static resolve(e){return new ce(((t,n)=>{t(e)}))}static reject(e){return new ce(((t,n)=>{n(e)}))}static waitFor(e){return new ce(((t,n)=>{let r=0,i=0,a=!1;e.forEach((u=>{++r,u.next((()=>{++i,a&&i===r&&t()}),(d=>n(d)))})),a=!0,i===r&&t()}))}static or(e){let t=ce.resolve(!1);for(const n of e)t=t.next((r=>r?ce.resolve(r):n()));return t}static forEach(e,t){const n=[];return e.forEach(((r,i)=>{n.push(t.call(this,r,i))})),this.waitFor(n)}static mapArray(e,t){return new ce(((n,r)=>{const i=e.length,a=new Array(i);let u=0;for(let d=0;d<i;d++){const h=d;t(e[h]).next((f=>{a[h]=f,++u,u===i&&n(a)}),(f=>r(f)))}}))}static doWhile(e,t){return new ce(((n,r)=>{const i=()=>{e()===!0?t().next((()=>{i()}),r):n()};i()}))}}function h9(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function i2(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yx.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=-1;function wx(s){return s==null}function y_(s){return s===0&&1/s==-1/0}function p9(s){return typeof s=="number"&&Number.isInteger(s)&&!y_(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="";function f9(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=yP(e)),e=m9(s.get(t),e);return yP(e)}function m9(s,e){let t=e;const n=s.length;for(let r=0;r<n;r++){const i=s.charAt(r);switch(i){case"\0":t+="";break;case G3:t+="";break;default:t+=i}}return t}function yP(s){return s+G3+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ju(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function g9(s,e){const t=[];for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.push(e(s[n],n,s));return t}function q3(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t){this.comparator=e,this.root=t||gr.EMPTY}insert(e,t){return new un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yv(this.root,e,this.comparator,!0)}}class Yv{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=n??gr.RED,this.left=r??gr.EMPTY,this.right=i??gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new gr(e??this.key,t??this.value,n??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return gr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1;gr.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vP(this.data.getIterator())}getIteratorFrom(e){return new vP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=n.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gn(this.comparator);return t.data=e,t}}class vP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new Ks([])}unionWith(e){let t=new Gn(vr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ks(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gm(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Q3("Invalid base64 string: "+i):i}})(e);return new _r(t)}static fromUint8Array(e){const t=(function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i})(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const y9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tu(s){if(Et(!!s,39018),typeof s=="string"){let e=0;const t=y9.exec(s);if(Et(!!t,46558,{timestamp:s}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(s);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Sn(s.seconds),nanos:Sn(s.nanos)}}function Sn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ku(s){return typeof s=="string"?_r.fromBase64String(s):_r.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="server_timestamp",X3="__type__",Y3="__previous_value__",J3="__local_write_time__";function KF(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[X3])==null?void 0:n.stringValue)===K3}function vx(s){const e=s.mapValue.fields[Y3];return KF(e)?vx(e):e}function ey(s){const e=Tu(s.mapValue.fields[J3].timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e,t,n,r,i,a,u,d,h,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=f,this.apiKey=g}}const w_="(default)";class ty{constructor(e,t){this.projectId=e,this.database=t||w_}static empty(){return new ty("","")}get isDefaultDatabase(){return this.database===w_}isEqual(e){return e instanceof ty&&e.projectId===this.projectId&&e.database===this.database}}function v9(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ee(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ty(s.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="__type__",A9="__max__",Jv={mapValue:{}},eN="__vector__",v_="value";function Iu(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?KF(s)?4:x9(s)?9007199254740991:_9(s)?10:11:He(28295,{value:s})}function ho(s,e){if(s===e)return!0;const t=Iu(s);if(t!==Iu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ey(s).isEqual(ey(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Tu(r.timestampValue),u=Tu(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(r,i){return ku(r.bytesValue).isEqual(ku(i.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(r,i){return Sn(r.geoPointValue.latitude)===Sn(i.geoPointValue.latitude)&&Sn(r.geoPointValue.longitude)===Sn(i.geoPointValue.longitude)})(s,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return Sn(r.integerValue)===Sn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Sn(r.doubleValue),u=Sn(i.doubleValue);return a===u?y_(a)===y_(u):isNaN(a)&&isNaN(u)}return!1})(s,e);case 9:return Gm(s.arrayValue.values||[],e.arrayValue.values||[],ho);case 10:case 11:return(function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(wP(a)!==wP(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!ho(a[d],u[d])))return!1;return!0})(s,e);default:return He(52216,{left:s})}}function ny(s,e){return(s.values||[]).find((t=>ho(t,e)))!==void 0}function qm(s,e){if(s===e)return 0;const t=Iu(s),n=Iu(e);if(t!==n)return lt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(s.booleanValue,e.booleanValue);case 2:return(function(i,a){const u=Sn(i.integerValue||i.doubleValue),d=Sn(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(s,e);case 3:return AP(s.timestampValue,e.timestampValue);case 4:return AP(ey(s),ey(e));case 5:return Pb(s.stringValue,e.stringValue);case 6:return(function(i,a){const u=ku(i),d=ku(a);return u.compareTo(d)})(s.bytesValue,e.bytesValue);case 7:return(function(i,a){const u=i.split("/"),d=a.split("/");for(let h=0;h<u.length&&h<d.length;h++){const f=lt(u[h],d[h]);if(f!==0)return f}return lt(u.length,d.length)})(s.referenceValue,e.referenceValue);case 8:return(function(i,a){const u=lt(Sn(i.latitude),Sn(a.latitude));return u!==0?u:lt(Sn(i.longitude),Sn(a.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return _P(s.arrayValue,e.arrayValue);case 10:return(function(i,a){var w,v,F,C;const u=i.fields||{},d=a.fields||{},h=(w=u[v_])==null?void 0:w.arrayValue,f=(v=d[v_])==null?void 0:v.arrayValue,g=lt(((F=h==null?void 0:h.values)==null?void 0:F.length)||0,((C=f==null?void 0:f.values)==null?void 0:C.length)||0);return g!==0?g:_P(h,f)})(s.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Jv.mapValue&&a===Jv.mapValue)return 0;if(i===Jv.mapValue)return 1;if(a===Jv.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),h=a.fields||{},f=Object.keys(h);d.sort(),f.sort();for(let g=0;g<d.length&&g<f.length;++g){const w=Pb(d[g],f[g]);if(w!==0)return w;const v=qm(u[d[g]],h[f[g]]);if(v!==0)return v}return lt(d.length,f.length)})(s.mapValue,e.mapValue);default:throw He(23264,{he:t})}}function AP(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return lt(s,e);const t=Tu(s),n=Tu(e),r=lt(t.seconds,n.seconds);return r!==0?r:lt(t.nanos,n.nanos)}function _P(s,e){const t=s.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const i=qm(t[r],n[r]);if(i)return i}return lt(t.length,n.length)}function Qm(s){return Rb(s)}function Rb(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const n=Tu(t);return`time(${n.seconds},${n.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return ku(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ve.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let n="[",r=!0;for(const i of t.values||[])r?r=!1:n+=",",n+=Rb(i);return n+"]"})(s.arrayValue):"mapValue"in s?(function(t){const n=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const a of n)i?i=!1:r+=",",r+=`${a}:${Rb(t.fields[a])}`;return r+"}"})(s.mapValue):He(61005,{value:s})}function AA(s){switch(Iu(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vx(s);return e?16+AA(e):16;case 5:return 2*s.stringValue.length;case 6:return ku(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((r,i)=>r+AA(i)),0)})(s.arrayValue);case 10:case 11:return(function(n){let r=0;return ju(n.fields,((i,a)=>{r+=i.length+AA(a)})),r})(s.mapValue);default:throw He(13486,{value:s})}}function xP(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Db(s){return!!s&&"integerValue"in s}function XF(s){return!!s&&"arrayValue"in s}function EP(s){return!!s&&"nullValue"in s}function bP(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function _A(s){return!!s&&"mapValue"in s}function _9(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[Z3])==null?void 0:n.stringValue)===eN}function Hg(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ju(s.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Hg(n))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hg(s.arrayValue.values[t]);return e}return{...s}}function x9(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===A9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!_A(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hg(t)}setAll(e){let t=vr.emptyPath(),n={},r=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,r),n={},r=[],t=u.popLast()}a?n[u.lastSegment()]=Hg(a):r.push(u.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());_A(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];_A(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ju(t,((r,i)=>e[r]=i));for(const r of n)delete e[r]}clone(){return new qr(Hg(this.value))}}function tN(s){const e=[];return ju(s.fields,((t,n)=>{const r=new vr([t]);if(_A(n)){const i=tN(n.mapValue).fields;if(i.length===0)e.push(r);else for(const a of i)e.push(r.child(a))}else e.push(r)})),new Ks(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t,n,r,i,a,u){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Lr(e,0,Qe.min(),Qe.min(),Qe.min(),qr.empty(),0)}static newFoundDocument(e,t,n,r){return new Lr(e,1,t,Qe.min(),n,r,0)}static newNoDocument(e,t){return new Lr(e,2,t,Qe.min(),Qe.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new Lr(e,3,t,Qe.min(),Qe.min(),qr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t){this.position=e,this.inclusive=t}}function CP(s,e,t){let n=0;for(let r=0;r<s.position.length;r++){const i=e[r],a=s.position[r];if(i.field.isKeyField()?n=Ve.comparator(Ve.fromName(a.referenceValue),t.key):n=qm(a,t.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function FP(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!ho(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,t="asc"){this.field=e,this.dir=t}}function E9(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{}class Mn extends nN{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new C9(e,t,n):t==="array-contains"?new T9(e,n):t==="in"?new k9(e,n):t==="not-in"?new I9(e,n):t==="array-contains-any"?new P9(e,n):new Mn(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new F9(e,n):new S9(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qm(t,this.value)):t!==null&&Iu(this.value)===Iu(t)&&this.matchesComparison(qm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class aa extends nN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new aa(e,t)}matches(e){return rN(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rN(s){return s.op==="and"}function sN(s){return b9(s)&&rN(s)}function b9(s){for(const e of s.filters)if(e instanceof aa)return!1;return!0}function Nb(s){if(s instanceof Mn)return s.field.canonicalString()+s.op.toString()+Qm(s.value);if(sN(s))return s.filters.map((e=>Nb(e))).join(",");{const e=s.filters.map((t=>Nb(t))).join(",");return`${s.op}(${e})`}}function iN(s,e){return s instanceof Mn?(function(n,r){return r instanceof Mn&&n.op===r.op&&n.field.isEqual(r.field)&&ho(n.value,r.value)})(s,e):s instanceof aa?(function(n,r){return r instanceof aa&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce(((i,a,u)=>i&&iN(a,r.filters[u])),!0):!1})(s,e):void He(19439)}function aN(s){return s instanceof Mn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qm(t.value)}`})(s):s instanceof aa?(function(t){return t.op.toString()+" {"+t.getFilters().map(aN).join(" ,")+"}"})(s):"Filter"}class C9 extends Mn{constructor(e,t,n){super(e,t,n),this.key=Ve.fromName(n.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class F9 extends Mn{constructor(e,t){super(e,"in",t),this.keys=oN("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class S9 extends Mn{constructor(e,t){super(e,"not-in",t),this.keys=oN("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function oN(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>Ve.fromName(n.referenceValue)))}class T9 extends Mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return XF(t)&&ny(t.arrayValue,this.value)}}class k9 extends Mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ny(this.value.arrayValue,t)}}class I9 extends Mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ny(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ny(this.value.arrayValue,t)}}class P9 extends Mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!XF(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>ny(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,t=null,n=[],r=[],i=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=u,this.Te=null}}function SP(s,e=null,t=[],n=[],r=null,i=null,a=null){return new R9(s,e,t,n,r,i,a)}function YF(s){const e=qe(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Nb(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),wx(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Qm(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Qm(n))).join(",")),e.Te=t}return e.Te}function JF(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!E9(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!iN(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!FP(s.startAt,e.startAt)&&FP(s.endAt,e.endAt)}function Mb(s){return Ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,t=null,n=[],r=[],i=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function D9(s,e,t,n,r,i,a,u){return new a2(s,e,t,n,r,i,a,u)}function ZF(s){return new a2(s)}function TP(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function N9(s){return Ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function lN(s){return s.collectionGroup!==null}function Wg(s){const e=qe(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Gn(vr.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ry(i,n))})),t.has(vr.keyField().canonicalString())||e.Ie.push(new ry(vr.keyField(),n))}return e.Ie}function oo(s){const e=qe(s);return e.Ee||(e.Ee=cN(e,Wg(s))),e.Ee}function M9(s){const e=qe(s);return e.Re||(e.Re=cN(e,s.explicitOrderBy)),e.Re}function cN(s,e){if(s.limitType==="F")return SP(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new ry(r.field,i)}));const t=s.endAt?new A_(s.endAt.position,s.endAt.inclusive):null,n=s.startAt?new A_(s.startAt.position,s.startAt.inclusive):null;return SP(s.path,s.collectionGroup,e,s.filters,s.limit,t,n)}}function Lb(s,e){const t=s.filters.concat([e]);return new a2(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function L9(s,e){const t=s.explicitOrderBy.concat([e]);return new a2(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function __(s,e,t){return new a2(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Ax(s,e){return JF(oo(s),oo(e))&&s.limitType===e.limitType}function uN(s){return`${YF(oo(s))}|lt:${s.limitType}`}function qp(s){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((r=>aN(r))).join(", ")}]`),wx(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((r=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(r))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Qm(r))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Qm(r))).join(",")),`Target(${n})`})(oo(s))}; limitType=${s.limitType})`}function _x(s,e){return e.isFoundDocument()&&(function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ve.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(s,e)&&(function(n,r){for(const i of Wg(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(s,e)&&(function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0})(s,e)&&(function(n,r){return!(n.startAt&&!(function(a,u,d){const h=CP(a,u,d);return a.inclusive?h<=0:h<0})(n.startAt,Wg(n),r)||n.endAt&&!(function(a,u,d){const h=CP(a,u,d);return a.inclusive?h>=0:h>0})(n.endAt,Wg(n),r))})(s,e)}function O9(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function dN(s){return(e,t)=>{let n=!1;for(const r of Wg(s)){const i=B9(r,e,t);if(i!==0)return i;n=n||r.field.isKeyField()}return 0}}function B9(s,e,t){const n=s.field.isKeyField()?Ve.comparator(e.key,t.key):(function(i,a,u){const d=a.data.field(i),h=u.data.field(i);return d!==null&&h!==null?qm(d,h):He(42886)})(s.field,e,t);switch(s.dir){case"asc":return n;case"desc":return-1*n;default:return He(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,i]of n)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ju(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return q3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=new un(Ve.comparator);function Ll(){return V9}const hN=new un(Ve.comparator);function wg(...s){let e=hN;for(const t of s)e=e.insert(t.key,t);return e}function pN(s){let e=hN;return s.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Ed(){return Gg()}function fN(){return Gg()}function Gg(){return new ep((s=>s.toString()),((s,e)=>s.isEqual(e)))}const U9=new un(Ve.comparator),j9=new Gn(Ve.comparator);function ct(...s){let e=j9;for(const t of s)e=e.add(t);return e}const $9=new Gn(lt);function z9(){return $9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:y_(e)?"-0":e}}function mN(s){return{integerValue:""+s}}function H9(s,e){return p9(e)?mN(e):eS(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this._=void 0}}function W9(s,e,t){return s instanceof sy?(function(r,i){const a={fields:{[X3]:{stringValue:K3},[J3]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&KF(i)&&(i=vx(i)),i&&(a.fields[Y3]=i),{mapValue:a}})(t,e):s instanceof iy?yN(s,e):s instanceof ay?wN(s,e):(function(r,i){const a=gN(r,i),u=kP(a)+kP(r.Ae);return Db(a)&&Db(r.Ae)?mN(u):eS(r.serializer,u)})(s,e)}function G9(s,e,t){return s instanceof iy?yN(s,e):s instanceof ay?wN(s,e):t}function gN(s,e){return s instanceof x_?(function(n){return Db(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class sy extends xx{}class iy extends xx{constructor(e){super(),this.elements=e}}function yN(s,e){const t=vN(e);for(const n of s.elements)t.some((r=>ho(r,n)))||t.push(n);return{arrayValue:{values:t}}}class ay extends xx{constructor(e){super(),this.elements=e}}function wN(s,e){let t=vN(e);for(const n of s.elements)t=t.filter((r=>!ho(r,n)));return{arrayValue:{values:t}}}class x_ extends xx{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function kP(s){return Sn(s.integerValue||s.doubleValue)}function vN(s){return XF(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,t){this.field=e,this.transform=t}}function Q9(s,e){return s.field.isEqual(e.field)&&(function(n,r){return n instanceof iy&&r instanceof iy||n instanceof ay&&r instanceof ay?Gm(n.elements,r.elements,ho):n instanceof x_&&r instanceof x_?ho(n.Ae,r.Ae):n instanceof sy&&r instanceof sy})(s.transform,e.transform)}class K9{constructor(e,t){this.version=e,this.transformResults=t}}class na{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new na}static exists(e){return new na(void 0,e)}static updateTime(e){return new na(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xA(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Ex{}function AN(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new tS(s.key,na.none()):new y0(s.key,s.data,na.none());{const t=s.data,n=qr.empty();let r=new Gn(vr.comparator);for(let i of e.fields)if(!r.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?n.delete(i):n.set(i,a),r=r.add(i)}return new $u(s.key,n,new Ks(r.toArray()),na.none())}}function X9(s,e,t){s instanceof y0?(function(r,i,a){const u=r.value.clone(),d=PP(r.fieldTransforms,i,a.transformResults);u.setAll(d),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(s,e,t):s instanceof $u?(function(r,i,a){if(!xA(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=PP(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(_N(r)),d.setAll(u),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(s,e,t):(function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function qg(s,e,t,n){return s instanceof y0?(function(i,a,u,d){if(!xA(i.precondition,a))return u;const h=i.value.clone(),f=RP(i.fieldTransforms,d,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(s,e,t,n):s instanceof $u?(function(i,a,u,d){if(!xA(i.precondition,a))return u;const h=RP(i.fieldTransforms,d,a),f=a.data;return f.setAll(_N(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((g=>g.field)))})(s,e,t,n):(function(i,a,u){return xA(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(s,e,t)}function Y9(s,e){let t=null;for(const n of s.fieldTransforms){const r=e.data.field(n.field),i=gN(n.transform,r||null);i!=null&&(t===null&&(t=qr.empty()),t.set(n.field,i))}return t||null}function IP(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Gm(n,r,((i,a)=>Q9(i,a)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class y0 extends Ex{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class $u extends Ex{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _N(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=s.data.field(t);e.set(t,n)}})),e}function PP(s,e,t){const n=new Map;Et(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let r=0;r<t.length;r++){const i=s[r],a=i.transform,u=e.data.field(i.field);n.set(i.field,G9(a,u,t[r]))}return n}function RP(s,e,t){const n=new Map;for(const r of s){const i=r.transform,a=t.data.field(r.field);n.set(r.field,W9(i,a,e))}return n}class tS extends Ex{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J9 extends Ex{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&X9(i,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=qg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=qg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fN();return this.mutations.forEach((r=>{const i=e.get(r.key),a=i.overlayedDocument;let u=this.applyToLocalView(a,i.mutatedFields);u=t.has(r.key)?null:u;const d=AN(a,u);d!==null&&n.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(Qe.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ct())}isEqual(e){return this.batchId===e.batchId&&Gm(this.mutations,e.mutations,((t,n)=>IP(t,n)))&&Gm(this.baseMutations,e.baseMutations,((t,n)=>IP(t,n)))}}class nS{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Et(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=(function(){return U9})();const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new nS(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn,ht;function r8(s){switch(s){case le.OK:return He(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return He(15467,{code:s})}}function xN(s){if(s===void 0)return Ml("GRPC error has no .code"),le.UNKNOWN;switch(s){case Dn.OK:return le.OK;case Dn.CANCELLED:return le.CANCELLED;case Dn.UNKNOWN:return le.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return le.INTERNAL;case Dn.UNAVAILABLE:return le.UNAVAILABLE;case Dn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Dn.NOT_FOUND:return le.NOT_FOUND;case Dn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Dn.ABORTED:return le.ABORTED;case Dn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Dn.DATA_LOSS:return le.DATA_LOSS;default:return He(39323,{code:s})}}(ht=Dn||(Dn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=new Eu([4294967295,4294967295],0);function DP(s){const e=s8().encode(s),t=new L3;return t.update(e),new Uint8Array(t.digest())}function NP(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Eu([t,n],0),new Eu([r,i],0)]}class rS{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new vg(`Invalid padding: ${t}`);if(n<0)throw new vg(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new vg(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new vg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Eu.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Eu.fromNumber(n)));return r.compare(i8)===1&&(r=new Eu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=DP(e),[n,r]=NP(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(n,r,i);if(!this.we(a))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new rS(i,r,t);return n.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const t=DP(e),[n,r]=NP(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(n,r,i);this.be(a)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class vg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,w0.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new bx(Qe.min(),r,new un(lt),Ll(),ct())}}class w0{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new w0(n,t,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}}class EN{constructor(e,t){this.targetId=e,this.Ce=t}}class bN{constructor(e,t,n=_r.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class MP{constructor(){this.ve=0,this.Fe=LP(),this.Me=_r.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),t=ct(),n=ct();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:He(38017,{changeType:i})}})),new w0(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=LP()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class a8{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ll(),this.He=Zv(),this.Je=Zv(),this.Ze=new un(lt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:He(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(Mb(i))if(n===0){const a=new Ve(i.path);this.et(t,a,Lr.newNoDocument(a,Qe.min()))}else Et(n===1,20013,{expectedCount:n});else{const a=this._t(t);if(a!==n){const u=this.ut(e),d=u?this.ct(u,e,a):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let a,u;try{a=ku(n).toUint8Array()}catch(d){if(d instanceof Q3)return $h("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new rS(a,r,i)}catch(d){return $h(d instanceof vg?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach((i=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(t,i,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((i,a)=>{const u=this.ot(a);if(u){if(i.current&&Mb(u.target)){const d=new Ve(u.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,Lr.newNoDocument(d,e))}i.Be&&(t.set(a,i.ke()),i.Ke())}}));let n=ct();this.Je.forEach(((i,a)=>{let u=!0;a.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(e)));const r=new bx(e,t,this.Ze,this.je,n);return this.je=Ll(),this.He=Zv(),this.Je=Zv(),this.Ze=new un(lt),r}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new MP,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Gn(lt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Gn(lt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ke("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new MP),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zv(){return new un(Ve.comparator)}function LP(){return new un(Ve.comparator)}const o8={asc:"ASCENDING",desc:"DESCENDING"},l8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c8={and:"AND",or:"OR"};class u8{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ob(s,e){return s.useProto3Json||wx(e)?e:{value:e}}function E_(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CN(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function d8(s,e){return E_(s,e.toTimestamp())}function lo(s){return Et(!!s,49232),Qe.fromTimestamp((function(t){const n=Tu(t);return new Xt(n.seconds,n.nanos)})(s))}function sS(s,e){return Bb(s,e).canonicalString()}function Bb(s,e){const t=(function(r){return new zt(["projects",r.projectId,"databases",r.database])})(s).child("documents");return e===void 0?t:t.child(e)}function FN(s){const e=zt.fromString(s);return Et(RN(e),10190,{key:e.toString()}),e}function Vb(s,e){return sS(s.databaseId,e.path)}function ME(s,e){const t=FN(e);if(t.get(1)!==s.databaseId.projectId)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ve(TN(t))}function SN(s,e){return sS(s.databaseId,e)}function h8(s){const e=FN(s);return e.length===4?zt.emptyPath():TN(e)}function Ub(s){return new zt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function TN(s){return Et(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function OP(s,e,t){return{name:Vb(s,e),fields:t.value.mapValue.fields}}function p8(s,e){let t;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:He(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(Et(f===void 0||typeof f=="string",58123),_r.fromBase64String(f||"")):(Et(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),_r.fromUint8Array(f||new Uint8Array))})(s,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(h){const f=h.code===void 0?le.UNKNOWN:xN(h.code);return new Ee(f,h.message||"")})(a);t=new bN(n,r,i,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=ME(s,n.document.name),i=lo(n.document.updateTime),a=n.document.createTime?lo(n.document.createTime):Qe.min(),u=new qr({mapValue:{fields:n.document.fields}}),d=Lr.newFoundDocument(r,i,a,u),h=n.targetIds||[],f=n.removedTargetIds||[];t=new EA(h,f,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=ME(s,n.document),i=n.readTime?lo(n.readTime):Qe.min(),a=Lr.newNoDocument(r,i),u=n.removedTargetIds||[];t=new EA([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=ME(s,n.document),i=n.removedTargetIds||[];t=new EA([],i,r,null)}else{if(!("filter"in e))return He(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:i}=n,a=new n8(r,i),u=n.targetId;t=new EN(u,a)}}return t}function f8(s,e){let t;if(e instanceof y0)t={update:OP(s,e.key,e.value)};else if(e instanceof tS)t={delete:Vb(s,e.key)};else if(e instanceof $u)t={update:OP(s,e.key,e.data),updateMask:E8(e.fieldMask)};else{if(!(e instanceof J9))return He(16599,{dt:e.type});t={verify:Vb(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(i,a){const u=a.transform;if(u instanceof sy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof iy)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ay)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof x_)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw He(20930,{transform:a.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:d8(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:He(27497)})(s,e.precondition)),t}function m8(s,e){return s&&s.length>0?(Et(e!==void 0,14353),s.map((t=>(function(r,i){let a=r.updateTime?lo(r.updateTime):lo(i);return a.isEqual(Qe.min())&&(a=lo(i)),new K9(a,r.transformResults||[])})(t,e)))):[]}function g8(s,e){return{documents:[SN(s,e.path)]}}function kN(s,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=SN(s,r);const i=(function(h){if(h.length!==0)return PN(aa.create(h,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((f=>(function(w){return{field:xc(w.field),direction:A8(w.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=Ob(s,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function y8(s,e,t,n){const{ft:r,parent:i}=kN(s,e),a={},u=[];let d=0;return t.forEach((h=>{const f="aggregate_"+d++;a[f]=h.alias,h.aggregateType==="count"?u.push({alias:f,count:{}}):h.aggregateType==="avg"?u.push({alias:f,avg:{field:xc(h.fieldPath)}}):h.aggregateType==="sum"&&u.push({alias:f,sum:{field:xc(h.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:r.structuredQuery},parent:r.parent},gt:a,parent:i}}function w8(s){let e=h8(s.parent);const t=s.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){Et(n===1,65062);const f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=(function(g){const w=IN(g);return w instanceof aa&&sN(w)?w.getFilters():[w]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((w=>(function(F){return new ry(Qp(F.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(w)))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let w;return w=typeof g=="object"?g.value:g,wx(w)?null:w})(t.limit));let d=null;t.startAt&&(d=(function(g){const w=!!g.before,v=g.values||[];return new A_(v,w)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const w=!g.before,v=g.values||[];return new A_(v,w)})(t.endAt)),D9(e,r,a,i,u,"F",d,h)}function v8(s,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function IN(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Qp(t.unaryFilter.field);return Mn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Qp(t.unaryFilter.field);return Mn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Qp(t.unaryFilter.field);return Mn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Qp(t.unaryFilter.field);return Mn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Mn.create(Qp(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return aa.create(t.compositeFilter.filters.map((n=>IN(n))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(t.compositeFilter.op))})(s):He(30097,{filter:s})}function A8(s){return o8[s]}function _8(s){return l8[s]}function x8(s){return c8[s]}function xc(s){return{fieldPath:s.canonicalString()}}function Qp(s){return vr.fromServerFormat(s.fieldPath)}function PN(s){return s instanceof Mn?(function(t){if(t.op==="=="){if(bP(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NAN"}};if(EP(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bP(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NOT_NAN"}};if(EP(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xc(t.field),op:_8(t.op),value:t.value}}})(s):s instanceof aa?(function(t){const n=t.getFilters().map((r=>PN(r)));return n.length===1?n[0]:{compositeFilter:{op:x8(t.op),filters:n}}})(s):He(54877,{filter:s})}function E8(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function RN(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function DN(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t,n,r,i=Qe.min(),a=Qe.min(),u=_r.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new vu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.yt=e}}function C8(s){const e=w8({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?__(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(){this.Sn=new S8}addToCollectionParentIndex(e,t){return this.Sn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Su.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Su.min())}updateCollectionGroup(e,t,n){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class S8{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Gn(zt.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Gn(zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NN=41943040;class ps{static withCacheSize(e){return new ps(e,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(NN,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Km(0)}static ar(){return new Km(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="LruGarbageCollector",T8=1048576;function UP([s,e],[t,n]){const r=lt(s,t);return r===0?lt(e,n):r}class k8{constructor(e){this.Pr=e,this.buffer=new Gn(UP),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();UP(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class I8{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ke(VP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){i2(t)?ke(VP,"Ignoring IndexedDB error during garbage collection: ",t):await s2(t)}await this.Ar(3e5)}))}}class P8{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return ce.resolve(yx.ce);const n=new k8(t);return this.Vr.forEachTarget(e,(r=>n.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>n.Er(r))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(BP)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BP):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,a,u,d,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r)))).next((g=>(n=g,u=Date.now(),this.removeTargets(e,n,t)))).next((g=>(i=g,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((g=>(h=Date.now(),Gp()<=ot.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${i} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-f}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:g}))))}}function R8(s,e){return new P8(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(){this.changes=new ep((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Lr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(n!==null&&qg(n.mutation,r,Ks.empty(),Xt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,ct()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=ct()){const r=Ed();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((i=>{let a=wg();return i.forEach(((u,d)=>{a=a.insert(u,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const n=Ed();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ct())))}populateOverlays(e,t,n){const r=[];return n.forEach((i=>{t.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,n,r){let i=Ll();const a=Gg(),u=(function(){return Gg()})();return t.forEach(((d,h)=>{const f=n.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof $u)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),qg(f.mutation,h,f.mutation.getFieldMask(),Xt.now())):a.set(h.key,Ks.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,f)=>a.set(h,f))),t.forEach(((h,f)=>u.set(h,new N8(f,a.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Gg();let r=new un(((a,u)=>a-u)),i=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const u of a)u.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let f=n.get(d)||Ks.empty();f=u.applyToLocalView(h,f),n.set(d,f);const g=(r.get(u.batchId)||ct()).add(d);r=r.insert(u.batchId,g)}))})).next((()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,f=d.value,g=fN();f.forEach((w=>{if(!i.has(w)){const v=AN(t.get(w),n.get(w));v!==null&&g.set(w,v),i=i.add(w)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return ce.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,r){return N9(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ce.resolve(Ed());let u=Zg,d=i;return a.next((h=>ce.forEach(h,((f,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),i.get(f)?ce.resolve():this.remoteDocumentCache.getEntry(e,f).next((w=>{d=d.insert(f,w)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,ct()))).next((f=>({batchId:u,changes:pN(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next((n=>{let r=wg();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let a=wg();return this.indexManager.getCollectionParents(e,i).next((u=>ce.forEach(u,(d=>{const h=(function(g,w){return new a2(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,r).next((f=>{f.forEach(((g,w)=>{a=a.insert(g,w)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((a=>{i.forEach(((d,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,Lr.newInvalidDocument(f)))}));let u=wg();return a.forEach(((d,h)=>{const f=i.get(d);f!==void 0&&qg(f.mutation,h,Ks.empty(),Xt.now()),_x(t,h)&&(u=u.insert(d,h))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ce.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:lo(r.createTime)}})(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:C8(r.bundledQuery),readTime:lo(r.readTime)}})(t)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(){this.overlays=new un(Ve.comparator),this.Lr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ed();return ce.forEach(t,(r=>this.getOverlay(e,r).next((i=>{i!==null&&n.set(r,i)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((r,i)=>{this.bt(e,t,i)})),ce.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Lr.get(n);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(n)),ce.resolve()}getOverlaysForCollection(e,t,n){const r=Ed(),i=t.length+1,a=new Ve(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&r.set(d.getKey(),d)}return ce.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new un(((h,f)=>h-f));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let f=i.get(h.largestBatchId);f===null&&(f=Ed(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const u=Ed(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,f)=>u.set(h,f))),!(u.size()>=r)););return ce.resolve(u)}bt(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const a=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new e8(t,n));let i=this.Lr.get(t);i===void 0&&(i=ct(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(){this.sessionToken=_r.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.kr=new Gn(sr.Kr),this.qr=new Gn(sr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new sr(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Wr(new sr(e,t))}Qr(e,t){e.forEach((n=>this.removeReference(n,t)))}Gr(e){const t=new Ve(new zt([])),n=new sr(t,e),r=new sr(t,e+1),i=[];return this.qr.forEachInRange([n,r],(a=>{this.Wr(a),i.push(a.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ve(new zt([])),n=new sr(t,e),r=new sr(t,e+1);let i=ct();return this.qr.forEachInRange([n,r],(a=>{i=i.add(a.key)})),i}containsKey(e){const t=new sr(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class sr{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ve.comparator(e.key,t.key)||lt(e.Hr,t.Hr)}static Ur(e,t){return lt(e.Hr,t.Hr)||Ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Gn(sr.Kr)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Z9(i,t,n,r);this.mutationQueue.push(a);for(const u of r)this.Jr=this.Jr.add(new sr(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ce.resolve(a)}lookupMutationBatch(e,t){return ce.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?QF:this.Yn-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new sr(t,0),r=new sr(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([n,r],(a=>{const u=this.Zr(a.Hr);i.push(u)})),ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Gn(lt);return t.forEach((r=>{const i=new sr(r,0),a=new sr(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],(u=>{n=n.add(u.Hr)}))})),ce.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ve.isDocumentKey(i)||(i=i.child(""));const a=new sr(new Ve(i),0);let u=new Gn(lt);return this.Jr.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===r&&(u=u.add(d.Hr)),!0)}),a),ce.resolve(this.Yr(u))}Yr(e){const t=[];return e.forEach((n=>{const r=this.Zr(n);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Et(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return ce.forEach(t.mutations,(r=>{const i=new sr(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){const n=new sr(t,0),r=this.Jr.firstAfterOrEqual(n);return ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.ti=e,this.docs=(function(){return new un(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ce.resolve(n?n.document.mutableCopy():Lr.newInvalidDocument(t))}getEntries(e,t){let n=Ll();return t.forEach((r=>{const i=this.docs.get(r);n=n.insert(r,i?i.document.mutableCopy():Lr.newInvalidDocument(r))})),ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ll();const a=t.path,u=new Ve(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:f}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||c9(l9(f),n)<=0||(r.has(f.key)||_x(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,n,r){He(9500)}ni(e,t){return ce.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new j8(this)}getSize(e){return ce.resolve(this.size)}}class j8 extends D8{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),ce.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e){this.persistence=e,this.ri=new ep((t=>YF(t)),JF),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.ii=0,this.si=new iS,this.targetCount=0,this.oi=Km._r()}forEachTarget(e,t){return this.ri.forEach(((n,r)=>t(r))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),ce.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Km(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.lr(t),ce.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ri.forEach(((a,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)})),ce.waitFor(i).next((()=>r))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return ce.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),ce.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((a=>{i.push(r.markPotentiallyOrphaned(e,a))})),ce.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return ce.resolve(n)}containsKey(e,t){return ce.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,t){this._i={},this.overlays={},this.ai=new yx(0),this.ui=!1,this.ui=!0,this.ci=new B8,this.referenceDelegate=e(this),this.li=new $8(this),this.indexManager=new F8,this.remoteDocumentCache=(function(r){return new U8(r)})((n=>this.referenceDelegate.hi(n))),this.serializer=new b8(t),this.Pi=new L8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new V8(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){ke("MemoryPersistence","Starting transaction:",e);const r=new z8(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((i=>this.referenceDelegate.Ii(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ei(e,t){return ce.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}}class z8 extends d9{constructor(e){super(),this.currentSequenceNumber=e}}class aS{constructor(e){this.persistence=e,this.Ri=new iS,this.Ai=null}static Vi(e){return new aS(e)}get di(){if(this.Ai)return this.Ai;throw He(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),ce.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((i=>this.di.add(i.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.di,(n=>{const r=Ve.fromPath(n);return this.mi(e,r).next((i=>{i||t.removeEntry(r,Qe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((n=>{n?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ce.or([()=>ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class b_{constructor(e,t){this.persistence=e,this.fi=new ep((n=>f9(n.path)),((n,r)=>n.isEqual(r))),this.garbageCollector=R8(this,t)}static Vi(e,t){return new b_(e,t)}Ti(){}Ii(e){return ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((r=>n+r))))}pr(e){let t=0;return this.mr(e,(n=>{t++})).next((()=>t))}mr(e,t){return ce.forEach(this.fi,((n,r)=>this.wr(e,n,r).next((i=>i?ce.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,(a=>this.wr(e,a,t).next((u=>{u||(n++,i.removeEntry(a,Qe.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ce.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ce.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ce.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=AA(e.data.value)),t}wr(e,t,n){return ce.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return ce.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(e,t){let n=ct(),r=ct();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new oS(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return m5()?8:h9(Or())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.gs(e,t).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new H8;return this.ys(e,t,a).next((u=>{if(i.result=u,this.As)return this.ws(e,t,a,u.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(Gp()<=ot.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",qp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ce.resolve()):(Gp()<=ot.DEBUG&&ke("QueryEngine","Query:",qp(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(Gp()<=ot.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",qp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oo(t))):ce.resolve())}gs(e,t){if(TP(t))return ce.resolve(null);let n=oo(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=__(t,null,"F"),n=oo(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const a=ct(...i);return this.fs.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.bs(t,u);return this.Ss(t,h,a,d.readTime)?this.gs(e,__(t,null,"F")):this.Ds(e,h,t,d)}))))})))))}ps(e,t,n,r){return TP(t)||r.isEqual(Qe.min())?ce.resolve(null):this.fs.getDocuments(e,n).next((i=>{const a=this.bs(t,i);return this.Ss(t,a,n,r)?ce.resolve(null):(Gp()<=ot.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qp(t)),this.Ds(e,a,t,o9(r,Zg)).next((u=>u)))}))}bs(e,t){let n=new Gn(dN(e));return t.forEach(((r,i)=>{_x(e,i)&&(n=n.add(i))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return Gp()<=ot.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",qp(t)),this.fs.getDocumentsMatchingQuery(e,t,Su.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((i=>(t.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="LocalStore",G8=3e8;class q8{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new un(lt),this.Fs=new ep((i=>YF(i)),JF),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M8(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Q8(s,e,t,n){return new q8(s,e,t,n)}async function LN(s,e){const t=qe(s);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next((i=>(r=i,t.Os(e),t.mutationQueue.getAllMutationBatches(n)))).next((i=>{const a=[],u=[];let d=ct();for(const h of r){a.push(h.batchId);for(const f of h.mutations)d=d.add(f.key)}for(const h of i){u.push(h.batchId);for(const f of h.mutations)d=d.add(f.key)}return t.localDocuments.getDocuments(n,d).next((h=>({Ns:h,removedBatchIds:a,addedBatchIds:u})))}))}))}function K8(s,e){const t=qe(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const r=e.batch.keys(),i=t.xs.newChangeBuffer({trackRemovals:!0});return(function(u,d,h,f){const g=h.batch,w=g.keys();let v=ce.resolve();return w.forEach((F=>{v=v.next((()=>f.getEntry(d,F))).next((C=>{const S=h.docVersions.get(F);Et(S!==null,48541),C.version.compareTo(S)<0&&(g.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),f.addEntry(C)))}))})),v.next((()=>u.mutationQueue.removeMutationBatch(d,g)))})(t,n,e,i).next((()=>i.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=ct();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,r)))}))}function ON(s){const e=qe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function X8(s,e){const t=qe(s),n=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const u=[];e.targetChanges.forEach(((f,g)=>{const w=r.get(g);if(!w)return;u.push(t.li.removeMatchingKeys(i,f.removedDocuments,g).next((()=>t.li.addMatchingKeys(i,f.addedDocuments,g))));let v=w.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?v=v.withResumeToken(_r.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,n)),r=r.insert(g,v),(function(C,S,I){return C.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=G8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(w,v,f)&&u.push(t.li.updateTargetData(i,v))}));let d=Ll(),h=ct();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))})),u.push(Y8(i,a,e.documentUpdates).next((f=>{d=f.Bs,h=f.Ls}))),!n.isEqual(Qe.min())){const f=t.li.getLastRemoteSnapshotVersion(i).next((g=>t.li.setTargetsMetadata(i,i.currentSequenceNumber,n)));u.push(f)}return ce.waitFor(u).next((()=>a.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(t.vs=r,i)))}function Y8(s,e,t){let n=ct(),r=ct();return t.forEach((i=>n=n.add(i))),e.getEntries(s,n).next((i=>{let a=Ll();return t.forEach(((u,d)=>{const h=i.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Qe.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):ke(lS,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)})),{Bs:a,Ls:r}}))}function J8(s,e){const t=qe(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=QF),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function Z8(s,e){const t=qe(s);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let r;return t.li.getTargetData(n,e).next((i=>i?(r=i,ce.resolve(r)):t.li.allocateTargetId(n).next((a=>(r=new vu(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.li.addTargetData(n,r).next((()=>r)))))))})).then((n=>{const r=t.vs.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(n.targetId,n),t.Fs.set(e,n.targetId)),n}))}async function jb(s,e,t){const n=qe(s),r=n.vs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",i,(a=>n.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!i2(a))throw a;ke(lS,`Failed to update sequence numbers for target ${e}: ${a}`)}n.vs=n.vs.remove(e),n.Fs.delete(r.target)}function jP(s,e,t){const n=qe(s);let r=Qe.min(),i=ct();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,h,f){const g=qe(d),w=g.Fs.get(f);return w!==void 0?ce.resolve(g.vs.get(w)):g.li.getTargetData(h,f)})(n,a,oo(e)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(a,u.targetId).next((d=>{i=d}))})).next((()=>n.Cs.getDocumentsMatchingQuery(a,e,t?r:Qe.min(),t?i:ct()))).next((u=>(e$(n,O9(e),u),{documents:u,ks:i})))))}function e$(s,e,t){let n=s.Ms.get(e)||Qe.min();t.forEach(((r,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),s.Ms.set(e,n)}class $P{constructor(){this.activeTargetIds=z9()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t${constructor(){this.vo=new $P,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new $P,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="ConnectivityMonitor";class HP{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ke(zP,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ke(zP,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eA=null;function $b(){return eA===null?eA=(function(){return 268435456+Math.round(2147483648*Math.random())})():eA++,"0x"+eA.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="RestConnection",r$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class s${get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===w_?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){const a=$b(),u=this.Qo(e,t.toUriEncodedString());ke(LE,`Sending RPC '${e}' ${a}:`,u,n);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,r,i);const{host:h}=new URL(u),f=Vu(h);return this.zo(e,u,d,n,f).then((g=>(ke(LE,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw $h(LE,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",n),g}))}jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}Go(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+r2})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,i)=>e[i]=r)),n&&n.headers.forEach(((r,i)=>e[i]=r))}Qo(e,t){const n=r$[e];let r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="WebChannelConnection",sg=(s,e,t)=>{s.listen(e,(n=>{try{t(n)}catch(r){setTimeout((()=>{throw r}),0)}}))};class ff extends s${constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ff.c_){const e=U3();sg(e,V3.STAT_EVENT,(t=>{t.stat===Ib.PROXY?ke(Sr,"STAT_EVENT: detected buffering proxy"):t.stat===Ib.NOPROXY&&ke(Sr,"STAT_EVENT: detected no buffering proxy")})),ff.c_=!0}}zo(e,t,n,r,i){const a=$b();return new Promise(((u,d)=>{const h=new O3;h.setWithCredentials(!0),h.listenOnce(B3.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case vA.NO_ERROR:const g=h.getResponseJson();ke(Sr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case vA.TIMEOUT:ke(Sr,`RPC '${e}' ${a} timed out`),d(new Ee(le.DEADLINE_EXCEEDED,"Request time out"));break;case vA.HTTP_ERROR:const w=h.getStatus();if(ke(Sr,`RPC '${e}' ${a} failed with status:`,w,"response text:",h.getResponseText()),w>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const F=v==null?void 0:v.error;if(F&&F.status&&F.message){const C=(function(I){const O=I.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(O)>=0?O:le.UNKNOWN})(F.status);d(new Ee(C,F.message))}else d(new Ee(le.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Ee(le.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ke(Sr,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(r);ke(Sr,`RPC '${e}' ${a} sending request:`,r),h.send(t,"POST",f,n,15)}))}T_(e,t,n){const r=$b(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const h=i.join("");ke(Sr,`Creating RPC '${e}' stream ${r}: ${h}`,u);const f=a.createWebChannel(h,u);this.I_(f);let g=!1,w=!1;const v=new i$({Ho:F=>{w?ke(Sr,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(g||(ke(Sr,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),ke(Sr,`RPC '${e}' stream ${r} sending:`,F),f.send(F))},Jo:()=>f.close()});return sg(f,yg.EventType.OPEN,(()=>{w||(ke(Sr,`RPC '${e}' stream ${r} transport opened.`),v.i_())})),sg(f,yg.EventType.CLOSE,(()=>{w||(w=!0,ke(Sr,`RPC '${e}' stream ${r} transport closed`),v.o_(),this.E_(f))})),sg(f,yg.EventType.ERROR,(F=>{w||(w=!0,$h(Sr,`RPC '${e}' stream ${r} transport errored. Name:`,F.name,"Message:",F.message),v.o_(new Ee(le.UNAVAILABLE,"The operation could not be completed")))})),sg(f,yg.EventType.MESSAGE,(F=>{var C;if(!w){const S=F.data[0];Et(!!S,16349);const I=S,O=(I==null?void 0:I.error)||((C=I[0])==null?void 0:C.error);if(O){ke(Sr,`RPC '${e}' stream ${r} received error:`,O);const R=O.status;let V=(function(N){const D=Dn[N];if(D!==void 0)return xN(D)})(R),z=O.message;R==="NOT_FOUND"&&z.includes("database")&&z.includes("does not exist")&&z.includes(this.databaseId.database)&&$h(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),V===void 0&&(V=le.INTERNAL,z="Unknown error status: "+R+" with message "+O.message),w=!0,v.o_(new Ee(V,z)),f.close()}else ke(Sr,`RPC '${e}' stream ${r} received:`,S),v.__(S)}})),ff.u_(),setTimeout((()=>{v.s_()}),0),v}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return j3()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a$(s){return new ff(s)}function OE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(s){return new u8(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ff.c_=!1;class BN{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&ke("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP="PersistentStream";class VN{constructor(e,t,n,r,i,a,u,d){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Ml(t.toString()),Ml("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,r])=>{this.D_===t&&this.G_(n,r)}),(n=>{e((()=>{const r=new Ee(le.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(r)}))}))}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{n((()=>this.z_(r)))})),this.stream.onMessage((r=>{n((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(WP,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ke(WP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class o$ extends VN{constructor(e,t,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=p8(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Qe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Qe.min():a.readTime?lo(a.readTime):Qe.min()})(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=Ub(this.serializer),t.addTarget=(function(i,a){let u;const d=a.target;if(u=Mb(d)?{documents:g8(i,d)}:{query:kN(i,d).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=CN(i,a.resumeToken);const h=Ob(i,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Qe.min())>0){u.readTime=E_(i,a.snapshotVersion.toTimestamp());const h=Ob(i,a.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const n=v8(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=Ub(this.serializer),t.removeTarget=e,this.K_(t)}}class l$ extends VN{constructor(e,t,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=m8(e.writeResults,e.commitTime),n=lo(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ub(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>f8(this.serializer,n)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${}class u$ extends c${constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,Bb(t,n),r,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ee(le.UNKNOWN,i.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.jo(e,Bb(t,n),r,a,u,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(le.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function d$(s,e,t,n){return new u$(s,e,t,n)}class h${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ml(t),this.aa=!1):ke("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="RemoteStore";class p${constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((a=>{n.enqueueAndForget((async()=>{tp(this)&&(ke(zh,"Restarting streams for network reachability change."),await(async function(d){const h=qe(d);h.Ea.add(4),await v0(h),h.Va.set("Unknown"),h.Ea.delete(4),await Fx(h)})(this))}))})),this.Va=new h$(n,r)}}async function Fx(s){if(tp(s))for(const e of s.Ra)await e(!0)}async function v0(s){for(const e of s.Ra)await e(!1)}function UN(s,e){const t=qe(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),hS(t)?dS(t):o2(t).O_()&&uS(t,e))}function cS(s,e){const t=qe(s),n=o2(t);t.Ia.delete(e),n.O_()&&jN(t,e),t.Ia.size===0&&(n.O_()?n.L_():tp(t)&&t.Va.set("Unknown"))}function uS(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}o2(s).Z_(e)}function jN(s,e){s.da.$e(e),o2(s).X_(e)}function dS(s){s.da=new a8({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),o2(s).start(),s.Va.ua()}function hS(s){return tp(s)&&!o2(s).x_()&&s.Ia.size>0}function tp(s){return qe(s).Ea.size===0}function $N(s){s.da=void 0}async function f$(s){s.Va.set("Online")}async function m$(s){s.Ia.forEach(((e,t)=>{uS(s,e)}))}async function g$(s,e){$N(s),hS(s)?(s.Va.ha(e),dS(s)):s.Va.set("Unknown")}async function y$(s,e,t){if(s.Va.set("Online"),e instanceof bN&&e.state===2&&e.cause)try{await(async function(r,i){const a=i.cause;for(const u of i.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.da.removeTarget(u))})(s,e)}catch(n){ke(zh,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await C_(s,n)}else if(e instanceof EA?s.da.Xe(e):e instanceof EN?s.da.st(e):s.da.tt(e),!t.isEqual(Qe.min()))try{const n=await ON(s.localStore);t.compareTo(n)>=0&&await(function(i,a){const u=i.da.Tt(a);return u.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(d.resumeToken,a))}})),u.targetMismatches.forEach(((d,h)=>{const f=i.Ia.get(d);if(!f)return;i.Ia.set(d,f.withResumeToken(_r.EMPTY_BYTE_STRING,f.snapshotVersion)),jN(i,d);const g=new vu(f.target,d,h,f.sequenceNumber);uS(i,g)})),i.remoteSyncer.applyRemoteEvent(u)})(s,t)}catch(n){ke(zh,"Failed to raise snapshot:",n),await C_(s,n)}}async function C_(s,e,t){if(!i2(e))throw e;s.Ea.add(1),await v0(s),s.Va.set("Offline"),t||(t=()=>ON(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ke(zh,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await Fx(s)}))}function zN(s,e){return e().catch((t=>C_(s,t,e)))}async function Sx(s){const e=qe(s),t=Pu(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:QF;for(;w$(e);)try{const r=await J8(e.localStore,n);if(r===null){e.Ta.length===0&&t.L_();break}n=r.batchId,v$(e,r)}catch(r){await C_(e,r)}HN(e)&&WN(e)}function w$(s){return tp(s)&&s.Ta.length<10}function v$(s,e){s.Ta.push(e);const t=Pu(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function HN(s){return tp(s)&&!Pu(s).x_()&&s.Ta.length>0}function WN(s){Pu(s).start()}async function A$(s){Pu(s).ra()}async function _$(s){const e=Pu(s);for(const t of s.Ta)e.ea(t.mutations)}async function x$(s,e,t){const n=s.Ta.shift(),r=nS.from(n,e,t);await zN(s,(()=>s.remoteSyncer.applySuccessfulWrite(r))),await Sx(s)}async function E$(s,e){e&&Pu(s).Y_&&await(async function(n,r){if((function(a){return r8(a)&&a!==le.ABORTED})(r.code)){const i=n.Ta.shift();Pu(n).B_(),await zN(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Sx(n)}})(s,e),HN(s)&&WN(s)}async function GP(s,e){const t=qe(s);t.asyncQueue.verifyOperationInProgress(),ke(zh,"RemoteStore received new credentials");const n=tp(t);t.Ea.add(3),await v0(t),n&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Fx(t)}async function b$(s,e){const t=qe(s);e?(t.Ea.delete(2),await Fx(t)):e||(t.Ea.add(2),await v0(t),t.Va.set("Unknown"))}function o2(s){return s.ma||(s.ma=(function(t,n,r){const i=qe(t);return i.sa(),new o$(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(s.datastore,s.asyncQueue,{Zo:f$.bind(null,s),Yo:m$.bind(null,s),t_:g$.bind(null,s),J_:y$.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),hS(s)?dS(s):s.Va.set("Unknown")):(await s.ma.stop(),$N(s))}))),s.ma}function Pu(s){return s.fa||(s.fa=(function(t,n,r){const i=qe(t);return i.sa(),new l$(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:A$.bind(null,s),t_:E$.bind(null,s),ta:_$.bind(null,s),na:x$.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Sx(s)):(await s.fa.stop(),s.Ta.length>0&&(ke(zh,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ao,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const a=Date.now()+n,u=new pS(e,t,a,r,i);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fS(s,e){if(Ml("AsyncQueue",`${e}: ${s}`),i2(s))return new Ee(le.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{static emptySet(e){return new mf(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ve.comparator(t.key,n.key):(t,n)=>Ve.comparator(t.key,n.key),this.keyedMap=wg(),this.sortedSet=new un(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new mf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.ga=new un(Ve.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):He(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Xm{constructor(e,t,n,r,i,a,u,d,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,r,i){const a=[];return t.forEach((u=>{a.push({type:0,doc:u})})),new Xm(e,t,mf.emptySet(t),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ax(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class F${constructor(){this.queries=QP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const r=qe(t),i=r.queries;r.queries=QP(),i.forEach(((a,u)=>{for(const d of u.ba)d.onError(n)}))})(this,new Ee(le.ABORTED,"Firestore shutting down"))}}function QP(){return new ep((s=>uN(s)),Ax)}async function GN(s,e){const t=qe(s);let n=3;const r=e.query;let i=t.queries.get(r);i?!i.Sa()&&e.Da()&&(n=2):(i=new C$,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await t.onListen(r,!0);break;case 1:i.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(a){const u=fS(a,`Initialization of query '${qp(e.query)}' failed`);return void e.onError(u)}t.queries.set(r,i),i.ba.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&mS(t)}async function qN(s,e){const t=qe(s),n=e.query;let r=3;const i=t.queries.get(n);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?r=e.Da()?0:1:!i.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function S$(s,e){const t=qe(s);let n=!1;for(const r of e){const i=r.query,a=t.queries.get(i);if(a){for(const u of a.ba)u.Fa(r)&&(n=!0);a.wa=r}}n&&mS(t)}function T$(s,e,t){const n=qe(s),r=n.queries.get(e);if(r)for(const i of r.ba)i.onError(t);n.queries.delete(e)}function mS(s){s.Ca.forEach((e=>{e.next()}))}var zb,KP;(KP=zb||(zb={})).Ma="default",KP.Cache="cache";class QN{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new Xm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.key=e}}class XN{constructor(e){this.key=e}}class k${constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ct(),this.mutatedKeys=ct(),this.eu=dN(e),this.tu=new mf(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new qP,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((f,g)=>{const w=r.get(f),v=_x(this.query,g)?g:null,F=!!w&&this.mutatedKeys.has(w.key),C=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;w&&v?w.data.isEqual(v.data)?F!==C&&(n.track({type:3,doc:v}),S=!0):this.su(w,v)||(n.track({type:2,doc:v}),S=!0,(d&&this.eu(v,d)>0||h&&this.eu(v,h)<0)&&(u=!0)):!w&&v?(n.track({type:0,doc:v}),S=!0):w&&!v&&(n.track({type:1,doc:w}),S=!0,(d||h)&&(u=!0)),S&&(v?(a=a.add(v),i=C?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{tu:a,iu:n,Ss:u,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((f,g)=>(function(v,F){const C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Vt:S})}};return C(v)-C(F)})(f.type,g.type)||this.eu(f.doc,g.doc))),this.ou(n),r=r??!1;const u=t&&!r?this._u():[],d=this.Ya.size===0&&this.current&&!r?1:0,h=d!==this.Xa;return this.Xa=d,a.length!==0||h?{snapshot:new Xm(this.query,e.tu,i,a,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qP,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ct(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))}));const t=[];return e.forEach((n=>{this.Ya.has(n)||t.push(new XN(n))})),this.Ya.forEach((n=>{e.has(n)||t.push(new KN(n))})),t}cu(e){this.Za=e.ks,this.Ya=ct();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const gS="SyncEngine";class I${constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class P${constructor(e){this.key=e,this.hu=!1}}class R${constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ep((u=>uN(u)),Ax),this.Iu=new Map,this.Eu=new Set,this.Ru=new un(Ve.comparator),this.Au=new Map,this.Vu=new iS,this.du={},this.mu=new Map,this.fu=Km.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function D$(s,e,t=!0){const n=nM(s);let r;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await YN(n,e,t,!0),r}async function N$(s,e){const t=nM(s);await YN(t,e,!0,!1)}async function YN(s,e,t,n){const r=await Z8(s.localStore,oo(e)),i=r.targetId,a=s.sharedClientState.addLocalQueryTarget(i,t);let u;return n&&(u=await M$(s,e,i,a==="current",r.resumeToken)),s.isPrimaryClient&&t&&UN(s.remoteStore,r),u}async function M$(s,e,t,n,r){s.pu=(g,w,v)=>(async function(C,S,I,O){let R=S.view.ru(I);R.Ss&&(R=await jP(C.localStore,S.query,!1).then((({documents:N})=>S.view.ru(N,R))));const V=O&&O.targetChanges.get(S.targetId),z=O&&O.targetMismatches.get(S.targetId)!=null,W=S.view.applyChanges(R,C.isPrimaryClient,V,z);return YP(C,S.targetId,W.au),W.snapshot})(s,g,w,v);const i=await jP(s.localStore,e,!0),a=new k$(e,i.ks),u=a.ru(i.documents),d=w0.createSynthesizedTargetChangeForCurrentChange(t,n&&s.onlineState!=="Offline",r),h=a.applyChanges(u,s.isPrimaryClient,d);YP(s,t,h.au);const f=new I$(e,t,a);return s.Tu.set(e,f),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),h.snapshot}async function L$(s,e,t){const n=qe(s),r=n.Tu.get(e),i=n.Iu.get(r.targetId);if(i.length>1)return n.Iu.set(r.targetId,i.filter((a=>!Ax(a,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await jb(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),t&&cS(n.remoteStore,r.targetId),Hb(n,r.targetId)})).catch(s2)):(Hb(n,r.targetId),await jb(n.localStore,r.targetId,!0))}async function O$(s,e){const t=qe(s),n=t.Tu.get(e),r=t.Iu.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),cS(t.remoteStore,n.targetId))}async function B$(s,e,t){const n=W$(s);try{const r=await(function(a,u){const d=qe(a),h=Xt.now(),f=u.reduce(((v,F)=>v.add(F.key)),ct());let g,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let F=Ll(),C=ct();return d.xs.getEntries(v,f).next((S=>{F=S,F.forEach(((I,O)=>{O.isValidDocument()||(C=C.add(I))}))})).next((()=>d.localDocuments.getOverlayedDocuments(v,F))).next((S=>{g=S;const I=[];for(const O of u){const R=Y9(O,g.get(O.key).overlayedDocument);R!=null&&I.push(new $u(O.key,R,tN(R.value.mapValue),na.exists(!0)))}return d.mutationQueue.addMutationBatch(v,h,I,u)})).next((S=>{w=S;const I=S.applyToLocalDocumentSet(g,C);return d.documentOverlayCache.saveOverlays(v,S.batchId,I)}))})).then((()=>({batchId:w.batchId,changes:pN(g)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),(function(a,u,d){let h=a.du[a.currentUser.toKey()];h||(h=new un(lt)),h=h.insert(u,d),a.du[a.currentUser.toKey()]=h})(n,r.batchId,t),await A0(n,r.changes),await Sx(n.remoteStore)}catch(r){const i=fS(r,"Failed to persist write");t.reject(i)}}async function JN(s,e){const t=qe(s);try{const n=await X8(t.localStore,e);e.targetChanges.forEach(((r,i)=>{const a=t.Au.get(i);a&&(Et(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Et(a.hu,14607):r.removedDocuments.size>0&&(Et(a.hu,42227),a.hu=!1))})),await A0(t,n,e)}catch(n){await s2(n)}}function XP(s,e,t){const n=qe(s);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.Tu.forEach(((i,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)})),(function(a,u){const d=qe(a);d.onlineState=u;let h=!1;d.queries.forEach(((f,g)=>{for(const w of g.ba)w.va(u)&&(h=!0)})),h&&mS(d)})(n.eventManager,e),r.length&&n.Pu.J_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function V$(s,e,t){const n=qe(s);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Au.get(e),i=r&&r.key;if(i){let a=new un(Ve.comparator);a=a.insert(i,Lr.newNoDocument(i,Qe.min()));const u=ct().add(i),d=new bx(Qe.min(),new Map,new un(lt),a,u);await JN(n,d),n.Ru=n.Ru.remove(i),n.Au.delete(e),yS(n)}else await jb(n.localStore,e,!1).then((()=>Hb(n,e,t))).catch(s2)}async function U$(s,e){const t=qe(s),n=e.batch.batchId;try{const r=await K8(t.localStore,e);eM(t,n,null),ZN(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await A0(t,r)}catch(r){await s2(r)}}async function j$(s,e,t){const n=qe(s);try{const r=await(function(a,u){const d=qe(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return d.mutationQueue.lookupMutationBatch(h,u).next((g=>(Et(g!==null,37113),f=g.keys(),d.mutationQueue.removeMutationBatch(h,g)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,f,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>d.localDocuments.getDocuments(h,f)))}))})(n.localStore,e);eM(n,e,t),ZN(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await A0(n,r)}catch(r){await s2(r)}}function ZN(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function eM(s,e,t){const n=qe(s);let r=n.du[n.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),n.du[n.currentUser.toKey()]=r}}function Hb(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const n of s.Iu.get(e))s.Tu.delete(n),t&&s.Pu.yu(n,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((n=>{s.Vu.containsKey(n)||tM(s,n)}))}function tM(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(cS(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),yS(s))}function YP(s,e,t){for(const n of t)n instanceof KN?(s.Vu.addReference(n.key,e),$$(s,n)):n instanceof XN?(ke(gS,"Document no longer in limbo: "+n.key),s.Vu.removeReference(n.key,e),s.Vu.containsKey(n.key)||tM(s,n.key)):He(19791,{wu:n})}function $$(s,e){const t=e.key,n=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(n)||(ke(gS,"New document in limbo: "+t),s.Eu.add(n),yS(s))}function yS(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ve(zt.fromString(e)),n=s.fu.next();s.Au.set(n,new P$(t)),s.Ru=s.Ru.insert(t,n),UN(s.remoteStore,new vu(oo(ZF(t.path)),n,"TargetPurposeLimboResolution",yx.ce))}}async function A0(s,e,t){const n=qe(s),r=[],i=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{a.push(n.pu(d,e,t).then((h=>{var f;if((h||t)&&n.isPrimaryClient){const g=h?!h.fromCache:(f=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:f.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(h){r.push(h);const g=oS.Es(d.targetId,h);i.push(g)}})))})),await Promise.all(a),n.Pu.J_(r),await(async function(d,h){const f=qe(d);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>ce.forEach(h,(w=>ce.forEach(w.Ts,(v=>f.persistence.referenceDelegate.addReference(g,w.targetId,v))).next((()=>ce.forEach(w.Is,(v=>f.persistence.referenceDelegate.removeReference(g,w.targetId,v)))))))))}catch(g){if(!i2(g))throw g;ke(lS,"Failed to update sequence numbers: "+g)}for(const g of h){const w=g.targetId;if(!g.fromCache){const v=f.vs.get(w),F=v.snapshotVersion,C=v.withLastLimboFreeSnapshotVersion(F);f.vs=f.vs.insert(w,C)}}})(n.localStore,i))}async function z$(s,e){const t=qe(s);if(!t.currentUser.isEqual(e)){ke(gS,"User change. New user:",e.toKey());const n=await LN(t.localStore,e);t.currentUser=e,(function(i,a){i.mu.forEach((u=>{u.forEach((d=>{d.reject(new Ee(le.CANCELLED,a))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await A0(t,n.Ns)}}function H$(s,e){const t=qe(s),n=t.Au.get(e);if(n&&n.hu)return ct().add(n.key);{let r=ct();const i=t.Iu.get(e);if(!i)return r;for(const a of i){const u=t.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function nM(s){const e=qe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=JN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=H$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V$.bind(null,e),e.Pu.J_=S$.bind(null,e.eventManager),e.Pu.yu=T$.bind(null,e.eventManager),e}function W$(s){const e=qe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j$.bind(null,e),e}class F_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cx(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Q8(this.persistence,new W8,e.initialUser,this.serializer)}Cu(e){return new MN(aS.Vi,this.serializer)}Du(e){return new t$}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}F_.provider={build:()=>new F_};class G$ extends F_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Et(this.persistence.referenceDelegate instanceof b_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new I8(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ps.withCacheSize(this.cacheSizeBytes):ps.DEFAULT;return new MN((n=>b_.Vi(n,t)),this.serializer)}}class Wb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>XP(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=z$.bind(null,this.syncEngine),await b$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new F$})()}createDatastore(e){const t=Cx(e.databaseInfo.databaseId),n=a$(e.databaseInfo);return d$(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,r,i,a,u){return new p$(n,r,i,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>XP(this.syncEngine,t,0)),(function(){return HP.v()?new HP:new n$})())}createSyncEngine(e,t){return(function(r,i,a,u,d,h,f){const g=new R$(r,i,a,u,d,h);return f&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const i=qe(r);ke(zh,"RemoteStore shutting down."),i.Ea.add(5),await v0(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Wb.provider={build:()=>new Wb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ml("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="FirestoreClient";class q${constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=Mr.UNAUTHENTICATED,this.clientId=qF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async a=>{ke(Ru,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(ke(Ru,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ao;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=fS(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function BE(s,e){s.asyncQueue.verifyOperationInProgress(),ke(Ru,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let n=t.initialUser;s.setCredentialChangeListener((async r=>{n.isEqual(r)||(await LN(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function JP(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Q$(s);ke(Ru,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((n=>GP(e.remoteStore,n))),s.setAppCheckTokenChangeListener(((n,r)=>GP(e.remoteStore,r))),s._onlineComponents=e}async function Q$(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ke(Ru,"Using user provided OfflineComponentProvider");try{await BE(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===le.FAILED_PRECONDITION||r.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;$h("Error using user provided cache. Falling back to memory cache: "+t),await BE(s,new F_)}}else ke(Ru,"Using default OfflineComponentProvider"),await BE(s,new G$(void 0));return s._offlineComponents}async function wS(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ke(Ru,"Using user provided OnlineComponentProvider"),await JP(s,s._uninitializedComponentsProvider._online)):(ke(Ru,"Using default OnlineComponentProvider"),await JP(s,new Wb))),s._onlineComponents}function K$(s){return wS(s).then((e=>e.syncEngine))}function X$(s){return wS(s).then((e=>e.datastore))}async function sM(s){const e=await wS(s),t=e.eventManager;return t.onListen=D$.bind(null,e.syncEngine),t.onUnlisten=L$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=O$.bind(null,e.syncEngine),t}function Y$(s,e,t={}){const n=new ao;return s.asyncQueue.enqueueAndForget((async()=>(function(i,a,u,d,h){const f=new rM({next:w=>{f.Nu(),a.enqueueAndForget((()=>qN(i,g)));const v=w.docs.has(u);!v&&w.fromCache?h.reject(new Ee(le.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&w.fromCache&&d&&d.source==="server"?h.reject(new Ee(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new QN(ZF(u.path),f,{includeMetadataChanges:!0,Ka:!0});return GN(i,g)})(await sM(s),s.asyncQueue,e,t,n))),n.promise}function J$(s,e,t={}){const n=new ao;return s.asyncQueue.enqueueAndForget((async()=>(function(i,a,u,d,h){const f=new rM({next:w=>{f.Nu(),a.enqueueAndForget((()=>qN(i,g))),w.fromCache&&d.source==="server"?h.reject(new Ee(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new QN(u,f,{includeMetadataChanges:!0,Ka:!0});return GN(i,g)})(await sM(s),s.asyncQueue,e,t,n))),n.promise}function Z$(s,e,t){const n=new ao;return s.asyncQueue.enqueueAndForget((async()=>{try{const r=await X$(s);n.resolve((async function(a,u,d){var C;const h=qe(a),{request:f,gt:g,parent:w}=y8(h.serializer,M9(u),d);h.connection.Ko||delete f.parent;const v=(await h.jo("RunAggregationQuery",h.serializer.databaseId,w,f,1)).filter((S=>!!S.result));Et(v.length===1,64727);const F=(C=v[0].result)==null?void 0:C.aggregateFields;return Object.keys(F).reduce(((S,I)=>(S[g[I]]=F[I],S)),{})})(r,e,t))}catch(r){n.reject(r)}})),n.promise}function ez(s,e){const t=new ao;return s.asyncQueue.enqueueAndForget((async()=>B$(await K$(s),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz="ComponentProvider",ZP=new Map;function nz(s,e,t,n,r){return new w9(s,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,iM(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="firestore.googleapis.com",eR=!0;class tR{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aM,this.ssl=eR}else this.host=e.host,this.ssl=e.ssl??eR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T8)throw new Ee(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}i9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iM(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tx{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Kj;switch(n.type){case"firstParty":return new Zj(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ee(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=ZP.get(t);n&&(ke(tz,"Removing Datastore"),ZP.delete(t),n.terminate())})(this),Promise.resolve()}}function rz(s,e,t,n={}){var h;s=uo(s,Tx);const r=Vu(e),i=s._getSettings(),a={...i,emulatorOptions:s._getEmulatorOptions()},u=`${e}:${t}`;r&&(DF(`https://${u}`),NF("Firestore",!0)),i.host!==aM&&i.host!==u&&$h("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...i,host:u,ssl:r,emulatorOptions:n};if(!Bh(d,a)&&(s._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=Mr.MOCK_USER;else{f=YD(n.mockUserToken,(h=s._app)==null?void 0:h.options.projectId);const w=n.mockUserToken.sub||n.mockUserToken.user_id;if(!w)throw new Ee(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Mr(w)}s._authCredentials=new Xj(new z3(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new zu(this.firestore,e,this._query)}}class On{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new On(this.firestore,e,this._key)}toJSON(){return{type:On._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(g0(t,On._jsonSchema))return new On(e,n||null,new Ve(zt.fromString(t.referencePath)))}}On._jsonSchemaVersion="firestore/documentReference/1.0",On._jsonSchema={type:Ln("string",On._jsonSchemaVersion),referencePath:Ln("string")};class bu extends zu{constructor(e,t,n){super(e,t,ZF(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new On(this.firestore,null,new Ve(e))}withConverter(e){return new bu(this.firestore,e,this._path)}}function fs(s,e,...t){if(s=wn(s),H3("collection","path",e),s instanceof Tx){const n=zt.fromString(e,...t);return fP(n),new bu(s,null,n)}{if(!(s instanceof On||s instanceof bu))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(zt.fromString(e,...t));return fP(n),new bu(s.firestore,null,n)}}function la(s,e,...t){if(s=wn(s),arguments.length===1&&(e=qF.newId()),H3("doc","path",e),s instanceof Tx){const n=zt.fromString(e,...t);return pP(n),new On(s,null,new Ve(n))}{if(!(s instanceof On||s instanceof bu))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(zt.fromString(e,...t));return pP(n),new On(s.firestore,s instanceof bu?s.converter:null,new Ve(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="AsyncQueue";class rR{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BN(this,"async_queue_retry"),this._c=()=>{const n=OE();n&&ke(nR,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=OE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=OE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ao;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!i2(e))throw e;ke(nR,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Ml("INTERNAL UNHANDLED ERROR: ",sR(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=pS.createAndSchedule(this,e,t,n,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&He(47125,{Pc:sR(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sR(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class np extends Tx{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new rR,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rR(e),this._firestoreClient=void 0,await e}}}function sz(s,e){const t=typeof s=="object"?s:OF(),n=typeof s=="string"?s:w_,r=dx(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const i=QD("firestore");i&&rz(r,...i)}return r}function kx(s){if(s._terminated)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||iz(s),s._firestoreClient}function iz(s){var n,r,i,a;const e=s._freezeSettings(),t=nz(s._databaseId,((n=s._app)==null?void 0:n.options.appId)||"",s._persistenceKey,(r=s._app)==null?void 0:r.options.apiKey,e);s._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new q$(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ci(_r.fromBase64String(e))}catch(t){throw new Ee(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ci(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(g0(e,Ci._jsonSchema))return Ci.fromBase64String(e.bytes)}}Ci._jsonSchemaVersion="firestore/bytes/1.0",Ci._jsonSchema={type:Ln("string",Ci._jsonSchemaVersion),bytes:Ln("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:co._jsonSchemaVersion}}static fromJSON(e){if(g0(e,co._jsonSchema))return new co(e.latitude,e.longitude)}}co._jsonSchemaVersion="firestore/geoPoint/1.0",co._jsonSchema={type:Ln("string",co._jsonSchemaVersion),latitude:Ln("number"),longitude:Ln("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,r){if(n.length!==r.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ra._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(g0(e,ra._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ra(e.vectorValues);throw new Ee(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ra._jsonSchemaVersion="firestore/vectorValue/1.0",ra._jsonSchema={type:Ln("string",ra._jsonSchemaVersion),vectorValues:Ln("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az=/^__.*__$/;class oz{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new $u(e,this.data,this.fieldMask,t,this.fieldTransforms):new y0(e,this.data,t,this.fieldTransforms)}}class oM{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $u(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lM(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{dataSource:s})}}class AS{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new AS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return S_(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(lM(this.dataSource)&&az.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class lz{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Cx(e)}createContext(e,t,n,r=!1){return new AS({dataSource:e,methodName:t,targetDoc:n,path:vr.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _S(s){const e=s._freezeSettings(),t=Cx(s._databaseId);return new lz(s._databaseId,!!e.ignoreUndefinedProperties,t)}function cz(s,e,t,n,r,i={}){const a=s.createContext(i.merge||i.mergeFields?2:0,e,t,r);ES("Data must be an object, but it was:",a,n);const u=cM(n,a);let d,h;if(i.merge)d=new Ks(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const w=Hh(e,g,t);if(!a.contains(w))throw new Ee(le.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);hM(f,w)||f.push(w)}d=new Ks(f),h=a.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,h=a.fieldTransforms;return new oz(new qr(u),d,h)}class Px extends Ix{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Px}}class xS extends Ix{_toFieldTransform(e){return new q9(e.path,new sy)}isEqual(e){return e instanceof xS}}function uz(s,e,t,n){const r=s.createContext(1,e,t);ES("Data must be an object, but it was:",r,n);const i=[],a=qr.empty();ju(n,((d,h)=>{const f=dM(e,d,t);h=wn(h);const g=r.childContextForFieldPath(f);if(h instanceof Px)i.push(f);else{const w=_0(h,g);w!=null&&(i.push(f),a.set(f,w))}}));const u=new Ks(i);return new oM(a,u,r.fieldTransforms)}function dz(s,e,t,n,r,i){const a=s.createContext(1,e,t),u=[Hh(e,n,t)],d=[r];if(i.length%2!=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<i.length;w+=2)u.push(Hh(e,i[w])),d.push(i[w+1]);const h=[],f=qr.empty();for(let w=u.length-1;w>=0;--w)if(!hM(h,u[w])){const v=u[w];let F=d[w];F=wn(F);const C=a.childContextForFieldPath(v);if(F instanceof Px)h.push(v);else{const S=_0(F,C);S!=null&&(h.push(v),f.set(v,S))}}const g=new Ks(h);return new oM(f,g,a.fieldTransforms)}function hz(s,e,t,n=!1){return _0(t,s.createContext(n?4:3,e))}function _0(s,e){if(uM(s=wn(s)))return ES("Unsupported field value:",e,s),cM(s,e);if(s instanceof Ix)return(function(n,r){if(!lM(r.dataSource))throw r.createError(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(n,r){const i=[];let a=0;for(const u of n){let d=_0(u,r.childContextForArray(a));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}})(s,e)}return(function(n,r){if((n=wn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return H9(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Xt.fromDate(n);return{timestampValue:E_(r.serializer,i)}}if(n instanceof Xt){const i=new Xt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:E_(r.serializer,i)}}if(n instanceof co)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ci)return{bytesValue:CN(r.serializer,n._byteString)};if(n instanceof On){const i=r.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw r.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:sS(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof ra)return(function(a,u){const d=a instanceof ra?a.toArray():a;return{mapValue:{fields:{[Z3]:{stringValue:eN},[v_]:{arrayValue:{values:d.map((f=>{if(typeof f!="number")throw u.createError("VectorValues must only contain numeric values.");return eS(u.serializer,f)}))}}}}}})(n,r);if(DN(n))return n._toProto(r.serializer);throw r.createError(`Unsupported field value: ${gx(n)}`)})(s,e)}function cM(s,e){const t={};return q3(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ju(s,((n,r)=>{const i=_0(r,e.childContextForField(n));i!=null&&(t[n]=i)})),{mapValue:{fields:t}}}function uM(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Xt||s instanceof co||s instanceof Ci||s instanceof On||s instanceof Ix||s instanceof ra||DN(s))}function ES(s,e,t){if(!uM(t)||!W3(t)){const n=gx(t);throw n==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+n)}}function Hh(s,e,t){if((e=wn(e))instanceof vS)return e._internalPath;if(typeof e=="string")return dM(s,e);throw S_("Field path arguments must be of type string or ",s,!1,void 0,t)}const pz=new RegExp("[~\\*/\\[\\]]");function dM(s,e,t){if(e.search(pz)>=0)throw S_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new vS(...e.split("."))._internalPath}catch{throw S_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function S_(s,e,t,n,r){const i=n&&!n.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(i||a)&&(d+=" (found",i&&(d+=` in field ${n}`),a&&(d+=` in document ${r}`),d+=")"),new Ee(le.INVALID_ARGUMENT,u+s+d)}function hM(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{convertValue(e,t="none"){switch(Iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return ju(e,((r,i)=>{n[r]=this.convertValue(i,t)})),n}convertVectorValue(e){var n,r,i;const t=(i=(r=(n=e.fields)==null?void 0:n[v_].arrayValue)==null?void 0:r.values)==null?void 0:i.map((a=>Sn(a.doubleValue)));return new ra(t)}convertGeoPoint(e){return new co(Sn(e.latitude),Sn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=vx(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ey(e));default:return null}}convertTimestamp(e){const t=Tu(e);return new Xt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=zt.fromString(e);Et(RN(n),9688,{name:e});const r=new ty(n.get(1),n.get(3)),i=new Ve(n.popFirst(5));return r.isEqual(t)||Ml(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends fz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ci(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new On(this.firestore,null,t)}}function x0(){return new xS("serverTimestamp")}const iR="@firebase/firestore",aR="4.11.0";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class gz{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new qr({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new On(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Hh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yz extends pM{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wz(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ee(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CS{}class FS extends CS{}function sa(s,e,...t){let n=[];e instanceof CS&&n.push(e),n=n.concat(t),(function(i){const a=i.filter((d=>d instanceof SS)).length,u=i.filter((d=>d instanceof Rx)).length;if(a>1||a>0&&u>0)throw new Ee(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const r of n)s=r._apply(s);return s}class Rx extends FS{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Rx(e,t,n)}_apply(e){const t=this._parse(e);return mM(e._query,t),new zu(e.firestore,e.converter,Lb(e._query,t))}_parse(e){const t=_S(e.firestore);return(function(i,a,u,d,h,f,g){let w;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){lR(g,f);const F=[];for(const C of g)F.push(oR(d,i,C));w={arrayValue:{values:F}}}else w=oR(d,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||lR(g,f),w=hz(u,a,g,f==="in"||f==="not-in");return Mn.create(h,f,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Cu(s,e,t){const n=e,r=Hh("where",s);return Rx._create(r,n,t)}class SS extends CS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new SS(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:aa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,i){let a=r;const u=i.getFlattenedFilters();for(const d of u)mM(a,d),a=Lb(a,d)})(e._query,t),new zu(e.firestore,e.converter,Lb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class TS extends FS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new TS(e,t)}_apply(e){const t=(function(r,i,a){if(r.startAt!==null)throw new Ee(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ee(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ry(i,a)})(e._query,this._field,this._direction);return new zu(e.firestore,e.converter,L9(e._query,t))}}function Du(s,e="asc"){const t=e,n=Hh("orderBy",s);return TS._create(n,t)}class kS extends FS{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new kS(e,t,n)}_apply(e){return new zu(e.firestore,e.converter,__(e._query,this._limit,this._limitType))}}function fM(s){return a9("limit",s),kS._create("limit",s,"F")}function oR(s,e,t){if(typeof(t=wn(t))=="string"){if(t==="")throw new Ee(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lN(e)&&t.indexOf("/")!==-1)throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(zt.fromString(t));if(!Ve.isDocumentKey(n))throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return xP(s,new Ve(n))}if(t instanceof On)return xP(s,t._key);throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gx(t)}.`)}function lR(s,e){if(!Array.isArray(s)||s.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mM(s,e){const t=(function(r,i){for(const a of r)for(const u of a.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null})(s.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function vz(s,e,t){let n;return n=s?s.toFirestore(e):e,n}function Az(){return new mz("count")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(s){return _z(s,{count:Az()})}function _z(s,e){const t=uo(s.firestore,np),n=kx(t),r=g9(e,((i,a)=>new t8(a,i.aggregateType,i._internalFieldPath)));return Z$(n,s._query,r).then((i=>(function(u,d,h){const f=new bS(u);return new gz(d,f,h)})(t,s,i)))}class Ag{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lh extends pM{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Lh._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Lh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lh._jsonSchema={type:Ln("string",Lh._jsonSchemaVersion),bundleSource:Ln("string","DocumentSnapshot"),bundleName:Ln("string"),bundle:Ln("string")};class bA extends Lh{data(e={}){return super.data(e)}}class gf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ag(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new bA(this._firestore,this._userDataWriter,n.key,n,new Ag(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map((u=>{const d=new bA(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ag(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>i||u.type!==3)).map((u=>{const d=new bA(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ag(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),f=a.indexOf(u.doc.key)),{type:xz(u.type),doc:d,oldIndex:h,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qF.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xz(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:s})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gf._jsonSchemaVersion="firestore/querySnapshot/1.0",gf._jsonSchema={type:Ln("string",gf._jsonSchemaVersion),bundleSource:Ln("string","QuerySnapshot"),bundleName:Ln("string"),bundle:Ln("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(s){s=uo(s,On);const e=uo(s.firestore,np),t=kx(e);return Y$(t,s._key).then((n=>bz(e,s,n)))}function rp(s){s=uo(s,zu);const e=uo(s.firestore,np),t=kx(e),n=new bS(e);return wz(s._query),J$(t,s._query).then((r=>new gf(e,n,s,r)))}function Dx(s,e,t,...n){s=uo(s,On);const r=uo(s.firestore,np),i=_S(r);let a;return a=typeof(e=wn(e))=="string"||e instanceof vS?dz(i,"updateDoc",s._key,e,t,n):uz(i,"updateDoc",s._key,e),IS(r,[a.toMutation(s._key,na.exists(!0))])}function E0(s){return IS(uo(s.firestore,np),[new tS(s._key,na.none())])}function b0(s,e){const t=uo(s.firestore,np),n=la(s),r=vz(s.converter,e),i=_S(s.firestore);return IS(t,[cz(i,"addDoc",n._key,r,s.converter!==null,{}).toMutation(n._key,na.exists(!1))]).then((()=>n))}function IS(s,e){const t=kx(s);return ez(t,e)}function bz(s,e,t){const n=t.docs.get(e._key),r=new bS(s);return new Lh(s,r,e._key,n,new Ag(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Qj(Jh),Vh(new Fu("firestore",((n,{instanceIdentifier:r,options:i})=>{const a=n.getProvider("app").getImmediate(),u=new np(new Yj(n.getProvider("auth-internal")),new e9(a,n.getProvider("app-check-internal")),v9(a,r),a);return i={useFetchStreams:t,...i},u._setSettings(i),u}),"PUBLIC").setMultipleInstances(!0)),ro(iR,aR,e),ro(iR,aR,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="firebasestorage.googleapis.com",yM="storageBucket",Cz=120*1e3,Fz=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends vo{constructor(e,t,n=0){super(UE(e),`Firebase Storage: ${t} (${UE(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,An.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return UE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vn||(vn={}));function UE(s){return"storage/"+s}function PS(){const s="An unknown error occurred, please check the error payload for server response.";return new An(vn.UNKNOWN,s)}function Sz(s){return new An(vn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function Tz(s){return new An(vn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kz(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new An(vn.UNAUTHENTICATED,s)}function Iz(){return new An(vn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Pz(s){return new An(vn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function Rz(){return new An(vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Dz(){return new An(vn.CANCELED,"User canceled the upload/download.")}function Nz(s){return new An(vn.INVALID_URL,"Invalid URL '"+s+"'.")}function Mz(s){return new An(vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function Lz(){return new An(vn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yM+"' property when initializing the app?")}function Oz(){return new An(vn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Bz(){return new An(vn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Vz(s){return new An(vn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Gb(s){return new An(vn.INVALID_ARGUMENT,s)}function wM(){return new An(vn.APP_DELETED,"The Firebase app was deleted.")}function Uz(s){return new An(vn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qg(s,e){return new An(vn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function ig(s){throw new An(vn.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Xs.makeFromUrl(e,t)}catch{return new Xs(e,"")}if(n.path==="")return n;throw Mz(e)}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),d={bucket:1,path:3};function h(V){V.path_=decodeURIComponent(V.path)}const f="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",v=new RegExp(`^https?://${g}/${f}/b/${r}/o${w}`,"i"),F={bucket:1,path:3},C=t===gM?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",I=new RegExp(`^https?://${C}/${r}/${S}`,"i"),R=[{regex:u,indices:d,postModify:i},{regex:v,indices:F,postModify:h},{regex:I,indices:{bucket:1,path:2},postModify:h}];for(let V=0;V<R.length;V++){const z=R[V],W=z.regex.exec(e);if(W){const N=W[z.indices.bucket];let D=W[z.indices.path];D||(D=""),n=new Xs(N,D),z.postModify(n);break}}if(n==null)throw Nz(e);return n}}class jz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(s,e,t){let n=1,r=null,i=null,a=!1,u=0;function d(){return u===2}let h=!1;function f(...S){h||(h=!0,e.apply(null,S))}function g(S){r=setTimeout(()=>{r=null,s(v,d())},S)}function w(){i&&clearTimeout(i)}function v(S,...I){if(h){w();return}if(S){w(),f.call(null,S,...I);return}if(d()||a){w(),f.call(null,S,...I);return}n<64&&(n*=2);let R;u===1?(u=2,R=0):R=(n+Math.random())*1e3,g(R)}let F=!1;function C(S){F||(F=!0,w(),!h&&(r!==null?(S||(u=2),clearTimeout(r),g(0)):S||(u=1)))}return g(0),i=setTimeout(()=>{a=!0,C(!0)},t),C}function zz(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(s){return s!==void 0}function Wz(s){return typeof s=="object"&&!Array.isArray(s)}function RS(s){return typeof s=="string"||s instanceof String}function cR(s){return DS()&&s instanceof Blob}function DS(){return typeof Blob<"u"}function uR(s,e,t,n){if(n<e)throw Gb(`Invalid value for '${s}'. Expected ${e} or greater.`);if(n>t)throw Gb(`Invalid value for '${s}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(s,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${s}`}function vM(s){const e=encodeURIComponent;let t="?";for(const n in s)if(s.hasOwnProperty(n)){const r=e(n)+"="+e(s[n]);t=t+r+"&"}return t=t.slice(0,-1),t}var Oh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Oh||(Oh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gz(s,e){const t=s>=500&&s<600,r=[408,429].indexOf(s)!==-1,i=e.indexOf(s)!==-1;return t||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e,t,n,r,i,a,u,d,h,f,g,w=!0,v=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=g,this.retry=w,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,C)=>{this.resolve_=F,this.reject_=C,this.start_()})}start_(){const e=(n,r)=>{if(r){n(!1,new tA(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=u=>{const d=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const u=i.getErrorCode()===Oh.NO_ERROR,d=i.getStatus();if(!u||Gz(d,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Oh.ABORT;n(!1,new tA(!1,null,f));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new tA(h,i))})},t=(n,r)=>{const i=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());Hz(d)?i(d):i()}catch(d){a(d)}else if(u!==null){const d=PS();d.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,d)):a(d)}else if(r.canceled){const d=this.appDelete_?wM():Dz();a(d)}else{const d=Rz();a(d)}};this.canceled_?t(!1,new tA(!1,null,!0)):this.backoffId_=$z(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tA{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Qz(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function Kz(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Xz(s,e){e&&(s["X-Firebase-GMPID"]=e)}function Yz(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function Jz(s,e,t,n,r,i,a=!0,u=!1){const d=vM(s.urlParams),h=s.url+d,f=Object.assign({},s.headers);return Xz(f,e),Qz(f,t),Kz(f,i),Yz(f,n),new qz(h,s.method,f,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,r,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eH(...s){const e=Zz();if(e!==void 0){const t=new e;for(let n=0;n<s.length;n++)t.append(s[n]);return t.getBlob()}else{if(DS())return new Blob(s);throw new An(vn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tH(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(s){if(typeof atob>"u")throw Vz("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jE{constructor(e,t){this.data=e,this.contentType=t||null}}function rH(s,e){switch(s){case no.RAW:return new jE(AM(e));case no.BASE64:case no.BASE64URL:return new jE(_M(s,e));case no.DATA_URL:return new jE(iH(e),aH(e))}throw PS()}function AM(s){const e=[];for(let t=0;t<s.length;t++){let n=s.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=s.charCodeAt(++t);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function sH(s){let e;try{e=decodeURIComponent(s)}catch{throw Qg(no.DATA_URL,"Malformed data URL.")}return AM(e)}function _M(s,e){switch(s){case no.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Qg(s,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case no.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Qg(s,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=nH(e)}catch(r){throw r.message.includes("polyfill")?r:Qg(s,"Invalid character found")}const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}class xM{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Qg(no.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=oH(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function iH(s){const e=new xM(s);return e.base64?_M(no.BASE64,e.rest):sH(e.rest)}function aH(s){return new xM(s).contentType}function oH(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t){let n=0,r="";cR(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(cR(this.data_)){const n=this.data_,r=tH(n,e,t);return r===null?null:new Ec(r)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Ec(n,!0)}}static getBlob(...e){if(DS()){const t=e.map(n=>n instanceof Ec?n.data_:n);return new Ec(eH.apply(null,t))}else{const t=e.map(a=>RS(a)?rH(no.RAW,a).data:a.data_);let n=0;t.forEach(a=>{n+=a.byteLength});const r=new Uint8Array(n);let i=0;return t.forEach(a=>{for(let u=0;u<a.length;u++)r[i++]=a[u]}),new Ec(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(s){let e;try{e=JSON.parse(s)}catch{return null}return Wz(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function cH(s,e){const t=e.split("/").filter(n=>n.length>0).join("/");return s.length===0?t:s+"/"+t}function bM(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uH(s,e){return e}class Ur{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||uH}}let nA=null;function dH(s){return!RS(s)||s.length<2?s:bM(s)}function CM(){if(nA)return nA;const s=[];s.push(new Ur("bucket")),s.push(new Ur("generation")),s.push(new Ur("metageneration")),s.push(new Ur("name","fullPath",!0));function e(i,a){return dH(a)}const t=new Ur("name");t.xform=e,s.push(t);function n(i,a){return a!==void 0?Number(a):a}const r=new Ur("size");return r.xform=n,s.push(r),s.push(new Ur("timeCreated")),s.push(new Ur("updated")),s.push(new Ur("md5Hash",null,!0)),s.push(new Ur("cacheControl",null,!0)),s.push(new Ur("contentDisposition",null,!0)),s.push(new Ur("contentEncoding",null,!0)),s.push(new Ur("contentLanguage",null,!0)),s.push(new Ur("contentType",null,!0)),s.push(new Ur("metadata","customMetadata",!0)),nA=s,nA}function hH(s,e){function t(){const n=s.bucket,r=s.fullPath,i=new Xs(n,r);return e._makeStorageReference(i)}Object.defineProperty(s,"ref",{get:t})}function pH(s,e,t){const n={};n.type="file";const r=t.length;for(let i=0;i<r;i++){const a=t[i];n[a.local]=a.xform(n,e[a.server])}return hH(n,s),n}function FM(s,e,t){const n=EM(e);return n===null?null:pH(s,n,t)}function fH(s,e,t,n){const r=EM(e);if(r===null||!RS(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(h=>{const f=s.bucket,g=s.fullPath,w="/b/"+a(f)+"/o/"+a(g),v=Nx(w,t,n),F=vM({alt:"media",token:h});return v+F})[0]}function mH(s,e){const t={},n=e.length;for(let r=0;r<n;r++){const i=e[r];i.writable&&(t[i.server]=s[i.local])}return JSON.stringify(t)}class NS{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(s){if(!s)throw PS()}function gH(s,e){function t(n,r){const i=FM(s,r,e);return SM(i!==null),i}return t}function yH(s,e){function t(n,r){const i=FM(s,r,e);return SM(i!==null),fH(i,r,s.host,s._protocol)}return t}function TM(s){function e(t,n){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=Iz():r=kz():t.getStatus()===402?r=Tz(s.bucket):t.getStatus()===403?r=Pz(s.path):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}return e}function kM(s){const e=TM(s);function t(n,r){let i=e(n,r);return n.getStatus()===404&&(i=Sz(s.path)),i.serverResponse=r.serverResponse,i}return t}function wH(s,e,t){const n=e.fullServerUrl(),r=Nx(n,s.host,s._protocol),i="GET",a=s.maxOperationRetryTime,u=new NS(r,i,yH(s,t),a);return u.errorHandler=kM(e),u}function vH(s,e){const t=e.fullServerUrl(),n=Nx(t,s.host,s._protocol),r="DELETE",i=s.maxOperationRetryTime;function a(d,h){}const u=new NS(n,r,a,i);return u.successCodes=[200,204],u.errorHandler=kM(e),u}function AH(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function _H(s,e,t){const n=Object.assign({},t);return n.fullPath=s.path,n.size=e.size(),n.contentType||(n.contentType=AH(null,e)),n}function xH(s,e,t,n,r){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let R="";for(let V=0;V<2;V++)R=R+Math.random().toString().slice(2);return R}const d=u();a["Content-Type"]="multipart/related; boundary="+d;const h=_H(e,n,r),f=mH(h,t),g="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+d+"--",v=Ec.getBlob(g,n,w);if(v===null)throw Oz();const F={name:h.fullPath},C=Nx(i,s.host,s._protocol),S="POST",I=s.maxUploadRetryTime,O=new NS(C,S,gH(s,t),I);return O.urlParams=F,O.headers=a,O.body=v.uploadData(),O.errorHandler=TM(e),O}class EH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw ig("cannot .send() more than once");if(Vu(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ig("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ig("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ig("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ig("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class bH extends EH{initXhr(){this.xhr_.responseType="text"}}function MS(){return new bH}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t){this._service=e,t instanceof Xs?this._location=t:this._location=Xs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Wh(e,t)}get root(){const e=new Xs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bM(this._location.path)}get storage(){return this._service}get parent(){const e=lH(this._location.path);if(e===null)return null;const t=new Xs(this._location.bucket,e);return new Wh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Uz(e)}}function CH(s,e,t){s._throwIfRoot("uploadBytes");const n=xH(s.storage,s._location,CM(),new Ec(e,!0),t);return s.storage.makeRequestWithTokens(n,MS).then(r=>({metadata:r,ref:s}))}function FH(s){s._throwIfRoot("getDownloadURL");const e=wH(s.storage,s._location,CM());return s.storage.makeRequestWithTokens(e,MS).then(t=>{if(t===null)throw Bz();return t})}function SH(s){s._throwIfRoot("deleteObject");const e=vH(s.storage,s._location);return s.storage.makeRequestWithTokens(e,MS)}function TH(s,e){const t=cH(s._location.path,e),n=new Xs(s._location.bucket,t);return new Wh(s.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kH(s){return/^[A-Za-z]+:\/\//.test(s)}function IH(s,e){return new Wh(s,e)}function IM(s,e){if(s instanceof LS){const t=s;if(t._bucket==null)throw Lz();const n=new Wh(t,t._bucket);return e!=null?IM(n,e):n}else return e!==void 0?TH(s,e):s}function PH(s,e){if(e&&kH(e)){if(s instanceof LS)return IH(s,e);throw Gb("To use ref(service, url), the first argument must be a Storage instance.")}else return IM(s,e)}function dR(s,e){const t=e==null?void 0:e[yM];return t==null?null:Xs.makeFromBucketSpec(t,s)}function RH(s,e,t,n={}){s.host=`${e}:${t}`;const r=Vu(e);r&&(DF(`https://${s.host}/b`),NF("Storage",!0)),s._isUsingEmulator=!0,s._protocol=r?"https":"http";const{mockUserToken:i}=n;i&&(s._overrideAuthToken=typeof i=="string"?i:YD(i,s.app.options.projectId))}class LS{constructor(e,t,n,r,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=gM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Cz,this._maxUploadRetryTime=Fz,this._requests=new Set,r!=null?this._bucket=Xs.makeFromBucketSpec(r,this._host):this._bucket=dR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xs.makeFromBucketSpec(this._url,e):this._bucket=dR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wh(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new jz(wM());{const a=Jz(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const hR="@firebase/storage",pR="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM="storage";function Gh(s,e,t){return s=wn(s),CH(s,e,t)}function qh(s){return s=wn(s),FH(s)}function qb(s){return s=wn(s),SH(s)}function po(s,e){return s=wn(s),PH(s,e)}function DH(s=OF(),e){s=wn(s);const n=dx(s,PM).getImmediate({identifier:e}),r=QD("storage");return r&&NH(n,...r),n}function NH(s,e,t,n={}){RH(s,e,t,n)}function MH(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),n=s.getProvider("auth-internal"),r=s.getProvider("app-check-internal");return new LS(t,n,r,e,Jh)}function LH(){Vh(new Fu(PM,MH,"PUBLIC").setMultipleInstances(!0)),ro(hR,pR,""),ro(hR,pR,"esm2020")}LH();const OH={apiKey:"AIzaSyD_jwiALUoQcZIOkfhgvJ1MTUsD4mQD8cU",authDomain:`studomate1.firebaseapp.com
`,projectId:"studomate1",storageBucket:"studomate1.firebasestorage.app",messagingSenderId:"819063499606",appId:"1:819063499606:web:79b8457a7333050e0404f7"},OS=e3(OH),BS=Gj(OS),nn=sz(OS),fo=DH(OS),fR=s=>{let e;const t=new Set,n=(h,f)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const w=e;e=f??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(v=>v(e,w))}},r=()=>e,u={setState:n,getState:r,getInitialState:()=>d,subscribe:h=>(t.add(h),()=>t.delete(h))},d=e=s(n,r,u);return u},BH=(s=>s?fR(s):fR),VH=s=>s;function UH(s,e=VH){const t=Gv.useSyncExternalStore(s.subscribe,Gv.useCallback(()=>e(s.getState()),[s,e]),Gv.useCallback(()=>e(s.getInitialState()),[s,e]));return Gv.useDebugValue(t),t}const mR=s=>{const e=BH(s),t=n=>UH(e,n);return Object.assign(t,e),t},jH=(s=>s?mR(s):mR),C0=jH(s=>({user:null,adminProfile:null,loading:!0,setUser:e=>s({user:e}),setAdminProfile:e=>s({adminProfile:e}),setLoading:e=>s({loading:e}),checkUserRole:async e=>{try{const t=await Ez(la(nn,"admins",e));t.exists()?s({adminProfile:t.data()}):s({adminProfile:null})}catch(t){console.error("Error fetching admin profile:",t),t.code==="permission-denied"&&console.error('Check your Firestore Security Rules. You might not have permission to read the "admins" collection.'),s({adminProfile:null})}}})),$H=()=>{const s=ox(),{setUser:e,setAdminProfile:t}=C0(),n=async()=>{try{await BS.signOut(),e(null),t(null),s("/login")}catch(i){console.error("Error signing out:",i)}},r=[{path:"/dashboard",label:"Dashboard",icon:P6},{path:"/universities",label:"Manage Universities",icon:_b},{path:"/modules",label:"Modules",icon:c6},{path:"/exams",label:"Exams",icon:Hm},{path:"/tests",label:"Tests",icon:b6},{path:"/supplementary-exams",label:"Supp. Exams",icon:x6},{path:"/users",label:"Manage Users",icon:RI},{path:"/analytics",label:"Analytics",icon:UD},{path:"/announcements",label:"Announcements",icon:$D}];return _.jsxs("div",{"trae-inspector-start-line":"47","trae-inspector-start-column":"4","trae-inspector-end-line":"92","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-screen w-64 bg-gradient-to-b from-blue-600 to-blue-800 text-white flex flex-col fixed left-0 top-0 z-10",children:[_.jsxs("div",{"trae-inspector-start-line":"48","trae-inspector-start-column":"6","trae-inspector-end-line":"53","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-6 flex items-center space-x-3",children:[_.jsx("div",{"trae-inspector-start-line":"49","trae-inspector-start-column":"8","trae-inspector-end-line":"51","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white/10 p-2 rounded-lg",children:_.jsx(_b,{className:"h-8 w-8 text-white"})}),_.jsx("span",{"trae-inspector-start-line":"52","trae-inspector-start-column":"8","trae-inspector-end-line":"52","trae-inspector-end-column":"62","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22StudentMATE%22%2C%22textStartLine%22%3A%2252%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%2252%22%2C%22textEndColumn%22%3A%2255%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xl font-bold",children:"StudentMATE"})]}),_.jsx("nav",{"trae-inspector-start-line":"55","trae-inspector-start-column":"6","trae-inspector-end-line":"72","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:r.map(i=>_.jsxs(OD,{to:i.path,className:({isActive:a})=>`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${a?"bg-white/20 text-white":"text-blue-100 hover:bg-white/10 hover:text-white"}`,children:[_.jsx(i.icon,{className:"h-5 w-5"}),_.jsx("span",{"trae-inspector-start-line":"69","trae-inspector-start-column":"12","trae-inspector-end-line":"69","trae-inspector-end-column":"61","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium",children:i.label})]},i.path))}),_.jsxs("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"6","trae-inspector-end-line":"91","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-t border-blue-500",children:[_.jsxs("div",{"trae-inspector-start-line":"75","trae-inspector-start-column":"8","trae-inspector-end-line":"83","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-900/50 rounded-lg p-4 mb-4 flex items-center space-x-3",children:[_.jsx("div",{"trae-inspector-start-line":"76","trae-inspector-start-column":"10","trae-inspector-end-line":"78","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center",children:_.jsx(RI,{className:"h-6 w-6 text-white"})}),_.jsxs("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"10","trae-inspector-end-line":"82","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("p",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"80","trae-inspector-end-column":"56","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Admin%22%2C%22textStartLine%22%3A%2280%22%2C%22textStartColumn%22%3A%2247%22%2C%22textEndLine%22%3A%2280%22%2C%22textEndColumn%22%3A%2252%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium",children:"Admin"}),_.jsx("p",{"trae-inspector-start-line":"81","trae-inspector-start-column":"12","trae-inspector-end-line":"81","trae-inspector-end-column":"64","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Super%20Admin%22%2C%22textStartLine%22%3A%2281%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%2281%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-blue-200",children:"Super Admin"})]})]}),_.jsxs("button",{"trae-inspector-start-line":"84","trae-inspector-start-column":"8","trae-inspector-end-line":"90","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:n,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-red-500/80 hover:bg-red-600 rounded-lg transition-colors text-sm",children:[_.jsx(O6,{className:"h-4 w-4"}),_.jsx("span",{"trae-inspector-start-line":"89","trae-inspector-start-column":"10","trae-inspector-end-line":"89","trae-inspector-end-column":"29","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logout%22%2C%22textStartLine%22%3A%2289%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2289%22%2C%22textEndColumn%22%3A%2222%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Logout"})]})]})]})},zH=()=>{const{user:s}=C0();return _.jsxs("header",{"trae-inspector-start-line":"9","trae-inspector-start-column":"4","trae-inspector-end-line":"42","trae-inspector-end-column":"13","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white h-16 border-b border-gray-200 flex items-center justify-between px-6 sticky top-0 z-10",children:[_.jsx("div",{"trae-inspector-start-line":"10","trae-inspector-start-column":"6","trae-inspector-end-line":"21","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center flex-1",children:_.jsxs("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"8","trae-inspector-end-line":"20","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative w-96",children:[_.jsx("div",{"trae-inspector-start-line":"12","trae-inspector-start-column":"10","trae-inspector-end-line":"14","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx(cx,{className:"h-5 w-5 text-gray-400"})}),_.jsx("input",{"trae-inspector-start-line":"15","trae-inspector-start-column":"10","trae-inspector-end-line":"19","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-full leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition duration-150 ease-in-out",placeholder:"Search..."})]})}),_.jsxs("div",{"trae-inspector-start-line":"23","trae-inspector-start-column":"6","trae-inspector-end-line":"41","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4",children:[_.jsxs("button",{"trae-inspector-start-line":"24","trae-inspector-start-column":"8","trae-inspector-end-line":"27","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[_.jsx(o6,{className:"h-6 w-6"}),_.jsx("span",{"trae-inspector-start-line":"26","trae-inspector-start-column":"10","trae-inspector-end-line":"26","trae-inspector-end-column":"114","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"})]}),_.jsxs("div",{"trae-inspector-start-line":"29","trae-inspector-start-column":"8","trae-inspector-end-line":"40","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-3 pl-4 border-l border-gray-200",children:[_.jsx("span",{"trae-inspector-start-line":"30","trae-inspector-start-column":"10","trae-inspector-end-line":"32","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-700",children:(s==null?void 0:s.email)||"Admin"}),_.jsx("div",{"trae-inspector-start-line":"33","trae-inspector-start-column":"10","trae-inspector-end-line":"39","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:s!=null&&s.photoURL?_.jsx("img",{"trae-inspector-start-line":"35","trae-inspector-start-column":"14","trae-inspector-end-line":"35","trae-inspector-end-column":"94","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:s.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):_.jsx(zD,{className:"h-5 w-5 text-gray-500"})})]})]})]})},Sa=({children:s})=>_.jsxs("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"4","trae-inspector-end-line":"19","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen bg-gray-50 flex",children:[_.jsx($H,{}),_.jsxs("div",{"trae-inspector-start-line":"13","trae-inspector-start-column":"6","trae-inspector-end-line":"18","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 ml-64 flex flex-col",children:[_.jsx(zH,{}),_.jsx("main",{"trae-inspector-start-line":"15","trae-inspector-start-column":"8","trae-inspector-end-line":"17","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 p-6 overflow-auto",children:s})]})]}),Ta=({children:s})=>{const{user:e,loading:t,setUser:n,setLoading:r,checkUserRole:i}=C0();return K.useEffect(()=>{const a=MU(BS,async u=>{n(u),u&&await i(u.uid),r(!1)});return()=>a()},[n,r,i]),t?_.jsx("div",{"trae-inspector-start-line":"24","trae-inspector-start-column":"6","trae-inspector-end-line":"26","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/ProtectedRoute.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen flex items-center justify-center bg-gray-50",children:_.jsx("div",{"trae-inspector-start-line":"25","trae-inspector-start-column":"8","trae-inspector-end-line":"25","trae-inspector-end-column":"105","trae-inspector-file-path":"src/components/ProtectedRoute.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?_.jsx(_.Fragment,{children:s}):_.jsx(vb,{to:"/login",replace:!0})},HH=()=>{const[s,e]=K.useState(""),[t,n]=K.useState(""),[r,i]=K.useState(""),[a,u]=K.useState(!1),d=ox(),{checkUserRole:h}=C0(),f=async g=>{g.preventDefault(),i(""),u(!0);try{const w=await RU(BS,s,t);await h(w.user.uid),d("/dashboard")}catch(w){i("Failed to login. Please check your credentials."),console.error(w)}finally{u(!1)}};return _.jsxs("div",{"trae-inspector-start-line":"34","trae-inspector-start-column":"4","trae-inspector-end-line":"114","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[_.jsxs("div",{"trae-inspector-start-line":"35","trae-inspector-start-column":"6","trae-inspector-end-line":"47","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"sm:mx-auto sm:w-full sm:max-w-md",children:[_.jsx("div",{"trae-inspector-start-line":"36","trae-inspector-start-column":"8","trae-inspector-end-line":"40","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-center",children:_.jsx("div",{"trae-inspector-start-line":"37","trae-inspector-start-column":"10","trae-inspector-end-line":"39","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-600 p-2 rounded-full",children:_.jsx(S6,{className:"h-10 w-10 text-white"})})}),_.jsx("h2",{"trae-inspector-start-line":"41","trae-inspector-start-column":"8","trae-inspector-end-line":"43","trae-inspector-end-column":"13","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22StudentMATE%20Admin%22%2C%22textStartLine%22%3A%2241%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%2243%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"StudentMATE Admin"}),_.jsx("p",{"trae-inspector-start-line":"44","trae-inspector-start-column":"8","trae-inspector-end-line":"46","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Sign%20in%20to%20access%20the%20control%20panel%22%2C%22textStartLine%22%3A%2244%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%2246%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access the control panel"})]}),_.jsx("div",{"trae-inspector-start-line":"49","trae-inspector-start-column":"6","trae-inspector-end-line":"113","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:_.jsx("div",{"trae-inspector-start-line":"50","trae-inspector-start-column":"8","trae-inspector-end-line":"112","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:_.jsxs("form",{"trae-inspector-start-line":"51","trae-inspector-start-column":"10","trae-inspector-end-line":"111","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",onSubmit:f,children:[_.jsxs("div",{"trae-inspector-start-line":"52","trae-inspector-start-column":"12","trae-inspector-end-line":"72","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"53","trae-inspector-start-column":"14","trae-inspector-end-line":"55","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Email%20address%22%2C%22textStartLine%22%3A%2253%22%2C%22textStartColumn%22%3A%2289%22%2C%22textEndLine%22%3A%2255%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),_.jsxs("div",{"trae-inspector-start-line":"56","trae-inspector-start-column":"14","trae-inspector-end-line":"71","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 relative rounded-md shadow-sm",children:[_.jsx("div",{"trae-inspector-start-line":"57","trae-inspector-start-column":"16","trae-inspector-end-line":"59","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx(jD,{className:"h-5 w-5 text-gray-400"})}),_.jsx("input",{"trae-inspector-start-line":"60","trae-inspector-start-column":"16","trae-inspector-end-line":"70","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:g=>e(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:"admin@studentmate.com"})]})]}),_.jsxs("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"12","trae-inspector-end-line":"94","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"75","trae-inspector-start-column":"14","trae-inspector-end-line":"77","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Password%22%2C%22textStartLine%22%3A%2275%22%2C%22textStartColumn%22%3A%2292%22%2C%22textEndLine%22%3A%2277%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),_.jsxs("div",{"trae-inspector-start-line":"78","trae-inspector-start-column":"14","trae-inspector-end-line":"93","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 relative rounded-md shadow-sm",children:[_.jsx("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"16","trae-inspector-end-line":"81","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx(M6,{className:"h-5 w-5 text-gray-400"})}),_.jsx("input",{"trae-inspector-start-line":"82","trae-inspector-start-column":"16","trae-inspector-end-line":"92","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:g=>n(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:""})]})]}),r&&_.jsx("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"14","trae-inspector-end-line":"99","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-red-600 text-sm text-center",children:r}),_.jsx("div",{"trae-inspector-start-line":"102","trae-inspector-start-column":"12","trae-inspector-end-line":"110","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsx("button",{"trae-inspector-start-line":"103","trae-inspector-start-column":"14","trae-inspector-end-line":"109","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:a,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${a?"opacity-75 cursor-not-allowed":""}`,children:a?"Signing in...":"Sign in"})})]})})})]})},Ul="assessments",WH=async(s,e,t)=>{const n=sa(fs(nn,Ul),Cu("universityId","==",s),Cu("moduleId","==",e),Cu("type","==",t),Du("year","desc"));return(await rp(n)).docs.map(i=>({assessmentId:i.id,...i.data()}))},GH=async(s=5)=>{const e=sa(fs(nn,Ul),Du("createdAt","desc"),fM(s));return(await rp(e)).docs.map(n=>({assessmentId:n.id,...n.data()}))},qH=async()=>{const s=fs(nn,Ul),e=await VE(sa(s,Cu("type","==","exam"))),t=await VE(sa(s,Cu("type","==","test"))),n=await VE(sa(s,Cu("type","==","supplementary")));return{exams:e.data().count,tests:t.data().count,supps:n.data().count}},QH=async(s,e,t,n,r,i,a)=>{let u="";if(a){const h=po(fo,`assessments/${s}/${e}/${t}/${Date.now()}_${a.name}`);await Gh(h,a),u=await qh(h)}return(await b0(fs(nn,Ul),{universityId:s,moduleId:e,type:t,title:n,year:r,pdfUrl:u||null,createdBy:i,createdAt:x0()})).id},KH=async s=>{if(s.pdfUrl)try{const e=po(fo,s.pdfUrl);await qb(e)}catch(e){console.error("Error deleting file from storage:",e)}await E0(la(nn,Ul,s.assessmentId))},gR=async(s,e,t,n,r)=>{const i={...t};if(n){const a=po(fo,`questions/${s}/${Date.now()}_content_${n.name}`);await Gh(a,n),i.contentUrl=await qh(a)}if(r){const a=po(fo,`questions/${s}/${Date.now()}_answer_${r.name}`);await Gh(a,r),i.answerUrl=await qh(a)}await Dx(la(nn,Ul,s,"questions",e),i)},XH=async s=>{const e=sa(fs(nn,Ul,s,"questions"),Du("order","asc"));return(await rp(e)).docs.map(n=>({questionId:n.id,...n.data()}))},yR=async(s,e,t,n,r,i,a,u,d,h,f)=>{let g="";if(r){const v=po(fo,`questions/${s}/${Date.now()}_content_${r.name}`);await Gh(v,r),g=await qh(v)}let w="";if(a){const v=po(fo,`questions/${s}/${Date.now()}_answer_${a.name}`);await Gh(v,a),w=await qh(v)}await b0(fs(nn,Ul,s,"questions"),{title:e,marks:t,order:n,contentUrl:g||null,content:i||null,answerUrl:w||null,answerText:null,videoUrl:d||null,page:h||null,coordinates:f||null,createdAt:x0()})},YH=async(s,e)=>{if(e.contentUrl)try{const t=po(fo,e.contentUrl);await qb(t)}catch(t){console.error("Error deleting content image",t)}if(e.answerUrl)try{const t=po(fo,e.answerUrl);await qb(t)}catch(t){console.error("Error deleting answer image",t)}await E0(la(nn,Ul,s,"questions",e.questionId))},Mx="universities",l2=async()=>{const s=sa(fs(nn,Mx),Du("name"));return(await rp(s)).docs.map(t=>({universityId:t.id,...t.data()}))},JH=async(s,e,t)=>{let n="";if(t){const i=po(fo,`university-logos/${Date.now()}_${t.name}`);await Gh(i,t),n=await qh(i)}return(await b0(fs(nn,Mx),{name:s,code:e,logoUrl:n,createdAt:x0()})).id},ZH=async(s,e,t)=>{let n={...e};if(t){const r=po(fo,`university-logos/${Date.now()}_${t.name}`);await Gh(r,t),n.logoUrl=await qh(r)}await Dx(la(nn,Mx,s),n)},eW=async s=>{await E0(la(nn,Mx,s))},rA=43200,wR=1440,vR=Symbol.for("constructDateFrom");function VS(s,e){return typeof s=="function"?s(e):s&&typeof s=="object"&&vR in s?s[vR](e):s instanceof Date?new s.constructor(e):new Date(e)}function Nu(s,e){return VS(s,s)}let tW={};function nW(){return tW}function AR(s){const e=Nu(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function US(s,...e){const t=VS.bind(null,s||e.find(n=>typeof n=="object"));return e.map(t)}function CA(s,e){const t=+Nu(s)-+Nu(e);return t<0?-1:t>0?1:t}function rW(s){return VS(s,Date.now())}function sW(s,e,t){const[n,r]=US(t==null?void 0:t.in,s,e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function iW(s){return e=>{const n=(s?Math[s]:Math.trunc)(e);return n===0?0:n}}function aW(s,e){return+Nu(s)-+Nu(e)}function oW(s,e){const t=Nu(s);return t.setHours(23,59,59,999),t}function lW(s,e){const t=Nu(s),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function cW(s,e){const t=Nu(s);return+oW(t)==+lW(t)}function uW(s,e,t){const[n,r,i]=US(t==null?void 0:t.in,s,s,e),a=CA(r,i),u=Math.abs(sW(r,i));if(u<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*u);let d=CA(r,i)===-a;cW(n)&&u===1&&CA(n,i)===1&&(d=!1);const h=a*(u-+d);return h===0?0:h}function dW(s,e,t){const n=aW(s,e)/1e3;return iW(t==null?void 0:t.roundingMethod)(n)}const hW={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pW=(s,e,t)=>{let n;const r=hW[s];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function $E(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const fW={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mW={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gW={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yW={date:$E({formats:fW,defaultWidth:"full"}),time:$E({formats:mW,defaultWidth:"full"}),dateTime:$E({formats:gW,defaultWidth:"full"})},wW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vW=(s,e,t,n)=>wW[s];function ag(s){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let r;if(n==="formatting"&&s.formattingValues){const a=s.defaultFormattingWidth||s.defaultWidth,u=t!=null&&t.width?String(t.width):a;r=s.formattingValues[u]||s.formattingValues[a]}else{const a=s.defaultWidth,u=t!=null&&t.width?String(t.width):s.defaultWidth;r=s.values[u]||s.values[a]}const i=s.argumentCallback?s.argumentCallback(e):e;return r[i]}}const AW={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_W={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xW={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},EW={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},CW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},FW=(s,e)=>{const t=Number(s),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},SW={ordinalNumber:FW,era:ag({values:AW,defaultWidth:"wide"}),quarter:ag({values:_W,defaultWidth:"wide",argumentCallback:s=>s-1}),month:ag({values:xW,defaultWidth:"wide"}),day:ag({values:EW,defaultWidth:"wide"}),dayPeriod:ag({values:bW,defaultWidth:"wide",formattingValues:CW,defaultFormattingWidth:"wide"})};function og(s){return(e,t={})=>{const n=t.width,r=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],i=e.match(r);if(!i)return null;const a=i[0],u=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],d=Array.isArray(u)?kW(u,g=>g.test(a)):TW(u,g=>g.test(a));let h;h=s.valueCallback?s.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(a.length);return{value:h,rest:f}}}function TW(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function kW(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function IW(s){return(e,t={})=>{const n=e.match(s.matchPattern);if(!n)return null;const r=n[0],i=e.match(s.parsePattern);if(!i)return null;let a=s.valueCallback?s.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const u=e.slice(r.length);return{value:a,rest:u}}}const PW=/^(\d+)(th|st|nd|rd)?/i,RW=/\d+/i,DW={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},NW={any:[/^b/i,/^(a|c)/i]},MW={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},LW={any:[/1/i,/2/i,/3/i,/4/i]},OW={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},BW={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},VW={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},UW={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jW={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$W={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zW={ordinalNumber:IW({matchPattern:PW,parsePattern:RW,valueCallback:s=>parseInt(s,10)}),era:og({matchPatterns:DW,defaultMatchWidth:"wide",parsePatterns:NW,defaultParseWidth:"any"}),quarter:og({matchPatterns:MW,defaultMatchWidth:"wide",parsePatterns:LW,defaultParseWidth:"any",valueCallback:s=>s+1}),month:og({matchPatterns:OW,defaultMatchWidth:"wide",parsePatterns:BW,defaultParseWidth:"any"}),day:og({matchPatterns:VW,defaultMatchWidth:"wide",parsePatterns:UW,defaultParseWidth:"any"}),dayPeriod:og({matchPatterns:jW,defaultMatchWidth:"any",parsePatterns:$W,defaultParseWidth:"any"})},HW={code:"en-US",formatDistance:pW,formatLong:yW,formatRelative:vW,localize:SW,match:zW,options:{weekStartsOn:0,firstWeekContainsDate:1}};function WW(s,e,t){const n=nW(),r=(t==null?void 0:t.locale)??n.locale??HW,i=2520,a=CA(s,e);if(isNaN(a))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:a}),[d,h]=US(t==null?void 0:t.in,...a>0?[e,s]:[s,e]),f=dW(h,d),g=(AR(h)-AR(d))/1e3,w=Math.round((f-g)/60);let v;if(w<2)return t!=null&&t.includeSeconds?f<5?r.formatDistance("lessThanXSeconds",5,u):f<10?r.formatDistance("lessThanXSeconds",10,u):f<20?r.formatDistance("lessThanXSeconds",20,u):f<40?r.formatDistance("halfAMinute",0,u):f<60?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",1,u):w===0?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",w,u);if(w<45)return r.formatDistance("xMinutes",w,u);if(w<90)return r.formatDistance("aboutXHours",1,u);if(w<wR){const F=Math.round(w/60);return r.formatDistance("aboutXHours",F,u)}else{if(w<i)return r.formatDistance("xDays",1,u);if(w<rA){const F=Math.round(w/wR);return r.formatDistance("xDays",F,u)}else if(w<rA*2)return v=Math.round(w/rA),r.formatDistance("aboutXMonths",v,u)}if(v=uW(h,d),v<12){const F=Math.round(w/rA);return r.formatDistance("xMonths",F,u)}else{const F=v%12,C=Math.trunc(v/12);return F<3?r.formatDistance("aboutXYears",C,u):F<9?r.formatDistance("overXYears",C,u):r.formatDistance("almostXYears",C+1,u)}}function GW(s,e){return WW(s,rW(s),e)}const zE=({title:s,value:e,icon:t,color:n})=>_.jsxs("div",{"trae-inspector-start-line":"16","trae-inspector-start-column":"2","trae-inspector-end-line":"24","trae-inspector-end-column":"8","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-6 flex items-center space-x-4",children:[_.jsx("div",{"trae-inspector-start-line":"17","trae-inspector-start-column":"4","trae-inspector-end-line":"19","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`p-4 rounded-lg ${n}`,children:_.jsx(t,{className:"h-6 w-6 text-white"})}),_.jsxs("div",{"trae-inspector-start-line":"20","trae-inspector-start-column":"4","trae-inspector-end-line":"23","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("h3",{"trae-inspector-start-line":"21","trae-inspector-start-column":"6","trae-inspector-end-line":"21","trae-inspector-end-column":"67","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:e}),_.jsx("p",{"trae-inspector-start-line":"22","trae-inspector-start-column":"6","trae-inspector-end-line":"22","trae-inspector-end-column":"54","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500",children:s})]})]}),qW=()=>{const[s,e]=K.useState([]),[t,n]=K.useState({exams:0,tests:0,supps:0}),[r,i]=K.useState([]),[a,u]=K.useState(!0);return K.useEffect(()=>{(async()=>{try{const[h,f,g]=await Promise.all([GH(),qH(),l2()]);e(h),n(f),i(g)}catch(h){console.error("Error loading dashboard data:",h)}finally{u(!1)}})()},[]),_.jsxs("div",{"trae-inspector-start-line":"54","trae-inspector-start-column":"4","trae-inspector-end-line":"161","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[_.jsxs("div",{"trae-inspector-start-line":"55","trae-inspector-start-column":"6","trae-inspector-end-line":"70","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center",children:[_.jsx("h1",{"trae-inspector-start-line":"56","trae-inspector-start-column":"8","trae-inspector-end-line":"56","trae-inspector-end-column":"77","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Admin%20Dashboard%22%2C%22textStartLine%22%3A%2256%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2256%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),_.jsxs("div",{"trae-inspector-start-line":"57","trae-inspector-start-column":"8","trae-inspector-end-line":"69","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-2 bg-white rounded-lg p-1 shadow-sm overflow-x-auto max-w-md",children:[r.slice(0,5).map(d=>_.jsx("button",{"trae-inspector-start-line":"59","trae-inspector-start-column":"12","trae-inspector-end-line":"64","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-4 py-1.5 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 whitespace-nowrap",children:d.code},d.universityId)),_.jsxs(l_,{to:"/universities",className:"px-4 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-md whitespace-nowrap flex items-center",children:["View All ",_.jsx(r6,{className:"ml-1 h-3 w-3"})]})]})]}),_.jsxs("div",{"trae-inspector-start-line":"73","trae-inspector-start-column":"6","trae-inspector-end-line":"92","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_.jsx(zE,{title:"Total Exams",value:t.exams,icon:d6,color:"bg-blue-500"}),_.jsx(zE,{title:"Total Tests",value:t.tests,icon:Hm,color:"bg-orange-500"}),_.jsx(zE,{title:"Supp. Exams",value:t.supps,icon:A6,color:"bg-green-500"})]}),_.jsx("div",{"trae-inspector-start-line":"94","trae-inspector-start-column":"6","trae-inspector-end-line":"160","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:_.jsxs("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"8","trae-inspector-end-line":"159","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"lg:col-span-3 bg-white rounded-xl shadow-sm overflow-hidden",children:[_.jsxs("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"10","trae-inspector-end-line":"102","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[_.jsx("h2",{"trae-inspector-start-line":"98","trae-inspector-start-column":"12","trae-inspector-end-line":"98","trae-inspector-end-column":"71","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Recent%20Uploads%22%2C%22textStartLine%22%3A%2298%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%2298%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-bold text-gray-900",children:"Recent Uploads"}),_.jsx(l_,{to:"/exams",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:"+ Manage Assessments"})]}),_.jsx("div",{"trae-inspector-start-line":"103","trae-inspector-start-column":"10","trae-inspector-end-line":"158","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:_.jsxs("table",{"trae-inspector-start-line":"104","trae-inspector-start-column":"12","trae-inspector-end-line":"157","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[_.jsx("thead",{"trae-inspector-start-line":"105","trae-inspector-start-column":"14","trae-inspector-end-line":"113","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:_.jsxs("tr",{"trae-inspector-start-line":"106","trae-inspector-start-column":"16","trae-inspector-end-line":"112","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("th",{"trae-inspector-start-line":"107","trae-inspector-start-column":"18","trae-inspector-end-line":"107","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Type%22%2C%22textStartLine%22%3A%22107%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Type"}),_.jsx("th",{"trae-inspector-start-line":"108","trae-inspector-start-column":"18","trae-inspector-end-line":"108","trae-inspector-end-column":"54","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22108%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22108%22%2C%22textEndColumn%22%3A%2249%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Title"}),_.jsx("th",{"trae-inspector-start-line":"109","trae-inspector-start-column":"18","trae-inspector-end-line":"109","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22109%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22109%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Year"}),_.jsx("th",{"trae-inspector-start-line":"110","trae-inspector-start-column":"18","trae-inspector-end-line":"110","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Date%22%2C%22textStartLine%22%3A%22110%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22110%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Date"}),_.jsx("th",{"trae-inspector-start-line":"111","trae-inspector-start-column":"18","trae-inspector-end-line":"111","trae-inspector-end-column":"59","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Created%20By%22%2C%22textStartLine%22%3A%22111%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22111%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Created By"})]})}),_.jsx("tbody",{"trae-inspector-start-line":"114","trae-inspector-start-column":"14","trae-inspector-end-line":"156","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:a?_.jsx("tr",{"trae-inspector-start-line":"116","trae-inspector-start-column":"18","trae-inspector-end-line":"118","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsx("td",{"trae-inspector-start-line":"117","trae-inspector-start-column":"20","trae-inspector-end-line":"117","trae-inspector-end-column":"99","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22117%22%2C%22textStartColumn%22%3A%2284%22%2C%22textEndLine%22%3A%22117%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):s.length===0?_.jsx("tr",{"trae-inspector-start-line":"120","trae-inspector-start-column":"18","trae-inspector-end-line":"125","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsxs("td",{"trae-inspector-start-line":"121","trae-inspector-start-column":"20","trae-inspector-end-line":"124","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500 py-10",children:[_.jsx("p",{"trae-inspector-start-line":"122","trae-inspector-start-column":"22","trae-inspector-end-line":"122","trae-inspector-end-column":"92","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20recent%20uploads%22%2C%22textStartLine%22%3A%22122%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22122%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-medium text-gray-900",children:"No recent uploads"}),_.jsx("p",{"trae-inspector-start-line":"123","trae-inspector-start-column":"22","trae-inspector-end-line":"123","trae-inspector-end-column":"118","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Start%20by%20adding%20universities%2C%20modules%2C%20and%20assessments.%22%2C%22textStartLine%22%3A%22123%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22123%22%2C%22textEndColumn%22%3A%22114%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500",children:"Start by adding universities, modules, and assessments."})]})}):s.map(d=>{var h,f;return _.jsxs("tr",{"trae-inspector-start-line":"128","trae-inspector-start-column":"20","trae-inspector-end-line":"153","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50 transition-colors",children:[_.jsx("td",{"trae-inspector-start-line":"129","trae-inspector-start-column":"22","trae-inspector-end-line":"137","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-gray-900 capitalize",children:_.jsx("span",{"trae-inspector-start-line":"130","trae-inspector-start-column":"24","trae-inspector-end-line":"136","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`px-2 py-1 rounded-full text-xs ${d.type==="exam"?"bg-blue-100 text-blue-800":d.type==="test"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:d.type})}),_.jsx("td",{"trae-inspector-start-line":"138","trae-inspector-start-column":"22","trae-inspector-end-line":"140","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:_.jsx("div",{"trae-inspector-start-line":"139","trae-inspector-start-column":"24","trae-inspector-end-line":"139","trae-inspector-end-column":"91","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-bold text-gray-900",children:d.title})}),_.jsx("td",{"trae-inspector-start-line":"141","trae-inspector-start-column":"22","trae-inspector-end-line":"141","trae-inspector-end-column":"86","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:d.year}),_.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:_.jsx("div",{"trae-inspector-start-line":"143","trae-inspector-start-column":"24","trae-inspector-end-line":"145","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-900",children:(h=d.createdAt)!=null&&h.seconds?new Date(d.createdAt.seconds*1e3).toLocaleDateString():"Just now"})}),_.jsxs("td",{"trae-inspector-start-line":"147","trae-inspector-start-column":"22","trae-inspector-end-line":"152","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500 flex items-center space-x-2",children:[_.jsx("span",{"trae-inspector-start-line":"148","trae-inspector-start-column":"24","trae-inspector-end-line":"148","trae-inspector-end-column":"67","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:d.createdBy.split("@")[0]}),_.jsx("span",{"trae-inspector-start-line":"149","trae-inspector-start-column":"24","trae-inspector-end-line":"151","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-400",children:(f=d.createdAt)!=null&&f.seconds?GW(new Date(d.createdAt.seconds*1e3),{addSuffix:!0}):"now"})]})]},d.assessmentId)})})]})})]})})]})},F0=({isOpen:s,onClose:e,title:t,children:n})=>s?_.jsx("div",{"trae-inspector-start-line":"15","trae-inspector-start-column":"4","trae-inspector-end-line":"40","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-50 overflow-y-auto",children:_.jsxs("div",{"trae-inspector-start-line":"16","trae-inspector-start-column":"6","trae-inspector-end-line":"39","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[_.jsx("div",{"trae-inspector-start-line":"17","trae-inspector-start-column":"8","trae-inspector-end-line":"19","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:_.jsx("div",{"trae-inspector-start-line":"18","trae-inspector-start-column":"10","trae-inspector-end-line":"18","trae-inspector-end-column":"91","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),_.jsx("span",{"trae-inspector-start-line":"21","trae-inspector-start-column":"8","trae-inspector-end-line":"21","trae-inspector-end-column":"110","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%2221%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%2221%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),_.jsx("div",{"trae-inspector-start-line":"23","trae-inspector-start-column":"8","trae-inspector-end-line":"38","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:_.jsxs("div",{"trae-inspector-start-line":"24","trae-inspector-start-column":"10","trae-inspector-end-line":"37","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[_.jsxs("div",{"trae-inspector-start-line":"25","trae-inspector-start-column":"12","trae-inspector-end-line":"35","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-start mb-4",children:[_.jsx("h3",{"trae-inspector-start-line":"26","trae-inspector-start-column":"14","trae-inspector-end-line":"28","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:t}),_.jsx("button",{"trae-inspector-start-line":"29","trae-inspector-start-column":"14","trae-inspector-end-line":"34","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:e,className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none",children:_.jsx(fg,{className:"h-6 w-6"})})]}),n]})})]})}):null,QW=()=>{const[s,e]=K.useState([]),[t,n]=K.useState(!0),[r,i]=K.useState(!1),[a,u]=K.useState(""),[d,h]=K.useState(null),[f,g]=K.useState(""),[w,v]=K.useState(""),[F,C]=K.useState(null),[S,I]=K.useState(!1),O=async()=>{try{const N=await l2();e(N)}catch(N){console.error("Error fetching universities:",N)}finally{n(!1)}};K.useEffect(()=>{O()},[]);const R=N=>{N?(h(N),g(N.name),v(N.code)):(h(null),g(""),v("")),C(null),i(!0)},V=async N=>{N.preventDefault(),I(!0);try{d?await ZH(d.universityId,{name:f,code:w},F):await JH(f,w,F),i(!1),O()}catch(D){console.error("Error saving university:",D)}finally{I(!1)}},z=async N=>{if(window.confirm("Are you sure you want to delete this university?"))try{await eW(N),O()}catch(D){console.error("Error deleting university:",D)}},W=s.filter(N=>N.name.toLowerCase().includes(a.toLowerCase())||N.code.toLowerCase().includes(a.toLowerCase()));return _.jsxs("div",{"trae-inspector-start-line":"85","trae-inspector-start-column":"4","trae-inspector-end-line":"214","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsxs("div",{"trae-inspector-start-line":"86","trae-inspector-start-column":"6","trae-inspector-end-line":"95","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[_.jsx("h1",{"trae-inspector-start-line":"87","trae-inspector-start-column":"8","trae-inspector-end-line":"87","trae-inspector-end-column":"81","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Universities%22%2C%22textStartLine%22%3A%2287%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2287%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Manage Universities"}),_.jsxs("button",{"trae-inspector-start-line":"88","trae-inspector-start-column":"8","trae-inspector-end-line":"94","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>R(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[_.jsx(c0,{className:"h-5 w-5"}),_.jsx("span",{"trae-inspector-start-line":"93","trae-inspector-start-column":"10","trae-inspector-end-line":"93","trae-inspector-end-column":"37","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20University%22%2C%22textStartLine%22%3A%2293%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2293%22%2C%22textEndColumn%22%3A%2230%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add University"})]})]}),_.jsxs("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"6","trae-inspector-end-line":"164","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[_.jsx("div",{"trae-inspector-start-line":"98","trae-inspector-start-column":"8","trae-inspector-end-line":"111","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100",children:_.jsxs("div",{"trae-inspector-start-line":"99","trae-inspector-start-column":"10","trae-inspector-end-line":"110","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative max-w-md",children:[_.jsx("div",{"trae-inspector-start-line":"100","trae-inspector-start-column":"12","trae-inspector-end-line":"102","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx(cx,{className:"h-5 w-5 text-gray-400"})}),_.jsx("input",{"trae-inspector-start-line":"103","trae-inspector-start-column":"12","trae-inspector-end-line":"109","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search universities...",value:a,onChange:N=>u(N.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})}),_.jsx("div",{"trae-inspector-start-line":"113","trae-inspector-start-column":"8","trae-inspector-end-line":"163","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:_.jsxs("table",{"trae-inspector-start-line":"114","trae-inspector-start-column":"10","trae-inspector-end-line":"162","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[_.jsx("thead",{"trae-inspector-start-line":"115","trae-inspector-start-column":"12","trae-inspector-end-line":"122","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:_.jsxs("tr",{"trae-inspector-start-line":"116","trae-inspector-start-column":"14","trae-inspector-end-line":"121","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("th",{"trae-inspector-start-line":"117","trae-inspector-start-column":"16","trae-inspector-end-line":"117","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logo%22%2C%22textStartLine%22%3A%22117%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22117%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Logo"}),_.jsx("th",{"trae-inspector-start-line":"118","trae-inspector-start-column":"16","trae-inspector-end-line":"118","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Name%22%2C%22textStartLine%22%3A%22118%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22118%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Name"}),_.jsx("th",{"trae-inspector-start-line":"119","trae-inspector-start-column":"16","trae-inspector-end-line":"119","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Code%22%2C%22textStartLine%22%3A%22119%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22119%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Code"}),_.jsx("th",{"trae-inspector-start-line":"120","trae-inspector-start-column":"16","trae-inspector-end-line":"120","trae-inspector-end-column":"65","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22120%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22120%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),_.jsx("tbody",{"trae-inspector-start-line":"123","trae-inspector-start-column":"12","trae-inspector-end-line":"161","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:t?_.jsx("tr",{"trae-inspector-start-line":"125","trae-inspector-start-column":"16","trae-inspector-end-line":"127","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsx("td",{"trae-inspector-start-line":"126","trae-inspector-start-column":"18","trae-inspector-end-line":"126","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22126%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22126%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):W.length===0?_.jsx("tr",{"trae-inspector-start-line":"129","trae-inspector-start-column":"16","trae-inspector-end-line":"131","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsx("td",{"trae-inspector-start-line":"130","trae-inspector-start-column":"18","trae-inspector-end-line":"130","trae-inspector-end-column":"108","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20universities%20found%22%2C%22textStartLine%22%3A%22130%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22130%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No universities found"})}):W.map(N=>_.jsxs("tr",{"trae-inspector-start-line":"134","trae-inspector-start-column":"18","trae-inspector-end-line":"158","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[_.jsx("td",{"trae-inspector-start-line":"135","trae-inspector-start-column":"20","trae-inspector-end-line":"141","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:N.logoUrl?_.jsx("img",{"trae-inspector-start-line":"137","trae-inspector-start-column":"24","trae-inspector-end-line":"137","trae-inspector-end-column":"109","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:N.logoUrl,alt:N.name,className:"h-10 w-10 object-contain rounded"}):_.jsx("div",{"trae-inspector-start-line":"139","trae-inspector-start-column":"24","trae-inspector-end-line":"139","trae-inspector-end-column":"139","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20Logo%22%2C%22textStartLine%22%3A%22139%22%2C%22textStartColumn%22%3A%22126%22%2C%22textEndLine%22%3A%22139%22%2C%22textEndColumn%22%3A%22133%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 text-xs",children:"No Logo"})}),_.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"20","trae-inspector-end-line":"142","trae-inspector-end-column":"95","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-gray-900",children:N.name}),_.jsx("td",{"trae-inspector-start-line":"143","trae-inspector-start-column":"20","trae-inspector-end-line":"143","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:N.code}),_.jsxs("td",{"trae-inspector-start-line":"144","trae-inspector-start-column":"20","trae-inspector-end-line":"157","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:[_.jsx("button",{"trae-inspector-start-line":"145","trae-inspector-start-column":"22","trae-inspector-end-line":"150","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>R(N),className:"text-blue-600 hover:text-blue-900",children:_.jsx(RF,{className:"h-5 w-5"})}),_.jsx("button",{"trae-inspector-start-line":"151","trae-inspector-start-column":"22","trae-inspector-end-line":"156","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(N.universityId),className:"text-red-600 hover:text-red-900",children:_.jsx(u0,{className:"h-5 w-5"})})]})]},N.universityId))})]})})]}),_.jsx(F0,{isOpen:r,onClose:()=>i(!1),title:d?"Edit University":"Add University",children:_.jsxs("form",{"trae-inspector-start-line":"171","trae-inspector-start-column":"8","trae-inspector-end-line":"212","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:V,className:"space-y-4",children:[_.jsxs("div",{"trae-inspector-start-line":"172","trae-inspector-start-column":"10","trae-inspector-end-line":"182","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"173","trae-inspector-start-column":"12","trae-inspector-end-line":"173","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%20Name%22%2C%22textStartLine%22%3A%22173%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22173%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"University Name"}),_.jsx("input",{"trae-inspector-start-line":"174","trae-inspector-start-column":"12","trae-inspector-end-line":"181","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:f,onChange:N=>g(N.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"University of Pretoria"})]}),_.jsxs("div",{"trae-inspector-start-line":"183","trae-inspector-start-column":"10","trae-inspector-end-line":"193","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"184","trae-inspector-start-column":"12","trae-inspector-end-line":"184","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%20Code%22%2C%22textStartLine%22%3A%22184%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22184%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"University Code"}),_.jsx("input",{"trae-inspector-start-line":"185","trae-inspector-start-column":"12","trae-inspector-end-line":"192","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:w,onChange:N=>v(N.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"UP"})]}),_.jsxs("div",{"trae-inspector-start-line":"194","trae-inspector-start-column":"10","trae-inspector-end-line":"202","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"195","trae-inspector-start-column":"12","trae-inspector-end-line":"195","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logo%22%2C%22textStartLine%22%3A%22195%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22195%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Logo"}),_.jsx("input",{"trae-inspector-start-line":"196","trae-inspector-start-column":"12","trae-inspector-end-line":"201","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:"image/*",onChange:N=>C(N.target.files?N.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),_.jsx("div",{"trae-inspector-start-line":"203","trae-inspector-start-column":"10","trae-inspector-end-line":"211","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:_.jsx("button",{"trae-inspector-start-line":"204","trae-inspector-start-column":"12","trae-inspector-end-line":"210","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:S,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${S?"opacity-75 cursor-not-allowed":""}`,children:S?"Saving...":"Save"})})]})})]})},Lx="modules",RM=async s=>{const e=sa(fs(nn,Lx),Cu("universityId","==",s),Du("code"));return(await rp(e)).docs.map(n=>({moduleId:n.id,...n.data()}))},KW=async(s,e,t)=>(await b0(fs(nn,Lx),{universityId:s,code:e,name:t,createdAt:x0()})).id,XW=async(s,e)=>{await Dx(la(nn,Lx,s),e)},YW=async s=>{await E0(la(nn,Lx,s))},JW=()=>{const[s,e]=K.useState([]),[t,n]=K.useState(""),[r,i]=K.useState([]),[a,u]=K.useState(!1),[d,h]=K.useState(!1),[f,g]=K.useState(""),[w,v]=K.useState(null),[F,C]=K.useState(""),[S,I]=K.useState(""),[O,R]=K.useState(!1);K.useEffect(()=>{(async()=>{try{const U=await l2();e(U),U.length>0&&n(U[0].universityId)}catch(U){console.error("Error fetching universities:",U)}})()},[]),K.useEffect(()=>{t&&V(t)},[t]);const V=async L=>{u(!0);try{const U=await RM(L);i(U)}catch(U){console.error("Error fetching modules:",U)}finally{u(!1)}},z=L=>{L?(v(L),C(L.code),I(L.name)):(v(null),C(""),I("")),h(!0)},W=async L=>{if(L.preventDefault(),!!t){R(!0);try{w?await XW(w.moduleId,{code:F,name:S}):await KW(t,F,S),h(!1),V(t)}catch(U){console.error("Error saving module:",U)}finally{R(!1)}}},N=async L=>{if(window.confirm("Are you sure you want to delete this module?"))try{await YW(L),V(t)}catch(U){console.error("Error deleting module:",U)}},D=r.filter(L=>L.name.toLowerCase().includes(f.toLowerCase())||L.code.toLowerCase().includes(f.toLowerCase()));return _.jsxs("div",{"trae-inspector-start-line":"105","trae-inspector-start-column":"4","trae-inspector-end-line":"239","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsxs("div",{"trae-inspector-start-line":"106","trae-inspector-start-column":"6","trae-inspector-end-line":"116","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[_.jsx("h1",{"trae-inspector-start-line":"107","trae-inspector-start-column":"8","trae-inspector-end-line":"107","trae-inspector-end-column":"76","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Modules%22%2C%22textStartLine%22%3A%22107%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Manage Modules"}),_.jsxs("button",{"trae-inspector-start-line":"108","trae-inspector-start-column":"8","trae-inspector-end-line":"115","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(),disabled:!t,className:`bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 ${t?"":"opacity-50 cursor-not-allowed"}`,children:[_.jsx(c0,{className:"h-5 w-5"}),_.jsx("span",{"trae-inspector-start-line":"114","trae-inspector-start-column":"10","trae-inspector-end-line":"114","trae-inspector-end-column":"33","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20Module%22%2C%22textStartLine%22%3A%22114%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%22114%22%2C%22textEndColumn%22%3A%2226%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add Module"})]})]}),_.jsx("div",{"trae-inspector-start-line":"118","trae-inspector-start-column":"6","trae-inspector-end-line":"150","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:_.jsxs("div",{"trae-inspector-start-line":"119","trae-inspector-start-column":"8","trae-inspector-end-line":"149","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[_.jsxs("div",{"trae-inspector-start-line":"120","trae-inspector-start-column":"10","trae-inspector-end-line":"133","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[_.jsx("label",{"trae-inspector-start-line":"121","trae-inspector-start-column":"12","trae-inspector-end-line":"121","trae-inspector-end-column":"101","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20University%22%2C%22textStartLine%22%3A%22121%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22121%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select University"}),_.jsx("select",{"trae-inspector-start-line":"122","trae-inspector-start-column":"12","trae-inspector-end-line":"132","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:t,onChange:L=>n(L.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:s.map(L=>_.jsxs("option",{"trae-inspector-start-line":"128","trae-inspector-start-column":"16","trae-inspector-end-line":"130","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:L.universityId,children:[L.name," (",L.code,")"]},L.universityId))})]}),_.jsxs("div",{"trae-inspector-start-line":"134","trae-inspector-start-column":"10","trae-inspector-end-line":"148","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[_.jsx("label",{"trae-inspector-start-line":"135","trae-inspector-start-column":"12","trae-inspector-end-line":"135","trae-inspector-end-column":"98","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Search%20Modules%22%2C%22textStartLine%22%3A%22135%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22135%22%2C%22textEndColumn%22%3A%2290%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Modules"}),_.jsxs("div",{"trae-inspector-start-line":"136","trae-inspector-start-column":"12","trae-inspector-end-line":"147","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative",children:[_.jsx("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"14","trae-inspector-end-line":"139","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx(cx,{className:"h-5 w-5 text-gray-400"})}),_.jsx("input",{"trae-inspector-start-line":"140","trae-inspector-start-column":"14","trae-inspector-end-line":"146","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search by code or name...",value:f,onChange:L=>g(L.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}),_.jsx("div",{"trae-inspector-start-line":"152","trae-inspector-start-column":"6","trae-inspector-end-line":"198","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:_.jsx("div",{"trae-inspector-start-line":"153","trae-inspector-start-column":"8","trae-inspector-end-line":"197","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:_.jsxs("table",{"trae-inspector-start-line":"154","trae-inspector-start-column":"10","trae-inspector-end-line":"196","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[_.jsx("thead",{"trae-inspector-start-line":"155","trae-inspector-start-column":"12","trae-inspector-end-line":"161","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:_.jsxs("tr",{"trae-inspector-start-line":"156","trae-inspector-start-column":"14","trae-inspector-end-line":"160","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("th",{"trae-inspector-start-line":"157","trae-inspector-start-column":"16","trae-inspector-end-line":"157","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Code%22%2C%22textStartLine%22%3A%22157%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22157%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Code"}),_.jsx("th",{"trae-inspector-start-line":"158","trae-inspector-start-column":"16","trae-inspector-end-line":"158","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Name%22%2C%22textStartLine%22%3A%22158%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22158%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Name"}),_.jsx("th",{"trae-inspector-start-line":"159","trae-inspector-start-column":"16","trae-inspector-end-line":"159","trae-inspector-end-column":"65","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22159%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22159%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),_.jsx("tbody",{"trae-inspector-start-line":"162","trae-inspector-start-column":"12","trae-inspector-end-line":"195","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:a?_.jsx("tr",{"trae-inspector-start-line":"164","trae-inspector-start-column":"16","trae-inspector-end-line":"166","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsx("td",{"trae-inspector-start-line":"165","trae-inspector-start-column":"18","trae-inspector-end-line":"165","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22165%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22165%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):D.length===0?_.jsx("tr",{"trae-inspector-start-line":"168","trae-inspector-start-column":"16","trae-inspector-end-line":"172","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsx("td",{"trae-inspector-start-line":"169","trae-inspector-start-column":"18","trae-inspector-end-line":"171","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:t?"No modules found for this university":"Please select a university"})}):D.map(L=>_.jsxs("tr",{"trae-inspector-start-line":"175","trae-inspector-start-column":"18","trae-inspector-end-line":"192","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[_.jsx("td",{"trae-inspector-start-line":"176","trae-inspector-start-column":"20","trae-inspector-end-line":"176","trae-inspector-end-column":"95","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-blue-600",children:L.code}),_.jsx("td",{"trae-inspector-start-line":"177","trae-inspector-start-column":"20","trae-inspector-end-line":"177","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-900",children:L.name}),_.jsxs("td",{"trae-inspector-start-line":"178","trae-inspector-start-column":"20","trae-inspector-end-line":"191","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:[_.jsx("button",{"trae-inspector-start-line":"179","trae-inspector-start-column":"22","trae-inspector-end-line":"184","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(L),className:"text-blue-600 hover:text-blue-900",children:_.jsx(RF,{className:"h-5 w-5"})}),_.jsx("button",{"trae-inspector-start-line":"185","trae-inspector-start-column":"22","trae-inspector-end-line":"190","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>N(L.moduleId),className:"text-red-600 hover:text-red-900",children:_.jsx(u0,{className:"h-5 w-5"})})]})]},L.moduleId))})]})})}),_.jsx(F0,{isOpen:d,onClose:()=>h(!1),title:w?"Edit Module":"Add Module",children:_.jsxs("form",{"trae-inspector-start-line":"205","trae-inspector-start-column":"8","trae-inspector-end-line":"237","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:W,className:"space-y-4",children:[_.jsxs("div",{"trae-inspector-start-line":"206","trae-inspector-start-column":"10","trae-inspector-end-line":"216","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"207","trae-inspector-start-column":"12","trae-inspector-end-line":"207","trae-inspector-end-column":"90","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Module%20Code%22%2C%22textStartLine%22%3A%22207%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22207%22%2C%22textEndColumn%22%3A%2282%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Module Code"}),_.jsx("input",{"trae-inspector-start-line":"208","trae-inspector-start-column":"12","trae-inspector-end-line":"215","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:F,onChange:L=>C(L.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"SMTH011"})]}),_.jsxs("div",{"trae-inspector-start-line":"217","trae-inspector-start-column":"10","trae-inspector-end-line":"227","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"218","trae-inspector-start-column":"12","trae-inspector-end-line":"218","trae-inspector-end-column":"90","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Module%20Name%22%2C%22textStartLine%22%3A%22218%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22218%22%2C%22textEndColumn%22%3A%2282%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Module Name"}),_.jsx("input",{"trae-inspector-start-line":"219","trae-inspector-start-column":"12","trae-inspector-end-line":"226","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:S,onChange:L=>I(L.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Introduction to Calculus"})]}),_.jsx("div",{"trae-inspector-start-line":"228","trae-inspector-start-column":"10","trae-inspector-end-line":"236","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:_.jsx("button",{"trae-inspector-start-line":"229","trae-inspector-start-column":"12","trae-inspector-end-line":"235","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:O,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${O?"opacity-75 cursor-not-allowed":""}`,children:O?"Saving...":"Save"})})]})})]})},Gr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Qb=[.001,0,0,.001,0,0],HE=1.35,Gs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},bc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},oy="pdfjs_internal_editor_",Ze={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},dt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},ZW={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Kb={TRIANGLES:1,LATTICE:2},$n={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},FA={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Rn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Kp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ox={ERRORS:0,WARNINGS:1,INFOS:5},ly={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},lg={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},eG={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Bx=Ox.WARNINGS;function tG(s){Number.isInteger(s)&&(Bx=s)}function nG(){return Bx}function Vx(s){Bx>=Ox.INFOS&&console.info(`Info: ${s}`)}function Ke(s){Bx>=Ox.WARNINGS&&console.warn(`Warning: ${s}`)}function xt(s){throw new Error(s)}function _t(s,e){s||xt(e)}function rG(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function DM(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"){if(t.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(t.tryConvertEncoding)try{s=cG(s)}catch{}}const n=e?URL.parse(s,e):URL.parse(s);return rG(n)?n:null}function NM(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&DM(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Xe(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const sp=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class _R extends sp{constructor(e,t){super(e,"PasswordException"),this.code=t}}class WE extends sp{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Xb extends sp{constructor(e){super(e,"InvalidPDFException")}}class T_ extends sp{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class sG extends sp{constructor(e){super(e,"FormatError")}}class Mu extends sp{constructor(e){super(e,"AbortException")}}function iG(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&xt("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),a=s.subarray(r,i);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function Ux(s){typeof s!="string"&&xt("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function aG(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function oG(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function lG(){try{return new Function(""),!0}catch{return!1}}class qn{static get isLittleEndian(){return Xe(this,"isLittleEndian",oG())}static get isEvalSupported(){return Xe(this,"isEvalSupported",lG())}static get isOffscreenCanvasSupported(){return Xe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Xe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Xe(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Xe(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Xe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Xe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const GE=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var kl,SA,Yb;class Fe{static makeHexColor(e,t,n){return`#${GE[e]}${GE[t]}${GE[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const r=e[n],i=e[n+1];e[n]=r*t[0]+i*t[2]+t[4],e[n+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],i=t[1],a=t[2],u=t[3],d=t[4],h=t[5];for(let f=0;f<6;f+=2){const g=e[n+f],w=e[n+f+1];e[n+f]=g*r+w*a+d,e[n+f+1]=g*i+w*u+h}}static applyInverseTransform(e,t){const n=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){const r=t[0],i=t[1],a=t[2],u=t[3],d=t[4],h=t[5],f=e[0],g=e[1],w=e[2],v=e[3];let F=r*f+d,C=F,S=r*w+d,I=S,O=u*g+h,R=O,V=u*v+h,z=V;if(i!==0||a!==0){const W=i*f,N=i*w,D=a*g,L=a*v;F+=D,I+=D,S+=L,C+=L,O+=W,z+=W,V+=N,R+=N}n[0]=Math.min(n[0],F,S,C,I),n[1]=Math.min(n[1],O,V,R,z),n[2]=Math.max(n[2],F,S,C,I),n[3]=Math.max(n[3],O,V,R,z)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],i=e[2],a=e[3],u=n**2+r**2,d=n*i+r*a,h=i**2+a**2,f=(u+h)/2,g=Math.sqrt(f**2-(u*h-d**2));t[0]=Math.sqrt(f+g||1),t[1]=Math.sqrt(f-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,r,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,n,r,i,a,u,d,h){h[0]=Math.min(h[0],e,u),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,u),h[3]=Math.max(h[3],t,d),P(this,kl,Yb).call(this,e,n,i,u,t,r,a,d,3*(-e+3*(n-i)+u),6*(e-2*n+i),3*(n-e),h),P(this,kl,Yb).call(this,e,n,i,u,t,r,a,d,3*(-t+3*(r-a)+d),6*(t-2*r+a),3*(r-t),h)}}kl=new WeakSet,SA=function(e,t,n,r,i,a,u,d,h,f){if(h<=0||h>=1)return;const g=1-h,w=h*h,v=w*h,F=g*(g*(g*e+3*h*t)+3*w*n)+v*r,C=g*(g*(g*i+3*h*a)+3*w*u)+v*d;f[0]=Math.min(f[0],F),f[1]=Math.min(f[1],C),f[2]=Math.max(f[2],F),f[3]=Math.max(f[3],C)},Yb=function(e,t,n,r,i,a,u,d,h,f,g,w){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&P(this,kl,SA).call(this,e,t,n,r,i,a,u,d,-g/f,w);return}const v=f**2-4*g*h;if(v<0)return;const F=Math.sqrt(v),C=2*h;P(this,kl,SA).call(this,e,t,n,r,i,a,u,d,(-f+F)/C,w),P(this,kl,SA).call(this,e,t,n,r,i,a,u,d,(-f-F)/C,w)},T(Fe,kl);function cG(s){return decodeURIComponent(escape(s))}let qE=null,xR=null;function uG(s){return qE||(qE=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,xR=new Map([["","t"]])),s.replaceAll(qE,(e,t,n)=>t?t.normalize("NFKC"):xR.get(n))}function MM(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),iG(s)}const sf="pdfjs_internal_id_";function dG(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...i]=t;if(!s(n)&&!Number.isInteger(n)||!e(r))return!1;const a=i.length;let u=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;u=!1;break;default:return!1}for(const d of i)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function mr(s,e,t){return Math.min(Math.max(s,e),t)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});class cy{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(i){var d;if(!i)return;let a=null;const u=i.name;if(u==="#text")a=i.value;else if(cy.shouldBuildText(u))(d=i==null?void 0:i.attributes)!=null&&d.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const h of i.children)r(h)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class LM{static setupStorage(e,t,n,r,i){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const u of n.children)u.attributes.value===a.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const d=u.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){const{attributes:a}=t,u=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[d,h]of Object.entries(a))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!u||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}u&&i.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var g,w;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:i,linkService:n});const u=i!=="richText",d=e.div;if(d.append(a),e.viewport){const v=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=v}u&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(r.children.length===0){if(r.value){const v=document.createTextNode(r.value);a.append(v),u&&cy.shouldBuildText(r.name)&&h.push(v)}return{textDivs:h}}const f=[[r,-1,a]];for(;f.length>0;){const[v,F,C]=f.at(-1);if(F+1===v.children.length){f.pop();continue}const S=v.children[++f.at(-1)[1]];if(S===null)continue;const{name:I}=S;if(I==="#text"){const R=document.createTextNode(S.value);h.push(R),C.append(R);continue}const O=(g=S==null?void 0:S.attributes)!=null&&g.xmlns?document.createElementNS(S.attributes.xmlns,I):document.createElement(I);if(C.append(O),S.attributes&&this.setAttributes({html:O,element:S,storage:t,intent:i,linkService:n}),((w=S.children)==null?void 0:w.length)>0)f.push([S,-1,O]);else if(S.value){const R=document.createTextNode(S.value);u&&cy.shouldBuildText(I)&&h.push(R),O.append(R)}}for(const v of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Bo="http://www.w3.org/2000/svg",Ad=class Ad{};ae(Ad,"CSS",96),ae(Ad,"PDF",72),ae(Ad,"PDF_TO_CSS_UNITS",Ad.CSS/Ad.PDF);let Lu=Ad;async function S0(s,e="text"){if(_g(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class T0{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=a,n*=t;const d=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,g,w,v;switch(r%=360,r<0&&(r+=360),r){case 180:f=-1,g=0,w=0,v=1;break;case 90:f=0,g=1,w=1,v=0;break;case 270:f=0,g=-1,w=-1,v=0;break;case 0:f=1,g=0,w=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(w=-w,v=-v);let F,C,S,I;f===0?(F=Math.abs(h-e[1])*n+i,C=Math.abs(d-e[0])*n+a,S=(e[3]-e[1])*n,I=(e[2]-e[0])*n):(F=Math.abs(d-e[0])*n+i,C=Math.abs(h-e[1])*n+a,S=(e[2]-e[0])*n,I=(e[3]-e[1])*n),this.transform=[f*n,g*n,w*n,v*n,F-f*n*d-w*n*h,C-g*n*d-v*n*h],this.width=S,this.height=I}get rawDims(){const e=this.viewBox;return Xe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new T0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const n=[e,t];return Fe.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Fe.applyTransform(t,this.transform);const n=[e[2],e[3]];return Fe.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Fe.applyInverseTransform(n,this.transform),n}}class jS extends sp{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function jx(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function $S(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function hG(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function pG(s,e="document.pdf"){if(typeof s!="string")return e;if(jx(s))return Ke('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},i=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(i.test(a))return r(a);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const h of u)if(i.test(h))return r(h);const d=Array.from(n.searchParams.keys()).reverse();for(const h of d)if(i.test(h))return r(h)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return r(d[0])}return e}class ER{constructor(){ae(this,"started",Object.create(null));ae(this,"times",[])}time(e){e in this.started&&Ke(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ke(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms
`);return e.join("")}}function _g(s,e){const t=e?URL.parse(s,e):URL.parse(s);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ki(s){s.preventDefault()}function yn(s){s.preventDefault(),s.stopPropagation()}function fG(s){console.log("Deprecated API usage: "+s)}var py;class k_{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;c(this,py)||x(this,py,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,py).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(a+=f,u+=g):h==="+"&&(a-=f,u-=g),new Date(Date.UTC(n,r,i,a,u,d))}}py=new WeakMap,T(k_,py);function mG(s,{scale:e=1,rotation:t=0}){const{width:n,height:r}=s.attributes.style,i=[0,0,parseInt(n),parseInt(r)];return new T0({viewBox:i,userUnit:1,scale:e,rotation:t})}function k0(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ke(`Not a valid color format: "${s}"`),[0,0,0])}function gG(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,k0(n))}e.remove()}function ln(s){const{a:e,b:t,c:n,d:r,e:i,f:a}=s.getTransform();return[e,t,n,r,i,a]}function ka(s){const{a:e,b:t,c:n,d:r,e:i,f:a}=s.getTransform().invertSelf();return[e,t,n,r,i,a]}function Qh(s,e,t=!1,n=!0){if(e instanceof T0){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:a}=s,u=qn.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,h=`var(--total-scale-factor) * ${i}px`,f=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,g=u?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=f,a.height=g):(a.width=g,a.height=f)}n&&s.setAttribute("data-main-rotation",e.rotation)}class mo{constructor(){const{pixelRatio:e}=mo;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,i=-1){let a=1/0,u=1/0,d=1/0;n=mo.capPixels(n,i),n>0&&(a=Math.sqrt(n/(e*t))),r!==-1&&(u=r/e,d=r/t);const h=Math.min(a,u,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Jb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class yG{static get isDarkMode(){var e;return Xe(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class wG{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Xe(this,"commentForegroundColor",k0(n))}}function vG(s,e,t,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return s=Math.round(s*n+r),e=Math.round(e*n+r),t=Math.round(t*n+r),[s,e,t]}function bR(s,e){const t=s[0]/255,n=s[1]/255,r=s[2]/255,i=Math.max(t,n,r),a=Math.min(t,n,r),u=(i+a)/2;if(i===a)e[0]=e[1]=0;else{const d=i-a;switch(e[1]=u<.5?d/(i+a):d/(2-i-a),i){case t:e[0]=((n-r)/d+(n<r?6:0))*60;break;case n:e[0]=((r-t)/d+2)*60;break;case r:e[0]=((t-n)/d+4)*60;break}}e[2]=u}function Zb(s,e){const t=s[0],n=s[1],r=s[2],i=(1-Math.abs(2*r-1))*n,a=i*(1-Math.abs(t/60%2-1)),u=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+u,e[1]=a+u,e[2]=u;break;case 1:e[0]=a+u,e[1]=i+u,e[2]=u;break;case 2:e[0]=u,e[1]=i+u,e[2]=a+u;break;case 3:e[0]=u,e[1]=a+u,e[2]=i+u;break;case 4:e[0]=a+u,e[1]=u,e[2]=i+u;break;case 5:case 6:e[0]=i+u,e[1]=u,e[2]=a+u;break}}function CR(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function FR(s,e,t){Zb(s,t),t.map(CR);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];Zb(e,t),t.map(CR);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const SR=new Map;function AG(s,e){const t=s[0]+s[1]*256+s[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=SR.get(t);if(n)return n;const r=new Float32Array(9),i=r.subarray(0,3),a=r.subarray(3,6);bR(s,a);const u=r.subarray(6,9);bR(e,u);const d=u[2]<.5,h=d?12:4.5;if(a[2]=d?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),FR(a,u,i)<h){let f,g;d?(f=a[2],g=1):(f=0,g=a[2]);const w=.005;for(;g-f>w;){const v=a[2]=(f+g)/2;d===FR(a,u,i)<h?f=v:g=v}a[2]=d?g:f}return Zb(a,i),n=Fe.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),SR.set(t,n),n}function OM({html:s,dir:e,className:t},n){const r=document.createDocumentFragment();if(typeof s=="string"){const i=document.createElement("p");i.dir=e||"auto";const a=s.split(/(?:\r\n?|\n)/);for(let u=0,d=a.length;u<d;++u){const h=a[u];i.append(document.createTextNode(h)),u<d-1&&i.append(document.createElement("br"))}r.append(i)}else LM.render({xfaHtml:s,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",t),n.append(r)}function BM(s){const e=new Path2D;if(!s)return e;for(let t=0,n=s.length;t<n;)switch(s[t++]){case lg.moveTo:e.moveTo(s[t++],s[t++]);break;case lg.lineTo:e.lineTo(s[t++],s[t++]);break;case lg.curveTo:e.bezierCurveTo(s[t++],s[t++],s[t++],s[t++],s[t++],s[t++]);break;case lg.quadraticCurveTo:e.quadraticCurveTo(s[t++],s[t++],s[t++],s[t++]);break;case lg.closePath:e.closePath();break;default:Ke(`Unrecognized drawing path operator: ${s[t-1]}`);break}return e}var zo,$i,wf,Cc,bd,Ym,VM,UM;const pt=class pt{constructor(){T(this,Ym)}get pagesNumber(){return c(pt,Cc)}set pagesNumber(e){c(pt,Cc)!==e&&(x(pt,Cc,e),e===0&&(x(pt,$i,null),x(pt,zo,null)))}addListener(e){c(pt,bd).push(e)}removeListener(e){const t=c(pt,bd).indexOf(e);t>=0&&c(pt,bd).splice(t,1)}movePages(e,t,n){P(this,Ym,UM).call(this,!0);const r=c(pt,$i),i=c(pt,zo);c(pt,wf).set(i);const a=t.length,u=new Uint32Array(a);let d=0;for(let v=0;v<a;v++){const F=t[v]-1;u[v]=r[F],F<n&&(d+=1)}const h=c(pt,Cc);let f=n-d;const g=h-a;f=mr(f,0,g);for(let v=0,F=0;v<h;v++)e.has(v+1)||(r[F++]=r[v]);r.copyWithin(f+a,f,g),r.set(u,f);let w=!1;for(let v=0,F=h;v<F;v++){const C=r[v];w||(w=C!==v+1),i[C-1]=v+1}P(this,Ym,VM).call(this),w||(this.pagesNumber=0)}hasBeenAltered(){return c(pt,$i)!==null}getPageMappingForSaving(){return{pageIndices:c(pt,zo)?c(pt,zo).map(e=>e-1):null}}getPrevPageNumber(e){return c(pt,wf)[c(pt,$i)[e-1]-1]}getPageNumber(e){var t;return((t=c(pt,zo))==null?void 0:t[e-1])??e}getPageId(e){var t;return((t=c(pt,$i))==null?void 0:t[e-1])??e}static get instance(){return Xe(this,"instance",new pt)}getMapping(){return c(pt,$i).subarray(0,this.pagesNumber)}};zo=new WeakMap,$i=new WeakMap,wf=new WeakMap,Cc=new WeakMap,bd=new WeakMap,Ym=new WeakSet,VM=function(){for(const e of c(pt,bd))e()},UM=function(e){if(c(pt,$i))return;const t=c(pt,Cc),n=new Uint32Array(3*t),r=x(pt,$i,n.subarray(0,t)),i=x(pt,zo,n.subarray(t,2*t));if(e)for(let a=0;a<t;a++)r[a]=i[a]=a+1;x(pt,wf,n.subarray(2*t))},T(pt,zo,null),T(pt,$i,null),T(pt,wf,null),T(pt,Cc,0),T(pt,bd,[]);let uy=pt;var Fc,Sc,ui,di,fy,Tc,vf,Af,my,j_,jM,Ar,$M,zM,Xp,xg;const jo=class jo{constructor(e){T(this,Ar);T(this,Fc,null);T(this,Sc,null);T(this,ui);T(this,di,null);T(this,fy,null);T(this,Tc,null);T(this,vf,null);T(this,Af,null);x(this,ui,e),c(jo,my)||x(jo,my,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=x(this,Fc,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,ui)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",ki,{signal:t}),e.addEventListener("pointerdown",P(jo,j_,jM),{signal:t}));const n=x(this,di,document.createElement("div"));n.className="buttons",e.append(n);const r=c(this,ui).toolbarPosition;if(r){const{style:i}=e,a=c(this,ui)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return c(this,Fc)}hide(){var e;c(this,Fc).classList.add("hidden"),(e=c(this,Sc))==null||e.hideDropdown()}show(){var e,t;c(this,Fc).classList.remove("hidden"),(e=c(this,fy))==null||e.shown(),(t=c(this,Tc))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=c(this,ui),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",c(jo,my)[e]),P(this,Ar,Xp).call(this,n)&&n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,di).append(n)}async addAltText(e){const t=await e.render();P(this,Ar,Xp).call(this,t),c(this,di).append(t,c(this,Ar,xg)),x(this,fy,e)}addComment(e,t=null){if(c(this,Tc))return;const n=e.renderForToolbar();if(!n)return;P(this,Ar,Xp).call(this,n);const r=x(this,vf,c(this,Ar,xg));t?(c(this,di).insertBefore(n,t),c(this,di).insertBefore(r,t)):c(this,di).append(n,r),x(this,Tc,e),e.toolbar=this}addColorPicker(e){if(c(this,Sc))return;x(this,Sc,e);const t=e.renderButton();P(this,Ar,Xp).call(this,t),c(this,di).append(t,c(this,Ar,xg))}async addEditSignatureButton(e){const t=x(this,Af,await e.renderEditButton(c(this,ui)));P(this,Ar,Xp).call(this,t),c(this,di).append(t,c(this,Ar,xg))}removeButton(e){var t,n;switch(e){case"comment":(t=c(this,Tc))==null||t.removeToolbarCommentButton(),x(this,Tc,null),(n=c(this,vf))==null||n.remove(),x(this,vf,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;const r=c(this,di).querySelector(n);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){c(this,Af)&&(c(this,Af).title=e)}remove(){var e;c(this,Fc).remove(),(e=c(this,Sc))==null||e.destroy(),x(this,Sc,null)}};Fc=new WeakMap,Sc=new WeakMap,ui=new WeakMap,di=new WeakMap,fy=new WeakMap,Tc=new WeakMap,vf=new WeakMap,Af=new WeakMap,my=new WeakMap,j_=new WeakSet,jM=function(e){e.stopPropagation()},Ar=new WeakSet,$M=function(e){c(this,ui)._focusEventsAllowed=!1,yn(e)},zM=function(e){c(this,ui)._focusEventsAllowed=!0,yn(e)},Xp=function(e){const t=c(this,ui)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",P(this,Ar,$M).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",P(this,Ar,zM).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ki,{signal:t}),!0)},xg=function(){const e=document.createElement("div");return e.className="divider",e},T(jo,j_),T(jo,my,null);let eC=jo;var gy,Cd,Ho,Ol,HM,WM,tC;class _G{constructor(e){T(this,Ol);T(this,gy,null);T(this,Cd,null);T(this,Ho);x(this,Ho,e)}show(e,t,n){const[r,i]=P(this,Ol,WM).call(this,t,n),{style:a}=c(this,Cd)||x(this,Cd,P(this,Ol,HM).call(this));e.append(c(this,Cd)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Cd).remove()}}gy=new WeakMap,Cd=new WeakMap,Ho=new WeakMap,Ol=new WeakSet,HM=function(){const e=x(this,Cd,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=c(this,Ho)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",ki,{signal:t});const n=x(this,gy,document.createElement("div"));return n.className="buttons",e.append(n),c(this,Ho).hasCommentManager()&&P(this,Ol,tC).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,Ho).commentSelection("floating_button")}),P(this,Ol,tC).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,Ho).highlightSelection("floating_button")}),e},WM=function(e,t){let n=0,r=0;for(const i of e){const a=i.y+i.height;if(a<n)continue;const u=i.x+(t?i.width:0);if(a>n){r=u,n=a;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,n]},tC=function(e,t,n,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const a=document.createElement("span");i.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const u=c(this,Ho)._signal;u instanceof AbortSignal&&!u.aborted&&(i.addEventListener("contextmenu",ki,{signal:u}),i.addEventListener("click",r,{signal:u})),c(this,gy).append(i)};function GM(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}var Fd,Sd,_f,Td;const It=class It{static initializeAndAddPointerId(e){(c(It,Sd)||x(It,Sd,new Set)).add(e)}static setPointer(e,t){c(It,Fd)||x(It,Fd,t),c(It,Td)??x(It,Td,e)}static setTimeStamp(e){x(It,_f,e)}static isSamePointerId(e){return c(It,Fd)===e}static isSamePointerIdOrRemove(e){var t;return c(It,Fd)===e?!0:((t=c(It,Sd))==null||t.delete(e),!1)}static isSamePointerType(e){return c(It,Td)===e}static isInitializedAndDifferentPointerType(e){return c(It,Td)!==null&&!It.isSamePointerType(e)}static isSameTimeStamp(e){return c(It,_f)===e}static isUsingMultiplePointers(){var e;return((e=c(It,Sd))==null?void 0:e.size)>=1}static clearPointerType(){x(It,Td,null)}static clearPointerIds(){x(It,Fd,NaN),x(It,Sd,null)}static clearTimeStamp(){x(It,_f,NaN)}};Fd=new WeakMap,Sd=new WeakMap,_f=new WeakMap,Td=new WeakMap,T(It,Fd,NaN),T(It,Sd,null),T(It,_f,NaN),T(It,Td,null);let kr=It;var $_;class xG{constructor(){T(this,$_,0)}get id(){return`${oy}${jn(this,$_)._++}`}}$_=new WeakMap;var xf,yy,Ir,Ef,TA;const ZS=class ZS{constructor(){T(this,Ef);T(this,xf,MM());T(this,yy,0);T(this,Ir,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Xe(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return P(this,Ef,TA).call(this,`${t}_${n}_${r}_${i}`,e)}async getFromUrl(e){return P(this,Ef,TA).call(this,e,e)}async getFromBlob(e,t){const n=await t;return P(this,Ef,TA).call(this,e,n)}async getFromId(e){c(this,Ir)||x(this,Ir,new Map);const t=c(this,Ir).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,Ir)||x(this,Ir,new Map);let n=c(this,Ir).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${c(this,xf)}_${jn(this,yy)._++}`,refCounter:1,isSvg:!1},c(this,Ir).set(e,n),c(this,Ir).set(n.id,n),n}getSvgUrl(e){const t=c(this,Ir).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,Ir)||x(this,Ir,new Map);const t=c(this,Ir).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,xf)}_`)}};xf=new WeakMap,yy=new WeakMap,Ir=new WeakMap,Ef=new WeakSet,TA=async function(e,t){c(this,Ir)||x(this,Ir,new Map);let n=c(this,Ir).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,xf)}_${jn(this,yy)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await S0(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=ZS._isSVGFittingCanvas,a=new FileReader,u=new Image,d=new Promise((h,f)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,h()},a.onload=async()=>{const g=n.svgUrl=a.result;u.src=await i?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=a.onerror=f});a.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Ke(r),n=null}return c(this,Ir).set(e,n),n&&c(this,Ir).set(n.id,n),n};let nC=ZS;var bn,kc,wy,an;class EG{constructor(e=128){T(this,bn,[]);T(this,kc,!1);T(this,wy);T(this,an,-1);x(this,wy,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:u=!1}){if(r&&e(),c(this,kc))return;const d={cmd:e,undo:t,post:n,type:i};if(c(this,an)===-1){c(this,bn).length>0&&(c(this,bn).length=0),x(this,an,0),c(this,bn).push(d);return}if(a&&c(this,bn)[c(this,an)].type===i){u&&(d.undo=c(this,bn)[c(this,an)].undo),c(this,bn)[c(this,an)]=d;return}const h=c(this,an)+1;h===c(this,wy)?c(this,bn).splice(0,1):(x(this,an,h),h<c(this,bn).length&&c(this,bn).splice(h)),c(this,bn).push(d)}undo(){if(c(this,an)===-1)return;x(this,kc,!0);const{undo:e,post:t}=c(this,bn)[c(this,an)];e(),t==null||t(),x(this,kc,!1),x(this,an,c(this,an)-1)}redo(){if(c(this,an)<c(this,bn).length-1){x(this,an,c(this,an)+1),x(this,kc,!0);const{cmd:e,post:t}=c(this,bn)[c(this,an)];e(),t==null||t(),x(this,kc,!1)}}hasSomethingToUndo(){return c(this,an)!==-1}hasSomethingToRedo(){return c(this,an)<c(this,bn).length-1}cleanType(e){if(c(this,an)!==-1){for(let t=c(this,an);t>=0;t--)if(c(this,bn)[t].type!==e){c(this,bn).splice(t+1,c(this,an)-t),x(this,an,t);return}c(this,bn).length=0,x(this,an,-1)}}destroy(){x(this,bn,null)}}bn=new WeakMap,kc=new WeakMap,wy=new WeakMap,an=new WeakMap;var z_,qM;class I0{constructor(e){T(this,z_);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=qn.platform;for(const[n,r,i={}]of e)for(const a of n){const u=a.startsWith("mac+");t&&u?(this.callbacks.set(a.slice(4),{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!u&&(this.callbacks.set(a,{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(P(this,z_,qM).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:a=[],checker:u=null}}=n;u&&!u(e,t)||(r.bind(e,...a,t)(),i||yn(t))}}z_=new WeakSet,qM=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const H_=class H_{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return gG(e),Xe(this,"_colors",e)}convert(e){const t=k0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((i,a)=>i===t[a]))return H_._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Fe.makeHexColor(...t):e}};ae(H_,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let rC=H_;var bf,Ss,Cf,on,Cn,Ff,hi,Sf,pi,Pr,Ic,Pc,Tf,Rc,Da,fi,kd,vy,Ay,kf,_y,Na,Dc,If,Nc,Ma,W_,Mc,Pf,xy,Lc,Id,Rf,Oc,Ey,Nn,St,Wo,Bc,Vc,by,Df,Cy,Uc,La,Go,Fy,Sy,mi,xe,kA,sC,QM,KM,Eg,XM,YM,JM,iC,ZM,eL,tL,nL,jr,Vo,rL,sL,aC,iL,bg,oC;const of=class of{constructor(e,t,n,r,i,a,u,d,h,f,g,w,v,F,C,S){T(this,xe);T(this,bf,new AbortController);T(this,Ss,null);T(this,Cf,null);T(this,on,new Map);T(this,Cn,new Map);T(this,Ff,null);T(this,hi,null);T(this,Sf,null);T(this,pi,new EG);T(this,Pr,null);T(this,Ic,null);T(this,Pc,null);T(this,Tf,0);T(this,Rc,new Set);T(this,Da,null);T(this,fi,null);T(this,kd,new Set);ae(this,"_editorUndoBar",null);T(this,vy,!1);T(this,Ay,!1);T(this,kf,!1);T(this,_y,null);T(this,Na,null);T(this,Dc,null);T(this,If,null);T(this,Nc,!1);T(this,Ma,null);T(this,W_,new xG);T(this,Mc,!1);T(this,Pf,!1);T(this,xy,!1);T(this,Lc,null);T(this,Id,null);T(this,Rf,null);T(this,Oc,null);T(this,Ey,null);T(this,Nn,Ze.NONE);T(this,St,new Set);T(this,Wo,null);T(this,Bc,null);T(this,Vc,null);T(this,by,null);T(this,Df,null);T(this,Cy,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});T(this,Uc,[0,0]);T(this,La,null);T(this,Go,null);T(this,Fy,null);T(this,Sy,null);T(this,mi,null);const I=this._signal=c(this,bf).signal;x(this,Go,e),x(this,Fy,t),x(this,Sy,n),x(this,Ff,r),x(this,Pr,i),x(this,Bc,a),x(this,Df,d),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:I}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:I}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:I}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:I}),u._on("setpreference",this.onSetPreference.bind(this),{signal:I}),u._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:I}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:I}),window.addEventListener("pointerdown",()=>{x(this,Pf,!0)},{capture:!0,signal:I}),window.addEventListener("pointerup",()=>{x(this,Pf,!1)},{capture:!0,signal:I}),P(this,xe,XM).call(this),P(this,xe,nL).call(this),P(this,xe,iC).call(this),x(this,hi,d.annotationStorage),x(this,_y,d.filterFactory),x(this,Vc,h),x(this,If,f||null),x(this,vy,g),x(this,Ay,w),x(this,kf,v),x(this,Ey,F||null),this.viewParameters={realScale:Lu.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=C||null,this._supportsPinchToZoom=S!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=of.prototype,t=a=>c(a,Go).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Xe(this,"_keyboardManager",new I0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&c(a,Go).contains(u)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&c(a,Go).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,r,i,a,u,d,h;(e=c(this,mi))==null||e.resolve(),x(this,mi,null),(t=c(this,bf))==null||t.abort(),x(this,bf,null),this._signal=null;for(const f of c(this,Cn).values())f.destroy();c(this,Cn).clear(),c(this,on).clear(),c(this,kd).clear(),(n=c(this,Oc))==null||n.clear(),x(this,Ss,null),c(this,St).clear(),c(this,pi).destroy(),(r=c(this,Ff))==null||r.destroy(),(i=c(this,Pr))==null||i.destroy(),(a=c(this,Bc))==null||a.destroy(),(u=c(this,Ma))==null||u.hide(),x(this,Ma,null),(d=c(this,Rf))==null||d.destroy(),x(this,Rf,null),x(this,Cf,null),c(this,Na)&&(clearTimeout(c(this,Na)),x(this,Na,null)),c(this,La)&&(clearTimeout(c(this,La)),x(this,La,null)),(h=this._editorUndoBar)==null||h.destroy(),x(this,Df,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,Ey)}get useNewAltTextFlow(){return c(this,Ay)}get useNewAltTextWhenAddingImage(){return c(this,kf)}get hcmFilter(){return Xe(this,"hcmFilter",c(this,Vc)?c(this,_y).addHCMFilter(c(this,Vc).foreground,c(this,Vc).background):"none")}get direction(){return Xe(this,"direction",getComputedStyle(c(this,Go)).direction)}get _highlightColors(){return Xe(this,"_highlightColors",c(this,If)?new Map(c(this,If).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Xe(this,"highlightColors",null);const t=new Map,n=!!c(this,Vc);for(const[r,i]of e){const a=r.endsWith("_HCM");if(n&&a){t.set(r.replace("_HCM",""),i);continue}!n&&!a&&t.set(r,i)}return Xe(this,"highlightColors",t)}get highlightColorNames(){return Xe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,Pc,e)}setMainHighlightColorPicker(e){x(this,Rf,e)}editAltText(e,t=!1){var n;(n=c(this,Ff))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!c(this,Pr)}editComment(e,t,n,r){var i;(i=c(this,Pr))==null||i.showDialog(this,e,t,n,r)}selectComment(e,t){const n=c(this,Cn).get(e),r=n==null?void 0:n.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=c(this,Pr))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=c(this,Pr))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=c(this,Pr))==null||t.removeComments([e.uid])}deleteComment(e,t){const n=()=>{e.comment=t},r=()=>{var i;(i=this._editorUndoBar)==null||i.show(n,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:r,undo:n,mustExec:!0})}toggleComment(e,t,n=void 0){var r;(r=c(this,Pr))==null||r.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=c(this,Pr))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=c(this,Pr))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(c(this,Cn).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await n}getSignature(e){var t;(t=c(this,Bc))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(this,Bc)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":x(this,kf,t);break}}onPagesEdited({pagesMapper:e}){for(const r of c(this,on).values())r.updatePageIndex(e.getPrevPageNumber(r.pageIndex+1)-1);const t=c(this,Cn),n=x(this,Cn,new Map);for(const[r,i]of t){const a=e.getPrevPageNumber(r+1)-1;if(a===-1){i.destroy();continue}n.set(a,i),i.updatePageIndex(a)}}onPageChanging({pageNumber:e}){x(this,Tf,e-1)}focusMainContainer(){c(this,Go).focus()}findParent(e,t){for(const n of c(this,Cn).values()){const{x:r,y:i,width:a,height:u}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+u)return n}return null}disableUserSelect(e=!1){c(this,Fy).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,kd).add(e)}removeShouldRescale(e){c(this,kd).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Lu.PDF_TO_CSS_UNITS;for(const n of c(this,kd))n.onScaleChanging();(t=c(this,Pc))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:u}=n,d=n.toString(),f=P(this,xe,kA).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;n.empty();const w=P(this,xe,sC).call(this,f),v=c(this,Nn)===Ze.NONE,F=()=>{const C=w==null?void 0:w.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:u,text:d});v&&this.showAllEditors("highlight",!0,!0),t&&(C==null||C.editComment())};if(v){this.switchToMode(Ze.HIGHLIGHT,F);return}F()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!c(this,hi))return null;const t=`${oy}${e}`,n=c(this,hi).getRawValue(t);return n&&c(this,hi).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&c(this,hi)&&!c(this,hi).has(e.id)&&c(this,hi).setValue(e.id,e)}a11yAlert(e,t=null){const n=c(this,Sy);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,Nc)&&(x(this,Nc,!1),P(this,xe,Eg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,St))if(t.div.contains(e)){x(this,Id,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,Id))return;const[e,t]=c(this,Id);x(this,Id,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){P(this,xe,iC).call(this),this.setEditingState(!0)}removeEditListeners(){P(this,xe,ZM).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of c(this,fi))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of c(this,fi))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=c(this,Ss))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,St)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of c(this,fi))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){Ke(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const d of n){const h=await r.deserialize(d);if(!h)return;i.push(h)}const a=()=>{for(const d of i)P(this,xe,aC).call(this,d);P(this,xe,oC).call(this,i)},u=()=>{for(const d of i)d.remove()};this.addCommands({cmd:a,undo:u,mustExec:!0})}catch(i){Ke(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Nn)!==Ze.NONE&&!this.isEditorHandlingKeyboard&&of._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Nc)&&(x(this,Nc,!1),P(this,xe,Eg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(P(this,xe,YM).call(this),P(this,xe,eL).call(this),P(this,xe,jr).call(this,{isEditing:c(this,Nn)!==Ze.NONE,isEmpty:P(this,xe,bg).call(this),hasSomethingToUndo:c(this,pi).hasSomethingToUndo(),hasSomethingToRedo:c(this,pi).hasSomethingToRedo(),hasSelectedEditor:!1})):(P(this,xe,JM).call(this),P(this,xe,tL).call(this),P(this,xe,jr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,fi)){x(this,fi,e);for(const t of c(this,fi))P(this,xe,Vo).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,W_).id}get currentLayer(){return c(this,Cn).get(c(this,Tf))}getLayer(e){return c(this,Cn).get(e)}get currentPageIndex(){return c(this,Tf)}addLayer(e){c(this,Cn).set(e.pageIndex,e),c(this,Mc)?e.enable():e.disable()}removeLayer(e){c(this,Cn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,i=!1,a=!1){var u,d,h,f,g,w;if(c(this,Nn)!==e&&!(c(this,mi)&&(await c(this,mi).promise,!c(this,mi)))){if(x(this,mi,Promise.withResolvers()),(u=c(this,Pc))==null||u.commitOrRemove(),c(this,Nn)===Ze.POPUP&&((d=c(this,Pr))==null||d.hideSidebar()),(h=c(this,Pr))==null||h.destroyPopup(),x(this,Nn,e),e===Ze.NONE){this.setEditingState(!1),P(this,xe,sL).call(this);for(const v of c(this,on).values())v.hideStandaloneCommentButton();(f=this._editorUndoBar)==null||f.hide(),this.toggleComment(null),c(this,mi).resolve();return}for(const v of c(this,on).values())v.addStandaloneCommentButton();e===Ze.SIGNATURE&&await((g=c(this,Bc))==null?void 0:g.loadSignatures()),n&&kr.clearPointerType(),this.setEditingState(!0),await P(this,xe,rL).call(this),this.unselectAll();for(const v of c(this,Cn).values())v.updateMode(e);if(e===Ze.POPUP){c(this,Cf)||x(this,Cf,await c(this,Df).getAnnotationsByType(new Set(c(this,fi).map(C=>C._editorType))));const v=new Set,F=[];for(const C of c(this,on).values()){const{annotationElementId:S,hasComment:I,deleted:O}=C;S&&v.add(S),I&&!O&&F.push(C.getData())}for(const C of c(this,Cf)){const{id:S,popupRef:I,contentsObj:O}=C;I&&(O!=null&&O.str)&&!v.has(S)&&!c(this,Rc).has(S)&&F.push(C)}(w=c(this,Pr))==null||w.showSidebar(F)}if(!t){r&&this.addNewEditorFromKeyboard(),c(this,mi).resolve();return}for(const v of c(this,on).values())v.uid===t?(this.setSelected(v),a?v.editComment():i?v.enterInEditMode():v.focus()):v.unselect();c(this,mi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(this,Nn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(c(this,fi)){switch(e){case dt.CREATE:this.currentLayer.addNewEditor(t);return;case dt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,by)||x(this,by,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of c(this,St))n.updateParams(e,t);else for(const n of c(this,fi))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const a of c(this,on).values())a.editorType===e&&a.show(t);(((i=c(this,by))==null?void 0:i.get(dt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&P(this,xe,Vo).call(this,[[dt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,xy)!==e){x(this,xy,e);for(const t of c(this,Cn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of c(this,on).values())t.pageIndex===e&&(yield t)}getEditor(e){return c(this,on).get(e)}addEditor(e){c(this,on).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(c(this,Na)&&clearTimeout(c(this,Na)),x(this,Na,setTimeout(()=>{this.focusMainContainer(),x(this,Na,null)},0))),c(this,on).delete(e.id),e.annotationElementId&&((t=c(this,Oc))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!c(this,Rc).has(e.annotationElementId))&&((n=c(this,hi))==null||n.remove(e.id))}addDeletedAnnotationElement(e){c(this,Rc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Rc).has(e)}removeDeletedAnnotationElement(e){c(this,Rc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,Ss)!==e&&(x(this,Ss,e),e&&P(this,xe,Vo).call(this,e.propertiesToUpdate))}updateUI(e){c(this,xe,iL)===e&&P(this,xe,Vo).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){P(this,xe,Vo).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,St).has(e)){c(this,St).delete(e),e.unselect(),P(this,xe,jr).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,St).add(e),e.select(),P(this,xe,Vo).call(this,e.propertiesToUpdate),P(this,xe,jr).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=c(this,Pc))==null||t.commitOrRemove();for(const n of c(this,St))n!==e&&n.unselect();c(this,St).clear(),c(this,St).add(e),e.select(),P(this,xe,Vo).call(this,e.propertiesToUpdate),P(this,xe,jr).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,St).has(e)}get firstSelectedEditor(){return c(this,St).values().next().value}unselect(e){e.unselect(),c(this,St).delete(e),P(this,xe,jr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,St).size!==0}get isEnterHandled(){return c(this,St).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,pi).undo(),P(this,xe,jr).call(this,{hasSomethingToUndo:c(this,pi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:P(this,xe,bg).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,pi).redo(),P(this,xe,jr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,pi).hasSomethingToRedo(),isEmpty:P(this,xe,bg).call(this)})}addCommands(e){c(this,pi).add(e),P(this,xe,jr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:P(this,xe,bg).call(this)})}cleanUndoStack(e){c(this,pi).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,St)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const u of t)u.remove()},r=()=>{for(const a of t)P(this,xe,aC).call(this,a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=c(this,Ss))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,Ss)||this.hasSelection}selectAll(){for(const e of c(this,St))e.commit();P(this,xe,oC).call(this,c(this,on).values())}unselectAll(){var e;if(!(c(this,Ss)&&(c(this,Ss).commitOrRemove(),c(this,Nn)!==Ze.NONE))&&!((e=c(this,Pc))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,St))t.unselect();c(this,St).clear(),P(this,xe,jr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,Uc)[0]+=e,c(this,Uc)[1]+=t;const[r,i]=c(this,Uc),a=[...c(this,St)],u=1e3;c(this,La)&&clearTimeout(c(this,La)),x(this,La,setTimeout(()=>{x(this,La,null),c(this,Uc)[0]=c(this,Uc)[1]=0,this.addCommands({cmd:()=>{for(const d of a)c(this,on).has(d.id)&&(d.translateInPage(r,i),d.translationDone())},undo:()=>{for(const d of a)c(this,on).has(d.id)&&(d.translateInPage(-r,-i),d.translationDone())},mustExec:!1})},u));for(const d of a)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,Da,new Map);for(const e of c(this,St))c(this,Da).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Da))return!1;this.disableUserSelect(!1);const e=c(this,Da);x(this,Da,null);let t=!1;for(const[{x:r,y:i,pageIndex:a},u]of e)u.newX=r,u.newY=i,u.newPageIndex=a,t||(t=r!==u.savedX||i!==u.savedY||a!==u.savedPageIndex);if(!t)return!1;const n=(r,i,a,u)=>{if(c(this,on).has(r.id)){const d=c(this,Cn).get(u);d?r._setParentAndPosition(d,i,a):(r.pageIndex=u,r.x=i,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:a,newPageIndex:u}]of e)n(r,i,a,u)},undo:()=>{for(const[r,{savedX:i,savedY:a,savedPageIndex:u}]of e)n(r,i,a,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,Da))for(const n of c(this,Da).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,St).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,Ss)===e}getActive(){return c(this,Ss)}getMode(){return c(this,Nn)}isEditingMode(){return c(this,Nn)!==Ze.NONE}get imageManager(){return Xe(this,"imageManager",new nC)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:a}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(h,f,g,w)=>({x:(f-r)/a,y:1-(h+g-n)/i,width:w/a,height:g/i});break;case"180":u=(h,f,g,w)=>({x:1-(h+g-n)/i,y:1-(f+w-r)/a,width:g/i,height:w/a});break;case"270":u=(h,f,g,w)=>({x:1-(f+w-r)/a,y:(h-n)/i,width:w/a,height:g/i});break;default:u=(h,f,g,w)=>({x:(h-n)/i,y:(f-r)/a,width:g/i,height:w/a});break}const d=[];for(let h=0,f=t.rangeCount;h<f;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x:w,y:v,width:F,height:C}of g.getClientRects())F===0||C===0||d.push(u(w,v,F,C))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Sf)||x(this,Sf,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Sf))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,Sf))==null?void 0:r.get(e.data.id);if(!t)return;const n=c(this,hi).getRawValue(t);n&&(c(this,Nn)===Ze.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var i;const r=(i=c(this,Oc))==null?void 0:i.get(e);r&&(r.setCanvas(t,n),c(this,Oc).delete(e))}addMissingCanvas(e,t){(c(this,Oc)||x(this,Oc,new Map)).set(e,t)}};bf=new WeakMap,Ss=new WeakMap,Cf=new WeakMap,on=new WeakMap,Cn=new WeakMap,Ff=new WeakMap,hi=new WeakMap,Sf=new WeakMap,pi=new WeakMap,Pr=new WeakMap,Ic=new WeakMap,Pc=new WeakMap,Tf=new WeakMap,Rc=new WeakMap,Da=new WeakMap,fi=new WeakMap,kd=new WeakMap,vy=new WeakMap,Ay=new WeakMap,kf=new WeakMap,_y=new WeakMap,Na=new WeakMap,Dc=new WeakMap,If=new WeakMap,Nc=new WeakMap,Ma=new WeakMap,W_=new WeakMap,Mc=new WeakMap,Pf=new WeakMap,xy=new WeakMap,Lc=new WeakMap,Id=new WeakMap,Rf=new WeakMap,Oc=new WeakMap,Ey=new WeakMap,Nn=new WeakMap,St=new WeakMap,Wo=new WeakMap,Bc=new WeakMap,Vc=new WeakMap,by=new WeakMap,Df=new WeakMap,Cy=new WeakMap,Uc=new WeakMap,La=new WeakMap,Go=new WeakMap,Fy=new WeakMap,Sy=new WeakMap,mi=new WeakMap,xe=new WeakSet,kA=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},sC=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of c(this,Cn).values())if(n.hasTextLayer(e))return n;return null},QM=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=P(this,xe,kA).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(c(this,Ma)||x(this,Ma,new _G(this)),c(this,Ma).show(n,r,this.direction==="ltr"))},KM=function(){var i,a,u;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Wo)&&((i=c(this,Ma))==null||i.hide(),x(this,Wo,null),P(this,xe,jr).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Wo))return;const r=P(this,xe,kA).call(this,e).closest(".textLayer");if(!r){c(this,Wo)&&((a=c(this,Ma))==null||a.hide(),x(this,Wo,null),P(this,xe,jr).call(this,{hasSelectedText:!1}));return}if((u=c(this,Ma))==null||u.hide(),x(this,Wo,t),P(this,xe,jr).call(this,{hasSelectedText:!0}),!(c(this,Nn)!==Ze.HIGHLIGHT&&c(this,Nn)!==Ze.NONE)&&(c(this,Nn)===Ze.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,Nc,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=c(this,Nn)===Ze.HIGHLIGHT?P(this,xe,sC).call(this,r):null;if(d==null||d.toggleDrawing(),c(this,Pf)){const h=new AbortController,f=this.combinedSignal(h),g=w=>{w.type==="pointerup"&&w.button!==0||(h.abort(),d==null||d.toggleDrawing(!0),w.type==="pointerup"&&P(this,xe,Eg).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("blur",g,{signal:f})}else d==null||d.toggleDrawing(!0),P(this,xe,Eg).call(this,"main_toolbar")}},Eg=function(e=""){c(this,Nn)===Ze.HIGHLIGHT?this.highlightSelection(e):c(this,vy)&&P(this,xe,QM).call(this)},XM=function(){document.addEventListener("selectionchange",P(this,xe,KM).bind(this),{signal:this._signal})},YM=function(){if(c(this,Dc))return;x(this,Dc,new AbortController);const e=this.combinedSignal(c(this,Dc));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},JM=function(){var e;(e=c(this,Dc))==null||e.abort(),x(this,Dc,null)},iC=function(){if(c(this,Lc))return;x(this,Lc,new AbortController);const e=this.combinedSignal(c(this,Lc));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},ZM=function(){var e;(e=c(this,Lc))==null||e.abort(),x(this,Lc,null)},eL=function(){if(c(this,Ic))return;x(this,Ic,new AbortController);const e=this.combinedSignal(c(this,Ic));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},tL=function(){var e;(e=c(this,Ic))==null||e.abort(),x(this,Ic,null)},nL=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},jr=function(e){Object.entries(e).some(([n,r])=>c(this,Cy)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Cy),e)}),c(this,Nn)===Ze.HIGHLIGHT&&e.hasSelectedEditor===!1&&P(this,xe,Vo).call(this,[[dt.HIGHLIGHT_FREE,!0]]))},Vo=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},rL=async function(){if(!c(this,Mc)){x(this,Mc,!0);const e=[];for(const t of c(this,Cn).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,on).values())t.enable()}},sL=function(){if(this.unselectAll(),c(this,Mc)){x(this,Mc,!1);for(const e of c(this,Cn).values())e.disable();for(const e of c(this,on).values())e.disable()}},aC=function(e){const t=c(this,Cn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},iL=function(){let e=null;for(e of c(this,St));return e},bg=function(){if(c(this,on).size===0)return!0;if(c(this,on).size===1)for(const e of c(this,on).values())return e.isEmpty();return!1},oC=function(e){for(const t of c(this,St))t.unselect();c(this,St).clear();for(const t of e)t.isEmpty()||(c(this,St).add(t),t.select());P(this,xe,jr).call(this,{hasSelectedEditor:this.hasSelection})},ae(of,"TRANSLATE_SMALL",1),ae(of,"TRANSLATE_BIG",10);let Kh=of;var Yn,Oa,zi,Nf,Ba,Ts,Mf,Va,ss,qo,Pd,Ua,jc,ta,Cg,IA;const $r=class $r{constructor(e){T(this,ta);T(this,Yn,null);T(this,Oa,!1);T(this,zi,null);T(this,Nf,null);T(this,Ba,null);T(this,Ts,null);T(this,Mf,!1);T(this,Va,null);T(this,ss,null);T(this,qo,null);T(this,Pd,null);T(this,Ua,!1);x(this,ss,e),x(this,Ua,e._uiManager.useNewAltTextFlow),c($r,jc)||x($r,jc,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){$r._l10n??($r._l10n=e)}async render(){const e=x(this,zi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=x(this,Nf,document.createElement("span"));e.append(t),c(this,Ua)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c($r,jc).missing),t.setAttribute("data-l10n-id",c($r,jc)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,ss)._uiManager._signal;e.addEventListener("contextmenu",ki,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),c(this,ss)._uiManager.editAltText(c(this,ss)),c(this,Ua)&&c(this,ss)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,ta,Cg)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(x(this,Mf,!0),r(i))},{signal:n}),await P(this,ta,IA).call(this),e}finish(){c(this,zi)&&(c(this,zi).focus({focusVisible:c(this,Mf)}),x(this,Mf,!1))}isEmpty(){return c(this,Ua)?c(this,Yn)===null:!c(this,Yn)&&!c(this,Oa)}hasData(){return c(this,Ua)?c(this,Yn)!==null||!!c(this,qo):this.isEmpty()}get guessedText(){return c(this,qo)}async setGuessedText(e){c(this,Yn)===null&&(x(this,qo,e),x(this,Pd,await $r._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),P(this,ta,IA).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,Ua)||c(this,Yn)){(t=c(this,Va))==null||t.remove(),x(this,Va,null);return}if(!c(this,Va)){const n=x(this,Va,document.createElement("div"));n.className="noAltTextBadge",c(this,ss).div.append(n)}c(this,Va).classList.toggle("hidden",!e)}serialize(e){let t=c(this,Yn);return!e&&c(this,qo)===t&&(t=c(this,Pd)),{altText:t,decorative:c(this,Oa),guessedText:c(this,qo),textWithDisclaimer:c(this,Pd)}}get data(){return{altText:c(this,Yn),decorative:c(this,Oa)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:i=!1}){n&&(x(this,qo,n),x(this,Pd,r)),!(c(this,Yn)===e&&c(this,Oa)===t)&&(i||(x(this,Yn,e),x(this,Oa,t)),P(this,ta,IA).call(this))}toggle(e=!1){c(this,zi)&&(!e&&c(this,Ts)&&(clearTimeout(c(this,Ts)),x(this,Ts,null)),c(this,zi).disabled=!e)}shown(){c(this,ss)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,ta,Cg)}})}destroy(){var e,t;(e=c(this,zi))==null||e.remove(),x(this,zi,null),x(this,Nf,null),x(this,Ba,null),(t=c(this,Va))==null||t.remove(),x(this,Va,null)}};Yn=new WeakMap,Oa=new WeakMap,zi=new WeakMap,Nf=new WeakMap,Ba=new WeakMap,Ts=new WeakMap,Mf=new WeakMap,Va=new WeakMap,ss=new WeakMap,qo=new WeakMap,Pd=new WeakMap,Ua=new WeakMap,jc=new WeakMap,ta=new WeakSet,Cg=function(){return c(this,Yn)&&"added"||c(this,Yn)===null&&this.guessedText&&"review"||"missing"},IA=async function(){var r,i,a;const e=c(this,zi);if(!e)return;if(c(this,Ua)){if(e.classList.toggle("done",!!c(this,Yn)),e.setAttribute("data-l10n-id",c($r,jc)[c(this,ta,Cg)]),(r=c(this,Nf))==null||r.setAttribute("data-l10n-id",c($r,jc)[`${c(this,ta,Cg)}-label`]),!c(this,Yn)){(i=c(this,Ba))==null||i.remove();return}}else{if(!c(this,Yn)&&!c(this,Oa)){e.classList.remove("done"),(a=c(this,Ba))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,Ba);if(!t){x(this,Ba,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,ss).id}`;const u=100,d=c(this,ss)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(c(this,Ts)),x(this,Ts,null)},{once:!0}),e.addEventListener("mouseenter",()=>{x(this,Ts,setTimeout(()=>{x(this,Ts,null),c(this,Ba).classList.add("show"),c(this,ss)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),e.addEventListener("mouseleave",()=>{var h;c(this,Ts)&&(clearTimeout(c(this,Ts)),x(this,Ts,null)),(h=c(this,Ba))==null||h.classList.remove("show")},{signal:d})}c(this,Oa)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,Yn)),t.parentNode||e.append(t);const n=c(this,ss).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},T($r,jc,null),ae($r,"_l10n",null);let I_=$r;var ur,gi,Rd,$t,Ty,$c,yi,zc,Hc,Dd,ky,lC;class sA{constructor(e){T(this,ky);T(this,ur,null);T(this,gi,null);T(this,Rd,!1);T(this,$t,null);T(this,Ty,null);T(this,$c,null);T(this,yi,null);T(this,zc,null);T(this,Hc,!1);T(this,Dd,null);x(this,$t,e)}renderForToolbar(){const e=x(this,gi,document.createElement("button"));return e.className="comment",P(this,ky,lC).call(this,e,!1)}renderForStandalone(){const e=x(this,ur,document.createElement("button"));e.className="annotationCommentButton";const t=c(this,$t).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(c(this,$t)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=c(this,$t).commentButtonColor;r&&(n.backgroundColor=r)}return P(this,ky,lC).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=c(this,ur)??c(this,gi))==null||e.focus()},0)}onUpdatedColor(){if(!c(this,ur))return;const e=c(this,$t).commentButtonColor;e&&(c(this,ur).style.backgroundColor=e),c(this,$t)._uiManager.updatePopupColor(c(this,$t))}get commentButtonWidth(){var e;return(((e=c(this,ur))==null?void 0:e.getBoundingClientRect().width)??0)/c(this,$t).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,Dd))return c(this,Dd);if(!c(this,ur))return null;const{x:e,y:t,height:n}=c(this,ur).getBoundingClientRect(),{x:r,y:i,width:a,height:u}=c(this,$t).parent.boundingClientRect;return[(e-r)/a,(t+n-i)/u]}set commentPopupPositionInLayer(e){x(this,Dd,e)}hasDefaultPopupPosition(){return c(this,Dd)===null}removeStandaloneCommentButton(){var e;(e=c(this,ur))==null||e.remove(),x(this,ur,null)}removeToolbarCommentButton(){var e;(e=c(this,gi))==null||e.remove(),x(this,gi,null)}setCommentButtonStates({selected:e,hasPopup:t}){c(this,ur)&&(c(this,ur).classList.toggle("selected",e),c(this,ur).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,r;if(t)[n,r]=t;else{[n,r]=c(this,$t).commentButtonPosition;const{width:f,height:g,x:w,y:v}=c(this,$t);n=w+n*f,r=v+r*g}const i=c(this,$t).parent.boundingClientRect,{x:a,y:u,width:d,height:h}=i;c(this,$t)._uiManager.editComment(c(this,$t),a+n*d,u+r*h,{...e,parentDimensions:i})}finish(){c(this,gi)&&(c(this,gi).focus({focusVisible:c(this,Rd)}),x(this,Rd,!1))}isDeleted(){return c(this,Hc)||c(this,yi)===""}isEmpty(){return c(this,yi)===null}hasBeenEdited(){return this.isDeleted()||c(this,yi)!==c(this,Ty)}serialize(){return this.data}get data(){return{text:c(this,yi),richText:c(this,$c),date:c(this,zc),deleted:this.isDeleted()}}set data(e){if(e!==c(this,yi)&&x(this,$c,null),e===null){x(this,yi,""),x(this,Hc,!0);return}x(this,yi,e),x(this,zc,new Date),x(this,Hc,!1)}restoreData({text:e,richText:t,date:n}){x(this,yi,e),x(this,$c,t),x(this,zc,n),x(this,Hc,!1)}setInitialText(e,t=null){x(this,Ty,e),this.data=e,x(this,zc,null),x(this,$c,t)}shown(){}destroy(){var e,t;(e=c(this,gi))==null||e.remove(),x(this,gi,null),(t=c(this,ur))==null||t.remove(),x(this,ur,null),x(this,yi,""),x(this,$c,null),x(this,zc,null),x(this,$t,null),x(this,Rd,!1),x(this,Hc,!1)}}ur=new WeakMap,gi=new WeakMap,Rd=new WeakMap,$t=new WeakMap,Ty=new WeakMap,$c=new WeakMap,yi=new WeakMap,zc=new WeakMap,Hc=new WeakMap,Dd=new WeakMap,ky=new WeakSet,lC=function(e,t){if(!c(this,$t)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[c(this,$t)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=c(this,$t)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",ki,{signal:n}),t&&(e.addEventListener("focusin",i=>{c(this,$t)._focusEventsAllowed=!1,yn(i)},{capture:!0,signal:n}),e.addEventListener("focusout",i=>{c(this,$t)._focusEventsAllowed=!0,yn(i)},{capture:!0,signal:n})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),e===c(this,gi)?this.edit():c(this,$t).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(x(this,Rd,!0),r(i))},{signal:n}),e.addEventListener("pointerenter",()=>{c(this,$t).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{c(this,$t).toggleComment(!1,!1)},{signal:n}),e};var Lf,Nd,Iy,Py,Ry,Dy,Ny,Qo,Md,Ko,Ld,Xo,Ou,aL,oL,lL;const eT=class eT{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:a=null,signal:u}){T(this,Ou);T(this,Lf);T(this,Nd,!1);T(this,Iy,null);T(this,Py);T(this,Ry);T(this,Dy);T(this,Ny);T(this,Qo,null);T(this,Md);T(this,Ko,null);T(this,Ld);T(this,Xo,null);x(this,Lf,e),x(this,Iy,n),x(this,Py,t),x(this,Ry,r),x(this,Dy,i),x(this,Ny,a),x(this,Ld,new AbortController),x(this,Md,AbortSignal.any([u,c(this,Ld).signal])),e.addEventListener("touchstart",P(this,Ou,aL).bind(this),{passive:!1,signal:c(this,Md)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/mo.pixelRatio}destroy(){var e,t;(e=c(this,Ld))==null||e.abort(),x(this,Ld,null),(t=c(this,Qo))==null||t.abort(),x(this,Qo,null)}};Lf=new WeakMap,Nd=new WeakMap,Iy=new WeakMap,Py=new WeakMap,Ry=new WeakMap,Dy=new WeakMap,Ny=new WeakMap,Qo=new WeakMap,Md=new WeakMap,Ko=new WeakMap,Ld=new WeakMap,Xo=new WeakMap,Ou=new WeakSet,aL=function(e){var r,i,a;if((r=c(this,Py))!=null&&r.call(this))return;if(e.touches.length===1){if(c(this,Qo))return;const u=x(this,Qo,new AbortController),d=AbortSignal.any([c(this,Md),u.signal]),h=c(this,Lf),f={capture:!0,signal:d,passive:!1},g=w=>{var v;w.pointerType==="touch"&&((v=c(this,Qo))==null||v.abort(),x(this,Qo,null))};h.addEventListener("pointerdown",w=>{w.pointerType==="touch"&&(yn(w),g(w))},f),h.addEventListener("pointerup",g,f),h.addEventListener("pointercancel",g,f);return}if(!c(this,Xo)){x(this,Xo,new AbortController);const u=AbortSignal.any([c(this,Md),c(this,Xo).signal]),d=c(this,Lf),h={signal:u,capture:!1,passive:!1};d.addEventListener("touchmove",P(this,Ou,oL).bind(this),h);const f=P(this,Ou,lL).bind(this);d.addEventListener("touchend",f,h),d.addEventListener("touchcancel",f,h),h.capture=!0,d.addEventListener("pointerdown",yn,h),d.addEventListener("pointermove",yn,h),d.addEventListener("pointercancel",yn,h),d.addEventListener("pointerup",yn,h),(i=c(this,Ry))==null||i.call(this)}if(yn(e),e.touches.length!==2||(a=c(this,Iy))!=null&&a.call(this)){x(this,Ko,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),x(this,Ko,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},oL=function(e){var V;if(!c(this,Ko)||e.touches.length!==2)return;yn(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:i}=t,{screenX:a,screenY:u}=n,d=c(this,Ko),{touch0X:h,touch0Y:f,touch1X:g,touch1Y:w}=d,v=g-h,F=w-f,C=a-r,S=u-i,I=Math.hypot(C,S)||1,O=Math.hypot(v,F)||1;if(!c(this,Nd)&&Math.abs(O-I)<=eT.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=i,d.touch1X=a,d.touch1Y=u,!c(this,Nd)){x(this,Nd,!0);return}const R=[(r+a)/2,(i+u)/2];(V=c(this,Dy))==null||V.call(this,R,O,I)},lL=function(e){var t;e.touches.length>=2||(c(this,Xo)&&(c(this,Xo).abort(),x(this,Xo,null),(t=c(this,Ny))==null||t.call(this)),c(this,Ko)&&(yn(e),x(this,Ko,null),x(this,Nd,!1)))};let P_=eT;var Od,Hi,Zt,Tt,Yo,Of,Wc,My,dr,Bd,Jo,wi,Gc,Ly,Vd,ks,Oy,Ud,Zo,ja,Bf,Vf,vi,jd,By,G_,$e,cC,Vy,uC,PA,cL,uL,dC,RA,hC,dL,hL,pL,pC,fL,fC,mL,gL,yL,mC,Fg;const Je=class Je{constructor(e){T(this,$e);T(this,Od,null);T(this,Hi,null);T(this,Zt,null);T(this,Tt,null);T(this,Yo,null);T(this,Of,!1);T(this,Wc,null);T(this,My,"");T(this,dr,null);T(this,Bd,null);T(this,Jo,null);T(this,wi,null);T(this,Gc,null);T(this,Ly,"");T(this,Vd,!1);T(this,ks,null);T(this,Oy,!1);T(this,Ud,!1);T(this,Zo,!1);T(this,ja,null);T(this,Bf,0);T(this,Vf,0);T(this,vi,null);T(this,jd,null);ae(this,"isSelected",!1);ae(this,"_isCopy",!1);ae(this,"_editToolbar",null);ae(this,"_initialOptions",Object.create(null));ae(this,"_initialData",null);ae(this,"_isVisible",!0);ae(this,"_uiManager",null);ae(this,"_focusEventsAllowed",!0);T(this,By,!1);T(this,G_,Je._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,a];const[u,d]=this.parentDimensions;this.x=e.x/u,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Je.prototype._resizeWithKeyboard,t=Kh.TRANSLATE_SMALL,n=Kh.TRANSLATE_BIG;return Xe(this,"_resizerKeyboardManager",new I0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Je.prototype._stopResizingWithKeyboard]]))}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Xe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new bG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Je._l10n??(Je._l10n=e),Je._l10nResizer||(Je._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Je._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Je._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){xt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,By)}set _isDraggable(e){var t;x(this,By,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,G_)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(P(this,$e,Fg).call(this),(t=c(this,wi))==null||t.remove(),x(this,wi,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Vd)?x(this,Vd,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){P(this,$e,cC).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,ks)||x(this,ks,[this.x,this.y,this.width,this.height]),P(this,$e,cC).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c(this,ks)||x(this,ks,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:u}=this;const[d,h]=this.getBaseTranslation();a+=d,u+=h;const{style:f}=n;f.left=`${(100*a).toFixed(2)}%`,f.top=`${(100*u).toFixed(2)}%`,this._onTranslating(a,u),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,ks)&&(c(this,ks)[0]!==this.x||c(this,ks)[1]!==this.y)}get _hasBeenResized(){return!!c(this,ks)&&(c(this,ks)[2]!==this.width||c(this,ks)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Je,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:i,y:a,width:u,height:d}=this;if(u*=n,d*=r,i*=n,a*=r,this._mustFixPosition)switch(e){case 0:i=mr(i,0,n-u),a=mr(a,0,r-d);break;case 90:i=mr(i,0,n-d),a=mr(a,u,r);break;case 180:i=mr(i,u,n),a=mr(a,d,r);break;case 270:i=mr(i,d,n),a=mr(a,0,r-u);break}this.x=i/=n,this.y=a/=r;const[h,f]=this.getBaseTranslation();i+=h,a+=f,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return P(n=Je,Vy,uC).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return P(n=Je,Vy,uC).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,Zt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,Ud))return this._editToolbar;this._editToolbar=new eC(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=c(this,Zt))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,Zt)||(I_.initialize(Je._l10n),x(this,Zt,new I_(this)),c(this,Od)&&(c(this,Zt).data=c(this,Od),x(this,Od,null))),c(this,Zt)}get altTextData(){var e;return(e=c(this,Zt))==null?void 0:e.data}set altTextData(e){c(this,Zt)&&(c(this,Zt).data=e)}get guessedAltText(){var e;return(e=c(this,Zt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,Zt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,Zt))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,Zt)&&!c(this,Zt).isEmpty()}hasAltTextData(){var e;return((e=c(this,Zt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=c(this,Tt))==null||e.focusButton()}addCommentButton(){return this.canAddComment?c(this,Tt)||x(this,Tt,new sA(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(c(this,Yo)){this._uiManager.isEditingMode()&&c(this,Yo).classList.remove("hidden");return}this.hasComment&&(x(this,Yo,c(this,Tt).renderForStandalone()),this.div.append(c(this,Yo)))}}removeStandaloneCommentButton(){c(this,Tt).removeStandaloneCommentButton(),x(this,Yo,null)}hideStandaloneCommentButton(){var e;(e=c(this,Yo))==null||e.classList.add("hidden")}get comment(){if(!c(this,Tt))return null;const{data:{richText:e,text:t,date:n,deleted:r}}=c(this,Tt);return{text:t,richText:e,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){c(this,Tt)||x(this,Tt,new sA(this)),typeof e=="object"&&e!==null?c(this,Tt).restoreData(e):c(this,Tt).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(c(this,Tt)||x(this,Tt,new sA(this)),c(this,Tt).setInitialText(e,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=c(this,Tt))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=c(this,Tt))==null?void 0:e.isDeleted()}get hasComment(){return!!c(this,Tt)&&!c(this,Tt).isEmpty()&&!c(this,Tt).isDeleted()}async editComment(e){c(this,Tt)||x(this,Tt,new sA(this)),c(this,Tt).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){c(this,Tt).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[a]=this.pageTranslation,u=a+i+1,d=r-100,h=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,h,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){c(this,Tt).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=c(this,Of)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),P(this,$e,fC).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),GM(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,jd)||x(this,jd,new P_({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:P(this,$e,dL).bind(this),onPinching:P(this,$e,hL).bind(this),onPinchEnd:P(this,$e,pL).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=qn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,Vd,!0),this._isDraggable){P(this,$e,fL).call(this,e);return}P(this,$e,pC).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,ja)&&clearTimeout(c(this,ja)),x(this,ja,setTimeout(()=>{var e;x(this,ja,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[i,a]=this.pageDimensions,[u,d]=this.pageTranslation,h=e/r,f=t/r,g=this.x*i,w=this.y*a,v=this.width*i,F=this.height*a;switch(n){case 0:return[g+h+u,a-w-f-F+d,g+h+v+u,a-w-f+d];case 90:return[g+f+u,a-w+h+d,g+f+F+u,a-w+h+v+d];case 180:return[g-h-v+u,a-w+f+d,g-h+u,a-w+f+F+d];case 270:return[g-f-F+u,a-w-h-v+d,g-f+u,a-w-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,a]=e,u=i-n,d=a-r;switch(this.rotation){case 0:return[n,t-a,u,d];case 90:return[n,t-r,d,u];case 180:return[i,t-r,u,d];case 270:return[i,t-a,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Je._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=c(this,Tt))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:r,deleted:i,richText:a},uid:u,pageIndex:d,creationDate:h,modificationDate:f}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:h,modificationDate:n||f,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),x(this,Ud,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),x(this,Ud,!1),!0):!1}isInEditMode(){return c(this,Ud)}shouldGetKeyboardEvents(){return c(this,Zo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&r>0&&e<i&&n>0}rebuild(){P(this,$e,fC).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,x(r,Od,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,a]=r.pageDimensions,[u,d,h,f]=r.getRectInCurrentCoords(e.rect,a);return r.x=u/i,r.y=d/a,r.width=h/i,r.height=f/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,n;if((e=c(this,Gc))==null||e.abort(),x(this,Gc,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),c(this,ja)&&(clearTimeout(c(this,ja)),x(this,ja,null)),P(this,$e,Fg).call(this),this.removeEditToolbar(),c(this,vi)){for(const r of c(this,vi).values())clearTimeout(r);x(this,vi,null)}this.parent=null,(t=c(this,jd))==null||t.destroy(),x(this,jd,null),(n=c(this,wi))==null||n.remove(),x(this,wi,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(P(this,$e,cL).call(this),c(this,dr).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,r,i,a]=this.getPDFRect();return[Je._round(n+(i-n)*e),Je._round(r+(a-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,Tt).commentPopupPositionInLayer}set commentPopupPosition(e){c(this,Tt).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return c(this,Tt).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,Tt).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=c(this,Tt))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Jo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,dr).children;if(!c(this,Hi)){x(this,Hi,Array.from(t));const a=P(this,$e,mL).bind(this),u=P(this,$e,gL).bind(this),d=this._uiManager._signal;for(const h of c(this,Hi)){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:d}),h.addEventListener("blur",u,{signal:d}),h.addEventListener("focus",P(this,$e,yL).bind(this,f),{signal:d}),h.setAttribute("data-l10n-id",Je._l10nResizer[f])}}const n=c(this,Hi)[0];let r=0;for(const a of t){if(a===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(c(this,Hi).length/4);if(i!==r){if(i<r)for(let u=0;u<r-i;u++)c(this,dr).append(c(this,dr).firstElementChild);else if(i>r)for(let u=0;u<i-r;u++)c(this,dr).firstElementChild.before(c(this,dr).lastElementChild);let a=0;for(const u of t){const h=c(this,Hi)[a++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Je._l10nResizer[h])}}P(this,$e,mC).call(this,0),x(this,Zo,!0),c(this,dr).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Zo)&&P(this,$e,hC).call(this,c(this,Ly),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){P(this,$e,Fg).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=c(this,Zt))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,r,i;this.isSelected&&(this.isSelected=!1,(e=c(this,dr))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=c(this,Zt))==null||i.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Oy)}set isEditing(e){x(this,Oy,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,vi)||x(this,vi,new Map);const{action:n}=e;let r=c(this,vi).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,vi).delete(n),c(this,vi).size===0&&x(this,vi,null)},Je._telemetryTimeout),c(this,vi).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,Of,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,Of,!0)}updateFakeAnnotationElement(e){if(!c(this,wi)&&!this.deleted){x(this,wi,e.addFakeAnnotation(this));return}if(this.deleted){c(this,wi).remove(),x(this,wi,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,wi).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Od=new WeakMap,Hi=new WeakMap,Zt=new WeakMap,Tt=new WeakMap,Yo=new WeakMap,Of=new WeakMap,Wc=new WeakMap,My=new WeakMap,dr=new WeakMap,Bd=new WeakMap,Jo=new WeakMap,wi=new WeakMap,Gc=new WeakMap,Ly=new WeakMap,Vd=new WeakMap,ks=new WeakMap,Oy=new WeakMap,Ud=new WeakMap,Zo=new WeakMap,ja=new WeakMap,Bf=new WeakMap,Vf=new WeakMap,vi=new WeakMap,jd=new WeakMap,By=new WeakMap,G_=new WeakMap,$e=new WeakSet,cC=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Vy=new WeakSet,uC=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},PA=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},cL=function(){if(c(this,dr))return;x(this,dr,document.createElement("div")),c(this,dr).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");c(this,dr).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",P(this,$e,uL).bind(this,n),{signal:t}),r.addEventListener("contextmenu",ki,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,dr))},uL=function(e,t){var f;t.preventDefault();const{isMac:n}=qn.platform;if(t.button!==0||t.ctrlKey&&n)return;(f=c(this,Zt))==null||f.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,x(this,Bd,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",P(this,$e,hC).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",yn,{passive:!1,signal:a}),window.addEventListener("contextmenu",ki,{signal:a}),x(this,Jo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{var g;i.abort(),this.parent.togglePointerEvents(!0),(g=c(this,Zt))==null||g.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,P(this,$e,RA).call(this)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})},dC=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},RA=function(){if(!c(this,Jo))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=c(this,Jo);x(this,Jo,null);const i=this.x,a=this.y,u=this.width,d=this.height;i===e&&a===t&&u===n&&d===r||this.addCommands({cmd:P(this,$e,dC).bind(this,i,a,u,d),undo:P(this,$e,dC).bind(this,e,t,n,r),mustExec:!0})},hC=function(e,t){const[n,r]=this.parentDimensions,i=this.x,a=this.y,u=this.width,d=this.height,h=Je.MIN_SIZE/n,f=Je.MIN_SIZE/r,g=P(this,$e,PA).call(this,this.rotation),w=(we,fe)=>[g[0]*we+g[2]*fe,g[1]*we+g[3]*fe],v=P(this,$e,PA).call(this,360-this.rotation),F=(we,fe)=>[v[0]*we+v[2]*fe,v[1]*we+v[3]*fe];let C,S,I=!1,O=!1;switch(e){case"topLeft":I=!0,C=(we,fe)=>[0,0],S=(we,fe)=>[we,fe];break;case"topMiddle":C=(we,fe)=>[we/2,0],S=(we,fe)=>[we/2,fe];break;case"topRight":I=!0,C=(we,fe)=>[we,0],S=(we,fe)=>[0,fe];break;case"middleRight":O=!0,C=(we,fe)=>[we,fe/2],S=(we,fe)=>[0,fe/2];break;case"bottomRight":I=!0,C=(we,fe)=>[we,fe],S=(we,fe)=>[0,0];break;case"bottomMiddle":C=(we,fe)=>[we/2,fe],S=(we,fe)=>[we/2,0];break;case"bottomLeft":I=!0,C=(we,fe)=>[0,fe],S=(we,fe)=>[we,0];break;case"middleLeft":O=!0,C=(we,fe)=>[0,fe/2],S=(we,fe)=>[we,fe/2];break}const R=C(u,d),V=S(u,d);let z=w(...V);const W=Je._round(i+z[0]),N=Je._round(a+z[1]);let D=1,L=1,U,$;if(t.fromKeyboard)({deltaX:U,deltaY:$}=t);else{const{screenX:we,screenY:fe}=t,[oe,Z]=c(this,Bd);[U,$]=this.screenToPageTranslation(we-oe,fe-Z),c(this,Bd)[0]=we,c(this,Bd)[1]=fe}if([U,$]=F(U/n,$/r),I){const we=Math.hypot(u,d);D=L=Math.max(Math.min(Math.hypot(V[0]-R[0]-U,V[1]-R[1]-$)/we,1/u,1/d),h/u,f/d)}else O?D=mr(Math.abs(V[0]-R[0]-U),h,1)/u:L=mr(Math.abs(V[1]-R[1]-$),f,1)/d;const Q=Je._round(u*D),j=Je._round(d*L);z=w(...S(Q,j));const me=W-z[0],_e=N-z[1];c(this,ks)||x(this,ks,[this.x,this.y,this.width,this.height]),this.width=Q,this.height=j,this.x=me,this.y=_e,this.setDims(),this.fixAndSetPosition(),this._onResizing()},dL=function(){var e;x(this,Jo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,Zt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},hL=function(e,t,n){let i=.7*(n/t)+1-.7;if(i===1)return;const a=P(this,$e,PA).call(this,this.rotation),u=(W,N)=>[a[0]*W+a[2]*N,a[1]*W+a[3]*N],[d,h]=this.parentDimensions,f=this.x,g=this.y,w=this.width,v=this.height,F=Je.MIN_SIZE/d,C=Je.MIN_SIZE/h;i=Math.max(Math.min(i,1/w,1/v),F/w,C/v);const S=Je._round(w*i),I=Je._round(v*i);if(S===w&&I===v)return;c(this,ks)||x(this,ks,[f,g,w,v]);const O=u(w/2,v/2),R=Je._round(f+O[0]),V=Je._round(g+O[1]),z=u(S/2,I/2);this.x=R-z[0],this.y=V-z[1],this.width=S,this.height=I,this.setDims(),this.fixAndSetPosition(),this._onResizing()},pL=function(){var e;(e=c(this,Zt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),P(this,$e,RA).call(this)},pC=function(e){const{isMac:t}=qn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},fL=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:i},u=h=>{r.abort(),x(this,Wc,null),x(this,Vd,!1),this._uiManager.endDragSession()||P(this,$e,pC).call(this,h),n&&this._onStopDragging()};t&&(x(this,Bf,e.clientX),x(this,Vf,e.clientY),x(this,Wc,e.pointerId),x(this,My,e.pointerType),window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:g,pointerId:w}=h;if(w!==c(this,Wc)){yn(h);return}const[v,F]=this.screenToPageTranslation(f-c(this,Bf),g-c(this,Vf));x(this,Bf,f),x(this,Vf,g),this._uiManager.dragSelectedEditors(v,F)},a),window.addEventListener("touchmove",yn,a),window.addEventListener("pointerdown",h=>{h.pointerType===c(this,My)&&(c(this,jd)||h.isPrimary)&&u(h),yn(h)},a));const d=h=>{if(!c(this,Wc)||c(this,Wc)===h.pointerId){u(h);return}yn(h)};window.addEventListener("pointerup",d,{signal:i}),window.addEventListener("blur",d,{signal:i})},fC=function(){if(c(this,Gc)||!this.div)return;x(this,Gc,new AbortController);const e=this._uiManager.combinedSignal(c(this,Gc));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},mL=function(e){Je._resizerKeyboardManager.exec(this,e)},gL=function(e){var t;c(this,Zo)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,dr)&&P(this,$e,Fg).call(this)},yL=function(e){x(this,Ly,c(this,Zo)?e:"")},mC=function(e){if(c(this,Hi))for(const t of c(this,Hi))t.tabIndex=e},Fg=function(){x(this,Zo,!1),P(this,$e,mC).call(this,-1),P(this,$e,RA).call(this)},T(Je,Vy),ae(Je,"_l10n",null),ae(Je,"_l10nResizer",null),ae(Je,"_borderLineWidth",-1),ae(Je,"_colorManager",new rC),ae(Je,"_zIndex",1),ae(Je,"_telemetryTimeout",1e3);let Ht=Je;class bG extends Ht{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const TR=3285377520,li=4294901760,Ia=65535;class wL{constructor(e){this.h1=e?e&4294967295:TR,this.h2=e?e&4294967295:TR}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let C=0,S=e.length;C<S;C++){const I=e.charCodeAt(C);I<=255?t[n++]=I:(t[n++]=I>>>8,t[n++]=I&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,i=n-r*4,a=new Uint32Array(t.buffer,0,r);let u=0,d=0,h=this.h1,f=this.h2;const g=3432918353,w=461845907,v=g&Ia,F=w&Ia;for(let C=0;C<r;C++)C&1?(u=a[C],u=u*g&li|u*v&Ia,u=u<<15|u>>>17,u=u*w&li|u*F&Ia,h^=u,h=h<<13|h>>>19,h=h*5+3864292196):(d=a[C],d=d*g&li|d*v&Ia,d=d<<15|d>>>17,d=d*w&li|d*F&Ia,f^=d,f=f<<13|f>>>19,f=f*5+3864292196);switch(u=0,i){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*g&li|u*v&Ia,u=u<<15|u>>>17,u=u*w&li|u*F&Ia,r&1?h^=u:f^=u}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&li|e*36045&Ia,t=t*4283543511&li|((t<<16|e>>>16)*2950163797&li)>>>16,e^=t>>>1,e=e*444984403&li|e*60499&Ia,t=t*3301882366&li|((t<<16|e>>>16)*3120437893&li)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const gC=Object.freeze({map:null,hash:"",transfer:void 0});var $d,zd,el,hr,q_,vL;class zS{constructor(){T(this,q_);T(this,$d,!1);T(this,zd,null);T(this,el,null);T(this,hr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=c(this,hr).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return c(this,hr).get(e)}remove(e){const t=c(this,hr).get(e);if(t!==void 0&&(t instanceof Ht&&c(this,el).delete(t.annotationElementId),c(this,hr).delete(e),c(this,hr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of c(this,hr).values())if(n instanceof Ht)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=c(this,hr).get(e);let r=!1;if(n!==void 0)for(const[i,a]of Object.entries(t))n[i]!==a&&(r=!0,n[i]=a);else r=!0,c(this,hr).set(e,t);r&&P(this,q_,vL).call(this),t instanceof Ht&&((c(this,el)||x(this,el,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return c(this,hr).has(e)}get size(){return c(this,hr).size}resetModified(){c(this,$d)&&(x(this,$d,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new AL(this)}get serializable(){if(c(this,hr).size===0)return gC;const e=new Map,t=new wL,n=[],r=Object.create(null);let i=!1;for(const[a,u]of c(this,hr)){const d=u instanceof Ht?u.serialize(!1,r):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(e.set(a,d),t.update(`${a}:${JSON.stringify(d)}`),i||(i=!!d.bitmap))}if(i)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:gC}get editorStats(){let e=null;const t=new Map;let n=0,r=0;for(const i of c(this,hr).values()){if(!(i instanceof Ht)){i.popup&&(i.popup.deleted?r+=1:n+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(n+=1);const a=i.telemetryFinalData;if(!a)continue;const{type:u}=a;t.has(u)||t.set(u,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const d=e[u]||(e[u]=new Map);for(const[h,f]of Object.entries(a)){if(h==="type")continue;let g=d.get(h);g||(g=new Map,d.set(h,g));const w=g.get(f)??0;g.set(f,w+1)}}if((r>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:n}),!e)return null;for(const[i,a]of t)e[i]=a.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){x(this,zd,null)}updateEditor(e,t){var r;const n=(r=c(this,el))==null?void 0:r.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=c(this,el))==null?void 0:t.get(e))||null}get modifiedIds(){if(c(this,zd))return c(this,zd);const e=[];if(c(this,el))for(const t of c(this,el).values())t.serialize()&&e.push(t.annotationElementId);return x(this,zd,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(this,hr).entries()}}$d=new WeakMap,zd=new WeakMap,el=new WeakMap,hr=new WeakMap,q_=new WeakSet,vL=function(){c(this,$d)||(x(this,$d,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Uy;class AL extends zS{constructor(t){super();T(this,Uy);const{map:n,hash:r,transfer:i}=t.serializable,a=structuredClone(n,i?{transfer:i}:null);x(this,Uy,{map:a,hash:r,transfer:i})}get print(){xt("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Uy)}get modifiedIds(){return Xe(this,"modifiedIds",{ids:new Set,hash:""})}}Uy=new WeakMap;var Uf;class CG{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){T(this,Uf,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Uf).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||c(this,Uf).has(e.loadedName))){if(_t(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:a}=e,u=new FontFace(r,i,a);this.addNativeFontFace(u);try{await u.load(),c(this,Uf).add(r),n==null||n(e)}catch{Ke(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}xt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Ke(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Xe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Xe(this,"isSyncFontLoadingSupported",Gr||qn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(_t(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Xe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(V,z){return V.charCodeAt(z)<<24|V.charCodeAt(z+1)<<16|V.charCodeAt(z+2)<<8|V.charCodeAt(z+3)&255}function r(V,z,W,N){const D=V.substring(0,z),L=V.substring(z+W);return D+N+L}let i,a;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let h=0;function f(V,z){if(++h>30){Ke("Load test font never loaded."),z();return}if(d.font="30px "+V,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(f.bind(null,V,z))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,g.length,g);const F=16,C=1482184792;let S=n(w,F);for(i=0,a=g.length-3;i<a;i+=4)S=S-C+n(g,i)|0;i<g.length&&(S=S-C+n(g+"XXX",i)|0),w=r(w,F,4,aG(S));const I=`url(data:font/opentype;base64,${btoa(w)});`,O=`@font-face {font-family:"${g}";src:${I}}`;this.insertRule(O);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const V of[e.loadedName,g]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=V,R.append(z)}this._document.body.append(R),f(g,()=>{R.remove(),t.complete()})}}Uf=new WeakMap;var Pt;class FG{constructor(e,t=null,n,r){T(this,Pt);this.compiledGlyphs=Object.create(null),x(this,Pt,e),this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(a){Ke(`getPathGenerator - ignoring character: "${a}".`)}const i=BM(r==null?void 0:r.path);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}get black(){return c(this,Pt).black}get bold(){return c(this,Pt).bold}get disableFontFace(){return c(this,Pt).disableFontFace??!1}set disableFontFace(e){Xe(this,"disableFontFace",!!e)}get fontExtraProperties(){return c(this,Pt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,Pt).isInvalidPDFjsFont}get isType3Font(){return c(this,Pt).isType3Font}get italic(){return c(this,Pt).italic}get missingFile(){return c(this,Pt).missingFile}get remeasure(){return c(this,Pt).remeasure}get vertical(){return c(this,Pt).vertical}get ascent(){return c(this,Pt).ascent}get defaultWidth(){return c(this,Pt).defaultWidth}get descent(){return c(this,Pt).descent}get bbox(){return c(this,Pt).bbox}set bbox(e){Xe(this,"bbox",e)}get fontMatrix(){return c(this,Pt).fontMatrix}get fallbackName(){return c(this,Pt).fallbackName}get loadedName(){return c(this,Pt).loadedName}get mimetype(){return c(this,Pt).mimetype}get name(){return c(this,Pt).name}get data(){return c(this,Pt).data}clearData(){c(this,Pt).clearData()}get cssFontInfo(){return c(this,Pt).cssFontInfo}get systemFontInfo(){return c(this,Pt).systemFontInfo}get defaultVMetrics(){return c(this,Pt).defaultVMetrics}}Pt=new WeakMap;var jf,$f,jy,zf,DA;const lf=class lf{constructor(e){T(this,zf);T(this,jf);T(this,$f);T(this,jy);x(this,jf,e),x(this,$f,new DataView(c(this,jf))),x(this,jy,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const h of lf.strings){const f=t.encode(e[h]);n[h]=f,r+=4+f.length}const i=new ArrayBuffer(r),a=new Uint8Array(i),u=new DataView(i);let d=0;for(const h of lf.strings){const f=n[h],g=f.length;u.setUint32(d,g),a.set(f,d+4),d+=4+g}return _t(d===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return P(this,zf,DA).call(this,0)}get fontWeight(){return P(this,zf,DA).call(this,1)}get italicAngle(){return P(this,zf,DA).call(this,2)}};jf=new WeakMap,$f=new WeakMap,jy=new WeakMap,zf=new WeakSet,DA=function(e){_t(e<lf.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=c(this,$f).getUint32(t)+4;const n=c(this,$f).getUint32(t);return c(this,jy).decode(new Uint8Array(c(this,jf),t+4,n))},ae(lf,"strings",["fontFamily","fontWeight","italicAngle"]);let R_=lf;var qc,$a,Hd,Wd,Sg;const cf=class cf{constructor(e){T(this,Wd);T(this,qc);T(this,$a);T(this,Hd);x(this,qc,e),x(this,$a,new DataView(c(this,qc))),x(this,Hd,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const w of cf.strings){const v=t.encode(e[w]);n[w]=v,r+=4+v.length}r+=4;let i,a,u=1+r;e.style&&(i=t.encode(e.style.style),a=t.encode(e.style.weight),u+=4+i.length+4+a.length);const d=new ArrayBuffer(u),h=new Uint8Array(d),f=new DataView(d);let g=0;f.setUint8(g++,e.guessFallback?1:0),f.setUint32(g,0),g+=4,r=0;for(const w of cf.strings){const v=n[w],F=v.length;r+=4+F,f.setUint32(g,F),h.set(v,g+4),g+=4+F}return f.setUint32(g-r-4,r),e.style&&(f.setUint32(g,i.length),h.set(i,g+4),g+=4+i.length,f.setUint32(g,a.length),h.set(a,g+4),g+=4+a.length),_t(g<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(g)}get guessFallback(){return c(this,$a).getUint8(0)!==0}get css(){return P(this,Wd,Sg).call(this,0)}get loadedName(){return P(this,Wd,Sg).call(this,1)}get baseFontName(){return P(this,Wd,Sg).call(this,2)}get src(){return P(this,Wd,Sg).call(this,3)}get style(){let e=1;e+=4+c(this,$a).getUint32(e);const t=c(this,$a).getUint32(e),n=c(this,Hd).decode(new Uint8Array(c(this,qc),e+4,t));e+=4+t;const r=c(this,$a).getUint32(e),i=c(this,Hd).decode(new Uint8Array(c(this,qc),e+4,r));return{style:n,weight:i}}};qc=new WeakMap,$a=new WeakMap,Hd=new WeakMap,Wd=new WeakSet,Sg=function(e){_t(e<cf.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=c(this,$a).getUint32(t)+4;const n=c(this,$a).getUint32(t);return c(this,Hd).decode(new Uint8Array(c(this,qc),t+4,n))},ae(cf,"strings",["css","loadedName","baseFontName","src"]);let D_=cf;var Hf,Wf,Gf,qf,Is,za,$y,Rt,gn,Ui,NA,Tg;const et=class et{constructor({data:e,extra:t}){T(this,gn);T(this,za);T(this,$y);T(this,Rt);x(this,za,e),x(this,$y,new TextDecoder),x(this,Rt,new DataView(c(this,za))),t&&Object.assign(this,t)}get black(){return P(this,gn,Ui).call(this,0)}get bold(){return P(this,gn,Ui).call(this,1)}get disableFontFace(){return P(this,gn,Ui).call(this,2)}get fontExtraProperties(){return P(this,gn,Ui).call(this,3)}get isInvalidPDFjsFont(){return P(this,gn,Ui).call(this,4)}get isType3Font(){return P(this,gn,Ui).call(this,5)}get italic(){return P(this,gn,Ui).call(this,6)}get missingFile(){return P(this,gn,Ui).call(this,7)}get remeasure(){return P(this,gn,Ui).call(this,8)}get vertical(){return P(this,gn,Ui).call(this,9)}get ascent(){return P(this,gn,NA).call(this,0)}get defaultWidth(){return P(this,gn,NA).call(this,1)}get descent(){return P(this,gn,NA).call(this,2)}get bbox(){let e=c(et,Wf);if(c(this,Rt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<4;r++)n.push(c(this,Rt).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=c(et,Gf);if(c(this,Rt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<6;r++)n.push(c(this,Rt).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=c(et,qf);if(c(this,Rt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<3;r++)n.push(c(this,Rt).getInt16(e,!0)),e+=2;return n}get fallbackName(){return P(this,gn,Tg).call(this,0)}get loadedName(){return P(this,gn,Tg).call(this,1)}get mimetype(){return P(this,gn,Tg).call(this,2)}get name(){return P(this,gn,Tg).call(this,3)}get data(){let e=c(et,Is);const t=c(this,Rt).getUint32(e);e+=4+t;const n=c(this,Rt).getUint32(e);e+=4+n;const r=c(this,Rt).getUint32(e);e+=4+r;const i=c(this,Rt).getUint32(e);if(i!==0)return new Uint8Array(c(this,za),e+4,i)}clearData(){let e=c(et,Is);const t=c(this,Rt).getUint32(e);e+=4+t;const n=c(this,Rt).getUint32(e);e+=4+n;const r=c(this,Rt).getUint32(e);e+=4+r;const i=c(this,Rt).getUint32(e);new Uint8Array(c(this,za),e+4,i).fill(0),c(this,Rt).setUint32(e,0)}get cssFontInfo(){let e=c(et,Is);const t=c(this,Rt).getUint32(e);e+=4+t;const n=c(this,Rt).getUint32(e);e+=4+n;const r=c(this,Rt).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(c(this,za),e+4,r)),new R_(i.buffer)}get systemFontInfo(){let e=c(et,Is);const t=c(this,Rt).getUint32(e);e+=4+t;const n=c(this,Rt).getUint32(e);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(c(this,za),e+4,n)),new D_(r.buffer)}static write(e){const t=e.systemFontInfo?D_.write(e.systemFontInfo):null,n=e.cssFontInfo?R_.write(e.cssFontInfo):null,r=new TextEncoder,i={};let a=0;for(const C of et.strings)i[C]=r.encode(e[C]),a+=4+i[C].length;const u=c(et,Is)+4+a+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),d=new ArrayBuffer(u),h=new Uint8Array(d),f=new DataView(d);let g=0;const w=et.bools.length;let v=0,F=0;for(let C=0;C<w;C++){const S=e[et.bools[C]];v|=(S===void 0?0:S?2:1)<<F,F+=2,(F===8||C===w-1)&&(f.setUint8(g++,v),v=0,F=0)}_t(g===c(et,Hf),"FontInfo.write: Boolean properties offset mismatch");for(const C of et.numbers)f.setFloat64(g,e[C]),g+=8;if(_t(g===c(et,Wf),"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(g++,4);for(const C of e.bbox)f.setInt16(g,C,!0),g+=2}else f.setUint8(g++,0),g+=8;if(_t(g===c(et,Gf),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(g++,6);for(const C of e.fontMatrix)f.setFloat64(g,C,!0),g+=8}else f.setUint8(g++,0),g+=48;if(_t(g===c(et,qf),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(g++,1);for(const C of e.defaultVMetrics)f.setInt16(g,C,!0),g+=2}else f.setUint8(g++,0),g+=6;_t(g===c(et,Is),"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(c(et,Is),0),g+=4;for(const C of et.strings){const S=i[C],I=S.length;f.setUint32(g,I),h.set(S,g+4),g+=4+I}if(f.setUint32(c(et,Is),g-c(et,Is)-4),!t)f.setUint32(g,0),g+=4;else{const C=t.byteLength;f.setUint32(g,C),_t(g+4+C<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),g+4),g+=4+C}if(!n)f.setUint32(g,0),g+=4;else{const C=n.byteLength;f.setUint32(g,C),_t(g+4+C<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),g+4),g+=4+C}return e.data===void 0?(f.setUint32(g,0),g+=4):(f.setUint32(g,e.data.length),h.set(e.data,g+4),g+=4+e.data.length),_t(g<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(g)}};Hf=new WeakMap,Wf=new WeakMap,Gf=new WeakMap,qf=new WeakMap,Is=new WeakMap,za=new WeakMap,$y=new WeakMap,Rt=new WeakMap,gn=new WeakSet,Ui=function(e){_t(e<et.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,r=c(this,Rt).getUint8(t)>>n&3;return r===0?void 0:r===2},NA=function(e){return _t(e<et.numbers.length,"Invalid number index"),c(this,Rt).getFloat64(c(et,Hf)+e*8)},Tg=function(e){_t(e<et.strings.length,"Invalid string index");let t=c(et,Is)+4;for(let i=0;i<e;i++)t+=c(this,Rt).getUint32(t)+4;const n=c(this,Rt).getUint32(t),r=new Uint8Array(n);return r.set(new Uint8Array(c(this,za),t+4,n)),c(this,$y).decode(r)},ae(et,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),ae(et,"numbers",["ascent","defaultWidth","descent"]),ae(et,"strings",["fallbackName","loadedName","mimetype","name"]),T(et,Hf,Math.ceil(et.bools.length*2/8)),T(et,Wf,c(et,Hf)+et.numbers.length*8),T(et,Gf,c(et,Wf)+1+8),T(et,qf,c(et,Gf)+1+48),T(et,Is,c(et,qf)+1+6);let yC=et;var zy,Hy,Wy,Gy,qy,Qy,Ky,Xy;const jt=class jt{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,r=[],i=[],a=[],u=[],d=null,h=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],a=e[3],t===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,d=e[1],r=e[2],i=e[3],u=e[4]||[],n=e[6],h=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const f=Math.floor(r.length/2),g=Math.floor(i.length/3),w=a.length,v=u.length;let F=0;for(const z of u)F+=1,F=Math.ceil(F/4)*4,F+=4+z.coords.length*4,F+=4+z.colors.length*4,z.verticesPerRow!==void 0&&(F+=4);const C=20+f*8+g*3+w*8+(n?16:0)+(h?3:0)+F,S=new ArrayBuffer(C),I=new DataView(S),O=new Uint8Array(S);I.setUint8(c(jt,zy),t),I.setUint8(c(jt,Hy),n?1:0),I.setUint8(c(jt,Wy),h?1:0),I.setUint8(c(jt,Gy),d),I.setUint32(c(jt,qy),f,!0),I.setUint32(c(jt,Qy),g,!0),I.setUint32(c(jt,Ky),w,!0),I.setUint32(c(jt,Xy),v,!0);let R=20;new Float32Array(S,R,f*2).set(r),R+=f*8,O.set(i,R),R+=g*3;for(const[z,W]of a)I.setFloat32(R,z,!0),R+=4,I.setUint32(R,parseInt(W.slice(1),16),!0),R+=4;if(n)for(const z of n)I.setFloat32(R,z,!0),R+=4;h&&(O.set(h,R),R+=3);for(let z=0;z<u.length;z++){const W=u[z];I.setUint8(R,W.type),R+=1,R=Math.ceil(R/4)*4,I.setUint32(R,W.coords.length,!0),R+=4,new Int32Array(S,R,W.coords.length).set(W.coords),R+=W.coords.length*4,I.setUint32(R,W.colors.length,!0),R+=4,new Int32Array(S,R,W.colors.length).set(W.colors),R+=W.colors.length*4,W.verticesPerRow!==void 0&&(I.setUint32(R,W.verticesPerRow,!0),R+=4)}return S}getIR(){const e=this.view,t=this.data[c(jt,zy)],n=!!this.data[c(jt,Hy)],r=!!this.data[c(jt,Wy)],i=e.getUint32(c(jt,qy),!0),a=e.getUint32(c(jt,Qy),!0),u=e.getUint32(c(jt,Ky),!0),d=e.getUint32(c(jt,Xy),!0);let h=20;const f=new Float32Array(this.buffer,h,i*2);h+=i*8;const g=new Uint8Array(this.buffer,h,a*3);h+=a*3;const w=[];for(let S=0;S<u;++S){const I=e.getFloat32(h,!0);h+=4;const O=e.getUint32(h,!0);h+=4,w.push([I,`#${O.toString(16).padStart(6,"0")}`])}let v=null;if(n){v=[];for(let S=0;S<4;++S)v.push(e.getFloat32(h,!0)),h+=4}let F=null;r&&(F=new Uint8Array(this.buffer,h,3),h+=3);const C=[];for(let S=0;S<d;++S){const I=e.getUint8(h);h+=1,h=Math.ceil(h/4)*4;const O=e.getUint32(h,!0);h+=4;const R=new Int32Array(this.buffer,h,O);h+=O*4;const V=e.getUint32(h,!0);h+=4;const z=new Int32Array(this.buffer,h,V);h+=V*4;const W={type:I,coords:R,colors:z};I===Kb.LATTICE&&(W.verticesPerRow=e.getUint32(h,!0),h+=4),C.push(W)}if(t===1)return["RadialAxial","axial",v,w,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",v,w,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(t===3){const S=this.data[c(jt,Gy)];let I=null;if(f.length>0){let O=f[0],R=f[0],V=f[1],z=f[1];for(let W=0;W<f.length;W+=2){const N=f[W],D=f[W+1];O=O>N?N:O,V=V>D?D:V,R=R<N?N:R,z=z<D?D:z}I=[O,V,R,z]}return["Mesh",S,f,g,C,I,v,F]}throw new Error(`Unsupported pattern kind: ${t}`)}};zy=new WeakMap,Hy=new WeakMap,Wy=new WeakMap,Gy=new WeakMap,qy=new WeakMap,Qy=new WeakMap,Ky=new WeakMap,Xy=new WeakMap,T(jt,zy,0),T(jt,Hy,1),T(jt,Wy,2),T(jt,Gy,3),T(jt,qy,4),T(jt,Qy,8),T(jt,Ky,12),T(jt,Xy,16);let wC=jt;var Qf;class SG{constructor(e){T(this,Qf);x(this,Qf,e)}static write(e){let t,n;return qn.isFloat16ArraySupported?(n=new ArrayBuffer(e.length*2),t=new Float16Array(n)):(n=new ArrayBuffer(e.length*4),t=new Float32Array(n)),t.set(e),n}get path(){return qn.isFloat16ArraySupported?new Float16Array(c(this,Qf)):new Float32Array(c(this,Qf))}}Qf=new WeakMap;function TG(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(Gr)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function kG(s){if(Gr&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Ux(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function iA(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const vC=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,IG=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",PG=dG.bind(null,vC,IG);var tl,Q_;class RG{constructor(){T(this,tl,new Map);T(this,Q_,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};c(this,Q_).then(()=>{for(const[r]of c(this,tl))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){Ke("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}c(this,tl).set(t,r)}removeEventListener(e,t){const n=c(this,tl).get(t);n==null||n(),c(this,tl).delete(t)}terminate(){for(const[,e]of c(this,tl))e==null||e();c(this,tl).clear()}}tl=new WeakMap,Q_=new WeakMap;const aA={DATA:1,ERROR:2},Pn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function kR(){}function ns(s){if(s instanceof Mu||s instanceof Xb||s instanceof _R||s instanceof T_||s instanceof WE)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||xt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Mu(s.message);case"InvalidPDFException":return new Xb(s.message);case"PasswordException":return new _R(s.message,s.code);case"ResponseException":return new T_(s.message,s.status,s.missing);case"UnknownErrorException":return new WE(s.message,s.details)}return new WE(s.message,s.toString())}var Kf,Si,_L,xL,EL,MA;class kg{constructor(e,t,n){T(this,Si);T(this,Kf,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",P(this,Si,_L).bind(this),{signal:c(this,Kf).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,a=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:a,targetName:u,action:e,streamId:i,data:t,desiredSize:h.desiredSize},r),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[i].pullCall=f,d.postMessage({sourceName:a,targetName:u,stream:Pn.PULL,streamId:i,desiredSize:h.desiredSize}),f.promise},cancel:h=>{_t(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[i].cancelCall=f,this.streamControllers[i].isClosed=!0,d.postMessage({sourceName:a,targetName:u,stream:Pn.CANCEL,streamId:i,reason:ns(h)}),f.promise}},n)}destroy(){var e;(e=c(this,Kf))==null||e.abort(),x(this,Kf,null)}}Kf=new WeakMap,Si=new WeakSet,_L=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){P(this,Si,EL).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===aA.DATA)r.resolve(e.data);else if(e.callback===aA.ERROR)r.reject(ns(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:n,targetName:r,callback:aA.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:n,targetName:r,callback:aA.ERROR,callbackId:e.callbackId,reason:ns(a)})});return}if(e.streamId){P(this,Si,xL).call(this,e);return}t(e.data)},xL=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this,u=this.actionHandler[e.action],d={enqueue(h,f=1,g){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=f,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:Pn.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Pn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){_t(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Pn.ERROR,streamId:t,reason:ns(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(u,e.data,d).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Pn.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Pn.START_COMPLETE,streamId:t,reason:ns(h)})})},EL=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case Pn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ns(e.reason));break;case Pn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ns(e.reason));break;case Pn.PULL:if(!u){i.postMessage({sourceName:n,targetName:r,stream:Pn.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||kR).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Pn.PULL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Pn.PULL_COMPLETE,streamId:t,reason:ns(h)})});break;case Pn.ENQUEUE:if(_t(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Pn.CLOSE:if(_t(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),P(this,Si,MA).call(this,a,t);break;case Pn.ERROR:_t(a,"error should have stream controller"),a.controller.error(ns(e.reason)),P(this,Si,MA).call(this,a,t);break;case Pn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ns(e.reason)),P(this,Si,MA).call(this,a,t);break;case Pn.CANCEL:if(!u)break;const d=ns(e.reason);Promise.try(u.onCancel||kR,d).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Pn.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Pn.CANCEL_COMPLETE,streamId:t,reason:ns(h)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},MA=async function(e,t){var n,r,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Yy;class bL{constructor({enableHWA:e=!1}){T(this,Yy,!1);x(this,Yy,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,Yy)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){xt("Abstract method `_createCanvas` called.")}}Yy=new WeakMap;class DG extends bL{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class CL{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){xt("Abstract method `_fetch` called.")}}class IR extends CL{async _fetch(e){const t=await S0(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Ux(t)}}class FL{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(e=!1){}}var Gd,Xf,nl,rl,Rr,qd,Qd,Ie,Tr,Ig,Yp,LA,Jp,SL,AC,Zp,Pg,Rg,_C,Dg;class NG extends FL{constructor({docId:t,ownerDocument:n=globalThis.document}){super();T(this,Ie);T(this,Gd);T(this,Xf);T(this,nl);T(this,rl);T(this,Rr);T(this,qd);T(this,Qd,0);x(this,rl,t),x(this,Rr,n)}addFilter(t){if(!t)return"none";let n=c(this,Ie,Tr).get(t);if(n)return n;const[r,i,a]=P(this,Ie,LA).call(this,t),u=t.length===1?r:`${r}${i}${a}`;if(n=c(this,Ie,Tr).get(u),n)return c(this,Ie,Tr).set(t,n),n;const d=`g_${c(this,rl)}_transfer_map_${jn(this,Qd)._++}`,h=P(this,Ie,Jp).call(this,d);c(this,Ie,Tr).set(t,h),c(this,Ie,Tr).set(u,h);const f=P(this,Ie,Zp).call(this,d);return P(this,Ie,Rg).call(this,r,i,a,f),h}addHCMFilter(t,n){var F;const r=`${t}-${n}`,i="base";let a=c(this,Ie,Ig).get(i);if((a==null?void 0:a.key)===r||(a?((F=a.filter)==null||F.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},c(this,Ie,Ig).set(i,a)),!t||!n))return a.url;const u=P(this,Ie,Dg).call(this,t);t=Fe.makeHexColor(...u);const d=P(this,Ie,Dg).call(this,n);if(n=Fe.makeHexColor(...d),c(this,Ie,Yp).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const h=new Array(256);for(let C=0;C<=255;C++){const S=C/255;h[C]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const f=h.join(","),g=`g_${c(this,rl)}_hcm_filter`,w=a.filter=P(this,Ie,Zp).call(this,g);P(this,Ie,Rg).call(this,f,f,f,w),P(this,Ie,AC).call(this,w);const v=(C,S)=>{const I=u[C]/255,O=d[C]/255,R=new Array(S+1);for(let V=0;V<=S;V++)R[V]=I+V/S*(O-I);return R.join(",")};return P(this,Ie,Rg).call(this,v(0,5),v(1,5),v(2,5),w),a.url=P(this,Ie,Jp).call(this,g),a.url}addAlphaFilter(t){let n=c(this,Ie,Tr).get(t);if(n)return n;const[r]=P(this,Ie,LA).call(this,[t]),i=`alpha_${r}`;if(n=c(this,Ie,Tr).get(i),n)return c(this,Ie,Tr).set(t,n),n;const a=`g_${c(this,rl)}_alpha_map_${jn(this,Qd)._++}`,u=P(this,Ie,Jp).call(this,a);c(this,Ie,Tr).set(t,u),c(this,Ie,Tr).set(i,u);const d=P(this,Ie,Zp).call(this,a);return P(this,Ie,_C).call(this,r,d),u}addLuminosityFilter(t){let n=c(this,Ie,Tr).get(t||"luminosity");if(n)return n;let r,i;if(t?([r]=P(this,Ie,LA).call(this,[t]),i=`luminosity_${r}`):i="luminosity",n=c(this,Ie,Tr).get(i),n)return c(this,Ie,Tr).set(t,n),n;const a=`g_${c(this,rl)}_luminosity_map_${jn(this,Qd)._++}`,u=P(this,Ie,Jp).call(this,a);c(this,Ie,Tr).set(t,u),c(this,Ie,Tr).set(i,u);const d=P(this,Ie,Zp).call(this,a);return P(this,Ie,SL).call(this,d),t&&P(this,Ie,_C).call(this,r,d),u}addHighlightHCMFilter(t,n,r,i,a){var O;const u=`${n}-${r}-${i}-${a}`;let d=c(this,Ie,Ig).get(t);if((d==null?void 0:d.key)===u||(d?((O=d.filter)==null||O.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},c(this,Ie,Ig).set(t,d)),!n||!r))return d.url;const[h,f]=[n,r].map(P(this,Ie,Dg).bind(this));let g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),w=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,F]=[i,a].map(P(this,Ie,Dg).bind(this));w<g&&([g,w,v,F]=[w,g,F,v]),c(this,Ie,Yp).style.color="";const C=(R,V,z)=>{const W=new Array(256),N=(w-g)/z,D=R/255,L=(V-R)/(255*z);let U=0;for(let $=0;$<=z;$++){const Q=Math.round(g+$*N),j=D+$*L;for(let me=U;me<=Q;me++)W[me]=j;U=Q+1}for(let $=U;$<256;$++)W[$]=W[U-1];return W.join(",")},S=`g_${c(this,rl)}_hcm_${t}_filter`,I=d.filter=P(this,Ie,Zp).call(this,S);return P(this,Ie,AC).call(this,I),P(this,Ie,Rg).call(this,C(v[0],F[0],5),C(v[1],F[1],5),C(v[2],F[2],5),I),d.url=P(this,Ie,Jp).call(this,S),d.url}destroy(t=!1){var n,r,i,a;t&&((n=c(this,qd))!=null&&n.size)||((r=c(this,nl))==null||r.parentNode.parentNode.remove(),x(this,nl,null),(i=c(this,Xf))==null||i.clear(),x(this,Xf,null),(a=c(this,qd))==null||a.clear(),x(this,qd,null),x(this,Qd,0))}}Gd=new WeakMap,Xf=new WeakMap,nl=new WeakMap,rl=new WeakMap,Rr=new WeakMap,qd=new WeakMap,Qd=new WeakMap,Ie=new WeakSet,Tr=function(){return c(this,Xf)||x(this,Xf,new Map)},Ig=function(){return c(this,qd)||x(this,qd,new Map)},Yp=function(){if(!c(this,nl)){const t=c(this,Rr).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=c(this,Rr).createElementNS(Bo,"svg");r.setAttribute("width",0),r.setAttribute("height",0),x(this,nl,c(this,Rr).createElementNS(Bo,"defs")),t.append(r),r.append(c(this,nl)),c(this,Rr).body.append(t)}return c(this,nl)},LA=function(t){if(t.length===1){const h=t[0],f=new Array(256);for(let w=0;w<256;w++)f[w]=h[w]/255;const g=f.join(",");return[g,g,g]}const[n,r,i]=t,a=new Array(256),u=new Array(256),d=new Array(256);for(let h=0;h<256;h++)a[h]=n[h]/255,u[h]=r[h]/255,d[h]=i[h]/255;return[a.join(","),u.join(","),d.join(",")]},Jp=function(t){if(c(this,Gd)===void 0){x(this,Gd,"");const n=c(this,Rr).URL;n!==c(this,Rr).baseURI&&(jx(n)?Ke('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Gd,NM(n,"")))}return`url(${c(this,Gd)}#${t})`},SL=function(t){const n=c(this,Rr).createElementNS(Bo,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},AC=function(t){const n=c(this,Rr).createElementNS(Bo,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Zp=function(t){const n=c(this,Rr).createElementNS(Bo,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),c(this,Ie,Yp).append(n),n},Pg=function(t,n,r){const i=c(this,Rr).createElementNS(Bo,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Rg=function(t,n,r,i){const a=c(this,Rr).createElementNS(Bo,"feComponentTransfer");i.append(a),P(this,Ie,Pg).call(this,a,"feFuncR",t),P(this,Ie,Pg).call(this,a,"feFuncG",n),P(this,Ie,Pg).call(this,a,"feFuncB",r)},_C=function(t,n){const r=c(this,Rr).createElementNS(Bo,"feComponentTransfer");n.append(r),P(this,Ie,Pg).call(this,r,"feFuncA",t)},Dg=function(t){return c(this,Ie,Yp).style.color=t,k0(getComputedStyle(c(this,Ie,Yp)).getPropertyValue("color"))};class TL{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){xt("Abstract method `_fetch` called.")}}class PR extends TL{async _fetch(e){const t=await S0(e,"arraybuffer");return new Uint8Array(t)}}class kL{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){xt("Abstract method `_fetch` called.")}}class RR extends kL{async _fetch(e){const t=await S0(e,"arraybuffer");return new Uint8Array(t)}}Gr&&Ke("Please use the `legacy` build in Node.js environments.");async function HS(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class MG extends FL{}class LG extends bL{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class OG extends CL{async _fetch(e){return HS(e)}}class BG extends TL{async _fetch(e){return HS(e)}}class VG extends kL{async _fetch(e){return HS(e)}}const Wp="__forcedDependency",{floor:DR,ceil:NR}=Math;function oA(s,e,t,n,r,i){s[e*4+0]=Math.min(s[e*4+0],t),s[e*4+1]=Math.min(s[e*4+1],n),s[e*4+2]=Math.max(s[e*4+2],r),s[e*4+3]=Math.max(s[e*4+3],i)}const xC=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Yf,Qc;class UG{constructor(e,t){T(this,Yf);T(this,Qc);x(this,Yf,e),x(this,Qc,t)}get length(){return c(this,Yf).length}isEmpty(e){return c(this,Yf)[e]===xC}minX(e){return c(this,Qc)[e*4+0]/256}minY(e){return c(this,Qc)[e*4+1]/256}maxX(e){return(c(this,Qc)[e*4+2]+1)/256}maxY(e){return(c(this,Qc)[e*4+3]+1)/256}}Yf=new WeakMap,Qc=new WeakMap;const lA=(s,e)=>{if(!s)return;let t=s.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},s.set(e,t)),t};var is,as,Kd,Wi,Xd,sl,kt,Dt,il,os,Jy,Jf,Yd,Jd,al,Dr,Ha,Zy,EC;class jG{constructor(e,t,n=!1){T(this,Zy);T(this,is,{__proto__:null});T(this,as,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Wp]:[]});T(this,Kd,new Map);T(this,Wi,[]);T(this,Xd,[]);T(this,sl,[[1,0,0,1,0,0]]);T(this,kt,[-1/0,-1/0,1/0,1/0]);T(this,Dt,new Float64Array([1/0,1/0,-1/0,-1/0]));T(this,il,-1);T(this,os,new Set);T(this,Jy,new Map);T(this,Jf,new Map);T(this,Yd);T(this,Jd);T(this,al);T(this,Dr);T(this,Ha);x(this,Yd,e.width),x(this,Jd,e.height),P(this,Zy,EC).call(this,t),n&&x(this,Ha,new Map)}growOperationsCount(e){e>=c(this,Dr).length&&P(this,Zy,EC).call(this,e,c(this,Dr))}save(e){return x(this,is,{__proto__:c(this,is)}),x(this,as,{__proto__:c(this,as),transform:{__proto__:c(this,as).transform},moveText:{__proto__:c(this,as).moveText},sameLineText:{__proto__:c(this,as).sameLineText},[Wp]:{__proto__:c(this,as)[Wp]}}),x(this,kt,{__proto__:c(this,kt)}),c(this,Wi).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(c(this,is));if(t===null)return this;x(this,is,t),x(this,as,Object.getPrototypeOf(c(this,as))),x(this,kt,Object.getPrototypeOf(c(this,kt)));const n=c(this,Wi).pop();return n!==void 0&&((r=lA(c(this,Ha),e))==null||r.dependencies.add(n),c(this,Dr)[e]=c(this,Dr)[n]),this}recordOpenMarker(e){return c(this,Wi).push(e),this}getOpenMarker(){return c(this,Wi).length===0?null:c(this,Wi).at(-1)}recordCloseMarker(e){var n;const t=c(this,Wi).pop();return t!==void 0&&((n=lA(c(this,Ha),e))==null||n.dependencies.add(t),c(this,Dr)[e]=c(this,Dr)[t]),this}beginMarkedContent(e){return c(this,Xd).push(e),this}endMarkedContent(e){var n;const t=c(this,Xd).pop();return t!==void 0&&((n=lA(c(this,Ha),e))==null||n.dependencies.add(t),c(this,Dr)[e]=c(this,Dr)[t]),this}pushBaseTransform(e){return c(this,sl).push(Fe.multiplyByDOMMatrix(c(this,sl).at(-1),e.getTransform())),this}popBaseTransform(){return c(this,sl).length>1&&c(this,sl).pop(),this}recordSimpleData(e,t){return c(this,is)[e]=t,this}recordIncrementalData(e,t){return c(this,as)[e].push(t),this}resetIncrementalData(e,t){return c(this,as)[e].length=0,this}recordNamedData(e,t){return c(this,Kd).set(e,t),this}recordSimpleDataFromNamed(e,t,n){c(this,is)[e]=c(this,Kd).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Wp,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in c(this,is)&&this.recordFutureForcedDependency(t,c(this,is)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of c(this,os))this.recordFutureForcedDependency(Wp,e);return this}resetBBox(e){return c(this,il)!==e&&(x(this,il,e),c(this,Dt)[0]=1/0,c(this,Dt)[1]=1/0,c(this,Dt)[2]=-1/0,c(this,Dt)[3]=-1/0),this}recordClipBox(e,t,n,r,i,a){const u=Fe.multiplyByDOMMatrix(c(this,sl).at(-1),t.getTransform()),d=[1/0,1/0,-1/0,-1/0];Fe.axialAlignedBoundingBox([n,i,r,a],u,d);const h=Fe.intersect(c(this,kt),d);return h?(c(this,kt)[0]=h[0],c(this,kt)[1]=h[1],c(this,kt)[2]=h[2],c(this,kt)[3]=h[3]):(c(this,kt)[0]=c(this,kt)[1]=1/0,c(this,kt)[2]=c(this,kt)[3]=-1/0),this}recordBBox(e,t,n,r,i,a){const u=c(this,kt);if(u[0]===1/0)return this;const d=Fe.multiplyByDOMMatrix(c(this,sl).at(-1),t.getTransform());if(u[0]===-1/0)return Fe.axialAlignedBoundingBox([n,i,r,a],d,c(this,Dt)),this;const h=[1/0,1/0,-1/0,-1/0];return Fe.axialAlignedBoundingBox([n,i,r,a],d,h),c(this,Dt)[0]=Math.min(c(this,Dt)[0],Math.max(h[0],u[0])),c(this,Dt)[1]=Math.min(c(this,Dt)[1],Math.max(h[1],u[1])),c(this,Dt)[2]=Math.max(c(this,Dt)[2],Math.min(h[2],u[2])),c(this,Dt)[3]=Math.max(c(this,Dt)[3],Math.min(h[3],u[3])),this}recordCharacterBBox(e,t,n,r=1,i=0,a=0,u){const d=n.bbox;let h,f;if(d&&(h=d[2]!==d[0]&&d[3]!==d[1]&&c(this,Jf).get(n),h!==!1&&(f=[0,0,0,0],Fe.axialAlignedBoundingBox(d,n.fontMatrix,f),(r!==1||i!==0||a!==0)&&Fe.scaleMinMax([r,0,0,-r,i,a],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!u)return this.recordFullPageBBox(e);const g=u();return d&&f&&h===void 0&&(h=f[0]<=i-g.actualBoundingBoxLeft&&f[2]>=i+g.actualBoundingBoxRight&&f[1]<=a-g.actualBoundingBoxAscent&&f[3]>=a+g.actualBoundingBoxDescent,c(this,Jf).set(n,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,i-g.actualBoundingBoxLeft,i+g.actualBoundingBoxRight,a-g.actualBoundingBoxAscent,a+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return c(this,Dt)[0]=Math.max(0,c(this,kt)[0]),c(this,Dt)[1]=Math.max(0,c(this,kt)[1]),c(this,Dt)[2]=Math.min(c(this,Yd),c(this,kt)[2]),c(this,Dt)[3]=Math.min(c(this,Jd),c(this,kt)[3]),this}getSimpleIndex(e){return c(this,is)[e]}recordDependencies(e,t){const n=c(this,os),r=c(this,is),i=c(this,as);for(const a of t)a in c(this,is)?n.add(r[a]):a in i&&i[a].forEach(n.add,n);return this}recordNamedDependency(e,t){return c(this,Kd).has(t)&&c(this,os).add(c(this,Kd).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Wp]),c(this,Ha)){const n=lA(c(this,Ha),e),{dependencies:r}=n;c(this,os).forEach(r.add,r),c(this,Wi).forEach(r.add,r),c(this,Xd).forEach(r.add,r),r.delete(e),n.isRenderingOperation=!0}if(c(this,il)===e){const n=DR(c(this,Dt)[0]*256/c(this,Yd)),r=DR(c(this,Dt)[1]*256/c(this,Jd)),i=NR(c(this,Dt)[2]*256/c(this,Yd)),a=NR(c(this,Dt)[3]*256/c(this,Jd));oA(c(this,al),e,n,r,i,a);for(const u of c(this,os))u!==e&&oA(c(this,al),u,n,r,i,a);for(const u of c(this,Wi))u!==e&&oA(c(this,al),u,n,r,i,a);for(const u of c(this,Xd))u!==e&&oA(c(this,al),u,n,r,i,a);t||(c(this,os).clear(),x(this,il,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(c(this,os));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return c(this,il)===e&&(x(this,il,-1),c(this,kt)[0]=Math.max(c(this,kt)[0],c(this,Dt)[0]),c(this,kt)[1]=Math.max(c(this,kt)[1],c(this,Dt)[1]),c(this,kt)[2]=Math.min(c(this,kt)[2],c(this,Dt)[2]),c(this,kt)[3]=Math.min(c(this,kt)[3],c(this,Dt)[3]),t||c(this,os).clear()),this}_takePendingDependencies(){const e=c(this,os);return x(this,os,new Set),e}_extractOperation(e){const t=c(this,Jy).get(e);return c(this,Jy).delete(e),t}_pushPendingDependencies(e){for(const t of e)c(this,os).add(t)}take(){return c(this,Jf).clear(),new UG(c(this,Dr),c(this,al))}takeDebugMetadata(){return c(this,Ha)}}is=new WeakMap,as=new WeakMap,Kd=new WeakMap,Wi=new WeakMap,Xd=new WeakMap,sl=new WeakMap,kt=new WeakMap,Dt=new WeakMap,il=new WeakMap,os=new WeakMap,Jy=new WeakMap,Jf=new WeakMap,Yd=new WeakMap,Jd=new WeakMap,al=new WeakMap,Dr=new WeakMap,Ha=new WeakMap,Zy=new WeakSet,EC=function(e,t){const n=new ArrayBuffer(e*4);x(this,al,new Uint8ClampedArray(n)),x(this,Dr,new Uint32Array(n)),t&&t.length>0?(c(this,Dr).set(t),c(this,Dr).fill(xC,t.length)):c(this,Dr).fill(xC)};var Ot,pn,Gi,Zf,em;const tT=class tT{constructor(e,t,n){T(this,Ot);T(this,pn);T(this,Gi);T(this,Zf,0);T(this,em,0);if(e instanceof tT&&c(e,Gi)===!!n)return e;x(this,Ot,e),x(this,pn,t),x(this,Gi,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return jn(this,em)._++,c(this,Ot).save(c(this,pn)),this}restore(e){return c(this,em)>0&&(c(this,Ot).restore(c(this,pn)),jn(this,em)._--),this}recordOpenMarker(e){return jn(this,Zf)._++,this}getOpenMarker(){return c(this,Zf)>0?c(this,pn):c(this,Ot).getOpenMarker()}recordCloseMarker(e){return jn(this,Zf)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return c(this,Ot).pushBaseTransform(e),this}popBaseTransform(){return c(this,Ot).popBaseTransform(),this}recordSimpleData(e,t){return c(this,Ot).recordSimpleData(e,c(this,pn)),this}recordIncrementalData(e,t){return c(this,Ot).recordIncrementalData(e,c(this,pn)),this}resetIncrementalData(e,t){return c(this,Ot).resetIncrementalData(e,c(this,pn)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return c(this,Ot).recordSimpleDataFromNamed(e,t,c(this,pn)),this}recordFutureForcedDependency(e,t){return c(this,Ot).recordFutureForcedDependency(e,c(this,pn)),this}inheritSimpleDataAsFutureForcedDependencies(e){return c(this,Ot).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,Ot).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return c(this,Gi)||c(this,Ot).resetBBox(c(this,pn)),this}recordClipBox(e,t,n,r,i,a){return c(this,Gi)||c(this,Ot).recordClipBox(c(this,pn),t,n,r,i,a),this}recordBBox(e,t,n,r,i,a){return c(this,Gi)||c(this,Ot).recordBBox(c(this,pn),t,n,r,i,a),this}recordCharacterBBox(e,t,n,r,i,a,u){return c(this,Gi)||c(this,Ot).recordCharacterBBox(c(this,pn),t,n,r,i,a,u),this}recordFullPageBBox(e){return c(this,Gi)||c(this,Ot).recordFullPageBBox(c(this,pn)),this}getSimpleIndex(e){return c(this,Ot).getSimpleIndex(e)}recordDependencies(e,t){return c(this,Ot).recordDependencies(c(this,pn),t),this}recordNamedDependency(e,t){return c(this,Ot).recordNamedDependency(c(this,pn),t),this}recordOperation(e){return c(this,Ot).recordOperation(c(this,pn),!0),this}recordShowTextOperation(e){return c(this,Ot).recordShowTextOperation(c(this,pn),!0),this}bboxToClipBoxDropOperation(e){return c(this,Gi)||c(this,Ot).bboxToClipBoxDropOperation(c(this,pn),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ot=new WeakMap,pn=new WeakMap,Gi=new WeakMap,Zf=new WeakMap,em=new WeakMap;let N_=tT;const ci={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},yr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function bC(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),s.clip(r)}class WS{isModifyingCurrentTransform(){return!1}getPattern(){xt("Abstract method `getPattern` called.")}}class $G extends WS{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let n,r=this._p0,i=this._p1;if(t&&(r=r.slice(),i=i.slice(),Fe.applyTransform(r,t),Fe.applyTransform(i,t)),this._type==="axial")n=e.createLinearGradient(r[0],r[1],i[0],i[1]);else if(this._type==="radial"){let a=this._r0,u=this._r1;if(t){const d=new Float32Array(2);Fe.singularValueDecompose2dScale(t,d),a*=d[0],u*=d[0]}n=e.createRadialGradient(r[0],r[1],a,i[0],i[1],u)}for(const a of this._colorStops)n.addColorStop(a[0],a[1]);return n}getPattern(e,t,n,r){let i;if(r===yr.STROKE||r===yr.FILL){if(this.isOriginBased()){let w=Fe.transform(n,t.baseTransform);this.matrix&&(w=Fe.transform(w,this.matrix));const v=.001,F=Math.hypot(w[0],w[1]),C=Math.hypot(w[2],w[3]),S=(w[0]*w[2]+w[1]*w[3])/(F*C);if(Math.abs(S)<v)if(this.isRadial()){if(Math.abs(F-C)<v)return this._createGradient(e,w)}else return this._createGradient(e,w)}const a=t.current.getClippedPathBoundingBox(r,ln(e))||[0,0,0,0],u=Math.ceil(a[2]-a[0])||1,d=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",u,d),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),n=Fe.transform(n,[1,0,0,1,a[0],a[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),bC(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),i=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(n);i.setTransform(g)}else bC(e,this._bbox),i=this._createGradient(e);return i}}function QE(s,e,t,n,r,i,a,u){const d=e.coords,h=e.colors,f=s.data,g=s.width*4;let w;d[t+1]>d[n+1]&&(w=t,t=n,n=w,w=i,i=a,a=w),d[n+1]>d[r+1]&&(w=n,n=r,r=w,w=a,a=u,u=w),d[t+1]>d[n+1]&&(w=t,t=n,n=w,w=i,i=a,a=w);const v=(d[t]+e.offsetX)*e.scaleX,F=(d[t+1]+e.offsetY)*e.scaleY,C=(d[n]+e.offsetX)*e.scaleX,S=(d[n+1]+e.offsetY)*e.scaleY,I=(d[r]+e.offsetX)*e.scaleX,O=(d[r+1]+e.offsetY)*e.scaleY;if(F>=O)return;const R=h[i],V=h[i+1],z=h[i+2],W=h[a],N=h[a+1],D=h[a+2],L=h[u],U=h[u+1],$=h[u+2],Q=Math.round(F),j=Math.round(O);let me,_e,we,fe,oe,Z,J,H;for(let q=Q;q<=j;q++){if(q<S){const Se=q<F?0:(F-q)/(F-S);me=v-(v-C)*Se,_e=R-(R-W)*Se,we=V-(V-N)*Se,fe=z-(z-D)*Se}else{let Se;q>O?Se=1:S===O?Se=0:Se=(S-q)/(S-O),me=C-(C-I)*Se,_e=W-(W-L)*Se,we=N-(N-U)*Se,fe=D-(D-$)*Se}let ie;q<F?ie=0:q>O?ie=1:ie=(F-q)/(F-O),oe=v-(v-I)*ie,Z=R-(R-L)*ie,J=V-(V-U)*ie,H=z-(z-$)*ie;const ye=Math.round(Math.min(me,oe)),Ae=Math.round(Math.max(me,oe));let Ce=g*q+ye*4;for(let Se=ye;Se<=Ae;Se++)ie=(me-Se)/(me-oe),ie<0?ie=0:ie>1&&(ie=1),f[Ce++]=_e-(_e-Z)*ie|0,f[Ce++]=we-(we-J)*ie|0,f[Ce++]=fe-(fe-H)*ie|0,f[Ce++]=255}}function zG(s,e,t){const n=e.coords,r=e.colors;let i,a;switch(e.type){case Kb.LATTICE:const u=e.verticesPerRow,d=Math.floor(n.length/u)-1,h=u-1;for(i=0;i<d;i++){let f=i*u;for(let g=0;g<h;g++,f++)QE(s,t,n[f],n[f+1],n[f+u],r[f],r[f+1],r[f+u]),QE(s,t,n[f+u+1],n[f+1],n[f+u],r[f+u+1],r[f+1],r[f+u])}break;case Kb.TRIANGLES:for(i=0,a=n.length;i<a;i+=3)QE(s,t,n[i],n[i+1],n[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class HG extends WS{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-u,f=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),v=h/g,F=f/w,C={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/v,scaleY:1/F},S=g+4,I=w+4,O=n.getCanvas("mesh",S,I),R=O.context,V=R.createImageData(g,w);if(t){const W=V.data;for(let N=0,D=W.length;N<D;N+=4)W[N]=t[0],W[N+1]=t[1],W[N+2]=t[2],W[N+3]=255}for(const W of this._figures)zG(V,W,C);return R.putImageData(V,2,2),{canvas:O.canvas,offsetX:u-2*v,offsetY:d-2*F,scaleX:v,scaleY:F}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){bC(e,this._bbox);const i=new Float32Array(2);if(r===yr.SHADING)Fe.singularValueDecompose2dScale(ln(e),i);else if(this.matrix){Fe.singularValueDecompose2dScale(this.matrix,i);const[u,d]=i;Fe.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=u,i[1]*=d}else Fe.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,r===yr.SHADING?null:this._background,t.cachedCanvases);return r!==yr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class WG extends WS{getPattern(){return"hotpink"}}function GG(s){switch(s[0]){case"RadialAxial":return new $G(s);case"Mesh":return new HG(s);case"Dummy":return new WG}throw new Error(`Unknown IR type: ${s[0]}`)}const MR={COLORED:1,UNCOLORED:2},K_=class K_{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){var Z,J;const{bbox:n,operatorList:r,paintType:i,tilingType:a,color:u,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),Vx("TilingType: "+a);const g=n[0],w=n[1],v=n[2],F=n[3],C=v-g,S=F-w,I=new Float32Array(2);Fe.singularValueDecompose2dScale(this.matrix,I);const[O,R]=I;Fe.singularValueDecompose2dScale(this.baseTransform,I);const V=O*I[0],z=R*I[1];let W=C,N=S,D=!1,L=!1;const U=Math.ceil(h*V),$=Math.ceil(f*z),Q=Math.ceil(C*V),j=Math.ceil(S*z);U>=Q?W=h:D=!0,$>=j?N=f:L=!0;const me=this.getSizeAndScale(W,this.ctx.canvas.width,V),_e=this.getSizeAndScale(N,this.ctx.canvas.height,z),we=e.cachedCanvases.getCanvas("pattern",me.size,_e.size),fe=we.context,oe=d.createCanvasGraphics(fe,t);if(oe.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(oe,i,u),fe.translate(-me.scale*g,-_e.scale*w),oe.transform(0,me.scale,0,0,_e.scale,0,0),fe.save(),(Z=oe.dependencyTracker)==null||Z.save(),this.clipBbox(oe,g,w,v,F),oe.baseTransform=ln(oe.ctx),oe.executeOperatorList(r),oe.endDrawing(),(J=oe.dependencyTracker)==null||J.restore(),fe.restore(),D||L){const H=we.canvas;D&&(W=h),L&&(N=f);const q=this.getSizeAndScale(W,this.ctx.canvas.width,V),ie=this.getSizeAndScale(N,this.ctx.canvas.height,z),ye=q.size,Ae=ie.size,Ce=e.cachedCanvases.getCanvas("pattern-workaround",ye,Ae),Se=Ce.context,Be=D?Math.floor(C/h):0,be=L?Math.floor(S/f):0;for(let Me=0;Me<=Be;Me++)for(let rt=0;rt<=be;rt++)Se.drawImage(H,ye*Me,Ae*rt,ye,Ae,0,0,ye,Ae);return{canvas:Ce.canvas,scaleX:q.scale,scaleY:ie.scale,offsetX:g,offsetY:w}}return{canvas:we.canvas,scaleX:me.scale,scaleY:_e.scale,offsetX:g,offsetY:w}}getSizeAndScale(e,t,n){const r=Math.max(K_.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const a=r-t,u=i-n;e.ctx.rect(t,n,a,u),Fe.axialAlignedBoundingBox([t,n,r,i],ln(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case MR.COLORED:const{fillStyle:a,strokeStyle:u}=this.ctx;r.fillStyle=i.fillColor=a,r.strokeStyle=i.strokeColor=u;break;case MR.UNCOLORED:r.fillStyle=r.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new sG(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,i){let a=n;r!==yr.SHADING&&(a=Fe.transform(a,t.baseTransform),this.matrix&&(a=Fe.transform(a,this.matrix)));const u=this.createPatternCanvas(t,i);let d=new DOMMatrix(a);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const h=e.createPattern(u.canvas,"repeat");return h.setTransform(d),h}};ae(K_,"MAX_PATTERN_SIZE",3e3);let CC=K_;function qG({src:s,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const u=qn.isLittleEndian?4278190080:255,[d,h]=a?[i,u]:[u,i],f=n>>3,g=n&7,w=s.length;t=new Uint32Array(t.buffer);let v=0;for(let F=0;F<r;F++){for(const S=e+f;e<S;e++){const I=e<w?s[e]:255;t[v++]=I&128?h:d,t[v++]=I&64?h:d,t[v++]=I&32?h:d,t[v++]=I&16?h:d,t[v++]=I&8?h:d,t[v++]=I&4?h:d,t[v++]=I&2?h:d,t[v++]=I&1?h:d}if(g===0)continue;const C=e<w?s[e++]:255;for(let S=0;S<g;S++)t[v++]=C&1<<7-S?h:d}return{srcPos:e,destPos:v}}const LR=16,OR=100,QG=15,BR=10,hs=16,KE=new DOMMatrix,qs=new Float32Array(2),af=new Float32Array([1/0,1/0,-1/0,-1/0]);function KG(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,r,i,a,u){e.transform(t,n,r,i,a,u),this.__originalTransform(t,n,r,i,a,u)},s.setTransform=function(t,n,r,i,a,u){e.setTransform(t,n,r,i,a,u),this.__originalSetTransform(t,n,r,i,a,u)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,r,i,a,u){e.bezierCurveTo(t,n,r,i,a,u),this.__originalBezierCurveTo(t,n,r,i,a,u)},s.rect=function(t,n,r,i){e.rect(t,n,r,i),this.__originalRect(t,n,r,i)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class XG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function cA(s,e,t,n,r,i,a,u,d,h){const[f,g,w,v,F,C]=ln(s);if(g===0&&w===0){const O=a*f+F,R=Math.round(O),V=u*v+C,z=Math.round(V),W=(a+d)*f+F,N=Math.abs(Math.round(W)-R)||1,D=(u+h)*v+C,L=Math.abs(Math.round(D)-z)||1;return s.setTransform(Math.sign(f),0,0,Math.sign(v),R,z),s.drawImage(e,t,n,r,i,0,0,N,L),s.setTransform(f,g,w,v,F,C),[N,L]}if(f===0&&v===0){const O=u*w+F,R=Math.round(O),V=a*g+C,z=Math.round(V),W=(u+h)*w+F,N=Math.abs(Math.round(W)-R)||1,D=(a+d)*g+C,L=Math.abs(Math.round(D)-z)||1;return s.setTransform(0,Math.sign(g),Math.sign(w),0,R,z),s.drawImage(e,t,n,r,i,0,0,L,N),s.setTransform(f,g,w,v,F,C),[L,N]}s.drawImage(e,t,n,r,i,a,u,d,h);const S=Math.hypot(f,g),I=Math.hypot(w,v);return[S*d,I*h]}class VR{constructor(e,t,n){ae(this,"alphaIsShape",!1);ae(this,"fontSize",0);ae(this,"fontSizeScale",1);ae(this,"textMatrix",null);ae(this,"textMatrixScale",1);ae(this,"fontMatrix",Qb);ae(this,"leading",0);ae(this,"x",0);ae(this,"y",0);ae(this,"lineX",0);ae(this,"lineY",0);ae(this,"charSpacing",0);ae(this,"wordSpacing",0);ae(this,"textHScale",1);ae(this,"textRenderingMode",$n.FILL);ae(this,"textRise",0);ae(this,"fillColor","#000000");ae(this,"strokeColor","#000000");ae(this,"patternFill",!1);ae(this,"patternStroke",!1);ae(this,"fillAlpha",1);ae(this,"strokeAlpha",1);ae(this,"lineWidth",1);ae(this,"activeSMask",null);ae(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=af.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=yr.FILL,t=null){const n=this.minMax.slice();if(e===yr.STROKE){t||xt("Stroke bounding box must include transform."),Fe.singularValueDecompose2dScale(t,qs);const r=qs[0]*this.lineWidth/2,i=qs[1]*this.lineWidth/2;n[0]-=r,n[1]-=i,n[2]+=r,n[3]+=i}return n}updateClipFromPath(){const e=Fe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(af,0)}getClippedPathBoundingBox(e=yr.FILL,t=null){return Fe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function UR(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%hs,i=(t-r)/hs,a=r===0?i:i+1,u=s.createImageData(n,hs);let d=0,h;const f=e.data,g=u.data;let w,v,F,C;if(e.kind===FA.GRAYSCALE_1BPP){const S=f.byteLength,I=new Uint32Array(g.buffer,0,g.byteLength>>2),O=I.length,R=n+7>>3,V=4294967295,z=qn.isLittleEndian?4278190080:255;for(w=0;w<a;w++){for(F=w<i?hs:r,h=0,v=0;v<F;v++){const W=S-d;let N=0;const D=W>R?n:W*8-7,L=D&-8;let U=0,$=0;for(;N<L;N+=8)$=f[d++],I[h++]=$&128?V:z,I[h++]=$&64?V:z,I[h++]=$&32?V:z,I[h++]=$&16?V:z,I[h++]=$&8?V:z,I[h++]=$&4?V:z,I[h++]=$&2?V:z,I[h++]=$&1?V:z;for(;N<D;N++)U===0&&($=f[d++],U=128),I[h++]=$&U?V:z,U>>=1}for(;h<O;)I[h++]=0;s.putImageData(u,0,w*hs)}}else if(e.kind===FA.RGBA_32BPP){for(v=0,C=n*hs*4,w=0;w<i;w++)g.set(f.subarray(d,d+C)),d+=C,s.putImageData(u,0,v),v+=hs;w<a&&(C=n*r*4,g.set(f.subarray(d,d+C)),s.putImageData(u,0,v))}else if(e.kind===FA.RGB_24BPP)for(F=hs,C=n*F,w=0;w<a;w++){for(w>=i&&(F=r,C=n*F),h=0,v=C;v--;)g[h++]=f[d++],g[h++]=f[d++],g[h++]=f[d++],g[h++]=255;s.putImageData(u,0,w*hs)}else throw new Error(`bad image kind: ${e.kind}`)}function jR(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%hs,i=(t-r)/hs,a=r===0?i:i+1,u=s.createImageData(n,hs);let d=0;const h=e.data,f=u.data;for(let g=0;g<a;g++){const w=g<i?hs:r;({srcPos:d}=qG({src:h,srcPos:d,dest:f,width:n,height:w,nonBlackColor:0})),s.putImageData(u,0,g*hs)}}function cg(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function uA(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function $R(s,e){if(e)return!0;Fe.singularValueDecompose2dScale(s,qs);const t=Math.fround(mo.pixelRatio*Lu.PDF_TO_CSS_UNITS);return qs[0]<=t&&qs[1]<=t}const YG=["butt","round","square"],JG=["miter","round","bevel"],ZG={},zR={};var oa,FC,SC,TC;const nT=class nT{constructor(e,t,n,r,i,{optionalContentConfig:a,markedContentStack:u=null},d,h,f){T(this,oa);this.ctx=e,this.current=new VR(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=a,this.cachedCanvases=new XG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,n=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ln(this.compositeCtx))}this.ctx.save(),uA(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ln(this.ctx)}executeOperatorList(e,t,n,r,i){var I;const a=e.argsArray,u=e.fnArray;let d=t||0;const h=a.length;if(h===d)return d;const f=h-d>BR&&typeof n=="function",g=f?Date.now()+QG:0;let w=0;const v=this.commonObjs,F=this.objs;let C,S;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,n),d;if(!i||i(d))if(C=u[d],S=a[d]??null,C!==ly.dependency)S===null?this[C](d):this[C](d,...S);else for(const O of S){(I=this.dependencyTracker)==null||I.recordNamedData(O,d);const R=O.startsWith("g_")?v:F;if(!R.has(O))return R.get(O,n),d}if(d++,d===h)return d;if(f&&++w>BR){if(Date.now()>g)return n(),d;w=0}}}endDrawing(){P(this,oa,FC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),P(this,oa,SC).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),u=n,d=r,h="prescale1",f,g;for(;i>2&&u>1||a>2&&d>1;){let w=u,v=d;i>2&&u>1&&(w=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),i/=u/w),a>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,a/=d/v),f=this.cachedCanvases.getCanvas(h,w,v),g=f.context,g.clearRect(0,0,w,v),g.drawImage(e,0,0,u,d,0,0,w,v),e=f.canvas,u=w,d=v,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:d}}_createMaskCanvas(e,t){var U,$;const n=this.ctx,{width:r,height:i}=t,a=this.current.fillColor,u=this.current.patternFill,d=ln(n);let h,f,g,w;if((t.bitmap||t.data)&&t.count>1){const Q=t.bitmap||t.data.buffer;f=JSON.stringify(u?d:[d.slice(0,4),a]),h=this._cachedBitmapsMap.get(Q),h||(h=new Map,this._cachedBitmapsMap.set(Q,h));const j=h.get(f);if(j&&!u){const me=Math.round(Math.min(d[0],d[2])+d[4]),_e=Math.round(Math.min(d[1],d[3])+d[5]);return(U=this.dependencyTracker)==null||U.recordDependencies(e,ci.transformAndFill),{canvas:j,offsetX:me,offsetY:_e}}g=j}g||(w=this.cachedCanvases.getCanvas("maskCanvas",r,i),jR(w.context,t));let v=Fe.transform(d,[1/r,0,0,-1/i,0,0]);v=Fe.transform(v,[1,0,0,1,0,-i]);const F=af.slice();Fe.axialAlignedBoundingBox([0,0,r,i],v,F);const[C,S,I,O]=F,R=Math.round(I-C)||1,V=Math.round(O-S)||1,z=this.cachedCanvases.getCanvas("fillCanvas",R,V),W=z.context,N=C,D=S;W.translate(-N,-D),W.transform(...v),g||(g=this._scaleImage(w.canvas,ka(W)),g=g.img,h&&u&&h.set(f,g)),W.imageSmoothingEnabled=$R(ln(W),t.interpolate),cA(W,g,0,0,g.width,g.height,0,0,r,i),W.globalCompositeOperation="source-in";const L=Fe.transform(ka(W),[1,0,0,1,-N,-D]);return W.fillStyle=u?a.getPattern(n,this,L,yr.FILL,e):a,W.fillRect(0,0,r,i),h&&!u&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,z.canvas)),($=this.dependencyTracker)==null||$.recordDependencies(e,ci.transformAndFill),{canvas:z.canvas,offsetX:Math.round(N),offsetY:Math.round(D)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=YG[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=JG[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,r,i,a,u;for(const[d,h]of t)switch(d){case"LW":this.setLineWidth(e,h);break;case"LC":this.setLineCap(e,h);break;case"LJ":this.setLineJoin(e,h);break;case"ML":this.setMiterLimit(e,h);break;case"D":this.setDash(e,h[0],h[1]);break;case"RI":this.setRenderingIntent(e,h);break;case"FL":this.setFlatness(e,h);break;case"Font":this.setFont(e,h[0],h[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=h;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=h;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=h;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=h?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(h);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),cg(this.suspendedCtx,a),KG(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),cg(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],a=r[1],u=r[2]-i,d=r[3]-a;u===0||d===0||(this.genericComposeSMask(t.context,n,u,d,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,a,u,d,h,f,g){let w=e.canvas,v=d-f,F=h-g;if(a)if(v<0||F<0||v+n>w.width||F+r>w.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,r),I=S.context;I.drawImage(w,-v,-F),I.globalCompositeOperation="destination-atop",I.fillStyle=a,I.fillRect(0,0,n,r),I.globalCompositeOperation="source-over",w=S.canvas,v=F=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(v,F,n,r),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(v,F,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const C=new Path2D;C.rect(d,h,n,r),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(w,v,F,n,r,d,h,n,r),t.restore()}save(e){var n;this.inSMaskMode&&cg(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&cg(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,i,a,u){var d;(d=this.dependencyTracker)==null||d.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,i,a,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[i]=n;if(!r){i||(i=n[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const a=t===ly.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-a,r[2]+a,r[1]-a,r[3]+a).recordDependencies(e,["transform"])}i instanceof Path2D||(i=n[0]=BM(i)),Fe.axialAlignedBoundingBox(r,ln(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var a;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const u=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,ka(r),yr.STROKE,e),u){const d=new Path2D;d.addPath(t,r.getTransform().invertSelf().multiplySelf(u)),t=d}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,ci.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(yr.STROKE,ln(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var h,f,g;const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let u=!1;if(a){const w=i.isModifyingCurrentTransform()?r.getTransform():null;if((h=this.dependencyTracker)==null||h.save(e),r.save(),r.fillStyle=i.getPattern(r,this,ka(r),yr.FILL,e),w){const v=new Path2D;v.addPath(t,r.getTransform().invertSelf().multiplySelf(w)),t=v}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(f=this.dependencyTracker)==null||f.recordDependencies(e,ci.fill),u&&(r.restore(),(g=this.dependencyTracker)==null||g.restore(e)),n&&this.consumePath(e,t,d)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,ci.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=ZG}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=zR}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=n.getTransform().invertSelf();for(const{transform:a,x:u,y:d,fontSize:h,path:f}of t)f&&r.addPath(f,new DOMMatrix(a).preMultiplySelf(i).translate(u,d).scale(h,-h));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var g,w;(g=this.dependencyTracker)==null||g.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||Qb,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Ke("Invalid font matrix for font "+t),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const a=r.loadedName||"sans-serif",u=((w=r.systemFontInfo)==null?void 0:w.css)||`"${a}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const h=r.italic?"italic":"normal";let f=n;n<LR?f=LR:n>OR&&(f=OR),this.current.fontSizeScale=n/f,this.ctx.font=`${h} ${d} ${f}px ${u}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,r,i,a){var I,O,R,V;const u=this.ctx,d=this.current,h=d.font,f=d.textRenderingMode,g=d.fontSize/d.fontSizeScale,w=f&$n.FILL_STROKE_MASK,v=!!(f&$n.ADD_TO_PATH_FLAG),F=d.patternFill&&!h.missingFile,C=d.patternStroke&&!h.missingFile;let S;if((h.disableFontFace||v||F||C)&&!h.missingFile&&(S=h.getPathGenerator(this.commonObjs,t)),S&&(h.disableFontFace||F||C)){u.save(),u.translate(n,r),u.scale(g,-g),(I=this.dependencyTracker)==null||I.recordCharacterBBox(e,u,h);let z;if(w===$n.FILL||w===$n.FILL_STROKE)if(i){z=u.getTransform(),u.setTransform(...i);const W=P(this,oa,TC).call(this,S,z,i);u.fill(W)}else u.fill(S);if(w===$n.STROKE||w===$n.FILL_STROKE)if(a){z||(z=u.getTransform()),u.setTransform(...a);const{a:W,b:N,c:D,d:L}=z,U=Fe.inverseTransform(a),$=Fe.transform([W,N,D,L,0,0],U);Fe.singularValueDecompose2dScale($,qs),u.lineWidth*=Math.max(qs[0],qs[1])/g,u.stroke(P(this,oa,TC).call(this,S,z,a))}else u.lineWidth/=g,u.stroke(S);u.restore()}else(w===$n.FILL||w===$n.FILL_STROKE)&&(u.fillText(t,n,r),(O=this.dependencyTracker)==null||O.recordCharacterBBox(e,u,h,g,n,r,()=>u.measureText(t))),(w===$n.STROKE||w===$n.FILL_STROKE)&&(this.dependencyTracker&&((R=this.dependencyTracker)==null||R.recordCharacterBBox(e,u,h,g,n,r,()=>u.measureText(t)).recordDependencies(e,ci.stroke)),u.strokeText(t,n,r));v&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ln(u),x:n,y:r,fontSize:g,path:S}),(V=this.dependencyTracker)==null||V.recordCharacterBBox(e,u,h,g,n,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Xe(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var $,Q,j,me;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ci.showText).resetBBox(e),this.current.textRenderingMode&$n.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(e,t),($=this.dependencyTracker)==null||$.recordShowTextOperation(e);return}const i=n.fontSize;if(i===0){(Q=this.dependencyTracker)==null||Q.recordOperation(e);return}const a=this.ctx,u=n.fontSizeScale,d=n.charSpacing,h=n.wordSpacing,f=n.fontDirection,g=n.textHScale*f,w=t.length,v=r.vertical,F=v?1:-1,C=r.defaultVMetrics,S=i*n.fontMatrix[0],I=n.textRenderingMode===$n.FILL&&!r.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),f>0?a.scale(g,-1):a.scale(g,1);let O,R;const V=n.textRenderingMode&$n.FILL_STROKE_MASK,z=V===$n.FILL||V===$n.FILL_STROKE,W=V===$n.STROKE||V===$n.FILL_STROKE;if(z&&n.patternFill){a.save();const _e=n.fillColor.getPattern(a,this,ka(a),yr.FILL,e);O=ln(a),a.restore(),a.fillStyle=_e}if(W&&n.patternStroke){a.save();const _e=n.strokeColor.getPattern(a,this,ka(a),yr.STROKE,e);R=ln(a),a.restore(),a.strokeStyle=_e}let N=n.lineWidth;const D=n.textMatrixScale;if(D===0||N===0?W&&(N=this.getSinglePixelWidth()):N/=D,u!==1&&(a.scale(u,u),N/=u),a.lineWidth=N,r.isInvalidPDFjsFont){const _e=[];let we=0;for(const oe of t)_e.push(oe.unicode),we+=oe.width;const fe=_e.join("");if(a.fillText(fe,0,0),this.dependencyTracker!==null){const oe=a.measureText(fe);this.dependencyTracker.recordBBox(e,this.ctx,-oe.actualBoundingBoxLeft,oe.actualBoundingBoxRight,-oe.actualBoundingBoxAscent,oe.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=we*S*g,a.restore(),this.compose();return}let L=0,U;for(U=0;U<w;++U){const _e=t[U];if(typeof _e=="number"){L+=F*_e*i/1e3;continue}let we=!1;const fe=(_e.isSpace?h:0)+d,oe=_e.fontChar,Z=_e.accent;let J,H,q=_e.width;if(v){const Ae=_e.vmetric||C,Ce=-(_e.vmetric?Ae[1]:q*.5)*S,Se=Ae[2]*S;q=Ae?-Ae[0]:q,J=Ce/u,H=(L+Se)/u}else J=L/u,H=0;let ie;if(r.remeasure&&q>0){ie=a.measureText(oe);const Ae=ie.width*1e3/i*u;if(q<Ae&&this.isFontSubpixelAAEnabled){const Ce=q/Ae;we=!0,a.save(),a.scale(Ce,1),J/=Ce}else q!==Ae&&(J+=(q-Ae)/2e3*i/u)}if(this.contentVisible&&(_e.isInFont||r.missingFile)){if(I&&!Z)a.fillText(oe,J,H),(j=this.dependencyTracker)==null||j.recordCharacterBBox(e,a,ie?{bbox:null}:r,i/u,J,H,()=>ie??a.measureText(oe));else if(this.paintChar(e,oe,J,H,O,R),Z){const Ae=J+i*Z.offset.x/u,Ce=H-i*Z.offset.y/u;this.paintChar(e,Z.fontChar,Ae,Ce,O,R)}}const ye=v?q*S-fe*f:q*S+fe*f;L+=ye,we&&a.restore()}v?n.y-=L:n.x+=L*g,a.restore(),this.compose(),(me=this.dependencyTracker)==null||me.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,r=this.current,i=r.font,a=r.fontSize,u=r.fontDirection,d=i.vertical?1:-1,h=r.charSpacing,f=r.wordSpacing,g=r.textHScale*u,w=r.fontMatrix||Qb,v=t.length,F=r.textRenderingMode===$n.INVISIBLE;let C,S,I,O;if(F||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(g,u);const R=this.dependencyTracker;for(this.dependencyTracker=R?new N_(R,e):null,C=0;C<v;++C){if(S=t[C],typeof S=="number"){O=d*S*a/1e3,this.ctx.translate(O,0),r.x+=O*g;continue}const V=(S.isSpace?f:0)+h,z=i.charProcOperatorList[S.operatorListId];z?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...w),this.executeOperatorList(z),this.restore()):Ke(`Type3 character "${S.operatorListId}" is not available.`);const W=[S.width,0];Fe.applyTransform(W,w),I=W[0]*a+V,n.translate(I,0),r.x+=I*g}n.restore(),R&&(this.dependencyTracker=R)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,i,a,u){var h;const d=new Path2D;d.rect(r,i,a-r,u-i),this.ctx.clip(d),(h=this.dependencyTracker)==null||h.recordBBox(e,this.ctx,r,a,i,u).recordClipBox(e,this.ctx,r,a,i,u),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const r=this.baseTransform||ln(this.ctx),i={createCanvasGraphics:(a,u)=>new nT(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new N_(this.dependencyTracker,u,!0):null)};n=new CC(t,this.ctx,i,r)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=GG(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){var a;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const r=this._getPattern(e,t);n.fillStyle=r.getPattern(n,this,ka(n),yr.SHADING,e);const i=ka(n);if(i){const{width:u,height:d}=n.canvas,h=af.slice();Fe.axialAlignedBoundingBox([0,0,u,d],i,h);const[f,g,w,v]=h;this.ctx.fillRect(f,g,w-f,v-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ci.transform).recordDependencies(e,ci.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){xt("Should not call beginInlineImage")}beginImageData(){xt("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=ln(this.ctx),n)){Fe.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,a,u,d]=n,h=new Path2D;h.rect(i,a,u-i,d-a),this.ctx.clip(h),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,u,a,d),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var R;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||Vx("TODO: Support non-isolated groups."),t.knockout&&Ke("Knockout groups not supported.");const r=ln(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=af.slice();Fe.axialAlignedBoundingBox(t.bbox,ln(n),i);const a=[0,0,n.canvas.width,n.canvas.height];i=Fe.intersect(i,a)||[0,0,0,0];const u=Math.floor(i[0]),d=Math.floor(i[1]),h=Math.max(Math.ceil(i[2])-u,1),f=Math.max(Math.ceil(i[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const w=this.cachedCanvases.getCanvas(g,h,f),v=w.context;v.translate(-u,-d),v.transform(...r);let F=new Path2D;const[C,S,I,O]=t.bbox;if(F.rect(C,S,I-C,O-S),t.matrix){const V=new Path2D;V.addPath(F,new DOMMatrix(t.matrix)),F=V}v.clip(F),t.smask&&this.smaskStack.push({canvas:w.canvas,context:v,offsetX:u,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,d),n.save()),cg(n,v),this.ctx=v,(R=this.dependencyTracker)==null||R.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=ln(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const u=af.slice();Fe.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(e,t,n,r,i,a){if(P(this,oa,FC).call(this),uA(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],d=n[3]-n[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=d,Fe.singularValueDecompose2dScale(ln(this.ctx),qs);const{viewportScale:h}=this,f=Math.ceil(u*this.outputScaleX*h),g=Math.ceil(d*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:w,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(qs[0],0,0,-qs[1],0,d*qs[1]),uA(this.ctx)}else{uA(this.ctx),this.endPath(e);const h=new Path2D;h.rect(n[0],n[1],u,d),this.ctx.clip(h)}}this.current=new VR(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),P(this,oa,SC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var u;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const r=this.ctx,i=this._createMaskCanvas(e,t),a=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,i.offsetX,i.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+a.width,i.offsetY,i.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,i=0,a,u){var g,w,v;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const h=ln(d);d.transform(n,r,i,a,0,0);const f=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),(g=this.dependencyTracker)==null||g.resetBBox(e);for(let F=0,C=u.length;F<C;F+=2){const S=Fe.transform(h,[n,r,i,a,u[F],u[F+1]]);d.drawImage(f.canvas,S[4],S[5]),(w=this.dependencyTracker)==null||w.recordBBox(e,this.ctx,S[4],S[4]+f.canvas.width,S[5],S[5]+f.canvas.height)}d.restore(),this.compose(),(v=this.dependencyTracker)==null||v.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,u,d;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,ci.transformAndFill);for(const h of t){const{data:f,width:g,height:w,transform:v}=h,F=this.cachedCanvases.getCanvas("maskCanvas",g,w),C=F.context;C.save();const S=this.getObject(e,f,h);jR(C,S),C.globalCompositeOperation="source-in",C.fillStyle=i?r.getPattern(C,this,ka(n),yr.FILL,e):r,C.fillRect(0,0,g,w),C.restore(),n.save(),n.transform(...v),n.scale(1,-1),cA(n,F.canvas,0,0,g,w,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(e,n,0,g,0,w),n.restore()}this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Ke("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,r,i){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){Ke("Dependent image isn't ready yet");return}const u=a.width,d=a.height,h=[];for(let f=0,g=i.length;f<g;f+=2)h.push({transform:[n,0,0,r,i[f],i[f+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(e,a,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e,t){var h;if(!this.contentVisible)return;const n=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/n,-1/r);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,r).context;UR(g,t),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,ka(i));i.imageSmoothingEnabled=$R(ln(i),t.interpolate),(h=this.dependencyTracker)==null||h.resetBBox(e).recordBBox(e,i,0,n,-r,0).recordDependencies(e,ci.imageXObject).recordOperation(e),cA(i,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,n,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var a,u,d;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const h=t.width,f=t.height,w=this.cachedCanvases.getCanvas("inlineImage",h,f).context;UR(w,t),i=this.applyTransferMapsToCanvas(w)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const h of n)r.save(),r.transform(...h.transform),r.scale(1,-1),cA(r,i,h.x,h.y,h.w,h.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(e,r,0,1,-1,0),r.restore();(d=this.dependencyTracker)==null||d.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ci.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var a,u;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===zR?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(u=this.dependencyTracker)==null||u.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ln(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let a,u;if(n===0&&r===0){const d=Math.abs(t),h=Math.abs(i);if(d===h)if(e===0)a=u=1/d;else{const f=d*e;a=u=f<1?1/f:1}else if(e===0)a=1/d,u=1/h;else{const f=d*e,g=h*e;a=f<1?1/f:1,u=g<1?1/g:1}}else{const d=Math.abs(t*i-n*r),h=Math.hypot(t,n),f=Math.hypot(r,i);if(e===0)a=f/d,u=h/d;else{const g=e*d;a=f>g?f/g:1,u=h>g?h/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[i,a]=this.getScaleForStroking();if(i===a){n.lineWidth=(r||1)*i,n.stroke(e);return}const u=n.getLineDash();t&&n.save(),n.scale(i,a),KE.a=1/i,KE.d=1/a;const d=new Path2D;if(d.addPath(e,KE),u.length>0){const h=Math.max(i,a);n.setLineDash(u.map(f=>f/h)),n.lineDashOffset/=h}n.lineWidth=r||1,n.stroke(d),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};oa=new WeakSet,FC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},SC=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},TC=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let yf=nT;for(const s in ly)yf.prototype[s]!==void 0&&(yf.prototype[ly[s]]=yf.prototype[s]);var ew,tw;class to{static get workerPort(){return c(this,ew)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,ew,e)}static get workerSrc(){return c(this,tw)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,tw,e)}}ew=new WeakMap,tw=new WeakMap,T(to,ew,null),T(to,tw,"");var tm,nw;class eq{constructor({parsedData:e,rawData:t}){T(this,tm);T(this,nw);x(this,tm,e),x(this,nw,t)}getRaw(){return c(this,nw)}get(e){return c(this,tm).get(e)??null}[Symbol.iterator](){return c(this,tm).entries()}}tm=new WeakMap,nw=new WeakMap;const ef=Symbol("INTERNAL");var rw,sw,iw,nm;class tq{constructor(e,{name:t,intent:n,usage:r,rbGroups:i}){T(this,rw,!1);T(this,sw,!1);T(this,iw,!1);T(this,nm,!0);x(this,rw,!!(e&Gs.DISPLAY)),x(this,sw,!!(e&Gs.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=i}get visible(){if(c(this,iw))return c(this,nm);if(!c(this,nm))return!1;const{print:e,view:t}=this.usage;return c(this,rw)?(t==null?void 0:t.viewState)!=="OFF":c(this,sw)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==ef&&xt("Internal method `_setVisible` called."),x(this,iw,n),x(this,nm,t)}}rw=new WeakMap,sw=new WeakMap,iw=new WeakMap,nm=new WeakMap;var Kc,Nt,rm,sm,aw,kC;class nq{constructor(e,t=Gs.DISPLAY){T(this,aw);T(this,Kc,null);T(this,Nt,new Map);T(this,rm,null);T(this,sm,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,sm,e.order);for(const n of e.groups)c(this,Nt).set(n.id,new tq(t,n));if(e.baseState==="OFF")for(const n of c(this,Nt).values())n._setVisible(ef,!1);for(const n of e.on)c(this,Nt).get(n)._setVisible(ef,!0);for(const n of e.off)c(this,Nt).get(n)._setVisible(ef,!1);x(this,rm,this.getHash())}}isVisible(e){if(c(this,Nt).size===0)return!0;if(!e)return Vx("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,Nt).has(e.id)?c(this,Nt).get(e.id).visible:(Ke(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return P(this,aw,kC).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,Nt).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(c(this,Nt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,Nt).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(!c(this,Nt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,Nt).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(!c(this,Nt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,Nt).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(c(this,Nt).get(t).visible)return!1}return!0}return Ke(`Unknown optional content policy ${e.policy}.`),!0}return Ke(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const r=c(this,Nt).get(e);if(!r){Ke(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const u of a)u!==e&&((i=c(this,Nt).get(u))==null||i._setVisible(ef,!1,!0));r._setVisible(ef,!!t,!0),x(this,Kc,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const i=c(this,Nt).get(r);if(i)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}x(this,Kc,null)}get hasInitialVisibility(){return c(this,rm)===null||this.getHash()===c(this,rm)}getOrder(){return c(this,Nt).size?c(this,sm)?c(this,sm).slice():[...c(this,Nt).keys()]:null}getGroup(e){return c(this,Nt).get(e)||null}getHash(){if(c(this,Kc)!==null)return c(this,Kc);const e=new wL;for(const[t,n]of c(this,Nt))e.update(`${t}:${n.visible}`);return x(this,Kc,e.hexdigest())}[Symbol.iterator](){return c(this,Nt).entries()}}Kc=new WeakMap,Nt=new WeakMap,rm=new WeakMap,sm=new WeakMap,aw=new WeakSet,kC=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const i=e[r];let a;if(Array.isArray(i))a=P(this,aw,kC).call(this,i);else if(c(this,Nt).has(i))a=c(this,Nt).get(i).visible;else return Ke(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};var ow,lw;class $x{constructor(e,t,n){T(this,ow,null);T(this,lw,null);ae(this,"_fullReader",null);ae(this,"_rangeReaders",new Set);ae(this,"_source",null);this._source=e,x(this,ow,t),x(this,lw,n)}get _progressiveDataLength(){var e;return((e=this._fullReader)==null?void 0:e._loaded)??0}getFullReader(){return _t(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(c(this,ow))(this)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new(c(this,lw))(this,e,t);return this._rangeReaders.add(n),n}cancelAllRequests(e){var t;(t=this._fullReader)==null||t.cancel(e);for(const n of new Set(this._rangeReaders))n.cancel(e)}}ow=new WeakMap,lw=new WeakMap;class zx{constructor(e){ae(this,"onProgress",null);ae(this,"_contentLength",0);ae(this,"_filename",null);ae(this,"_headersCapability",Promise.withResolvers());ae(this,"_isRangeSupported",!1);ae(this,"_isStreamingSupported",!1);ae(this,"_loaded",0);ae(this,"_stream",null);this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){xt("Abstract method `read` called")}cancel(e){xt("Abstract method `cancel` called")}}class Hx{constructor(e,t,n){ae(this,"_stream",null);this._stream=e}async read(){xt("Abstract method `read` called")}cancel(e){xt("Abstract method `cancel` called")}}function HR(s){return s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}var cw,IC;class rq extends $x{constructor(t){super(t,sq,iq);T(this,cw);ae(this,"_progressiveDone",!1);ae(this,"_queuedChunks",[]);const{pdfDataRangeTransport:n}=t,{initialData:r,progressiveDone:i}=n;if((r==null?void 0:r.length)>0){const a=HR(r);this._queuedChunks.push(a)}this._progressiveDone=i,n.addRangeListener((a,u)=>{P(this,cw,IC).call(this,a,u)}),n.addProgressListener((a,u)=>{var d,h;u!==void 0&&((h=(d=this._fullReader)==null?void 0:d.onProgress)==null||h.call(d,{loaded:a,total:u}))}),n.addProgressiveReadListener(a=>{P(this,cw,IC).call(this,void 0,a)}),n.addProgressiveDoneListener(()=>{var a;(a=this._fullReader)==null||a.progressiveDone(),this._progressiveDone=!0}),n.transportReady()}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,n){const r=super.getRangeReader(t,n);return r&&(r.onDone=()=>this._rangeReaders.delete(r),this._source.pdfDataRangeTransport.requestDataRange(t,n)),r}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}cw=new WeakSet,IC=function(t,n){const r=HR(n);if(t===void 0)this._fullReader?this._fullReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.keys().find(a=>a._begin===t);_t(i,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),i._enqueue(r)}};class sq extends zx{constructor(t){super(t);ae(this,"_done",!1);ae(this,"_queuedChunks",null);ae(this,"_requests",[]);const{pdfDataRangeTransport:n,disableRange:r,disableStream:i}=t._source,{length:a,contentDispositionFilename:u}=n;this._queuedChunks=t._queuedChunks||[];for(const d of this._queuedChunks)this._loaded+=d.byteLength;this._done=t._progressiveDone,this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!r,$S(u)&&(this._filename=u),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class iq extends Hx{constructor(t,n,r){super(t,n,r);ae(this,"onDone",null);ae(this,"_begin",-1);ae(this,"_done",!1);ae(this,"_queuedChunk",null);ae(this,"_requests",[]);this._begin=n}_enqueue(t){var n;if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(n=this.onDone)==null||n.call(this)}}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onDone)==null||n.call(this)}}function aq(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let f=u(t);return f=unescape(f),f=d(f),f=h(f),i(f)}if(t=a(s),t){const f=h(t);return i(f)}if(t=n("filename","i").exec(s),t){t=t[1];let f=u(t);return f=h(f),i(f)}function n(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function r(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const w=new TextDecoder(f,{fatal:!0}),v=Ux(g);g=w.decode(v),e=!1}catch{}}return g}function i(f){return e&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),e&&(f=r("iso-8859-1",f))),f}function a(f){const g=[];let w;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=v.exec(f))!==null;){let[,C,S,I]=w;if(C=parseInt(C,10),C in g){if(C===0)break;continue}g[C]=[S,I]}const F=[];for(let C=0;C<g.length&&C in g;++C){let[S,I]=g[C];I=u(I),S&&(I=unescape(I),C===0&&(I=d(I))),F.push(I)}return F.join("")}function u(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let w=0;w<g.length;++w){const v=g[w].indexOf('"');v!==-1&&(g[w]=g[w].slice(0,v),g.length=w+1),g[w]=g[w].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function d(f){const g=f.indexOf("'");if(g===-1)return f;const w=f.slice(0,g),F=f.slice(g+1).replace(/^[^']*'/,"");return r(w,F)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,w,v,F){if(v==="q"||v==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,S){return String.fromCharCode(parseInt(S,16))}),r(w,F);try{F=atob(F)}catch{}return r(w,F)})}return""}function IL(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function Wx(s){var e;return((e=URL.parse(s))==null?void 0:e.origin)??null}function PL({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(s.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function RL(s){const e=s.get("Content-Disposition");if(e){let t=aq(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if($S(t))return t}return null}function Gx(s,e){return new T_(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function DL(s,e){if(s!==e)throw new Error(`Expected range response-origin "${s}" to match "${e}".`)}function NL(s,e,t,n){return fetch(s,{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"})}function ML(s,e){if(s!==200&&s!==206)throw Gx(s,e)}function LL(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Ke(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class oq extends $x{constructor(t){super(t,lq,cq);ae(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(t.url),this.headers=IL(this.isHttp,t.httpHeaders)}}class lq extends zx{constructor(t){super(t);ae(this,"_abortController",new AbortController);ae(this,"_reader",null);const{disableRange:n,disableStream:r,length:i,rangeChunkSize:a,url:u,withCredentials:d}=t._source;this._contentLength=i,this._isStreamingSupported=!r,this._isRangeSupported=!n;const h=new Headers(t.headers);NL(u,h,d,this._abortController).then(f=>{t._responseOrigin=Wx(f.url),ML(f.status,u),this._reader=f.body.getReader();const g=f.headers,{allowRangeRequests:w,suggestedLength:v}=PL({responseHeaders:g,isHttp:t.isHttp,rangeChunkSize:a,disableRange:n});this._isRangeSupported=w,this._contentLength=v||this._contentLength,this._filename=RL(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Mu("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var r;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:LL(t),done:!1})}cancel(t){var n;(n=this._reader)==null||n.cancel(t),this._abortController.abort()}}class cq extends Hx{constructor(t,n,r){super(t,n,r);ae(this,"_abortController",new AbortController);ae(this,"_readCapability",Promise.withResolvers());ae(this,"_reader",null);const{url:i,withCredentials:a}=t._source,u=new Headers(t.headers);u.append("Range",`bytes=${n}-${r-1}`),NL(i,u,a,this._abortController).then(d=>{const h=Wx(d.url);DL(h,t._responseOrigin),ML(d.status,i),this._reader=d.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:{value:LL(t),done:!1}}cancel(t){var n;(n=this._reader)==null||n.cancel(t),this._abortController.abort()}}const XE=200,WR=206;function uq(s){return typeof s!="string"?s:Ux(s).buffer}var Wa,Jm,OL,BL;class dq extends $x{constructor(t){super(t,hq,pq);T(this,Jm);T(this,Wa,new WeakMap);ae(this,"_responseOrigin",null);this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=IL(this.isHttp,t.httpHeaders)}_request(t){const n=new XMLHttpRequest,r={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};c(this,Wa).set(n,r),n.open("GET",this.url),n.withCredentials=this._source.withCredentials;for(const[i,a]of this.headers)n.setRequestHeader(i,a);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.validateStatus=i=>i===WR||i===XE):r.validateStatus=i=>i===XE,n.responseType="arraybuffer",_t(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>t.onError(n.status),n.onreadystatechange=P(this,Jm,BL).bind(this,n),n.onprogress=P(this,Jm,OL).bind(this,n),n.send(null),n}_abortRequest(t){c(this,Wa).has(t)&&(c(this,Wa).delete(t),t.abort())}getRangeReader(t,n){const r=super.getRangeReader(t,n);return r&&(r.onClosed=()=>this._rangeReaders.delete(r)),r}}Wa=new WeakMap,Jm=new WeakSet,OL=function(t,n){var i;const r=c(this,Wa).get(t);(i=r==null?void 0:r.onProgress)==null||i.call(r,n)},BL=function(t,n){const r=c(this,Wa).get(t);if(!r||(t.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),t.readyState!==4)||!c(this,Wa).has(t))return;if(c(this,Wa).delete(t),t.status===0&&this.isHttp){r.onError(t.status);return}const i=t.status||XE;if(!r.validateStatus(i)){r.onError(t.status);return}const a=uq(t.response);if(i===WR){const u=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(u)?r.onDone(a):(Ke('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone(a):r.onError(t.status)};var go,VL,UL,jL,$L;class hq extends zx{constructor(t){super(t);T(this,go);ae(this,"_cachedChunks",[]);ae(this,"_done",!1);ae(this,"_requests",[]);ae(this,"_storedError",null);const{length:n}=t._source;this._contentLength=n,this._fullRequestXhr=t._request({onHeadersReceived:P(this,go,VL).bind(this),onDone:P(this,go,UL).bind(this),onError:P(this,go,jL).bind(this),onProgress:P(this,go,$L).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}go=new WeakSet,VL=function(){const t=this._stream,{disableRange:n,rangeChunkSize:r}=t._source,i=this._fullRequestXhr;t._responseOrigin=Wx(i.responseURL);const a=i.getAllResponseHeaders(),u=new Headers(a?a.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[g,...w]=f.split(": ");return[g,w.join(": ")]}):[]),{allowRangeRequests:d,suggestedLength:h}=PL({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:r,disableRange:n});d&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=RL(u),this._isRangeSupported&&t._abortRequest(i),this._headersCapability.resolve()},UL=function(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}},jL=function(t){this._storedError=Gx(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},$L=function(t){var n;(n=this.onProgress)==null||n.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})};var Bl,zL,HL,PC;class pq extends Hx{constructor(t,n,r){super(t,n,r);T(this,Bl);ae(this,"onClosed",null);ae(this,"_done",!1);ae(this,"_queuedChunk",null);ae(this,"_requests",[]);ae(this,"_storedError",null);this._requestXhr=t._request({begin:n,end:r,onHeadersReceived:P(this,Bl,zL).bind(this),onDone:P(this,Bl,HL).bind(this),onError:P(this,Bl,PC).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(n=this.onClosed)==null||n.call(this)}}Bl=new WeakSet,zL=function(){var n;const t=Wx((n=this._requestXhr)==null?void 0:n.responseURL);try{DL(t,this._stream._responseOrigin)}catch(r){this._storedError=r,P(this,Bl,PC).call(this,0)}},HL=function(t){var n;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onClosed)==null||n.call(this)},PC=function(t){this._storedError??(this._storedError=Gx(t,this._stream.url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const fq=/^[a-z][a-z0-9\-+.]+:/i;function mq(s){if(fq.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}function WL(s){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(s):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(s)}function GL(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Ke(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class gq extends $x{constructor(e){super(e,yq,wq),this.url=mq(e.url),_t(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class yq extends zx{constructor(t){super(t);ae(this,"_reader",null);const{disableRange:n,disableStream:r,length:i,rangeChunkSize:a}=t._source;this._contentLength=i,this._isStreamingSupported=!r,this._isRangeSupported=!n;const u=t.url,d=process.getBuiltinModule("fs");d.promises.lstat(u).then(h=>{const f=d.createReadStream(u),g=WL(f);this._reader=g.getReader();const{size:w}=h;w<=2*a&&(this._isRangeSupported=!1),this._contentLength=w,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Mu("Streaming is disabled.")),this._headersCapability.resolve()}).catch(h=>{h.code==="ENOENT"&&(h=Gx(0,u.href)),this._headersCapability.reject(h)})}async read(){var r;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:GL(t),done:!1})}cancel(t){var n;(n=this._reader)==null||n.cancel(t)}}class wq extends Hx{constructor(t,n,r){super(t,n,r);ae(this,"_readCapability",Promise.withResolvers());ae(this,"_reader",null);const i=t.url,a=process.getBuiltinModule("fs");try{const u=a.createReadStream(i,{start:n,end:r-1}),d=WL(u);this._reader=d.getReader(),this._readCapability.resolve()}catch(u){this._readCapability.reject(u)}}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:{value:GL(t),done:!1}}cancel(t){var n;(n=this._reader)==null||n.cancel(t)}}const ug=Symbol("INITIAL_DATA");var Ps,uw,RC;class qL{constructor(){T(this,uw);T(this,Ps,Object.create(null))}get(e,t=null){if(t){const r=P(this,uw,RC).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=c(this,Ps)[e];if(!n||n.data===ug)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=c(this,Ps)[e];return!!t&&t.data!==ug}delete(e){const t=c(this,Ps)[e];return!t||t.data===ug?!1:(delete c(this,Ps)[e],!0)}resolve(e,t=null){const n=P(this,uw,RC).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in c(this,Ps)){const{data:n}=c(this,Ps)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}x(this,Ps,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,Ps)){const{data:t}=c(this,Ps)[e];t!==ug&&(yield[e,t])}}}Ps=new WeakMap,uw=new WeakSet,RC=function(e){var t;return(t=c(this,Ps))[e]||(t[e]={...Promise.withResolvers(),data:ug})};const vq=1e5,GR=30;var vD,Xc,ls,dw,hw,Zd,ol,pw,fw,eh,mw,im,Yc,am,gw,om,th,yw,ww,lm,nh,vw,cm,um,Vl,QL,KL,DC,Js,OA,NC,XL,YL;const cr=class cr{constructor({textContentSource:e,container:t,viewport:n}){T(this,Vl);T(this,Xc,Promise.withResolvers());T(this,ls,null);T(this,dw,!1);T(this,hw,!!((vD=globalThis.FontInspector)!=null&&vD.enabled));T(this,Zd,null);T(this,ol,null);T(this,pw,0);T(this,fw,0);T(this,eh,null);T(this,mw,null);T(this,im,0);T(this,Yc,0);T(this,am,Object.create(null));T(this,gw,[]);T(this,om,null);T(this,th,[]);T(this,yw,new WeakMap);T(this,ww,null);var d;if(e instanceof ReadableStream)x(this,om,e);else if(typeof e=="object")x(this,om,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,ls,x(this,mw,t)),x(this,Yc,n.scale*mo.pixelRatio),x(this,im,n.rotation),x(this,ol,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:a,pageY:u}=n.rawDims;x(this,ww,[1,0,0,-1,-a,u+i]),x(this,fw,r),x(this,pw,i),P(d=cr,Js,XL).call(d),t.style.setProperty("--min-font-size",c(cr,cm)),Qh(t,n),c(this,Xc).promise.finally(()=>{c(cr,um).delete(this),x(this,ol,null),x(this,am,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=qn.platform;return Xe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,eh).read().then(({value:t,done:n})=>{if(n){c(this,Xc).resolve();return}c(this,Zd)??x(this,Zd,t.lang),Object.assign(c(this,am),t.styles),P(this,Vl,QL).call(this,t.items),e()},c(this,Xc).reject)};return x(this,eh,c(this,om).getReader()),c(cr,um).add(this),e(),c(this,Xc).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*mo.pixelRatio,r=e.rotation;if(r!==c(this,im)&&(t==null||t(),x(this,im,r),Qh(c(this,mw),{rotation:r})),n!==c(this,Yc)){t==null||t(),x(this,Yc,n);const a={div:null,properties:null,ctx:P(i=cr,Js,OA).call(i,c(this,Zd))};for(const u of c(this,th))a.properties=c(this,yw).get(u),a.div=u,P(this,Vl,DC).call(this,a)}}cancel(){var t;const e=new Mu("TextLayer task cancelled.");(t=c(this,eh))==null||t.cancel(e).catch(()=>{}),x(this,eh,null),c(this,Xc).reject(e)}get textDivs(){return c(this,th)}get textContentItemsStr(){return c(this,gw)}static cleanup(){if(!(c(this,um).size>0)){c(this,lm).clear();for(const{canvas:e}of c(this,nh).values())e.remove();c(this,nh).clear()}}};Xc=new WeakMap,ls=new WeakMap,dw=new WeakMap,hw=new WeakMap,Zd=new WeakMap,ol=new WeakMap,pw=new WeakMap,fw=new WeakMap,eh=new WeakMap,mw=new WeakMap,im=new WeakMap,Yc=new WeakMap,am=new WeakMap,gw=new WeakMap,om=new WeakMap,th=new WeakMap,yw=new WeakMap,ww=new WeakMap,lm=new WeakMap,nh=new WeakMap,vw=new WeakMap,cm=new WeakMap,um=new WeakMap,Vl=new WeakSet,QL=function(e){var r,i;if(c(this,dw))return;(i=c(this,ol)).ctx??(i.ctx=P(r=cr,Js,OA).call(r,c(this,Zd)));const t=c(this,th),n=c(this,gw);for(const a of e){if(t.length>vq){Ke("Ignoring additional textDivs for performance reasons."),x(this,dw,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const u=c(this,ls);x(this,ls,document.createElement("span")),c(this,ls).classList.add("markedContent"),a.id&&c(this,ls).setAttribute("id",`${a.id}`),a.tag==="Artifact"&&(c(this,ls).ariaHidden=!0),u.append(c(this,ls))}else a.type==="endMarkedContent"&&x(this,ls,c(this,ls).parentNode);continue}n.push(a.str),P(this,Vl,KL).call(this,a)}},KL=function(e){var F;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,th).push(t);const r=Fe.transform(c(this,ww),e.transform);let i=Math.atan2(r[1],r[0]);const a=c(this,am)[e.fontName];a.vertical&&(i+=Math.PI/2);let u=c(this,hw)&&a.fontSubstitution||a.fontFamily;u=cr.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),h=d*P(F=cr,Js,YL).call(F,u,a,c(this,Zd));let f,g;i===0?(f=r[4],g=r[5]-h):(f=r[4]+h*Math.sin(i),g=r[5]-h*Math.cos(i));const w=t.style;w.left=`${(100*f/c(this,fw)).toFixed(2)}%`,w.top=`${(100*g/c(this,pw)).toFixed(2)}%`,w.setProperty("--font-height",`${d.toFixed(2)}px`),w.fontFamily=u,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,hw)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),S=Math.abs(e.transform[3]);C!==S&&Math.max(C,S)/Math.min(C,S)>1.5&&(v=!0)}if(v&&(n.canvasWidth=a.vertical?e.height:e.width),c(this,yw).set(t,n),c(this,ol).div=t,c(this,ol).properties=n,P(this,Vl,DC).call(this,c(this,ol)),n.hasText&&c(this,ls).append(t),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),c(this,ls).append(C)}},DC=function(e){var a;const{div:t,properties:n,ctx:r}=e,{style:i}=t;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=i,{canvasWidth:d,fontSize:h}=n;P(a=cr,Js,NC).call(a,r,h*c(this,Yc),u);const{width:f}=r.measureText(t.textContent);f>0&&i.setProperty("--scale-x",d*c(this,Yc)/f)}n.angle!==0&&i.setProperty("--rotate",`${n.angle}deg`)},Js=new WeakSet,OA=function(e=null){let t=c(this,nh).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,nh).set(e,t),c(this,vw).set(t,{size:0,family:""})}return t},NC=function(e,t,n){const r=c(this,vw).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},XL=function(){if(c(this,cm)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),x(this,cm,e.getBoundingClientRect().height),e.remove()},YL=function(e,t,n){const r=c(this,lm).get(e);if(r)return r;const i=P(this,Js,OA).call(this,n);i.canvas.width=i.canvas.height=GR,P(this,Js,NC).call(this,i,GR,e);const a=i.measureText(""),u=a.fontBoundingBoxAscent,d=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let h=.8;return u?h=u/(u+d):(qn.platform.isFirefox&&Ke("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),c(this,lm).set(e,h),h},T(cr,Js),T(cr,lm,new Map),T(cr,nh,new Map),T(cr,vw,new WeakMap),T(cr,cm,null),T(cr,um,new Set);let dy=cr;const Aq=100;function JL(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new MC,{docId:t}=e,n=s.url?TG(s.url):null,r=s.data?kG(s.data):null,i=s.httpHeaders||null,a=s.withCredentials===!0,u=s.password??null,d=s.range instanceof ZL?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let f=s.worker instanceof hy?s.worker:null;const g=s.verbosity,w=typeof s.docBaseUrl=="string"&&!jx(s.docBaseUrl)?s.docBaseUrl:null,v=iA(s.cMapUrl),F=s.cMapPacked!==!1,C=s.CMapReaderFactory||(Gr?OG:IR),S=iA(s.iccUrl),I=iA(s.standardFontDataUrl),O=s.StandardFontDataFactory||(Gr?BG:PR),R=iA(s.wasmUrl),V=s.WasmFactory||(Gr?VG:RR),z=s.stopAtErrors!==!0,W=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,N=s.isEvalSupported!==!1,D=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Gr,L=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Gr&&(qn.platform.isFirefox||!globalThis.chrome),U=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,$=typeof s.disableFontFace=="boolean"?s.disableFontFace:Gr,Q=s.fontExtraProperties===!0,j=s.enableXfa===!0,me=s.ownerDocument||globalThis.document,_e=s.disableRange===!0,we=s.disableStream===!0,fe=s.disableAutoFetch===!0,oe=s.pdfBug===!0,Z=s.CanvasFactory||(Gr?LG:DG),J=s.FilterFactory||(Gr?MG:NG),H=s.enableHWA===!0,q=s.useWasm!==!1,ie=d?d.length:s.length??NaN,ye=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Gr&&!$,Ae=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(C===IR&&O===PR&&V===RR&&v&&I&&R&&_g(v,document.baseURI)&&_g(I,document.baseURI)&&_g(R,document.baseURI)),Ce=null;tG(g);const Se={canvasFactory:new Z({ownerDocument:me,enableHWA:H}),filterFactory:new J({docId:t,ownerDocument:me}),cMapReaderFactory:Ae?null:new C({baseUrl:v,isCompressed:F}),standardFontDataFactory:Ae?null:new O({baseUrl:I}),wasmFactory:Ae?null:new V({baseUrl:R})};f||(f=hy.create({verbosity:g,port:to.workerPort}),e._worker=f);const Be={docId:t,apiVersion:"5.4.624",data:r,password:u,disableAutoFetch:fe,rangeChunkSize:h,length:ie,docBaseUrl:w,enableXfa:j,evaluatorOptions:{maxImageSize:W,disableFontFace:$,ignoreErrors:z,isEvalSupported:N,isOffscreenCanvasSupported:D,isImageDecoderSupported:L,canvasMaxAreaInBytes:U,fontExtraProperties:Q,useSystemFonts:ye,useWasm:q,useWorkerFetch:Ae,cMapUrl:v,iccUrl:S,standardFontDataUrl:I,wasmUrl:R}},be={ownerDocument:me,pdfBug:oe,styleElement:Ce,enableHWA:H,loadingParams:{disableAutoFetch:fe,enableXfa:j}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Me=f.messageHandler.sendWithPromise("GetDocRequest",Be,r?[r.buffer]:null);let rt;if(d)rt=new rq({pdfDataRangeTransport:d,disableRange:_e,disableStream:we});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Wt=_g(n)?oq:Gr?gq:dq;rt=new Wt({url:n,length:ie,httpHeaders:i,withCredentials:a,rangeChunkSize:h,disableRange:_e,disableStream:we})}return Me.then(Wt=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Vt=new kg(t,Wt,f.port),ue=new Eq(Vt,e,rt,be,Se);e._transport=ue,Vt.send("Ready",null)})}).catch(e._capability.reject),e}var X_;const Y_=class Y_{constructor(){ae(this,"_capability",Promise.withResolvers());ae(this,"_transport",null);ae(this,"_worker",null);ae(this,"docId",`d${jn(Y_,X_)._++}`);ae(this,"destroyed",!1);ae(this,"onPassword",null);ae(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};X_=new WeakMap,T(Y_,X_,0);let MC=Y_;var rh,Aw,_w,xw,Ew;class ZL{constructor(e,t,n=!1,r=null){T(this,rh,Promise.withResolvers());T(this,Aw,[]);T(this,_w,[]);T(this,xw,[]);T(this,Ew,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){c(this,Ew).push(e)}addProgressListener(e){c(this,xw).push(e)}addProgressiveReadListener(e){c(this,_w).push(e)}addProgressiveDoneListener(e){c(this,Aw).push(e)}onDataRange(e,t){for(const n of c(this,Ew))n(e,t)}onDataProgress(e,t){c(this,rh).promise.then(()=>{for(const n of c(this,xw))n(e,t)})}onDataProgressiveRead(e){c(this,rh).promise.then(()=>{for(const t of c(this,_w))t(e)})}onDataProgressiveDone(){c(this,rh).promise.then(()=>{for(const e of c(this,Aw))e()})}transportReady(){c(this,rh).resolve()}requestDataRange(e,t){xt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}rh=new WeakMap,Aw=new WeakMap,_w=new WeakMap,xw=new WeakMap,Ew=new WeakMap;class _q{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Xe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ll,bw,sh,Ng;class xq{constructor(e,t,n,r=!1){T(this,sh);T(this,ll,!1);T(this,bw,uy.instance);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new ER:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new qL,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new T0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Xe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:i=bc.ENABLE,transform:a=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:w=!1,recordOperations:v=!1,operationsFilter:F=null}){var L,U,$;(L=this._stats)==null||L.time("Overall");const C=this._transport.getRenderingIntent(r,i,g,w),{renderingIntent:S,cacheKey:I}=C;x(this,ll,!1),d||(d=this._transport.getOptionalContentConfig(S));let O=this._intentStates.get(I);O||(O=Object.create(null),this._intentStates.set(I,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const R=!!(S&Gs.PRINT);O.displayReadyCapability||(O.displayReadyCapability=Promise.withResolvers(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(U=this._stats)==null||U.time("Page Request"),this._pumpOperatorList(C));const V=!!(this._pdfBug&&(($=globalThis.StepperManager)!=null&&$.enabled)),z=!this.recordedBBoxes&&(v||V),W=Q=>{var j,me;if(O.renderTasks.delete(N),z){const _e=(j=N.gfx)==null?void 0:j.dependencyTracker.take();_e&&(N.stepper&&N.stepper.setOperatorBBoxes(_e,N.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=_e))}R&&x(this,ll,!0),P(this,sh,Ng).call(this),Q?(N.capability.reject(Q),this._abortOperatorList({intentState:O,reason:Q instanceof Error?Q:new Error(Q)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(me=globalThis.Stats)!=null&&me.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new LC({callback:W,params:{canvas:t,canvasContext:e,dependencyTracker:z?new jG(t,O.operatorList.length,V):null,viewport:n,transform:a,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:F});(O.renderTasks||(O.renderTasks=new Set)).add(N);const D=N.task;return Promise.all([O.displayReadyCapability.promise,d]).then(([Q,j])=>{var me;if(this.destroyed){W();return}if((me=this._stats)==null||me.time("Rendering"),!(j.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:Q,optionalContentConfig:j}),N.operatorListChanged()}).catch(W),D}getOperatorList({intent:e="display",annotationMode:t=bc.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var h;function i(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const a=this._transport.getRenderingIntent(e,t,n,r,!0);let u=this._intentStates.get(a.cacheKey);u||(u=Object.create(null),this._intentStates.set(a.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=i,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(a)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:c(this,bw).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>cy.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function i(){a.read().then(function({value:d,done:h}){if(h){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),i()},r)}const a=t.getReader(),u={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),x(this,ll,!1),Promise.all(e)}cleanup(e=!1){x(this,ll,!0);const t=P(this,sh,Ng).call(this);return e&&t&&this._stats&&(this._stats=new ER),t}_startRenderPage(e,t){var r,i;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&P(this,sh,Ng).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:i,transfer:a}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:c(this,bw).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},a).getReader(),h=this._intentStates.get(t);h.streamReader=d;const f=()=>{d.read().then(({value:g,done:w})=>{if(w){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const w of h.renderTasks)w.operatorListChanged();P(this,sh,Ng).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof jS){let r=Aq;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Mu(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}ll=new WeakMap,bw=new WeakMap,sh=new WeakSet,Ng=function(){if(!c(this,ll)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,ll,!1),!0};var Jc,qi,cl,ih,J_,ah,oh,Qr,BA,eO,tO,Mg,dm,VA;const Jt=class Jt{constructor({name:e=null,port:t=null,verbosity:n=nG()}={}){T(this,Qr);T(this,Jc,Promise.withResolvers());T(this,qi,null);T(this,cl,null);T(this,ih,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(c(Jt,oh).has(t))throw new Error("Cannot use more than one PDFWorker per port.");c(Jt,oh).set(t,this),P(this,Qr,eO).call(this,t)}else P(this,Qr,tO).call(this)}get promise(){return c(this,Jc).promise}get port(){return c(this,cl)}get messageHandler(){return c(this,qi)}destroy(){var e,t;this.destroyed=!0,(e=c(this,ih))==null||e.terminate(),x(this,ih,null),c(Jt,oh).delete(c(this,cl)),x(this,cl,null),(t=c(this,qi))==null||t.destroy(),x(this,qi,null)}static create(e){const t=c(this,oh).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Jt(e)}static get workerSrc(){if(to.workerSrc)return to.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Xe(this,"_setupFakeWorkerGlobal",(async()=>c(this,dm,VA)?c(this,dm,VA):(await import(this.workerSrc)).WorkerMessageHandler)())}};Jc=new WeakMap,qi=new WeakMap,cl=new WeakMap,ih=new WeakMap,J_=new WeakMap,ah=new WeakMap,oh=new WeakMap,Qr=new WeakSet,BA=function(){c(this,Jc).resolve(),c(this,qi).send("configure",{verbosity:this.verbosity})},eO=function(e){x(this,cl,e),x(this,qi,new kg("main","worker",e)),c(this,qi).on("ready",()=>{}),P(this,Qr,BA).call(this)},tO=function(){if(c(Jt,ah)||c(Jt,dm,VA)){P(this,Qr,Mg).call(this);return}let{workerSrc:e}=Jt;try{Jt._isSameOrigin(window.location,e)||(e=Jt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new kg("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?c(this,Jc).reject(new Error("Worker was destroyed")):P(this,Qr,Mg).call(this)},i=new AbortController;t.addEventListener("error",()=>{c(this,ih)||r()},{signal:i.signal}),n.on("test",u=>{if(i.abort(),this.destroyed||!u){r();return}x(this,qi,n),x(this,cl,t),x(this,ih,t),P(this,Qr,BA).call(this)}),n.on("ready",u=>{if(i.abort(),this.destroyed){r();return}try{a()}catch{P(this,Qr,Mg).call(this)}});const a=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};a();return}catch{Vx("The worker has been disabled.")}P(this,Qr,Mg).call(this)},Mg=function(){c(Jt,ah)||(Ke("Setting up fake worker."),x(Jt,ah,!0)),Jt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){c(this,Jc).reject(new Error("Worker was destroyed"));return}const t=new RG;x(this,cl,t);const n=`fake${jn(Jt,J_)._++}`,r=new kg(n+"_worker",n,t);e.setup(r,t),x(this,qi,new kg(n,n+"_worker",t)),P(this,Qr,BA).call(this)}).catch(e=>{c(this,Jc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},dm=new WeakSet,VA=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},T(Jt,dm),T(Jt,J_,0),T(Jt,ah,!1),T(Jt,oh,new WeakMap),Gr&&(x(Jt,ah,!0),to.workerSrc||(to.workerSrc="./pdf.worker.mjs")),Jt._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},Jt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Jt.fromPort=e=>{if(fG("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Jt.create(e)};let hy=Jt;var Rs,ul,dl,Ai,Zc,hm,hl,cs,Ys,nO,Lg,UA;class Eq{constructor(e,t,n,r,i){T(this,Ys);ae(this,"downloadInfoCapability",Promise.withResolvers());T(this,Rs,null);T(this,ul,new Map);T(this,dl,null);T(this,Ai,new Map);T(this,Zc,new Map);T(this,hm,new Map);T(this,hl,null);T(this,cs,uy.instance);this.messageHandler=e,this.loadingTask=t,x(this,dl,n),this.commonObjs=new qL,this.fontLoader=new CG({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),c(this,cs).addListener(P(this,Ys,nO).bind(this))}get annotationStorage(){return Xe(this,"annotationStorage",new zS)}getRenderingIntent(e,t=bc.ENABLE,n=null,r=!1,i=!1){let a=Gs.DISPLAY,u=gC;switch(e){case"any":a=Gs.ANY;break;case"display":break;case"print":a=Gs.PRINT;break;default:Ke(`getRenderingIntent - invalid intent: ${e}`)}const d=a&Gs.PRINT&&n instanceof AL?n:this.annotationStorage;switch(t){case bc.DISABLE:a+=Gs.ANNOTATIONS_DISABLE;break;case bc.ENABLE:break;case bc.ENABLE_FORMS:a+=Gs.ANNOTATIONS_FORMS;break;case bc.ENABLE_STORAGE:a+=Gs.ANNOTATIONS_STORAGE,u=d.serializable;break;default:Ke(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=Gs.IS_EDITING),i&&(a+=Gs.OPLIST);const{ids:h,hash:f}=d.modifiedIds,g=[a,u.hash,f];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,hl))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,Ai).values())e.push(r._destroy());c(this,Ai).clear(),c(this,Zc).clear(),c(this,hm).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),c(this,ul).clear(),this.filterFactory.destroy(),dy.cleanup(),(r=c(this,dl))==null||r.cancelAllRequests(new Mu("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{_t(c(this,dl),"GetReader - no `BasePDFStream` instance available."),x(this,Rs,c(this,dl).getFullReader()),c(this,Rs).onProgress=i=>P(this,Ys,UA).call(this,i),r.onPull=()=>{c(this,Rs).read().then(function({value:i,done:a}){if(a){r.close();return}_t(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{c(this,Rs).cancel(i),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{await c(this,Rs).headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:a}=c(this,Rs);return r&&i&&(c(this,Rs).onProgress=null),{isStreamingSupported:r,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(n,r)=>{_t(c(this,dl),"GetRangeReader - no `BasePDFStream` instance available.");const i=c(this,dl).getRangeReader(n.begin,n.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:a,done:u}){if(u){r.close();return}_t(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{i.cancel(a),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:n})=>{c(this,cs).pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new _q(n,this))}),e.on("DocException",n=>{t._capability.reject(ns(n))}),e.on("PasswordRequest",n=>{x(this,hl,Promise.withResolvers());try{if(!t.onPassword)throw ns(n);const r=i=>{i instanceof Error?c(this,hl).reject(i):c(this,hl).resolve({password:i})};t.onPassword(r,n.code)}catch(r){c(this,hl).reject(r)}return c(this,hl).promise}),e.on("DataLoaded",n=>{P(this,Ys,UA).call(this,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,Ai).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,i])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in i){const w=i.error;Ke(`Error during font loading: ${w}`),this.commonObjs.resolve(n,w);break}const u=new yC(i),d=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(w,v)=>globalThis.FontInspector.fontAdded(w,v):null,h=new FG(u,d,i.extra,i.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:f}=i;_t(f,"The imageRef must be defined.");for(const w of c(this,Ai).values())for(const[,v]of w.objs)if((v==null?void 0:v.ref)===f)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new SG(i));break;case"Image":this.commonObjs.resolve(n,i);break;case"Pattern":const g=new wC(i);this.commonObjs.resolve(n,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,i,a])=>{var d;if(this.destroyed)return;const u=c(this,Ai).get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=a==null?void 0:a.bitmap)==null||d.close();return}switch(i){case"Image":case"Pattern":u.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{this.destroyed||P(this,Ys,UA).call(this,n)}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ke("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=c(this,Rs))==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>c(this,cs).pagesNumber)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=c(this,cs).getPageId(e)-1,r=c(this,Zc).get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&c(this,hm).set(a.refStr,n);const u=new xq(t,a,this,this._params.pdfBug);return c(this,Ai).set(t,u),u});return c(this,Zc).set(t,i),i}async getPageIndex(e){if(!vC(e))throw new Error("Invalid pageIndex request.");const t=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return c(this,cs).getPageNumber(t+1)-1}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c(this,cs).getPageId(e+1)-1,intent:t})}getFieldObjects(){return P(this,Ys,Lg).call(this,"GetFieldObjects")}hasJSActions(){return P(this,Ys,Lg).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return P(this,Ys,Lg).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c(this,cs).getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c(this,cs).getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return P(this,Ys,Lg).call(this,"GetOptionalContentConfig").then(t=>new nq(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,ul).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,a;return{info:r[0],metadata:r[1]?new eq(r[1]):null,contentDispositionFilename:((i=c(this,Rs))==null?void 0:i.filename)??null,contentLength:((a=c(this,Rs))==null?void 0:a.contentLength)??null,hasStructTree:r[2]}});return c(this,ul).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,Ai).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,ul).clear(),this.filterFactory.destroy(!0),dy.cleanup()}}cachedPageNumber(e){if(!vC(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,n=c(this,hm).get(t);return n>=0?c(this,cs).getPageNumber(n+1):null}}Rs=new WeakMap,ul=new WeakMap,dl=new WeakMap,Ai=new WeakMap,Zc=new WeakMap,hm=new WeakMap,hl=new WeakMap,cs=new WeakMap,Ys=new WeakSet,nO=function(){const e=new Map,t=new Map;for(let n=0,r=c(this,cs).pagesNumber;n<r;n++){const i=c(this,cs).getPrevPageNumber(n+1)-1,a=c(this,Ai).get(i);a&&e.set(n,a);const u=c(this,Zc).get(i);u&&t.set(n,u)}x(this,Ai,e),x(this,Zc,t)},Lg=function(e,t=null){const n=c(this,ul).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return c(this,ul).set(e,r),r},UA=function({loaded:e,total:t}){var n,r;(r=(n=this.loadingTask).onProgress)==null||r.call(n,{loaded:e,total:t,percent:mr(Math.round(e/t*100),0,100)})};class bq{constructor(e){ae(this,"_internalRenderTask",null);ae(this,"onContinue",null);ae(this,"onError",null);this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this._internalRenderTask;return e.form||e.canvas&&(t==null?void 0:t.size)>0}}var eu,lh;const _d=class _d{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:a,pageIndex:u,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:w=null,enableHWA:v=!1,operationsFilter:F=null}){T(this,eu,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=g,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new bq(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=v,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=F}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var d,h;if(this.cancelled)return;if(this._canvas){if(c(_d,lh).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(_d,lh).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:i,dependencyTracker:a}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new yf(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(e=null,t=0){var n,r,i;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,eu)&&(window.cancelAnimationFrame(c(this,eu)),x(this,eu,null)),c(_d,lh).delete(this._canvas),e||(e=new jS(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,eu,window.requestAnimationFrame(()=>{x(this,eu,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(_d,lh).delete(this._canvas),this.callback())))}};eu=new WeakMap,lh=new WeakMap,T(_d,lh,new WeakSet);let LC=_d;const Cq="5.4.624",Fq="384c6208b";var Ds,ch,pm,Hn,Cw,fm,pl,Fw,tu,Qi,Sw,Mt,OC,BC,VC,yd,rO,yc;const rs=class rs{constructor({editor:e=null,uiManager:t=null}){T(this,Mt);T(this,Ds,null);T(this,ch,null);T(this,pm);T(this,Hn,null);T(this,Cw,!1);T(this,fm,!1);T(this,pl,null);T(this,Fw);T(this,tu,null);T(this,Qi,null);var n,r;e?(x(this,fm,!1),x(this,pl,e)):x(this,fm,!0),x(this,Qi,(e==null?void 0:e._uiManager)||t),x(this,Fw,c(this,Qi)._eventBus),x(this,pm,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((r=c(this,Qi))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),c(rs,Sw)||x(rs,Sw,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Xe(this,"_keyboardManager",new I0([[["Escape","mac+Escape"],rs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],rs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],rs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],rs.prototype._moveToPrevious],[["Home","mac+Home"],rs.prototype._moveToBeginning],[["End","mac+End"],rs.prototype._moveToEnd]]))}renderButton(){const e=x(this,Ds,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",c(this,pl)&&(e.ariaControls=`${c(this,pl).id}_colorpicker_dropdown`);const t=c(this,Qi)._signal;e.addEventListener("click",P(this,Mt,yd).bind(this),{signal:t}),e.addEventListener("keydown",P(this,Mt,VC).bind(this),{signal:t});const n=x(this,ch,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=c(this,pm),e.append(n),e}renderMainDropdown(){const e=x(this,Hn,P(this,Mt,OC).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===c(this,Ds)){P(this,Mt,yd).call(this,e);return}const t=e.target.getAttribute("data-color");t&&P(this,Mt,BC).call(this,t,e)}_moveToNext(e){var t,n;if(!c(this,Mt,yc)){P(this,Mt,yd).call(this,e);return}if(e.target===c(this,Ds)){(t=c(this,Hn).firstElementChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=c(this,Hn))==null?void 0:t.firstElementChild)||e.target===c(this,Ds)){c(this,Mt,yc)&&this._hideDropdownFromKeyboard();return}c(this,Mt,yc)||P(this,Mt,yd).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!c(this,Mt,yc)){P(this,Mt,yd).call(this,e);return}(t=c(this,Hn).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Mt,yc)){P(this,Mt,yd).call(this,e);return}(t=c(this,Hn).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,Hn))==null||e.classList.add("hidden"),c(this,Ds).ariaExpanded="false",(t=c(this,tu))==null||t.abort(),x(this,tu,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,fm)){if(!c(this,Mt,yc)){(e=c(this,pl))==null||e.unselect();return}this.hideDropdown(),c(this,Ds).focus({preventScroll:!0,focusVisible:c(this,Cw)})}}updateColor(e){if(c(this,ch)&&(c(this,ch).style.backgroundColor=e),!c(this,Hn))return;const t=c(this,Qi).highlightColors.values();for(const n of c(this,Hn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=c(this,Ds))==null||e.remove(),x(this,Ds,null),x(this,ch,null),(t=c(this,Hn))==null||t.remove(),x(this,Hn,null)}};Ds=new WeakMap,ch=new WeakMap,pm=new WeakMap,Hn=new WeakMap,Cw=new WeakMap,fm=new WeakMap,pl=new WeakMap,Fw=new WeakMap,tu=new WeakMap,Qi=new WeakMap,Sw=new WeakMap,Mt=new WeakSet,OC=function(){const e=document.createElement("div"),t=c(this,Qi)._signal;e.addEventListener("contextmenu",ki,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,pl)&&(e.id=`${c(this,pl).id}_colorpicker_dropdown`);for(const[n,r]of c(this,Qi).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",c(rs,Sw)[n]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=r,i.ariaSelected=r===c(this,pm),i.addEventListener("click",P(this,Mt,BC).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",P(this,Mt,VC).bind(this),{signal:t}),e},BC=function(e,t){t.stopPropagation(),c(this,Fw).dispatch("switchannotationeditorparams",{source:this,type:dt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},VC=function(e){rs._keyboardManager.exec(this,e)},yd=function(e){if(c(this,Mt,yc)){this.hideDropdown();return}if(x(this,Cw,e.detail===0),c(this,tu)||(x(this,tu,new AbortController),window.addEventListener("pointerdown",P(this,Mt,rO).bind(this),{signal:c(this,Qi).combinedSignal(c(this,tu))})),c(this,Ds).ariaExpanded="true",c(this,Hn)){c(this,Hn).classList.remove("hidden");return}const t=x(this,Hn,P(this,Mt,OC).call(this));c(this,Ds).append(t)},rO=function(e){var t;(t=c(this,Hn))!=null&&t.contains(e.target)||this.hideDropdown()},yc=function(){return c(this,Hn)&&!c(this,Hn).classList.contains("hidden")},T(rs,Sw,null);let M_=rs;var Ga,Tw,mm,kw;const xd=class xd{constructor(e){T(this,Ga,null);T(this,Tw,null);T(this,mm,null);x(this,Tw,e),x(this,mm,e._uiManager),c(xd,kw)||x(xd,kw,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,Ga))return c(this,Ga);const{editorType:e,colorType:t,color:n}=c(this,Tw),r=x(this,Ga,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",c(xd,kw)[e]),r.addEventListener("input",()=>{c(this,mm).updateParams(t,r.value)},{signal:c(this,mm)._signal}),r}update(e){c(this,Ga)&&(c(this,Ga).value=e)}destroy(){var e;(e=c(this,Ga))==null||e.remove(),x(this,Ga,null)}hideDropdown(){}};Ga=new WeakMap,Tw=new WeakMap,mm=new WeakMap,kw=new WeakMap,T(xd,kw,null);let L_=xd;function qR(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function dg(s){return Math.max(0,Math.min(255,255*s))}class QR{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=dg(e),[e,e,e]}static G_HTML([e]){const t=qR(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(dg)}static RGB_HTML(e){return`#${e.map(qR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[dg(1-Math.min(1,e+r)),dg(1-Math.min(1,n+r)),dg(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,i=1-t,a=1-n,u=Math.min(r,i,a);return["CMYK",r,i,a,u]}}class Sq{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){xt("Abstract method `_createSVG` called.")}}class O_ extends Sq{_createSVG(e){return document.createElementNS(Bo,e)}}const Tq=9,Xh=new WeakSet,kq=new Date().getTimezoneOffset()*60*1e3;class YE{static create(e){switch(e.data.annotationType){case Rn.LINK:return new GS(e);case Rn.TEXT:return new Pq(e);case Rn.WIDGET:switch(e.data.fieldType){case"Tx":return new Rq(e);case"Btn":return e.data.radioButton?new aO(e):e.data.checkBox?new Nq(e):new Mq(e);case"Ch":return new Lq(e);case"Sig":return new Dq(e)}return new ip(e);case Rn.POPUP:return new jC(e);case Rn.FREETEXT:return new dO(e);case Rn.LINE:return new Bq(e);case Rn.SQUARE:return new Vq(e);case Rn.CIRCLE:return new Uq(e);case Rn.POLYLINE:return new hO(e);case Rn.CARET:return new $q(e);case Rn.INK:return new qS(e);case Rn.POLYGON:return new jq(e);case Rn.HIGHLIGHT:return new pO(e);case Rn.UNDERLINE:return new zq(e);case Rn.SQUIGGLY:return new Hq(e);case Rn.STRIKEOUT:return new Wq(e);case Rn.STAMP:return new fO(e);case Rn.FILEATTACHMENT:return new Gq(e);default:return new cn(e)}}}var uh,gm,_i,Iw,UC;const rT=class rT{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){T(this,Iw);T(this,uh,null);T(this,gm,!1);T(this,_i,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return rT._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const e=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:r}=this.data;let i=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let d=0;d<t.length;d+=8)t[d+1]>a?(a=t[d+1],i=t[d+2]):t[d+1]===a&&(i=Math.max(i,t[d+2]));return[i,a]}if((n==null?void 0:n.length)>=1){for(const d of n)for(let h=0,f=d.length;h<f;h+=2)d[h+1]>a?(a=d[h+1],i=d[h]):d[h+1]===a&&(i=Math.max(i,d[h]));if(i!==1/0)return[i,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/n,e[1]=100*(e[1]-a)/r,e}get commentText(){var t,n,r;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${oy}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${oy}${t.id}`,{id:t.id,annotationType:t.annotationType,page:this.parent.page,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=c(this,_i))==null?void 0:e.popup)||this.popup)==null||t.remove(),x(this,_i,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(c(this,uh)||x(this,uh,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&P(this,Iw,UC).call(this,t);let r=((i=c(this,_i))==null?void 0:i.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=c(this,_i).popup),r&&(r.updateEdited(e),n!=null&&n.deleted&&(r.remove(),x(this,_i,null),this.popup=null))}resetEdited(){var e;c(this,uh)&&(P(this,Iw,UC).call(this,c(this,uh).rect),(e=c(this,_i))==null||e.popup.resetEdited(),x(this,uh,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof ip)&&!(this instanceof GS)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof jC){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,i),i}const{width:u,height:d}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(C>0||S>0){const O=`calc(${C}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;a.borderRadius=O}else if(this instanceof aO){const O=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;a.borderRadius=O}switch(t.borderStyle.style){case Kp.SOLID:a.borderStyle="solid";break;case Kp.DASHED:a.borderStyle="dashed";break;case Kp.BEVELED:Ke("Unimplemented border style: beveled");break;case Kp.INSET:Ke("Unimplemented border style: inset");break;case Kp.UNDERLINE:a.borderBottomStyle="solid";break}const I=t.borderColor||null;I?(x(this,gm,!0),a.borderColor=Fe.makeHexColor(I[0]|0,I[1]|0,I[2]|0)):a.borderWidth=0}const h=Fe.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:g,pageX:w,pageY:v}=r.rawDims;a.left=`${100*(h[0]-w)/f}%`,a.top=`${100*(h[1]-v)/g}%`;const{rotation:F}=t;return t.hasOwnCanvas||F===0?(a.width=`${100*u/f}%`,a.height=`${100*d/g}%`):this.setRotation(F,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/n}%`,t.style.height=`${100*a/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const i=r.detail[t],a=i[0],u=i.slice(1);r.target.style[n]=QR[`${a}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:QR[`${a}_rgb`](u)})};return Xe(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const a=n[r];if(a){const u={detail:{[r]:i},target:e};a(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,S,I,O]=e.subarray(2,6);if(r===C&&i===S&&t===I&&n===O)return}const{style:a}=this.container;let u;if(c(this,gm)){const{borderColor:C,borderWidth:S}=a;a.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const d=r-t,h=i-n,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const w=f.createElement("defs");g.append(w);const v=f.createElement("clipPath"),F=`clippath_${this.data.id}`;v.setAttribute("id",F),v.setAttribute("clipPathUnits","objectBoundingBox"),w.append(v);for(let C=2,S=e.length;C<S;C+=8){const I=e[C],O=e[C+1],R=e[C+2],V=e[C+3],z=f.createElement("rect"),W=(R-t)/d,N=(i-O)/h,D=(I-R)/d,L=(O-V)/h;z.setAttribute("x",W),z.setAttribute("y",N),z.setAttribute("width",D),z.setAttribute("height",L),v.append(z),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${W}" y="${N}" width="${D}" height="${L}"/>`)}c(this,gm)&&(u.push("</g></svg>')"),a.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${F})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate),x(this,_i,new jC({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(c(this,_i)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,_i)}render(){xt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:a,exportValues:u}of r){if(i===-1||a===t)continue;const d=typeof u=="string"?u:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Xh.has(h)){Ke(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:d,domElement:h})}return n}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,a=r.getAttribute("data-element-id");a!==t&&Xh.has(r)&&n.push({id:a,exportValue:i,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};uh=new WeakMap,gm=new WeakMap,_i=new WeakMap,Iw=new WeakSet,UC=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-u)/i}%`,t.top=`${100*(a-e[3]+d)/a}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)};let cn=rT;class Iq extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Qs,wd,sO,iO;class GS extends cn{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});T(this,Qs);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(P(this,Qs,sO).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(P(this,Qs,iO).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(t,n,r=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&P(this,Qs,wd).call(this),r&&(t.title=r)}_bindNamedAction(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(t.title=r),P(this,Qs,wd).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const a=r.get(i);a&&(t[a]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),P(this,Qs,wd).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),P(this,Qs,wd).call(this),!this._fieldObjects){Ke('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var g;r==null||r();const{fields:i,refs:a,include:u}=n,d=[];if(i.length!==0||a.length!==0){const w=new Set(a);for(const v of i){const F=this._fieldObjects[v]||[];for(const{id:C}of F)w.add(C)}for(const v of Object.values(this._fieldObjects))for(const F of v)w.has(F.id)===u&&d.push(F)}else for(const w of Object.values(this._fieldObjects))d.push(...w);const h=this.annotationStorage,f=[];for(const w of d){const{id:v}=w;switch(f.push(v),w.type){case"text":{const C=w.defaultValue||"";h.setValue(v,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;h.setValue(v,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";h.setValue(v,{value:C});break}default:continue}const F=document.querySelector(`[data-element-id="${v}"]`);if(F){if(!Xh.has(F)){Ke(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;F.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}Qs=new WeakSet,wd=function(){this.container.setAttribute("data-internal-link","")},sO=function(t,n,r="",i=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:r&&(t.title=r),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,i),!1},P(this,Qs,wd).call(this)},iO=function(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(t.title=r),P(this,Qs,wd).call(this)};class Pq extends cn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class ip extends cn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return qn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,a=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var u;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a)}}))})}_setEventListeners(e,t,n,r){var i,a,u;for(const[d,h]of n)(h==="Action"||(i=this.data.actions)!=null&&i[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,h,r),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Fe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Tq,i=e.style;let a;const u=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u),f=Math.round(h/(HE*r))||1,g=h/f;a=Math.min(r,d(g/HE))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u);a=Math.min(r,d(h/HE))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=Fe.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Rq extends ip{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[r]:n})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let u=a.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let h=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const f={userValue:u,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",h??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Xh.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:w,timeStep:v}=this.data,F=!!w&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",S=>{e.setValue(t,{value:S.target.value}),this.setPropertyOnSiblings(n,"value",S.target.value,"value"),f.formattedValue=null}),n.addEventListener("resetform",S=>{const I=this.data.defaultFieldValue??"";n.value=f.userValue=I,f.formattedValue=null});let C=S=>{const{formattedValue:I}=f;I!=null&&(S.target.value=I),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",I=>{var R;if(f.focused)return;const{target:O}=I;if(F&&(O.type=w,v&&(O.step=v)),f.userValue){const V=f.userValue;if(F)if(w==="time"){const z=new Date(V),W=[z.getHours(),z.getMinutes(),z.getSeconds()];O.value=W.map(N=>N.toString().padStart(2,"0")).join(":")}else O.value=new Date(V-kq).toISOString().split(w==="date"?"T":".",1)[0];else O.value=V}f.lastCommittedValue=O.value,f.commitKey=1,(R=this.data.actions)!=null&&R.Focus||(f.focused=!0)}),n.addEventListener("updatefromsandbox",I=>{this.showElementAndHideCanvas(I.target);const O={value(R){f.userValue=R.detail.value??"",F||e.setValue(t,{value:f.userValue.toString()}),R.target.value=f.userValue},formattedValue(R){const{formattedValue:V}=R.detail;f.formattedValue=V,V!=null&&R.target!==document.activeElement&&(R.target.value=V);const z={formattedValue:V};F&&(z.value=V),e.setValue(t,z)},selRange(R){R.target.setSelectionRange(...R.detail.selRange)},charLimit:R=>{var N;const{charLimit:V}=R.detail,{target:z}=R;if(V===0){z.removeAttribute("maxLength");return}z.setAttribute("maxLength",V);let W=f.userValue;!W||W.length<=V||(W=W.slice(0,V),z.value=f.userValue=W,e.setValue(t,{value:W}),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:W,willCommit:!0,commitKey:1,selStart:z.selectionStart,selEnd:z.selectionEnd}}))}};this._dispatchEventFromSandbox(O,I)}),n.addEventListener("keydown",I=>{var V;f.commitKey=1;let O=-1;if(I.key==="Escape"?O=0:I.key==="Enter"&&!this.data.multiLine?O=2:I.key==="Tab"&&(f.commitKey=3),O===-1)return;const{value:R}=I.target;f.lastCommittedValue!==R&&(f.lastCommittedValue=R,f.userValue=R,(V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:O,selStart:I.target.selectionStart,selEnd:I.target.selectionEnd}}))});const S=C;C=null,n.addEventListener("blur",I=>{var V,z;if(!f.focused||!I.relatedTarget)return;(V=this.data.actions)!=null&&V.Blur||(f.focused=!1);const{target:O}=I;let{value:R}=O;if(F){if(R&&w==="time"){const W=R.split(":").map(N=>parseInt(N,10));R=new Date(2e3,0,1,W[0],W[1],W[2]||0).valueOf(),O.step=""}else R.includes("T")||(R=`${R}T00:00`),R=new Date(R).valueOf();O.type="text"}f.userValue=R,f.lastCommittedValue!==R&&((z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:f.commitKey,selStart:I.target.selectionStart,selEnd:I.target.selectionEnd}})),S(I)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",I=>{var L;f.lastCommittedValue=null;const{data:O,target:R}=I,{value:V,selectionStart:z,selectionEnd:W}=R;let N=z,D=W;switch(I.inputType){case"deleteWordBackward":{const U=V.substring(0,z).match(/\w*[^\w]*$/);U&&(N-=U[0].length);break}case"deleteWordForward":{const U=V.substring(z).match(/^[^\w]*\w*/);U&&(D+=U[0].length);break}case"deleteContentBackward":z===W&&(N-=1);break;case"deleteContentForward":z===W&&(D+=1);break}I.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:V,change:O||"",willCommit:!1,selStart:N,selEnd:D}})}),this._setEventListeners(n,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],I=>I.target.value)}if(C&&n.addEventListener("blur",C),this.data.comb){const I=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${I}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Dq extends ip{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Nq extends ip{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Xh.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:u,checked:d}=a.target;for(const h of this._getElementsByName(u,n)){const f=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(n,{value:d})}),i.addEventListener("resetform",a=>{const u=t.defaultFieldValue||"Off";a.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const u={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class aO extends ip{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Xh.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:u,checked:d}=a.target;for(const h of this._getElementsByName(u,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:d})}),i.addEventListener("resetform",a=>{const u=t.defaultFieldValue;a.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",u=>{const d={value:h=>{const f=a===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const w=f&&g.id===n;g.domElement&&(g.domElement.checked=w),e.setValue(g.id,{value:w})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Mq extends GS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class Lq extends ip{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Xh.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,n.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),i=!1),r.append(g)}let a=null;if(i){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),a=()=>{f.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const u=f=>{const g=f?"value":"textContent",{options:w,multiple:v}=r;return v?Array.prototype.filter.call(w,F=>F.selected).map(F=>F[g]):w.selectedIndex===-1?null:w[w.selectedIndex][g]};let d=u(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const g={value(w){a==null||a();const v=w.detail.value,F=new Set(Array.isArray(v)?v:[v]);for(const C of r.options)C.selected=F.has(C.value);e.setValue(t,{value:u(!0)}),d=u(!1)},multipleSelection(w){r.multiple=!0},remove(w){const v=r.options,F=w.detail.remove;v[F].selected=!1,r.remove(F),v.length>0&&Array.prototype.findIndex.call(v,S=>S.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},clear(w){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=u(!1)},insert(w){const{index:v,displayValue:F,exportValue:C}=w.detail.insert,S=r.children[v],I=document.createElement("option");I.textContent=F,I.value=C,S?S.before(I):r.append(I),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},items(w){const{items:v}=w.detail;for(;r.length!==0;)r.remove(0);for(const F of v){const{displayValue:C,exportValue:S}=F,I=document.createElement("option");I.textContent=C,I.value=S,r.append(I)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},indices(w){const v=new Set(w.detail.indices);for(const F of w.target.options)F.selected=v.has(F.index);e.setValue(t,{value:u(!0)}),d=u(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(g,f)}),r.addEventListener("input",f=>{var v;const g=u(!0),w=u(!1);e.setValue(t,{value:g}),f.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:w,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Pw,$C;class jC extends cn{constructor(t){const{data:n,elements:r,parent:i}=t,a=!!i._commentManager;super(t,{isRenderable:!a&&cn._hasPopupData(n)});T(this,Pw);if(this.elements=r,a&&cn._hasPopupData(n)){const u=this.popup=P(this,Pw,$C).call(this);for(const d of r)d.popup=u}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=P(this,Pw,$C).call(this),r=[];for(const i of this.elements)i.popup=n,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${sf}${i}`).join(",")),this.container}}Pw=new WeakSet,$C=function(){return new Oq({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Ns,nu,Z_,ex,ym,wm,fn,qa,ru,dh,vm,Am,Qa,Ms,fl,ml,mn,gl,su,Rw,yl,_m,hh,iu,Jn,au,nt,jA,zC,HC,WC,$A,GC,oO,lO,cO,uO,zA,HA,qC;class Oq{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:i,contentsObj:a,richText:u,parent:d,rect:h,parentRect:f,open:g,commentManager:w=null}){T(this,nt);T(this,Ns,null);T(this,nu,P(this,nt,cO).bind(this));T(this,Z_,P(this,nt,qC).bind(this));T(this,ex,P(this,nt,HA).bind(this));T(this,ym,P(this,nt,zA).bind(this));T(this,wm,null);T(this,fn,null);T(this,qa,null);T(this,ru,null);T(this,dh,null);T(this,vm,null);T(this,Am,null);T(this,Qa,!1);T(this,Ms,null);T(this,fl,null);T(this,ml,null);T(this,mn,null);T(this,gl,null);T(this,su,null);T(this,Rw,null);T(this,yl,null);T(this,_m,null);T(this,hh,null);T(this,iu,!1);T(this,Jn,null);T(this,au,null);x(this,fn,e),x(this,_m,r),x(this,qa,a),x(this,yl,u),x(this,vm,d),x(this,wm,t),x(this,Rw,h),x(this,Am,f),x(this,dh,n),x(this,Ns,w),x(this,Jn,n[0]),x(this,ru,k_.toDateObject(i)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup()),w||(P(this,nt,jA).call(this),c(this,fn).hidden=!0,g&&P(this,nt,zA).call(this))}renderCommentButton(){if(c(this,mn)){c(this,mn).parentNode||c(this,Jn).container.after(c(this,mn));return}if(c(this,gl)||P(this,nt,zC).call(this),!c(this,gl))return;const{signal:e}=x(this,fl,new AbortController),t=c(this,Jn).hasOwnCommentButton,n=()=>{c(this,Ns).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{c(this,Ns).toggleCommentPopup(this,!1,!0,!t)},i=()=>{c(this,Ns).toggleCommentPopup(this,!1,!1)};if(t){x(this,mn,c(this,Jn).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",c(this,nu),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=x(this,mn,document.createElement("button"));a.className="annotationCommentButton";const u=c(this,Jn).container;a.style.zIndex=u.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),P(this,nt,WC).call(this),P(this,nt,HC).call(this),a.addEventListener("keydown",c(this,nu),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),u.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=c(this,Jn).commentData;return e?c(this,vm)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=c(this,mn))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}=c(this,Jn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}}get elementBeforePopup(){return c(this,mn)}get comment(){return c(this,au)||x(this,au,c(this,Jn).commentText),c(this,au)}set comment(e){e!==this.comment&&(c(this,Jn).commentText=x(this,au,e))}focus(){var e;(e=c(this,Jn).container)==null||e.focus()}get parentBoundingClientRect(){return c(this,Jn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){c(this,mn)&&(c(this,mn).classList.toggle("selected",e),c(this,mn).ariaExpanded=t)}setSelectedCommentButton(e){c(this,mn).classList.toggle("selected",e)}get commentPopupPosition(){if(c(this,su))return c(this,su);const{x:e,y:t,height:n}=c(this,mn).getBoundingClientRect(),{x:r,y:i,width:a,height:u}=c(this,Jn).layer.getBoundingClientRect();return[(e-r)/a,(t+n-i)/u]}set commentPopupPosition(e){x(this,su,e)}hasDefaultPopupPosition(){return c(this,su)===null}get commentButtonPosition(){return c(this,gl)}get commentButtonWidth(){return c(this,mn).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=c(this,su)||this.commentButtonPosition.map(h=>h/100),r=this.parentBoundingClientRect,{x:i,y:a,width:u,height:d}=r;c(this,Ns).showDialog(null,this,i+t*u,a+n*d,{...e,parentDimensions:r})}render(){var n,r;if(c(this,Ms))return;const e=x(this,Ms,document.createElement("div"));if(e.className="popup",c(this,wm)){const i=e.style.outlineColor=Fe.makeHexColor(...c(this,wm));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=c(this,_m))!=null&&n.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=c(this,_m)}if(e.append(t),c(this,ru)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,ru).valueOf()})),i.dateTime=c(this,ru).toISOString(),t.append(i)}OM({html:c(this,nt,$A)||c(this,qa).str,dir:(r=c(this,qa))==null?void 0:r.dir,className:"popupContent"},e),c(this,fn).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var r;if(c(this,Ns)){n?(this.remove(),x(this,au,null)):t&&(t.deleted?this.remove():(P(this,nt,WC).call(this),x(this,au,t.text))),e&&(x(this,gl,null),P(this,nt,zC).call(this),P(this,nt,HC).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}P(this,nt,jA).call(this),c(this,hh)||x(this,hh,{contentsObj:c(this,qa),richText:c(this,yl)}),e&&x(this,ml,null),t&&t.text&&(x(this,yl,P(this,nt,lO).call(this,t.text)),x(this,ru,k_.toDateObject(t.date)),x(this,qa,null)),(r=c(this,Ms))==null||r.remove(),x(this,Ms,null)}resetEdited(){var e;c(this,hh)&&({contentsObj:jn(this,qa)._,richText:jn(this,yl)._}=c(this,hh),x(this,hh,null),(e=c(this,Ms))==null||e.remove(),x(this,Ms,null),x(this,ml,null))}remove(){var e,t,n;if((e=c(this,fl))==null||e.abort(),x(this,fl,null),(t=c(this,Ms))==null||t.remove(),x(this,Ms,null),x(this,iu,!1),x(this,Qa,!1),(n=c(this,mn))==null||n.remove(),x(this,mn,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){x(this,iu,this.isVisible),c(this,iu)&&(c(this,fn).hidden=!0)}maybeShow(){c(this,Ns)||(P(this,nt,jA).call(this),c(this,iu)&&(c(this,Ms)||P(this,nt,HA).call(this),x(this,iu,!1),c(this,fn).hidden=!1))}get isVisible(){return c(this,Ns)?!1:c(this,fn).hidden===!1}}Ns=new WeakMap,nu=new WeakMap,Z_=new WeakMap,ex=new WeakMap,ym=new WeakMap,wm=new WeakMap,fn=new WeakMap,qa=new WeakMap,ru=new WeakMap,dh=new WeakMap,vm=new WeakMap,Am=new WeakMap,Qa=new WeakMap,Ms=new WeakMap,fl=new WeakMap,ml=new WeakMap,mn=new WeakMap,gl=new WeakMap,su=new WeakMap,Rw=new WeakMap,yl=new WeakMap,_m=new WeakMap,hh=new WeakMap,iu=new WeakMap,Jn=new WeakMap,au=new WeakMap,nt=new WeakSet,jA=function(){var t;if(c(this,fl))return;x(this,fl,new AbortController);const{signal:e}=c(this,fl);for(const n of this.trigger)n.addEventListener("click",c(this,ym),{signal:e}),n.addEventListener("pointerenter",c(this,ex),{signal:e}),n.addEventListener("pointerleave",c(this,Z_),{signal:e}),n.classList.add("popupTriggerArea");for(const n of c(this,dh))(t=n.container)==null||t.addEventListener("keydown",c(this,nu),{signal:e})},zC=function(){const e=c(this,dh).find(t=>t.hasCommentButton);e&&x(this,gl,e._normalizePoint(e.commentButtonPosition))},HC=function(){if(c(this,Jn).extraPopupElement&&!c(this,Jn).editor)return;c(this,mn)||this.renderCommentButton();const[e,t]=c(this,gl),{style:n}=c(this,mn);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},WC=function(){c(this,Jn).extraPopupElement||(c(this,mn)||this.renderCommentButton(),c(this,mn).style.backgroundColor=this.commentButtonColor||"")},$A=function(){const e=c(this,yl),t=c(this,qa);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,yl).html||null},GC=function(){var e,t,n;return((n=(t=(e=c(this,nt,$A))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},oO=function(){var e,t,n;return((n=(t=(e=c(this,nt,$A))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},lO=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,nt,oO),fontSize:c(this,nt,GC)?`calc(${c(this,nt,GC)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return n},cO=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,Qa))&&P(this,nt,zA).call(this)},uO=function(){if(c(this,ml)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=c(this,vm);let a=!!c(this,Am),u=a?c(this,Am):c(this,Rw);for(const F of c(this,dh))if(!u||Fe.intersect(F.data.rect,u)!==null){u=F.data.rect,a=!0;break}const d=Fe.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),f=a?u[2]-u[0]+5:0,g=d[0]+f,w=d[1];x(this,ml,[100*(g-r)/t,100*(w-i)/n]);const{style:v}=c(this,fn);v.left=`${c(this,ml)[0]}%`,v.top=`${c(this,ml)[1]}%`},zA=function(){if(c(this,Ns)){c(this,Ns).toggleCommentPopup(this,!1);return}x(this,Qa,!c(this,Qa)),c(this,Qa)?(P(this,nt,HA).call(this),c(this,fn).addEventListener("click",c(this,ym)),c(this,fn).addEventListener("keydown",c(this,nu))):(P(this,nt,qC).call(this),c(this,fn).removeEventListener("click",c(this,ym)),c(this,fn).removeEventListener("keydown",c(this,nu)))},HA=function(){c(this,Ms)||this.render(),this.isVisible?c(this,Qa)&&c(this,fn).classList.add("focused"):(P(this,nt,uO).call(this),c(this,fn).hidden=!1,c(this,fn).style.zIndex=parseInt(c(this,fn).style.zIndex)+1e3)},qC=function(){c(this,fn).classList.remove("focused"),!(c(this,Qa)||!this.isVisible)&&(c(this,fn).hidden=!0,c(this,fn).style.zIndex=parseInt(c(this,fn).style.zIndex)-1e3)};class dO extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ze.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Dw;class Bq extends cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Dw,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),a=x(this,Dw,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Dw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dw=new WeakMap;var Nw;class Vq extends cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Nw,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,u=x(this,Nw,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",a/2),u.setAttribute("y",a/2),u.setAttribute("width",n-a),u.setAttribute("height",r-a),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),i.append(u),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Nw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nw=new WeakMap;var Mw;class Uq extends cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Mw,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,u=x(this,Mw,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",r/2),u.setAttribute("rx",n/2-a/2),u.setAttribute("ry",r/2-a/2),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),i.append(u),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Mw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mw=new WeakMap;var Lw;class hO extends cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Lw,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:i},width:a,height:u}=this;if(!n)return this.container;const d=this.svgFactory.create(a,u,!0);let h=[];for(let g=0,w=n.length;g<w;g+=2){const v=n[g]-t[0],F=t[3]-n[g+1];h.push(`${v},${F}`)}h=h.join(" ");const f=x(this,Lw,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",h),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),d.append(f),this.container.append(d),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Lw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lw=new WeakMap;class jq extends hO{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $q extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Ow,ph,Bw,QC;class qS extends cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Bw);T(this,Ow,null);T(this,ph,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ze.HIGHLIGHT:Ze.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:u,width:d,height:h}=P(this,Bw,QC).call(this,n,t),f=this.svgFactory.create(d,h,!0),g=x(this,Ow,this.svgFactory.createElement("svg:g"));f.append(g),g.setAttribute("stroke-width",i.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",u);for(let w=0,v=r.length;w<v;w++){const F=this.svgFactory.createElement(this.svgElementName);c(this,ph).push(F),F.setAttribute("points",r[w].join(",")),g.append(F)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:i}=t,a=c(this,Ow);if(n>=0&&a.setAttribute("stroke-width",n||1),r)for(let u=0,d=c(this,ph).length;u<d;u++)c(this,ph)[u].setAttribute("points",r[u].join(","));if(i){const{transform:u,width:d,height:h}=P(this,Bw,QC).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${d} ${h}`),a.setAttribute("transform",u)}}getElementsToTriggerPopup(){return c(this,ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ow=new WeakMap,ph=new WeakMap,Bw=new WeakSet,QC=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class pO extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ze.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class zq extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Hq extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Wq extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class fO extends cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ze.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Vw,Uw,KC;class Gq extends cn{constructor(t){var r;super(t,{isRenderable:!0});T(this,Uw);T(this,Vw,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",P(this,Uw,KC).bind(this)),x(this,Vw,r);const{isMac:i}=qn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&P(this,Uw,KC).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,Vw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vw=new WeakMap,Uw=new WeakSet,KC=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var fh,mh,xm,ou,jw,gh,Ls,$w,Il,WA,YC;const sT=class sT{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:i,viewport:a,structTreeLayer:u,commentManager:d,linkService:h,annotationStorage:f}){T(this,Il);T(this,fh,null);T(this,mh,null);T(this,xm,null);T(this,ou,new Map);T(this,jw,null);T(this,gh,null);T(this,Ls,[]);T(this,$w,!1);this.div=e,x(this,fh,t),x(this,mh,n),x(this,jw,u||null),x(this,gh,h||null),x(this,xm,f||new zS),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return c(this,ou).size>0}async render(e){var u;const{annotations:t}=e,n=this.div;Qh(n,this.viewport);const r=new Map,i=[],a={data:null,layer:n,linkService:c(this,gh),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new O_,annotationStorage:c(this,xm),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const h=d.annotationType===Rn.POPUP;if(h){const w=r.get(d.id);if(!w)continue;if(!this._commentManager){i.push(d);continue}a.elements=w}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;a.data=d;const f=YE.create(a);if(!f.isRenderable)continue;if(!h&&(c(this,Ls).push(f),d.popupRef)){const w=r.get(d.popupRef);w?w.push(f):r.set(d.popupRef,[f])}const g=f.render();d.hidden&&(g.style.visibility="hidden"),f._isEditable&&(c(this,ou).set(f.data.id,f),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(f))}await P(this,Il,WA).call(this);for(const d of i){const h=a.elements=r.get(d.id);a.data=d;const f=YE.create(a);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${sf}${d.id}`,d.hidden&&(g.style.visibility="hidden"),h.at(-1).container.after(g)}P(this,Il,YC).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:c(this,gh),svgFactory:new O_,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=sT._defaultBorderStyle),t.data=n;const r=YE.create(t);r.isRenderable&&(r.render(),r.contentElement.id=`${sf}${n.id}`,c(this,Ls).push(r))}await P(this,Il,WA).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Qh(t,{rotation:e.rotation}),P(this,Il,YC).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,ou).values())}getEditableAnnotation(e){return c(this,ou).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:r}=e,i=new Iq({data:{id:n,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:c(this,gh),annotationStorage:c(this,xm)});return i.render(),i.contentElement.id=`${sf}${n}`,i.createOrUpdatePopup(),c(this,Ls).push(i),i}removeAnnotation(e){var r;const t=c(this,Ls).findIndex(i=>i.data.id===e);if(t<0)return;const[n]=c(this,Ls).splice(t,1);(r=c(this,fh))==null||r.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);P(this,Il,WA).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Xe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Kp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};fh=new WeakMap,mh=new WeakMap,xm=new WeakMap,ou=new WeakMap,jw=new WeakMap,gh=new WeakMap,Ls=new WeakMap,$w=new WeakMap,Il=new WeakSet,WA=async function(){var n,r,i;if(c(this,Ls).length===0)return;this.div.replaceChildren();const e=[];if(!c(this,$w)){x(this,$w,!0);for(const{contentElement:a,data:{id:u}}of c(this,Ls)){const d=a.id=`${sf}${u}`;e.push((n=c(this,jw))==null?void 0:n.getAriaAttributes(d).then(h=>{if(h)for(const[f,g]of h)a.setAttribute(f,g)}))}}c(this,Ls).sort(({data:{rect:[a,u,d,h]}},{data:{rect:[f,g,w,v]}})=>{if(a===d&&u===h)return 1;if(f===w&&g===v)return-1;const F=h,C=u,S=(u+h)/2,I=v,O=g,R=(g+v)/2;if(S>=I&&R<=C)return-1;if(R>=F&&S<=O)return 1;const V=(a+d)/2,z=(f+w)/2;return V-z});const t=document.createDocumentFragment();for(const a of c(this,Ls))t.append(a.container),this._commentManager?(i=((r=a.extraPopupElement)==null?void 0:r.popup)||a.popup)==null||i.renderCommentButton():a.extraPopupElement&&t.append(a.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),c(this,fh))for(const a of c(this,Ls))c(this,fh).addPointerInTextLayer(a.contentElement,!1)},YC=function(){var t;if(!c(this,mh))return;const e=this.div;for(const[n,r]of c(this,mh)){const i=e.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):i.append(r);const u=c(this,ou).get(n);u&&(u._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,i.id,r),u._hasNoCanvas=!1):u.canvas=r)}c(this,mh).clear()};let XC=sT;const dA=/\r\n?|\n/g;var Os,zw,yh,Bs,Bn,mO,gO,yO,GA,Pl,qA,QA,wO,ZC,vO;const Kt=class Kt extends Ht{constructor(t){super({...t,name:"freeTextEditor"});T(this,Bn);T(this,Os,"");T(this,zw,`${this.id}-editor`);T(this,yh,null);T(this,Bs);ae(this,"_colorPicker",null);this.color=t.color||Kt._defaultColor||Ht._defaultLineColor,x(this,Bs,t.fontSize||Kt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=Kt.prototype,n=a=>a.isEmpty(),r=Kh.TRANSLATE_SMALL,i=Kh.TRANSLATE_BIG;return Xe(this,"_keyboardManager",new I0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){Ht.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case dt.FREETEXT_SIZE:Kt._defaultFontSize=n;break;case dt.FREETEXT_COLOR:Kt._defaultColor=n;break}}updateParams(t,n){switch(t){case dt.FREETEXT_SIZE:P(this,Bn,mO).call(this,n);break;case dt.FREETEXT_COLOR:P(this,Bn,gO).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[dt.FREETEXT_SIZE,Kt._defaultFontSize],[dt.FREETEXT_COLOR,Kt._defaultColor||Ht._defaultLineColor]]}get propertiesToUpdate(){return[[dt.FREETEXT_SIZE,c(this,Bs)],[dt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new L_(this)),[["colorPicker",this._colorPicker]]}get colorType(){return dt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Kt._internalPadding*t,-(Kt._internalPadding+c(this,Bs))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,yh,new AbortController);const t=this._uiManager.combinedSignal(c(this,yh));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,zw)),this._isDraggable=!0,(t=c(this,yh))==null||t.abort(),x(this,yh,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,Os),n=x(this,Os,P(this,Bn,yO).call(this).trimEnd());if(t===n)return;const r=i=>{if(x(this,Os,i),!i){this.remove();return}P(this,Bn,QA).call(this),this._uiManager.rebuild(this),P(this,Bn,GA).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),P(this,Bn,GA).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Kt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,zw)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,Bs)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,h]=this.getInitialTranslation();[d,h]=this.pageTranslationToScreen(d,h);const[f,g]=this.pageDimensions,[w,v]=this.pageTranslation;let F,C;switch(this.rotation){case 0:F=t+(u[0]-w)/f,C=n+this.height-(u[1]-v)/g;break;case 90:F=t+(u[0]-w)/f,C=n-(u[1]-v)/g,[d,h]=[h,-d];break;case 180:F=t-this.width+(u[0]-w)/f,C=n-(u[1]-v)/g,[d,h]=[-d,-h];break;case 270:F=t+(u[0]-w-this.height*g)/f,C=n+(u[1]-v-this.width*f)/g,[d,h]=[-h,d];break}this.setAt(F*i,C*a,d,h)}else this._moveAfterPaste(t,n);P(this,Bn,QA).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var F,C,S;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=P(F=Kt,Pl,ZC).call(F,n.getData("text")||"").replaceAll(dA,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const u=a.getRangeAt(0);if(!i.includes(`
`)){u.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:d,startOffset:h}=u,f=[],g=[];if(d.nodeType===Node.TEXT_NODE){const I=d.parentElement;if(g.push(d.nodeValue.slice(h).replaceAll(dA,"")),I!==this.editorDiv){let O=f;for(const R of this.editorDiv.childNodes){if(R===I){O=g;continue}O.push(P(C=Kt,Pl,qA).call(C,R))}}f.push(d.nodeValue.slice(0,h).replaceAll(dA,""))}else if(d===this.editorDiv){let I=f,O=0;for(const R of this.editorDiv.childNodes)O++===h&&(I=g),I.push(P(S=Kt,Pl,qA).call(S,R))}x(this,Os,`${f.join(`
`)}${i}${g.join(`
`)}`),P(this,Bn,QA).call(this);const w=new Range;let v=Math.sumPrecise(f.map(I=>I.length));for(const{firstChild:I}of this.editorDiv.childNodes)if(I.nodeType===Node.TEXT_NODE){const O=I.nodeValue.length;if(v<=O){w.setStart(I,v),w.setEnd(I,v);break}v-=O}a.removeAllRanges(),a.addRange(w)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Kt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,r){var u;let i=null;if(t instanceof dO){const{data:{defaultAppearanceData:{fontSize:d,fontColor:h},rect:f,rotation:g,id:w,popupRef:v,richText:F,contentsObj:C,creationDate:S,modificationDate:I},textContent:O,textPosition:R,parent:{page:{pageNumber:V}}}=t;if(!O||O.length===0)return null;i=t={annotationType:Ze.FREETEXT,color:Array.from(h),fontSize:d,value:O.join(`
`),position:R,pageIndex:V-1,rect:f.slice(0),rotation:g,annotationElementId:w,id:w,deleted:!1,popupRef:v,comment:(C==null?void 0:C.str)||null,richText:F,creationDate:S,modificationDate:I}}const a=await super.deserialize(t,n,r);return x(a,Bs,t.fontSize),a.color=Fe.makeHexColor(...t.color),x(a,Os,P(u=Kt,Pl,ZC).call(u,t.value)),a._initialData=i,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ht._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:n,fontSize:c(this,Bs),value:P(this,Bn,wO).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!P(this,Bn,vO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${c(this,Bs)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const i of c(this,Os).split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),n.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,Os)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Os=new WeakMap,zw=new WeakMap,yh=new WeakMap,Bs=new WeakMap,Bn=new WeakSet,mO=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-c(this,Bs))*this.parentScale),x(this,Bs,i),P(this,Bn,GA).call(this)},r=c(this,Bs);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},gO=function(t){const n=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},yO=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(P(r=Kt,Pl,qA).call(r,i)),n=i);return t.join(`
`)},GA=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,u=a.style.display,d=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=u,a.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},Pl=new WeakSet,qA=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(dA,"")},QA=function(){if(this.editorDiv.replaceChildren(),!!c(this,Os))for(const t of c(this,Os).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},wO=function(){return c(this,Os).replaceAll(""," ")},ZC=function(t){return t.replaceAll(" ","")},vO=function(t){const{value:n,fontSize:r,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((u,d)=>u!==i[d])||t.pageIndex!==a},T(Kt,Pl),ae(Kt,"_freeTextDefaultContent",""),ae(Kt,"_internalPadding",0),ae(Kt,"_defaultColor",null),ae(Kt,"_defaultFontSize",10),ae(Kt,"_type","freetext"),ae(Kt,"_editorType",Ze.FREETEXT);let JC=Kt;class Pe{toSVGPath(){xt("Abstract method `toSVGPath` must be implemented.")}get box(){xt("Abstract getter `box` must be implemented.")}serialize(e,t){xt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,a){a||(a=new Float32Array(e.length));for(let u=0,d=e.length;u<d;u+=2)a[u]=t+e[u]*r,a[u+1]=n+e[u+1]*i;return a}static _rescaleAndSwap(e,t,n,r,i,a){a||(a=new Float32Array(e.length));for(let u=0,d=e.length;u<d;u+=2)a[u]=t+e[u+1]*r,a[u+1]=n+e[u]*i;return a}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,a){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+a)/6,(n+i)/2,(r+a)/2]}}ae(Pe,"PRECISION",1e-4);var Vs,Ki,Em,bm,Ka,it,wh,vh,Hw,Ww,Cm,Fm,lu,Gw,tx,nx,Wn,Og,AO,_O,xO,EO,bO,CO;const $o=class $o{constructor({x:e,y:t},n,r,i,a,u=0){T(this,Wn);T(this,Vs);T(this,Ki,[]);T(this,Em);T(this,bm);T(this,Ka,[]);T(this,it,new Float32Array(18));T(this,wh);T(this,vh);T(this,Hw);T(this,Ww);T(this,Cm);T(this,Fm);T(this,lu,[]);x(this,Vs,n),x(this,Fm,i*r),x(this,bm,a),c(this,it).set([NaN,NaN,NaN,NaN,e,t],6),x(this,Em,u),x(this,Ww,c($o,Gw)*r),x(this,Hw,c($o,nx)*r),x(this,Cm,r),c(this,lu).push(e,t)}isEmpty(){return isNaN(c(this,it)[8])}add({x:e,y:t}){var L;x(this,wh,e),x(this,vh,t);const[n,r,i,a]=c(this,Vs);let[u,d,h,f]=c(this,it).subarray(8,12);const g=e-h,w=t-f,v=Math.hypot(g,w);if(v<c(this,Hw))return!1;const F=v-c(this,Ww),C=F/v,S=C*g,I=C*w;let O=u,R=d;u=h,d=f,h+=S,f+=I,(L=c(this,lu))==null||L.push(e,t);const V=-I/F,z=S/F,W=V*c(this,Fm),N=z*c(this,Fm);return c(this,it).set(c(this,it).subarray(2,8),0),c(this,it).set([h+W,f+N],4),c(this,it).set(c(this,it).subarray(14,18),12),c(this,it).set([h-W,f-N],16),isNaN(c(this,it)[6])?(c(this,Ka).length===0&&(c(this,it).set([u+W,d+N],2),c(this,Ka).push(NaN,NaN,NaN,NaN,(u+W-n)/i,(d+N-r)/a),c(this,it).set([u-W,d-N],14),c(this,Ki).push(NaN,NaN,NaN,NaN,(u-W-n)/i,(d-N-r)/a)),c(this,it).set([O,R,u,d,h,f],6),!this.isEmpty()):(c(this,it).set([O,R,u,d,h,f],6),Math.abs(Math.atan2(R-d,O-u)-Math.atan2(I,S))<Math.PI/2?([u,d,h,f]=c(this,it).subarray(2,6),c(this,Ka).push(NaN,NaN,NaN,NaN,((u+h)/2-n)/i,((d+f)/2-r)/a),[u,d,O,R]=c(this,it).subarray(14,18),c(this,Ki).push(NaN,NaN,NaN,NaN,((O+u)/2-n)/i,((R+d)/2-r)/a),!0):([O,R,u,d,h,f]=c(this,it).subarray(0,6),c(this,Ka).push(((O+5*u)/6-n)/i,((R+5*d)/6-r)/a,((5*u+h)/6-n)/i,((5*d+f)/6-r)/a,((u+h)/2-n)/i,((d+f)/2-r)/a),[h,f,u,d,O,R]=c(this,it).subarray(12,18),c(this,Ki).push(((O+5*u)/6-n)/i,((R+5*d)/6-r)/a,((5*u+h)/6-n)/i,((5*d+f)/6-r)/a,((u+h)/2-n)/i,((d+f)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,Ka),t=c(this,Ki);if(isNaN(c(this,it)[6])&&!this.isEmpty())return P(this,Wn,AO).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);P(this,Wn,xO).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return P(this,Wn,_O).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,a){return new FO(e,t,n,r,i,a)}getOutlines(){var g;const e=c(this,Ka),t=c(this,Ki),n=c(this,it),[r,i,a,u]=c(this,Vs),d=new Float32Array((((g=c(this,lu))==null?void 0:g.length)??0)+2);for(let w=0,v=d.length-2;w<v;w+=2)d[w]=(c(this,lu)[w]-r)/a,d[w+1]=(c(this,lu)[w+1]-i)/u;if(d[d.length-2]=(c(this,wh)-r)/a,d[d.length-1]=(c(this,vh)-i)/u,isNaN(n[6])&&!this.isEmpty())return P(this,Wn,EO).call(this,d);const h=new Float32Array(c(this,Ka).length+24+c(this,Ki).length);let f=e.length;for(let w=0;w<f;w+=2){if(isNaN(e[w])){h[w]=h[w+1]=NaN;continue}h[w]=e[w],h[w+1]=e[w+1]}f=P(this,Wn,CO).call(this,h,f);for(let w=t.length-6;w>=6;w-=6)for(let v=0;v<6;v+=2){if(isNaN(t[w+v])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[w+v],h[f+1]=t[w+v+1],f+=2}return P(this,Wn,bO).call(this,h,f),this.newFreeDrawOutline(h,d,c(this,Vs),c(this,Cm),c(this,Em),c(this,bm))}};Vs=new WeakMap,Ki=new WeakMap,Em=new WeakMap,bm=new WeakMap,Ka=new WeakMap,it=new WeakMap,wh=new WeakMap,vh=new WeakMap,Hw=new WeakMap,Ww=new WeakMap,Cm=new WeakMap,Fm=new WeakMap,lu=new WeakMap,Gw=new WeakMap,tx=new WeakMap,nx=new WeakMap,Wn=new WeakSet,Og=function(){const e=c(this,it).subarray(4,6),t=c(this,it).subarray(16,18),[n,r,i,a]=c(this,Vs);return[(c(this,wh)+(e[0]-t[0])/2-n)/i,(c(this,vh)+(e[1]-t[1])/2-r)/a,(c(this,wh)+(t[0]-e[0])/2-n)/i,(c(this,vh)+(t[1]-e[1])/2-r)/a]},AO=function(){const[e,t,n,r]=c(this,Vs),[i,a,u,d]=P(this,Wn,Og).call(this);return`M${(c(this,it)[2]-e)/n} ${(c(this,it)[3]-t)/r} L${(c(this,it)[4]-e)/n} ${(c(this,it)[5]-t)/r} L${i} ${a} L${u} ${d} L${(c(this,it)[16]-e)/n} ${(c(this,it)[17]-t)/r} L${(c(this,it)[14]-e)/n} ${(c(this,it)[15]-t)/r} Z`},_O=function(e){const t=c(this,Ki);e.push(`L${t[4]} ${t[5]} Z`)},xO=function(e){const[t,n,r,i]=c(this,Vs),a=c(this,it).subarray(4,6),u=c(this,it).subarray(16,18),[d,h,f,g]=P(this,Wn,Og).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-n)/i} L${d} ${h} L${f} ${g} L${(u[0]-t)/r} ${(u[1]-n)/i}`)},EO=function(e){const t=c(this,it),[n,r,i,a]=c(this,Vs),[u,d,h,f]=P(this,Wn,Og).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/a,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/a],0),this.newFreeDrawOutline(g,e,c(this,Vs),c(this,Cm),c(this,Em),c(this,bm))},bO=function(e,t){const n=c(this,Ki);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},CO=function(e,t){const n=c(this,it).subarray(4,6),r=c(this,it).subarray(16,18),[i,a,u,d]=c(this,Vs),[h,f,g,w]=P(this,Wn,Og).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/u,(n[1]-a)/d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,w,NaN,NaN,NaN,NaN,(r[0]-i)/u,(r[1]-a)/d],t),t+=24},T($o,Gw,8),T($o,tx,2),T($o,nx,c($o,Gw)+c($o,tx));let B_=$o;var Sm,Ah,wl,qw,Us,Qw,Fn,rx,SO;class FO extends Pe{constructor(t,n,r,i,a,u){super();T(this,rx);T(this,Sm);T(this,Ah,new Float32Array(4));T(this,wl);T(this,qw);T(this,Us);T(this,Qw);T(this,Fn);x(this,Fn,t),x(this,Us,n),x(this,Sm,r),x(this,Qw,i),x(this,wl,a),x(this,qw,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],P(this,rx,SO).call(this,u);const[d,h,f,g]=c(this,Ah);for(let w=0,v=t.length;w<v;w+=2)t[w]=(t[w]-d)/f,t[w+1]=(t[w+1]-h)/g;for(let w=0,v=n.length;w<v;w+=2)n[w]=(n[w]-d)/f,n[w+1]=(n[w+1]-h)/g}toSVGPath(){const t=[`M${c(this,Fn)[4]} ${c(this,Fn)[5]}`];for(let n=6,r=c(this,Fn).length;n<r;n+=6){if(isNaN(c(this,Fn)[n])){t.push(`L${c(this,Fn)[n+4]} ${c(this,Fn)[n+5]}`);continue}t.push(`C${c(this,Fn)[n]} ${c(this,Fn)[n+1]} ${c(this,Fn)[n+2]} ${c(this,Fn)[n+3]} ${c(this,Fn)[n+4]} ${c(this,Fn)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,i],a){const u=r-t,d=i-n;let h,f;switch(a){case 0:h=Pe._rescale(c(this,Fn),t,i,u,-d),f=Pe._rescale(c(this,Us),t,i,u,-d);break;case 90:h=Pe._rescaleAndSwap(c(this,Fn),t,n,u,d),f=Pe._rescaleAndSwap(c(this,Us),t,n,u,d);break;case 180:h=Pe._rescale(c(this,Fn),r,n,-u,d),f=Pe._rescale(c(this,Us),r,n,-u,d);break;case 270:h=Pe._rescaleAndSwap(c(this,Fn),r,i,-u,-d),f=Pe._rescaleAndSwap(c(this,Us),r,i,-u,-d);break}return{outline:Array.from(h),points:[Array.from(f)]}}get box(){return c(this,Ah)}newOutliner(t,n,r,i,a,u=0){return new B_(t,n,r,i,a,u)}getNewOutline(t,n){const[r,i,a,u]=c(this,Ah),[d,h,f,g]=c(this,Sm),w=a*f,v=u*g,F=r*f+d,C=i*g+h,S=this.newOutliner({x:c(this,Us)[0]*w+F,y:c(this,Us)[1]*v+C},c(this,Sm),c(this,Qw),t,c(this,qw),n??c(this,wl));for(let I=2;I<c(this,Us).length;I+=2)S.add({x:c(this,Us)[I]*w+F,y:c(this,Us)[I+1]*v+C});return S.getOutlines()}}Sm=new WeakMap,Ah=new WeakMap,wl=new WeakMap,qw=new WeakMap,Us=new WeakMap,Qw=new WeakMap,Fn=new WeakMap,rx=new WeakSet,SO=function(t){const n=c(this,Fn);let r=n[4],i=n[5];const a=[r,i,r,i];let u=r,d=i,h=r,f=i;const g=t?Math.max:Math.min,w=new Float32Array(4);for(let F=6,C=n.length;F<C;F+=6){const S=n[F+4],I=n[F+5];isNaN(n[F])?(Fe.pointBoundingBox(S,I,a),d>I?(u=S,d=I):d===I&&(u=g(u,S)),f<I?(h=S,f=I):f===I&&(h=g(h,S))):(w[0]=w[1]=1/0,w[2]=w[3]=-1/0,Fe.bezierBoundingBox(r,i,...n.slice(F,F+6),w),Fe.rectBoundingBox(w[0],w[1],w[2],w[3],a),d>w[1]?(u=w[0],d=w[1]):d===w[1]&&(u=g(u,w[0])),f<w[3]?(h=w[2],f=w[3]):f===w[3]&&(h=g(h,w[2]))),r=S,i=I}const v=c(this,Ah);v[0]=a[0]-c(this,wl),v[1]=a[1]-c(this,wl),v[2]=a[2]-a[0]+2*c(this,wl),v[3]=a[3]-a[1]+2*c(this,wl),this.firstPoint=[u,d],this.lastPoint=[h,f]};var Kw,Xw,Yw,cu,Xi,Kr,TO,KA,kO,IO,tF;class eF{constructor(e,t=0,n=0,r=!0){T(this,Kr);T(this,Kw);T(this,Xw);T(this,Yw);T(this,cu,[]);T(this,Xi,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:C,y:S,width:I,height:O}of e){const R=Math.floor((C-t)/a)*a,V=Math.ceil((C+I+t)/a)*a,z=Math.floor((S-t)/a)*a,W=Math.ceil((S+O+t)/a)*a,N=[R,z,W,!0],D=[V,z,W,!1];c(this,cu).push(N,D),Fe.rectBoundingBox(R,z,V,W,i)}const u=i[2]-i[0]+2*n,d=i[3]-i[1]+2*n,h=i[0]-n,f=i[1]-n;let g=r?-1/0:1/0,w=1/0;const v=c(this,cu).at(r?-1:-2),F=[v[0],v[2]];for(const C of c(this,cu)){const[S,I,O,R]=C;!R&&r?I<w?(w=I,g=S):I===w&&(g=Math.max(g,S)):R&&!r&&(I<w?(w=I,g=S):I===w&&(g=Math.min(g,S))),C[0]=(S-h)/u,C[1]=(I-f)/d,C[2]=(O-f)/d}x(this,Kw,new Float32Array([h,f,u,d])),x(this,Xw,[g,w]),x(this,Yw,F)}getOutlines(){c(this,cu).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of c(this,cu))t[3]?(e.push(...P(this,Kr,tF).call(this,t)),P(this,Kr,kO).call(this,t)):(P(this,Kr,IO).call(this,t),e.push(...P(this,Kr,tF).call(this,t)));return P(this,Kr,TO).call(this,e)}}Kw=new WeakMap,Xw=new WeakMap,Yw=new WeakMap,cu=new WeakMap,Xi=new WeakMap,Kr=new WeakSet,TO=function(e){const t=[],n=new Set;for(const a of e){const[u,d,h]=a;t.push([u,d,a],[u,h,a])}t.sort((a,u)=>a[1]-u[1]||a[0]-u[0]);for(let a=0,u=t.length;a<u;a+=2){const d=t[a][2],h=t[a+1][2];d.push(h),h.push(d),n.add(d),n.add(h)}const r=[];let i;for(;n.size>0;){const a=n.values().next().value;let[u,d,h,f,g]=a;n.delete(a);let w=u,v=d;for(i=[u,h],r.push(i);;){let F;if(n.has(f))F=f;else if(n.has(g))F=g;else break;n.delete(F),[u,d,h,f,g]=F,w!==u&&(i.push(w,v,u,v===d?d:h),w=u),v=v===d?h:d}i.push(w,v)}return new qq(r,c(this,Kw),c(this,Xw),c(this,Yw))},KA=function(e){const t=c(this,Xi);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,a=t[i][0];if(a===e)return i;a<e?n=i+1:r=i-1}return r+1},kO=function([,e,t]){const n=P(this,Kr,KA).call(this,e);c(this,Xi).splice(n,0,[e,t])},IO=function([,e,t]){const n=P(this,Kr,KA).call(this,e);for(let r=n;r<c(this,Xi).length;r++){const[i,a]=c(this,Xi)[r];if(i!==e)break;if(i===e&&a===t){c(this,Xi).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[i,a]=c(this,Xi)[r];if(i!==e)break;if(i===e&&a===t){c(this,Xi).splice(r,1);return}}},tF=function(e){const[t,n,r]=e,i=[[t,n,r]],a=P(this,Kr,KA).call(this,r);for(let u=0;u<a;u++){const[d,h]=c(this,Xi)[u];for(let f=0,g=i.length;f<g;f++){const[,w,v]=i[f];if(!(h<=w||v<=d)){if(w>=d){if(v>h)i[f][1]=h;else{if(g===1)return[];i.splice(f,1),f--,g--}continue}i[f][2]=d,v>h&&i.push([t,h,v])}}}return i};var Jw,Tm;class qq extends Pe{constructor(t,n,r,i){super();T(this,Jw);T(this,Tm);x(this,Tm,t),x(this,Jw,n),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const n of c(this,Tm)){let[r,i]=n;t.push(`M${r} ${i}`);for(let a=2;a<n.length;a+=2){const u=n[a],d=n[a+1];u===r?(t.push(`V${d}`),i=d):d===i&&(t.push(`H${u}`),r=u)}t.push("Z")}return t.join(" ")}serialize([t,n,r,i],a){const u=[],d=r-t,h=i-n;for(const f of c(this,Tm)){const g=new Array(f.length);for(let w=0;w<f.length;w+=2)g[w]=t+f[w]*d,g[w+1]=i-f[w+1]*h;u.push(g)}return u}get box(){return c(this,Jw)}get classNamesForOutlining(){return["highlightOutline"]}}Jw=new WeakMap,Tm=new WeakMap;class nF extends B_{newFreeDrawOutline(e,t,n,r,i,a){return new Qq(e,t,n,r,i,a)}}class Qq extends FO{newOutliner(e,t,n,r,i,a=0){return new nF(e,t,n,r,i,a)}}var km,Zw,vl,_h,e0,us,t0,n0,xh,js,$s,pr,Im,Pm,Nr,Rm,xi,r0,tt,rF,XA,PO,RO,DO,sF,vd,Fi,tf,NO,YA,JA,MO,LO,OO,BO,VO;const At=class At extends Ht{constructor(t){super({...t,name:"highlightEditor"});T(this,tt);T(this,km,null);T(this,Zw,0);T(this,vl);T(this,_h,null);T(this,e0,null);T(this,us,null);T(this,t0,null);T(this,n0,0);T(this,xh,null);T(this,js,null);T(this,$s,null);T(this,pr,!1);T(this,Im,null);T(this,Pm,null);T(this,Nr,null);T(this,Rm,"");T(this,xi);T(this,r0,"");this.color=t.color||At._defaultColor,x(this,xi,t.thickness||At._defaultThickness),this.opacity=t.opacity||At._defaultOpacity,x(this,vl,t.boxes||null),x(this,r0,t.methodOfCreation||""),x(this,Rm,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(x(this,pr,!0),P(this,tt,XA).call(this,t),P(this,tt,vd).call(this)):c(this,vl)&&(x(this,km,t.anchorNode),x(this,Zw,t.anchorOffset),x(this,t0,t.focusNode),x(this,n0,t.focusOffset),P(this,tt,rF).call(this),P(this,tt,vd).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=At.prototype;return Xe(this,"_keyboardManager",new I0([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,pr)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,xi),methodOfCreation:c(this,r0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;Ht.initialize(t,n),At._defaultColor||(At._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case dt.HIGHLIGHT_COLOR:At._defaultColor=n;break;case dt.HIGHLIGHT_THICKNESS:At._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return c(this,Pm)}get commentButtonPosition(){return c(this,Im)}updateParams(t,n){switch(t){case dt.HIGHLIGHT_COLOR:P(this,tt,PO).call(this,n);break;case dt.HIGHLIGHT_THICKNESS:P(this,tt,RO).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[dt.HIGHLIGHT_COLOR,At._defaultColor],[dt.HIGHLIGHT_THICKNESS,At._defaultThickness]]}get propertiesToUpdate(){return[[dt.HIGHLIGHT_COLOR,this.color||At._defaultColor],[dt.HIGHLIGHT_THICKNESS,c(this,xi)||At._defaultThickness],[dt.HIGHLIGHT_FREE,c(this,pr)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(c(this,$s),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=c(this,e0))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",x(this,e0,new M_({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(P(this,tt,JA).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,P(this,tt,JA).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){P(this,tt,sF).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,tt,vd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?P(this,tt,sF).call(this):t&&(P(this,tt,vd).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,a,u;const{drawLayer:n}=this.parent;let r;c(this,pr)?(t=(t-this.rotation+360)%360,r=P(i=At,Fi,tf).call(i,c(this,js).box,t)):r=P(a=At,Fi,tf).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(c(this,$s),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(c(this,Nr),{bbox:P(u=At,Fi,tf).call(u,c(this,us).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,Rm)&&(t.setAttribute("aria-label",c(this,Rm)),t.setAttribute("role","mark")),c(this,pr)?t.classList.add("free"):this.div.addEventListener("keydown",P(this,tt,NO).bind(this),{signal:this._uiManager._signal});const n=x(this,xh,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,_h),this.setDims(),GM(this,c(this,xh),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Nr),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Nr),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:P(this,tt,YA).call(this,!0);break;case 1:case 3:P(this,tt,YA).call(this,!1);break}}select(){var t;super.select(),c(this,Nr)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Nr),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,Nr)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Nr),{rootClass:{selected:!1}}),c(this,pr)||P(this,tt,YA).call(this,!1))}get _mustFixPosition(){return!c(this,pr)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,$s),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,Nr),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:i,y:a}){const{x:u,y:d,width:h,height:f}=r.getBoundingClientRect(),g=new AbortController,w=t.combinedSignal(g),v=F=>{g.abort(),P(this,Fi,BO).call(this,t,F)};window.addEventListener("blur",v,{signal:w}),window.addEventListener("pointerup",v,{signal:w}),window.addEventListener("pointerdown",yn,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ki,{signal:w}),r.addEventListener("pointermove",P(this,Fi,OO).bind(this,t),{signal:w}),this._freeHighlight=new nF({x:i,y:a},[u,d,h,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var C,S,I,O;let i=null;if(t instanceof pO){const{data:{quadPoints:R,rect:V,rotation:z,id:W,color:N,opacity:D,popupRef:L,richText:U,contentsObj:$,creationDate:Q,modificationDate:j},parent:{page:{pageNumber:me}}}=t;i=t={annotationType:Ze.HIGHLIGHT,color:Array.from(N),opacity:D,quadPoints:R,boxes:null,pageIndex:me-1,rect:V.slice(0),rotation:z,annotationElementId:W,id:W,deleted:!1,popupRef:L,richText:U,comment:($==null?void 0:$.str)||null,creationDate:Q,modificationDate:j}}else if(t instanceof qS){const{data:{inkLists:R,rect:V,rotation:z,id:W,color:N,borderStyle:{rawWidth:D},popupRef:L,richText:U,contentsObj:$,creationDate:Q,modificationDate:j},parent:{page:{pageNumber:me}}}=t;i=t={annotationType:Ze.HIGHLIGHT,color:Array.from(N),thickness:D,inkLists:R,boxes:null,pageIndex:me-1,rect:V.slice(0),rotation:z,annotationElementId:W,id:W,deleted:!1,popupRef:L,richText:U,comment:($==null?void 0:$.str)||null,creationDate:Q,modificationDate:j}}const{color:a,quadPoints:u,inkLists:d,opacity:h}=t,f=await super.deserialize(t,n,r);f.color=Fe.makeHexColor(...a),f.opacity=h||1,d&&x(f,xi,t.thickness),f._initialData=i,t.comment&&f.setCommentData(t);const[g,w]=f.pageDimensions,[v,F]=f.pageTranslation;if(u){const R=x(f,vl,[]);for(let V=0;V<u.length;V+=8)R.push({x:(u[V]-v)/g,y:1-(u[V+1]-F)/w,width:(u[V+2]-u[V])/g,height:(u[V+1]-u[V+5])/w});P(C=f,tt,rF).call(C),P(S=f,tt,vd).call(S),f.rotate(f.rotation)}else if(d){x(f,pr,!0);const R=d[0],V={x:R[0]-v,y:w-(R[1]-F)},z=new nF(V,[0,0,g,w],1,c(f,xi)/2,!0,.001);for(let D=0,L=R.length;D<L;D+=2)V.x=R[D]-v,V.y=w-(R[D+1]-F),z.add(V);const{id:W,clipPathId:N}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);P(I=f,tt,XA).call(I,{highlightOutlines:z.getOutlines(),highlightId:W,clipPathId:N}),P(O=f,tt,vd).call(O),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=Ht._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:n,opacity:this.opacity,thickness:c(this,xi),quadPoints:P(this,tt,MO).call(this),outlines:P(this,tt,LO).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!P(this,tt,VO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};km=new WeakMap,Zw=new WeakMap,vl=new WeakMap,_h=new WeakMap,e0=new WeakMap,us=new WeakMap,t0=new WeakMap,n0=new WeakMap,xh=new WeakMap,js=new WeakMap,$s=new WeakMap,pr=new WeakMap,Im=new WeakMap,Pm=new WeakMap,Nr=new WeakMap,Rm=new WeakMap,xi=new WeakMap,r0=new WeakMap,tt=new WeakSet,rF=function(){const t=new eF(c(this,vl),.001);x(this,js,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,js).box;const n=new eF(c(this,vl),.0025,.001,this._uiManager.direction==="ltr");x(this,us,n.getOutlines());const{firstPoint:r}=c(this,js);x(this,Im,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=c(this,us);x(this,Pm,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},XA=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var w,v;if(x(this,js,t),x(this,us,t.getNewOutline(c(this,xi)/2+1.5,.0025)),n>=0)x(this,$s,n),x(this,_h,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),x(this,Nr,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,us).box,path:{d:c(this,us).toSVGPath()}},!0));else if(this.parent){const F=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,$s),{bbox:P(w=At,Fi,tf).call(w,c(this,js).box,(F-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Nr),{bbox:P(v=At,Fi,tf).call(v,c(this,us).box,F),path:{d:c(this,us).toSVGPath()}})}const[a,u,d,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=u,this.width=d,this.height=h;break;case 90:{const[F,C]=this.parentDimensions;this.x=u,this.y=1-a,this.width=d*C/F,this.height=h*F/C;break}case 180:this.x=1-a,this.y=1-u,this.width=d,this.height=h;break;case 270:{const[F,C]=this.parentDimensions;this.x=1-u,this.y=a,this.width=d*C/F,this.height=h*F/C;break}}const{firstPoint:f}=t;x(this,Im,[(f[0]-a)/d,(f[1]-u)/h]);const{lastPoint:g}=c(this,us);x(this,Pm,[(g[0]-a)/d,(g[1]-u)/h])},PO=function(t){const n=(a,u)=>{this.color=a,this.opacity=u,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:n.bind(this,t,At._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},RO=function(t){const n=c(this,xi),r=i=>{x(this,xi,i),P(this,tt,DO).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},DO=function(t){c(this,pr)&&(P(this,tt,XA).call(this,{highlightOutlines:c(this,js).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},sF=function(){c(this,$s)===null||!this.parent||(this.parent.drawLayer.remove(c(this,$s)),x(this,$s,null),this.parent.drawLayer.remove(c(this,Nr)),x(this,Nr,null))},vd=function(t=this.parent){c(this,$s)===null&&({id:jn(this,$s)._,clipPathId:jn(this,_h)._}=t.drawLayer.draw({bbox:c(this,js).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,pr)},path:{d:c(this,js).toSVGPath()}},!1,!0),x(this,Nr,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,pr)},bbox:c(this,us).box,path:{d:c(this,us).toSVGPath()}},c(this,pr))),c(this,xh)&&(c(this,xh).style.clipPath=c(this,_h)))},Fi=new WeakSet,tf=function([t,n,r,i],a){switch(a){case 90:return[1-n-i,t,i,r];case 180:return[1-t-r,1-n-i,r,i];case 270:return[n,1-t-r,i,r]}return[t,n,r,i]},NO=function(t){At._keyboardManager.exec(this,t)},YA=function(t){if(!c(this,km))return;const n=window.getSelection();t?n.setPosition(c(this,km),c(this,Zw)):n.setPosition(c(this,t0),c(this,n0))},JA=function(){return c(this,pr)?this.rotation:0},MO=function(){if(c(this,pr))return null;const[t,n]=this.pageDimensions,[r,i]=this.pageTranslation,a=c(this,vl),u=new Float32Array(a.length*8);let d=0;for(const{x:h,y:f,width:g,height:w}of a){const v=h*t+r,F=(1-f)*n+i;u[d]=u[d+4]=v,u[d+1]=u[d+3]=F,u[d+2]=u[d+6]=v+g*t,u[d+5]=u[d+7]=F-w*n,d+=8}return u},LO=function(t){return c(this,js).serialize(t,P(this,tt,JA).call(this))},OO=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},BO=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},VO=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==n[i])},T(At,Fi),ae(At,"_defaultColor",null),ae(At,"_defaultOpacity",1),ae(At,"_defaultThickness",12),ae(At,"_type","highlight"),ae(At,"_editorType",Ze.HIGHLIGHT),ae(At,"_freeHighlightId",-1),ae(At,"_freeHighlight",null),ae(At,"_freeHighlightClipId","");let V_=At;var Eh;class UO{constructor(){T(this,Eh,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){c(this,Eh)[e]=t}toSVGProperties(){const e=c(this,Eh);return x(this,Eh,Object.create(null)),{root:e}}reset(){x(this,Eh,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){xt("Not implemented")}}Eh=new WeakMap;var zs,Dm,Zn,bh,Ch,mt,iF,aF,oF,Bg,jO,ZA,Vg,nf;const at=class at extends Ht{constructor(t){super(t);T(this,mt);T(this,zs,null);T(this,Dm);ae(this,"_colorPicker",null);ae(this,"_drawId",null);x(this,Dm,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(P(this,mt,iF).call(this,t),P(this,mt,Bg).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[i,a]of Object.entries(n))r.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){xt("Not implemented")}static get typesMap(){xt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(c(at,Zn).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,n[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,n[i]]);return t}_updateProperty(t,n,r){const i=this._drawingOptions,a=i[n],u=d=>{var f;i.updateProperty(n,d);const h=c(this,zs).updateProperty(n,d);h&&P(this,mt,Vg).call(this,h),(f=this.parent)==null||f.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,r),undo:u.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(c(this,zs).getPathResizingSVGProperties(P(this,mt,ZA).call(this)),{bbox:P(this,mt,nf).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(c(this,zs).getPathResizedSVGProperties(P(this,mt,ZA).call(this)),{bbox:P(this,mt,nf).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:P(this,mt,nf).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(c(this,zs).getPathTranslatedSVGProperties(P(this,mt,ZA).call(this),this.parentDimensions),{bbox:P(this,mt,nf).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Dm)&&(x(this,Dm,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){P(this,mt,oF).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,mt,Bg).call(this),P(this,mt,Vg).call(this,c(this,zs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),P(this,mt,oF).call(this)):t&&(this._uiManager.addShouldRescale(this),P(this,mt,Bg).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties({bbox:P(this,mt,nf).call(this)},c(this,zs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&P(this,mt,Vg).call(this,c(this,zs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,i,a){xt("Not implemented")}static startDrawing(t,n,r,i){var S;const{target:a,offsetX:u,offsetY:d,pointerId:h,pointerType:f}=i;if(kr.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:w,height:v}=a.getBoundingClientRect(),F=x(at,bh,new AbortController),C=t.combinedSignal(F);if(kr.setPointer(f,h),window.addEventListener("pointerup",I=>{kr.isSamePointerIdOrRemove(I.pointerId)&&this._endDraw(I)},{signal:C}),window.addEventListener("pointercancel",I=>{kr.isSamePointerIdOrRemove(I.pointerId)&&this._currentParent.endDrawingSession()},{signal:C}),window.addEventListener("pointerdown",I=>{kr.isSamePointerType(I.pointerType)&&(kr.initializeAndAddPointerId(I.pointerId),c(at,Zn).isCancellable()&&(c(at,Zn).removeLastElement(),c(at,Zn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",ki,{signal:C}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),a.addEventListener("touchmove",I=>{kr.isSameTimeStamp(I.timeStamp)&&yn(I)},{signal:C}),t.toggleDrawing(),(S=n._editorUndoBar)==null||S.hide(),c(at,Zn)){t.drawLayer.updateProperties(this._currentDrawId,c(at,Zn).startNew(u,d,w,v,g));return}n.updateUIForDefaultProperties(this),x(at,Zn,this.createDrawerInstance(u,d,w,v,g)),x(at,Ch,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(at,Ch).toSVGProperties(),c(at,Zn).defaultSVGProperties),!0,!1)}static _drawMove(t){if(kr.isSameTimeStamp(t.timeStamp),!c(at,Zn))return;const{offsetX:n,offsetY:r,pointerId:i}=t;if(kr.isSamePointerId(i)){if(kr.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(at,Zn).add(n,r)),kr.setTimeStamp(t.timeStamp),yn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,x(at,Zn,null),x(at,Ch,null),kr.clearTimeStamp()),c(at,bh)&&(c(at,bh).abort(),x(at,bh,null),kr.clearPointerIds())}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,c(at,Zn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=c(at,Zn),i=this._currentDrawId,a=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:dt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(dt.DRAW_STEP),!c(at,Zn).isEmpty()){const{pageDimensions:[r,i],scale:a}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(at,Zn).getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:c(at,Ch),mustBeCommitted:!t});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,i,a,u){xt("Not implemented")}static async deserialize(t,n,r){var g,w;const{rawDims:{pageWidth:i,pageHeight:a,pageX:u,pageY:d}}=n.viewport,h=this.deserializeDraw(u,d,i,a,this._INNER_MARGIN,t),f=await super.deserialize(t,n,r);return f.createDrawingOptions(t),P(g=f,mt,iF).call(g,{drawOutlines:h}),P(w=f,mt,Bg).call(w),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[n,r]=this.pageTranslation,[i,a]=this.pageDimensions;return c(this,zs).serialize([n,r,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};zs=new WeakMap,Dm=new WeakMap,Zn=new WeakMap,bh=new WeakMap,Ch=new WeakMap,mt=new WeakSet,iF=function({drawOutlines:t,drawId:n,drawingOptions:r}){x(this,zs,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=P(this,mt,aF).call(this,t,this.parent),P(this,mt,Vg).call(this,t.box)},aF=function(t,n){const{id:r}=n.drawLayer.draw(at._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},oF=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Bg=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=P(this,mt,aF).call(this,c(this,zs),t)}},jO=function([t,n,r,i]){const{parentDimensions:[a,u],rotation:d}=this;switch(d){case 90:return[n,1-t,r*(u/a),i*(a/u)];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,r*(u/a),i*(a/u)];default:return[t,n,r,i]}},ZA=function(){const{x:t,y:n,width:r,height:i,parentDimensions:[a,u],rotation:d}=this;switch(d){case 90:return[1-n,t,r*(a/u),i*(u/a)];case 180:return[1-t,1-n,r,i];case 270:return[n,1-t,r*(a/u),i*(u/a)];default:return[t,n,r,i]}},Vg=function(t){[this.x,this.y,this.width,this.height]=P(this,mt,jO).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},nf=function(){const{x:t,y:n,width:r,height:i,rotation:a,parentRotation:u,parentDimensions:[d,h]}=this;switch((a*4+u)/90){case 1:return[1-n-i,t,i,r];case 2:return[1-t-r,1-n-i,r,i];case 3:return[n,1-t-r,i,r];case 4:return[t,n-r*(d/h),i*(h/d),r*(d/h)];case 5:return[1-n,t,r*(d/h),i*(h/d)];case 6:return[1-t-i*(h/d),1-n,i*(h/d),r*(d/h)];case 7:return[n-r*(d/h),1-t-i*(h/d),r*(d/h),i*(h/d)];case 8:return[t-r,n-i,r,i];case 9:return[1-n,t-r,i,r];case 10:return[1-t,1-n,r,i];case 11:return[n-i,1-t,i,r];case 12:return[t-i*(h/d),n,i*(h/d),r*(d/h)];case 13:return[1-n-r*(d/h),t-i*(h/d),r*(d/h),i*(h/d)];case 14:return[1-t,1-n-r*(d/h),i*(h/d),r*(d/h)];case 15:return[n,1-t,r*(d/h),i*(h/d)];default:return[t,n,r,i]}},ae(at,"_currentDrawId",-1),ae(at,"_currentParent",null),T(at,Zn,null),T(at,bh,null),T(at,Ch,null),ae(at,"_INNER_MARGIN",3);let U_=at;var Xa,er,tr,Fh,Nm,zr,fr,Ei,Sh,Th,kh,Mm,e_;class Kq{constructor(e,t,n,r,i,a){T(this,Mm);T(this,Xa,new Float64Array(6));T(this,er);T(this,tr);T(this,Fh);T(this,Nm);T(this,zr);T(this,fr,"");T(this,Ei,0);T(this,Sh,new P0);T(this,Th);T(this,kh);x(this,Th,n),x(this,kh,r),x(this,Fh,i),x(this,Nm,a),[e,t]=P(this,Mm,e_).call(this,e,t);const u=x(this,er,[NaN,NaN,NaN,NaN,e,t]);x(this,zr,[e,t]),x(this,tr,[{line:u,points:c(this,zr)}]),c(this,Xa).set(u,0)}updateProperty(e,t){e==="stroke-width"&&x(this,Nm,t)}isEmpty(){return!c(this,tr)||c(this,tr).length===0}isCancellable(){return c(this,zr).length<=10}add(e,t){[e,t]=P(this,Mm,e_).call(this,e,t);const[n,r,i,a]=c(this,Xa).subarray(2,6),u=e-i,d=t-a;return Math.hypot(c(this,Th)*u,c(this,kh)*d)<=2?null:(c(this,zr).push(e,t),isNaN(n)?(c(this,Xa).set([i,a,e,t],2),c(this,er).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Xa)[0])&&c(this,er).splice(6,6),c(this,Xa).set([n,r,i,a,e,t],0),c(this,er).push(...Pe.createBezierPoints(n,r,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(c(this,zr).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){x(this,Th,n),x(this,kh,r),x(this,Fh,i),[e,t]=P(this,Mm,e_).call(this,e,t);const a=x(this,er,[NaN,NaN,NaN,NaN,e,t]);x(this,zr,[e,t]);const u=c(this,tr).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),c(this,tr).push({line:a,points:c(this,zr)}),c(this,Xa).set(a,0),x(this,Ei,0),this.toSVGPath(),null}getLastElement(){return c(this,tr).at(-1)}setLastElement(e){return c(this,tr)?(c(this,tr).push(e),x(this,er,e.line),x(this,zr,e.points),x(this,Ei,0),{path:{d:this.toSVGPath()}}):c(this,Sh).setLastElement(e)}removeLastElement(){if(!c(this,tr))return c(this,Sh).removeLastElement();c(this,tr).pop(),x(this,fr,"");for(let e=0,t=c(this,tr).length;e<t;e++){const{line:n,points:r}=c(this,tr)[e];x(this,er,n),x(this,zr,r),x(this,Ei,0),this.toSVGPath()}return{path:{d:c(this,fr)}}}toSVGPath(){const e=Pe.svgRound(c(this,er)[4]),t=Pe.svgRound(c(this,er)[5]);if(c(this,zr).length===2)return x(this,fr,`${c(this,fr)} M ${e} ${t} Z`),c(this,fr);if(c(this,zr).length<=6){const r=c(this,fr).lastIndexOf("M");x(this,fr,`${c(this,fr).slice(0,r)} M ${e} ${t}`),x(this,Ei,6)}if(c(this,zr).length===4){const r=Pe.svgRound(c(this,er)[10]),i=Pe.svgRound(c(this,er)[11]);return x(this,fr,`${c(this,fr)} L ${r} ${i}`),x(this,Ei,12),c(this,fr)}const n=[];c(this,Ei)===0&&(n.push(`M ${e} ${t}`),x(this,Ei,6));for(let r=c(this,Ei),i=c(this,er).length;r<i;r+=6){const[a,u,d,h,f,g]=c(this,er).slice(r,r+6).map(Pe.svgRound);n.push(`C${a} ${u} ${d} ${h} ${f} ${g}`)}return x(this,fr,c(this,fr)+n.join(" ")),x(this,Ei,c(this,er).length),c(this,fr)}getOutlines(e,t,n,r){const i=c(this,tr).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),c(this,Sh).build(c(this,tr),e,t,n,c(this,Fh),c(this,Nm),r),x(this,Xa,null),x(this,er,null),x(this,tr,null),x(this,fr,null),c(this,Sh)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Xa=new WeakMap,er=new WeakMap,tr=new WeakMap,Fh=new WeakMap,Nm=new WeakMap,zr=new WeakMap,fr=new WeakMap,Ei=new WeakMap,Sh=new WeakMap,Th=new WeakMap,kh=new WeakMap,Mm=new WeakSet,e_=function(e,t){return Pe._normalizePoint(e,t,c(this,Th),c(this,kh),c(this,Fh))};var Hr,s0,i0,Hs,Ya,Ja,Lm,Om,Ih,wr,Uo,$O,zO,HO;class P0 extends Pe{constructor(){super(...arguments);T(this,wr);T(this,Hr);T(this,s0,0);T(this,i0);T(this,Hs);T(this,Ya);T(this,Ja);T(this,Lm);T(this,Om);T(this,Ih)}build(t,n,r,i,a,u,d){x(this,Ya,n),x(this,Ja,r),x(this,Lm,i),x(this,Om,a),x(this,Ih,u),x(this,i0,d??0),x(this,Hs,t),P(this,wr,zO).call(this)}get thickness(){return c(this,Ih)}setLastElement(t){return c(this,Hs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Hs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of c(this,Hs)){if(t.push(`M${Pe.svgRound(n[4])} ${Pe.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Pe.svgRound(n[10])} ${Pe.svgRound(n[11])}`);continue}for(let r=6,i=n.length;r<i;r+=6){const[a,u,d,h,f,g]=n.subarray(r,r+6).map(Pe.svgRound);t.push(`C${a} ${u} ${d} ${h} ${f} ${g}`)}}return t.join("")}serialize([t,n,r,i],a){const u=[],d=[],[h,f,g,w]=P(this,wr,$O).call(this);let v,F,C,S,I,O,R,V,z;switch(c(this,Om)){case 0:z=Pe._rescale,v=t,F=n+i,C=r,S=-i,I=t+h*r,O=n+(1-f-w)*i,R=t+(h+g)*r,V=n+(1-f)*i;break;case 90:z=Pe._rescaleAndSwap,v=t,F=n,C=r,S=i,I=t+f*r,O=n+h*i,R=t+(f+w)*r,V=n+(h+g)*i;break;case 180:z=Pe._rescale,v=t+r,F=n,C=-r,S=i,I=t+(1-h-g)*r,O=n+f*i,R=t+(1-h)*r,V=n+(f+w)*i;break;case 270:z=Pe._rescaleAndSwap,v=t+r,F=n+i,C=-r,S=-i,I=t+(1-f-w)*r,O=n+(1-h-g)*i,R=t+(1-f)*r,V=n+(1-h)*i;break}for(const{line:W,points:N}of c(this,Hs))u.push(z(W,v,F,C,S,a?new Array(W.length):null)),d.push(z(N,v,F,C,S,a?new Array(N.length):null));return{lines:u,points:d,rect:[I,O,R,V]}}static deserialize(t,n,r,i,a,{paths:{lines:u,points:d},rotation:h,thickness:f}){const g=[];let w,v,F,C,S;switch(h){case 0:S=Pe._rescale,w=-t/r,v=n/i+1,F=1/r,C=-1/i;break;case 90:S=Pe._rescaleAndSwap,w=-n/i,v=-t/r,F=1/i,C=1/r;break;case 180:S=Pe._rescale,w=t/r+1,v=-n/i,F=-1/r,C=1/i;break;case 270:S=Pe._rescaleAndSwap,w=n/i+1,v=t/r+1,F=-1/i,C=-1/r;break}if(!u){u=[];for(const O of d){const R=O.length;if(R===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1]]));continue}if(R===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1],NaN,NaN,NaN,NaN,O[2],O[3]]));continue}const V=new Float32Array(3*(R-2));u.push(V);let[z,W,N,D]=O.subarray(0,4);V.set([NaN,NaN,NaN,NaN,z,W],0);for(let L=4;L<R;L+=2){const U=O[L],$=O[L+1];V.set(Pe.createBezierPoints(z,W,N,D,U,$),(L-2)*3),[z,W,N,D]=[N,D,U,$]}}}for(let O=0,R=u.length;O<R;O++)g.push({line:S(u[O].map(V=>V??NaN),w,v,F,C),points:S(d[O].map(V=>V??NaN),w,v,F,C)});const I=new this.prototype.constructor;return I.build(g,r,i,1,h,f,a),I}get box(){return c(this,Hr)}updateProperty(t,n){return t==="stroke-width"?P(this,wr,HO).call(this,n):null}updateParentDimensions([t,n],r){const[i,a]=P(this,wr,Uo).call(this);x(this,Ya,t),x(this,Ja,n),x(this,Lm,r);const[u,d]=P(this,wr,Uo).call(this),h=u-i,f=d-a,g=c(this,Hr);return g[0]-=h,g[1]-=f,g[2]+=2*h,g[3]+=2*f,g}updateRotation(t){return x(this,s0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Hr).map(Pe.svgRound).join(" ")}get defaultProperties(){const[t,n]=c(this,Hr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Pe.svgRound(t)} ${Pe.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=c(this,Hr);let r=0,i=0,a=0,u=0,d=0,h=0;switch(c(this,s0)){case 90:i=n/t,a=-t/n,d=t;break;case 180:r=-1,u=-1,d=t,h=n;break;case 270:i=-n/t,a=t/n,h=n;break;default:return""}return`matrix(${r} ${i} ${a} ${u} ${Pe.svgRound(d)} ${Pe.svgRound(h)})`}getPathResizingSVGProperties([t,n,r,i]){const[a,u]=P(this,wr,Uo).call(this),[d,h,f,g]=c(this,Hr);if(Math.abs(f-a)<=Pe.PRECISION||Math.abs(g-u)<=Pe.PRECISION){const S=t+r/2-(d+f/2),I=n+i/2-(h+g/2);return{path:{"transform-origin":`${Pe.svgRound(t)} ${Pe.svgRound(n)}`,transform:`${this.rotationTransform} translate(${S} ${I})`}}}const w=(r-2*a)/(f-2*a),v=(i-2*u)/(g-2*u),F=f/r,C=g/i;return{path:{"transform-origin":`${Pe.svgRound(d)} ${Pe.svgRound(h)}`,transform:`${this.rotationTransform} scale(${F} ${C}) translate(${Pe.svgRound(a)} ${Pe.svgRound(u)}) scale(${w} ${v}) translate(${Pe.svgRound(-a)} ${Pe.svgRound(-u)})`}}}getPathResizedSVGProperties([t,n,r,i]){const[a,u]=P(this,wr,Uo).call(this),d=c(this,Hr),[h,f,g,w]=d;if(d[0]=t,d[1]=n,d[2]=r,d[3]=i,Math.abs(g-a)<=Pe.PRECISION||Math.abs(w-u)<=Pe.PRECISION){const I=t+r/2-(h+g/2),O=n+i/2-(f+w/2);for(const{line:R,points:V}of c(this,Hs))Pe._translate(R,I,O,R),Pe._translate(V,I,O,V);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Pe.svgRound(t)} ${Pe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(r-2*a)/(g-2*a),F=(i-2*u)/(w-2*u),C=-v*(h+a)+t+a,S=-F*(f+u)+n+u;if(v!==1||F!==1||C!==0||S!==0)for(const{line:I,points:O}of c(this,Hs))Pe._rescale(I,C,S,v,F,I),Pe._rescale(O,C,S,v,F,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Pe.svgRound(t)} ${Pe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[i,a]=r,u=c(this,Hr),d=t-u[0],h=n-u[1];if(c(this,Ya)===i&&c(this,Ja)===a)for(const{line:f,points:g}of c(this,Hs))Pe._translate(f,d,h,f),Pe._translate(g,d,h,g);else{const f=c(this,Ya)/i,g=c(this,Ja)/a;x(this,Ya,i),x(this,Ja,a);for(const{line:w,points:v}of c(this,Hs))Pe._rescale(w,d,h,f,g,w),Pe._rescale(v,d,h,f,g,v);u[2]*=f,u[3]*=g}return u[0]=t,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Pe.svgRound(t)} ${Pe.svgRound(n)}`}}}get defaultSVGProperties(){const t=c(this,Hr);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Pe.svgRound(t[0])} ${Pe.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Hr=new WeakMap,s0=new WeakMap,i0=new WeakMap,Hs=new WeakMap,Ya=new WeakMap,Ja=new WeakMap,Lm=new WeakMap,Om=new WeakMap,Ih=new WeakMap,wr=new WeakSet,Uo=function(t=c(this,Ih)){const n=c(this,i0)+t/2*c(this,Lm);return c(this,Om)%180===0?[n/c(this,Ya),n/c(this,Ja)]:[n/c(this,Ja),n/c(this,Ya)]},$O=function(){const[t,n,r,i]=c(this,Hr),[a,u]=P(this,wr,Uo).call(this,0);return[t+a,n+u,r-2*a,i-2*u]},zO=function(){const t=x(this,Hr,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of c(this,Hs)){if(i.length<=12){for(let d=4,h=i.length;d<h;d+=6)Fe.pointBoundingBox(i[d],i[d+1],t);continue}let a=i[4],u=i[5];for(let d=6,h=i.length;d<h;d+=6){const[f,g,w,v,F,C]=i.subarray(d,d+6);Fe.bezierBoundingBox(a,u,f,g,w,v,F,C,t),a=F,u=C}}const[n,r]=P(this,wr,Uo).call(this);t[0]=mr(t[0]-n,0,1),t[1]=mr(t[1]-r,0,1),t[2]=mr(t[2]+n,0,1),t[3]=mr(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},HO=function(t){const[n,r]=P(this,wr,Uo).call(this);x(this,Ih,t);const[i,a]=P(this,wr,Uo).call(this),[u,d]=[i-n,a-r],h=c(this,Hr);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h};class qx extends UO{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Ht._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new qx(this._viewParameters);return e.updateAll(this),e}}var sx,WO;const uf=class uf extends U_{constructor(t){super({...t,name:"inkEditor"});T(this,sx);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){Ht.initialize(t,n),this._defaultDrawingOptions=new qx(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Xe(this,"typesMap",new Map([[dt.INK_THICKNESS,"stroke-width"],[dt.INK_COLOR,"stroke"],[dt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,i,a){return new Kq(t,n,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,i,a,u){return P0.deserialize(t,n,r,i,a,u)}static async deserialize(t,n,r){let i=null;if(t instanceof qS){const{data:{inkLists:u,rect:d,rotation:h,id:f,color:g,opacity:w,borderStyle:{rawWidth:v},popupRef:F,richText:C,contentsObj:S,creationDate:I,modificationDate:O},parent:{page:{pageNumber:R}}}=t;i=t={annotationType:Ze.INK,color:Array.from(g),thickness:v,opacity:w,paths:{points:u},boxes:null,pageIndex:R-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:F,richText:C,comment:(S==null?void 0:S.str)||null,creationDate:I,modificationDate:O}}const a=await super.deserialize(t,n,r);return a._initialData=i,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new L_(this)),[["colorPicker",this._colorPicker]]}get colorType(){return dt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=uf.getDefaultDrawingOptions({stroke:Fe.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":u}}=this,d=Object.assign(super.serialize(t),{color:Ht._colorManager.convert(i),opacity:a,thickness:u,paths:{lines:n,points:r}});return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!P(this,sx,WO).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};sx=new WeakSet,WO=function(t){const{color:n,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((u,d)=>u!==n[d])||t.thickness!==r||t.opacity!==i||t.pageIndex!==a},ae(uf,"_type","ink"),ae(uf,"_editorType",Ze.INK),ae(uf,"_defaultDrawingOptions",null);let lF=uf;class cF extends P0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const hA=8,hg=3;var Ph,bt,uF,Yi,GO,qO,dF,t_,QO,KO,XO,hF,pF,YO;class Cl{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},i,a,u,d){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const g=200,w=f.font=`${n} ${r} ${g}px ${t}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:F,actualBoundingBoxAscent:C,actualBoundingBoxDescent:S,fontBoundingBoxAscent:I,fontBoundingBoxDescent:O,width:R}=f.measureText(e),V=1.5,z=Math.ceil(Math.max(Math.abs(v)+Math.abs(F)||0,R)*V),W=Math.ceil(Math.max(Math.abs(C)+Math.abs(S)||g,Math.abs(I)+Math.abs(O)||g)*V);h=new OffscreenCanvas(z,W),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=w,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,z,W),f.fillStyle="black",f.fillText(e,z*(V-1)/2,W*(3-V)/2);const N=P(this,bt,hF).call(this,f.getImageData(0,0,z,W).data),D=P(this,bt,XO).call(this,N),L=P(this,bt,pF).call(this,D),U=P(this,bt,dF).call(this,N,z,W,L);return this.processDrawnLines({lines:{curves:U,width:z,height:W},pageWidth:i,pageHeight:a,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,i){const[a,u,d]=P(this,bt,YO).call(this,e),[h,f]=P(this,bt,KO).call(this,a,u,d,Math.hypot(u,d)*c(this,Ph).sigmaSFactor,c(this,Ph).sigmaR,c(this,Ph).kernelSize),g=P(this,bt,pF).call(this,f),w=P(this,bt,dF).call(this,h,u,d,g);return this.processDrawnLines({lines:{curves:w,width:u,height:d},pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:a,areContours:u}){r%180!==0&&([t,n]=[n,t]);const{curves:d,width:h,height:f}=e,g=e.thickness??0,w=[],v=Math.min(t/h,n/f),F=v/t,C=v/n,S=[];for(const{points:O}of d){const R=a?P(this,bt,QO).call(this,O):O;if(!R)continue;S.push(R);const V=R.length,z=new Float32Array(V),W=new Float32Array(3*(V===2?2:V-2));if(w.push({line:W,points:z}),V===2){z[0]=R[0]*F,z[1]=R[1]*C,W.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[N,D,L,U]=R;N*=F,D*=C,L*=F,U*=C,z.set([N,D,L,U],0),W.set([NaN,NaN,NaN,NaN,N,D],0);for(let $=4;$<V;$+=2){const Q=z[$]=R[$]*F,j=z[$+1]=R[$+1]*C;W.set(Pe.createBezierPoints(N,D,L,U,Q,j),($-2)*3),[N,D,L,U]=[L,U,Q,j]}}if(w.length===0)return null;const I=u?new cF:new P0;return I.build(w,t,n,1,r,u?0:g,i),{outline:I,newCurves:S,areContours:u,thickness:g,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:i}){let a=1/0,u=-1/0,d=0;for(const R of e){d+=R.length;for(let V=2,z=R.length;V<z;V++){const W=R[V]-R[V-2];a=Math.min(a,W),u=Math.max(u,W)}}let h;a>=-128&&u<=127?h=Int8Array:a>=-32768&&u<=32767?h=Int16Array:h=Int32Array;const f=e.length,g=hA+hg*f,w=new Uint32Array(g);let v=0;w[v++]=g*Uint32Array.BYTES_PER_ELEMENT+(d-2*f)*h.BYTES_PER_ELEMENT,w[v++]=0,w[v++]=r,w[v++]=i,w[v++]=t?0:1,w[v++]=Math.max(0,Math.floor(n??0)),w[v++]=f,w[v++]=h.BYTES_PER_ELEMENT;for(const R of e)w[v++]=R.length-2,w[v++]=R[0],w[v++]=R[1];const F=new CompressionStream("deflate-raw"),C=F.writable.getWriter();await C.ready,C.write(w);const S=h.prototype.constructor;for(const R of e){const V=new S(R.length-2);for(let z=2,W=R.length;z<W;z++)V[z-2]=R[z]-R[z-2];C.write(V)}C.close();const I=await new Response(F.readable).arrayBuffer();return new Uint8Array(I).toBase64()}static async decompressSignature(e){try{const t=Uint8Array.fromBase64(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,u=0;for await(const R of n)a||(a=new Uint8Array(new Uint32Array(R.buffer,0,4)[0])),a.set(R,u),u+=R.length;const d=new Uint32Array(a.buffer,0,a.length>>2),h=d[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=d[2],g=d[3],w=d[4]===0,v=d[5],F=d[6],C=d[7],S=[],I=(hA+hg*F)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(C){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(a.buffer,I);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(a.buffer,I);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(a.buffer,I);break}u=0;for(let R=0;R<F;R++){const V=d[hg*R+hA],z=new Float32Array(V+2);S.push(z);for(let W=0;W<hg-1;W++)z[W]=d[hg*R+hA+W+1];for(let W=0;W<V;W++)z[W+2]=z[W]+O[u++]}return{areContours:w,thickness:v,outlines:S,width:f,height:g}}catch(t){return Ke(`decompressSignature: ${t}`),null}}}Ph=new WeakMap,bt=new WeakSet,uF=function(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r},Yi=new WeakMap,GO=function(e,t,n,r,i,a,u){const d=P(this,bt,uF).call(this,n,r,i,a);for(let h=0;h<8;h++){const f=(-h+d-u+16)%8,g=c(this,Yi)[2*f],w=c(this,Yi)[2*f+1];if(e[(n+g)*t+(r+w)]!==0)return f}return-1},qO=function(e,t,n,r,i,a,u){const d=P(this,bt,uF).call(this,n,r,i,a);for(let h=0;h<8;h++){const f=(h+d+u+16)%8,g=c(this,Yi)[2*f],w=c(this,Yi)[2*f+1];if(e[(n+g)*t+(r+w)]!==0)return f}return-1},dF=function(e,t,n,r){const i=e.length,a=new Int32Array(i);for(let f=0;f<i;f++)a[f]=e[f]<=r?1:0;for(let f=1;f<n-1;f++)a[f*t]=a[f*t+t-1]=0;for(let f=0;f<t;f++)a[f]=a[t*n-1-f]=0;let u=1,d;const h=[];for(let f=1;f<n-1;f++){d=1;for(let g=1;g<t-1;g++){const w=f*t+g,v=a[w];if(v===0)continue;let F=f,C=g;if(v===1&&a[w-1]===0)u+=1,C-=1;else if(v>=1&&a[w+1]===0)u+=1,C+=1,v>1&&(d=v);else{v!==1&&(d=Math.abs(v));continue}const S=[g,f],I=C===g+1,O={isHole:I,points:S,id:u,parent:0};h.push(O);let R;for(const $ of h)if($.id===d){R=$;break}R?R.isHole?O.parent=I?R.parent:d:O.parent=I?d:R.parent:O.parent=I?d:0;const V=P(this,bt,GO).call(this,a,t,f,g,F,C,0);if(V===-1){a[w]=-u,a[w]!==1&&(d=Math.abs(a[w]));continue}let z=c(this,Yi)[2*V],W=c(this,Yi)[2*V+1];const N=f+z,D=g+W;F=N,C=D;let L=f,U=g;for(;;){const $=P(this,bt,qO).call(this,a,t,L,U,F,C,1);z=c(this,Yi)[2*$],W=c(this,Yi)[2*$+1];const Q=L+z,j=U+W;S.push(j,Q);const me=L*t+U;if(a[me+1]===0?a[me]=-u:a[me]===1&&(a[me]=u),Q===f&&j===g&&L===N&&U===D){a[w]!==1&&(d=Math.abs(a[w]));break}else F=L,C=U,L=Q,U=j}}}return h},t_=function(e,t,n,r){if(n-t<=4){for(let N=t;N<n-2;N+=2)r.push(e[N],e[N+1]);return}const i=e[t],a=e[t+1],u=e[n-4]-i,d=e[n-3]-a,h=Math.hypot(u,d),f=u/h,g=d/h,w=f*a-g*i,v=d/u,F=1/h,C=Math.atan(v),S=Math.cos(C),I=Math.sin(C),O=F*(Math.abs(S)+Math.abs(I)),R=F*(1-O+O**2),V=Math.max(Math.atan(Math.abs(I+S)*R),Math.atan(Math.abs(I-S)*R));let z=0,W=t;for(let N=t+2;N<n-2;N+=2){const D=Math.abs(w-f*e[N+1]+g*e[N]);D>z&&(W=N,z=D)}z>(h*V)**2?(P(this,bt,t_).call(this,e,t,W+2,r),P(this,bt,t_).call(this,e,W,n,r)):r.push(i,a)},QO=function(e){const t=[],n=e.length;return P(this,bt,t_).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},KO=function(e,t,n,r,i,a){const u=new Float32Array(a**2),d=-2*r**2,h=a>>1;for(let C=0;C<a;C++){const S=(C-h)**2;for(let I=0;I<a;I++)u[C*a+I]=Math.exp((S+(I-h)**2)/d)}const f=new Float32Array(256),g=-2*i**2;for(let C=0;C<256;C++)f[C]=Math.exp(C**2/g);const w=e.length,v=new Uint8Array(w),F=new Uint32Array(256);for(let C=0;C<n;C++)for(let S=0;S<t;S++){const I=C*t+S,O=e[I];let R=0,V=0;for(let W=0;W<a;W++){const N=C+W-h;if(!(N<0||N>=n))for(let D=0;D<a;D++){const L=S+D-h;if(L<0||L>=t)continue;const U=e[N*t+L],$=u[W*a+D]*f[Math.abs(U-O)];R+=U*$,V+=$}}const z=v[I]=Math.round(R/V);F[z]++}return[v,F]},XO=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},hF=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let u=0,d=n.length;u<d;u++){const h=n[u]=e[u<<2];r=Math.max(r,h),i=Math.min(i,h)}const a=255/(r-i);for(let u=0,d=n.length;u<d;u++)n[u]=(n[u]-i)*a;return n},pF=function(e){let t,n=-1/0,r=-1/0;const i=e.findIndex(d=>d!==0);let a=i,u=i;for(t=i;t<256;t++){const d=e[t];d>n&&(t-a>r&&(r=t-a,u=t-1),n=d,a=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t},YO=function(e){const t=e,{width:n,height:r}=e,{maxDim:i}=c(this,Ph);let a=n,u=r;if(n>i||r>i){let w=n,v=r,F=Math.log2(Math.max(n,r)/i);const C=Math.floor(F);F=F===C?C-1:C;for(let I=0;I<F;I++){a=Math.ceil(w/2),u=Math.ceil(v/2);const O=new OffscreenCanvas(a,u);O.getContext("2d").drawImage(e,0,0,w,v,0,0,a,u),w=a,v=u,e!==t&&e.close(),e=O.transferToImageBitmap()}const S=Math.min(i/a,i/u);a=Math.round(a*S),u=Math.round(u*S)}const h=new OffscreenCanvas(a,u).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,a,u),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,a,u);const f=h.getImageData(0,0,a,u).data;return[P(this,bt,hF).call(this,f),a,u]},T(Cl,bt),T(Cl,Ph,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),T(Cl,Yi,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class QS extends UO{constructor(){super(),super.updateProperties({fill:Ht._defaultLineColor,"stroke-width":0})}clone(){const e=new QS;return e.updateAll(this),e}}class KS extends qx{constructor(e){super(e),super.updateProperties({stroke:Ht._defaultLineColor,"stroke-width":1})}clone(){const e=new KS(this._viewParameters);return e.updateAll(this),e}}var uu,Za,du,Rh;const Fs=class Fs extends U_{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});T(this,uu,!1);T(this,Za,null);T(this,du,null);T(this,Rh,null);this._willKeepAspectRatio=!0,x(this,du,t.signatureData||null),x(this,Za,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){Ht.initialize(t,n),this._defaultDrawingOptions=new QS,this._defaultDrawnSignatureOptions=new KS(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Xe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,Za)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(c(this,du)){const{lines:i,mustSmooth:a,areContours:u,description:d,uuid:h,heightInPage:f}=c(this,du),{rawDims:{pageWidth:g,pageHeight:w},rotation:v}=this.parent.viewport,F=Cl.processDrawnLines({lines:i,pageWidth:g,pageHeight:w,rotation:v,innerMargin:Fs._INNER_MARGIN,mustSmooth:a,areContours:u});this.addSignature(F,f,d,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,Za)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){x(this,Rh,t),this.addEditToolbar()}getUuid(){return c(this,Rh)}get description(){return c(this,Za)}set description(t){x(this,Za,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:r,width:i,height:a}=c(this,du),u=Math.max(i,a),d=Cl.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:r,width:i,height:a},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,i){const{x:a,y:u}=this,{outline:d}=x(this,du,t);x(this,uu,d instanceof cF),this.description=r;let h;c(this,uu)?h=Fs.getDefaultDrawingOptions():(h=Fs._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:h});const[,f]=this.pageDimensions;let g=n/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=a,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return Cl.process(t,n,r,i,Fs._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return Cl.extractContoursFromText(t,n,r,i,a,Fs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return Cl.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:i,innerMargin:Fs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Fs.getDefaultDrawingOptions():(this._drawingOptions=Fs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:c(this,uu),color:[0,0,0],thickness:c(this,uu)?0:i});return this.addComment(a),t?(a.paths={lines:n,points:r},a.uuid=c(this,Rh),a.isCopy=!0):a.lines=n,c(this,Za)&&(a.accessibilityData={type:"Figure",alt:c(this,Za)}),a}static deserializeDraw(t,n,r,i,a,u){return u.areContours?cF.deserialize(t,n,r,i,a,u):P0.deserialize(t,n,r,i,a,u)}static async deserialize(t,n,r){var a;const i=await super.deserialize(t,n,r);return x(i,uu,t.areContours),i.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",x(i,Rh,t.uuid),i}};uu=new WeakMap,Za=new WeakMap,du=new WeakMap,Rh=new WeakMap,ae(Fs,"_type","signature"),ae(Fs,"_editorType",Ze.SIGNATURE),ae(Fs,"_defaultDrawingOptions",null);let fF=Fs;var en,nr,hu,Al,pu,Bm,_l,Dh,eo,Ws,Vm,gt,Ug,jg,n_,r_,s_,gF,i_,JO;class mF extends Ht{constructor(t){super({...t,name:"stampEditor"});T(this,gt);T(this,en,null);T(this,nr,null);T(this,hu,null);T(this,Al,null);T(this,pu,null);T(this,Bm,"");T(this,_l,null);T(this,Dh,!1);T(this,eo,null);T(this,Ws,!1);T(this,Vm,!1);x(this,Al,t.bitmapUrl),x(this,pu,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){Ht.initialize(t,n)}static isHandlingMimeForPasting(t){return Jb.includes(t)}static paste(t,n){n.pasteEditor({mode:Ze.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:u}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:i,width:a,height:u,channels:i.length/(a*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const h=d.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t;c(this,nr)&&(x(this,en,null),this._uiManager.imageManager.deleteId(c(this,nr)),(t=c(this,_l))==null||t.remove(),x(this,_l,null),c(this,eo)&&(clearTimeout(c(this,eo)),x(this,eo,null))),super.remove()}rebuild(){if(!this.parent){c(this,nr)&&P(this,gt,n_).call(this);return}super.rebuild(),this.div!==null&&(c(this,nr)&&c(this,_l)===null&&P(this,gt,n_).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,hu)||c(this,en)||c(this,Al)||c(this,pu)||c(this,nr)||c(this,Dh))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,Dh)||(c(this,en)?P(this,gt,r_).call(this):P(this,gt,n_).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(x(this,nr,r),i&&x(this,en,i),x(this,Dh,!1),P(this,gt,r_).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,eo)!==null&&clearTimeout(c(this,eo)),x(this,eo,setTimeout(()=>{x(this,eo,null),P(this,gt,gF).call(this)},200))}copyCanvas(t,n,r=!1){t||(t=224);const{width:i,height:a}=c(this,en),u=new mo;let d=c(this,en),h=i,f=a,g=null;if(n){if(i>n||a>n){const N=Math.min(n/i,n/a);h=Math.floor(i*N),f=Math.floor(a*N)}g=document.createElement("canvas");const v=g.width=Math.ceil(h*u.sx),F=g.height=Math.ceil(f*u.sy);c(this,Ws)||(d=P(this,gt,s_).call(this,v,F));const C=g.getContext("2d");C.filter=this._uiManager.hcmFilter;let S="white",I="#cfcfd8";this._uiManager.hcmFilter!=="none"?I="black":yG.isDarkMode&&(S="#8f8f9d",I="#42414d");const O=15,R=O*u.sx,V=O*u.sy,z=new OffscreenCanvas(R*2,V*2),W=z.getContext("2d");W.fillStyle=S,W.fillRect(0,0,R*2,V*2),W.fillStyle=I,W.fillRect(0,0,R,V),W.fillRect(R,V,R,V),C.fillStyle=C.createPattern(z,"repeat"),C.fillRect(0,0,v,F),C.drawImage(d,0,0,d.width,d.height,0,0,v,F)}let w=null;if(r){let v,F;if(u.symmetric&&d.width<t&&d.height<t)v=d.width,F=d.height;else if(d=c(this,en),i>t||a>t){const I=Math.min(t/i,t/a);v=Math.floor(i*I),F=Math.floor(a*I),c(this,Ws)||(d=P(this,gt,s_).call(this,v,F))}const S=new OffscreenCanvas(v,F).getContext("2d",{willReadFrequently:!0});S.drawImage(d,0,0,d.width,d.height,0,0,v,F),w={width:v,height:F,data:S.getImageData(0,0,v,F).data}}return{canvas:g,width:h,height:f,imageData:w}}static async deserialize(t,n,r){var S;let i=null,a=!1;if(t instanceof fO){const{data:{rect:I,rotation:O,id:R,structParent:V,popupRef:z,richText:W,contentsObj:N,creationDate:D,modificationDate:L},container:U,parent:{page:{pageNumber:$}},canvas:Q}=t;let j,me;Q?(delete t.canvas,{id:j,bitmap:me}=r.imageManager.getFromCanvas(U.id,Q),Q.remove()):(a=!0,t._hasNoCanvas=!0);const _e=((S=await n._structTree.getAriaAttributes(`${sf}${R}`))==null?void 0:S.get("aria-label"))||"";i=t={annotationType:Ze.STAMP,bitmapId:j,bitmap:me,pageIndex:$-1,rect:I.slice(0),rotation:O,annotationElementId:R,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:_e},isSvg:!1,structParent:V,popupRef:z,richText:W,comment:(N==null?void 0:N.str)||null,creationDate:D,modificationDate:L}}const u=await super.deserialize(t,n,r),{rect:d,bitmap:h,bitmapUrl:f,bitmapId:g,isSvg:w,accessibilityData:v}=t;a?(r.addMissingCanvas(t.id,u),x(u,Dh,!0)):g&&r.imageManager.isValidId(g)?(x(u,nr,g),h&&x(u,en,h)):x(u,Al,f),x(u,Ws,w);const[F,C]=u.pageDimensions;return u.width=(d[2]-d[0])/F,u.height=(d[3]-d[1])/C,v&&(u.altTextData=v),u._initialData=i,t.comment&&u.setCommentData(t),x(u,Vm,!!i),u}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:c(this,nr),isSvg:c(this,Ws)});if(this.addComment(r),t)return r.bitmapUrl=P(this,gt,i_).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const d=P(this,gt,JO).call(this,r);return d.isSame?null:(d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const u=c(this,Ws)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(c(this,nr)))n.stamps.set(c(this,nr),{area:u,serialized:r}),r.bitmap=P(this,gt,i_).call(this,!1);else if(c(this,Ws)){const d=n.stamps.get(c(this,nr));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=P(this,gt,i_).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}en=new WeakMap,nr=new WeakMap,hu=new WeakMap,Al=new WeakMap,pu=new WeakMap,Bm=new WeakMap,_l=new WeakMap,Dh=new WeakMap,eo=new WeakMap,Ws=new WeakMap,Vm=new WeakMap,gt=new WeakSet,Ug=function(t,n=!1){if(!t){this.remove();return}x(this,en,t.bitmap),n||(x(this,nr,t.id),x(this,Ws,t.isSvg)),t.file&&x(this,Bm,t.file.name),P(this,gt,r_).call(this)},jg=function(){if(x(this,hu,null),this._uiManager.enableWaiting(!1),!!c(this,_l)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,en)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,en)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},n_=function(){if(c(this,nr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,nr)).then(r=>P(this,gt,Ug).call(this,r,!0)).finally(()=>P(this,gt,jg).call(this));return}if(c(this,Al)){const r=c(this,Al);x(this,Al,null),this._uiManager.enableWaiting(!0),x(this,hu,this._uiManager.imageManager.getFromUrl(r).then(i=>P(this,gt,Ug).call(this,i)).finally(()=>P(this,gt,jg).call(this)));return}if(c(this,pu)){const r=c(this,pu);x(this,pu,null),this._uiManager.enableWaiting(!0),x(this,hu,this._uiManager.imageManager.getFromFile(r).then(i=>P(this,gt,Ug).call(this,i)).finally(()=>P(this,gt,jg).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Jb.join(",");const n=this._uiManager._signal;x(this,hu,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),P(this,gt,Ug).call(this,i)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>P(this,gt,jg).call(this))),t.click()},r_=function(){var h;const{div:t}=this;let{width:n,height:r}=c(this,en);const[i,a]=this.pageDimensions,u=.75;if(this.width)n=this.width*i,r=this.height*a;else if(n>u*i||r>u*a){const f=Math.min(u*i/n,u*a/r);n*=f,r*=f}this._uiManager.enableWaiting(!1);const d=x(this,_l,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/i,this.height=r/a,this.setDims(),(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),P(this,gt,gF).call(this),c(this,Vm)||(this.parent.addUndoableEditor(this),x(this,Vm,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Bm)&&this.div.setAttribute("aria-description",c(this,Bm)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},s_=function(t,n){const{width:r,height:i}=c(this,en);let a=r,u=i,d=c(this,en);for(;a>2*t||u>2*n;){const h=a,f=u;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(a,u);g.getContext("2d").drawImage(d,0,0,h,f,0,0,a,u),d=g.transferToImageBitmap()}return d},gF=function(){const[t,n]=this.parentDimensions,{width:r,height:i}=this,a=new mo,u=Math.ceil(r*t*a.sx),d=Math.ceil(i*n*a.sy),h=c(this,_l);if(!h||h.width===u&&h.height===d)return;h.width=u,h.height=d;const f=c(this,Ws)?c(this,en):P(this,gt,s_).call(this,u,d),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,u,d)},i_=function(t){if(t){if(c(this,Ws)){const i=this._uiManager.imageManager.getSvgUrl(c(this,nr));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,en),n.getContext("2d").drawImage(c(this,en),0,0),n.toDataURL()}if(c(this,Ws)){const[n,r]=this.pageDimensions,i=Math.round(this.width*n*Lu.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Lu.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(i,a);return u.getContext("2d").drawImage(c(this,en),0,0,c(this,en).width,c(this,en).height,0,0,i,a),u.transferToImageBitmap()}return structuredClone(c(this,en))},JO=function(t){var u;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===n,a=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},ae(mF,"_type","stamp"),ae(mF,"_editorType",Ze.STAMP);var Nh,Um,fu,mu,xl,ds,gu,jm,$m,Ji,El,rr,bl,yu,zm,Le,wu,Bt,wF,ZO,Pa,vF,AF,a_;const ji=class ji{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:i,annotationLayer:a,drawLayer:u,textLayer:d,viewport:h,l10n:f}){T(this,Bt);T(this,Nh);T(this,Um,!1);T(this,fu,null);T(this,mu,null);T(this,xl,null);T(this,ds,new Map);T(this,gu,!1);T(this,jm,!1);T(this,$m,!1);T(this,Ji,null);T(this,El,null);T(this,rr,null);T(this,bl,null);T(this,yu,null);T(this,zm,-1);T(this,Le);const g=[...c(ji,wu).values()];if(!ji._initialized){ji._initialized=!0;for(const w of g)w.initialize(f,e)}e.registerEditorTypes(g),x(this,Le,e),this.pageIndex=t,this.div=n,x(this,Nh,i),x(this,fu,a),this.viewport=h,x(this,rr,d),this.drawLayer=u,this._structTree=r,c(this,Le).addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return c(this,ds).size===0}get isInvisible(){return this.isEmpty&&c(this,Le).getMode()===Ze.NONE}updateToolbar(e){c(this,Le).updateToolbar(e)}updateMode(e=c(this,Le).getMode()){switch(P(this,Bt,a_).call(this),e){case Ze.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ze.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ze.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Ze.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of c(ji,wu).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,rr))==null?void 0:t.div)}setEditingState(e){c(this,Le).setEditingState(e)}addCommands(e){c(this,Le).addCommands(e)}cleanUndoStack(e){c(this,Le).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,fu))==null||t.togglePointerEvents(e)}async enable(){var n;x(this,$m,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=c(this,yu))==null||n.abort(),x(this,yu,null);const e=new Set;for(const r of c(this,Bt,wF))r.enableEditing(),r.show(!0),r.annotationElementId&&(c(this,Le).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=c(this,fu);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),c(this,Le).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}x(this,$m,!1),c(this,Le)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(x(this,jm,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,rr)&&!c(this,yu)){x(this,yu,new AbortController);const i=c(this,Le).combinedSignal(c(this,yu));c(this,rr).div.addEventListener("pointerdown",a=>{const{clientX:d,clientY:h,timeStamp:f}=a,g=c(this,zm);if(f-g>500){x(this,zm,f);return}x(this,zm,-1);const{classList:w}=this.div;w.toggle("getElements",!0);const v=document.elementsFromPoint(d,h);if(w.toggle("getElements",!1),!this.div.contains(v[0]))return;let F;const C=new RegExp(`^${oy}[0-9]+$`);for(const I of v)if(C.test(I.id)){F=I.id;break}if(!F)return;const S=c(this,ds).get(F);(S==null?void 0:S.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),S.dblclick(a))},{signal:i,capture:!0})}const e=c(this,fu),t=[];if(e){const i=new Map,a=new Map;for(const d of c(this,Bt,wF)){if(d.disableEditing(),!d.annotationElementId){t.push(d);continue}if(d.serialize()!==null){i.set(d.annotationElementId,d);continue}else a.set(d.annotationElementId,d);(r=this.getEditableAnnotation(d.annotationElementId))==null||r.show(),d.remove()}const u=e.getEditableAnnotations();for(const d of u){const{id:h}=d.data;if(c(this,Le).isDeletedAnnotationElement(h)){d.updateEdited({deleted:!0});continue}let f=a.get(h);if(f){f.resetAnnotationElement(d),f.show(!1),d.show();continue}f=i.get(h),f&&(c(this,Le).addChangedExistingAnnotation(f),f.renderAnnotationElement(d)&&f.show(!1)),d.show()}}P(this,Bt,a_).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of c(ji,wu).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),x(this,jm,!1)}getEditableAnnotation(e){var t;return((t=c(this,fu))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,Le).getActive()!==e&&c(this,Le).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,rr))!=null&&e.div&&!c(this,bl)){x(this,bl,new AbortController);const t=c(this,Le).combinedSignal(c(this,bl));c(this,rr).div.addEventListener("pointerdown",P(this,Bt,ZO).bind(this),{signal:t}),c(this,rr).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,rr))!=null&&e.div&&c(this,bl)&&(c(this,bl).abort(),x(this,bl,null),c(this,rr).div.classList.remove("highlighting"))}enableClick(){if(c(this,mu))return;x(this,mu,new AbortController);const e=c(this,Le).combinedSignal(c(this,mu));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,mu))==null||e.abort(),x(this,mu,null)}attach(e){c(this,ds).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,Le).isDeletedAnnotationElement(t)&&c(this,Le).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,ds).delete(e.id),(t=c(this,Nh))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,jm)&&e.annotationElementId&&c(this,Le).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,Le).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,Le).addDeletedAnnotationElement(e),Ht.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,Le).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,$m)),c(this,Le).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,xl)&&(e._focusEventsAllowed=!1,x(this,xl,setTimeout(()=>{x(this,xl,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,Le)._signal}),t.focus())},0))),e._structTreeParentId=(n=c(this,Nh))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of c(this,ds).values())if(t.uid===e)return t;return null}getNextId(){return c(this,Le).getId()}combinedSignal(e){return c(this,Le).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,Bt,Pa))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c(this,Le).updateMode(e.mode);const{offsetX:n,offsetY:r}=P(this,Bt,AF).call(this),i=this.getNextId(),a=P(this,Bt,vF).call(this,{parent:this,id:i,x:n,y:r,uiManager:c(this,Le),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=c(ji,wu).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,Le)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),i=P(this,Bt,vF).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,Le),isCentered:t,...n});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(P(this,Bt,AF).call(this),!0,e)}setSelected(e){c(this,Le).setSelected(e)}toggleSelected(e){c(this,Le).toggleSelected(e)}unselect(e){c(this,Le).unselect(e)}pointerup(e){var r;const{isMac:t}=qn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!c(this,gu)||(x(this,gu,!1),(r=c(this,Bt,Pa))!=null&&r.isDrawer&&c(this,Bt,Pa).supportMultipleDrawings))return;if(!c(this,Um)){x(this,Um,!0);return}const n=c(this,Le).getMode();if(n===Ze.STAMP||n===Ze.SIGNATURE){c(this,Le).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(c(this,Le).getMode()===Ze.HIGHLIGHT&&this.enableTextSelection(),c(this,gu)){x(this,gu,!1);return}const{isMac:t}=qn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(x(this,gu,!0),(r=c(this,Bt,Pa))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=c(this,Le).getActive();x(this,Um,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(this,Ji)){c(this,Bt,Pa).startDrawing(this,c(this,Le),!1,e);return}c(this,Le).setCurrentDrawingSession(this),x(this,Ji,new AbortController);const t=c(this,Le).combinedSignal(c(this,Ji));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(x(this,El,null),this.commitOrRemove())},{signal:t}),c(this,Bt,Pa).startDrawing(this,c(this,Le),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&x(this,El,t);return}c(this,El)&&setTimeout(()=>{var t;(t=c(this,El))==null||t.focus(),x(this,El,null)},0)}endDrawingSession(e=!1){return c(this,Ji)?(c(this,Le).setCurrentDrawingSession(null),c(this,Ji).abort(),x(this,Ji,null),x(this,El,null),c(this,Bt,Pa).endDrawing(e)):null}findNewParent(e,t,n){const r=c(this,Le).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return c(this,Ji)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Ji)&&c(this,Bt,Pa).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,Le).getActive())==null?void 0:e.parent)===this&&(c(this,Le).commitOrRemove(),c(this,Le).setActiveEditor(null)),c(this,xl)&&(clearTimeout(c(this,xl)),x(this,xl,null));for(const n of c(this,ds).values())(t=c(this,Nh))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,ds).clear(),c(this,Le).removeLayer(this)}render({viewport:e}){this.viewport=e,Qh(this.div,e);for(const t of c(this,Le).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,Le).commitOrRemove(),P(this,Bt,a_).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Qh(this.div,{rotation:n}),t!==n)for(const r of c(this,ds).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,Le).viewParameters.realScale}};Nh=new WeakMap,Um=new WeakMap,fu=new WeakMap,mu=new WeakMap,xl=new WeakMap,ds=new WeakMap,gu=new WeakMap,jm=new WeakMap,$m=new WeakMap,Ji=new WeakMap,El=new WeakMap,rr=new WeakMap,bl=new WeakMap,yu=new WeakMap,zm=new WeakMap,Le=new WeakMap,wu=new WeakMap,Bt=new WeakSet,wF=function(){return c(this,ds).size!==0?c(this,ds).values():c(this,Le).getEditors(this.pageIndex)},ZO=function(e){c(this,Le).unselectAll();const{target:t}=e;if(t===c(this,rr).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,rr).div.contains(t)){const{isMac:n}=qn.platform;if(e.button!==0||e.ctrlKey&&n)return;c(this,Le).showAllEditors("highlight",!0,!0),c(this,rr).div.classList.add("free"),this.toggleDrawing(),V_.startHighlighting(this,c(this,Le).direction==="ltr",{target:c(this,rr).div,x:e.x,y:e.y}),c(this,rr).div.addEventListener("pointerup",()=>{c(this,rr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,Le)._signal}),e.preventDefault()}},Pa=function(){return c(ji,wu).get(c(this,Le).getMode())},vF=function(e){const t=c(this,Bt,Pa);return t?new t.prototype.constructor(e):null},AF=function(){const{x:e,y:t,width:n,height:r}=this.boundingClientRect,i=Math.max(0,e),a=Math.max(0,t),u=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+r),h=(i+u)/2-e,f=(a+d)/2-t,[g,w]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:w}},a_=function(){for(const e of c(this,ds).values())e.isEmpty()&&e.remove()},ae(ji,"_initialized",!1),T(ji,wu,new Map([JC,lF,mF,V_,fF].map(e=>[e._editorType,e])));let yF=ji;var Zi,Wr,Mh,a0,ix,e4,yo,xF,t4,EF;const zn=class zn{constructor(){T(this,yo);T(this,Zi,null);T(this,Wr,new Map);T(this,Mh,new Map)}setParent(e){if(!c(this,Zi)){x(this,Zi,e);return}if(c(this,Zi)!==e){if(c(this,Wr).size>0)for(const t of c(this,Wr).values())t.remove(),e.append(t);x(this,Zi,e)}}static get _svgFactory(){return Xe(this,"_svgFactory",new O_)}draw(e,t=!1,n=!1){const r=jn(zn,a0)._++,i=P(this,yo,xF).call(this),a=zn._svgFactory.createElement("defs");i.append(a);const u=zn._svgFactory.createElement("path");a.append(u);const d=`path_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,Mh).set(r,u);const h=n?P(this,yo,t4).call(this,a,d):null,f=zn._svgFactory.createElement("use");return i.append(f),f.setAttribute("href",`#${d}`),this.updateProperties(i,e),c(this,Wr).set(r,i),{id:r,clipPathId:`url(#${h})`}}drawOutline(e,t){const n=jn(zn,a0)._++,r=P(this,yo,xF).call(this),i=zn._svgFactory.createElement("defs");r.append(i);const a=zn._svgFactory.createElement("path");i.append(a);const u=`path_${n}`;a.setAttribute("id",u),a.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const g=zn._svgFactory.createElement("mask");i.append(g),d=`mask_${n}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const w=zn._svgFactory.createElement("rect");g.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const v=zn._svgFactory.createElement("use");g.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const h=zn._svgFactory.createElement("use");r.append(h),h.setAttribute("href",`#${u}`),d&&h.setAttribute("mask",`url(#${d})`);const f=h.cloneNode();return r.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(r,e),c(this,Wr).set(n,r),n}finalizeDraw(e,t){c(this,Mh).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:n,bbox:r,rootClass:i,path:a}=t,u=typeof e=="number"?c(this,Wr).get(e):e;if(u){if(n&&P(this,yo,EF).call(this,u,n),r&&P(d=zn,ix,e4).call(d,u,r),i){const{classList:h}=u;for(const[f,g]of Object.entries(i))h.toggle(f,g)}if(a){const f=u.firstElementChild.firstElementChild;P(this,yo,EF).call(this,f,a)}}}updateParent(e,t){if(t===this)return;const n=c(this,Wr).get(e);n&&(c(t,Zi).append(n),c(this,Wr).delete(e),c(t,Wr).set(e,n))}remove(e){c(this,Mh).delete(e),c(this,Zi)!==null&&(c(this,Wr).get(e).remove(),c(this,Wr).delete(e))}destroy(){x(this,Zi,null);for(const e of c(this,Wr).values())e.remove();c(this,Wr).clear(),c(this,Mh).clear()}};Zi=new WeakMap,Wr=new WeakMap,Mh=new WeakMap,a0=new WeakMap,ix=new WeakSet,e4=function(e,[t,n,r,i]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*i}%`},yo=new WeakSet,xF=function(){const e=zn._svgFactory.create(1,1,!0);return c(this,Zi).append(e),e.setAttribute("aria-hidden",!0),e},t4=function(e,t){const n=zn._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=zn._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},EF=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},T(zn,ix),T(zn,a0,0);let _F=zn;globalThis._pdfjsTestingUtils={HighlightOutliner:eF};globalThis.pdfjsLib={AbortException:Mu,AnnotationEditorLayer:yF,AnnotationEditorParamsType:dt,AnnotationEditorType:Ze,AnnotationEditorUIManager:Kh,AnnotationLayer:XC,AnnotationMode:bc,AnnotationType:Rn,applyOpacity:vG,build:Fq,ColorPicker:M_,createValidAbsoluteUrl:DM,CSSConstants:wG,DOMSVGFactory:O_,DrawLayer:_F,FeatureTest:qn,fetchData:S0,findContrastColor:AG,getDocument:JL,getFilenameFromUrl:hG,getPdfFilenameFromUrl:pG,getRGB:k0,getUuid:MM,getXfaPageViewport:mG,GlobalWorkerOptions:to,ImageKind:FA,InvalidPDFException:Xb,isDataScheme:jx,isPdfFile:$S,isValidExplicitDest:PG,MathClamp:mr,noContextMenu:ki,normalizeUnicode:uG,OPS:ly,OutputScale:mo,PagesMapper:uy,PasswordResponses:eG,PDFDataRangeTransport:ZL,PDFDateString:k_,PDFWorker:hy,PermissionFlag:ZW,PixelsPerInch:Lu,RenderingCancelledException:jS,renderRichText:OM,ResponseException:T_,setLayerDimensions:Qh,shadow:Xe,SignatureExtractor:Cl,stopEvent:yn,SupportedImageMimeTypes:Jb,TextLayer:dy,TouchManager:P_,updateUrlHash:NM,Util:Fe,VerbosityLevel:Ox,version:Cq,XfaLayer:LM};var JE={exports:{}},KR;function Xq(){return KR||(KR=1,(function(s){var e=(function(t){var n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(Z,J,H){Z[J]=H.value},a,u=typeof Symbol=="function"?Symbol:{},d=u.iterator||"@@iterator",h=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function g(Z,J,H){return Object.defineProperty(Z,J,{value:H,enumerable:!0,configurable:!0,writable:!0}),Z[J]}try{g({},"")}catch{g=function(J,H,q){return J[H]=q}}function w(Z,J,H,q){var ie=J&&J.prototype instanceof R?J:R,ye=Object.create(ie.prototype),Ae=new we(q||[]);return i(ye,"_invoke",{value:Q(Z,H,Ae)}),ye}t.wrap=w;function v(Z,J,H){try{return{type:"normal",arg:Z.call(J,H)}}catch(q){return{type:"throw",arg:q}}}var F="suspendedStart",C="suspendedYield",S="executing",I="completed",O={};function R(){}function V(){}function z(){}var W={};g(W,d,function(){return this});var N=Object.getPrototypeOf,D=N&&N(N(fe([])));D&&D!==n&&r.call(D,d)&&(W=D);var L=z.prototype=R.prototype=Object.create(W);V.prototype=z,i(L,"constructor",{value:z,configurable:!0}),i(z,"constructor",{value:V,configurable:!0}),V.displayName=g(z,f,"GeneratorFunction");function U(Z){["next","throw","return"].forEach(function(J){g(Z,J,function(H){return this._invoke(J,H)})})}t.isGeneratorFunction=function(Z){var J=typeof Z=="function"&&Z.constructor;return J?J===V||(J.displayName||J.name)==="GeneratorFunction":!1},t.mark=function(Z){return Object.setPrototypeOf?Object.setPrototypeOf(Z,z):(Z.__proto__=z,g(Z,f,"GeneratorFunction")),Z.prototype=Object.create(L),Z},t.awrap=function(Z){return{__await:Z}};function $(Z,J){function H(ye,Ae,Ce,Se){var Be=v(Z[ye],Z,Ae);if(Be.type==="throw")Se(Be.arg);else{var be=Be.arg,Me=be.value;return Me&&typeof Me=="object"&&r.call(Me,"__await")?J.resolve(Me.__await).then(function(rt){H("next",rt,Ce,Se)},function(rt){H("throw",rt,Ce,Se)}):J.resolve(Me).then(function(rt){be.value=rt,Ce(be)},function(rt){return H("throw",rt,Ce,Se)})}}var q;function ie(ye,Ae){function Ce(){return new J(function(Se,Be){H(ye,Ae,Se,Be)})}return q=q?q.then(Ce,Ce):Ce()}i(this,"_invoke",{value:ie})}U($.prototype),g($.prototype,h,function(){return this}),t.AsyncIterator=$,t.async=function(Z,J,H,q,ie){ie===void 0&&(ie=Promise);var ye=new $(w(Z,J,H,q),ie);return t.isGeneratorFunction(J)?ye:ye.next().then(function(Ae){return Ae.done?Ae.value:ye.next()})};function Q(Z,J,H){var q=F;return function(ye,Ae){if(q===S)throw new Error("Generator is already running");if(q===I){if(ye==="throw")throw Ae;return oe()}for(H.method=ye,H.arg=Ae;;){var Ce=H.delegate;if(Ce){var Se=j(Ce,H);if(Se){if(Se===O)continue;return Se}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if(q===F)throw q=I,H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);q=S;var Be=v(Z,J,H);if(Be.type==="normal"){if(q=H.done?I:C,Be.arg===O)continue;return{value:Be.arg,done:H.done}}else Be.type==="throw"&&(q=I,H.method="throw",H.arg=Be.arg)}}}function j(Z,J){var H=J.method,q=Z.iterator[H];if(q===a)return J.delegate=null,H==="throw"&&Z.iterator.return&&(J.method="return",J.arg=a,j(Z,J),J.method==="throw")||H!=="return"&&(J.method="throw",J.arg=new TypeError("The iterator does not provide a '"+H+"' method")),O;var ie=v(q,Z.iterator,J.arg);if(ie.type==="throw")return J.method="throw",J.arg=ie.arg,J.delegate=null,O;var ye=ie.arg;if(!ye)return J.method="throw",J.arg=new TypeError("iterator result is not an object"),J.delegate=null,O;if(ye.done)J[Z.resultName]=ye.value,J.next=Z.nextLoc,J.method!=="return"&&(J.method="next",J.arg=a);else return ye;return J.delegate=null,O}U(L),g(L,f,"Generator"),g(L,d,function(){return this}),g(L,"toString",function(){return"[object Generator]"});function me(Z){var J={tryLoc:Z[0]};1 in Z&&(J.catchLoc=Z[1]),2 in Z&&(J.finallyLoc=Z[2],J.afterLoc=Z[3]),this.tryEntries.push(J)}function _e(Z){var J=Z.completion||{};J.type="normal",delete J.arg,Z.completion=J}function we(Z){this.tryEntries=[{tryLoc:"root"}],Z.forEach(me,this),this.reset(!0)}t.keys=function(Z){var J=Object(Z),H=[];for(var q in J)H.push(q);return H.reverse(),function ie(){for(;H.length;){var ye=H.pop();if(ye in J)return ie.value=ye,ie.done=!1,ie}return ie.done=!0,ie}};function fe(Z){if(Z){var J=Z[d];if(J)return J.call(Z);if(typeof Z.next=="function")return Z;if(!isNaN(Z.length)){var H=-1,q=function ie(){for(;++H<Z.length;)if(r.call(Z,H))return ie.value=Z[H],ie.done=!1,ie;return ie.value=a,ie.done=!0,ie};return q.next=q}}return{next:oe}}t.values=fe;function oe(){return{value:a,done:!0}}return we.prototype={constructor:we,reset:function(Z){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(_e),!Z)for(var J in this)J.charAt(0)==="t"&&r.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=a)},stop:function(){this.done=!0;var Z=this.tryEntries[0],J=Z.completion;if(J.type==="throw")throw J.arg;return this.rval},dispatchException:function(Z){if(this.done)throw Z;var J=this;function H(Se,Be){return ye.type="throw",ye.arg=Z,J.next=Se,Be&&(J.method="next",J.arg=a),!!Be}for(var q=this.tryEntries.length-1;q>=0;--q){var ie=this.tryEntries[q],ye=ie.completion;if(ie.tryLoc==="root")return H("end");if(ie.tryLoc<=this.prev){var Ae=r.call(ie,"catchLoc"),Ce=r.call(ie,"finallyLoc");if(Ae&&Ce){if(this.prev<ie.catchLoc)return H(ie.catchLoc,!0);if(this.prev<ie.finallyLoc)return H(ie.finallyLoc)}else if(Ae){if(this.prev<ie.catchLoc)return H(ie.catchLoc,!0)}else if(Ce){if(this.prev<ie.finallyLoc)return H(ie.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Z,J){for(var H=this.tryEntries.length-1;H>=0;--H){var q=this.tryEntries[H];if(q.tryLoc<=this.prev&&r.call(q,"finallyLoc")&&this.prev<q.finallyLoc){var ie=q;break}}ie&&(Z==="break"||Z==="continue")&&ie.tryLoc<=J&&J<=ie.finallyLoc&&(ie=null);var ye=ie?ie.completion:{};return ye.type=Z,ye.arg=J,ie?(this.method="next",this.next=ie.finallyLoc,O):this.complete(ye)},complete:function(Z,J){if(Z.type==="throw")throw Z.arg;return Z.type==="break"||Z.type==="continue"?this.next=Z.arg:Z.type==="return"?(this.rval=this.arg=Z.arg,this.method="return",this.next="end"):Z.type==="normal"&&J&&(this.next=J),O},finish:function(Z){for(var J=this.tryEntries.length-1;J>=0;--J){var H=this.tryEntries[J];if(H.finallyLoc===Z)return this.complete(H.completion,H.afterLoc),_e(H),O}},catch:function(Z){for(var J=this.tryEntries.length-1;J>=0;--J){var H=this.tryEntries[J];if(H.tryLoc===Z){var q=H.completion;if(q.type==="throw"){var ie=q.arg;_e(H)}return ie}}throw new Error("illegal catch attempt")},delegateYield:function(Z,J,H){return this.delegate={iterator:fe(Z),resultName:J,nextLoc:H},this.method==="next"&&(this.arg=a),O}},t})(s.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(JE)),JE.exports}var ZE,XR;function XS(){return XR||(XR=1,ZE=(s,e)=>`${s}-${e}-${Math.random().toString(16).slice(3,8)}`),ZE}var eb,YR;function n4(){if(YR)return eb;YR=1;const s=XS();let e=0;return eb=({id:t,action:n,payload:r={}})=>{let i=t;return typeof i>"u"&&(i=s("Job",e),e+=1),{id:i,action:n,payload:r}},eb}var pg={},JR;function YS(){if(JR)return pg;JR=1;let s=!1;return pg.logging=s,pg.setLogging=e=>{s=e},pg.log=(...e)=>s?console.log.apply(this,e):null,pg}var tb,ZR;function Yq(){if(ZR)return tb;ZR=1;const s=n4(),{log:e}=YS(),t=XS();let n=0;return tb=()=>{const r=t("Scheduler",n),i={},a={};let u=[];n+=1;const d=()=>u.length,h=()=>Object.keys(i).length,f=()=>{if(u.length!==0){const C=Object.keys(i);for(let S=0;S<C.length;S+=1)if(typeof a[C[S]]>"u"){u[0](i[C[S]]);break}}},g=(C,S)=>new Promise((I,O)=>{const R=s({action:C,payload:S});u.push(async V=>{u.shift(),a[V.id]=R;try{I(await V[C].apply(this,[...S,R.id]))}catch(z){O(z)}finally{delete a[V.id],f()}}),e(`[${r}]: Add ${R.id} to JobQueue`),e(`[${r}]: JobQueue length=${u.length}`),f()});return{addWorker:C=>(i[C.id]=C,e(`[${r}]: Add ${C.id}`),e(`[${r}]: Number of workers=${h()}`),f(),C.id),addJob:async(C,...S)=>{if(h()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return g(C,S)},terminate:async()=>{Object.keys(i).forEach(async C=>{await i[C].terminate()}),u=[]},getQueueLen:d,getNumWorkers:h}},tb}function Jq(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nb,eD;function Zq(){return eD||(eD=1,nb=s=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Jq=="function"&&(e.type="node"),typeof s>"u"?e:e[s]}),nb}var rb,tD;function eQ(){if(tD)return rb;tD=1;const e=Zq()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return rb=t=>{const n={...t};return["corePath","workerPath","langPath"].forEach(r=>{t[r]&&(n[r]=e(n[r]))}),n},rb}var sb,nD;function r4(){return nD||(nD=1,sb={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),sb}const tQ="7.0.0",nQ={version:tQ};var ib,rD;function rQ(){return rD||(rD=1,ib={workerBlobURL:!0,logger:()=>{}}),ib}var ab,sD;function sQ(){if(sD)return ab;sD=1;const s=nQ.version;return ab={...rQ(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${s}/dist/worker.min.js`},ab}var ob,iD;function iQ(){return iD||(iD=1,ob=({workerPath:s,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const n=new Blob([`importScripts("${s}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(n))}else t=new Worker(s);return t}),ob}var lb,aD;function aQ(){return aD||(aD=1,lb=s=>{s.terminate()}),lb}var cb,oD;function oQ(){return oD||(oD=1,cb=(s,e)=>{s.onmessage=({data:t})=>{e(t)}}),cb}var ub,lD;function lQ(){return lD||(lD=1,ub=async(s,e)=>{s.postMessage(e)}),ub}var db,cD;function cQ(){if(cD)return db;cD=1;const s=t=>new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=({target:{error:{code:a}}})=>{r(Error(`File could not be read! Code=${a}`))},i.readAsArrayBuffer(t)}),e=async t=>{let n=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?n=atob(t.split(",")[1]).split("").map(r=>r.charCodeAt(0)):n=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(n=await e(t.src)),t.tagName==="VIDEO"&&(n=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(r=>{t.toBlob(async i=>{n=await s(i),r()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const r=await t.convertToBlob();n=await s(r)}else(t instanceof File||t instanceof Blob)&&(n=await s(t));return new Uint8Array(n)};return db=e,db}var hb,uD;function uQ(){if(uD)return hb;uD=1;const s=sQ(),e=iQ(),t=aQ(),n=oQ(),r=lQ(),i=cQ();return hb={defaultOptions:s,spawnWorker:e,terminateWorker:t,onMessage:n,send:r,loadImage:i},hb}var pb,dD;function s4(){if(dD)return pb;dD=1;const s=eQ(),e=n4(),{log:t}=YS(),n=XS(),r=r4(),{defaultOptions:i,spawnWorker:a,terminateWorker:u,onMessage:d,loadImage:h,send:f}=uQ();let g=0;return pb=async(w="eng",v=r.LSTM_ONLY,F={},C={})=>{const S=n("Worker",g),{logger:I,errorHandler:O,...R}=s({...i,...F}),V={},z=typeof w=="string"?w.split("+"):w;let W=v,N=C;const D=[r.DEFAULT,r.LSTM_ONLY].includes(v)&&!R.legacyCore;let L,U;const $=new Promise((be,Me)=>{U=be,L=Me}),Q=be=>{L(be.message)};let j=a(R);j.onerror=Q,g+=1;const me=({id:be,action:Me,payload:rt})=>new Promise((Wt,Vt)=>{t(`[${S}]: Start ${be}, action=${Me}`);const ue=`${Me}-${be}`;V[ue]={resolve:Wt,reject:Vt},f(j,{workerId:S,jobId:be,action:Me,payload:rt})}),_e=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),we=be=>me(e({id:be,action:"load",payload:{options:{lstmOnly:D,corePath:R.corePath,logging:R.logging}}})),fe=(be,Me,rt)=>me(e({id:rt,action:"FS",payload:{method:"writeFile",args:[be,Me]}})),oe=(be,Me)=>me(e({id:Me,action:"FS",payload:{method:"readFile",args:[be,{encoding:"utf8"}]}})),Z=(be,Me)=>me(e({id:Me,action:"FS",payload:{method:"unlink",args:[be]}})),J=(be,Me,rt)=>me(e({id:rt,action:"FS",payload:{method:be,args:Me}})),H=(be,Me)=>me(e({id:Me,action:"loadLanguage",payload:{langs:be,options:{langPath:R.langPath,dataPath:R.dataPath,cachePath:R.cachePath,cacheMethod:R.cacheMethod,gzip:R.gzip,lstmOnly:[r.DEFAULT,r.LSTM_ONLY].includes(W)&&!R.legacyLang}}})),q=(be,Me,rt,Wt)=>me(e({id:Wt,action:"initialize",payload:{langs:be,oem:Me,config:rt}})),ie=(be="eng",Me,rt,Wt)=>{if(D&&[r.TESSERACT_ONLY,r.TESSERACT_LSTM_COMBINED].includes(Me))throw Error("Legacy model requested but code missing.");const Vt=Me||W;W=Vt;const ue=rt||N;N=ue;const Ct=(typeof be=="string"?be.split("+"):be).filter(ms=>!z.includes(ms));return z.push(...Ct),Ct.length>0?H(Ct,Wt).then(()=>q(be,Vt,ue,Wt)):q(be,Vt,ue,Wt)},ye=(be={},Me)=>me(e({id:Me,action:"setParameters",payload:{params:be}})),Ae=async(be,Me={},rt={text:!0},Wt)=>me(e({id:Wt,action:"recognize",payload:{image:await h(be),options:Me,output:rt}})),Ce=async(be,Me)=>{if(D)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return me(e({id:Me,action:"detect",payload:{image:await h(be)}}))},Se=async()=>(j!==null&&(u(j),j=null),Promise.resolve());d(j,({workerId:be,jobId:Me,status:rt,action:Wt,data:Vt})=>{const ue=`${Wt}-${Me}`;if(rt==="resolve")t(`[${be}]: Complete ${Me}`),V[ue].resolve({jobId:Me,data:Vt}),delete V[ue];else if(rt==="reject")if(V[ue].reject(Vt),delete V[ue],Wt==="load"&&L(Vt),O)O(Vt);else throw Error(Vt);else rt==="progress"&&I({...Vt,userJobId:Me})});const Be={id:S,worker:j,load:_e,writeText:fe,readText:oe,removeFile:Z,FS:J,reinitialize:ie,setParameters:ye,recognize:Ae,detect:Ce,terminate:Se};return we().then(()=>H(w)).then(()=>q(w,v,C)).then(()=>U(Be)).catch(()=>{}),$},pb}var fb,hD;function dQ(){if(hD)return fb;hD=1;const s=s4();return fb={recognize:async(n,r,i)=>{const a=await s(r,1,i);return a.recognize(n).finally(async()=>{await a.terminate()})},detect:async(n,r)=>{const i=await s("osd",0,r);return i.detect(n).finally(async()=>{await i.terminate()})}},fb}var mb,pD;function hQ(){return pD||(pD=1,mb={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),mb}var gb,fD;function pQ(){return fD||(fD=1,gb={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),gb}var yb,mD;function fQ(){if(mD)return yb;mD=1,Xq();const s=Yq(),e=s4(),t=dQ(),n=hQ(),r=r4(),i=pQ(),{setLogging:a}=YS();return yb={languages:n,OEM:r,PSM:i,createScheduler:s,createWorker:e,setLogging:a,...t},yb}var mQ=fQ();const gQ=AD(mQ);to.workerSrc="/studentmate-admin-panel/pdf.worker.min.mjs";const gD=async(s,e)=>{const t=await s.arrayBuffer(),r=await JL({data:t}).promise,i=[];for(let a=1;a<=r.numPages;a++){e&&e(`Processing Page ${a} of ${r.numPages}...`);const u=await r.getPage(a),d=u.getViewport({scale:2});let h=[],f="Text";try{const v=await u.getTextContent(),F=[],C=5;v.items.forEach(S=>{const I=S.transform[5],O=F.find(R=>Math.abs(R.y-I)<C);O?O.items.push(S):F.push({y:I,text:"",items:[S]})}),F.sort((S,I)=>I.y-S.y),F.forEach(S=>{S.items.sort((R,V)=>R.transform[4]-V.transform[4]);const O=S.items.map(R=>R.str).join(" ").trim().match(/(?:^|\s)(?:Question|Q|Answer|Solution)[\s.:-]*(\d+)/i);if(O){const R=S.y,V=d.height-R*d.scale;h.find(z=>z.number===parseInt(O[1]))||h.push({number:parseInt(O[1]),y:V})}})}catch(v){console.warn(`Text extraction failed for page ${a}, falling back to OCR`,v)}if(h.length===0){f="OCR",e&&e(`No text found on Page ${a}. Switching to OCR...`);const v=document.createElement("canvas"),F=v.getContext("2d");if(v.height=d.height,v.width=d.width,F){const C={canvasContext:F,viewport:d};await u.render(C).promise;try{(await gQ.recognize(v,"eng")).data.lines.forEach(O=>{const V=O.text.trim().match(/(?:^|\s)(?:Question|Q|Answer|Solution)[\s.:-]*(\d+)/i);if(V){const z=O.bbox.y0;h.find(W=>W.number===parseInt(V[1]))||h.push({number:parseInt(V[1]),y:z})}})}catch(S){console.error(`OCR failed for page ${a}:`,S)}}}if(h.sort((v,F)=>v.y-F.y),h.length===0)continue;let g=document.createElement("canvas");if(f==="Text"){const v=g.getContext("2d");if(g.height=d.height,g.width=d.width,v){const F={canvasContext:v,viewport:d};await u.render(F).promise}}else{const v=g.getContext("2d");if(g.height=d.height,g.width=d.width,v){const F={canvasContext:v,viewport:d};await u.render(F).promise}}if(g.getContext("2d"))for(let v=0;v<h.length;v++){const F=h[v],C=Math.max(0,F.y-50);let S=d.height;v<h.length-1&&(S=h[v+1].y-20);const I=S-C;if(I<=0)continue;const O=document.createElement("canvas");O.width=d.width,O.height=I;const R=O.getContext("2d");if(R){R.drawImage(g,0,C,d.width,I,0,0,d.width,I);const V=await new Promise(z=>O.toBlob(z,"image/jpeg",.85));V&&i.push({number:F.number,text:`(${f} Extracted from Page ${a})`,marks:0,imageBlob:V,page:a,coordinates:{yStart:C/2,yEnd:S/2}})}}}return i},yQ=({assessmentId:s,assessmentTitle:e,onClose:t})=>{const[n,r]=K.useState([]),[i,a]=K.useState(!1),[u,d]=K.useState(!1),[h,f]=K.useState(!1),[g,w]=K.useState(!1),[v,F]=K.useState(!1),[C,S]=K.useState(null),[I,O]=K.useState(""),[R,V]=K.useState(0),[z,W]=K.useState(1),[N,D]=K.useState(null),[L,U]=K.useState(null),[$,Q]=K.useState(""),[j,me]=K.useState(null),[_e,we]=K.useState([]),[fe,oe]=K.useState([]),[Z,J]=K.useState(!1),[H,q]=K.useState("");K.useEffect(()=>{ie()},[s]);const ie=async()=>{a(!0);try{const ue=await XH(s);r(ue),ue.length>0&&W(ue.length+1)}catch(ue){console.error("Error fetching questions:",ue)}finally{a(!1)}},ye=ue=>{ue?(S(ue.questionId),O(ue.title),V(ue.marks),W(ue.order),Q(ue.videoUrl||""),D(null),U(null)):(S(null),O(`Question ${n.length+1}`),V(0),W(n.length+1),Q(""),D(null),U(null)),d(!0)},Ae=async ue=>{if(ue.preventDefault(),!(!C&&!N)){F(!0);try{C?await gR(s,C,{title:I,marks:R,order:z,videoUrl:$||void 0},N,L):await yR(s,I,R,z,N,void 0,L,void 0,$),d(!1),ie()}catch(We){console.error("Error saving question:",We)}finally{F(!1)}}},Ce=async ue=>{if(ue.target.files&&ue.target.files[0]){me(ue.target.files[0]),J(!0),q("Initializing...");try{const We=await gD(ue.target.files[0],Ct=>q(Ct));We.length===0&&alert('No questions detected in the PDF. Please ensure the file uses standard headings like "Question 1" or "Q1".'),we(We)}catch(We){console.error("Error parsing PDF:",We),alert("Failed to parse PDF. Please ensure it is a valid PDF.")}finally{J(!1),q("")}}},Se=async ue=>{if(ue.target.files&&ue.target.files[0]){me(ue.target.files[0]),J(!0),q("Initializing...");try{const We=await gD(ue.target.files[0],Ct=>q(Ct));We.length===0&&alert('No answers detected in the Memo PDF. Please ensure the file uses "Question 1" or "Answer 1" headings.'),oe(We)}catch(We){console.error("Error parsing Memo PDF:",We),alert("Failed to parse Memo PDF.")}finally{J(!1),q("")}}},Be=async()=>{if(fe.length!==0){F(!0);try{for(const ue of fe){const We=n.find(Ct=>Ct.title.toLowerCase().includes(`question ${ue.number}`)||Ct.title.toLowerCase()===`q${ue.number}`||Ct.order===ue.number);if(We&&ue.imageBlob){const Ct=new File([ue.imageBlob],`answer_${ue.number}.jpg`,{type:"image/jpeg"});await gR(s,We.questionId,{},null,Ct)}}w(!1),oe([]),me(null),ie(),alert("Memo answers uploaded and matched to questions!")}catch(ue){console.error("Error saving bulk memo:",ue),alert("Error saving memo. See console for details.")}finally{F(!1)}}},be=async()=>{if(_e.length!==0){F(!0);try{let ue=n.length>0?n.length+1:1;for(const We of _e){let Ct;We.imageBlob&&(Ct=new File([We.imageBlob],`question_${We.number}.jpg`,{type:"image/jpeg"})),await yR(s,`Question ${We.number}`,We.marks,ue++,Ct,We.text,void 0,void 0,void 0,We.page,We.coordinates)}f(!1),we([]),me(null),ie()}catch(ue){console.error("Error saving bulk questions:",ue),alert("Error saving questions. See console for details.")}finally{F(!1)}}},Me=ue=>{const We=[..._e];We.splice(ue,1),we(We)},rt=ue=>{const We=[...fe];We.splice(ue,1),oe(We)},Wt=(ue,We,Ct)=>{const ms=[..._e];ms[ue]={...ms[ue],[We]:Ct},we(ms)},Vt=async ue=>{if(window.confirm("Are you sure you want to delete this question?"))try{await YH(s,ue),ie()}catch(We){console.error("Error deleting question:",We)}};return _.jsxs("div",{"trae-inspector-start-line":"276","trae-inspector-start-column":"4","trae-inspector-end-line":"730","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[_.jsxs("div",{"trae-inspector-start-line":"277","trae-inspector-start-column":"6","trae-inspector-end-line":"414","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[_.jsx("div",{"trae-inspector-start-line":"278","trae-inspector-start-column":"8","trae-inspector-end-line":"278","trae-inspector-end-column":"127","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t}),_.jsx("span",{"trae-inspector-start-line":"280","trae-inspector-start-column":"8","trae-inspector-end-line":"280","trae-inspector-end-column":"110","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%22280%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%22280%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),_.jsx("div",{"trae-inspector-start-line":"282","trae-inspector-start-column":"8","trae-inspector-end-line":"413","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",children:_.jsxs("div",{"trae-inspector-start-line":"283","trae-inspector-start-column":"10","trae-inspector-end-line":"412","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[_.jsxs("div",{"trae-inspector-start-line":"284","trae-inspector-start-column":"12","trae-inspector-end-line":"322","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[_.jsxs("div",{"trae-inspector-start-line":"285","trae-inspector-start-column":"14","trae-inspector-end-line":"292","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsxs("h3",{"trae-inspector-start-line":"286","trae-inspector-start-column":"16","trae-inspector-end-line":"288","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["Manage Questions: ",e]}),_.jsx("p",{"trae-inspector-start-line":"289","trae-inspector-start-column":"16","trae-inspector-end-line":"291","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20questions%20via%20image%20upload%20or%20auto-parse%20from%20PDF.%22%2C%22textStartLine%22%3A%22289%22%2C%22textStartColumn%22%3A%2258%22%2C%22textEndLine%22%3A%22291%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 text-sm text-gray-500",children:"Add questions via image upload or auto-parse from PDF."})]}),_.jsxs("div",{"trae-inspector-start-line":"293","trae-inspector-start-column":"14","trae-inspector-end-line":"321","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-3",children:[_.jsxs("button",{"trae-inspector-start-line":"294","trae-inspector-start-column":"16","trae-inspector-end-line":"300","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>w(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[_.jsx(Hm,{className:"h-5 w-5"}),_.jsx("span",{"trae-inspector-start-line":"299","trae-inspector-start-column":"18","trae-inspector-end-line":"299","trae-inspector-end-column":"47","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20Memo%22%2C%22textStartLine%22%3A%22299%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22299%22%2C%22textEndColumn%22%3A%2240%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Bulk Upload Memo"})]}),_.jsxs("button",{"trae-inspector-start-line":"301","trae-inspector-start-column":"16","trae-inspector-end-line":"307","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>f(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[_.jsx(Hm,{className:"h-5 w-5"}),_.jsx("span",{"trae-inspector-start-line":"306","trae-inspector-start-column":"18","trae-inspector-end-line":"306","trae-inspector-end-column":"46","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20PDF%22%2C%22textStartLine%22%3A%22306%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22306%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Bulk Upload PDF"})]}),_.jsxs("button",{"trae-inspector-start-line":"308","trae-inspector-start-column":"16","trae-inspector-end-line":"314","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>ye(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[_.jsx(c0,{className:"h-5 w-5"}),_.jsx("span",{"trae-inspector-start-line":"313","trae-inspector-start-column":"18","trae-inspector-end-line":"313","trae-inspector-end-column":"41","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20Manual%22%2C%22textStartLine%22%3A%22313%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22313%22%2C%22textEndColumn%22%3A%2234%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add Manual"})]}),_.jsx("button",{"trae-inspector-start-line":"315","trae-inspector-start-column":"16","trae-inspector-end-line":"320","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Close%22%2C%22textStartLine%22%3A%22318%22%2C%22textStartColumn%22%3A%2217%22%2C%22textEndLine%22%3A%22320%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:t,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg",children:"Close"})]})]}),_.jsx("div",{"trae-inspector-start-line":"324","trae-inspector-start-column":"12","trae-inspector-end-line":"411","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 rounded-lg min-h-[400px] p-4 max-h-[70vh] overflow-y-auto",children:i?_.jsx("div",{"trae-inspector-start-line":"326","trae-inspector-start-column":"16","trae-inspector-end-line":"326","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading%20questions...%22%2C%22textStartLine%22%3A%22326%22%2C%22textStartColumn%22%3A%2251%22%2C%22textEndLine%22%3A%22326%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-10",children:"Loading questions..."}):n.length===0?_.jsx("div",{"trae-inspector-start-line":"328","trae-inspector-start-column":"16","trae-inspector-end-line":"330","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20questions%20added%20yet.%20Click%20%5C%22Add%20Manual%5C%22%20or%20%5C%22Bulk%20Upload%20PDF%5C%22%20to%20start.%22%2C%22textStartLine%22%3A%22328%22%2C%22textStartColumn%22%3A%2265%22%2C%22textEndLine%22%3A%22330%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-10 text-gray-500",children:'No questions added yet. Click "Add Manual" or "Bulk Upload PDF" to start.'}):_.jsx("div",{"trae-inspector-start-line":"332","trae-inspector-start-column":"16","trae-inspector-end-line":"409","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:n.map(ue=>_.jsxs("div",{"trae-inspector-start-line":"334","trae-inspector-start-column":"20","trae-inspector-end-line":"407","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[_.jsxs("div",{"trae-inspector-start-line":"336","trae-inspector-start-column":"22","trae-inspector-end-line":"360","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center p-4 border-b border-gray-100 bg-gray-50",children:[_.jsxs("div",{"trae-inspector-start-line":"337","trae-inspector-start-column":"24","trae-inspector-end-line":"340","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-3",children:[_.jsx("div",{"trae-inspector-start-line":"338","trae-inspector-start-column":"26","trae-inspector-end-line":"338","trae-inspector-end-column":"82","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-1 h-6 bg-blue-600 rounded-full"}),_.jsx("h4",{"trae-inspector-start-line":"339","trae-inspector-start-column":"26","trae-inspector-end-line":"339","trae-inspector-end-column":"80","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-bold text-blue-900",children:ue.title})]}),_.jsxs("div",{"trae-inspector-start-line":"341","trae-inspector-start-column":"24","trae-inspector-end-line":"359","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4",children:[_.jsxs("span",{"trae-inspector-start-line":"342","trae-inspector-start-column":"26","trae-inspector-end-line":"344","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-xs font-bold",children:[ue.marks," Marks"]}),_.jsx("button",{"trae-inspector-start-line":"345","trae-inspector-start-column":"26","trae-inspector-end-line":"351","trae-inspector-end-column":"35","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>ye(ue),className:"text-blue-500 hover:text-blue-700",title:"Edit Question",children:_.jsx(RF,{className:"h-5 w-5"})}),_.jsx("button",{"trae-inspector-start-line":"352","trae-inspector-start-column":"26","trae-inspector-end-line":"358","trae-inspector-end-column":"35","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>Vt(ue),className:"text-red-500 hover:text-red-700",title:"Delete Question",children:_.jsx(u0,{className:"h-5 w-5"})})]})]}),_.jsxs("div",{"trae-inspector-start-line":"363","trae-inspector-start-column":"22","trae-inspector-end-line":"406","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4",children:[_.jsxs("div",{"trae-inspector-start-line":"364","trae-inspector-start-column":"24","trae-inspector-end-line":"375","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mb-4",children:[_.jsx("p",{"trae-inspector-start-line":"365","trae-inspector-start-column":"26","trae-inspector-end-line":"365","trae-inspector-end-column":"112","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20Content%22%2C%22textStartLine%22%3A%22365%22%2C%22textStartColumn%22%3A%2292%22%2C%22textEndLine%22%3A%22365%22%2C%22textEndColumn%22%3A%22108%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Question Content"}),_.jsx("div",{"trae-inspector-start-line":"366","trae-inspector-start-column":"26","trae-inspector-end-line":"374","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border border-gray-100 rounded bg-gray-50 p-2",children:ue.contentUrl?_.jsx("img",{"trae-inspector-start-line":"368","trae-inspector-start-column":"30","trae-inspector-end-line":"368","trae-inspector-end-column":"124","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:ue.contentUrl,alt:ue.title,className:"max-w-full h-auto max-h-64 object-contain"}):ue.content?_.jsx("div",{"trae-inspector-start-line":"370","trae-inspector-start-column":"30","trae-inspector-end-line":"370","trae-inspector-end-column":"109","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"whitespace-pre-wrap text-gray-800 font-serif",children:ue.content}):_.jsx("span",{"trae-inspector-start-line":"372","trae-inspector-start-column":"30","trae-inspector-end-line":"372","trae-inspector-end-column":"96","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20content%20available%22%2C%22textStartLine%22%3A%22372%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22372%22%2C%22textEndColumn%22%3A%2289%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-400 italic",children:"No content available"})})]}),_.jsxs("div",{"trae-inspector-start-line":"377","trae-inspector-start-column":"24","trae-inspector-end-line":"405","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{"trae-inspector-start-line":"378","trae-inspector-start-column":"26","trae-inspector-end-line":"391","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("p",{"trae-inspector-start-line":"379","trae-inspector-start-column":"28","trae-inspector-end-line":"379","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%22%2C%22textStartLine%22%3A%22379%22%2C%22textStartColumn%22%3A%2294%22%2C%22textEndLine%22%3A%22379%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Answer"}),ue.answerUrl?_.jsxs("div",{"trae-inspector-start-line":"381","trae-inspector-start-column":"30","trae-inspector-end-line":"385","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2 text-green-600",children:[_.jsx(f6,{className:"h-4 w-4"}),_.jsx("span",{"trae-inspector-start-line":"383","trae-inspector-start-column":"32","trae-inspector-end-line":"383","trae-inspector-end-column":"86","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%20Image%20Uploaded%22%2C%22textStartLine%22%3A%22383%22%2C%22textStartColumn%22%3A%2258%22%2C%22textEndLine%22%3A%22383%22%2C%22textEndColumn%22%3A%2279%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm",children:"Answer Image Uploaded"}),_.jsx("a",{"trae-inspector-start-line":"384","trae-inspector-start-column":"32","trae-inspector-end-line":"384","trae-inspector-end-column":"147","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22(View)%22%2C%22textStartLine%22%3A%22384%22%2C%22textStartColumn%22%3A%22137%22%2C%22textEndLine%22%3A%22384%22%2C%22textEndColumn%22%3A%22143%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:ue.answerUrl,target:"_blank",rel:"noreferrer",className:"text-blue-500 text-xs hover:underline",children:"(View)"})]}):ue.answerText?_.jsx("div",{"trae-inspector-start-line":"387","trae-inspector-start-column":"32","trae-inspector-end-line":"387","trae-inspector-end-column":"91","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-700",children:ue.answerText}):_.jsx("span",{"trae-inspector-start-line":"389","trae-inspector-start-column":"30","trae-inspector-end-line":"389","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20answer%20provided%22%2C%22textStartLine%22%3A%22389%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22389%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-400",children:"No answer provided"})]}),_.jsxs("div",{"trae-inspector-start-line":"392","trae-inspector-start-column":"26","trae-inspector-end-line":"404","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("p",{"trae-inspector-start-line":"393","trae-inspector-start-column":"28","trae-inspector-end-line":"393","trae-inspector-end-column":"112","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Video%20Solution%22%2C%22textStartLine%22%3A%22393%22%2C%22textStartColumn%22%3A%2294%22%2C%22textEndLine%22%3A%22393%22%2C%22textEndColumn%22%3A%22108%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Video Solution"}),ue.videoUrl?_.jsxs("div",{"trae-inspector-start-line":"395","trae-inspector-start-column":"30","trae-inspector-end-line":"400","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2 text-blue-600",children:[_.jsx(X6,{className:"h-4 w-4"}),_.jsx("a",{"trae-inspector-start-line":"397","trae-inspector-start-column":"32","trae-inspector-end-line":"399","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:ue.videoUrl,target:"_blank",rel:"noreferrer",className:"text-sm hover:underline truncate block max-w-[200px]",children:ue.videoUrl})]}):_.jsx("span",{"trae-inspector-start-line":"402","trae-inspector-start-column":"30","trae-inspector-end-line":"402","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20video%20link%22%2C%22textStartLine%22%3A%22402%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22402%22%2C%22textEndColumn%22%3A%2283%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-400",children:"No video link"})]})]})]})]},ue.questionId))})})]})})]}),g&&_.jsx("div",{"trae-inspector-start-line":"418","trae-inspector-start-column":"8","trae-inspector-end-line":"517","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-[60] overflow-y-auto",children:_.jsxs("div",{"trae-inspector-start-line":"419","trae-inspector-start-column":"10","trae-inspector-end-line":"516","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[_.jsx("div",{"trae-inspector-start-line":"420","trae-inspector-start-column":"12","trae-inspector-end-line":"422","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:_.jsx("div",{"trae-inspector-start-line":"421","trae-inspector-start-column":"14","trae-inspector-end-line":"421","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-0 bg-gray-500 opacity-75"})}),_.jsx("span",{"trae-inspector-start-line":"423","trae-inspector-start-column":"12","trae-inspector-end-line":"423","trae-inspector-end-column":"114","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%22423%22%2C%22textStartColumn%22%3A%22100%22%2C%22textEndLine%22%3A%22423%22%2C%22textEndColumn%22%3A%22107%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),_.jsx("div",{"trae-inspector-start-line":"424","trae-inspector-start-column":"12","trae-inspector-end-line":"515","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:_.jsxs("div",{"trae-inspector-start-line":"425","trae-inspector-start-column":"14","trae-inspector-end-line":"514","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[_.jsxs("div",{"trae-inspector-start-line":"426","trae-inspector-start-column":"16","trae-inspector-end-line":"431","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[_.jsx("h3",{"trae-inspector-start-line":"427","trae-inspector-start-column":"18","trae-inspector-end-line":"427","trae-inspector-end-column":"99","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20Memo%20(Answers)%22%2C%22textStartLine%22%3A%22427%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22427%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-medium text-gray-900",children:"Bulk Upload Memo (Answers)"}),_.jsx("button",{"trae-inspector-start-line":"428","trae-inspector-start-column":"18","trae-inspector-end-line":"430","trae-inspector-end-column":"27","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-500",children:_.jsx(fg,{className:"h-6 w-6"})})]}),_.jsxs("div",{"trae-inspector-start-line":"433","trae-inspector-start-column":"16","trae-inspector-end-line":"513","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[_.jsx("p",{"trae-inspector-start-line":"434","trae-inspector-start-column":"18","trae-inspector-end-line":"436","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20a%20PDF%20containing%20the%20memorandum.%20The%20system%20will%20try%20to%20match%20%5C%22Question%201%5C%22%20in%20the%20memo%20to%20%5C%22Question%201%5C%22%20in%20your%20list.%22%2C%22textStartLine%22%3A%22434%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%22436%22%2C%22textEndColumn%22%3A%2218%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-600",children:'Upload a PDF containing the memorandum. The system will try to match "Question 1" in the memo to "Question 1" in your list.'}),_.jsxs("div",{"trae-inspector-start-line":"439","trae-inspector-start-column":"18","trae-inspector-end-line":"454","trae-inspector-end-column":"24","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50 transition-colors",children:[_.jsx("input",{"trae-inspector-start-line":"440","trae-inspector-start-column":"20","trae-inspector-end-line":"446","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:".pdf",onChange:Se,className:"hidden",id:"bulk-memo-upload"}),_.jsxs("label",{"trae-inspector-start-line":"447","trae-inspector-start-column":"20","trae-inspector-end-line":"453","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"bulk-memo-upload",className:"cursor-pointer block",children:[_.jsx(PI,{className:"mx-auto h-12 w-12 text-purple-400"}),_.jsx("p",{"trae-inspector-start-line":"449","trae-inspector-start-column":"22","trae-inspector-end-line":"451","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 text-sm text-gray-600",children:j?j.name:"Click to upload Memo PDF"}),_.jsx("p",{"trae-inspector-start-line":"452","trae-inspector-start-column":"22","trae-inspector-end-line":"452","trae-inspector-end-column":"98","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PDFs%20with%20selectable%20text%20only%22%2C%22textStartLine%22%3A%22452%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22452%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mt-1",children:"PDFs with selectable text only"})]})]}),Z&&_.jsxs("div",{"trae-inspector-start-line":"457","trae-inspector-start-column":"20","trae-inspector-end-line":"460","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-4 text-purple-600 font-medium",children:[_.jsx("div",{"trae-inspector-start-line":"458","trae-inspector-start-column":"22","trae-inspector-end-line":"458","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"animate-pulse",children:H||"Parsing Memo..."}),_.jsx("p",{"trae-inspector-start-line":"459","trae-inspector-start-column":"22","trae-inspector-end-line":"459","trae-inspector-end-column":"109","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22OCR%20is%20running%2C%20this%20may%20take%20a%20minute...%22%2C%22textStartLine%22%3A%22459%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22459%22%2C%22textEndColumn%22%3A%22105%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mt-1",children:"OCR is running, this may take a minute..."})]}),fe.length>0&&_.jsxs("div",{"trae-inspector-start-line":"465","trae-inspector-start-column":"20","trae-inspector-end-line":"511","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-6",children:[_.jsxs("div",{"trae-inspector-start-line":"466","trae-inspector-start-column":"22","trae-inspector-end-line":"476","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-4",children:[_.jsxs("h4",{"trae-inspector-start-line":"467","trae-inspector-start-column":"24","trae-inspector-end-line":"467","trae-inspector-end-column":"116","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium text-gray-900",children:["Extracted Answers (",fe.length,")"]}),_.jsxs("button",{"trae-inspector-start-line":"468","trae-inspector-start-column":"24","trae-inspector-end-line":"475","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:Be,disabled:v,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm",children:[_.jsx(II,{className:"h-4 w-4"}),_.jsx("span",{"trae-inspector-start-line":"474","trae-inspector-start-column":"26","trae-inspector-end-line":"474","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:v?"Matching & Saving...":"Match & Save Answers"})]})]}),_.jsx("div",{"trae-inspector-start-line":"478","trae-inspector-start-column":"22","trae-inspector-end-line":"510","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2",children:fe.map((ue,We)=>_.jsxs("div",{"trae-inspector-start-line":"480","trae-inspector-start-column":"26","trae-inspector-end-line":"508","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[_.jsxs("div",{"trae-inspector-start-line":"481","trae-inspector-start-column":"28","trae-inspector-end-line":"494","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-start mb-2",children:[_.jsxs("div",{"trae-inspector-start-line":"482","trae-inspector-start-column":"30","trae-inspector-end-line":"487","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[_.jsxs("span",{"trae-inspector-start-line":"483","trae-inspector-start-column":"32","trae-inspector-end-line":"485","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-purple-100 text-purple-800 text-xs font-bold px-2 py-1 rounded",children:["#",ue.number]}),_.jsx("span",{"trae-inspector-start-line":"486","trae-inspector-start-column":"32","trae-inspector-end-line":"486","trae-inspector-end-column":"102","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Detected%20Answer%20Section%22%2C%22textStartLine%22%3A%22486%22%2C%22textStartColumn%22%3A%2272%22%2C%22textEndLine%22%3A%22486%22%2C%22textEndColumn%22%3A%2295%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"Detected Answer Section"})]}),_.jsx("button",{"trae-inspector-start-line":"488","trae-inspector-start-column":"30","trae-inspector-end-line":"493","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>rt(We),className:"text-red-500 hover:text-red-700",children:_.jsx(fg,{className:"h-4 w-4"})})]}),ue.imageBlob?_.jsx("div",{"trae-inspector-start-line":"498","trae-inspector-start-column":"30","trae-inspector-end-line":"504","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border border-purple-200 rounded p-2 bg-white flex justify-center",children:_.jsx("img",{"trae-inspector-start-line":"499","trae-inspector-start-column":"32","trae-inspector-end-line":"503","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:URL.createObjectURL(ue.imageBlob),alt:`Answer ${ue.number}`,className:"max-w-full max-h-64 object-contain"})}):_.jsx("div",{"trae-inspector-start-line":"506","trae-inspector-start-column":"31","trae-inspector-end-line":"506","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20image%20extracted%22%2C%22textStartLine%22%3A%22506%22%2C%22textStartColumn%22%3A%2277%22%2C%22textEndLine%22%3A%22506%22%2C%22textEndColumn%22%3A%2295%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500 italic",children:"No image extracted"})]},We))})]})]})]})})]})}),_.jsx(F0,{isOpen:u,onClose:()=>d(!1),title:C?"Edit Question":"Add New Question (Manual)",children:_.jsxs("form",{"trae-inspector-start-line":"526","trae-inspector-start-column":"8","trae-inspector-end-line":"617","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:Ae,className:"space-y-4",children:[_.jsxs("div",{"trae-inspector-start-line":"527","trae-inspector-start-column":"10","trae-inspector-end-line":"550","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{"trae-inspector-start-line":"528","trae-inspector-start-column":"12","trae-inspector-end-line":"538","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"529","trae-inspector-start-column":"14","trae-inspector-end-line":"529","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20Title%22%2C%22textStartLine%22%3A%22529%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%22529%22%2C%22textEndColumn%22%3A%2287%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Question Title"}),_.jsx("input",{"trae-inspector-start-line":"530","trae-inspector-start-column":"14","trae-inspector-end-line":"537","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:I,onChange:ue=>O(ue.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Question 1"})]}),_.jsxs("div",{"trae-inspector-start-line":"539","trae-inspector-start-column":"12","trae-inspector-end-line":"549","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"540","trae-inspector-start-column":"14","trae-inspector-end-line":"540","trae-inspector-end-column":"86","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Marks%22%2C%22textStartLine%22%3A%22540%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%22540%22%2C%22textEndColumn%22%3A%2278%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Marks"}),_.jsx("input",{"trae-inspector-start-line":"541","trae-inspector-start-column":"14","trae-inspector-end-line":"548","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,min:"0",value:R,onChange:ue=>V(parseInt(ue.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),_.jsxs("div",{"trae-inspector-start-line":"552","trae-inspector-start-column":"10","trae-inspector-end-line":"562","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"553","trae-inspector-start-column":"12","trae-inspector-end-line":"553","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Order%22%2C%22textStartLine%22%3A%22553%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22553%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Order"}),_.jsx("input",{"trae-inspector-start-line":"554","trae-inspector-start-column":"12","trae-inspector-end-line":"561","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,min:"1",value:z,onChange:ue=>W(parseInt(ue.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),_.jsxs("div",{"trae-inspector-start-line":"564","trae-inspector-start-column":"10","trae-inspector-end-line":"580","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsxs("label",{"trae-inspector-start-line":"565","trae-inspector-start-column":"12","trae-inspector-end-line":"565","trae-inspector-end-column":"174","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:["Question Image ",C?"(Optional - Leave empty to keep existing)":"(Required)"]}),_.jsx("div",{"trae-inspector-start-line":"566","trae-inspector-start-column":"12","trae-inspector-end-line":"579","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:_.jsxs("div",{"trae-inspector-start-line":"567","trae-inspector-start-column":"14","trae-inspector-end-line":"578","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-1 text-center",children:[_.jsx(k6,{className:"mx-auto h-12 w-12 text-gray-400"}),_.jsxs("div",{"trae-inspector-start-line":"569","trae-inspector-start-column":"16","trae-inspector-end-line":"575","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex text-sm text-gray-600",children:[_.jsxs("label",{"trae-inspector-start-line":"570","trae-inspector-start-column":"18","trae-inspector-end-line":"573","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"content-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[_.jsx("span",{"trae-inspector-start-line":"571","trae-inspector-start-column":"20","trae-inspector-end-line":"571","trae-inspector-end-column":"46","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20a%20file%22%2C%22textStartLine%22%3A%22571%22%2C%22textStartColumn%22%3A%2226%22%2C%22textEndLine%22%3A%22571%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Upload a file"}),_.jsx("input",{"trae-inspector-start-line":"572","trae-inspector-start-column":"20","trae-inspector-end-line":"572","trae-inspector-end-column":"226","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"content-upload",name:"content-upload",type:"file",className:"sr-only",accept:"image/*",onChange:ue=>D(ue.target.files?ue.target.files[0]:null),required:!C})]}),_.jsx("p",{"trae-inspector-start-line":"574","trae-inspector-start-column":"18","trae-inspector-end-line":"574","trae-inspector-end-column":"58","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22or%20drag%20and%20drop%22%2C%22textStartLine%22%3A%22574%22%2C%22textStartColumn%22%3A%2238%22%2C%22textEndLine%22%3A%22574%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"pl-1",children:"or drag and drop"})]}),_.jsx("p",{"trae-inspector-start-line":"576","trae-inspector-start-column":"16","trae-inspector-end-line":"576","trae-inspector-end-column":"75","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PNG%2C%20JPG%20up%20to%205MB%22%2C%22textStartLine%22%3A%22576%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22576%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"PNG, JPG up to 5MB"}),N&&_.jsx("p",{"trae-inspector-start-line":"577","trae-inspector-start-column":"32","trae-inspector-end-line":"577","trae-inspector-end-column":"106","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-green-600 font-semibold",children:N.name})]})})]}),_.jsxs("div",{"trae-inspector-start-line":"582","trae-inspector-start-column":"10","trae-inspector-end-line":"590","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"583","trae-inspector-start-column":"12","trae-inspector-end-line":"583","trae-inspector-end-column":"102","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%20Image%20(Optional)%22%2C%22textStartLine%22%3A%22583%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22583%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Answer Image (Optional)"}),_.jsx("input",{"trae-inspector-start-line":"584","trae-inspector-start-column":"12","trae-inspector-end-line":"589","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:"image/*",onChange:ue=>U(ue.target.files?ue.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),_.jsxs("div",{"trae-inspector-start-line":"592","trae-inspector-start-column":"10","trae-inspector-end-line":"606","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"593","trae-inspector-start-column":"12","trae-inspector-end-line":"593","trae-inspector-end-column":"108","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Video%20Solution%20URL%20(Optional)%22%2C%22textStartLine%22%3A%22593%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22593%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Video Solution URL (Optional)"}),_.jsxs("div",{"trae-inspector-start-line":"594","trae-inspector-start-column":"12","trae-inspector-end-line":"605","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 flex rounded-md shadow-sm",children:[_.jsx("span",{"trae-inspector-start-line":"595","trae-inspector-start-column":"14","trae-inspector-end-line":"597","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22https%3A%2F%2F%22%2C%22textStartLine%22%3A%22595%22%2C%22textStartColumn%22%3A%22142%22%2C%22textEndLine%22%3A%22597%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"https://"}),_.jsx("input",{"trae-inspector-start-line":"598","trae-inspector-start-column":"14","trae-inspector-end-line":"604","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"url",value:$,onChange:ue=>Q(ue.target.value),className:"focus:ring-blue-500 focus:border-blue-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300 py-2 px-3 border",placeholder:"youtube.com/watch?v=..."})]})]}),_.jsx("div",{"trae-inspector-start-line":"608","trae-inspector-start-column":"10","trae-inspector-end-line":"616","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:_.jsx("button",{"trae-inspector-start-line":"609","trae-inspector-start-column":"12","trae-inspector-end-line":"615","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:v,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${v?"opacity-75 cursor-not-allowed":""}`,children:v?"Saving Question...":"Save Question"})})]})}),h&&_.jsx("div",{"trae-inspector-start-line":"622","trae-inspector-start-column":"8","trae-inspector-end-line":"728","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-[60] overflow-y-auto",children:_.jsxs("div",{"trae-inspector-start-line":"623","trae-inspector-start-column":"10","trae-inspector-end-line":"727","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[_.jsx("div",{"trae-inspector-start-line":"624","trae-inspector-start-column":"12","trae-inspector-end-line":"626","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:_.jsx("div",{"trae-inspector-start-line":"625","trae-inspector-start-column":"14","trae-inspector-end-line":"625","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-0 bg-gray-500 opacity-75"})}),_.jsx("span",{"trae-inspector-start-line":"627","trae-inspector-start-column":"12","trae-inspector-end-line":"627","trae-inspector-end-column":"114","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%22627%22%2C%22textStartColumn%22%3A%22100%22%2C%22textEndLine%22%3A%22627%22%2C%22textEndColumn%22%3A%22107%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),_.jsx("div",{"trae-inspector-start-line":"628","trae-inspector-start-column":"12","trae-inspector-end-line":"726","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:_.jsxs("div",{"trae-inspector-start-line":"629","trae-inspector-start-column":"14","trae-inspector-end-line":"725","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[_.jsxs("div",{"trae-inspector-start-line":"630","trae-inspector-start-column":"16","trae-inspector-end-line":"635","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[_.jsx("h3",{"trae-inspector-start-line":"631","trae-inspector-start-column":"18","trae-inspector-end-line":"631","trae-inspector-end-column":"93","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20from%20PDF%22%2C%22textStartLine%22%3A%22631%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22631%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-medium text-gray-900",children:"Bulk Upload from PDF"}),_.jsx("button",{"trae-inspector-start-line":"632","trae-inspector-start-column":"18","trae-inspector-end-line":"634","trae-inspector-end-column":"27","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-500",children:_.jsx(fg,{className:"h-6 w-6"})})]}),_.jsxs("div",{"trae-inspector-start-line":"637","trae-inspector-start-column":"16","trae-inspector-end-line":"724","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[_.jsxs("div",{"trae-inspector-start-line":"639","trae-inspector-start-column":"18","trae-inspector-end-line":"654","trae-inspector-end-column":"24","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50 transition-colors",children:[_.jsx("input",{"trae-inspector-start-line":"640","trae-inspector-start-column":"20","trae-inspector-end-line":"646","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:".pdf",onChange:Ce,className:"hidden",id:"bulk-upload"}),_.jsxs("label",{"trae-inspector-start-line":"647","trae-inspector-start-column":"20","trae-inspector-end-line":"653","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"bulk-upload",className:"cursor-pointer block",children:[_.jsx(PI,{className:"mx-auto h-12 w-12 text-gray-400"}),_.jsx("p",{"trae-inspector-start-line":"649","trae-inspector-start-column":"22","trae-inspector-end-line":"651","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 text-sm text-gray-600",children:j?j.name:"Click to upload Exam PDF"}),_.jsx("p",{"trae-inspector-start-line":"652","trae-inspector-start-column":"22","trae-inspector-end-line":"652","trae-inspector-end-column":"98","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PDFs%20with%20selectable%20text%20only%22%2C%22textStartLine%22%3A%22652%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22652%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mt-1",children:"PDFs with selectable text only"})]})]}),Z&&_.jsxs("div",{"trae-inspector-start-line":"657","trae-inspector-start-column":"20","trae-inspector-end-line":"660","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-4 text-green-600 font-medium",children:[_.jsx("div",{"trae-inspector-start-line":"658","trae-inspector-start-column":"22","trae-inspector-end-line":"658","trae-inspector-end-column":"94","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"animate-pulse",children:H||"Parsing PDF..."}),_.jsx("p",{"trae-inspector-start-line":"659","trae-inspector-start-column":"22","trae-inspector-end-line":"659","trae-inspector-end-column":"109","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22OCR%20is%20running%2C%20this%20may%20take%20a%20minute...%22%2C%22textStartLine%22%3A%22659%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22659%22%2C%22textEndColumn%22%3A%22105%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mt-1",children:"OCR is running, this may take a minute..."})]}),_e.length>0&&_.jsxs("div",{"trae-inspector-start-line":"665","trae-inspector-start-column":"20","trae-inspector-end-line":"722","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-6",children:[_.jsxs("div",{"trae-inspector-start-line":"666","trae-inspector-start-column":"22","trae-inspector-end-line":"676","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-4",children:[_.jsxs("h4",{"trae-inspector-start-line":"667","trae-inspector-start-column":"24","trae-inspector-end-line":"667","trae-inspector-end-column":"120","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium text-gray-900",children:["Extracted Questions (",_e.length,")"]}),_.jsxs("button",{"trae-inspector-start-line":"668","trae-inspector-start-column":"24","trae-inspector-end-line":"675","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:be,disabled:v,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm",children:[_.jsx(II,{className:"h-4 w-4"}),_.jsx("span",{"trae-inspector-start-line":"674","trae-inspector-start-column":"26","trae-inspector-end-line":"674","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:v?"Saving...":"Save All to Database"})]})]}),_.jsx("div",{"trae-inspector-start-line":"678","trae-inspector-start-column":"22","trae-inspector-end-line":"721","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2",children:_e.map((ue,We)=>_.jsxs("div",{"trae-inspector-start-line":"680","trae-inspector-start-column":"26","trae-inspector-end-line":"719","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[_.jsxs("div",{"trae-inspector-start-line":"681","trae-inspector-start-column":"28","trae-inspector-end-line":"701","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-start mb-2",children:[_.jsxs("div",{"trae-inspector-start-line":"682","trae-inspector-start-column":"30","trae-inspector-end-line":"694","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[_.jsxs("span",{"trae-inspector-start-line":"683","trae-inspector-start-column":"32","trae-inspector-end-line":"685","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded",children:["#",ue.number]}),_.jsx("input",{"trae-inspector-start-line":"686","trae-inspector-start-column":"32","trae-inspector-end-line":"692","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",value:ue.marks,onChange:Ct=>Wt(We,"marks",parseInt(Ct.target.value)),className:"w-20 text-xs border-gray-300 rounded p-1",placeholder:"Marks"}),_.jsx("span",{"trae-inspector-start-line":"693","trae-inspector-start-column":"32","trae-inspector-end-line":"693","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22marks%22%2C%22textStartLine%22%3A%22693%22%2C%22textStartColumn%22%3A%2272%22%2C%22textEndLine%22%3A%22693%22%2C%22textEndColumn%22%3A%2277%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"marks"})]}),_.jsx("button",{"trae-inspector-start-line":"695","trae-inspector-start-column":"30","trae-inspector-end-line":"700","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>Me(We),className:"text-red-500 hover:text-red-700",children:_.jsx(fg,{className:"h-4 w-4"})})]}),ue.imageBlob?_.jsx("div",{"trae-inspector-start-line":"705","trae-inspector-start-column":"30","trae-inspector-end-line":"711","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border border-gray-300 rounded p-2 bg-white flex justify-center",children:_.jsx("img",{"trae-inspector-start-line":"706","trae-inspector-start-column":"32","trae-inspector-end-line":"710","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:URL.createObjectURL(ue.imageBlob),alt:`Question ${ue.number}`,className:"max-w-full max-h-64 object-contain"})}):_.jsx("textarea",{"trae-inspector-start-line":"713","trae-inspector-start-column":"31","trae-inspector-end-line":"717","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:ue.text,onChange:Ct=>Wt(We,"text",Ct.target.value),className:"w-full text-sm border-gray-300 rounded p-2 h-24 font-serif"})]},We))})]})]})]})})]})})]})},JS=({type:s,title:e})=>{const{user:t}=C0(),[n,r]=K.useState([]),[i,a]=K.useState(""),[u,d]=K.useState([]),[h,f]=K.useState(""),[g,w]=K.useState(""),[v,F]=K.useState([]),[C,S]=K.useState(!1);K.useEffect(()=>{h&&S(!1)},[h]),K.useEffect(()=>{!g&&!h?S(!1):g&&!h&&S(!0)},[g,h]);const[I,O]=K.useState(!1),[R,V]=K.useState(!1),[z,W]=K.useState(!1),[N,D]=K.useState(null),[L,U]=K.useState(""),[$,Q]=K.useState(new Date().getFullYear()),[j,me]=K.useState(null);K.useEffect(()=>{(async()=>{try{const ie=await l2();r(ie),ie.length>0&&a(ie[0].universityId)}catch(ie){console.error("Error fetching universities:",ie)}})()},[]),K.useEffect(()=>{i&&(async()=>{try{const ie=await RM(i);d(ie),f(""),w(""),F([])}catch(ie){console.error("Error fetching modules:",ie)}})()},[i]),K.useEffect(()=>{i&&h&&_e()},[i,h,s]);const _e=async()=>{O(!0);try{const q=await WH(i,h,s);F(q)}catch(q){console.error("Error fetching assessments:",q)}finally{O(!1)}},we=()=>{U(""),Q(new Date().getFullYear()),me(null),V(!0)},fe=async q=>{if(q.preventDefault(),!(!i||!h||!t)){W(!0);try{await QH(i,h,s,L,$,t.email||"Admin",j),V(!1),_e()}catch(ie){console.error("Error saving assessment:",ie)}finally{W(!1)}}},oe=async q=>{if(window.confirm("Are you sure you want to delete this assessment?"))try{await KH(q),_e()}catch(ie){console.error("Error deleting assessment:",ie)}},Z=g?u.filter(q=>q.code.toLowerCase().includes(g.toLowerCase())||q.name.toLowerCase().includes(g.toLowerCase())):[],J=q=>{f(q),w(""),S(!1)},H=()=>{f(""),w(""),F([]),S(!1)};return _.jsxs("div",{"trae-inspector-start-line":"167","trae-inspector-start-column":"4","trae-inspector-end-line":"373","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[N?_.jsx(yQ,{assessmentId:N.assessmentId,assessmentTitle:N.title,onClose:()=>D(null)}):null,_.jsxs("div",{"trae-inspector-start-line":"176","trae-inspector-start-column":"6","trae-inspector-end-line":"186","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[_.jsx("h1",{"trae-inspector-start-line":"177","trae-inspector-start-column":"8","trae-inspector-end-line":"177","trae-inspector-end-column":"69","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:e}),_.jsxs("button",{"trae-inspector-start-line":"178","trae-inspector-start-column":"8","trae-inspector-end-line":"185","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:we,disabled:!i||!h,className:`bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 ${!i||!h?"opacity-50 cursor-not-allowed":""}`,children:[_.jsx(c0,{className:"h-5 w-5"}),_.jsxs("span",{"trae-inspector-start-line":"184","trae-inspector-start-column":"10","trae-inspector-end-line":"184","trae-inspector-end-column":"50","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:["Create ",e.slice(0,-1)]})]})]}),_.jsx("div",{"trae-inspector-start-line":"188","trae-inspector-start-column":"6","trae-inspector-end-line":"252","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm mb-6",children:_.jsxs("div",{"trae-inspector-start-line":"189","trae-inspector-start-column":"8","trae-inspector-end-line":"251","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[_.jsxs("div",{"trae-inspector-start-line":"190","trae-inspector-start-column":"10","trae-inspector-end-line":"203","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[_.jsx("label",{"trae-inspector-start-line":"191","trae-inspector-start-column":"12","trae-inspector-end-line":"191","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20University%22%2C%22textStartLine%22%3A%22191%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22191%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select University"}),_.jsx("select",{"trae-inspector-start-line":"192","trae-inspector-start-column":"12","trae-inspector-end-line":"202","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:i,onChange:q=>a(q.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:n.map(q=>_.jsxs("option",{"trae-inspector-start-line":"198","trae-inspector-start-column":"16","trae-inspector-end-line":"200","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:q.universityId,children:[q.name," (",q.code,")"]},q.universityId))})]}),_.jsxs("div",{"trae-inspector-start-line":"204","trae-inspector-start-column":"10","trae-inspector-end-line":"250","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[_.jsx("label",{"trae-inspector-start-line":"205","trae-inspector-start-column":"12","trae-inspector-end-line":"205","trae-inspector-end-column":"97","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Search%20Module%22%2C%22textStartLine%22%3A%22205%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22205%22%2C%22textEndColumn%22%3A%2289%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Module"}),h?_.jsxs("div",{"trae-inspector-start-line":"207","trae-inspector-start-column":"17","trae-inspector-end-line":"210","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-2 bg-blue-50 text-blue-800 rounded text-sm flex justify-between items-center border border-blue-200",children:[_.jsxs("span",{"trae-inspector-start-line":"208","trae-inspector-start-column":"19","trae-inspector-end-line":"208","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:["Selected: ",_.jsx("strong",{"trae-inspector-start-line":"208","trae-inspector-start-column":"35","trae-inspector-end-line":"208","trae-inspector-end-column":"70","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:h})]}),_.jsx("button",{"trae-inspector-start-line":"209","trae-inspector-start-column":"19","trae-inspector-end-line":"209","trae-inspector-end-column":"131","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Change%22%2C%22textStartLine%22%3A%22209%22%2C%22textStartColumn%22%3A%22116%22%2C%22textEndLine%22%3A%22209%22%2C%22textEndColumn%22%3A%22122%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:H,className:"text-blue-500 hover:text-blue-700 font-medium",children:"Change"})]}):_.jsxs("div",{"trae-inspector-start-line":"212","trae-inspector-start-column":"16","trae-inspector-end-line":"248","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative",children:[_.jsx("input",{"trae-inspector-start-line":"213","trae-inspector-start-column":"18","trae-inspector-end-line":"227","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Type to search (e.g. SMTH011)...",value:g,onChange:q=>{w(q.target.value),S(!0)},onFocus:()=>{Z.length>0&&S(!0)},className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),C&&_.jsx("div",{"trae-inspector-start-line":"230","trae-inspector-start-column":"20","trae-inspector-end-line":"246","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:Z.length===0?_.jsx("div",{"trae-inspector-start-line":"232","trae-inspector-start-column":"24","trae-inspector-end-line":"234","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"cursor-default select-none relative py-2 px-4 text-gray-500 italic",children:g?"No matching modules found":"Type to search..."}):Z.map(q=>_.jsxs("div",{"trae-inspector-start-line":"237","trae-inspector-start-column":"26","trae-inspector-end-line":"243","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"cursor-pointer select-none relative py-2 px-4 hover:bg-blue-50 text-gray-900",onClick:()=>J(q.code),children:[_.jsx("span",{"trae-inspector-start-line":"242","trae-inspector-start-column":"28","trae-inspector-end-line":"242","trae-inspector-end-column":"75","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium",children:q.code})," - ",q.name]},q.moduleId))})]})]})]})}),_.jsx("div",{"trae-inspector-start-line":"254","trae-inspector-start-column":"6","trae-inspector-end-line":"323","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:_.jsx("div",{"trae-inspector-start-line":"255","trae-inspector-start-column":"8","trae-inspector-end-line":"322","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:_.jsxs("table",{"trae-inspector-start-line":"256","trae-inspector-start-column":"10","trae-inspector-end-line":"321","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[_.jsx("thead",{"trae-inspector-start-line":"257","trae-inspector-start-column":"12","trae-inspector-end-line":"264","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:_.jsxs("tr",{"trae-inspector-start-line":"258","trae-inspector-start-column":"14","trae-inspector-end-line":"263","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("th",{"trae-inspector-start-line":"259","trae-inspector-start-column":"16","trae-inspector-end-line":"259","trae-inspector-end-column":"51","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22259%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22259%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Year"}),_.jsx("th",{"trae-inspector-start-line":"260","trae-inspector-start-column":"16","trae-inspector-end-line":"260","trae-inspector-end-column":"52","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22260%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22260%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Title"}),_.jsx("th",{"trae-inspector-start-line":"261","trae-inspector-start-column":"16","trae-inspector-end-line":"261","trae-inspector-end-column":"54","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Content%22%2C%22textStartLine%22%3A%22261%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22261%22%2C%22textEndColumn%22%3A%2249%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Content"}),_.jsx("th",{"trae-inspector-start-line":"262","trae-inspector-start-column":"16","trae-inspector-end-line":"262","trae-inspector-end-column":"65","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22262%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22262%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),_.jsx("tbody",{"trae-inspector-start-line":"265","trae-inspector-start-column":"12","trae-inspector-end-line":"320","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:I?_.jsx("tr",{"trae-inspector-start-line":"267","trae-inspector-start-column":"16","trae-inspector-end-line":"269","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsx("td",{"trae-inspector-start-line":"268","trae-inspector-start-column":"18","trae-inspector-end-line":"268","trae-inspector-end-column":"97","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22268%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22268%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):v.length===0?_.jsx("tr",{"trae-inspector-start-line":"271","trae-inspector-start-column":"16","trae-inspector-end-line":"275","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsx("td",{"trae-inspector-start-line":"272","trae-inspector-start-column":"18","trae-inspector-end-line":"274","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:h?"No assessments found":"Please select a module"})}):v.map(q=>_.jsxs("tr",{"trae-inspector-start-line":"278","trae-inspector-start-column":"18","trae-inspector-end-line":"317","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[_.jsx("td",{"trae-inspector-start-line":"279","trae-inspector-start-column":"20","trae-inspector-end-line":"279","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-900",children:q.year}),_.jsx("td",{"trae-inspector-start-line":"280","trae-inspector-start-column":"20","trae-inspector-end-line":"285","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:_.jsxs("div",{"trae-inspector-start-line":"281","trae-inspector-start-column":"22","trae-inspector-end-line":"284","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[_.jsx(Hm,{className:"h-4 w-4 text-blue-500"}),_.jsx("span",{"trae-inspector-start-line":"283","trae-inspector-start-column":"24","trae-inspector-end-line":"283","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-900",children:q.title})]})}),_.jsx("td",{"trae-inspector-start-line":"286","trae-inspector-start-column":"20","trae-inspector-end-line":"307","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:_.jsxs("div",{"trae-inspector-start-line":"287","trae-inspector-start-column":"22","trae-inspector-end-line":"306","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-4",children:[q.pdfUrl&&_.jsxs("a",{"trae-inspector-start-line":"289","trae-inspector-start-column":"26","trae-inspector-end-line":"297","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:q.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-red-600 hover:text-red-900 text-xs",title:"Download PDF",children:[_.jsx(Hm,{className:"h-4 w-4 mr-1"})," PDF"]}),_.jsxs("button",{"trae-inspector-start-line":"299","trae-inspector-start-column":"24","trae-inspector-end-line":"305","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>D(q),className:"flex items-center text-blue-600 hover:text-blue-900 text-xs",title:"Manage Questions",children:[_.jsx(D6,{className:"h-4 w-4 mr-1"})," Questions"]})]})}),_.jsx("td",{"trae-inspector-start-line":"308","trae-inspector-start-column":"20","trae-inspector-end-line":"316","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:_.jsx("button",{"trae-inspector-start-line":"309","trae-inspector-start-column":"22","trae-inspector-end-line":"315","trae-inspector-end-column":"31","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>oe(q),className:"text-red-600 hover:text-red-900",title:"Delete Assessment",children:_.jsx(u0,{className:"h-5 w-5"})})})]},q.assessmentId))})]})})}),_.jsx(F0,{isOpen:R,onClose:()=>V(!1),title:`Create ${e.slice(0,-1)}`,children:_.jsxs("form",{"trae-inspector-start-line":"330","trae-inspector-start-column":"8","trae-inspector-end-line":"371","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:fe,className:"space-y-4",children:[_.jsxs("div",{"trae-inspector-start-line":"331","trae-inspector-start-column":"10","trae-inspector-end-line":"340","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"332","trae-inspector-start-column":"12","trae-inspector-end-line":"332","trae-inspector-end-column":"83","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22332%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22332%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Year"}),_.jsx("input",{"trae-inspector-start-line":"333","trae-inspector-start-column":"12","trae-inspector-end-line":"339","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,value:$,onChange:q=>Q(parseInt(q.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),_.jsxs("div",{"trae-inspector-start-line":"341","trae-inspector-start-column":"10","trae-inspector-end-line":"351","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"342","trae-inspector-start-column":"12","trae-inspector-end-line":"342","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22342%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22342%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Title"}),_.jsx("input",{"trae-inspector-start-line":"343","trae-inspector-start-column":"12","trae-inspector-end-line":"350","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:L,onChange:q=>U(q.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g. Final Exam, Semester Test 1"})]}),_.jsxs("div",{"trae-inspector-start-line":"352","trae-inspector-start-column":"10","trae-inspector-end-line":"361","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"353","trae-inspector-start-column":"12","trae-inspector-end-line":"353","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Full%20Paper%20PDF%20(Optional)%22%2C%22textStartLine%22%3A%22353%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22353%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Full Paper PDF (Optional)"}),_.jsx("p",{"trae-inspector-start-line":"354","trae-inspector-start-column":"12","trae-inspector-end-line":"354","trae-inspector-end-column":"147","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20the%20full%20paper%20if%20you%20have%20it%2C%20otherwise%20you%20can%20add%20questions%20individually%20later.%22%2C%22textStartLine%22%3A%22354%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%22354%22%2C%22textEndColumn%22%3A%22143%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1",children:"Upload the full paper if you have it, otherwise you can add questions individually later."}),_.jsx("input",{"trae-inspector-start-line":"355","trae-inspector-start-column":"12","trae-inspector-end-line":"360","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:".pdf",onChange:q=>me(q.target.files?q.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),_.jsx("div",{"trae-inspector-start-line":"362","trae-inspector-start-column":"10","trae-inspector-end-line":"370","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:_.jsx("button",{"trae-inspector-start-line":"363","trae-inspector-start-column":"12","trae-inspector-end-line":"369","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:z,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${z?"opacity-75 cursor-not-allowed":""}`,children:z?"Creating...":"Create Assessment"})})]})})]})},wQ=()=>_.jsx(JS,{type:"exam",title:"Exams"}),vQ=()=>_.jsx(JS,{type:"test",title:"Tests"}),AQ=()=>_.jsx(JS,{type:"supplementary",title:"Supplementary Exams"}),yD="users",wD=async s=>{let e;return s?e=sa(fs(nn,yD),Cu("universityId","==",s),Du("createdAt","desc")):e=sa(fs(nn,yD),Du("createdAt","desc"),fM(50)),(await rp(e)).docs.map(n=>({userId:n.id,...n.data()}))},_Q=()=>{const[s,e]=K.useState([]),[t,n]=K.useState([]),[r,i]=K.useState(""),[a,u]=K.useState(!0),[d,h]=K.useState("");K.useEffect(()=>{(async()=>{try{const[v,F]=await Promise.all([l2(),wD()]);n(v),e(F)}catch(v){console.error("Error loading data:",v)}finally{u(!1)}})()},[]),K.useEffect(()=>{(async()=>{u(!0);try{const v=await wD(r||void 0);e(v)}catch(v){console.error("Error fetching users:",v)}finally{u(!1)}})()},[r]);const f=s.filter(w=>w.name.toLowerCase().includes(d.toLowerCase())||w.email.toLowerCase().includes(d.toLowerCase())),g=w=>{const v=t.find(F=>F.universityId===w);return v?v.code:"Unknown"};return _.jsxs("div",{"trae-inspector-start-line":"58","trae-inspector-start-column":"4","trae-inspector-end-line":"167","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("h1",{"trae-inspector-start-line":"59","trae-inspector-start-column":"6","trae-inspector-end-line":"59","trae-inspector-end-column":"77","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Users%22%2C%22textStartLine%22%3A%2259%22%2C%22textStartColumn%22%3A%2260%22%2C%22textEndLine%22%3A%2259%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900 mb-6",children:"Manage Users"}),_.jsx("div",{"trae-inspector-start-line":"61","trae-inspector-start-column":"6","trae-inspector-end-line":"94","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:_.jsxs("div",{"trae-inspector-start-line":"62","trae-inspector-start-column":"8","trae-inspector-end-line":"93","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[_.jsxs("div",{"trae-inspector-start-line":"63","trae-inspector-start-column":"10","trae-inspector-end-line":"77","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[_.jsx("label",{"trae-inspector-start-line":"64","trae-inspector-start-column":"12","trae-inspector-end-line":"64","trae-inspector-end-column":"104","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Filter%20by%20University%22%2C%22textStartLine%22%3A%2264%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2264%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by University"}),_.jsxs("select",{"trae-inspector-start-line":"65","trae-inspector-start-column":"12","trae-inspector-end-line":"76","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:r,onChange:w=>i(w.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:[_.jsx("option",{"trae-inspector-start-line":"70","trae-inspector-start-column":"14","trae-inspector-end-line":"70","trae-inspector-end-column":"56","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22All%20Universities%22%2C%22textStartLine%22%3A%2270%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%2270%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"",children:"All Universities"}),t.map(w=>_.jsxs("option",{"trae-inspector-start-line":"72","trae-inspector-start-column":"16","trae-inspector-end-line":"74","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:w.universityId,children:[w.name," (",w.code,")"]},w.universityId))]})]}),_.jsxs("div",{"trae-inspector-start-line":"78","trae-inspector-start-column":"10","trae-inspector-end-line":"92","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[_.jsx("label",{"trae-inspector-start-line":"79","trae-inspector-start-column":"12","trae-inspector-end-line":"79","trae-inspector-end-column":"96","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Search%20Users%22%2C%22textStartLine%22%3A%2279%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2279%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Users"}),_.jsxs("div",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"91","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative",children:[_.jsx("div",{"trae-inspector-start-line":"81","trae-inspector-start-column":"14","trae-inspector-end-line":"83","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx(cx,{className:"h-5 w-5 text-gray-400"})}),_.jsx("input",{"trae-inspector-start-line":"84","trae-inspector-start-column":"14","trae-inspector-end-line":"90","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search by name or email...",value:d,onChange:w=>h(w.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}),_.jsx("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"6","trae-inspector-end-line":"166","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:_.jsx("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"8","trae-inspector-end-line":"165","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:_.jsxs("table",{"trae-inspector-start-line":"98","trae-inspector-start-column":"10","trae-inspector-end-line":"164","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[_.jsx("thead",{"trae-inspector-start-line":"99","trae-inspector-start-column":"12","trae-inspector-end-line":"107","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:_.jsxs("tr",{"trae-inspector-start-line":"100","trae-inspector-start-column":"14","trae-inspector-end-line":"106","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("th",{"trae-inspector-start-line":"101","trae-inspector-start-column":"16","trae-inspector-end-line":"101","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22User%22%2C%22textStartLine%22%3A%22101%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22101%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"User"}),_.jsx("th",{"trae-inspector-start-line":"102","trae-inspector-start-column":"16","trae-inspector-end-line":"102","trae-inspector-end-column":"57","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%22%2C%22textStartLine%22%3A%22102%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22102%22%2C%22textEndColumn%22%3A%2252%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"University"}),_.jsx("th",{"trae-inspector-start-line":"103","trae-inspector-start-column":"16","trae-inspector-end-line":"103","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Points%22%2C%22textStartLine%22%3A%22103%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22103%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Points"}),_.jsx("th",{"trae-inspector-start-line":"104","trae-inspector-start-column":"16","trae-inspector-end-line":"104","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Status%22%2C%22textStartLine%22%3A%22104%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22104%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Status"}),_.jsx("th",{"trae-inspector-start-line":"105","trae-inspector-start-column":"16","trae-inspector-end-line":"105","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Joined%22%2C%22textStartLine%22%3A%22105%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22105%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Joined"})]})}),_.jsx("tbody",{"trae-inspector-start-line":"108","trae-inspector-start-column":"12","trae-inspector-end-line":"163","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:a?_.jsx("tr",{"trae-inspector-start-line":"110","trae-inspector-start-column":"16","trae-inspector-end-line":"112","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsx("td",{"trae-inspector-start-line":"111","trae-inspector-start-column":"18","trae-inspector-end-line":"111","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22111%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22111%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):f.length===0?_.jsx("tr",{"trae-inspector-start-line":"114","trae-inspector-start-column":"16","trae-inspector-end-line":"116","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:_.jsx("td",{"trae-inspector-start-line":"115","trae-inspector-start-column":"18","trae-inspector-end-line":"115","trae-inspector-end-column":"101","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20users%20found%22%2C%22textStartLine%22%3A%22115%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22115%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):f.map(w=>_.jsxs("tr",{"trae-inspector-start-line":"119","trae-inspector-start-column":"18","trae-inspector-end-line":"160","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[_.jsx("td",{"trae-inspector-start-line":"120","trae-inspector-start-column":"20","trae-inspector-end-line":"135","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:_.jsxs("div",{"trae-inspector-start-line":"121","trae-inspector-start-column":"22","trae-inspector-end-line":"134","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center",children:[_.jsx("div",{"trae-inspector-start-line":"122","trae-inspector-start-column":"24","trae-inspector-end-line":"126","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-shrink-0 h-10 w-10",children:_.jsx("div",{"trae-inspector-start-line":"123","trae-inspector-start-column":"26","trae-inspector-end-line":"125","trae-inspector-end-column":"32","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:_.jsx(zD,{className:"h-6 w-6 text-blue-600"})})}),_.jsxs("div",{"trae-inspector-start-line":"127","trae-inspector-start-column":"24","trae-inspector-end-line":"133","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"ml-4",children:[_.jsx("div",{"trae-inspector-start-line":"128","trae-inspector-start-column":"26","trae-inspector-end-line":"128","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-900",children:w.name}),_.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"26","trae-inspector-end-line":"132","trae-inspector-end-column":"32","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500 flex items-center",children:[_.jsx(jD,{className:"h-3 w-3 mr-1"}),w.email]})]})]})}),_.jsx("td",{"trae-inspector-start-line":"136","trae-inspector-start-column":"20","trae-inspector-end-line":"141","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:_.jsxs("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"22","trae-inspector-end-line":"140","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center text-sm text-gray-900",children:[_.jsx(_b,{className:"h-4 w-4 mr-2 text-gray-400"}),g(w.universityId)]})}),_.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"20","trae-inspector-end-line":"147","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:_.jsxs("div",{"trae-inspector-start-line":"143","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center text-sm text-gray-900",children:[_.jsx(i6,{className:"h-4 w-4 mr-2 text-yellow-500"}),w.points]})}),_.jsx("td",{"trae-inspector-start-line":"148","trae-inspector-start-column":"20","trae-inspector-end-line":"156","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:_.jsx("span",{"trae-inspector-start-line":"149","trae-inspector-start-column":"22","trae-inspector-end-line":"155","trae-inspector-end-column":"29","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w.subscriptionActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.subscriptionActive?"Premium":"Free"})}),_.jsx("td",{"trae-inspector-start-line":"157","trae-inspector-start-column":"20","trae-inspector-end-line":"159","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:w.createdAt?new Date(w.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]},w.userId))})]})})})]})},xQ=()=>_.jsxs("div",{"trae-inspector-start-line":"6","trae-inspector-start-column":"4","trae-inspector-end-line":"20","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[_.jsx("h1",{"trae-inspector-start-line":"7","trae-inspector-start-column":"6","trae-inspector-end-line":"7","trae-inspector-end-column":"78","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Analytics%20Overview%22%2C%22textStartLine%22%3A%227%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%227%22%2C%22textEndColumn%22%3A%2273%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Analytics Overview"}),_.jsxs("div",{"trae-inspector-start-line":"9","trae-inspector-start-column":"6","trae-inspector-end-line":"19","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[_.jsx("div",{"trae-inspector-start-line":"10","trae-inspector-start-column":"8","trae-inspector-end-line":"14","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-center mb-6",children:_.jsx("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"10","trae-inspector-end-line":"13","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-100 p-4 rounded-full",children:_.jsx(UD,{className:"h-12 w-12 text-blue-600"})})}),_.jsx("h2",{"trae-inspector-start-line":"15","trae-inspector-start-column":"8","trae-inspector-end-line":"15","trae-inspector-end-column":"85","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Analytics%20Dashboard%22%2C%22textStartLine%22%3A%2215%22%2C%22textStartColumn%22%3A%2261%22%2C%22textEndLine%22%3A%2215%22%2C%22textEndColumn%22%3A%2280%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xl font-bold text-gray-900 mb-2",children:"Analytics Dashboard"}),_.jsx("p",{"trae-inspector-start-line":"16","trae-inspector-start-column":"8","trae-inspector-end-line":"18","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Detailed%20usage%20statistics%20and%20engagement%20metrics%20will%20appear%20here%20once%20students%20start%20using%20the%20mobile%20application.%22%2C%22textStartLine%22%3A%2216%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%2218%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-500 max-w-md mx-auto",children:"Detailed usage statistics and engagement metrics will appear here once students start using the mobile application."})]})]}),Qx="announcements",EQ=async()=>{const s=sa(fs(nn,Qx),Du("createdAt","desc"));return(await rp(s)).docs.map(t=>({announcementId:t.id,...t.data()}))},bQ=async(s,e,t,n)=>(await b0(fs(nn,Qx),{title:s,message:e,universityId:t,active:n,createdAt:x0()})).id,CQ=async(s,e)=>{await Dx(la(nn,Qx,s),{active:e})},FQ=async s=>{await E0(la(nn,Qx,s))},SQ=()=>{const[s,e]=K.useState([]),[t,n]=K.useState([]),[r,i]=K.useState(!0),[a,u]=K.useState(!1),[d,h]=K.useState(!1),[f,g]=K.useState(""),[w,v]=K.useState(""),[F,C]=K.useState(""),[S,I]=K.useState(!0);K.useEffect(()=>{O()},[]);const O=async()=>{try{const[D,L]=await Promise.all([EQ(),l2()]);e(D),n(L)}catch(D){console.error("Error fetching data:",D)}finally{i(!1)}},R=()=>{g(""),v(""),C(""),I(!0),u(!0)},V=async D=>{D.preventDefault(),h(!0);try{await bQ(f,w,F||"all",S),u(!1),O()}catch(L){console.error("Error creating announcement:",L)}finally{h(!1)}},z=async D=>{try{await CQ(D.announcementId,!D.active),O()}catch(L){console.error("Error updating status:",L)}},W=async D=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await FQ(D),O()}catch(L){console.error("Error deleting announcement:",L)}},N=D=>{if(D==="all")return"All Universities";const L=t.find(U=>U.universityId===D);return L?L.name:"Unknown"};return _.jsxs("div",{"trae-inspector-start-line":"89","trae-inspector-start-column":"4","trae-inspector-end-line":"229","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsxs("div",{"trae-inspector-start-line":"90","trae-inspector-start-column":"6","trae-inspector-end-line":"99","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[_.jsx("h1",{"trae-inspector-start-line":"91","trae-inspector-start-column":"8","trae-inspector-end-line":"91","trae-inspector-end-column":"75","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Announcements%22%2C%22textStartLine%22%3A%2291%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2291%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Announcements"}),_.jsxs("button",{"trae-inspector-start-line":"92","trae-inspector-start-column":"8","trae-inspector-end-line":"98","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[_.jsx(c0,{className:"h-5 w-5"}),_.jsx("span",{"trae-inspector-start-line":"97","trae-inspector-start-column":"10","trae-inspector-end-line":"97","trae-inspector-end-column":"42","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Create%20Announcement%22%2C%22textStartLine%22%3A%2297%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2297%22%2C%22textEndColumn%22%3A%2235%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Create Announcement"})]})]}),_.jsx("div",{"trae-inspector-start-line":"101","trae-inspector-start-column":"6","trae-inspector-end-line":"160","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid gap-6",children:r?_.jsx("div",{"trae-inspector-start-line":"103","trae-inspector-start-column":"10","trae-inspector-end-line":"103","trae-inspector-end-column":"75","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22103%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22103%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center text-gray-500 py-10",children:"Loading..."}):s.length===0?_.jsx("div",{"trae-inspector-start-line":"105","trae-inspector-start-column":"10","trae-inspector-end-line":"107","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20announcements%20found%22%2C%22textStartLine%22%3A%22105%22%2C%22textStartColumn%22%3A%2289%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center text-gray-500 py-10 bg-white rounded-xl shadow-sm",children:"No announcements found"}):s.map(D=>_.jsxs("div",{"trae-inspector-start-line":"110","trae-inspector-start-column":"12","trae-inspector-end-line":"157","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-6 flex justify-between items-start",children:[_.jsxs("div",{"trae-inspector-start-line":"111","trae-inspector-start-column":"14","trae-inspector-end-line":"127","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-start space-x-4",children:[_.jsx("div",{"trae-inspector-start-line":"112","trae-inspector-start-column":"16","trae-inspector-end-line":"114","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`p-3 rounded-lg ${D.active?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-500"}`,children:_.jsx($D,{className:"h-6 w-6"})}),_.jsxs("div",{"trae-inspector-start-line":"115","trae-inspector-start-column":"16","trae-inspector-end-line":"126","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("h3",{"trae-inspector-start-line":"116","trae-inspector-start-column":"18","trae-inspector-end-line":"116","trae-inspector-end-column":"82","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-bold text-gray-900",children:D.title}),_.jsx("p",{"trae-inspector-start-line":"117","trae-inspector-start-column":"18","trae-inspector-end-line":"117","trae-inspector-end-column":"69","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-600 mt-1",children:D.message}),_.jsxs("div",{"trae-inspector-start-line":"118","trae-inspector-start-column":"18","trae-inspector-end-line":"125","trae-inspector-end-column":"24","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4 mt-3 text-sm text-gray-500",children:[_.jsxs("span",{"trae-inspector-start-line":"119","trae-inspector-start-column":"20","trae-inspector-end-line":"121","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-100 px-2 py-1 rounded-md",children:["Target: ",N(D.universityId)]}),_.jsxs("span",{"trae-inspector-start-line":"122","trae-inspector-start-column":"20","trae-inspector-end-line":"124","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:["Created: ",D.createdAt?new Date(D.createdAt.seconds*1e3).toLocaleDateString():"Just now"]})]})]})]}),_.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"14","trae-inspector-end-line":"156","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[_.jsx("button",{"trae-inspector-start-line":"130","trae-inspector-start-column":"16","trae-inspector-end-line":"149","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(D),className:`flex items-center space-x-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${D.active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:D.active?_.jsxs(_.Fragment,{children:[_.jsx(g6,{className:"h-4 w-4"}),_.jsx("span",{"trae-inspector-start-line":"141","trae-inspector-start-column":"22","trae-inspector-end-line":"141","trae-inspector-end-column":"41","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Active%22%2C%22textStartLine%22%3A%22141%22%2C%22textStartColumn%22%3A%2228%22%2C%22textEndLine%22%3A%22141%22%2C%22textEndColumn%22%3A%2234%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Active"})]}):_.jsxs(_.Fragment,{children:[_.jsx(w6,{className:"h-4 w-4"}),_.jsx("span",{"trae-inspector-start-line":"146","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"43","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Inactive%22%2C%22textStartLine%22%3A%22146%22%2C%22textStartColumn%22%3A%2228%22%2C%22textEndLine%22%3A%22146%22%2C%22textEndColumn%22%3A%2236%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Inactive"})]})}),_.jsx("button",{"trae-inspector-start-line":"150","trae-inspector-start-column":"16","trae-inspector-end-line":"155","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>W(D.announcementId),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:_.jsx(u0,{className:"h-5 w-5"})})]})]},D.announcementId))}),_.jsx(F0,{isOpen:a,onClose:()=>u(!1),title:"Create Announcement",children:_.jsxs("form",{"trae-inspector-start-line":"167","trae-inspector-start-column":"8","trae-inspector-end-line":"227","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:V,className:"space-y-4",children:[_.jsxs("div",{"trae-inspector-start-line":"168","trae-inspector-start-column":"10","trae-inspector-end-line":"178","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"169","trae-inspector-start-column":"12","trae-inspector-end-line":"169","trae-inspector-end-column":"84","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22169%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22169%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Title"}),_.jsx("input",{"trae-inspector-start-line":"170","trae-inspector-start-column":"12","trae-inspector-end-line":"177","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:f,onChange:D=>g(D.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g. System Maintenance"})]}),_.jsxs("div",{"trae-inspector-start-line":"179","trae-inspector-start-column":"10","trae-inspector-end-line":"189","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"180","trae-inspector-start-column":"12","trae-inspector-end-line":"180","trae-inspector-end-column":"86","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Message%22%2C%22textStartLine%22%3A%22180%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22180%22%2C%22textEndColumn%22%3A%2278%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Message"}),_.jsx("textarea",{"trae-inspector-start-line":"181","trae-inspector-start-column":"12","trae-inspector-end-line":"188","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",required:!0,rows:3,value:w,onChange:D=>v(D.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter announcement details..."})]}),_.jsxs("div",{"trae-inspector-start-line":"190","trae-inspector-start-column":"10","trae-inspector-end-line":"205","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[_.jsx("label",{"trae-inspector-start-line":"191","trae-inspector-start-column":"12","trae-inspector-end-line":"191","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Target%20Audience%22%2C%22textStartLine%22%3A%22191%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22191%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Target Audience"}),_.jsxs("select",{"trae-inspector-start-line":"192","trae-inspector-start-column":"12","trae-inspector-end-line":"204","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:F,onChange:D=>C(D.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[_.jsx("option",{"trae-inspector-start-line":"197","trae-inspector-start-column":"14","trae-inspector-end-line":"197","trae-inspector-end-column":"56","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20Target...%22%2C%22textStartLine%22%3A%22197%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%22197%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"",children:"Select Target..."}),_.jsx("option",{"trae-inspector-start-line":"198","trae-inspector-start-column":"14","trae-inspector-end-line":"198","trae-inspector-end-column":"59","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22All%20Universities%22%2C%22textStartLine%22%3A%22198%22%2C%22textStartColumn%22%3A%2234%22%2C%22textEndLine%22%3A%22198%22%2C%22textEndColumn%22%3A%2250%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"all",children:"All Universities"}),t.map(D=>_.jsx("option",{"trae-inspector-start-line":"200","trae-inspector-start-column":"16","trae-inspector-end-line":"202","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:D.universityId,children:D.name},D.universityId))]})]}),_.jsxs("div",{"trae-inspector-start-line":"206","trae-inspector-start-column":"10","trae-inspector-end-line":"217","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center",children:[_.jsx("input",{"trae-inspector-start-line":"207","trae-inspector-start-column":"12","trae-inspector-end-line":"213","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"active",type:"checkbox",checked:S,onChange:D=>I(D.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),_.jsx("label",{"trae-inspector-start-line":"214","trae-inspector-start-column":"12","trae-inspector-end-line":"216","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Set%20as%20Active%20immediately%22%2C%22textStartLine%22%3A%22214%22%2C%22textStartColumn%22%3A%2281%22%2C%22textEndLine%22%3A%22216%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Set as Active immediately"})]}),_.jsx("div",{"trae-inspector-start-line":"218","trae-inspector-start-column":"10","trae-inspector-end-line":"226","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:_.jsx("button",{"trae-inspector-start-line":"219","trae-inspector-start-column":"12","trae-inspector-end-line":"225","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:d,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${d?"opacity-75 cursor-not-allowed":""}`,children:d?"Creating...":"Create Announcement"})})]})})]})};function TQ(){return _.jsx($B,{children:_.jsxs(wB,{children:[_.jsx(Cs,{path:"/login",element:_.jsx(HH,{})}),_.jsx(Cs,{path:"/",element:_.jsx(Ta,{children:_.jsx(Sa,{children:_.jsx(vb,{to:"/dashboard",replace:!0})})})}),_.jsx(Cs,{path:"/dashboard",element:_.jsx(Ta,{children:_.jsx(Sa,{children:_.jsx(qW,{})})})}),_.jsx(Cs,{path:"/universities",element:_.jsx(Ta,{children:_.jsx(Sa,{children:_.jsx(QW,{})})})}),_.jsx(Cs,{path:"/modules",element:_.jsx(Ta,{children:_.jsx(Sa,{children:_.jsx(JW,{})})})}),_.jsx(Cs,{path:"/exams",element:_.jsx(Ta,{children:_.jsx(Sa,{children:_.jsx(wQ,{})})})}),_.jsx(Cs,{path:"/tests",element:_.jsx(Ta,{children:_.jsx(Sa,{children:_.jsx(vQ,{})})})}),_.jsx(Cs,{path:"/supplementary-exams",element:_.jsx(Ta,{children:_.jsx(Sa,{children:_.jsx(AQ,{})})})}),_.jsx(Cs,{path:"/users",element:_.jsx(Ta,{children:_.jsx(Sa,{children:_.jsx(_Q,{})})})}),_.jsx(Cs,{path:"/analytics",element:_.jsx(Ta,{children:_.jsx(Sa,{children:_.jsx(xQ,{})})})}),_.jsx(Cs,{path:"/announcements",element:_.jsx(Ta,{children:_.jsx(Sa,{children:_.jsx(SQ,{})})})}),_.jsx(Cs,{path:"*",element:_.jsx(vb,{to:"/",replace:!0})})]})})}_7.createRoot(document.getElementById("root")).render(_.jsx(K.StrictMode,{children:_.jsx(TQ,{})}));

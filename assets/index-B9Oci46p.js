var p4=Object.defineProperty;var zk=s=>{throw TypeError(s)};var f4=(s,e,t)=>e in s?p4(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var ne=(s,e,t)=>f4(s,typeof e!="symbol"?e+"":e,t),gE=(s,e,t)=>e.has(s)||zk("Cannot "+t);var c=(s,e,t)=>(gE(s,e,"read from private field"),t?t.call(s):e.get(s)),S=(s,e,t)=>e.has(s)?zk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),_=(s,e,t,n)=>(gE(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),I=(s,e,t)=>(gE(s,e,"access private method"),t);var Ln=(s,e,t,n)=>({set _(r){_(s,e,r,t)},get _(){return c(s,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function m4(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var yE={exports:{}},ng={},wE={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hk;function g4(){if(Hk)return tt;Hk=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function w(X){return X===null||typeof X!="object"?null:(X=g&&X[g]||X["@@iterator"],typeof X=="function"?X:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,C={};function T(X,re,_e){this.props=X,this.context=re,this.refs=C,this.updater=_e||A}T.prototype.isReactComponent={},T.prototype.setState=function(X,re){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,re,"setState")},T.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function P(){}P.prototype=T.prototype;function O(X,re,_e){this.props=X,this.context=re,this.refs=C,this.updater=_e||A}var N=O.prototype=new P;N.constructor=O,F(N,T.prototype),N.isPureReactComponent=!0;var V=Array.isArray,z=Object.prototype.hasOwnProperty,W={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function R(X,re,_e){var De,ke={},Me=null,Ne=null;if(re!=null)for(De in re.ref!==void 0&&(Ne=re.ref),re.key!==void 0&&(Me=""+re.key),re)z.call(re,De)&&!D.hasOwnProperty(De)&&(ke[De]=re[De]);var et=arguments.length-2;if(et===1)ke.children=_e;else if(1<et){for(var dt=Array(et),he=0;he<et;he++)dt[he]=arguments[he+2];ke.children=dt}if(X&&X.defaultProps)for(De in et=X.defaultProps,et)ke[De]===void 0&&(ke[De]=et[De]);return{$$typeof:s,type:X,key:Me,ref:Ne,props:ke,_owner:W.current}}function L(X,re){return{$$typeof:s,type:X.type,key:re,ref:X.ref,props:X.props,_owner:X._owner}}function U(X){return typeof X=="object"&&X!==null&&X.$$typeof===s}function $(X){var re={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(_e){return re[_e]})}var G=/\/+/g;function j(X,re){return typeof X=="object"&&X!==null&&X.key!=null?$(""+X.key):re.toString(36)}function ye(X,re,_e,De,ke){var Me=typeof X;(Me==="undefined"||Me==="boolean")&&(X=null);var Ne=!1;if(X===null)Ne=!0;else switch(Me){case"string":case"number":Ne=!0;break;case"object":switch(X.$$typeof){case s:case e:Ne=!0}}if(Ne)return Ne=X,ke=ke(Ne),X=De===""?"."+j(Ne,0):De,V(ke)?(_e="",X!=null&&(_e=X.replace(G,"$&/")+"/"),ye(ke,re,_e,"",function(he){return he})):ke!=null&&(U(ke)&&(ke=L(ke,_e+(!ke.key||Ne&&Ne.key===ke.key?"":(""+ke.key).replace(G,"$&/")+"/")+X)),re.push(ke)),1;if(Ne=0,De=De===""?".":De+":",V(X))for(var et=0;et<X.length;et++){Me=X[et];var dt=De+j(Me,et);Ne+=ye(Me,re,_e,dt,ke)}else if(dt=w(X),typeof dt=="function")for(X=dt.call(X),et=0;!(Me=X.next()).done;)Me=Me.value,dt=De+j(Me,et++),Ne+=ye(Me,re,_e,dt,ke);else if(Me==="object")throw re=String(X),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return Ne}function ce(X,re,_e){if(X==null)return X;var De=[],ke=0;return ye(X,De,"","",function(Me){return re.call(_e,Me,ke++)}),De}function de(X){if(X._status===-1){var re=X._result;re=re(),re.then(function(_e){(X._status===0||X._status===-1)&&(X._status=1,X._result=_e)},function(_e){(X._status===0||X._status===-1)&&(X._status=2,X._result=_e)}),X._status===-1&&(X._status=0,X._result=re)}if(X._status===1)return X._result.default;throw X._result}var me={current:null},ie={transition:null},ve={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:ie,ReactCurrentOwner:W};function fe(){throw Error("act(...) is not supported in production builds of React.")}return tt.Children={map:ce,forEach:function(X,re,_e){ce(X,function(){re.apply(this,arguments)},_e)},count:function(X){var re=0;return ce(X,function(){re++}),re},toArray:function(X){return ce(X,function(re){return re})||[]},only:function(X){if(!U(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},tt.Component=T,tt.Fragment=t,tt.Profiler=r,tt.PureComponent=O,tt.StrictMode=n,tt.Suspense=d,tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,tt.act=fe,tt.cloneElement=function(X,re,_e){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var De=F({},X.props),ke=X.key,Me=X.ref,Ne=X._owner;if(re!=null){if(re.ref!==void 0&&(Me=re.ref,Ne=W.current),re.key!==void 0&&(ke=""+re.key),X.type&&X.type.defaultProps)var et=X.type.defaultProps;for(dt in re)z.call(re,dt)&&!D.hasOwnProperty(dt)&&(De[dt]=re[dt]===void 0&&et!==void 0?et[dt]:re[dt])}var dt=arguments.length-2;if(dt===1)De.children=_e;else if(1<dt){et=Array(dt);for(var he=0;he<dt;he++)et[he]=arguments[he+2];De.children=et}return{$$typeof:s,type:X.type,key:ke,ref:Me,props:De,_owner:Ne}},tt.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:i,_context:X},X.Consumer=X},tt.createElement=R,tt.createFactory=function(X){var re=R.bind(null,X);return re.type=X,re},tt.createRef=function(){return{current:null}},tt.forwardRef=function(X){return{$$typeof:u,render:X}},tt.isValidElement=U,tt.lazy=function(X){return{$$typeof:f,_payload:{_status:-1,_result:X},_init:de}},tt.memo=function(X,re){return{$$typeof:h,type:X,compare:re===void 0?null:re}},tt.startTransition=function(X){var re=ie.transition;ie.transition={};try{X()}finally{ie.transition=re}},tt.unstable_act=fe,tt.useCallback=function(X,re){return me.current.useCallback(X,re)},tt.useContext=function(X){return me.current.useContext(X)},tt.useDebugValue=function(){},tt.useDeferredValue=function(X){return me.current.useDeferredValue(X)},tt.useEffect=function(X,re){return me.current.useEffect(X,re)},tt.useId=function(){return me.current.useId()},tt.useImperativeHandle=function(X,re,_e){return me.current.useImperativeHandle(X,re,_e)},tt.useInsertionEffect=function(X,re){return me.current.useInsertionEffect(X,re)},tt.useLayoutEffect=function(X,re){return me.current.useLayoutEffect(X,re)},tt.useMemo=function(X,re){return me.current.useMemo(X,re)},tt.useReducer=function(X,re,_e){return me.current.useReducer(X,re,_e)},tt.useRef=function(X){return me.current.useRef(X)},tt.useState=function(X){return me.current.useState(X)},tt.useSyncExternalStore=function(X,re,_e){return me.current.useSyncExternalStore(X,re,_e)},tt.useTransition=function(){return me.current.useTransition()},tt.version="18.3.1",tt}var Wk;function rF(){return Wk||(Wk=1,wE.exports=g4()),wE.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gk;function y4(){if(Gk)return ng;Gk=1;var s=rF(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(u,d,h){var f,g={},w=null,A=null;h!==void 0&&(w=""+h),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(A=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(g[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)g[f]===void 0&&(g[f]=d[f]);return{$$typeof:e,type:u,key:w,ref:A,props:g,_owner:r.current}}return ng.Fragment=t,ng.jsx=o,ng.jsxs=o,ng}var qk;function w4(){return qk||(qk=1,yE.exports=y4()),yE.exports}var E=w4(),K=rF();const Hv=m4(K);var Wv={},vE={exports:{}},Jr={},AE={exports:{}},_E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kk;function v4(){return Kk||(Kk=1,(function(s){function e(ie,ve){var fe=ie.length;ie.push(ve);e:for(;0<fe;){var X=fe-1>>>1,re=ie[X];if(0<r(re,ve))ie[X]=ve,ie[fe]=re,fe=X;else break e}}function t(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var ve=ie[0],fe=ie.pop();if(fe!==ve){ie[0]=fe;e:for(var X=0,re=ie.length,_e=re>>>1;X<_e;){var De=2*(X+1)-1,ke=ie[De],Me=De+1,Ne=ie[Me];if(0>r(ke,fe))Me<re&&0>r(Ne,ke)?(ie[X]=Ne,ie[Me]=fe,X=Me):(ie[X]=ke,ie[De]=fe,X=De);else if(Me<re&&0>r(Ne,fe))ie[X]=Ne,ie[Me]=fe,X=Me;else break e}}return ve}function r(ie,ve){var fe=ie.sortIndex-ve.sortIndex;return fe!==0?fe:ie.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();s.unstable_now=function(){return o.now()-u}}var d=[],h=[],f=1,g=null,w=3,A=!1,F=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ie){for(var ve=t(h);ve!==null;){if(ve.callback===null)n(h);else if(ve.startTime<=ie)n(h),ve.sortIndex=ve.expirationTime,e(d,ve);else break;ve=t(h)}}function V(ie){if(C=!1,N(ie),!F)if(t(d)!==null)F=!0,de(z);else{var ve=t(h);ve!==null&&me(V,ve.startTime-ie)}}function z(ie,ve){F=!1,C&&(C=!1,P(R),R=-1),A=!0;var fe=w;try{for(N(ve),g=t(d);g!==null&&(!(g.expirationTime>ve)||ie&&!$());){var X=g.callback;if(typeof X=="function"){g.callback=null,w=g.priorityLevel;var re=X(g.expirationTime<=ve);ve=s.unstable_now(),typeof re=="function"?g.callback=re:g===t(d)&&n(d),N(ve)}else n(d);g=t(d)}if(g!==null)var _e=!0;else{var De=t(h);De!==null&&me(V,De.startTime-ve),_e=!1}return _e}finally{g=null,w=fe,A=!1}}var W=!1,D=null,R=-1,L=5,U=-1;function $(){return!(s.unstable_now()-U<L)}function G(){if(D!==null){var ie=s.unstable_now();U=ie;var ve=!0;try{ve=D(!0,ie)}finally{ve?j():(W=!1,D=null)}}else W=!1}var j;if(typeof O=="function")j=function(){O(G)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,ce=ye.port2;ye.port1.onmessage=G,j=function(){ce.postMessage(null)}}else j=function(){T(G,0)};function de(ie){D=ie,W||(W=!0,j())}function me(ie,ve){R=T(function(){ie(s.unstable_now())},ve)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ie){ie.callback=null},s.unstable_continueExecution=function(){F||A||(F=!0,de(z))},s.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<ie?Math.floor(1e3/ie):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_getFirstCallbackNode=function(){return t(d)},s.unstable_next=function(ie){switch(w){case 1:case 2:case 3:var ve=3;break;default:ve=w}var fe=w;w=ve;try{return ie()}finally{w=fe}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ie,ve){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var fe=w;w=ie;try{return ve()}finally{w=fe}},s.unstable_scheduleCallback=function(ie,ve,fe){var X=s.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?X+fe:X):fe=X,ie){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=fe+re,ie={id:f++,callback:ve,priorityLevel:ie,startTime:fe,expirationTime:re,sortIndex:-1},fe>X?(ie.sortIndex=fe,e(h,ie),t(d)===null&&ie===t(h)&&(C?(P(R),R=-1):C=!0,me(V,fe-X))):(ie.sortIndex=re,e(d,ie),F||A||(F=!0,de(z))),ie},s.unstable_shouldYield=$,s.unstable_wrapCallback=function(ie){var ve=w;return function(){var fe=w;w=ve;try{return ie.apply(this,arguments)}finally{w=fe}}}})(_E)),_E}var Qk;function A4(){return Qk||(Qk=1,AE.exports=v4()),AE.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xk;function _4(){if(Xk)return Jr;Xk=1;var s=rF(),e=A4();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function i(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(r[a]=l,a=0;a<l.length;a++)n.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function w(a){return d.call(g,a)?!0:d.call(f,a)?!1:h.test(a)?g[a]=!0:(f[a]=!0,!1)}function A(a,l,p,y){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function F(a,l,p,y){if(l===null||typeof l>"u"||A(a,l,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(a,l,p,y,v,x,M){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=v,this.mustUseProperty=p,this.propertyName=a,this.type=l,this.sanitizeURL=x,this.removeEmptyString=M}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){T[a]=new C(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];T[l]=new C(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){T[a]=new C(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){T[a]=new C(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){T[a]=new C(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){T[a]=new C(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){T[a]=new C(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){T[a]=new C(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){T[a]=new C(a,5,!1,a.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function O(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(P,O);T[l]=new C(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(P,O);T[l]=new C(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(P,O);T[l]=new C(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){T[a]=new C(a,1,!1,a.toLowerCase(),null,!1,!1)}),T.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){T[a]=new C(a,1,!1,a.toLowerCase(),null,!0,!0)});function N(a,l,p,y){var v=T.hasOwnProperty(l)?T[l]:null;(v!==null?v.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(F(l,p,v,y)&&(p=null),y||v===null?w(l)&&(p===null?a.removeAttribute(l):a.setAttribute(l,""+p)):v.mustUseProperty?a[v.propertyName]=p===null?v.type===3?!1:"":p:(l=v.attributeName,y=v.attributeNamespace,p===null?a.removeAttribute(l):(v=v.type,p=v===3||v===4&&p===!0?"":""+p,y?a.setAttributeNS(y,l,p):a.setAttribute(l,p))))}var V=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),W=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),$=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ve(a){return a===null||typeof a!="object"?null:(a=ie&&a[ie]||a["@@iterator"],typeof a=="function"?a:null)}var fe=Object.assign,X;function re(a){if(X===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);X=l&&l[1]||""}return`
`+X+a}var _e=!1;function De(a,l){if(!a||_e)return"";_e=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ee){var y=ee}Reflect.construct(a,[],l)}else{try{l.call()}catch(ee){y=ee}a.call(l.prototype)}else{try{throw Error()}catch(ee){y=ee}a()}}catch(ee){if(ee&&y&&typeof ee.stack=="string"){for(var v=ee.stack.split(`
`),x=y.stack.split(`
`),M=v.length-1,H=x.length-1;1<=M&&0<=H&&v[M]!==x[H];)H--;for(;1<=M&&0<=H;M--,H--)if(v[M]!==x[H]){if(M!==1||H!==1)do if(M--,H--,0>H||v[M]!==x[H]){var q=`
`+v[M].replace(" at new "," at ");return a.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",a.displayName)),q}while(1<=M&&0<=H);break}}}finally{_e=!1,Error.prepareStackTrace=p}return(a=a?a.displayName||a.name:"")?re(a):""}function ke(a){switch(a.tag){case 5:return re(a.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return a=De(a.type,!1),a;case 11:return a=De(a.type.render,!1),a;case 1:return a=De(a.type,!0),a;default:return""}}function Me(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case D:return"Fragment";case W:return"Portal";case L:return"Profiler";case R:return"StrictMode";case j:return"Suspense";case ye:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case $:return(a.displayName||"Context")+".Consumer";case U:return(a._context.displayName||"Context")+".Provider";case G:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ce:return l=a.displayName||null,l!==null?l:Me(a.type)||"Memo";case de:l=a._payload,a=a._init;try{return Me(a(l))}catch{}}return null}function Ne(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(l);case 8:return l===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function et(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function dt(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function he(a){var l=dt(a)?"checked":"value",p=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var v=p.get,x=p.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return v.call(this)},set:function(M){y=""+M,x.call(this,M)}}),Object.defineProperty(a,l,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(M){y=""+M},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Ke(a){a._valueTracker||(a._valueTracker=he(a))}function zn(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var p=l.getValue(),y="";return a&&(y=dt(a)?a.checked?"true":"false":a.value),a=y,a!==p?(l.setValue(a),!0):!1}function Nr(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ol(a,l){var p=l.checked;return fe({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??a._wrapperState.initialChecked})}function k0(a,l){var p=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;p=et(l.value!=null?l.value:p),a._wrapperState={initialChecked:y,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function np(a,l){l=l.checked,l!=null&&N(a,"checked",l,!1)}function ju(a,l){np(a,l);var p=et(l.value),y=l.type;if(p!=null)y==="number"?(p===0&&a.value===""||a.value!=p)&&(a.value=""+p):a.value!==""+p&&(a.value=""+p);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?En(a,l.type,p):l.hasOwnProperty("defaultValue")&&En(a,l.type,et(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function c2(a,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,p||l===a.value||(a.value=l),a.defaultValue=l}p=a.name,p!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,p!==""&&(a.name=p)}function En(a,l,p){(l!=="number"||Nr(a.ownerDocument)!==a)&&(p==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+p&&(a.defaultValue=""+p))}var gn=Array.isArray;function Fi(a,l,p,y){if(a=a.options,l){l={};for(var v=0;v<p.length;v++)l["$"+p[v]]=!0;for(p=0;p<a.length;p++)v=l.hasOwnProperty("$"+a[p].value),a[p].selected!==v&&(a[p].selected=v),v&&y&&(a[p].defaultSelected=!0)}else{for(p=""+et(p),l=null,v=0;v<a.length;v++){if(a[v].value===p){a[v].selected=!0,y&&(a[v].defaultSelected=!0);return}l!==null||a[v].disabled||(l=a[v])}l!==null&&(l.selected=!0)}}function u2(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return fe({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function d2(a,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(t(92));if(gn(p)){if(1<p.length)throw Error(t(93));p=p[0]}l=p}l==null&&(l=""),p=l}a._wrapperState={initialValue:et(p)}}function I0(a,l){var p=et(l.value),y=et(l.defaultValue);p!=null&&(p=""+p,p!==a.value&&(a.value=p),l.defaultValue==null&&a.defaultValue!==p&&(a.defaultValue=p)),y!=null&&(a.defaultValue=""+y)}function Bl(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function h2(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rp(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?h2(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Vl,P0=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,y,v){MSApp.execUnsafeLocalFunction(function(){return a(l,p,y,v)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Vl=Vl||document.createElement("div"),Vl.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Vl.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function $u(a,l){if(l){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=l;return}}a.textContent=l}var Ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R0=["Webkit","ms","Moz","O"];Object.keys(Ul).forEach(function(a){R0.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Ul[l]=Ul[a]})});function jl(a,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Ul.hasOwnProperty(a)&&Ul[a]?(""+l).trim():l+"px"}function sp(a,l){a=a.style;for(var p in l)if(l.hasOwnProperty(p)){var y=p.indexOf("--")===0,v=jl(p,l[p],y);p==="float"&&(p="cssFloat"),y?a.setProperty(p,v):a[p]=v}}var p2=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Si(a,l){if(l){if(p2[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function ip(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $l=null;function ap(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var fo=null,mo=null,an=null;function f2(a){if(a=j2(a)){if(typeof fo!="function")throw Error(t(280));var l=a.stateNode;l&&(l=iv(l),fo(a.stateNode,a.type,l))}}function zl(a){mo?an?an.push(a):an=[a]:mo=a}function Hl(){if(mo){var a=mo,l=an;if(an=mo=null,f2(a),l)for(a=0;a<l.length;a++)f2(l[a])}}function D0(a,l){return a(l)}function N0(){}var ia=!1;function M0(a,l,p){if(ia)return a(l,p);ia=!0;try{return D0(a,l,p)}finally{ia=!1,(mo!==null||an!==null)&&(N0(),Hl())}}function zu(a,l){var p=a.stateNode;if(p===null)return null;var y=iv(p);if(y===null)return null;p=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(t(231,l,typeof p));return p}var Wl=!1;if(u)try{var Gl={};Object.defineProperty(Gl,"passive",{get:function(){Wl=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Wl=!1}function L0(a,l,p,y,v,x,M,H,q){var ee=Array.prototype.slice.call(arguments,3);try{l.apply(p,ee)}catch(le){this.onError(le)}}var go=!1,aa=null,op=!1,Xs=null,O0={onError:function(a){go=!0,aa=a}};function B0(a,l,p,y,v,x,M,H,q){go=!1,aa=null,L0.apply(O0,arguments)}function m2(a,l,p,y,v,x,M,H,q){if(B0.apply(this,arguments),go){if(go){var ee=aa;go=!1,aa=null}else throw Error(t(198));op||(op=!0,Xs=ee)}}function Ti(a){var l=a,p=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(p=l.return),a=l.return;while(a)}return l.tag===3?p:null}function g2(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function V0(a){if(Ti(a)!==a)throw Error(t(188))}function U0(a){var l=a.alternate;if(!l){if(l=Ti(a),l===null)throw Error(t(188));return l!==a?null:a}for(var p=a,y=l;;){var v=p.return;if(v===null)break;var x=v.alternate;if(x===null){if(y=v.return,y!==null){p=y;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===p)return V0(v),a;if(x===y)return V0(v),l;x=x.sibling}throw Error(t(188))}if(p.return!==y.return)p=v,y=x;else{for(var M=!1,H=v.child;H;){if(H===p){M=!0,p=v,y=x;break}if(H===y){M=!0,y=v,p=x;break}H=H.sibling}if(!M){for(H=x.child;H;){if(H===p){M=!0,p=x,y=v;break}if(H===y){M=!0,y=x,p=v;break}H=H.sibling}if(!M)throw Error(t(189))}}if(p.alternate!==y)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?a:l}function j0(a){return a=U0(a),a!==null?Hu(a):null}function Hu(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Hu(a);if(l!==null)return l;a=a.sibling}return null}var y2=e.unstable_scheduleCallback,lp=e.unstable_cancelCallback,Wu=e.unstable_shouldYield,yo=e.unstable_requestPaint,jt=e.unstable_now,q1=e.unstable_getCurrentPriorityLevel,cp=e.unstable_ImmediatePriority,w2=e.unstable_UserBlockingPriority,Gu=e.unstable_NormalPriority,v2=e.unstable_LowPriority,up=e.unstable_IdlePriority,qu=null,hs=null;function $0(a){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(qu,a,void 0,(a.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:Ku,oa=Math.log,Ys=Math.LN2;function Ku(a){return a>>>=0,a===0?32:31-(oa(a)/Ys|0)|0}var la=64,ql=4194304;function yt(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function wo(a,l){var p=a.pendingLanes;if(p===0)return 0;var y=0,v=a.suspendedLanes,x=a.pingedLanes,M=p&268435455;if(M!==0){var H=M&~v;H!==0?y=yt(H):(x&=M,x!==0&&(y=yt(x)))}else M=p&~v,M!==0?y=yt(M):x!==0&&(y=yt(x));if(y===0)return 0;if(l!==0&&l!==y&&(l&v)===0&&(v=y&-y,x=l&-l,v>=x||v===16&&(x&4194240)!==0))return l;if((y&4)!==0&&(y|=p&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=y;0<l;)p=31-ps(l),v=1<<p,y|=a[p],l&=~v;return y}function Qu(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xu(a,l){for(var p=a.suspendedLanes,y=a.pingedLanes,v=a.expirationTimes,x=a.pendingLanes;0<x;){var M=31-ps(x),H=1<<M,q=v[M];q===-1?((H&p)===0||(H&y)!==0)&&(v[M]=Qu(H,l)):q<=l&&(a.expiredLanes|=H),x&=~H}}function A2(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function _2(){var a=la;return la<<=1,(la&4194240)===0&&(la=64),a}function x2(a){for(var l=[],p=0;31>p;p++)l.push(a);return l}function Yu(a,l,p){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-ps(l),a[l]=p}function K1(a,l){var p=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<p;){var v=31-ps(p),x=1<<v;l[v]=0,y[v]=-1,a[v]=-1,p&=~x}}function E2(a,l){var p=a.entangledLanes|=l;for(a=a.entanglements;p;){var y=31-ps(p),v=1<<y;v&l|a[y]&l&&(a[y]|=l),p&=~v}}var ot=0;function ca(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var b2,dp,C2,F2,S2,ua=!1,hp=[],da=null,ha=null,tr=null,Ju=new Map,vo=new Map,fs=[],z0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kl(a,l){switch(a){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Ju.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(l.pointerId)}}function ki(a,l,p,y,v,x){return a===null||a.nativeEvent!==x?(a={blockedOn:l,domEventName:p,eventSystemFlags:y,nativeEvent:x,targetContainers:[v]},l!==null&&(l=j2(l),l!==null&&dp(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),a)}function H0(a,l,p,y,v){switch(l){case"focusin":return da=ki(da,a,l,p,y,v),!0;case"dragenter":return ha=ki(ha,a,l,p,y,v),!0;case"mouseover":return tr=ki(tr,a,l,p,y,v),!0;case"pointerover":var x=v.pointerId;return Ju.set(x,ki(Ju.get(x)||null,a,l,p,y,v)),!0;case"gotpointercapture":return x=v.pointerId,vo.set(x,ki(vo.get(x)||null,a,l,p,y,v)),!0}return!1}function pp(a){var l=nd(a.target);if(l!==null){var p=Ti(l);if(p!==null){if(l=p.tag,l===13){if(l=g2(p),l!==null){a.blockedOn=l,S2(a.priority,function(){C2(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Dt(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var p=fp(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(p===null){p=a.nativeEvent;var y=new p.constructor(p.type,p);$l=y,p.target.dispatchEvent(y),$l=null}else return l=j2(p),l!==null&&dp(l),a.blockedOn=p,!1;l.shift()}return!0}function W0(a,l,p){Dt(a)&&p.delete(l)}function Q1(){ua=!1,da!==null&&Dt(da)&&(da=null),ha!==null&&Dt(ha)&&(ha=null),tr!==null&&Dt(tr)&&(tr=null),Ju.forEach(W0),vo.forEach(W0)}function Ql(a,l){a.blockedOn===l&&(a.blockedOn=null,ua||(ua=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Q1)))}function Xl(a){function l(v){return Ql(v,a)}if(0<hp.length){Ql(hp[0],a);for(var p=1;p<hp.length;p++){var y=hp[p];y.blockedOn===a&&(y.blockedOn=null)}}for(da!==null&&Ql(da,a),ha!==null&&Ql(ha,a),tr!==null&&Ql(tr,a),Ju.forEach(l),vo.forEach(l),p=0;p<fs.length;p++)y=fs[p],y.blockedOn===a&&(y.blockedOn=null);for(;0<fs.length&&(p=fs[0],p.blockedOn===null);)pp(p),p.blockedOn===null&&fs.shift()}var Ao=V.ReactCurrentBatchConfig,_o=!0;function pa(a,l,p,y){var v=ot,x=Ao.transition;Ao.transition=null;try{ot=1,T2(a,l,p,y)}finally{ot=v,Ao.transition=x}}function G0(a,l,p,y){var v=ot,x=Ao.transition;Ao.transition=null;try{ot=4,T2(a,l,p,y)}finally{ot=v,Ao.transition=x}}function T2(a,l,p,y){if(_o){var v=fp(a,l,p,y);if(v===null)ax(a,l,y,fa,p),Kl(a,y);else if(H0(v,a,l,p,y))y.stopPropagation();else if(Kl(a,y),l&4&&-1<z0.indexOf(a)){for(;v!==null;){var x=j2(v);if(x!==null&&b2(x),x=fp(a,l,p,y),x===null&&ax(a,l,y,fa,p),x===v)break;v=x}v!==null&&y.stopPropagation()}else ax(a,l,y,null,p)}}var fa=null;function fp(a,l,p,y){if(fa=null,a=ap(y),a=nd(a),a!==null)if(l=Ti(a),l===null)a=null;else if(p=l.tag,p===13){if(a=g2(l),a!==null)return a;a=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return fa=a,null}function mp(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(q1()){case cp:return 1;case w2:return 4;case Gu:case v2:return 16;case up:return 536870912;default:return 16}default:return 16}}var ms=null,gp=null,xo=null;function q0(){if(xo)return xo;var a,l=gp,p=l.length,y,v="value"in ms?ms.value:ms.textContent,x=v.length;for(a=0;a<p&&l[a]===v[a];a++);var M=p-a;for(y=1;y<=M&&l[p-y]===v[x-y];y++);return xo=v.slice(a,1<y?1-y:void 0)}function Zu(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function ma(){return!0}function k2(){return!1}function wr(a){function l(p,y,v,x,M){this._reactName=p,this._targetInst=v,this.type=y,this.nativeEvent=x,this.target=M,this.currentTarget=null;for(var H in a)a.hasOwnProperty(H)&&(p=a[H],this[H]=p?p(x):x[H]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ma:k2,this.isPropagationStopped=k2,this}return fe(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=ma)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=ma)},persist:function(){},isPersistent:ma}),l}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ed=wr(ga),Yl=fe({},ga,{view:0,detail:0}),yp=wr(Yl),wp,vp,gs,td=fe({},Yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qe,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==gs&&(gs&&a.type==="mousemove"?(wp=a.screenX-gs.screenX,vp=a.screenY-gs.screenY):vp=wp=0,gs=a),wp)},movementY:function(a){return"movementY"in a?a.movementY:vp}}),I2=wr(td),K0=fe({},td,{dataTransfer:0}),Q0=wr(K0),Ap=fe({},Yl,{relatedTarget:0}),nr=wr(Ap),X0=fe({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),Y0=wr(X0),Jl=fe({},ga,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),m=wr(Jl),b=fe({},ga,{data:0}),k=wr(b),B={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},te={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=te[a])?!!l[a]:!1}function qe(){return ge}var yn=fe({},Yl,{key:function(a){if(a.key){var l=B[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Zu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?J[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qe,charCode:function(a){return a.type==="keypress"?Zu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Zu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Et=wr(yn),bn=fe({},td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ys=wr(bn),Eo=fe({},Yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qe}),ya=wr(Eo),wa=fe({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),_p=wr(wa),P2=fe({},td,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),oO=wr(P2),lO=[9,13,27,32],X1=u&&"CompositionEvent"in window,R2=null;u&&"documentMode"in document&&(R2=document.documentMode);var cO=u&&"TextEvent"in window&&!R2,MS=u&&(!X1||R2&&8<R2&&11>=R2),LS=" ",OS=!1;function BS(a,l){switch(a){case"keyup":return lO.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VS(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var xp=!1;function uO(a,l){switch(a){case"compositionend":return VS(l);case"keypress":return l.which!==32?null:(OS=!0,LS);case"textInput":return a=l.data,a===LS&&OS?null:a;default:return null}}function dO(a,l){if(xp)return a==="compositionend"||!X1&&BS(a,l)?(a=q0(),xo=gp=ms=null,xp=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return MS&&l.locale!=="ko"?null:l.data;default:return null}}var hO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function US(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!hO[a.type]:l==="textarea"}function jS(a,l,p,y){zl(y),l=nv(l,"onChange"),0<l.length&&(p=new ed("onChange","change",null,p,y),a.push({event:p,listeners:l}))}var D2=null,N2=null;function pO(a){iT(a,0)}function J0(a){var l=Sp(a);if(zn(l))return a}function fO(a,l){if(a==="change")return l}var $S=!1;if(u){var Y1;if(u){var J1="oninput"in document;if(!J1){var zS=document.createElement("div");zS.setAttribute("oninput","return;"),J1=typeof zS.oninput=="function"}Y1=J1}else Y1=!1;$S=Y1&&(!document.documentMode||9<document.documentMode)}function HS(){D2&&(D2.detachEvent("onpropertychange",WS),N2=D2=null)}function WS(a){if(a.propertyName==="value"&&J0(N2)){var l=[];jS(l,N2,a,ap(a)),M0(pO,l)}}function mO(a,l,p){a==="focusin"?(HS(),D2=l,N2=p,D2.attachEvent("onpropertychange",WS)):a==="focusout"&&HS()}function gO(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return J0(N2)}function yO(a,l){if(a==="click")return J0(l)}function wO(a,l){if(a==="input"||a==="change")return J0(l)}function vO(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Ii=typeof Object.is=="function"?Object.is:vO;function M2(a,l){if(Ii(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var p=Object.keys(a),y=Object.keys(l);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var v=p[y];if(!d.call(l,v)||!Ii(a[v],l[v]))return!1}return!0}function GS(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function qS(a,l){var p=GS(a);a=0;for(var y;p;){if(p.nodeType===3){if(y=a+p.textContent.length,a<=l&&y>=l)return{node:p,offset:l-a};a=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=GS(p)}}function KS(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?KS(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function QS(){for(var a=window,l=Nr();l instanceof a.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)a=l.contentWindow;else break;l=Nr(a.document)}return l}function Z1(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function AO(a){var l=QS(),p=a.focusedElem,y=a.selectionRange;if(l!==p&&p&&p.ownerDocument&&KS(p.ownerDocument.documentElement,p)){if(y!==null&&Z1(p)){if(l=y.start,a=y.end,a===void 0&&(a=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(a,p.value.length);else if(a=(l=p.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var v=p.textContent.length,x=Math.min(y.start,v);y=y.end===void 0?x:Math.min(y.end,v),!a.extend&&x>y&&(v=y,y=x,x=v),v=qS(p,x);var M=qS(p,y);v&&M&&(a.rangeCount!==1||a.anchorNode!==v.node||a.anchorOffset!==v.offset||a.focusNode!==M.node||a.focusOffset!==M.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),a.removeAllRanges(),x>y?(a.addRange(l),a.extend(M.node,M.offset)):(l.setEnd(M.node,M.offset),a.addRange(l)))}}for(l=[],a=p;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)a=l[p],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var _O=u&&"documentMode"in document&&11>=document.documentMode,Ep=null,ex=null,L2=null,tx=!1;function XS(a,l,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;tx||Ep==null||Ep!==Nr(y)||(y=Ep,"selectionStart"in y&&Z1(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),L2&&M2(L2,y)||(L2=y,y=nv(ex,"onSelect"),0<y.length&&(l=new ed("onSelect","select",null,l,p),a.push({event:l,listeners:y}),l.target=Ep)))}function Z0(a,l){var p={};return p[a.toLowerCase()]=l.toLowerCase(),p["Webkit"+a]="webkit"+l,p["Moz"+a]="moz"+l,p}var bp={animationend:Z0("Animation","AnimationEnd"),animationiteration:Z0("Animation","AnimationIteration"),animationstart:Z0("Animation","AnimationStart"),transitionend:Z0("Transition","TransitionEnd")},nx={},YS={};u&&(YS=document.createElement("div").style,"AnimationEvent"in window||(delete bp.animationend.animation,delete bp.animationiteration.animation,delete bp.animationstart.animation),"TransitionEvent"in window||delete bp.transitionend.transition);function ev(a){if(nx[a])return nx[a];if(!bp[a])return a;var l=bp[a],p;for(p in l)if(l.hasOwnProperty(p)&&p in YS)return nx[a]=l[p];return a}var JS=ev("animationend"),ZS=ev("animationiteration"),eT=ev("animationstart"),tT=ev("transitionend"),nT=new Map,rT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zl(a,l){nT.set(a,l),i(l,[a])}for(var rx=0;rx<rT.length;rx++){var sx=rT[rx],xO=sx.toLowerCase(),EO=sx[0].toUpperCase()+sx.slice(1);Zl(xO,"on"+EO)}Zl(JS,"onAnimationEnd"),Zl(ZS,"onAnimationIteration"),Zl(eT,"onAnimationStart"),Zl("dblclick","onDoubleClick"),Zl("focusin","onFocus"),Zl("focusout","onBlur"),Zl(tT,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var O2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bO=new Set("cancel close invalid load scroll toggle".split(" ").concat(O2));function sT(a,l,p){var y=a.type||"unknown-event";a.currentTarget=p,m2(y,l,void 0,a),a.currentTarget=null}function iT(a,l){l=(l&4)!==0;for(var p=0;p<a.length;p++){var y=a[p],v=y.event;y=y.listeners;e:{var x=void 0;if(l)for(var M=y.length-1;0<=M;M--){var H=y[M],q=H.instance,ee=H.currentTarget;if(H=H.listener,q!==x&&v.isPropagationStopped())break e;sT(v,H,ee),x=q}else for(M=0;M<y.length;M++){if(H=y[M],q=H.instance,ee=H.currentTarget,H=H.listener,q!==x&&v.isPropagationStopped())break e;sT(v,H,ee),x=q}}}if(op)throw a=Xs,op=!1,Xs=null,a}function $t(a,l){var p=l[hx];p===void 0&&(p=l[hx]=new Set);var y=a+"__bubble";p.has(y)||(aT(l,a,2,!1),p.add(y))}function ix(a,l,p){var y=0;l&&(y|=4),aT(p,a,y,l)}var tv="_reactListening"+Math.random().toString(36).slice(2);function B2(a){if(!a[tv]){a[tv]=!0,n.forEach(function(p){p!=="selectionchange"&&(bO.has(p)||ix(p,!1,a),ix(p,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[tv]||(l[tv]=!0,ix("selectionchange",!1,l))}}function aT(a,l,p,y){switch(mp(l)){case 1:var v=pa;break;case 4:v=G0;break;default:v=T2}p=v.bind(null,l,p,a),v=void 0,!Wl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),y?v!==void 0?a.addEventListener(l,p,{capture:!0,passive:v}):a.addEventListener(l,p,!0):v!==void 0?a.addEventListener(l,p,{passive:v}):a.addEventListener(l,p,!1)}function ax(a,l,p,y,v){var x=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var M=y.tag;if(M===3||M===4){var H=y.stateNode.containerInfo;if(H===v||H.nodeType===8&&H.parentNode===v)break;if(M===4)for(M=y.return;M!==null;){var q=M.tag;if((q===3||q===4)&&(q=M.stateNode.containerInfo,q===v||q.nodeType===8&&q.parentNode===v))return;M=M.return}for(;H!==null;){if(M=nd(H),M===null)return;if(q=M.tag,q===5||q===6){y=x=M;continue e}H=H.parentNode}}y=y.return}M0(function(){var ee=x,le=ap(p),ue=[];e:{var oe=nT.get(a);if(oe!==void 0){var Ee=ed,Te=a;switch(a){case"keypress":if(Zu(p)===0)break e;case"keydown":case"keyup":Ee=Et;break;case"focusin":Te="focus",Ee=nr;break;case"focusout":Te="blur",Ee=nr;break;case"beforeblur":case"afterblur":Ee=nr;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=I2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=Q0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=ya;break;case JS:case ZS:case eT:Ee=Y0;break;case tT:Ee=_p;break;case"scroll":Ee=yp;break;case"wheel":Ee=oO;break;case"copy":case"cut":case"paste":Ee=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=ys}var Ie=(l&4)!==0,wn=!Ie&&a==="scroll",Y=Ie?oe!==null?oe+"Capture":null:oe;Ie=[];for(var Q=ee,Z;Q!==null;){Z=Q;var pe=Z.stateNode;if(Z.tag===5&&pe!==null&&(Z=pe,Y!==null&&(pe=zu(Q,Y),pe!=null&&Ie.push(V2(Q,pe,Z)))),wn)break;Q=Q.return}0<Ie.length&&(oe=new Ee(oe,Te,null,p,le),ue.push({event:oe,listeners:Ie}))}}if((l&7)===0){e:{if(oe=a==="mouseover"||a==="pointerover",Ee=a==="mouseout"||a==="pointerout",oe&&p!==$l&&(Te=p.relatedTarget||p.fromElement)&&(nd(Te)||Te[bo]))break e;if((Ee||oe)&&(oe=le.window===le?le:(oe=le.ownerDocument)?oe.defaultView||oe.parentWindow:window,Ee?(Te=p.relatedTarget||p.toElement,Ee=ee,Te=Te?nd(Te):null,Te!==null&&(wn=Ti(Te),Te!==wn||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(Ee=null,Te=ee),Ee!==Te)){if(Ie=I2,pe="onMouseLeave",Y="onMouseEnter",Q="mouse",(a==="pointerout"||a==="pointerover")&&(Ie=ys,pe="onPointerLeave",Y="onPointerEnter",Q="pointer"),wn=Ee==null?oe:Sp(Ee),Z=Te==null?oe:Sp(Te),oe=new Ie(pe,Q+"leave",Ee,p,le),oe.target=wn,oe.relatedTarget=Z,pe=null,nd(le)===ee&&(Ie=new Ie(Y,Q+"enter",Te,p,le),Ie.target=Z,Ie.relatedTarget=wn,pe=Ie),wn=pe,Ee&&Te)t:{for(Ie=Ee,Y=Te,Q=0,Z=Ie;Z;Z=Cp(Z))Q++;for(Z=0,pe=Y;pe;pe=Cp(pe))Z++;for(;0<Q-Z;)Ie=Cp(Ie),Q--;for(;0<Z-Q;)Y=Cp(Y),Z--;for(;Q--;){if(Ie===Y||Y!==null&&Ie===Y.alternate)break t;Ie=Cp(Ie),Y=Cp(Y)}Ie=null}else Ie=null;Ee!==null&&oT(ue,oe,Ee,Ie,!1),Te!==null&&wn!==null&&oT(ue,wn,Te,Ie,!0)}}e:{if(oe=ee?Sp(ee):window,Ee=oe.nodeName&&oe.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&oe.type==="file")var Re=fO;else if(US(oe))if($S)Re=wO;else{Re=gO;var Oe=mO}else(Ee=oe.nodeName)&&Ee.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Re=yO);if(Re&&(Re=Re(a,ee))){jS(ue,Re,p,le);break e}Oe&&Oe(a,oe,ee),a==="focusout"&&(Oe=oe._wrapperState)&&Oe.controlled&&oe.type==="number"&&En(oe,"number",oe.value)}switch(Oe=ee?Sp(ee):window,a){case"focusin":(US(Oe)||Oe.contentEditable==="true")&&(Ep=Oe,ex=ee,L2=null);break;case"focusout":L2=ex=Ep=null;break;case"mousedown":tx=!0;break;case"contextmenu":case"mouseup":case"dragend":tx=!1,XS(ue,p,le);break;case"selectionchange":if(_O)break;case"keydown":case"keyup":XS(ue,p,le)}var Be;if(X1)e:{switch(a){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else xp?BS(a,p)&&($e="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&($e="onCompositionStart");$e&&(MS&&p.locale!=="ko"&&(xp||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&xp&&(Be=q0()):(ms=le,gp="value"in ms?ms.value:ms.textContent,xp=!0)),Oe=nv(ee,$e),0<Oe.length&&($e=new k($e,a,null,p,le),ue.push({event:$e,listeners:Oe}),Be?$e.data=Be:(Be=VS(p),Be!==null&&($e.data=Be)))),(Be=cO?uO(a,p):dO(a,p))&&(ee=nv(ee,"onBeforeInput"),0<ee.length&&(le=new k("onBeforeInput","beforeinput",null,p,le),ue.push({event:le,listeners:ee}),le.data=Be))}iT(ue,l)})}function V2(a,l,p){return{instance:a,listener:l,currentTarget:p}}function nv(a,l){for(var p=l+"Capture",y=[];a!==null;){var v=a,x=v.stateNode;v.tag===5&&x!==null&&(v=x,x=zu(a,p),x!=null&&y.unshift(V2(a,x,v)),x=zu(a,l),x!=null&&y.push(V2(a,x,v))),a=a.return}return y}function Cp(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function oT(a,l,p,y,v){for(var x=l._reactName,M=[];p!==null&&p!==y;){var H=p,q=H.alternate,ee=H.stateNode;if(q!==null&&q===y)break;H.tag===5&&ee!==null&&(H=ee,v?(q=zu(p,x),q!=null&&M.unshift(V2(p,q,H))):v||(q=zu(p,x),q!=null&&M.push(V2(p,q,H)))),p=p.return}M.length!==0&&a.push({event:l,listeners:M})}var CO=/\r\n?/g,FO=/\u0000|\uFFFD/g;function lT(a){return(typeof a=="string"?a:""+a).replace(CO,`
`).replace(FO,"")}function rv(a,l,p){if(l=lT(l),lT(a)!==l&&p)throw Error(t(425))}function sv(){}var ox=null,lx=null;function cx(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ux=typeof setTimeout=="function"?setTimeout:void 0,SO=typeof clearTimeout=="function"?clearTimeout:void 0,cT=typeof Promise=="function"?Promise:void 0,TO=typeof queueMicrotask=="function"?queueMicrotask:typeof cT<"u"?function(a){return cT.resolve(null).then(a).catch(kO)}:ux;function kO(a){setTimeout(function(){throw a})}function dx(a,l){var p=l,y=0;do{var v=p.nextSibling;if(a.removeChild(p),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(y===0){a.removeChild(v),Xl(l);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=v}while(p);Xl(l)}function ec(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function uT(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return a;l--}else p==="/$"&&l++}a=a.previousSibling}return null}var Fp=Math.random().toString(36).slice(2),va="__reactFiber$"+Fp,U2="__reactProps$"+Fp,bo="__reactContainer$"+Fp,hx="__reactEvents$"+Fp,IO="__reactListeners$"+Fp,PO="__reactHandles$"+Fp;function nd(a){var l=a[va];if(l)return l;for(var p=a.parentNode;p;){if(l=p[bo]||p[va]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(a=uT(a);a!==null;){if(p=a[va])return p;a=uT(a)}return l}a=p,p=a.parentNode}return null}function j2(a){return a=a[va]||a[bo],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Sp(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function iv(a){return a[U2]||null}var px=[],Tp=-1;function tc(a){return{current:a}}function zt(a){0>Tp||(a.current=px[Tp],px[Tp]=null,Tp--)}function Lt(a,l){Tp++,px[Tp]=a.current,a.current=l}var nc={},vr=tc(nc),qr=tc(!1),rd=nc;function kp(a,l){var p=a.type.contextTypes;if(!p)return nc;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var v={},x;for(x in p)v[x]=l[x];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=v),v}function Kr(a){return a=a.childContextTypes,a!=null}function av(){zt(qr),zt(vr)}function dT(a,l,p){if(vr.current!==nc)throw Error(t(168));Lt(vr,l),Lt(qr,p)}function hT(a,l,p){var y=a.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var v in y)if(!(v in l))throw Error(t(108,Ne(a)||"Unknown",v));return fe({},p,y)}function ov(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||nc,rd=vr.current,Lt(vr,a),Lt(qr,qr.current),!0}function pT(a,l,p){var y=a.stateNode;if(!y)throw Error(t(169));p?(a=hT(a,l,rd),y.__reactInternalMemoizedMergedChildContext=a,zt(qr),zt(vr),Lt(vr,a)):zt(qr),Lt(qr,p)}var Co=null,lv=!1,fx=!1;function fT(a){Co===null?Co=[a]:Co.push(a)}function RO(a){lv=!0,fT(a)}function rc(){if(!fx&&Co!==null){fx=!0;var a=0,l=ot;try{var p=Co;for(ot=1;a<p.length;a++){var y=p[a];do y=y(!0);while(y!==null)}Co=null,lv=!1}catch(v){throw Co!==null&&(Co=Co.slice(a+1)),y2(cp,rc),v}finally{ot=l,fx=!1}}return null}var Ip=[],Pp=0,cv=null,uv=0,Js=[],Zs=0,sd=null,Fo=1,So="";function id(a,l){Ip[Pp++]=uv,Ip[Pp++]=cv,cv=a,uv=l}function mT(a,l,p){Js[Zs++]=Fo,Js[Zs++]=So,Js[Zs++]=sd,sd=a;var y=Fo;a=So;var v=32-ps(y)-1;y&=~(1<<v),p+=1;var x=32-ps(l)+v;if(30<x){var M=v-v%5;x=(y&(1<<M)-1).toString(32),y>>=M,v-=M,Fo=1<<32-ps(l)+v|p<<v|y,So=x+a}else Fo=1<<x|p<<v|y,So=a}function mx(a){a.return!==null&&(id(a,1),mT(a,1,0))}function gx(a){for(;a===cv;)cv=Ip[--Pp],Ip[Pp]=null,uv=Ip[--Pp],Ip[Pp]=null;for(;a===sd;)sd=Js[--Zs],Js[Zs]=null,So=Js[--Zs],Js[Zs]=null,Fo=Js[--Zs],Js[Zs]=null}var ws=null,vs=null,Gt=!1,Pi=null;function gT(a,l){var p=ri(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=a,l=a.deletions,l===null?(a.deletions=[p],a.flags|=16):l.push(p)}function yT(a,l){switch(a.tag){case 5:var p=a.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,ws=a,vs=ec(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,ws=a,vs=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=sd!==null?{id:Fo,overflow:So}:null,a.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=ri(18,null,null,0),p.stateNode=l,p.return=a,a.child=p,ws=a,vs=null,!0):!1;default:return!1}}function yx(a){return(a.mode&1)!==0&&(a.flags&128)===0}function wx(a){if(Gt){var l=vs;if(l){var p=l;if(!yT(a,l)){if(yx(a))throw Error(t(418));l=ec(p.nextSibling);var y=ws;l&&yT(a,l)?gT(y,p):(a.flags=a.flags&-4097|2,Gt=!1,ws=a)}}else{if(yx(a))throw Error(t(418));a.flags=a.flags&-4097|2,Gt=!1,ws=a}}}function wT(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;ws=a}function dv(a){if(a!==ws)return!1;if(!Gt)return wT(a),Gt=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!cx(a.type,a.memoizedProps)),l&&(l=vs)){if(yx(a))throw vT(),Error(t(418));for(;l;)gT(a,l),l=ec(l.nextSibling)}if(wT(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"){if(l===0){vs=ec(a.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}a=a.nextSibling}vs=null}}else vs=ws?ec(a.stateNode.nextSibling):null;return!0}function vT(){for(var a=vs;a;)a=ec(a.nextSibling)}function Rp(){vs=ws=null,Gt=!1}function vx(a){Pi===null?Pi=[a]:Pi.push(a)}var DO=V.ReactCurrentBatchConfig;function $2(a,l,p){if(a=p.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,a));var v=y,x=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===x?l.ref:(l=function(M){var H=v.refs;M===null?delete H[x]:H[x]=M},l._stringRef=x,l)}if(typeof a!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,a))}return a}function hv(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function AT(a){var l=a._init;return l(a._payload)}function _T(a){function l(Y,Q){if(a){var Z=Y.deletions;Z===null?(Y.deletions=[Q],Y.flags|=16):Z.push(Q)}}function p(Y,Q){if(!a)return null;for(;Q!==null;)l(Y,Q),Q=Q.sibling;return null}function y(Y,Q){for(Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function v(Y,Q){return Y=dc(Y,Q),Y.index=0,Y.sibling=null,Y}function x(Y,Q,Z){return Y.index=Z,a?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<Q?(Y.flags|=2,Q):Z):(Y.flags|=2,Q)):(Y.flags|=1048576,Q)}function M(Y){return a&&Y.alternate===null&&(Y.flags|=2),Y}function H(Y,Q,Z,pe){return Q===null||Q.tag!==6?(Q=uE(Z,Y.mode,pe),Q.return=Y,Q):(Q=v(Q,Z),Q.return=Y,Q)}function q(Y,Q,Z,pe){var Re=Z.type;return Re===D?le(Y,Q,Z.props.children,pe,Z.key):Q!==null&&(Q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===de&&AT(Re)===Q.type)?(pe=v(Q,Z.props),pe.ref=$2(Y,Q,Z),pe.return=Y,pe):(pe=Lv(Z.type,Z.key,Z.props,null,Y.mode,pe),pe.ref=$2(Y,Q,Z),pe.return=Y,pe)}function ee(Y,Q,Z,pe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==Z.containerInfo||Q.stateNode.implementation!==Z.implementation?(Q=dE(Z,Y.mode,pe),Q.return=Y,Q):(Q=v(Q,Z.children||[]),Q.return=Y,Q)}function le(Y,Q,Z,pe,Re){return Q===null||Q.tag!==7?(Q=pd(Z,Y.mode,pe,Re),Q.return=Y,Q):(Q=v(Q,Z),Q.return=Y,Q)}function ue(Y,Q,Z){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=uE(""+Q,Y.mode,Z),Q.return=Y,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case z:return Z=Lv(Q.type,Q.key,Q.props,null,Y.mode,Z),Z.ref=$2(Y,null,Q),Z.return=Y,Z;case W:return Q=dE(Q,Y.mode,Z),Q.return=Y,Q;case de:var pe=Q._init;return ue(Y,pe(Q._payload),Z)}if(gn(Q)||ve(Q))return Q=pd(Q,Y.mode,Z,null),Q.return=Y,Q;hv(Y,Q)}return null}function oe(Y,Q,Z,pe){var Re=Q!==null?Q.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Re!==null?null:H(Y,Q,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case z:return Z.key===Re?q(Y,Q,Z,pe):null;case W:return Z.key===Re?ee(Y,Q,Z,pe):null;case de:return Re=Z._init,oe(Y,Q,Re(Z._payload),pe)}if(gn(Z)||ve(Z))return Re!==null?null:le(Y,Q,Z,pe,null);hv(Y,Z)}return null}function Ee(Y,Q,Z,pe,Re){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Y=Y.get(Z)||null,H(Q,Y,""+pe,Re);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case z:return Y=Y.get(pe.key===null?Z:pe.key)||null,q(Q,Y,pe,Re);case W:return Y=Y.get(pe.key===null?Z:pe.key)||null,ee(Q,Y,pe,Re);case de:var Oe=pe._init;return Ee(Y,Q,Z,Oe(pe._payload),Re)}if(gn(pe)||ve(pe))return Y=Y.get(Z)||null,le(Q,Y,pe,Re,null);hv(Q,pe)}return null}function Te(Y,Q,Z,pe){for(var Re=null,Oe=null,Be=Q,$e=Q=0,Gn=null;Be!==null&&$e<Z.length;$e++){Be.index>$e?(Gn=Be,Be=null):Gn=Be.sibling;var gt=oe(Y,Be,Z[$e],pe);if(gt===null){Be===null&&(Be=Gn);break}a&&Be&&gt.alternate===null&&l(Y,Be),Q=x(gt,Q,$e),Oe===null?Re=gt:Oe.sibling=gt,Oe=gt,Be=Gn}if($e===Z.length)return p(Y,Be),Gt&&id(Y,$e),Re;if(Be===null){for(;$e<Z.length;$e++)Be=ue(Y,Z[$e],pe),Be!==null&&(Q=x(Be,Q,$e),Oe===null?Re=Be:Oe.sibling=Be,Oe=Be);return Gt&&id(Y,$e),Re}for(Be=y(Y,Be);$e<Z.length;$e++)Gn=Ee(Be,Y,$e,Z[$e],pe),Gn!==null&&(a&&Gn.alternate!==null&&Be.delete(Gn.key===null?$e:Gn.key),Q=x(Gn,Q,$e),Oe===null?Re=Gn:Oe.sibling=Gn,Oe=Gn);return a&&Be.forEach(function(hc){return l(Y,hc)}),Gt&&id(Y,$e),Re}function Ie(Y,Q,Z,pe){var Re=ve(Z);if(typeof Re!="function")throw Error(t(150));if(Z=Re.call(Z),Z==null)throw Error(t(151));for(var Oe=Re=null,Be=Q,$e=Q=0,Gn=null,gt=Z.next();Be!==null&&!gt.done;$e++,gt=Z.next()){Be.index>$e?(Gn=Be,Be=null):Gn=Be.sibling;var hc=oe(Y,Be,gt.value,pe);if(hc===null){Be===null&&(Be=Gn);break}a&&Be&&hc.alternate===null&&l(Y,Be),Q=x(hc,Q,$e),Oe===null?Re=hc:Oe.sibling=hc,Oe=hc,Be=Gn}if(gt.done)return p(Y,Be),Gt&&id(Y,$e),Re;if(Be===null){for(;!gt.done;$e++,gt=Z.next())gt=ue(Y,gt.value,pe),gt!==null&&(Q=x(gt,Q,$e),Oe===null?Re=gt:Oe.sibling=gt,Oe=gt);return Gt&&id(Y,$e),Re}for(Be=y(Y,Be);!gt.done;$e++,gt=Z.next())gt=Ee(Be,Y,$e,gt.value,pe),gt!==null&&(a&&gt.alternate!==null&&Be.delete(gt.key===null?$e:gt.key),Q=x(gt,Q,$e),Oe===null?Re=gt:Oe.sibling=gt,Oe=gt);return a&&Be.forEach(function(h4){return l(Y,h4)}),Gt&&id(Y,$e),Re}function wn(Y,Q,Z,pe){if(typeof Z=="object"&&Z!==null&&Z.type===D&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case z:e:{for(var Re=Z.key,Oe=Q;Oe!==null;){if(Oe.key===Re){if(Re=Z.type,Re===D){if(Oe.tag===7){p(Y,Oe.sibling),Q=v(Oe,Z.props.children),Q.return=Y,Y=Q;break e}}else if(Oe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===de&&AT(Re)===Oe.type){p(Y,Oe.sibling),Q=v(Oe,Z.props),Q.ref=$2(Y,Oe,Z),Q.return=Y,Y=Q;break e}p(Y,Oe);break}else l(Y,Oe);Oe=Oe.sibling}Z.type===D?(Q=pd(Z.props.children,Y.mode,pe,Z.key),Q.return=Y,Y=Q):(pe=Lv(Z.type,Z.key,Z.props,null,Y.mode,pe),pe.ref=$2(Y,Q,Z),pe.return=Y,Y=pe)}return M(Y);case W:e:{for(Oe=Z.key;Q!==null;){if(Q.key===Oe)if(Q.tag===4&&Q.stateNode.containerInfo===Z.containerInfo&&Q.stateNode.implementation===Z.implementation){p(Y,Q.sibling),Q=v(Q,Z.children||[]),Q.return=Y,Y=Q;break e}else{p(Y,Q);break}else l(Y,Q);Q=Q.sibling}Q=dE(Z,Y.mode,pe),Q.return=Y,Y=Q}return M(Y);case de:return Oe=Z._init,wn(Y,Q,Oe(Z._payload),pe)}if(gn(Z))return Te(Y,Q,Z,pe);if(ve(Z))return Ie(Y,Q,Z,pe);hv(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,Q!==null&&Q.tag===6?(p(Y,Q.sibling),Q=v(Q,Z),Q.return=Y,Y=Q):(p(Y,Q),Q=uE(Z,Y.mode,pe),Q.return=Y,Y=Q),M(Y)):p(Y,Q)}return wn}var Dp=_T(!0),xT=_T(!1),pv=tc(null),fv=null,Np=null,Ax=null;function _x(){Ax=Np=fv=null}function xx(a){var l=pv.current;zt(pv),a._currentValue=l}function Ex(a,l,p){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===p)break;a=a.return}}function Mp(a,l){fv=a,Ax=Np=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(Qr=!0),a.firstContext=null)}function ei(a){var l=a._currentValue;if(Ax!==a)if(a={context:a,memoizedValue:l,next:null},Np===null){if(fv===null)throw Error(t(308));Np=a,fv.dependencies={lanes:0,firstContext:a}}else Np=Np.next=a;return l}var ad=null;function bx(a){ad===null?ad=[a]:ad.push(a)}function ET(a,l,p,y){var v=l.interleaved;return v===null?(p.next=p,bx(l)):(p.next=v.next,v.next=p),l.interleaved=p,To(a,y)}function To(a,l){a.lanes|=l;var p=a.alternate;for(p!==null&&(p.lanes|=l),p=a,a=a.return;a!==null;)a.childLanes|=l,p=a.alternate,p!==null&&(p.childLanes|=l),p=a,a=a.return;return p.tag===3?p.stateNode:null}var sc=!1;function Cx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bT(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ko(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function ic(a,l,p){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(ht&2)!==0){var v=y.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),y.pending=l,To(a,p)}return v=y.interleaved,v===null?(l.next=l,bx(y)):(l.next=v.next,v.next=l),y.interleaved=l,To(a,p)}function mv(a,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var y=l.lanes;y&=a.pendingLanes,p|=y,l.lanes=p,E2(a,p)}}function CT(a,l){var p=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var v=null,x=null;if(p=p.firstBaseUpdate,p!==null){do{var M={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};x===null?v=x=M:x=x.next=M,p=p.next}while(p!==null);x===null?v=x=l:x=x.next=l}else v=x=l;p={baseState:y.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:y.shared,effects:y.effects},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=l:a.next=l,p.lastBaseUpdate=l}function gv(a,l,p,y){var v=a.updateQueue;sc=!1;var x=v.firstBaseUpdate,M=v.lastBaseUpdate,H=v.shared.pending;if(H!==null){v.shared.pending=null;var q=H,ee=q.next;q.next=null,M===null?x=ee:M.next=ee,M=q;var le=a.alternate;le!==null&&(le=le.updateQueue,H=le.lastBaseUpdate,H!==M&&(H===null?le.firstBaseUpdate=ee:H.next=ee,le.lastBaseUpdate=q))}if(x!==null){var ue=v.baseState;M=0,le=ee=q=null,H=x;do{var oe=H.lane,Ee=H.eventTime;if((y&oe)===oe){le!==null&&(le=le.next={eventTime:Ee,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var Te=a,Ie=H;switch(oe=l,Ee=p,Ie.tag){case 1:if(Te=Ie.payload,typeof Te=="function"){ue=Te.call(Ee,ue,oe);break e}ue=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ie.payload,oe=typeof Te=="function"?Te.call(Ee,ue,oe):Te,oe==null)break e;ue=fe({},ue,oe);break e;case 2:sc=!0}}H.callback!==null&&H.lane!==0&&(a.flags|=64,oe=v.effects,oe===null?v.effects=[H]:oe.push(H))}else Ee={eventTime:Ee,lane:oe,tag:H.tag,payload:H.payload,callback:H.callback,next:null},le===null?(ee=le=Ee,q=ue):le=le.next=Ee,M|=oe;if(H=H.next,H===null){if(H=v.shared.pending,H===null)break;oe=H,H=oe.next,oe.next=null,v.lastBaseUpdate=oe,v.shared.pending=null}}while(!0);if(le===null&&(q=ue),v.baseState=q,v.firstBaseUpdate=ee,v.lastBaseUpdate=le,l=v.shared.interleaved,l!==null){v=l;do M|=v.lane,v=v.next;while(v!==l)}else x===null&&(v.shared.lanes=0);cd|=M,a.lanes=M,a.memoizedState=ue}}function FT(a,l,p){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var y=a[l],v=y.callback;if(v!==null){if(y.callback=null,y=p,typeof v!="function")throw Error(t(191,v));v.call(y)}}}var z2={},Aa=tc(z2),H2=tc(z2),W2=tc(z2);function od(a){if(a===z2)throw Error(t(174));return a}function Fx(a,l){switch(Lt(W2,l),Lt(H2,a),Lt(Aa,z2),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:rp(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=rp(l,a)}zt(Aa),Lt(Aa,l)}function Lp(){zt(Aa),zt(H2),zt(W2)}function ST(a){od(W2.current);var l=od(Aa.current),p=rp(l,a.type);l!==p&&(Lt(H2,a),Lt(Aa,p))}function Sx(a){H2.current===a&&(zt(Aa),zt(H2))}var Jt=tc(0);function yv(a){for(var l=a;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Tx=[];function kx(){for(var a=0;a<Tx.length;a++)Tx[a]._workInProgressVersionPrimary=null;Tx.length=0}var wv=V.ReactCurrentDispatcher,Ix=V.ReactCurrentBatchConfig,ld=0,Zt=null,Nn=null,Hn=null,vv=!1,G2=!1,q2=0,NO=0;function Ar(){throw Error(t(321))}function Px(a,l){if(l===null)return!1;for(var p=0;p<l.length&&p<a.length;p++)if(!Ii(a[p],l[p]))return!1;return!0}function Rx(a,l,p,y,v,x){if(ld=x,Zt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,wv.current=a===null||a.memoizedState===null?BO:VO,a=p(y,v),G2){x=0;do{if(G2=!1,q2=0,25<=x)throw Error(t(301));x+=1,Hn=Nn=null,l.updateQueue=null,wv.current=UO,a=p(y,v)}while(G2)}if(wv.current=xv,l=Nn!==null&&Nn.next!==null,ld=0,Hn=Nn=Zt=null,vv=!1,l)throw Error(t(300));return a}function Dx(){var a=q2!==0;return q2=0,a}function _a(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?Zt.memoizedState=Hn=a:Hn=Hn.next=a,Hn}function ti(){if(Nn===null){var a=Zt.alternate;a=a!==null?a.memoizedState:null}else a=Nn.next;var l=Hn===null?Zt.memoizedState:Hn.next;if(l!==null)Hn=l,Nn=a;else{if(a===null)throw Error(t(310));Nn=a,a={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},Hn===null?Zt.memoizedState=Hn=a:Hn=Hn.next=a}return Hn}function K2(a,l){return typeof l=="function"?l(a):l}function Nx(a){var l=ti(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=a;var y=Nn,v=y.baseQueue,x=p.pending;if(x!==null){if(v!==null){var M=v.next;v.next=x.next,x.next=M}y.baseQueue=v=x,p.pending=null}if(v!==null){x=v.next,y=y.baseState;var H=M=null,q=null,ee=x;do{var le=ee.lane;if((ld&le)===le)q!==null&&(q=q.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),y=ee.hasEagerState?ee.eagerState:a(y,ee.action);else{var ue={lane:le,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};q===null?(H=q=ue,M=y):q=q.next=ue,Zt.lanes|=le,cd|=le}ee=ee.next}while(ee!==null&&ee!==x);q===null?M=y:q.next=H,Ii(y,l.memoizedState)||(Qr=!0),l.memoizedState=y,l.baseState=M,l.baseQueue=q,p.lastRenderedState=y}if(a=p.interleaved,a!==null){v=a;do x=v.lane,Zt.lanes|=x,cd|=x,v=v.next;while(v!==a)}else v===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function Mx(a){var l=ti(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=a;var y=p.dispatch,v=p.pending,x=l.memoizedState;if(v!==null){p.pending=null;var M=v=v.next;do x=a(x,M.action),M=M.next;while(M!==v);Ii(x,l.memoizedState)||(Qr=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),p.lastRenderedState=x}return[x,y]}function TT(){}function kT(a,l){var p=Zt,y=ti(),v=l(),x=!Ii(y.memoizedState,v);if(x&&(y.memoizedState=v,Qr=!0),y=y.queue,Lx(RT.bind(null,p,y,a),[a]),y.getSnapshot!==l||x||Hn!==null&&Hn.memoizedState.tag&1){if(p.flags|=2048,Q2(9,PT.bind(null,p,y,v,l),void 0,null),Wn===null)throw Error(t(349));(ld&30)!==0||IT(p,l,v)}return v}function IT(a,l,p){a.flags|=16384,a={getSnapshot:l,value:p},l=Zt.updateQueue,l===null?(l={lastEffect:null,stores:null},Zt.updateQueue=l,l.stores=[a]):(p=l.stores,p===null?l.stores=[a]:p.push(a))}function PT(a,l,p,y){l.value=p,l.getSnapshot=y,DT(l)&&NT(a)}function RT(a,l,p){return p(function(){DT(l)&&NT(a)})}function DT(a){var l=a.getSnapshot;a=a.value;try{var p=l();return!Ii(a,p)}catch{return!0}}function NT(a){var l=To(a,1);l!==null&&Mi(l,a,1,-1)}function MT(a){var l=_a();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:K2,lastRenderedState:a},l.queue=a,a=a.dispatch=OO.bind(null,Zt,a),[l.memoizedState,a]}function Q2(a,l,p,y){return a={tag:a,create:l,destroy:p,deps:y,next:null},l=Zt.updateQueue,l===null?(l={lastEffect:null,stores:null},Zt.updateQueue=l,l.lastEffect=a.next=a):(p=l.lastEffect,p===null?l.lastEffect=a.next=a:(y=p.next,p.next=a,a.next=y,l.lastEffect=a)),a}function LT(){return ti().memoizedState}function Av(a,l,p,y){var v=_a();Zt.flags|=a,v.memoizedState=Q2(1|l,p,void 0,y===void 0?null:y)}function _v(a,l,p,y){var v=ti();y=y===void 0?null:y;var x=void 0;if(Nn!==null){var M=Nn.memoizedState;if(x=M.destroy,y!==null&&Px(y,M.deps)){v.memoizedState=Q2(l,p,x,y);return}}Zt.flags|=a,v.memoizedState=Q2(1|l,p,x,y)}function OT(a,l){return Av(8390656,8,a,l)}function Lx(a,l){return _v(2048,8,a,l)}function BT(a,l){return _v(4,2,a,l)}function VT(a,l){return _v(4,4,a,l)}function UT(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function jT(a,l,p){return p=p!=null?p.concat([a]):null,_v(4,4,UT.bind(null,l,a),p)}function Ox(){}function $T(a,l){var p=ti();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&Px(l,y[1])?y[0]:(p.memoizedState=[a,l],a)}function zT(a,l){var p=ti();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&Px(l,y[1])?y[0]:(a=a(),p.memoizedState=[a,l],a)}function HT(a,l,p){return(ld&21)===0?(a.baseState&&(a.baseState=!1,Qr=!0),a.memoizedState=p):(Ii(p,l)||(p=_2(),Zt.lanes|=p,cd|=p,a.baseState=!0),l)}function MO(a,l){var p=ot;ot=p!==0&&4>p?p:4,a(!0);var y=Ix.transition;Ix.transition={};try{a(!1),l()}finally{ot=p,Ix.transition=y}}function WT(){return ti().memoizedState}function LO(a,l,p){var y=cc(a);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},GT(a))qT(l,p);else if(p=ET(a,l,p,y),p!==null){var v=Lr();Mi(p,a,y,v),KT(p,l,y)}}function OO(a,l,p){var y=cc(a),v={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(GT(a))qT(l,v);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var M=l.lastRenderedState,H=x(M,p);if(v.hasEagerState=!0,v.eagerState=H,Ii(H,M)){var q=l.interleaved;q===null?(v.next=v,bx(l)):(v.next=q.next,q.next=v),l.interleaved=v;return}}catch{}finally{}p=ET(a,l,v,y),p!==null&&(v=Lr(),Mi(p,a,y,v),KT(p,l,y))}}function GT(a){var l=a.alternate;return a===Zt||l!==null&&l===Zt}function qT(a,l){G2=vv=!0;var p=a.pending;p===null?l.next=l:(l.next=p.next,p.next=l),a.pending=l}function KT(a,l,p){if((p&4194240)!==0){var y=l.lanes;y&=a.pendingLanes,p|=y,l.lanes=p,E2(a,p)}}var xv={readContext:ei,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useInsertionEffect:Ar,useLayoutEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useMutableSource:Ar,useSyncExternalStore:Ar,useId:Ar,unstable_isNewReconciler:!1},BO={readContext:ei,useCallback:function(a,l){return _a().memoizedState=[a,l===void 0?null:l],a},useContext:ei,useEffect:OT,useImperativeHandle:function(a,l,p){return p=p!=null?p.concat([a]):null,Av(4194308,4,UT.bind(null,l,a),p)},useLayoutEffect:function(a,l){return Av(4194308,4,a,l)},useInsertionEffect:function(a,l){return Av(4,2,a,l)},useMemo:function(a,l){var p=_a();return l=l===void 0?null:l,a=a(),p.memoizedState=[a,l],a},useReducer:function(a,l,p){var y=_a();return l=p!==void 0?p(l):l,y.memoizedState=y.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},y.queue=a,a=a.dispatch=LO.bind(null,Zt,a),[y.memoizedState,a]},useRef:function(a){var l=_a();return a={current:a},l.memoizedState=a},useState:MT,useDebugValue:Ox,useDeferredValue:function(a){return _a().memoizedState=a},useTransition:function(){var a=MT(!1),l=a[0];return a=MO.bind(null,a[1]),_a().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,p){var y=Zt,v=_a();if(Gt){if(p===void 0)throw Error(t(407));p=p()}else{if(p=l(),Wn===null)throw Error(t(349));(ld&30)!==0||IT(y,l,p)}v.memoizedState=p;var x={value:p,getSnapshot:l};return v.queue=x,OT(RT.bind(null,y,x,a),[a]),y.flags|=2048,Q2(9,PT.bind(null,y,x,p,l),void 0,null),p},useId:function(){var a=_a(),l=Wn.identifierPrefix;if(Gt){var p=So,y=Fo;p=(y&~(1<<32-ps(y)-1)).toString(32)+p,l=":"+l+"R"+p,p=q2++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=NO++,l=":"+l+"r"+p.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},VO={readContext:ei,useCallback:$T,useContext:ei,useEffect:Lx,useImperativeHandle:jT,useInsertionEffect:BT,useLayoutEffect:VT,useMemo:zT,useReducer:Nx,useRef:LT,useState:function(){return Nx(K2)},useDebugValue:Ox,useDeferredValue:function(a){var l=ti();return HT(l,Nn.memoizedState,a)},useTransition:function(){var a=Nx(K2)[0],l=ti().memoizedState;return[a,l]},useMutableSource:TT,useSyncExternalStore:kT,useId:WT,unstable_isNewReconciler:!1},UO={readContext:ei,useCallback:$T,useContext:ei,useEffect:Lx,useImperativeHandle:jT,useInsertionEffect:BT,useLayoutEffect:VT,useMemo:zT,useReducer:Mx,useRef:LT,useState:function(){return Mx(K2)},useDebugValue:Ox,useDeferredValue:function(a){var l=ti();return Nn===null?l.memoizedState=a:HT(l,Nn.memoizedState,a)},useTransition:function(){var a=Mx(K2)[0],l=ti().memoizedState;return[a,l]},useMutableSource:TT,useSyncExternalStore:kT,useId:WT,unstable_isNewReconciler:!1};function Ri(a,l){if(a&&a.defaultProps){l=fe({},l),a=a.defaultProps;for(var p in a)l[p]===void 0&&(l[p]=a[p]);return l}return l}function Bx(a,l,p,y){l=a.memoizedState,p=p(y,l),p=p==null?l:fe({},l,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Ev={isMounted:function(a){return(a=a._reactInternals)?Ti(a)===a:!1},enqueueSetState:function(a,l,p){a=a._reactInternals;var y=Lr(),v=cc(a),x=ko(y,v);x.payload=l,p!=null&&(x.callback=p),l=ic(a,x,v),l!==null&&(Mi(l,a,v,y),mv(l,a,v))},enqueueReplaceState:function(a,l,p){a=a._reactInternals;var y=Lr(),v=cc(a),x=ko(y,v);x.tag=1,x.payload=l,p!=null&&(x.callback=p),l=ic(a,x,v),l!==null&&(Mi(l,a,v,y),mv(l,a,v))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var p=Lr(),y=cc(a),v=ko(p,y);v.tag=2,l!=null&&(v.callback=l),l=ic(a,v,y),l!==null&&(Mi(l,a,y,p),mv(l,a,y))}};function QT(a,l,p,y,v,x,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,x,M):l.prototype&&l.prototype.isPureReactComponent?!M2(p,y)||!M2(v,x):!0}function XT(a,l,p){var y=!1,v=nc,x=l.contextType;return typeof x=="object"&&x!==null?x=ei(x):(v=Kr(l)?rd:vr.current,y=l.contextTypes,x=(y=y!=null)?kp(a,v):nc),l=new l(p,x),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Ev,a.stateNode=l,l._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=v,a.__reactInternalMemoizedMaskedChildContext=x),l}function YT(a,l,p,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,y),l.state!==a&&Ev.enqueueReplaceState(l,l.state,null)}function Vx(a,l,p,y){var v=a.stateNode;v.props=p,v.state=a.memoizedState,v.refs={},Cx(a);var x=l.contextType;typeof x=="object"&&x!==null?v.context=ei(x):(x=Kr(l)?rd:vr.current,v.context=kp(a,x)),v.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Bx(a,l,x,p),v.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&Ev.enqueueReplaceState(v,v.state,null),gv(a,p,v,y),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308)}function Op(a,l){try{var p="",y=l;do p+=ke(y),y=y.return;while(y);var v=p}catch(x){v=`
Error generating stack: `+x.message+`
`+x.stack}return{value:a,source:l,stack:v,digest:null}}function Ux(a,l,p){return{value:a,source:null,stack:p??null,digest:l??null}}function jx(a,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var jO=typeof WeakMap=="function"?WeakMap:Map;function JT(a,l,p){p=ko(-1,p),p.tag=3,p.payload={element:null};var y=l.value;return p.callback=function(){Iv||(Iv=!0,nE=y),jx(a,l)},p}function ZT(a,l,p){p=ko(-1,p),p.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=l.value;p.payload=function(){return y(v)},p.callback=function(){jx(a,l)}}var x=a.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(p.callback=function(){jx(a,l),typeof y!="function"&&(oc===null?oc=new Set([this]):oc.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),p}function ek(a,l,p){var y=a.pingCache;if(y===null){y=a.pingCache=new jO;var v=new Set;y.set(l,v)}else v=y.get(l),v===void 0&&(v=new Set,y.set(l,v));v.has(p)||(v.add(p),a=t4.bind(null,a,l,p),l.then(a,a))}function tk(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function nk(a,l,p,y,v){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=ko(-1,1),l.tag=2,ic(p,l,1))),p.lanes|=1),a):(a.flags|=65536,a.lanes=v,a)}var $O=V.ReactCurrentOwner,Qr=!1;function Mr(a,l,p,y){l.child=a===null?xT(l,null,p,y):Dp(l,a.child,p,y)}function rk(a,l,p,y,v){p=p.render;var x=l.ref;return Mp(l,v),y=Rx(a,l,p,y,x,v),p=Dx(),a!==null&&!Qr?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,Io(a,l,v)):(Gt&&p&&mx(l),l.flags|=1,Mr(a,l,y,v),l.child)}function sk(a,l,p,y,v){if(a===null){var x=p.type;return typeof x=="function"&&!cE(x)&&x.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=x,ik(a,l,x,y,v)):(a=Lv(p.type,null,y,l,l.mode,v),a.ref=l.ref,a.return=l,l.child=a)}if(x=a.child,(a.lanes&v)===0){var M=x.memoizedProps;if(p=p.compare,p=p!==null?p:M2,p(M,y)&&a.ref===l.ref)return Io(a,l,v)}return l.flags|=1,a=dc(x,y),a.ref=l.ref,a.return=l,l.child=a}function ik(a,l,p,y,v){if(a!==null){var x=a.memoizedProps;if(M2(x,y)&&a.ref===l.ref)if(Qr=!1,l.pendingProps=y=x,(a.lanes&v)!==0)(a.flags&131072)!==0&&(Qr=!0);else return l.lanes=a.lanes,Io(a,l,v)}return $x(a,l,p,y,v)}function ak(a,l,p){var y=l.pendingProps,v=y.children,x=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Vp,As),As|=p;else{if((p&1073741824)===0)return a=x!==null?x.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Lt(Vp,As),As|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=x!==null?x.baseLanes:p,Lt(Vp,As),As|=y}else x!==null?(y=x.baseLanes|p,l.memoizedState=null):y=p,Lt(Vp,As),As|=y;return Mr(a,l,v,p),l.child}function ok(a,l){var p=l.ref;(a===null&&p!==null||a!==null&&a.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function $x(a,l,p,y,v){var x=Kr(p)?rd:vr.current;return x=kp(l,x),Mp(l,v),p=Rx(a,l,p,y,x,v),y=Dx(),a!==null&&!Qr?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,Io(a,l,v)):(Gt&&y&&mx(l),l.flags|=1,Mr(a,l,p,v),l.child)}function lk(a,l,p,y,v){if(Kr(p)){var x=!0;ov(l)}else x=!1;if(Mp(l,v),l.stateNode===null)Cv(a,l),XT(l,p,y),Vx(l,p,y,v),y=!0;else if(a===null){var M=l.stateNode,H=l.memoizedProps;M.props=H;var q=M.context,ee=p.contextType;typeof ee=="object"&&ee!==null?ee=ei(ee):(ee=Kr(p)?rd:vr.current,ee=kp(l,ee));var le=p.getDerivedStateFromProps,ue=typeof le=="function"||typeof M.getSnapshotBeforeUpdate=="function";ue||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==y||q!==ee)&&YT(l,M,y,ee),sc=!1;var oe=l.memoizedState;M.state=oe,gv(l,y,M,v),q=l.memoizedState,H!==y||oe!==q||qr.current||sc?(typeof le=="function"&&(Bx(l,p,le,y),q=l.memoizedState),(H=sc||QT(l,p,H,y,oe,q,ee))?(ue||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=q),M.props=y,M.state=q,M.context=ee,y=H):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{M=l.stateNode,bT(a,l),H=l.memoizedProps,ee=l.type===l.elementType?H:Ri(l.type,H),M.props=ee,ue=l.pendingProps,oe=M.context,q=p.contextType,typeof q=="object"&&q!==null?q=ei(q):(q=Kr(p)?rd:vr.current,q=kp(l,q));var Ee=p.getDerivedStateFromProps;(le=typeof Ee=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(H!==ue||oe!==q)&&YT(l,M,y,q),sc=!1,oe=l.memoizedState,M.state=oe,gv(l,y,M,v);var Te=l.memoizedState;H!==ue||oe!==Te||qr.current||sc?(typeof Ee=="function"&&(Bx(l,p,Ee,y),Te=l.memoizedState),(ee=sc||QT(l,p,ee,y,oe,Te,q)||!1)?(le||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(y,Te,q),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(y,Te,q)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||H===a.memoizedProps&&oe===a.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&oe===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Te),M.props=y,M.state=Te,M.context=q,y=ee):(typeof M.componentDidUpdate!="function"||H===a.memoizedProps&&oe===a.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&oe===a.memoizedState||(l.flags|=1024),y=!1)}return zx(a,l,p,y,x,v)}function zx(a,l,p,y,v,x){ok(a,l);var M=(l.flags&128)!==0;if(!y&&!M)return v&&pT(l,p,!1),Io(a,l,x);y=l.stateNode,$O.current=l;var H=M&&typeof p.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,a!==null&&M?(l.child=Dp(l,a.child,null,x),l.child=Dp(l,null,H,x)):Mr(a,l,H,x),l.memoizedState=y.state,v&&pT(l,p,!0),l.child}function ck(a){var l=a.stateNode;l.pendingContext?dT(a,l.pendingContext,l.pendingContext!==l.context):l.context&&dT(a,l.context,!1),Fx(a,l.containerInfo)}function uk(a,l,p,y,v){return Rp(),vx(v),l.flags|=256,Mr(a,l,p,y),l.child}var Hx={dehydrated:null,treeContext:null,retryLane:0};function Wx(a){return{baseLanes:a,cachePool:null,transitions:null}}function dk(a,l,p){var y=l.pendingProps,v=Jt.current,x=!1,M=(l.flags&128)!==0,H;if((H=M)||(H=a!==null&&a.memoizedState===null?!1:(v&2)!==0),H?(x=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(v|=1),Lt(Jt,v&1),a===null)return wx(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(M=y.children,a=y.fallback,x?(y=l.mode,x=l.child,M={mode:"hidden",children:M},(y&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=M):x=Ov(M,y,0,null),a=pd(a,y,p,null),x.return=l,a.return=l,x.sibling=a,l.child=x,l.child.memoizedState=Wx(p),l.memoizedState=Hx,a):Gx(l,M));if(v=a.memoizedState,v!==null&&(H=v.dehydrated,H!==null))return zO(a,l,M,y,H,v,p);if(x){x=y.fallback,M=l.mode,v=a.child,H=v.sibling;var q={mode:"hidden",children:y.children};return(M&1)===0&&l.child!==v?(y=l.child,y.childLanes=0,y.pendingProps=q,l.deletions=null):(y=dc(v,q),y.subtreeFlags=v.subtreeFlags&14680064),H!==null?x=dc(H,x):(x=pd(x,M,p,null),x.flags|=2),x.return=l,y.return=l,y.sibling=x,l.child=y,y=x,x=l.child,M=a.child.memoizedState,M=M===null?Wx(p):{baseLanes:M.baseLanes|p,cachePool:null,transitions:M.transitions},x.memoizedState=M,x.childLanes=a.childLanes&~p,l.memoizedState=Hx,y}return x=a.child,a=x.sibling,y=dc(x,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=p),y.return=l,y.sibling=null,a!==null&&(p=l.deletions,p===null?(l.deletions=[a],l.flags|=16):p.push(a)),l.child=y,l.memoizedState=null,y}function Gx(a,l){return l=Ov({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function bv(a,l,p,y){return y!==null&&vx(y),Dp(l,a.child,null,p),a=Gx(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function zO(a,l,p,y,v,x,M){if(p)return l.flags&256?(l.flags&=-257,y=Ux(Error(t(422))),bv(a,l,M,y)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(x=y.fallback,v=l.mode,y=Ov({mode:"visible",children:y.children},v,0,null),x=pd(x,v,M,null),x.flags|=2,y.return=l,x.return=l,y.sibling=x,l.child=y,(l.mode&1)!==0&&Dp(l,a.child,null,M),l.child.memoizedState=Wx(M),l.memoizedState=Hx,x);if((l.mode&1)===0)return bv(a,l,M,null);if(v.data==="$!"){if(y=v.nextSibling&&v.nextSibling.dataset,y)var H=y.dgst;return y=H,x=Error(t(419)),y=Ux(x,y,void 0),bv(a,l,M,y)}if(H=(M&a.childLanes)!==0,Qr||H){if(y=Wn,y!==null){switch(M&-M){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(y.suspendedLanes|M))!==0?0:v,v!==0&&v!==x.retryLane&&(x.retryLane=v,To(a,v),Mi(y,a,v,-1))}return lE(),y=Ux(Error(t(421))),bv(a,l,M,y)}return v.data==="$?"?(l.flags|=128,l.child=a.child,l=n4.bind(null,a),v._reactRetry=l,null):(a=x.treeContext,vs=ec(v.nextSibling),ws=l,Gt=!0,Pi=null,a!==null&&(Js[Zs++]=Fo,Js[Zs++]=So,Js[Zs++]=sd,Fo=a.id,So=a.overflow,sd=l),l=Gx(l,y.children),l.flags|=4096,l)}function hk(a,l,p){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),Ex(a.return,l,p)}function qx(a,l,p,y,v){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:v}:(x.isBackwards=l,x.rendering=null,x.renderingStartTime=0,x.last=y,x.tail=p,x.tailMode=v)}function pk(a,l,p){var y=l.pendingProps,v=y.revealOrder,x=y.tail;if(Mr(a,l,y.children,p),y=Jt.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&hk(a,p,l);else if(a.tag===19)hk(a,p,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(Lt(Jt,y),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(p=l.child,v=null;p!==null;)a=p.alternate,a!==null&&yv(a)===null&&(v=p),p=p.sibling;p=v,p===null?(v=l.child,l.child=null):(v=p.sibling,p.sibling=null),qx(l,!1,v,p,x);break;case"backwards":for(p=null,v=l.child,l.child=null;v!==null;){if(a=v.alternate,a!==null&&yv(a)===null){l.child=v;break}a=v.sibling,v.sibling=p,p=v,v=a}qx(l,!0,p,null,x);break;case"together":qx(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Cv(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Io(a,l,p){if(a!==null&&(l.dependencies=a.dependencies),cd|=l.lanes,(p&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,p=dc(a,a.pendingProps),l.child=p,p.return=l;a.sibling!==null;)a=a.sibling,p=p.sibling=dc(a,a.pendingProps),p.return=l;p.sibling=null}return l.child}function HO(a,l,p){switch(l.tag){case 3:ck(l),Rp();break;case 5:ST(l);break;case 1:Kr(l.type)&&ov(l);break;case 4:Fx(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,v=l.memoizedProps.value;Lt(pv,y._currentValue),y._currentValue=v;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(Lt(Jt,Jt.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?dk(a,l,p):(Lt(Jt,Jt.current&1),a=Io(a,l,p),a!==null?a.sibling:null);Lt(Jt,Jt.current&1);break;case 19:if(y=(p&l.childLanes)!==0,(a.flags&128)!==0){if(y)return pk(a,l,p);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Lt(Jt,Jt.current),y)break;return null;case 22:case 23:return l.lanes=0,ak(a,l,p)}return Io(a,l,p)}var fk,Kx,mk,gk;fk=function(a,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Kx=function(){},mk=function(a,l,p,y){var v=a.memoizedProps;if(v!==y){a=l.stateNode,od(Aa.current);var x=null;switch(p){case"input":v=Ol(a,v),y=Ol(a,y),x=[];break;case"select":v=fe({},v,{value:void 0}),y=fe({},y,{value:void 0}),x=[];break;case"textarea":v=u2(a,v),y=u2(a,y),x=[];break;default:typeof v.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=sv)}Si(p,y);var M;p=null;for(ee in v)if(!y.hasOwnProperty(ee)&&v.hasOwnProperty(ee)&&v[ee]!=null)if(ee==="style"){var H=v[ee];for(M in H)H.hasOwnProperty(M)&&(p||(p={}),p[M]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(r.hasOwnProperty(ee)?x||(x=[]):(x=x||[]).push(ee,null));for(ee in y){var q=y[ee];if(H=v!=null?v[ee]:void 0,y.hasOwnProperty(ee)&&q!==H&&(q!=null||H!=null))if(ee==="style")if(H){for(M in H)!H.hasOwnProperty(M)||q&&q.hasOwnProperty(M)||(p||(p={}),p[M]="");for(M in q)q.hasOwnProperty(M)&&H[M]!==q[M]&&(p||(p={}),p[M]=q[M])}else p||(x||(x=[]),x.push(ee,p)),p=q;else ee==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,H=H?H.__html:void 0,q!=null&&H!==q&&(x=x||[]).push(ee,q)):ee==="children"?typeof q!="string"&&typeof q!="number"||(x=x||[]).push(ee,""+q):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(r.hasOwnProperty(ee)?(q!=null&&ee==="onScroll"&&$t("scroll",a),x||H===q||(x=[])):(x=x||[]).push(ee,q))}p&&(x=x||[]).push("style",p);var ee=x;(l.updateQueue=ee)&&(l.flags|=4)}},gk=function(a,l,p,y){p!==y&&(l.flags|=4)};function X2(a,l){if(!Gt)switch(a.tailMode){case"hidden":l=a.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function _r(a){var l=a.alternate!==null&&a.alternate.child===a.child,p=0,y=0;if(l)for(var v=a.child;v!==null;)p|=v.lanes|v.childLanes,y|=v.subtreeFlags&14680064,y|=v.flags&14680064,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)p|=v.lanes|v.childLanes,y|=v.subtreeFlags,y|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=y,a.childLanes=p,l}function WO(a,l,p){var y=l.pendingProps;switch(gx(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(l),null;case 1:return Kr(l.type)&&av(),_r(l),null;case 3:return y=l.stateNode,Lp(),zt(qr),zt(vr),kx(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(dv(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Pi!==null&&(iE(Pi),Pi=null))),Kx(a,l),_r(l),null;case 5:Sx(l);var v=od(W2.current);if(p=l.type,a!==null&&l.stateNode!=null)mk(a,l,p,y,v),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return _r(l),null}if(a=od(Aa.current),dv(l)){y=l.stateNode,p=l.type;var x=l.memoizedProps;switch(y[va]=l,y[U2]=x,a=(l.mode&1)!==0,p){case"dialog":$t("cancel",y),$t("close",y);break;case"iframe":case"object":case"embed":$t("load",y);break;case"video":case"audio":for(v=0;v<O2.length;v++)$t(O2[v],y);break;case"source":$t("error",y);break;case"img":case"image":case"link":$t("error",y),$t("load",y);break;case"details":$t("toggle",y);break;case"input":k0(y,x),$t("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!x.multiple},$t("invalid",y);break;case"textarea":d2(y,x),$t("invalid",y)}Si(p,x),v=null;for(var M in x)if(x.hasOwnProperty(M)){var H=x[M];M==="children"?typeof H=="string"?y.textContent!==H&&(x.suppressHydrationWarning!==!0&&rv(y.textContent,H,a),v=["children",H]):typeof H=="number"&&y.textContent!==""+H&&(x.suppressHydrationWarning!==!0&&rv(y.textContent,H,a),v=["children",""+H]):r.hasOwnProperty(M)&&H!=null&&M==="onScroll"&&$t("scroll",y)}switch(p){case"input":Ke(y),c2(y,x,!0);break;case"textarea":Ke(y),Bl(y);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(y.onclick=sv)}y=v,l.updateQueue=y,y!==null&&(l.flags|=4)}else{M=v.nodeType===9?v:v.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=h2(p)),a==="http://www.w3.org/1999/xhtml"?p==="script"?(a=M.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=M.createElement(p,{is:y.is}):(a=M.createElement(p),p==="select"&&(M=a,y.multiple?M.multiple=!0:y.size&&(M.size=y.size))):a=M.createElementNS(a,p),a[va]=l,a[U2]=y,fk(a,l,!1,!1),l.stateNode=a;e:{switch(M=ip(p,y),p){case"dialog":$t("cancel",a),$t("close",a),v=y;break;case"iframe":case"object":case"embed":$t("load",a),v=y;break;case"video":case"audio":for(v=0;v<O2.length;v++)$t(O2[v],a);v=y;break;case"source":$t("error",a),v=y;break;case"img":case"image":case"link":$t("error",a),$t("load",a),v=y;break;case"details":$t("toggle",a),v=y;break;case"input":k0(a,y),v=Ol(a,y),$t("invalid",a);break;case"option":v=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},v=fe({},y,{value:void 0}),$t("invalid",a);break;case"textarea":d2(a,y),v=u2(a,y),$t("invalid",a);break;default:v=y}Si(p,v),H=v;for(x in H)if(H.hasOwnProperty(x)){var q=H[x];x==="style"?sp(a,q):x==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&P0(a,q)):x==="children"?typeof q=="string"?(p!=="textarea"||q!=="")&&$u(a,q):typeof q=="number"&&$u(a,""+q):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(r.hasOwnProperty(x)?q!=null&&x==="onScroll"&&$t("scroll",a):q!=null&&N(a,x,q,M))}switch(p){case"input":Ke(a),c2(a,y,!1);break;case"textarea":Ke(a),Bl(a);break;case"option":y.value!=null&&a.setAttribute("value",""+et(y.value));break;case"select":a.multiple=!!y.multiple,x=y.value,x!=null?Fi(a,!!y.multiple,x,!1):y.defaultValue!=null&&Fi(a,!!y.multiple,y.defaultValue,!0);break;default:typeof v.onClick=="function"&&(a.onclick=sv)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return _r(l),null;case 6:if(a&&l.stateNode!=null)gk(a,l,a.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(p=od(W2.current),od(Aa.current),dv(l)){if(y=l.stateNode,p=l.memoizedProps,y[va]=l,(x=y.nodeValue!==p)&&(a=ws,a!==null))switch(a.tag){case 3:rv(y.nodeValue,p,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&rv(y.nodeValue,p,(a.mode&1)!==0)}x&&(l.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[va]=l,l.stateNode=y}return _r(l),null;case 13:if(zt(Jt),y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Gt&&vs!==null&&(l.mode&1)!==0&&(l.flags&128)===0)vT(),Rp(),l.flags|=98560,x=!1;else if(x=dv(l),y!==null&&y.dehydrated!==null){if(a===null){if(!x)throw Error(t(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[va]=l}else Rp(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;_r(l),x=!1}else Pi!==null&&(iE(Pi),Pi=null),x=!0;if(!x)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Jt.current&1)!==0?Mn===0&&(Mn=3):lE())),l.updateQueue!==null&&(l.flags|=4),_r(l),null);case 4:return Lp(),Kx(a,l),a===null&&B2(l.stateNode.containerInfo),_r(l),null;case 10:return xx(l.type._context),_r(l),null;case 17:return Kr(l.type)&&av(),_r(l),null;case 19:if(zt(Jt),x=l.memoizedState,x===null)return _r(l),null;if(y=(l.flags&128)!==0,M=x.rendering,M===null)if(y)X2(x,!1);else{if(Mn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(M=yv(a),M!==null){for(l.flags|=128,X2(x,!1),y=M.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=p,p=l.child;p!==null;)x=p,a=y,x.flags&=14680066,M=x.alternate,M===null?(x.childLanes=0,x.lanes=a,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=M.childLanes,x.lanes=M.lanes,x.child=M.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=M.memoizedProps,x.memoizedState=M.memoizedState,x.updateQueue=M.updateQueue,x.type=M.type,a=M.dependencies,x.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),p=p.sibling;return Lt(Jt,Jt.current&1|2),l.child}a=a.sibling}x.tail!==null&&jt()>Up&&(l.flags|=128,y=!0,X2(x,!1),l.lanes=4194304)}else{if(!y)if(a=yv(M),a!==null){if(l.flags|=128,y=!0,p=a.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),X2(x,!0),x.tail===null&&x.tailMode==="hidden"&&!M.alternate&&!Gt)return _r(l),null}else 2*jt()-x.renderingStartTime>Up&&p!==1073741824&&(l.flags|=128,y=!0,X2(x,!1),l.lanes=4194304);x.isBackwards?(M.sibling=l.child,l.child=M):(p=x.last,p!==null?p.sibling=M:l.child=M,x.last=M)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=jt(),l.sibling=null,p=Jt.current,Lt(Jt,y?p&1|2:p&1),l):(_r(l),null);case 22:case 23:return oE(),y=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(As&1073741824)!==0&&(_r(l),l.subtreeFlags&6&&(l.flags|=8192)):_r(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function GO(a,l){switch(gx(l),l.tag){case 1:return Kr(l.type)&&av(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Lp(),zt(qr),zt(vr),kx(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Sx(l),null;case 13:if(zt(Jt),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Rp()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return zt(Jt),null;case 4:return Lp(),null;case 10:return xx(l.type._context),null;case 22:case 23:return oE(),null;case 24:return null;default:return null}}var Fv=!1,xr=!1,qO=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Bp(a,l){var p=a.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){on(a,l,y)}else p.current=null}function Qx(a,l,p){try{p()}catch(y){on(a,l,y)}}var yk=!1;function KO(a,l){if(ox=_o,a=QS(),Z1(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var v=y.anchorOffset,x=y.focusNode;y=y.focusOffset;try{p.nodeType,x.nodeType}catch{p=null;break e}var M=0,H=-1,q=-1,ee=0,le=0,ue=a,oe=null;t:for(;;){for(var Ee;ue!==p||v!==0&&ue.nodeType!==3||(H=M+v),ue!==x||y!==0&&ue.nodeType!==3||(q=M+y),ue.nodeType===3&&(M+=ue.nodeValue.length),(Ee=ue.firstChild)!==null;)oe=ue,ue=Ee;for(;;){if(ue===a)break t;if(oe===p&&++ee===v&&(H=M),oe===x&&++le===y&&(q=M),(Ee=ue.nextSibling)!==null)break;ue=oe,oe=ue.parentNode}ue=Ee}p=H===-1||q===-1?null:{start:H,end:q}}else p=null}p=p||{start:0,end:0}}else p=null;for(lx={focusedElem:a,selectionRange:p},_o=!1,Se=l;Se!==null;)if(l=Se,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Se=a;else for(;Se!==null;){l=Se;try{var Te=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ie=Te.memoizedProps,wn=Te.memoizedState,Y=l.stateNode,Q=Y.getSnapshotBeforeUpdate(l.elementType===l.type?Ie:Ri(l.type,Ie),wn);Y.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var Z=l.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){on(l,l.return,pe)}if(a=l.sibling,a!==null){a.return=l.return,Se=a;break}Se=l.return}return Te=yk,yk=!1,Te}function Y2(a,l,p){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var v=y=y.next;do{if((v.tag&a)===a){var x=v.destroy;v.destroy=void 0,x!==void 0&&Qx(l,p,x)}v=v.next}while(v!==y)}}function Sv(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&a)===a){var y=p.create;p.destroy=y()}p=p.next}while(p!==l)}}function Xx(a){var l=a.ref;if(l!==null){var p=a.stateNode;switch(a.tag){case 5:a=p;break;default:a=p}typeof l=="function"?l(a):l.current=a}}function wk(a){var l=a.alternate;l!==null&&(a.alternate=null,wk(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[va],delete l[U2],delete l[hx],delete l[IO],delete l[PO])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function vk(a){return a.tag===5||a.tag===3||a.tag===4}function Ak(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||vk(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Yx(a,l,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(a,l):p.insertBefore(a,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(a,p)):(l=p,l.appendChild(a)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=sv));else if(y!==4&&(a=a.child,a!==null))for(Yx(a,l,p),a=a.sibling;a!==null;)Yx(a,l,p),a=a.sibling}function Jx(a,l,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?p.insertBefore(a,l):p.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(Jx(a,l,p),a=a.sibling;a!==null;)Jx(a,l,p),a=a.sibling}var rr=null,Di=!1;function ac(a,l,p){for(p=p.child;p!==null;)_k(a,l,p),p=p.sibling}function _k(a,l,p){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(qu,p)}catch{}switch(p.tag){case 5:xr||Bp(p,l);case 6:var y=rr,v=Di;rr=null,ac(a,l,p),rr=y,Di=v,rr!==null&&(Di?(a=rr,p=p.stateNode,a.nodeType===8?a.parentNode.removeChild(p):a.removeChild(p)):rr.removeChild(p.stateNode));break;case 18:rr!==null&&(Di?(a=rr,p=p.stateNode,a.nodeType===8?dx(a.parentNode,p):a.nodeType===1&&dx(a,p),Xl(a)):dx(rr,p.stateNode));break;case 4:y=rr,v=Di,rr=p.stateNode.containerInfo,Di=!0,ac(a,l,p),rr=y,Di=v;break;case 0:case 11:case 14:case 15:if(!xr&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){v=y=y.next;do{var x=v,M=x.destroy;x=x.tag,M!==void 0&&((x&2)!==0||(x&4)!==0)&&Qx(p,l,M),v=v.next}while(v!==y)}ac(a,l,p);break;case 1:if(!xr&&(Bp(p,l),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(H){on(p,l,H)}ac(a,l,p);break;case 21:ac(a,l,p);break;case 22:p.mode&1?(xr=(y=xr)||p.memoizedState!==null,ac(a,l,p),xr=y):ac(a,l,p);break;default:ac(a,l,p)}}function xk(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var p=a.stateNode;p===null&&(p=a.stateNode=new qO),l.forEach(function(y){var v=r4.bind(null,a,y);p.has(y)||(p.add(y),y.then(v,v))})}}function Ni(a,l){var p=l.deletions;if(p!==null)for(var y=0;y<p.length;y++){var v=p[y];try{var x=a,M=l,H=M;e:for(;H!==null;){switch(H.tag){case 5:rr=H.stateNode,Di=!1;break e;case 3:rr=H.stateNode.containerInfo,Di=!0;break e;case 4:rr=H.stateNode.containerInfo,Di=!0;break e}H=H.return}if(rr===null)throw Error(t(160));_k(x,M,v),rr=null,Di=!1;var q=v.alternate;q!==null&&(q.return=null),v.return=null}catch(ee){on(v,l,ee)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Ek(l,a),l=l.sibling}function Ek(a,l){var p=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Ni(l,a),xa(a),y&4){try{Y2(3,a,a.return),Sv(3,a)}catch(Ie){on(a,a.return,Ie)}try{Y2(5,a,a.return)}catch(Ie){on(a,a.return,Ie)}}break;case 1:Ni(l,a),xa(a),y&512&&p!==null&&Bp(p,p.return);break;case 5:if(Ni(l,a),xa(a),y&512&&p!==null&&Bp(p,p.return),a.flags&32){var v=a.stateNode;try{$u(v,"")}catch(Ie){on(a,a.return,Ie)}}if(y&4&&(v=a.stateNode,v!=null)){var x=a.memoizedProps,M=p!==null?p.memoizedProps:x,H=a.type,q=a.updateQueue;if(a.updateQueue=null,q!==null)try{H==="input"&&x.type==="radio"&&x.name!=null&&np(v,x),ip(H,M);var ee=ip(H,x);for(M=0;M<q.length;M+=2){var le=q[M],ue=q[M+1];le==="style"?sp(v,ue):le==="dangerouslySetInnerHTML"?P0(v,ue):le==="children"?$u(v,ue):N(v,le,ue,ee)}switch(H){case"input":ju(v,x);break;case"textarea":I0(v,x);break;case"select":var oe=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!x.multiple;var Ee=x.value;Ee!=null?Fi(v,!!x.multiple,Ee,!1):oe!==!!x.multiple&&(x.defaultValue!=null?Fi(v,!!x.multiple,x.defaultValue,!0):Fi(v,!!x.multiple,x.multiple?[]:"",!1))}v[U2]=x}catch(Ie){on(a,a.return,Ie)}}break;case 6:if(Ni(l,a),xa(a),y&4){if(a.stateNode===null)throw Error(t(162));v=a.stateNode,x=a.memoizedProps;try{v.nodeValue=x}catch(Ie){on(a,a.return,Ie)}}break;case 3:if(Ni(l,a),xa(a),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Xl(l.containerInfo)}catch(Ie){on(a,a.return,Ie)}break;case 4:Ni(l,a),xa(a);break;case 13:Ni(l,a),xa(a),v=a.child,v.flags&8192&&(x=v.memoizedState!==null,v.stateNode.isHidden=x,!x||v.alternate!==null&&v.alternate.memoizedState!==null||(tE=jt())),y&4&&xk(a);break;case 22:if(le=p!==null&&p.memoizedState!==null,a.mode&1?(xr=(ee=xr)||le,Ni(l,a),xr=ee):Ni(l,a),xa(a),y&8192){if(ee=a.memoizedState!==null,(a.stateNode.isHidden=ee)&&!le&&(a.mode&1)!==0)for(Se=a,le=a.child;le!==null;){for(ue=Se=le;Se!==null;){switch(oe=Se,Ee=oe.child,oe.tag){case 0:case 11:case 14:case 15:Y2(4,oe,oe.return);break;case 1:Bp(oe,oe.return);var Te=oe.stateNode;if(typeof Te.componentWillUnmount=="function"){y=oe,p=oe.return;try{l=y,Te.props=l.memoizedProps,Te.state=l.memoizedState,Te.componentWillUnmount()}catch(Ie){on(y,p,Ie)}}break;case 5:Bp(oe,oe.return);break;case 22:if(oe.memoizedState!==null){Fk(ue);continue}}Ee!==null?(Ee.return=oe,Se=Ee):Fk(ue)}le=le.sibling}e:for(le=null,ue=a;;){if(ue.tag===5){if(le===null){le=ue;try{v=ue.stateNode,ee?(x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(H=ue.stateNode,q=ue.memoizedProps.style,M=q!=null&&q.hasOwnProperty("display")?q.display:null,H.style.display=jl("display",M))}catch(Ie){on(a,a.return,Ie)}}}else if(ue.tag===6){if(le===null)try{ue.stateNode.nodeValue=ee?"":ue.memoizedProps}catch(Ie){on(a,a.return,Ie)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===a)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===a)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===a)break e;le===ue&&(le=null),ue=ue.return}le===ue&&(le=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Ni(l,a),xa(a),y&4&&xk(a);break;case 21:break;default:Ni(l,a),xa(a)}}function xa(a){var l=a.flags;if(l&2){try{e:{for(var p=a.return;p!==null;){if(vk(p)){var y=p;break e}p=p.return}throw Error(t(160))}switch(y.tag){case 5:var v=y.stateNode;y.flags&32&&($u(v,""),y.flags&=-33);var x=Ak(a);Jx(a,x,v);break;case 3:case 4:var M=y.stateNode.containerInfo,H=Ak(a);Yx(a,H,M);break;default:throw Error(t(161))}}catch(q){on(a,a.return,q)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function QO(a,l,p){Se=a,bk(a)}function bk(a,l,p){for(var y=(a.mode&1)!==0;Se!==null;){var v=Se,x=v.child;if(v.tag===22&&y){var M=v.memoizedState!==null||Fv;if(!M){var H=v.alternate,q=H!==null&&H.memoizedState!==null||xr;H=Fv;var ee=xr;if(Fv=M,(xr=q)&&!ee)for(Se=v;Se!==null;)M=Se,q=M.child,M.tag===22&&M.memoizedState!==null?Sk(v):q!==null?(q.return=M,Se=q):Sk(v);for(;x!==null;)Se=x,bk(x),x=x.sibling;Se=v,Fv=H,xr=ee}Ck(a)}else(v.subtreeFlags&8772)!==0&&x!==null?(x.return=v,Se=x):Ck(a)}}function Ck(a){for(;Se!==null;){var l=Se;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:xr||Sv(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!xr)if(p===null)y.componentDidMount();else{var v=l.elementType===l.type?p.memoizedProps:Ri(l.type,p.memoizedProps);y.componentDidUpdate(v,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var x=l.updateQueue;x!==null&&FT(l,x,y);break;case 3:var M=l.updateQueue;if(M!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}FT(l,M,p)}break;case 5:var H=l.stateNode;if(p===null&&l.flags&4){p=H;var q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&p.focus();break;case"img":q.src&&(p.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ee=l.alternate;if(ee!==null){var le=ee.memoizedState;if(le!==null){var ue=le.dehydrated;ue!==null&&Xl(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}xr||l.flags&512&&Xx(l)}catch(oe){on(l,l.return,oe)}}if(l===a){Se=null;break}if(p=l.sibling,p!==null){p.return=l.return,Se=p;break}Se=l.return}}function Fk(a){for(;Se!==null;){var l=Se;if(l===a){Se=null;break}var p=l.sibling;if(p!==null){p.return=l.return,Se=p;break}Se=l.return}}function Sk(a){for(;Se!==null;){var l=Se;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{Sv(4,l)}catch(q){on(l,p,q)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var v=l.return;try{y.componentDidMount()}catch(q){on(l,v,q)}}var x=l.return;try{Xx(l)}catch(q){on(l,x,q)}break;case 5:var M=l.return;try{Xx(l)}catch(q){on(l,M,q)}}}catch(q){on(l,l.return,q)}if(l===a){Se=null;break}var H=l.sibling;if(H!==null){H.return=l.return,Se=H;break}Se=l.return}}var XO=Math.ceil,Tv=V.ReactCurrentDispatcher,Zx=V.ReactCurrentOwner,ni=V.ReactCurrentBatchConfig,ht=0,Wn=null,Cn=null,sr=0,As=0,Vp=tc(0),Mn=0,J2=null,cd=0,kv=0,eE=0,Z2=null,Xr=null,tE=0,Up=1/0,Po=null,Iv=!1,nE=null,oc=null,Pv=!1,lc=null,Rv=0,eg=0,rE=null,Dv=-1,Nv=0;function Lr(){return(ht&6)!==0?jt():Dv!==-1?Dv:Dv=jt()}function cc(a){return(a.mode&1)===0?1:(ht&2)!==0&&sr!==0?sr&-sr:DO.transition!==null?(Nv===0&&(Nv=_2()),Nv):(a=ot,a!==0||(a=window.event,a=a===void 0?16:mp(a.type)),a)}function Mi(a,l,p,y){if(50<eg)throw eg=0,rE=null,Error(t(185));Yu(a,p,y),((ht&2)===0||a!==Wn)&&(a===Wn&&((ht&2)===0&&(kv|=p),Mn===4&&uc(a,sr)),Yr(a,y),p===1&&ht===0&&(l.mode&1)===0&&(Up=jt()+500,lv&&rc()))}function Yr(a,l){var p=a.callbackNode;Xu(a,l);var y=wo(a,a===Wn?sr:0);if(y===0)p!==null&&lp(p),a.callbackNode=null,a.callbackPriority=0;else if(l=y&-y,a.callbackPriority!==l){if(p!=null&&lp(p),l===1)a.tag===0?RO(kk.bind(null,a)):fT(kk.bind(null,a)),TO(function(){(ht&6)===0&&rc()}),p=null;else{switch(ca(y)){case 1:p=cp;break;case 4:p=w2;break;case 16:p=Gu;break;case 536870912:p=up;break;default:p=Gu}p=Ok(p,Tk.bind(null,a))}a.callbackPriority=l,a.callbackNode=p}}function Tk(a,l){if(Dv=-1,Nv=0,(ht&6)!==0)throw Error(t(327));var p=a.callbackNode;if(jp()&&a.callbackNode!==p)return null;var y=wo(a,a===Wn?sr:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||l)l=Mv(a,y);else{l=y;var v=ht;ht|=2;var x=Pk();(Wn!==a||sr!==l)&&(Po=null,Up=jt()+500,dd(a,l));do try{ZO();break}catch(H){Ik(a,H)}while(!0);_x(),Tv.current=x,ht=v,Cn!==null?l=0:(Wn=null,sr=0,l=Mn)}if(l!==0){if(l===2&&(v=A2(a),v!==0&&(y=v,l=sE(a,v))),l===1)throw p=J2,dd(a,0),uc(a,y),Yr(a,jt()),p;if(l===6)uc(a,y);else{if(v=a.current.alternate,(y&30)===0&&!YO(v)&&(l=Mv(a,y),l===2&&(x=A2(a),x!==0&&(y=x,l=sE(a,x))),l===1))throw p=J2,dd(a,0),uc(a,y),Yr(a,jt()),p;switch(a.finishedWork=v,a.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:hd(a,Xr,Po);break;case 3:if(uc(a,y),(y&130023424)===y&&(l=tE+500-jt(),10<l)){if(wo(a,0)!==0)break;if(v=a.suspendedLanes,(v&y)!==y){Lr(),a.pingedLanes|=a.suspendedLanes&v;break}a.timeoutHandle=ux(hd.bind(null,a,Xr,Po),l);break}hd(a,Xr,Po);break;case 4:if(uc(a,y),(y&4194240)===y)break;for(l=a.eventTimes,v=-1;0<y;){var M=31-ps(y);x=1<<M,M=l[M],M>v&&(v=M),y&=~x}if(y=v,y=jt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*XO(y/1960))-y,10<y){a.timeoutHandle=ux(hd.bind(null,a,Xr,Po),y);break}hd(a,Xr,Po);break;case 5:hd(a,Xr,Po);break;default:throw Error(t(329))}}}return Yr(a,jt()),a.callbackNode===p?Tk.bind(null,a):null}function sE(a,l){var p=Z2;return a.current.memoizedState.isDehydrated&&(dd(a,l).flags|=256),a=Mv(a,l),a!==2&&(l=Xr,Xr=p,l!==null&&iE(l)),a}function iE(a){Xr===null?Xr=a:Xr.push.apply(Xr,a)}function YO(a){for(var l=a;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var v=p[y],x=v.getSnapshot;v=v.value;try{if(!Ii(x(),v))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function uc(a,l){for(l&=~eE,l&=~kv,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var p=31-ps(l),y=1<<p;a[p]=-1,l&=~y}}function kk(a){if((ht&6)!==0)throw Error(t(327));jp();var l=wo(a,0);if((l&1)===0)return Yr(a,jt()),null;var p=Mv(a,l);if(a.tag!==0&&p===2){var y=A2(a);y!==0&&(l=y,p=sE(a,y))}if(p===1)throw p=J2,dd(a,0),uc(a,l),Yr(a,jt()),p;if(p===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,hd(a,Xr,Po),Yr(a,jt()),null}function aE(a,l){var p=ht;ht|=1;try{return a(l)}finally{ht=p,ht===0&&(Up=jt()+500,lv&&rc())}}function ud(a){lc!==null&&lc.tag===0&&(ht&6)===0&&jp();var l=ht;ht|=1;var p=ni.transition,y=ot;try{if(ni.transition=null,ot=1,a)return a()}finally{ot=y,ni.transition=p,ht=l,(ht&6)===0&&rc()}}function oE(){As=Vp.current,zt(Vp)}function dd(a,l){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;if(p!==-1&&(a.timeoutHandle=-1,SO(p)),Cn!==null)for(p=Cn.return;p!==null;){var y=p;switch(gx(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&av();break;case 3:Lp(),zt(qr),zt(vr),kx();break;case 5:Sx(y);break;case 4:Lp();break;case 13:zt(Jt);break;case 19:zt(Jt);break;case 10:xx(y.type._context);break;case 22:case 23:oE()}p=p.return}if(Wn=a,Cn=a=dc(a.current,null),sr=As=l,Mn=0,J2=null,eE=kv=cd=0,Xr=Z2=null,ad!==null){for(l=0;l<ad.length;l++)if(p=ad[l],y=p.interleaved,y!==null){p.interleaved=null;var v=y.next,x=p.pending;if(x!==null){var M=x.next;x.next=v,y.next=M}p.pending=y}ad=null}return a}function Ik(a,l){do{var p=Cn;try{if(_x(),wv.current=xv,vv){for(var y=Zt.memoizedState;y!==null;){var v=y.queue;v!==null&&(v.pending=null),y=y.next}vv=!1}if(ld=0,Hn=Nn=Zt=null,G2=!1,q2=0,Zx.current=null,p===null||p.return===null){Mn=1,J2=l,Cn=null;break}e:{var x=a,M=p.return,H=p,q=l;if(l=sr,H.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var ee=q,le=H,ue=le.tag;if((le.mode&1)===0&&(ue===0||ue===11||ue===15)){var oe=le.alternate;oe?(le.updateQueue=oe.updateQueue,le.memoizedState=oe.memoizedState,le.lanes=oe.lanes):(le.updateQueue=null,le.memoizedState=null)}var Ee=tk(M);if(Ee!==null){Ee.flags&=-257,nk(Ee,M,H,x,l),Ee.mode&1&&ek(x,ee,l),l=Ee,q=ee;var Te=l.updateQueue;if(Te===null){var Ie=new Set;Ie.add(q),l.updateQueue=Ie}else Te.add(q);break e}else{if((l&1)===0){ek(x,ee,l),lE();break e}q=Error(t(426))}}else if(Gt&&H.mode&1){var wn=tk(M);if(wn!==null){(wn.flags&65536)===0&&(wn.flags|=256),nk(wn,M,H,x,l),vx(Op(q,H));break e}}x=q=Op(q,H),Mn!==4&&(Mn=2),Z2===null?Z2=[x]:Z2.push(x),x=M;do{switch(x.tag){case 3:x.flags|=65536,l&=-l,x.lanes|=l;var Y=JT(x,q,l);CT(x,Y);break e;case 1:H=q;var Q=x.type,Z=x.stateNode;if((x.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(oc===null||!oc.has(Z)))){x.flags|=65536,l&=-l,x.lanes|=l;var pe=ZT(x,H,l);CT(x,pe);break e}}x=x.return}while(x!==null)}Dk(p)}catch(Re){l=Re,Cn===p&&p!==null&&(Cn=p=p.return);continue}break}while(!0)}function Pk(){var a=Tv.current;return Tv.current=xv,a===null?xv:a}function lE(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),Wn===null||(cd&268435455)===0&&(kv&268435455)===0||uc(Wn,sr)}function Mv(a,l){var p=ht;ht|=2;var y=Pk();(Wn!==a||sr!==l)&&(Po=null,dd(a,l));do try{JO();break}catch(v){Ik(a,v)}while(!0);if(_x(),ht=p,Tv.current=y,Cn!==null)throw Error(t(261));return Wn=null,sr=0,Mn}function JO(){for(;Cn!==null;)Rk(Cn)}function ZO(){for(;Cn!==null&&!Wu();)Rk(Cn)}function Rk(a){var l=Lk(a.alternate,a,As);a.memoizedProps=a.pendingProps,l===null?Dk(a):Cn=l,Zx.current=null}function Dk(a){var l=a;do{var p=l.alternate;if(a=l.return,(l.flags&32768)===0){if(p=WO(p,l,As),p!==null){Cn=p;return}}else{if(p=GO(p,l),p!==null){p.flags&=32767,Cn=p;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Mn=6,Cn=null;return}}if(l=l.sibling,l!==null){Cn=l;return}Cn=l=a}while(l!==null);Mn===0&&(Mn=5)}function hd(a,l,p){var y=ot,v=ni.transition;try{ni.transition=null,ot=1,e4(a,l,p,y)}finally{ni.transition=v,ot=y}return null}function e4(a,l,p,y){do jp();while(lc!==null);if((ht&6)!==0)throw Error(t(327));p=a.finishedWork;var v=a.finishedLanes;if(p===null)return null;if(a.finishedWork=null,a.finishedLanes=0,p===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var x=p.lanes|p.childLanes;if(K1(a,x),a===Wn&&(Cn=Wn=null,sr=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Pv||(Pv=!0,Ok(Gu,function(){return jp(),null})),x=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||x){x=ni.transition,ni.transition=null;var M=ot;ot=1;var H=ht;ht|=4,Zx.current=null,KO(a,p),Ek(p,a),AO(lx),_o=!!ox,lx=ox=null,a.current=p,QO(p),yo(),ht=H,ot=M,ni.transition=x}else a.current=p;if(Pv&&(Pv=!1,lc=a,Rv=v),x=a.pendingLanes,x===0&&(oc=null),$0(p.stateNode),Yr(a,jt()),l!==null)for(y=a.onRecoverableError,p=0;p<l.length;p++)v=l[p],y(v.value,{componentStack:v.stack,digest:v.digest});if(Iv)throw Iv=!1,a=nE,nE=null,a;return(Rv&1)!==0&&a.tag!==0&&jp(),x=a.pendingLanes,(x&1)!==0?a===rE?eg++:(eg=0,rE=a):eg=0,rc(),null}function jp(){if(lc!==null){var a=ca(Rv),l=ni.transition,p=ot;try{if(ni.transition=null,ot=16>a?16:a,lc===null)var y=!1;else{if(a=lc,lc=null,Rv=0,(ht&6)!==0)throw Error(t(331));var v=ht;for(ht|=4,Se=a.current;Se!==null;){var x=Se,M=x.child;if((Se.flags&16)!==0){var H=x.deletions;if(H!==null){for(var q=0;q<H.length;q++){var ee=H[q];for(Se=ee;Se!==null;){var le=Se;switch(le.tag){case 0:case 11:case 15:Y2(8,le,x)}var ue=le.child;if(ue!==null)ue.return=le,Se=ue;else for(;Se!==null;){le=Se;var oe=le.sibling,Ee=le.return;if(wk(le),le===ee){Se=null;break}if(oe!==null){oe.return=Ee,Se=oe;break}Se=Ee}}}var Te=x.alternate;if(Te!==null){var Ie=Te.child;if(Ie!==null){Te.child=null;do{var wn=Ie.sibling;Ie.sibling=null,Ie=wn}while(Ie!==null)}}Se=x}}if((x.subtreeFlags&2064)!==0&&M!==null)M.return=x,Se=M;else e:for(;Se!==null;){if(x=Se,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Y2(9,x,x.return)}var Y=x.sibling;if(Y!==null){Y.return=x.return,Se=Y;break e}Se=x.return}}var Q=a.current;for(Se=Q;Se!==null;){M=Se;var Z=M.child;if((M.subtreeFlags&2064)!==0&&Z!==null)Z.return=M,Se=Z;else e:for(M=Q;Se!==null;){if(H=Se,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:Sv(9,H)}}catch(Re){on(H,H.return,Re)}if(H===M){Se=null;break e}var pe=H.sibling;if(pe!==null){pe.return=H.return,Se=pe;break e}Se=H.return}}if(ht=v,rc(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(qu,a)}catch{}y=!0}return y}finally{ot=p,ni.transition=l}}return!1}function Nk(a,l,p){l=Op(p,l),l=JT(a,l,1),a=ic(a,l,1),l=Lr(),a!==null&&(Yu(a,1,l),Yr(a,l))}function on(a,l,p){if(a.tag===3)Nk(a,a,p);else for(;l!==null;){if(l.tag===3){Nk(l,a,p);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(oc===null||!oc.has(y))){a=Op(p,a),a=ZT(l,a,1),l=ic(l,a,1),a=Lr(),l!==null&&(Yu(l,1,a),Yr(l,a));break}}l=l.return}}function t4(a,l,p){var y=a.pingCache;y!==null&&y.delete(l),l=Lr(),a.pingedLanes|=a.suspendedLanes&p,Wn===a&&(sr&p)===p&&(Mn===4||Mn===3&&(sr&130023424)===sr&&500>jt()-tE?dd(a,0):eE|=p),Yr(a,l)}function Mk(a,l){l===0&&((a.mode&1)===0?l=1:(l=ql,ql<<=1,(ql&130023424)===0&&(ql=4194304)));var p=Lr();a=To(a,l),a!==null&&(Yu(a,l,p),Yr(a,p))}function n4(a){var l=a.memoizedState,p=0;l!==null&&(p=l.retryLane),Mk(a,p)}function r4(a,l){var p=0;switch(a.tag){case 13:var y=a.stateNode,v=a.memoizedState;v!==null&&(p=v.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),Mk(a,p)}var Lk;Lk=function(a,l,p){if(a!==null)if(a.memoizedProps!==l.pendingProps||qr.current)Qr=!0;else{if((a.lanes&p)===0&&(l.flags&128)===0)return Qr=!1,HO(a,l,p);Qr=(a.flags&131072)!==0}else Qr=!1,Gt&&(l.flags&1048576)!==0&&mT(l,uv,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Cv(a,l),a=l.pendingProps;var v=kp(l,vr.current);Mp(l,p),v=Rx(null,l,y,a,v,p);var x=Dx();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Kr(y)?(x=!0,ov(l)):x=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Cx(l),v.updater=Ev,l.stateNode=v,v._reactInternals=l,Vx(l,y,a,p),l=zx(null,l,y,!0,x,p)):(l.tag=0,Gt&&x&&mx(l),Mr(null,l,v,p),l=l.child),l;case 16:y=l.elementType;e:{switch(Cv(a,l),a=l.pendingProps,v=y._init,y=v(y._payload),l.type=y,v=l.tag=i4(y),a=Ri(y,a),v){case 0:l=$x(null,l,y,a,p);break e;case 1:l=lk(null,l,y,a,p);break e;case 11:l=rk(null,l,y,a,p);break e;case 14:l=sk(null,l,y,Ri(y.type,a),p);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,v=l.pendingProps,v=l.elementType===y?v:Ri(y,v),$x(a,l,y,v,p);case 1:return y=l.type,v=l.pendingProps,v=l.elementType===y?v:Ri(y,v),lk(a,l,y,v,p);case 3:e:{if(ck(l),a===null)throw Error(t(387));y=l.pendingProps,x=l.memoizedState,v=x.element,bT(a,l),gv(l,y,null,p);var M=l.memoizedState;if(y=M.element,x.isDehydrated)if(x={element:y,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){v=Op(Error(t(423)),l),l=uk(a,l,y,p,v);break e}else if(y!==v){v=Op(Error(t(424)),l),l=uk(a,l,y,p,v);break e}else for(vs=ec(l.stateNode.containerInfo.firstChild),ws=l,Gt=!0,Pi=null,p=xT(l,null,y,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Rp(),y===v){l=Io(a,l,p);break e}Mr(a,l,y,p)}l=l.child}return l;case 5:return ST(l),a===null&&wx(l),y=l.type,v=l.pendingProps,x=a!==null?a.memoizedProps:null,M=v.children,cx(y,v)?M=null:x!==null&&cx(y,x)&&(l.flags|=32),ok(a,l),Mr(a,l,M,p),l.child;case 6:return a===null&&wx(l),null;case 13:return dk(a,l,p);case 4:return Fx(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=Dp(l,null,y,p):Mr(a,l,y,p),l.child;case 11:return y=l.type,v=l.pendingProps,v=l.elementType===y?v:Ri(y,v),rk(a,l,y,v,p);case 7:return Mr(a,l,l.pendingProps,p),l.child;case 8:return Mr(a,l,l.pendingProps.children,p),l.child;case 12:return Mr(a,l,l.pendingProps.children,p),l.child;case 10:e:{if(y=l.type._context,v=l.pendingProps,x=l.memoizedProps,M=v.value,Lt(pv,y._currentValue),y._currentValue=M,x!==null)if(Ii(x.value,M)){if(x.children===v.children&&!qr.current){l=Io(a,l,p);break e}}else for(x=l.child,x!==null&&(x.return=l);x!==null;){var H=x.dependencies;if(H!==null){M=x.child;for(var q=H.firstContext;q!==null;){if(q.context===y){if(x.tag===1){q=ko(-1,p&-p),q.tag=2;var ee=x.updateQueue;if(ee!==null){ee=ee.shared;var le=ee.pending;le===null?q.next=q:(q.next=le.next,le.next=q),ee.pending=q}}x.lanes|=p,q=x.alternate,q!==null&&(q.lanes|=p),Ex(x.return,p,l),H.lanes|=p;break}q=q.next}}else if(x.tag===10)M=x.type===l.type?null:x.child;else if(x.tag===18){if(M=x.return,M===null)throw Error(t(341));M.lanes|=p,H=M.alternate,H!==null&&(H.lanes|=p),Ex(M,p,l),M=x.sibling}else M=x.child;if(M!==null)M.return=x;else for(M=x;M!==null;){if(M===l){M=null;break}if(x=M.sibling,x!==null){x.return=M.return,M=x;break}M=M.return}x=M}Mr(a,l,v.children,p),l=l.child}return l;case 9:return v=l.type,y=l.pendingProps.children,Mp(l,p),v=ei(v),y=y(v),l.flags|=1,Mr(a,l,y,p),l.child;case 14:return y=l.type,v=Ri(y,l.pendingProps),v=Ri(y.type,v),sk(a,l,y,v,p);case 15:return ik(a,l,l.type,l.pendingProps,p);case 17:return y=l.type,v=l.pendingProps,v=l.elementType===y?v:Ri(y,v),Cv(a,l),l.tag=1,Kr(y)?(a=!0,ov(l)):a=!1,Mp(l,p),XT(l,y,v),Vx(l,y,v,p),zx(null,l,y,!0,a,p);case 19:return pk(a,l,p);case 22:return ak(a,l,p)}throw Error(t(156,l.tag))};function Ok(a,l){return y2(a,l)}function s4(a,l,p,y){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(a,l,p,y){return new s4(a,l,p,y)}function cE(a){return a=a.prototype,!(!a||!a.isReactComponent)}function i4(a){if(typeof a=="function")return cE(a)?1:0;if(a!=null){if(a=a.$$typeof,a===G)return 11;if(a===ce)return 14}return 2}function dc(a,l){var p=a.alternate;return p===null?(p=ri(a.tag,l,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=l,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&14680064,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,l=a.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p}function Lv(a,l,p,y,v,x){var M=2;if(y=a,typeof a=="function")cE(a)&&(M=1);else if(typeof a=="string")M=5;else e:switch(a){case D:return pd(p.children,v,x,l);case R:M=8,v|=8;break;case L:return a=ri(12,p,l,v|2),a.elementType=L,a.lanes=x,a;case j:return a=ri(13,p,l,v),a.elementType=j,a.lanes=x,a;case ye:return a=ri(19,p,l,v),a.elementType=ye,a.lanes=x,a;case me:return Ov(p,v,x,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case U:M=10;break e;case $:M=9;break e;case G:M=11;break e;case ce:M=14;break e;case de:M=16,y=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=ri(M,p,l,v),l.elementType=a,l.type=y,l.lanes=x,l}function pd(a,l,p,y){return a=ri(7,a,y,l),a.lanes=p,a}function Ov(a,l,p,y){return a=ri(22,a,y,l),a.elementType=me,a.lanes=p,a.stateNode={isHidden:!1},a}function uE(a,l,p){return a=ri(6,a,null,l),a.lanes=p,a}function dE(a,l,p){return l=ri(4,a.children!==null?a.children:[],a.key,l),l.lanes=p,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function a4(a,l,p,y,v){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=x2(0),this.expirationTimes=x2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=x2(0),this.identifierPrefix=y,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function hE(a,l,p,y,v,x,M,H,q){return a=new a4(a,l,p,H,q),l===1?(l=1,x===!0&&(l|=8)):l=0,x=ri(3,null,null,l),a.current=x,x.stateNode=a,x.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cx(x),a}function o4(a,l,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:y==null?null:""+y,children:a,containerInfo:l,implementation:p}}function Bk(a){if(!a)return nc;a=a._reactInternals;e:{if(Ti(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Kr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var p=a.type;if(Kr(p))return hT(a,p,l)}return l}function Vk(a,l,p,y,v,x,M,H,q){return a=hE(p,y,!0,a,v,x,M,H,q),a.context=Bk(null),p=a.current,y=Lr(),v=cc(p),x=ko(y,v),x.callback=l??null,ic(p,x,v),a.current.lanes=v,Yu(a,v,y),Yr(a,y),a}function Bv(a,l,p,y){var v=l.current,x=Lr(),M=cc(v);return p=Bk(p),l.context===null?l.context=p:l.pendingContext=p,l=ko(x,M),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=ic(v,l,M),a!==null&&(Mi(a,v,M,x),mv(a,v,M)),M}function Vv(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Uk(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<l?p:l}}function pE(a,l){Uk(a,l),(a=a.alternate)&&Uk(a,l)}function l4(){return null}var jk=typeof reportError=="function"?reportError:function(a){console.error(a)};function fE(a){this._internalRoot=a}Uv.prototype.render=fE.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));Bv(a,l,null,null)},Uv.prototype.unmount=fE.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;ud(function(){Bv(null,a,null,null)}),l[bo]=null}};function Uv(a){this._internalRoot=a}Uv.prototype.unstable_scheduleHydration=function(a){if(a){var l=F2();a={blockedOn:null,target:a,priority:l};for(var p=0;p<fs.length&&l!==0&&l<fs[p].priority;p++);fs.splice(p,0,a),p===0&&pp(a)}};function mE(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function jv(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function $k(){}function c4(a,l,p,y,v){if(v){if(typeof y=="function"){var x=y;y=function(){var ee=Vv(M);x.call(ee)}}var M=Vk(l,y,a,0,null,!1,!1,"",$k);return a._reactRootContainer=M,a[bo]=M.current,B2(a.nodeType===8?a.parentNode:a),ud(),M}for(;v=a.lastChild;)a.removeChild(v);if(typeof y=="function"){var H=y;y=function(){var ee=Vv(q);H.call(ee)}}var q=hE(a,0,!1,null,null,!1,!1,"",$k);return a._reactRootContainer=q,a[bo]=q.current,B2(a.nodeType===8?a.parentNode:a),ud(function(){Bv(l,q,p,y)}),q}function $v(a,l,p,y,v){var x=p._reactRootContainer;if(x){var M=x;if(typeof v=="function"){var H=v;v=function(){var q=Vv(M);H.call(q)}}Bv(l,M,a,v)}else M=c4(p,l,a,v,y);return Vv(M)}b2=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var p=yt(l.pendingLanes);p!==0&&(E2(l,p|1),Yr(l,jt()),(ht&6)===0&&(Up=jt()+500,rc()))}break;case 13:ud(function(){var y=To(a,1);if(y!==null){var v=Lr();Mi(y,a,1,v)}}),pE(a,1)}},dp=function(a){if(a.tag===13){var l=To(a,134217728);if(l!==null){var p=Lr();Mi(l,a,134217728,p)}pE(a,134217728)}},C2=function(a){if(a.tag===13){var l=cc(a),p=To(a,l);if(p!==null){var y=Lr();Mi(p,a,l,y)}pE(a,l)}},F2=function(){return ot},S2=function(a,l){var p=ot;try{return ot=a,l()}finally{ot=p}},fo=function(a,l,p){switch(l){case"input":if(ju(a,p),l=p.name,p.type==="radio"&&l!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var y=p[l];if(y!==a&&y.form===a.form){var v=iv(y);if(!v)throw Error(t(90));zn(y),ju(y,v)}}}break;case"textarea":I0(a,p);break;case"select":l=p.value,l!=null&&Fi(a,!!p.multiple,l,!1)}},D0=aE,N0=ud;var u4={usingClientEntryPoint:!1,Events:[j2,Sp,iv,zl,Hl,aE]},tg={findFiberByHostInstance:nd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},d4={bundleType:tg.bundleType,version:tg.version,rendererPackageName:tg.rendererPackageName,rendererConfig:tg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=j0(a),a===null?null:a.stateNode},findFiberByHostInstance:tg.findFiberByHostInstance||l4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zv.isDisabled&&zv.supportsFiber)try{qu=zv.inject(d4),hs=zv}catch{}}return Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u4,Jr.createPortal=function(a,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mE(l))throw Error(t(200));return o4(a,l,null,p)},Jr.createRoot=function(a,l){if(!mE(a))throw Error(t(299));var p=!1,y="",v=jk;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=hE(a,1,!1,null,null,p,!1,y,v),a[bo]=l.current,B2(a.nodeType===8?a.parentNode:a),new fE(l)},Jr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=j0(l),a=a===null?null:a.stateNode,a},Jr.flushSync=function(a){return ud(a)},Jr.hydrate=function(a,l,p){if(!jv(l))throw Error(t(200));return $v(null,a,l,!0,p)},Jr.hydrateRoot=function(a,l,p){if(!mE(a))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,v=!1,x="",M=jk;if(p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(x=p.identifierPrefix),p.onRecoverableError!==void 0&&(M=p.onRecoverableError)),l=Vk(l,null,a,1,p??null,v,!1,x,M),a[bo]=l.current,B2(a),y)for(a=0;a<y.length;a++)p=y[a],v=p._getVersion,v=v(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,v]:l.mutableSourceEagerHydrationData.push(p,v);return new Uv(l)},Jr.render=function(a,l,p){if(!jv(l))throw Error(t(200));return $v(null,a,l,!1,p)},Jr.unmountComponentAtNode=function(a){if(!jv(a))throw Error(t(40));return a._reactRootContainer?(ud(function(){$v(null,null,a,!1,function(){a._reactRootContainer=null,a[bo]=null})}),!0):!1},Jr.unstable_batchedUpdates=aE,Jr.unstable_renderSubtreeIntoContainer=function(a,l,p,y){if(!jv(p))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return $v(a,l,p,!1,y)},Jr.version="18.3.1-next-f1338f8080-20240426",Jr}var Yk;function x4(){if(Yk)return vE.exports;Yk=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),vE.exports=_4(),vE.exports}var Jk;function E4(){if(Jk)return Wv;Jk=1;var s=x4();return Wv.createRoot=s.createRoot,Wv.hydrateRoot=s.hydrateRoot,Wv}var b4=E4();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zk="popstate";function C4(s={}){function e(r,i){let{pathname:o="/",search:u="",hash:d=""}=qh(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),XE("",{pathname:o,search:u,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){let o=r.document.querySelector("base"),u="";if(o&&o.getAttribute("href")){let d=r.location.href,h=d.indexOf("#");u=h===-1?d:d.slice(0,h)}return u+"#"+(typeof i=="string"?i:qg(i))}function n(r,i){bi(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return S4(e,t,n,s)}function Xt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function bi(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F4(){return Math.random().toString(36).substring(2,10)}function eI(s,e){return{usr:s.state,key:s.key,idx:e}}function XE(s,e,t=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?qh(e):e,state:t,key:e&&e.key||n||F4()}}function qg({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function qh(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substring(n),s=s.substring(0,n)),s&&(e.pathname=s)}return e}function S4(s,e,t,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,o=r.history,u="POP",d=null,h=f();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function f(){return(o.state||{idx:null}).idx}function g(){u="POP";let T=f(),P=T==null?null:T-h;h=T,d&&d({action:u,location:C.location,delta:P})}function w(T,P){u="PUSH";let O=XE(C.location,T,P);t&&t(O,T),h=f()+1;let N=eI(O,h),V=C.createHref(O);try{o.pushState(N,"",V)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;r.location.assign(V)}i&&d&&d({action:u,location:C.location,delta:1})}function A(T,P){u="REPLACE";let O=XE(C.location,T,P);t&&t(O,T),h=f();let N=eI(O,h),V=C.createHref(O);o.replaceState(N,"",V),i&&d&&d({action:u,location:C.location,delta:0})}function F(T){return T4(T)}let C={get action(){return u},get location(){return s(r,o)},listen(T){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Zk,g),d=T,()=>{r.removeEventListener(Zk,g),d=null}},createHref(T){return e(r,T)},createURL:F,encodeLocation(T){let P=F(T);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:w,replace:A,go(T){return o.go(T)}};return C}function T4(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Xt(t,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:qg(s);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function CR(s,e,t="/"){return k4(s,e,t,!1)}function k4(s,e,t,n){let r=typeof e=="string"?qh(e):e,i=Fl(r.pathname||"/",t);if(i==null)return null;let o=FR(s);I4(o);let u=null;for(let d=0;u==null&&d<o.length;++d){let h=j4(i);u=V4(o[d],h,n)}return u}function FR(s,e=[],t=[],n="",r=!1){let i=(o,u,d=r,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Xt(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let g=xl([n,f.relativePath]),w=t.concat(f);o.children&&o.children.length>0&&(Xt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),FR(o.children,e,w,g,d)),!(o.path==null&&!o.index)&&e.push({path:g,score:O4(g,o.index),routesMeta:w})};return s.forEach((o,u)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,u);else for(let h of SR(o.path))i(o,u,!0,h)}),e}function SR(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let o=SR(n.join("/")),u=[];return u.push(...o.map(d=>d===""?i:[i,d].join("/"))),r&&u.push(...o),u.map(d=>s.startsWith("/")&&d===""?"/":d)}function I4(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:B4(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var P4=/^:[\w-]+$/,R4=3,D4=2,N4=1,M4=10,L4=-2,tI=s=>s==="*";function O4(s,e){let t=s.split("/"),n=t.length;return t.some(tI)&&(n+=L4),e&&(n+=D4),t.filter(r=>!tI(r)).reduce((r,i)=>r+(P4.test(i)?R4:i===""?N4:M4),n)}function B4(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function V4(s,e,t=!1){let{routesMeta:n}=s,r={},i="/",o=[];for(let u=0;u<n.length;++u){let d=n[u],h=u===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=i_({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),w=d.route;if(!g&&h&&t&&!n[n.length-1].route.index&&(g=i_({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!g)return null;Object.assign(r,g.params),o.push({params:r,pathname:xl([i,g.pathname]),pathnameBase:W4(xl([i,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(i=xl([i,g.pathnameBase]))}return o}function i_(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=U4(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:n.reduce((h,{paramName:f,isOptional:g},w)=>{if(f==="*"){let F=u[w]||"";o=i.slice(0,i.length-F.length).replace(/(.)\/+$/,"$1")}const A=u[w];return g&&!A?h[f]=void 0:h[f]=(A||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:s}}function U4(s,e=!1,t=!0){bi(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function j4(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bi(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Fl(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}var $4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function z4(s,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?qh(s):s,i;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?i=nI(t.substring(1),"/"):i=nI(t,e)):i=e,{pathname:i,search:G4(n),hash:q4(r)}}function nI(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function xE(s,e,t,n){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function H4(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sF(s){let e=H4(s);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function iF(s,e,t,n=!1){let r;typeof s=="string"?r=qh(s):(r={...s},Xt(!r.pathname||!r.pathname.includes("?"),xE("?","pathname","search",r)),Xt(!r.pathname||!r.pathname.includes("#"),xE("#","pathname","hash",r)),Xt(!r.search||!r.search.includes("#"),xE("#","search","hash",r)));let i=s===""||r.pathname==="",o=i?"/":r.pathname,u;if(o==null)u=t;else{let g=e.length-1;if(!n&&o.startsWith("..")){let w=o.split("/");for(;w[0]==="..";)w.shift(),g-=1;r.pathname=w.join("/")}u=g>=0?e[g]:"/"}let d=z4(r,u),h=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}var xl=s=>s.join("/").replace(/\/\/+/g,"/"),W4=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),G4=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,q4=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,K4=class{constructor(s,e,t,n=!1){this.status=s,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Q4(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function X4(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var TR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function kR(s,e){let t=s;if(typeof t!="string"||!$4.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,r=!1;if(TR)try{let i=new URL(window.location.href),o=t.startsWith("//")?new URL(i.protocol+t):new URL(t),u=Fl(o.pathname,e);o.origin===i.origin&&u!=null?t=u+o.search+o.hash:r=!0}catch{bi(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var IR=["POST","PUT","PATCH","DELETE"];new Set(IR);var Y4=["GET",...IR];new Set(Y4);var Zm=K.createContext(null);Zm.displayName="DataRouter";var s1=K.createContext(null);s1.displayName="DataRouterState";var J4=K.createContext(!1),PR=K.createContext({isTransitioning:!1});PR.displayName="ViewTransition";var Z4=K.createContext(new Map);Z4.displayName="Fetchers";var e7=K.createContext(null);e7.displayName="Await";var Qs=K.createContext(null);Qs.displayName="Navigation";var i0=K.createContext(null);i0.displayName="Location";var ho=K.createContext({outlet:null,matches:[],isDataRoute:!1});ho.displayName="Route";var aF=K.createContext(null);aF.displayName="RouteError";var RR="REACT_ROUTER_ERROR",t7="REDIRECT",n7="ROUTE_ERROR_RESPONSE";function r7(s){if(s.startsWith(`${RR}:${t7}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function s7(s){if(s.startsWith(`${RR}:${n7}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new K4(e.status,e.statusText,e.data)}catch{}}function i7(s,{relative:e}={}){Xt(e2(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=K.useContext(Qs),{hash:r,pathname:i,search:o}=a0(s,{relative:e}),u=i;return t!=="/"&&(u=i==="/"?t:xl([t,i])),n.createHref({pathname:u,search:o,hash:r})}function e2(){return K.useContext(i0)!=null}function Mu(){return Xt(e2(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(i0).location}var DR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NR(s){K.useContext(Qs).static||K.useLayoutEffect(s)}function i1(){let{isDataRoute:s}=K.useContext(ho);return s?w7():a7()}function a7(){Xt(e2(),"useNavigate() may be used only in the context of a <Router> component.");let s=K.useContext(Zm),{basename:e,navigator:t}=K.useContext(Qs),{matches:n}=K.useContext(ho),{pathname:r}=Mu(),i=JSON.stringify(sF(n)),o=K.useRef(!1);return NR(()=>{o.current=!0}),K.useCallback((d,h={})=>{if(bi(o.current,DR),!o.current)return;if(typeof d=="number"){t.go(d);return}let f=iF(d,JSON.parse(i),r,h.relative==="path");s==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:xl([e,f.pathname])),(h.replace?t.replace:t.push)(f,h.state,h)},[e,t,i,r,s])}K.createContext(null);function a0(s,{relative:e}={}){let{matches:t}=K.useContext(ho),{pathname:n}=Mu(),r=JSON.stringify(sF(t));return K.useMemo(()=>iF(s,JSON.parse(r),n,e==="path"),[s,r,n,e])}function o7(s,e){return MR(s,e)}function MR(s,e,t,n,r){var O;Xt(e2(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=K.useContext(Qs),{matches:o}=K.useContext(ho),u=o[o.length-1],d=u?u.params:{},h=u?u.pathname:"/",f=u?u.pathnameBase:"/",g=u&&u.route;{let N=g&&g.path||"";OR(h,!g||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let w=Mu(),A;if(e){let N=typeof e=="string"?qh(e):e;Xt(f==="/"||((O=N.pathname)==null?void 0:O.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${N.pathname}" was given in the \`location\` prop.`),A=N}else A=w;let F=A.pathname||"/",C=F;if(f!=="/"){let N=f.replace(/^\//,"").split("/");C="/"+F.replace(/^\//,"").split("/").slice(N.length).join("/")}let T=CR(s,{pathname:C});bi(g||T!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),bi(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=h7(T&&T.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:xl([f,i.encodeLocation?i.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:xl([f,i.encodeLocation?i.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),o,t,n,r);return e&&P?K.createElement(i0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},P):P}function l7(){let s=y7(),e=Q4(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:i},"ErrorBoundary")," or"," ",K.createElement("code",{style:i},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:r},t):null,o)}var c7=K.createElement(l7,null),LR=class extends K.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=s7(s.digest);t&&(s=t)}let e=s!==void 0?K.createElement(ho.Provider,{value:this.props.routeContext},K.createElement(aF.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?K.createElement(u7,{error:s},e):e}};LR.contextType=J4;var EE=new WeakMap;function u7({children:s,error:e}){let{basename:t}=K.useContext(Qs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=r7(e.digest);if(n){let r=EE.get(e);if(r)throw r;let i=kR(n.location,t);if(TR&&!EE.get(e))if(i.isExternal||n.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:n.replace}));throw EE.set(e,o),o}return K.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return s}function d7({routeContext:s,match:e,children:t}){let n=K.useContext(Zm);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(ho.Provider,{value:s},t)}function h7(s,e=[],t=null,n=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let i=s,o=t==null?void 0:t.errors;if(o!=null){let f=i.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);Xt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let u=!1,d=-1;if(t)for(let f=0;f<i.length;f++){let g=i[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:w,errors:A}=t,F=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!A||A[g.route.id]===void 0);if(g.route.lazy||F){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}let h=t&&n?(f,g)=>{var w,A;n(f,{location:t.location,params:((A=(w=t.matches)==null?void 0:w[0])==null?void 0:A.params)??{},unstable_pattern:X4(t.matches),errorInfo:g})}:void 0;return i.reduceRight((f,g,w)=>{let A,F=!1,C=null,T=null;t&&(A=o&&g.route.id?o[g.route.id]:void 0,C=g.route.errorElement||c7,u&&(d<0&&w===0?(OR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,T=null):d===w&&(F=!0,T=g.route.hydrateFallbackElement||null)));let P=e.concat(i.slice(0,w+1)),O=()=>{let N;return A?N=C:F?N=T:g.route.Component?N=K.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=f,K.createElement(d7,{match:g,routeContext:{outlet:f,matches:P,isDataRoute:t!=null},children:N})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?K.createElement(LR,{location:t.location,revalidation:t.revalidation,component:C,error:A,children:O(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:h}):O()},null)}function oF(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p7(s){let e=K.useContext(Zm);return Xt(e,oF(s)),e}function f7(s){let e=K.useContext(s1);return Xt(e,oF(s)),e}function m7(s){let e=K.useContext(ho);return Xt(e,oF(s)),e}function lF(s){let e=m7(s),t=e.matches[e.matches.length-1];return Xt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function g7(){return lF("useRouteId")}function y7(){var n;let s=K.useContext(aF),e=f7("useRouteError"),t=lF("useRouteError");return s!==void 0?s:(n=e.errors)==null?void 0:n[t]}function w7(){let{router:s}=p7("useNavigate"),e=lF("useNavigate"),t=K.useRef(!1);return NR(()=>{t.current=!0}),K.useCallback(async(r,i={})=>{bi(t.current,DR),t.current&&(typeof r=="number"?await s.navigate(r):await s.navigate(r,{fromRouteId:e,...i}))},[s,e])}var rI={};function OR(s,e,t){!e&&!rI[s]&&(rI[s]=!0,bi(!1,t))}K.memo(v7);function v7({routes:s,future:e,state:t,onError:n}){return MR(s,void 0,t,n,e)}function YE({to:s,replace:e,state:t,relative:n}){Xt(e2(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=K.useContext(Qs);bi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=K.useContext(ho),{pathname:o}=Mu(),u=i1(),d=iF(s,sF(i),o,n==="path"),h=JSON.stringify(d);return K.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:n})},[u,h,n,e,t]),null}function _s(s){Xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function A7({basename:s="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:i=!1,unstable_useTransitions:o}){Xt(!e2(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=s.replace(/^\/*/,"/"),d=K.useMemo(()=>({basename:u,navigator:r,static:i,unstable_useTransitions:o,future:{}}),[u,r,i,o]);typeof t=="string"&&(t=qh(t));let{pathname:h="/",search:f="",hash:g="",state:w=null,key:A="default"}=t,F=K.useMemo(()=>{let C=Fl(h,u);return C==null?null:{location:{pathname:C,search:f,hash:g,state:w,key:A},navigationType:n}},[u,h,f,g,w,A,n]);return bi(F!=null,`<Router basename="${u}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:K.createElement(Qs.Provider,{value:d},K.createElement(i0.Provider,{children:e,value:F}))}function _7({children:s,location:e}){return o7(JE(s),e)}function JE(s,e=[]){let t=[];return K.Children.forEach(s,(n,r)=>{if(!K.isValidElement(n))return;let i=[...e,r];if(n.type===K.Fragment){t.push.apply(t,JE(n.props.children,i));return}Xt(n.type===_s,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=JE(n.props.children,i)),t.push(o)}),t}var dA="get",hA="application/x-www-form-urlencoded";function a1(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function x7(s){return a1(s)&&s.tagName.toLowerCase()==="button"}function E7(s){return a1(s)&&s.tagName.toLowerCase()==="form"}function b7(s){return a1(s)&&s.tagName.toLowerCase()==="input"}function C7(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function F7(s,e){return s.button===0&&(!e||e==="_self")&&!C7(s)}var Gv=null;function S7(){if(Gv===null)try{new FormData(document.createElement("form"),0),Gv=!1}catch{Gv=!0}return Gv}var T7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bE(s){return s!=null&&!T7.has(s)?(bi(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hA}"`),null):s}function k7(s,e){let t,n,r,i,o;if(E7(s)){let u=s.getAttribute("action");n=u?Fl(u,e):null,t=s.getAttribute("method")||dA,r=bE(s.getAttribute("enctype"))||hA,i=new FormData(s)}else if(x7(s)||b7(s)&&(s.type==="submit"||s.type==="image")){let u=s.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||u.getAttribute("action");if(n=d?Fl(d,e):null,t=s.getAttribute("formmethod")||u.getAttribute("method")||dA,r=bE(s.getAttribute("formenctype"))||bE(u.getAttribute("enctype"))||hA,i=new FormData(u,s),!S7()){let{name:h,type:f,value:g}=s;if(f==="image"){let w=h?`${h}.`:"";i.append(`${w}x`,"0"),i.append(`${w}y`,"0")}else h&&i.append(h,g)}}else{if(a1(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=dA,n=null,r=hA,o=s}return i&&r==="text/plain"&&(o=i,i=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cF(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function I7(s,e,t,n){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${n}`:r.pathname=`${r.pathname}.${n}`:r.pathname==="/"?r.pathname=`_root.${n}`:e&&Fl(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function P7(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function R7(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function D7(s,e,t){let n=await Promise.all(s.map(async r=>{let i=e.routes[r.route.id];if(i){let o=await P7(i,t);return o.links?o.links():[]}return[]}));return O7(n.flat(1).filter(R7).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function sI(s,e,t,n,r,i){let o=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var f;return t[h].pathname!==d.pathname||((f=t[h].route.path)==null?void 0:f.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return i==="assets"?e.filter((d,h)=>o(d,h)||u(d,h)):i==="data"?e.filter((d,h)=>{var g;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(o(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function N7(s,e,{includeHydrateFallback:t}={}){return M7(s.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function M7(s){return[...new Set(s)]}function L7(s){let e={},t=Object.keys(s).sort();for(let n of t)e[n]=s[n];return e}function O7(s,e){let t=new Set;return new Set(e),s.reduce((n,r)=>{let i=JSON.stringify(L7(r));return t.has(i)||(t.add(i),n.push({key:i,link:r})),n},[])}function BR(){let s=K.useContext(Zm);return cF(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function B7(){let s=K.useContext(s1);return cF(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var uF=K.createContext(void 0);uF.displayName="FrameworkContext";function VR(){let s=K.useContext(uF);return cF(s,"You must render this element inside a <HydratedRouter> element"),s}function V7(s,e){let t=K.useContext(uF),[n,r]=K.useState(!1),[i,o]=K.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:f,onTouchStart:g}=e,w=K.useRef(null);K.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let C=P=>{P.forEach(O=>{o(O.isIntersecting)})},T=new IntersectionObserver(C,{threshold:.5});return w.current&&T.observe(w.current),()=>{T.disconnect()}}},[s]),K.useEffect(()=>{if(n){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[n]);let A=()=>{r(!0)},F=()=>{r(!1),o(!1)};return t?s!=="intent"?[i,w,{}]:[i,w,{onFocus:rg(u,A),onBlur:rg(d,F),onMouseEnter:rg(h,A),onMouseLeave:rg(f,F),onTouchStart:rg(g,A)}]:[!1,w,{}]}function rg(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function U7({page:s,...e}){let{router:t}=BR(),n=K.useMemo(()=>CR(t.routes,s,t.basename),[t.routes,s,t.basename]);return n?K.createElement($7,{page:s,matches:n,...e}):null}function j7(s){let{manifest:e,routeModules:t}=VR(),[n,r]=K.useState([]);return K.useEffect(()=>{let i=!1;return D7(s,e,t).then(o=>{i||r(o)}),()=>{i=!0}},[s,e,t]),n}function $7({page:s,matches:e,...t}){let n=Mu(),{future:r,manifest:i,routeModules:o}=VR(),{basename:u}=BR(),{loaderData:d,matches:h}=B7(),f=K.useMemo(()=>sI(s,e,h,i,n,"data"),[s,e,h,i,n]),g=K.useMemo(()=>sI(s,e,h,i,n,"assets"),[s,e,h,i,n]),w=K.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let C=new Set,T=!1;if(e.forEach(O=>{var V;let N=i.routes[O.route.id];!N||!N.hasLoader||(!f.some(z=>z.route.id===O.route.id)&&O.route.id in d&&((V=o[O.route.id])!=null&&V.shouldRevalidate)||N.hasClientLoader?T=!0:C.add(O.route.id))}),C.size===0)return[];let P=I7(s,u,r.unstable_trailingSlashAwareDataRequests,"data");return T&&C.size>0&&P.searchParams.set("_routes",e.filter(O=>C.has(O.route.id)).map(O=>O.route.id).join(",")),[P.pathname+P.search]},[u,r.unstable_trailingSlashAwareDataRequests,d,n,i,f,e,s,o]),A=K.useMemo(()=>N7(g,i),[g,i]),F=j7(g);return K.createElement(K.Fragment,null,w.map(C=>K.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),A.map(C=>K.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),F.map(({key:C,link:T})=>K.createElement("link",{key:C,nonce:t.nonce,...T,crossOrigin:T.crossOrigin??t.crossOrigin})))}function z7(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var H7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{H7&&(window.__reactRouterVersion="7.13.0")}catch{}function W7({basename:s,children:e,unstable_useTransitions:t,window:n}){let r=K.useRef();r.current==null&&(r.current=C4({window:n,v5Compat:!0}));let i=r.current,[o,u]=K.useState({action:i.action,location:i.location}),d=K.useCallback(h=>{t===!1?u(h):K.startTransition(()=>u(h))},[t]);return K.useLayoutEffect(()=>i.listen(d),[i,d]),K.createElement(A7,{basename:s,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:t})}var UR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a_=K.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:o,state:u,target:d,to:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w,...A},F){let{basename:C,unstable_useTransitions:T}=K.useContext(Qs),P=typeof h=="string"&&UR.test(h),O=kR(h,C);h=O.to;let N=i7(h,{relative:r}),[V,z,W]=V7(n,A),D=K7(h,{replace:o,state:u,target:d,preventScrollReset:f,relative:r,viewTransition:g,unstable_defaultShouldRevalidate:w,unstable_useTransitions:T});function R(U){e&&e(U),U.defaultPrevented||D(U)}let L=K.createElement("a",{...A,...W,href:O.absoluteURL||N,onClick:O.isExternal||i?e:R,ref:z7(F,z),target:d,"data-discover":!P&&t==="render"?"true":void 0});return V&&!P?K.createElement(K.Fragment,null,L,K.createElement(U7,{page:N})):L});a_.displayName="Link";var jR=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:o,viewTransition:u,children:d,...h},f){let g=a0(o,{relative:h.relative}),w=Mu(),A=K.useContext(s1),{navigator:F,basename:C}=K.useContext(Qs),T=A!=null&&Z7(g)&&u===!0,P=F.encodeLocation?F.encodeLocation(g).pathname:g.pathname,O=w.pathname,N=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(O=O.toLowerCase(),N=N?N.toLowerCase():null,P=P.toLowerCase()),N&&C&&(N=Fl(N,C)||N);const V=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let z=O===P||!r&&O.startsWith(P)&&O.charAt(V)==="/",W=N!=null&&(N===P||!r&&N.startsWith(P)&&N.charAt(P.length)==="/"),D={isActive:z,isPending:W,isTransitioning:T},R=z?e:void 0,L;typeof n=="function"?L=n(D):L=[n,z?"active":null,W?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let U=typeof i=="function"?i(D):i;return K.createElement(a_,{...h,"aria-current":R,className:L,ref:f,style:U,to:o,viewTransition:u},typeof d=="function"?d(D):d)});jR.displayName="NavLink";var G7=K.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:i,method:o=dA,action:u,onSubmit:d,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w,...A},F)=>{let{unstable_useTransitions:C}=K.useContext(Qs),T=Y7(),P=J7(u,{relative:h}),O=o.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&UR.test(u),V=z=>{if(d&&d(z),z.defaultPrevented)return;z.preventDefault();let W=z.nativeEvent.submitter,D=(W==null?void 0:W.getAttribute("formmethod"))||o,R=()=>T(W||z.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:r,state:i,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w});C&&t!==!1?K.startTransition(()=>R()):R()};return K.createElement("form",{ref:F,method:O,action:P,onSubmit:n?d:V,...A,"data-discover":!N&&s==="render"?"true":void 0})});G7.displayName="Form";function q7(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $R(s){let e=K.useContext(Zm);return Xt(e,q7(s)),e}function K7(s,{target:e,replace:t,state:n,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let h=i1(),f=Mu(),g=a0(s,{relative:i});return K.useCallback(w=>{if(F7(w,e)){w.preventDefault();let A=t!==void 0?t:qg(f)===qg(g),F=()=>h(s,{replace:A,state:n,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:u});d?K.startTransition(()=>F()):F()}},[f,h,g,t,n,e,s,r,i,o,u,d])}var Q7=0,X7=()=>`__${String(++Q7)}__`;function Y7(){let{router:s}=$R("useSubmit"),{basename:e}=K.useContext(Qs),t=g7(),n=s.fetch,r=s.navigate;return K.useCallback(async(i,o={})=>{let{action:u,method:d,encType:h,formData:f,body:g}=k7(i,e);if(o.navigate===!1){let w=o.fetcherKey||X7();await n(w,t,o.action||u,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:g,formMethod:o.method||d,formEncType:o.encType||h,flushSync:o.flushSync})}else await r(o.action||u,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:g,formMethod:o.method||d,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,r,e,t])}function J7(s,{relative:e}={}){let{basename:t}=K.useContext(Qs),n=K.useContext(ho);Xt(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={...a0(s||".",{relative:e})},o=Mu();if(s==null){i.search=o.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(g=>g).forEach(g=>u.append("index",g));let f=u.toString();i.search=f?`?${f}`:""}}return(!s||s===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:xl([t,i.pathname])),qg(i)}function Z7(s,{relative:e}={}){let t=K.useContext(PR);Xt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=$R("useViewTransitionState"),r=a0(s,{relative:e});if(!t.isTransitioning)return!1;let i=Fl(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=Fl(t.nextLocation.pathname,n)||t.nextLocation.pathname;return i_(r.pathname,o)!=null||i_(r.pathname,i)!=null}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tB=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),iI=s=>{const e=tB(s);return e.charAt(0).toUpperCase()+e.slice(1)},zR=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),nB=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=K.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:o,...u},d)=>K.createElement("svg",{ref:d,...rB,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:zR("lucide",r),...!i&&!nB(u)&&{"aria-hidden":"true"},...u},[...o.map(([h,f])=>K.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(s,e)=>{const t=K.forwardRef(({className:n,...r},i)=>K.createElement(sB,{ref:i,iconNode:e,className:zR(`lucide-${eB(iI(s))}`,`lucide-${s}`,n),...r}));return t.displayName=iI(s),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],aB=mt("arrow-right",iB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],lB=mt("award",oB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],uB=mt("bell",cB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],hB=mt("book-open",dB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fB=mt("calendar",pB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],HR=mt("chart-no-axes-column-increasing",mB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yB=mt("check",gB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vB=mt("circle-check-big",wB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_B=mt("circle-x",AB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],EB=mt("dollar-sign",xB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],CB=mt("file-check",bB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],SB=mt("file-spreadsheet",FB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jm=mt("file-text",TB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],IB=mt("graduation-cap",kB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],RB=mt("image",PB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],NB=mt("layout-dashboard",DB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],LB=mt("link",MB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],BB=mt("list",OB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],UB=mt("lock",VB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$B=mt("log-out",jB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],WR=mt("mail",zB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],GR=mt("megaphone",HB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qR=mt("pen",WB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],o0=mt("plus",GB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],KB=mt("save",qB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],ZE=mt("school",QB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],o1=mt("search",XB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],l0=mt("trash-2",YB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ZB=mt("upload",JB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],KR=mt("user",e6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],aI=mt("users",t6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],r6=mt("video",n6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],eb=mt("x",s6),i6=()=>{};var oI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(s.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},a6=function(s){const e=[];let t=0,n=0;for(;t<s.length;){const r=s[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const i=s[t++];e[n++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=s[t++],o=s[t++],u=s[t++],d=((r&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=s[t++],o=s[t++];e[n++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},XR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<s.length;r+=3){const i=s[r],o=r+1<s.length,u=o?s[r+1]:0,d=r+2<s.length,h=d?s[r+2]:0,f=i>>2,g=(i&3)<<4|u>>4;let w=(u&15)<<2|h>>6,A=h&63;d||(A=64,o||(w=64)),n.push(t[f],t[g],t[w],t[A])}return n.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(QR(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):a6(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<s.length;){const i=t[s.charAt(r++)],u=r<s.length?t[s.charAt(r)]:0;++r;const h=r<s.length?t[s.charAt(r)]:64;++r;const g=r<s.length?t[s.charAt(r)]:64;if(++r,i==null||u==null||h==null||g==null)throw new o6;const w=i<<2|u>>4;if(n.push(w),h!==64){const A=u<<4&240|h>>2;if(n.push(A),g!==64){const F=h<<6&192|g;n.push(F)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class o6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l6=function(s){const e=QR(s);return XR.encodeByteArray(e,!0)},o_=function(s){return l6(s).replace(/\./g,"")},YR=function(s){try{return XR.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=()=>c6().__FIREBASE_DEFAULTS__,d6=()=>{if(typeof process>"u"||typeof oI>"u")return;const s=oI.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},h6=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&YR(s[1]);return e&&JSON.parse(e)},l1=()=>{try{return i6()||u6()||d6()||h6()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},JR=s=>{var e,t;return(t=(e=l1())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},ZR=s=>{const e=JR(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},eD=()=>{var s;return(s=l1())==null?void 0:s.config},tD=s=>{var e;return(e=l1())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dF(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=s.iat||0,i=s.sub||s.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...s};return[o_(JSON.stringify(t)),o_(JSON.stringify(o)),""].join(".")}const Ug={};function f6(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ug))Ug[e]?s.emulator.push(e):s.prod.push(e);return s}function m6(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let lI=!1;function hF(s,e){if(typeof window>"u"||typeof document>"u"||!Lu(window.location.host)||Ug[s]===e||Ug[s]||lI)return;Ug[s]=e;function t(w){return`__firebase__banner__${w}`}const n="__firebase__banner",i=f6().prod.length>0;function o(){const w=document.getElementById(n);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,A){w.setAttribute("width","24"),w.setAttribute("id",A),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{lI=!0,o()},w}function f(w,A){w.setAttribute("id",A),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function g(){const w=m6(n),A=t("text"),F=document.getElementById(A)||document.createElement("span"),C=t("learnmore"),T=document.getElementById(C)||document.createElement("a"),P=t("preprendIcon"),O=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const N=w.element;u(N),f(T,C);const V=h();d(O,P),N.append(O,F,T,V),document.body.appendChild(N)}i?(F.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dr())}function y6(){var e;const s=(e=l1())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v6(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function A6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _6(){const s=Dr();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function x6(){return!y6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E6(){try{return typeof indexedDB=="object"}catch{return!1}}function b6(){return new Promise((s,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),s(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6="FirebaseError";class po extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=C6,Object.setPrototypeOf(this,po.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,c0.prototype.create)}}class c0{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?F6(i,n):"Error",u=`${this.serviceName}: ${o} (${r}).`;return new po(r,u,n)}}function F6(s,e){return s.replace(S6,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const S6=/\{\$([^}]+)}/g;function T6(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Lh(s,e){if(s===e)return!0;const t=Object.keys(s),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const i=s[r],o=e[r];if(cI(i)&&cI(o)){if(!Lh(i,o))return!1}else if(i!==o)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function cI(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(s){const e=[];for(const[t,n]of Object.entries(s))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function pg(s){const e={};return s.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,i]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function fg(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function k6(s,e){const t=new I6(s,e);return t.subscribe.bind(t)}class I6{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");P6(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=CE),r.error===void 0&&(r.error=CE),r.complete===void 0&&(r.complete=CE);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P6(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function CE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(s){return s&&s._delegate?s._delegate:s}class Eu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new p6;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N6(e))try{this.getOrInitializeService({instanceIdentifier:fd})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});n.resolve(i)}catch{}}}}clearInstance(e=fd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fd){return this.instances.has(e)}getOptions(e=fd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);n===u&&o.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:D6(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=fd){return this.component?this.component.multipleInstances?e:fd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D6(s){return s===fd?void 0:s}function N6(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new R6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(st||(st={}));const L6={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},O6=st.INFO,B6={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},V6=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),r=B6[e];if(r)console[r](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pF{constructor(e){this.name=e,this._logLevel=O6,this._logHandler=V6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const U6=(s,e)=>e.some(t=>s instanceof t);let uI,dI;function j6(){return uI||(uI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $6(){return dI||(dI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rD=new WeakMap,tb=new WeakMap,sD=new WeakMap,FE=new WeakMap,fF=new WeakMap;function z6(s){const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("success",i),s.removeEventListener("error",o)},i=()=>{t(yu(s.result)),r()},o=()=>{n(s.error),r()};s.addEventListener("success",i),s.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&rD.set(t,s)}).catch(()=>{}),fF.set(e,s),e}function H6(s){if(tb.has(s))return;const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("complete",i),s.removeEventListener("error",o),s.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(s.error||new DOMException("AbortError","AbortError")),r()};s.addEventListener("complete",i),s.addEventListener("error",o),s.addEventListener("abort",o)});tb.set(s,e)}let nb={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return tb.get(s);if(e==="objectStoreNames")return s.objectStoreNames||sD.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yu(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function W6(s){nb=s(nb)}function G6(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=s.call(SE(this),e,...t);return sD.set(n,e.sort?e.sort():[e]),yu(n)}:$6().includes(s)?function(...e){return s.apply(SE(this),e),yu(rD.get(this))}:function(...e){return yu(s.apply(SE(this),e))}}function q6(s){return typeof s=="function"?G6(s):(s instanceof IDBTransaction&&H6(s),U6(s,j6())?new Proxy(s,nb):s)}function yu(s){if(s instanceof IDBRequest)return z6(s);if(FE.has(s))return FE.get(s);const e=q6(s);return e!==s&&(FE.set(s,e),fF.set(e,s)),e}const SE=s=>fF.get(s);function K6(s,e,{blocked:t,upgrade:n,blocking:r,terminated:i}={}){const o=indexedDB.open(s,e),u=yu(o);return n&&o.addEventListener("upgradeneeded",d=>{n(yu(o.result),d.oldVersion,d.newVersion,yu(o.transaction),d)}),t&&o.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{i&&d.addEventListener("close",()=>i()),r&&d.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const Q6=["get","getKey","getAll","getAllKeys","count"],X6=["put","add","delete","clear"],TE=new Map;function hI(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(TE.get(e))return TE.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=X6.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||Q6.includes(t)))return;const i=async function(o,...u){const d=this.transaction(o,r?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),r&&d.done]))[0]};return TE.set(e,i),i}W6(s=>({...s,get:(e,t,n)=>hI(e,t)||s.get(e,t,n),has:(e,t)=>!!hI(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(J6(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function J6(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rb="@firebase/app",pI="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=new pF("@firebase/app"),Z6="@firebase/app-compat",e5="@firebase/analytics-compat",t5="@firebase/analytics",n5="@firebase/app-check-compat",r5="@firebase/app-check",s5="@firebase/auth",i5="@firebase/auth-compat",a5="@firebase/database",o5="@firebase/data-connect",l5="@firebase/database-compat",c5="@firebase/functions",u5="@firebase/functions-compat",d5="@firebase/installations",h5="@firebase/installations-compat",p5="@firebase/messaging",f5="@firebase/messaging-compat",m5="@firebase/performance",g5="@firebase/performance-compat",y5="@firebase/remote-config",w5="@firebase/remote-config-compat",v5="@firebase/storage",A5="@firebase/storage-compat",_5="@firebase/firestore",x5="@firebase/ai",E5="@firebase/firestore-compat",b5="firebase",C5="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="[DEFAULT]",F5={[rb]:"fire-core",[Z6]:"fire-core-compat",[t5]:"fire-analytics",[e5]:"fire-analytics-compat",[r5]:"fire-app-check",[n5]:"fire-app-check-compat",[s5]:"fire-auth",[i5]:"fire-auth-compat",[a5]:"fire-rtdb",[o5]:"fire-data-connect",[l5]:"fire-rtdb-compat",[c5]:"fire-fn",[u5]:"fire-fn-compat",[d5]:"fire-iid",[h5]:"fire-iid-compat",[p5]:"fire-fcm",[f5]:"fire-fcm-compat",[m5]:"fire-perf",[g5]:"fire-perf-compat",[y5]:"fire-rc",[w5]:"fire-rc-compat",[v5]:"fire-gcs",[A5]:"fire-gcs-compat",[_5]:"fire-fst",[E5]:"fire-fst-compat",[x5]:"fire-vertex","fire-js":"fire-js",[b5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map,S5=new Map,ib=new Map;function fI(s,e){try{s.container.addComponent(e)}catch(t){Sl.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Oh(s){const e=s.name;if(ib.has(e))return Sl.debug(`There were multiple attempts to register component ${e}.`),!1;ib.set(e,s);for(const t of l_.values())fI(t,s);for(const t of S5.values())fI(t,s);return!0}function c1(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Ai(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wu=new c0("app","Firebase",T5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Eu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=C5;function iD(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const n={name:sb,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw wu.create("bad-app-name",{appName:String(r)});if(t||(t=eD()),!t)throw wu.create("no-options");const i=l_.get(r);if(i){if(Lh(t,i.options)&&Lh(n,i.config))return i;throw wu.create("duplicate-app",{appName:r})}const o=new M6(r);for(const d of ib.values())o.addComponent(d);const u=new k5(t,n,o);return l_.set(r,u),u}function mF(s=sb){const e=l_.get(s);if(!e&&s===sb&&eD())return iD();if(!e)throw wu.create("no-app",{appName:s});return e}function Za(s,e,t){let n=F5[s]??s;t&&(n+=`-${t}`);const r=n.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${n}" with version "${e}":`];r&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sl.warn(o.join(" "));return}Oh(new Eu(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="firebase-heartbeat-database",P5=1,Kg="firebase-heartbeat-store";let kE=null;function aD(){return kE||(kE=K6(I5,P5,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Kg)}catch(t){console.warn(t)}}}}).catch(s=>{throw wu.create("idb-open",{originalErrorMessage:s.message})})),kE}async function R5(s){try{const t=(await aD()).transaction(Kg),n=await t.objectStore(Kg).get(oD(s));return await t.done,n}catch(e){if(e instanceof po)Sl.warn(e.message);else{const t=wu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sl.warn(t.message)}}}async function mI(s,e){try{const n=(await aD()).transaction(Kg,"readwrite");await n.objectStore(Kg).put(e,oD(s)),await n.done}catch(t){if(t instanceof po)Sl.warn(t.message);else{const n=wu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Sl.warn(n.message)}}}function oD(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=1024,N5=30;class M5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new O5(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>N5){const o=B5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Sl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gI(),{heartbeatsToSend:n,unsentEntries:r}=L5(this._heartbeatsCache.heartbeats),i=o_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Sl.warn(t),""}}}function gI(){return new Date().toISOString().substring(0,10)}function L5(s,e=D5){const t=[];let n=s.slice();for(const r of s){const i=t.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),yI(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),yI(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class O5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E6()?b6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await R5(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return mI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return mI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function yI(s){return o_(JSON.stringify({version:2,heartbeats:s})).length}function B5(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let n=1;n<s.length;n++)s[n].date<t&&(t=s[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(s){Oh(new Eu("platform-logger",e=>new Y6(e),"PRIVATE")),Oh(new Eu("heartbeat",e=>new M5(e),"PRIVATE")),Za(rb,pI,s),Za(rb,pI,"esm2020"),Za("fire-js","")}V5("");var U5="firebase",j5="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Za(U5,j5,"app");function lD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $5=lD,cD=new c0("auth","Firebase",lD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=new pF("@firebase/auth");function z5(s,...e){c_.logLevel<=st.WARN&&c_.warn(`Auth (${Kh}): ${s}`,...e)}function pA(s,...e){c_.logLevel<=st.ERROR&&c_.error(`Auth (${Kh}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(s,...e){throw gF(s,...e)}function eo(s,...e){return gF(s,...e)}function uD(s,e,t){const n={...$5(),[e]:t};return new c0("auth","Firebase",n).create(e,{appName:s.name})}function vu(s){return uD(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gF(s,...e){if(typeof s!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=s.name),s._errorFactory.create(t,...n)}return cD.create(s,...e)}function Ue(s,e,...t){if(!s)throw gF(e,...t)}function Al(s){const e="INTERNAL ASSERTION FAILED: "+s;throw pA(e),new Error(e)}function Tl(s,e){s||Al(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function H5(){return wI()==="http:"||wI()==="https:"}function wI(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H5()||v6()||"connection"in navigator)?navigator.onLine:!0}function G5(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tl(t>e,"Short delay should be less than long delay!"),this.isMobile=g6()||A6()}get(){return W5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(s,e){Tl(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Al("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Al("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Al("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Q5=new d0(3e4,6e4);function Qh(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ou(s,e,t,n,r={}){return hD(s,r,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const u=u0({key:s.config.apiKey,...o}).slice(1),d=await s._getAdditionalHeaders();d["Content-Type"]="application/json",s.languageCode&&(d["X-Firebase-Locale"]=s.languageCode);const h={method:e,headers:d,...i};return w6()||(h.referrerPolicy="no-referrer"),s.emulatorConfig&&Lu(s.emulatorConfig.host)&&(h.credentials="include"),dD.fetch()(await pD(s,s.config.apiHost,t,u),h)})}async function hD(s,e,t){s._canInitEmulator=!1;const n={...q5,...e};try{const r=new Y5(s),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw qv(s,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw qv(s,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw qv(s,"email-already-in-use",o);if(d==="USER_DISABLED")throw qv(s,"user-disabled",o);const f=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw uD(s,f,h);ta(s,f)}}catch(r){if(r instanceof po)throw r;ta(s,"network-request-failed",{message:String(r)})}}async function u1(s,e,t,n,r={}){const i=await Ou(s,e,t,n,r);return"mfaPendingCredential"in i&&ta(s,"multi-factor-auth-required",{_serverResponse:i}),i}async function pD(s,e,t,n){const r=`${e}${t}?${n}`,i=s,o=i.config.emulator?yF(s.config,r):`${s.config.apiScheme}://${r}`;return K5.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function X5(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Y5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(eo(this.auth,"network-request-failed")),Q5.get())})}}function qv(s,e,t){const n={appName:s.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=eo(s,e,n);return r.customData._tokenResponse=t,r}function vI(s){return s!==void 0&&s.enterprise!==void 0}class J5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return X5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Z5(s,e){return Ou(s,"GET","/v2/recaptchaConfig",Qh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(s,e){return Ou(s,"POST","/v1/accounts:delete",e)}async function u_(s,e){return Ou(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tV(s,e=!1){const t=pn(s),n=await t.getIdToken(e),r=wF(n);Ue(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:n,authTime:jg(IE(r.auth_time)),issuedAtTime:jg(IE(r.iat)),expirationTime:jg(IE(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function IE(s){return Number(s)*1e3}function wF(s){const[e,t,n]=s.split(".");if(e===void 0||t===void 0||n===void 0)return pA("JWT malformed, contained fewer than 3 sections"),null;try{const r=YR(t);return r?JSON.parse(r):(pA("Failed to decode base64 JWT payload"),null)}catch(r){return pA("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function AI(s){const e=wF(s);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qg(s,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof po&&nV(n)&&s.auth.currentUser===s&&await s.auth.signOut(),n}}function nV({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jg(this.lastLoginAt),this.creationTime=jg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_(s){var g;const e=s.auth,t=await s.getIdToken(),n=await Qg(s,u_(e,{idToken:t}));Ue(n==null?void 0:n.users.length,e,"internal-error");const r=n.users[0];s._notifyReloadListener(r);const i=(g=r.providerUserInfo)!=null&&g.length?fD(r.providerUserInfo):[],o=iV(s.providerData,i),u=s.isAnonymous,d=!(s.email&&r.passwordHash)&&!(o!=null&&o.length),h=u?d:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ob(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(s,f)}async function sV(s){const e=pn(s);await d_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iV(s,e){return[...s.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function fD(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aV(s,e){const t=await hD(s,{},async()=>{const n=u0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=s.config,o=await pD(s,r,"/v1/token",`key=${i}`),u=await s._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return s.emulatorConfig&&Lu(s.emulatorConfig.host)&&(d.credentials="include"),dD.fetch()(o,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function oV(s,e){return Ou(s,"POST","/v2/accounts:revokeToken",Qh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=AI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await aV(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new lf;return n&&(Ue(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),r&&(Ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lf,this.toJSON())}_performRefresh(){return Al("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(s,e){Ue(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Xi{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new rV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ob(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Qg(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tV(this,e)}reload(){return sV(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await d_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ai(this.auth.app))return Promise.reject(vu(this.auth));const e=await this.getIdToken();return await Qg(this,eV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:g,emailVerified:w,isAnonymous:A,providerData:F,stsTokenManager:C}=t;Ue(g&&C,e,"internal-error");const T=lf.fromJSON(this.name,C);Ue(typeof g=="string",e,"internal-error"),pc(n,e.name),pc(r,e.name),Ue(typeof w=="boolean",e,"internal-error"),Ue(typeof A=="boolean",e,"internal-error"),pc(i,e.name),pc(o,e.name),pc(u,e.name),pc(d,e.name),pc(h,e.name),pc(f,e.name);const P=new Xi({uid:g,auth:e,email:r,emailVerified:w,displayName:n,isAnonymous:A,photoURL:o,phoneNumber:i,tenantId:u,stsTokenManager:T,createdAt:h,lastLoginAt:f});return F&&Array.isArray(F)&&(P.providerData=F.map(O=>({...O}))),d&&(P._redirectEventId=d),P}static async _fromIdTokenResponse(e,t,n=!1){const r=new lf;r.updateFromServerResponse(t);const i=new Xi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await d_(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ue(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?fD(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),u=new lf;u.updateFromIdToken(n);const d=new Xi({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ob(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Map;function _l(s){Tl(s instanceof Function,"Expected a class definition");let e=_I.get(s);return e?(Tl(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,_I.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mD.type="NONE";const xI=mD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(s,e,t){return`firebase:${s}:${e}:${t}`}class cf{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fA(this.userKey,r.apiKey,i),this.fullPersistenceKey=fA("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await u_(this.auth,{idToken:e}).catch(()=>{});return t?Xi._fromGetAccountInfoResponse(this.auth,t,e):null}return Xi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new cf(_l(xI),e,n);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||_l(xI);const o=fA(n,e.config.apiKey,e.name);let u=null;for(const h of t)try{const f=await h._get(o);if(f){let g;if(typeof f=="string"){const w=await u_(e,{idToken:f}).catch(()=>{});if(!w)break;g=await Xi._fromGetAccountInfoResponse(e,w,f)}else g=Xi._fromJSON(e,f);h!==i&&(u=g),i=h;break}}catch{}const d=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new cf(i,e,n):(i=d[0],u&&await i._set(o,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new cf(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_D(e))return"Blackberry";if(xD(e))return"Webos";if(yD(e))return"Safari";if((e.includes("chrome/")||wD(e))&&!e.includes("edge/"))return"Chrome";if(AD(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=s.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function gD(s=Dr()){return/firefox\//i.test(s)}function yD(s=Dr()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wD(s=Dr()){return/crios\//i.test(s)}function vD(s=Dr()){return/iemobile/i.test(s)}function AD(s=Dr()){return/android/i.test(s)}function _D(s=Dr()){return/blackberry/i.test(s)}function xD(s=Dr()){return/webos/i.test(s)}function vF(s=Dr()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function lV(s=Dr()){var e;return vF(s)&&!!((e=window.navigator)!=null&&e.standalone)}function cV(){return _6()&&document.documentMode===10}function ED(s=Dr()){return vF(s)||AD(s)||xD(s)||_D(s)||/windows phone/i.test(s)||vD(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(s,e=[]){let t;switch(s){case"Browser":t=EI(Dr());break;case"Worker":t=`${EI(Dr())}-${s}`;break;default:t=s}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kh}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((o,u)=>{try{const d=e(i);o(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(s,e={}){return Ou(s,"GET","/v2/passwordPolicy",Qh(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=6;class pV{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??hV,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bI(this),this.idTokenSubscription=new bI(this),this.beforeStateQueue=new uV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_l(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await cf.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await u_(this,{idToken:e}),n=await Xi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ai(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,u=n==null?void 0:n._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===u)&&(d!=null&&d.user)&&(n=d.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await d_(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=G5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ai(this.app))return Promise.reject(vu(this));const t=e?pn(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ai(this.app)?Promise.reject(vu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ai(this.app)?Promise.reject(vu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_l(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dV(this),t=new pV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new c0("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await oV(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_l(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await cf.create(this,[_l(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,r);return()=>{o=!0,d()}}else{const d=e.addObserver(t);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&z5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function t2(s){return pn(s)}class bI{constructor(e){this.auth=e,this.observer=null,this.addObserver=k6(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mV(s){d1=s}function CD(s){return d1.loadJS(s)}function gV(){return d1.recaptchaEnterpriseScript}function yV(){return d1.gapiScript}function wV(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class vV{constructor(){this.enterprise=new AV}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class AV{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const _V="recaptcha-enterprise",FD="NO_RECAPTCHA";class xV{constructor(e){this.type=_V,this.auth=t2(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,u)=>{Z5(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new J5(d);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(d=>{u(d)})})}function r(i,o,u){const d=window.grecaptcha;vI(d)?d.enterprise.ready(()=>{d.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(FD)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vV().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{n(this.auth).then(u=>{if(!t&&vI(window.grecaptcha))r(u,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=gV();d.length!==0&&(d+=u),CD(d).then(()=>{r(u,i,o)}).catch(h=>{o(h)})}}).catch(u=>{o(u)})})}}async function CI(s,e,t,n=!1,r=!1){const i=new xV(s);let o;if(r)o=FD;else try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function FI(s,e,t,n,r){var i;if((i=s._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await CI(s,e,t,t==="getOobCode");return n(s,o)}else return n(s,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await CI(s,e,t,t==="getOobCode");return n(s,u)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(s,e){const t=c1(s,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(Lh(i,e??{}))return r;ta(r,"already-initialized")}return t.initialize({options:e})}function bV(s,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(_l);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function CV(s,e,t){const n=t2(s);Ue(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,i=SD(e),{host:o,port:u}=FV(e),d=u===null?"":`:${u}`,h={url:`${i}//${o}${d}/`},f=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){Ue(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ue(Lh(h,n.config.emulator)&&Lh(f,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=f,n.settings.appVerificationDisabledForTesting=!0,Lu(o)?(dF(`${i}//${o}${d}`),hF("Auth",!0)):SV()}function SD(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function FV(s){const e=SD(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const i=r[1];return{host:i,port:SI(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:SI(o)}}}function SI(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function SV(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Al("not implemented")}_getIdTokenResponse(e){return Al("not implemented")}_linkToIdToken(e,t){return Al("not implemented")}_getReauthenticationResolver(e){return Al("not implemented")}}async function TV(s,e){return Ou(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kV(s,e){return u1(s,"POST","/v1/accounts:signInWithPassword",Qh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(s,e){return u1(s,"POST","/v1/accounts:signInWithEmailLink",Qh(s,e))}async function PV(s,e){return u1(s,"POST","/v1/accounts:signInWithEmailLink",Qh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends AF{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Xg(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Xg(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return FI(e,t,"signInWithPassword",kV);case"emailLink":return IV(e,{email:this._email,oobCode:this._password});default:ta(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return FI(e,n,"signUpPassword",TV);case"emailLink":return PV(e,{idToken:t,email:this._email,oobCode:this._password});default:ta(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uf(s,e){return u1(s,"POST","/v1/accounts:signInWithIdp",Qh(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV="http://localhost";class Bh extends AF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ta("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const o=new Bh(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return uf(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,uf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,uf(e,t)}buildRequest(){const e={requestUri:RV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=u0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NV(s){const e=pg(fg(s)).link,t=e?pg(fg(e)).deep_link_id:null,n=pg(fg(s)).deep_link_id;return(n?pg(fg(n)).link:null)||n||t||e||s}class _F{constructor(e){const t=pg(fg(e)),n=t.apiKey??null,r=t.oobCode??null,i=DV(t.mode??null);Ue(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=NV(e);try{return new _F(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.providerId=n2.PROVIDER_ID}static credential(e,t){return Xg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=_F.parseLink(t);return Ue(n,"argument-error"),Xg._fromEmailAndCode(e,n.code,n.tenantId)}}n2.PROVIDER_ID="password";n2.EMAIL_PASSWORD_SIGN_IN_METHOD="password";n2.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends TD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends h0{constructor(){super("facebook.com")}static credential(e){return Bh._fromParams({providerId:mc.PROVIDER_ID,signInMethod:mc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mc.credentialFromTaggedObject(e)}static credentialFromError(e){return mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mc.credential(e.oauthAccessToken)}catch{return null}}}mc.FACEBOOK_SIGN_IN_METHOD="facebook.com";mc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends h0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bh._fromParams({providerId:gc.PROVIDER_ID,signInMethod:gc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gc.credentialFromTaggedObject(e)}static credentialFromError(e){return gc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return gc.credential(t,n)}catch{return null}}}gc.GOOGLE_SIGN_IN_METHOD="google.com";gc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends h0{constructor(){super("github.com")}static credential(e){return Bh._fromParams({providerId:yc.PROVIDER_ID,signInMethod:yc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yc.credentialFromTaggedObject(e)}static credentialFromError(e){return yc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yc.credential(e.oauthAccessToken)}catch{return null}}}yc.GITHUB_SIGN_IN_METHOD="github.com";yc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends h0{constructor(){super("twitter.com")}static credential(e,t){return Bh._fromParams({providerId:wc.PROVIDER_ID,signInMethod:wc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wc.credentialFromTaggedObject(e)}static credentialFromError(e){return wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return wc.credential(t,n)}catch{return null}}}wc.TWITTER_SIGN_IN_METHOD="twitter.com";wc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Xi._fromIdTokenResponse(e,n,r),o=TI(n);return new $m({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=TI(n);return new $m({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function TI(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_ extends po{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,h_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new h_(e,t,n,r)}}function kD(s,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?h_._fromErrorAndOperation(s,i,e,n):i})}async function MV(s,e,t=!1){const n=await Qg(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return $m._forOperation(s,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(s,e,t=!1){const{auth:n}=s;if(Ai(n.app))return Promise.reject(vu(n));const r="reauthenticate";try{const i=await Qg(s,kD(n,r,e,s),t);Ue(i.idToken,n,"internal-error");const o=wF(i.idToken);Ue(o,n,"internal-error");const{sub:u}=o;return Ue(s.uid===u,n,"user-mismatch"),$m._forOperation(s,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ta(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(s,e,t=!1){if(Ai(s.app))return Promise.reject(vu(s));const n="signIn",r=await kD(s,n,e),i=await $m._fromIdTokenResponse(s,n,r);return t||await s._updateCurrentUser(i.user),i}async function OV(s,e){return ID(t2(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(s){const e=t2(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function VV(s,e,t){return Ai(s.app)?Promise.reject(vu(s)):OV(pn(s),n2.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&BV(s),n})}function UV(s,e,t,n){return pn(s).onIdTokenChanged(e,t,n)}function jV(s,e,t){return pn(s).beforeAuthStateChanged(e,t)}function $V(s,e,t,n){return pn(s).onAuthStateChanged(e,t,n)}const p_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(p_,"1"),this.storage.removeItem(p_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=1e3,HV=10;class RD extends PD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ED(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,u,d)=>{this.notifyListeners(o,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(n);!t&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);cV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,HV):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},zV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RD.type="LOCAL";const WV=RD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD extends PD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}DD.type="SESSION";const ND=DD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new h1(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const u=Array.from(o).map(async h=>h(t.origin,i)),d=await GV(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}h1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(s="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((u,d)=>{const h=xF("",20);r.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(g){const w=g;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(w.data.response);break;default:clearTimeout(f),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(){return window}function KV(s){to().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){return typeof to().WorkerGlobalScope<"u"&&typeof to().importScripts=="function"}async function QV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XV(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function YV(){return MD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebaseLocalStorageDb",JV=1,f_="firebaseLocalStorage",OD="fbase_key";class p0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function p1(s,e){return s.transaction([f_],e?"readwrite":"readonly").objectStore(f_)}function ZV(){const s=indexedDB.deleteDatabase(LD);return new p0(s).toPromise()}function lb(){const s=indexedDB.open(LD,JV);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const n=s.result;try{n.createObjectStore(f_,{keyPath:OD})}catch(r){t(r)}}),s.addEventListener("success",async()=>{const n=s.result;n.objectStoreNames.contains(f_)?e(n):(n.close(),await ZV(),e(await lb()))})})}async function kI(s,e,t){const n=p1(s,!0).put({[OD]:e,value:t});return new p0(n).toPromise()}async function eU(s,e){const t=p1(s,!1).get(e),n=await new p0(t).toPromise();return n===void 0?null:n.value}function II(s,e){const t=p1(s,!0).delete(e);return new p0(t).toPromise()}const tU=800,nU=3;class BD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lb(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>nU)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=h1._getInstance(YV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await QV(),!this.activeServiceWorker)return;this.sender=new qV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lb();return await kI(e,p_,"1"),await II(e,p_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>kI(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>eU(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>II(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=p1(r,!1).getAll();return new p0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BD.type="LOCAL";const rU=BD;new d0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(s,e){return e?_l(e):(Ue(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF extends AF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return uf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return uf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function iU(s){return ID(s.auth,new EF(s),s.bypassAuthState)}function aU(s){const{auth:e,user:t}=s;return Ue(t,e,"internal-error"),LV(t,new EF(s),s.bypassAuthState)}async function oU(s){const{auth:e,user:t}=s;return Ue(t,e,"internal-error"),MV(t,new EF(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iU;case"linkViaPopup":case"linkViaRedirect":return oU;case"reauthViaPopup":case"reauthViaRedirect":return aU;default:ta(this.auth,"internal-error")}}resolve(e){Tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=new d0(2e3,1e4);class ef extends VD{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ef.currentPopupAction&&ef.currentPopupAction.cancel(),ef.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Tl(this.filter.length===1,"Popup operations only handle one event");const e=xF();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(eo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(eo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ef.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(eo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lU.get())};e()}}ef.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU="pendingRedirect",mA=new Map;class uU extends VD{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=mA.get(this.auth._key());if(!e){try{const n=await dU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}mA.set(this.auth._key(),e)}return this.bypassAuthState||mA.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dU(s,e){const t=fU(e),n=pU(s);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function hU(s,e){mA.set(s._key(),e)}function pU(s){return _l(s._redirectPersistence)}function fU(s){return fA(cU,s.config.apiKey,s.name)}async function mU(s,e,t=!1){if(Ai(s.app))return Promise.reject(vu(s));const n=t2(s),r=sU(n,e),o=await new uU(n,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=600*1e3;class yU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!UD(e)){const r=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(eo(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gU&&this.cachedEventUids.clear(),this.cachedEventUids.has(PI(e))}saveEventToCache(e){this.cachedEventUids.add(PI(e)),this.lastProcessedEventTime=Date.now()}}function PI(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function UD({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wU(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UD(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(s,e={}){return Ou(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_U=/^https?/;async function xU(s){if(s.config.emulator)return;const{authorizedDomains:e}=await vU(s);for(const t of e)try{if(EU(t))return}catch{}ta(s,"unauthorized-domain")}function EU(s){const e=ab(),{protocol:t,hostname:n}=new URL(e);if(s.startsWith("chrome-extension://")){const o=new URL(s);return o.hostname===""&&n===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!_U.test(t))return!1;if(AU.test(s))return n===s;const r=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=new d0(3e4,6e4);function RI(){const s=to().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function CU(s){return new Promise((e,t)=>{var r,i,o;function n(){RI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RI(),t(eo(s,"network-request-failed"))},timeout:bU.get()})}if((i=(r=to().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=to().gapi)!=null&&o.load)n();else{const u=wV("iframefcb");return to()[u]=()=>{gapi.load?n():t(eo(s,"network-request-failed"))},CD(`${yV()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw gA=null,e})}let gA=null;function FU(s){return gA=gA||CU(s),gA}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=new d0(5e3,15e3),TU="__/auth/iframe",kU="emulator/auth/iframe",IU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RU(s){const e=s.config;Ue(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?yF(e,kU):`https://${s.config.authDomain}/${TU}`,n={apiKey:e.apiKey,appName:s.name,v:Kh},r=PU.get(s.config.apiHost);r&&(n.eid=r);const i=s._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${u0(n).slice(1)}`}async function DU(s){const e=await FU(s),t=to().gapi;return Ue(t,s,"internal-error"),e.open({where:document.body,url:RU(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IU,dontclear:!0},n=>new Promise(async(r,i)=>{await n.restyle({setHideOnLeave:!1});const o=eo(s,"network-request-failed"),u=to().setTimeout(()=>{i(o)},SU.get());function d(){to().clearTimeout(u),r(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MU=500,LU=600,OU="_blank",BU="http://localhost";class DI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VU(s,e,t,n=MU,r=LU){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...NU,width:n.toString(),height:r.toString(),top:i,left:o},h=Dr().toLowerCase();t&&(u=wD(h)?OU:t),gD(h)&&(e=e||BU,d.scrollbars="yes");const f=Object.entries(d).reduce((w,[A,F])=>`${w}${A}=${F},`,"");if(lV(h)&&u!=="_self")return UU(e||"",u),new DI(null);const g=window.open(e||"",u,f);Ue(g,s,"popup-blocked");try{g.focus()}catch{}return new DI(g)}function UU(s,e){const t=document.createElement("a");t.href=s,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="__/auth/handler",$U="emulator/auth/handler",zU=encodeURIComponent("fac");async function NI(s,e,t,n,r,i){Ue(s.config.authDomain,s,"auth-domain-config-required"),Ue(s.config.apiKey,s,"invalid-api-key");const o={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:n,v:Kh,eventId:r};if(e instanceof TD){e.setDefaultLanguage(s.languageCode),o.providerId=e.providerId||"",T6(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof h0){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}s.tenantId&&(o.tid=s.tenantId);const u=o;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const d=await s._getAppCheckToken(),h=d?`#${zU}=${encodeURIComponent(d)}`:"";return`${HU(s)}?${u0(u).slice(1)}${h}`}function HU({config:s}){return s.emulator?yF(s,$U):`https://${s.authDomain}/${jU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="webStorageSupport";class WU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ND,this._completeRedirectFn=mU,this._overrideRedirectResult=hU}async _openPopup(e,t,n,r){var o;Tl((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await NI(e,t,n,ab(),r);return VU(e,i,xF())}async _openRedirect(e,t,n,r){await this._originValidation(e);const i=await NI(e,t,n,ab(),r);return KV(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(Tl(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await DU(e),n=new yU(e);return t.register("authEvent",r=>(Ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(PE,{type:PE},r=>{var o;const i=(o=r==null?void 0:r[0])==null?void 0:o[PE];i!==void 0&&t(!!i),ta(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ED()||yD()||vF()}}const GU=WU;var MI="@firebase/auth",LI="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QU(s){Oh(new Eu("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=n.options;Ue(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:u,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bD(s)},h=new fV(n,r,i,d);return bV(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Oh(new Eu("auth-internal",e=>{const t=t2(e.getProvider("auth").getImmediate());return(n=>new qU(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Za(MI,LI,KU(s)),Za(MI,LI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=300,YU=tD("authIdTokenMaxAge")||XU;let OI=null;const JU=s=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>YU)return;const r=t==null?void 0:t.token;OI!==r&&(OI=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function ZU(s=mF()){const e=c1(s,"auth");if(e.isInitialized())return e.getImmediate();const t=EV(s,{popupRedirectResolver:GU,persistence:[rU,WV,ND]}),n=tD("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=JU(i.toString());jV(t,o,()=>o(t.currentUser)),UV(t,u=>o(u))}}const r=JR("auth");return r&&CV(t,`http://${r}`),t}function ej(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}mV({loadJS(s){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",s),n.onload=e,n.onerror=r=>{const i=eo("internal-error");i.customData=r,t(i)},n.type="text/javascript",n.charset="UTF-8",ej().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QU("Browser");var BI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Au,jD;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function L(){}L.prototype=R.prototype,D.F=R.prototype,D.prototype=new L,D.prototype.constructor=D,D.D=function(U,$,G){for(var j=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)j[ye-2]=arguments[ye];return R.prototype[$].apply(U,j)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,R,L){L||(L=0);const U=Array(16);if(typeof R=="string")for(var $=0;$<16;++$)U[$]=R.charCodeAt(L++)|R.charCodeAt(L++)<<8|R.charCodeAt(L++)<<16|R.charCodeAt(L++)<<24;else for($=0;$<16;++$)U[$]=R[L++]|R[L++]<<8|R[L++]<<16|R[L++]<<24;R=D.g[0],L=D.g[1],$=D.g[2];let G=D.g[3],j;j=R+(G^L&($^G))+U[0]+3614090360&4294967295,R=L+(j<<7&4294967295|j>>>25),j=G+($^R&(L^$))+U[1]+3905402710&4294967295,G=R+(j<<12&4294967295|j>>>20),j=$+(L^G&(R^L))+U[2]+606105819&4294967295,$=G+(j<<17&4294967295|j>>>15),j=L+(R^$&(G^R))+U[3]+3250441966&4294967295,L=$+(j<<22&4294967295|j>>>10),j=R+(G^L&($^G))+U[4]+4118548399&4294967295,R=L+(j<<7&4294967295|j>>>25),j=G+($^R&(L^$))+U[5]+1200080426&4294967295,G=R+(j<<12&4294967295|j>>>20),j=$+(L^G&(R^L))+U[6]+2821735955&4294967295,$=G+(j<<17&4294967295|j>>>15),j=L+(R^$&(G^R))+U[7]+4249261313&4294967295,L=$+(j<<22&4294967295|j>>>10),j=R+(G^L&($^G))+U[8]+1770035416&4294967295,R=L+(j<<7&4294967295|j>>>25),j=G+($^R&(L^$))+U[9]+2336552879&4294967295,G=R+(j<<12&4294967295|j>>>20),j=$+(L^G&(R^L))+U[10]+4294925233&4294967295,$=G+(j<<17&4294967295|j>>>15),j=L+(R^$&(G^R))+U[11]+2304563134&4294967295,L=$+(j<<22&4294967295|j>>>10),j=R+(G^L&($^G))+U[12]+1804603682&4294967295,R=L+(j<<7&4294967295|j>>>25),j=G+($^R&(L^$))+U[13]+4254626195&4294967295,G=R+(j<<12&4294967295|j>>>20),j=$+(L^G&(R^L))+U[14]+2792965006&4294967295,$=G+(j<<17&4294967295|j>>>15),j=L+(R^$&(G^R))+U[15]+1236535329&4294967295,L=$+(j<<22&4294967295|j>>>10),j=R+($^G&(L^$))+U[1]+4129170786&4294967295,R=L+(j<<5&4294967295|j>>>27),j=G+(L^$&(R^L))+U[6]+3225465664&4294967295,G=R+(j<<9&4294967295|j>>>23),j=$+(R^L&(G^R))+U[11]+643717713&4294967295,$=G+(j<<14&4294967295|j>>>18),j=L+(G^R&($^G))+U[0]+3921069994&4294967295,L=$+(j<<20&4294967295|j>>>12),j=R+($^G&(L^$))+U[5]+3593408605&4294967295,R=L+(j<<5&4294967295|j>>>27),j=G+(L^$&(R^L))+U[10]+38016083&4294967295,G=R+(j<<9&4294967295|j>>>23),j=$+(R^L&(G^R))+U[15]+3634488961&4294967295,$=G+(j<<14&4294967295|j>>>18),j=L+(G^R&($^G))+U[4]+3889429448&4294967295,L=$+(j<<20&4294967295|j>>>12),j=R+($^G&(L^$))+U[9]+568446438&4294967295,R=L+(j<<5&4294967295|j>>>27),j=G+(L^$&(R^L))+U[14]+3275163606&4294967295,G=R+(j<<9&4294967295|j>>>23),j=$+(R^L&(G^R))+U[3]+4107603335&4294967295,$=G+(j<<14&4294967295|j>>>18),j=L+(G^R&($^G))+U[8]+1163531501&4294967295,L=$+(j<<20&4294967295|j>>>12),j=R+($^G&(L^$))+U[13]+2850285829&4294967295,R=L+(j<<5&4294967295|j>>>27),j=G+(L^$&(R^L))+U[2]+4243563512&4294967295,G=R+(j<<9&4294967295|j>>>23),j=$+(R^L&(G^R))+U[7]+1735328473&4294967295,$=G+(j<<14&4294967295|j>>>18),j=L+(G^R&($^G))+U[12]+2368359562&4294967295,L=$+(j<<20&4294967295|j>>>12),j=R+(L^$^G)+U[5]+4294588738&4294967295,R=L+(j<<4&4294967295|j>>>28),j=G+(R^L^$)+U[8]+2272392833&4294967295,G=R+(j<<11&4294967295|j>>>21),j=$+(G^R^L)+U[11]+1839030562&4294967295,$=G+(j<<16&4294967295|j>>>16),j=L+($^G^R)+U[14]+4259657740&4294967295,L=$+(j<<23&4294967295|j>>>9),j=R+(L^$^G)+U[1]+2763975236&4294967295,R=L+(j<<4&4294967295|j>>>28),j=G+(R^L^$)+U[4]+1272893353&4294967295,G=R+(j<<11&4294967295|j>>>21),j=$+(G^R^L)+U[7]+4139469664&4294967295,$=G+(j<<16&4294967295|j>>>16),j=L+($^G^R)+U[10]+3200236656&4294967295,L=$+(j<<23&4294967295|j>>>9),j=R+(L^$^G)+U[13]+681279174&4294967295,R=L+(j<<4&4294967295|j>>>28),j=G+(R^L^$)+U[0]+3936430074&4294967295,G=R+(j<<11&4294967295|j>>>21),j=$+(G^R^L)+U[3]+3572445317&4294967295,$=G+(j<<16&4294967295|j>>>16),j=L+($^G^R)+U[6]+76029189&4294967295,L=$+(j<<23&4294967295|j>>>9),j=R+(L^$^G)+U[9]+3654602809&4294967295,R=L+(j<<4&4294967295|j>>>28),j=G+(R^L^$)+U[12]+3873151461&4294967295,G=R+(j<<11&4294967295|j>>>21),j=$+(G^R^L)+U[15]+530742520&4294967295,$=G+(j<<16&4294967295|j>>>16),j=L+($^G^R)+U[2]+3299628645&4294967295,L=$+(j<<23&4294967295|j>>>9),j=R+($^(L|~G))+U[0]+4096336452&4294967295,R=L+(j<<6&4294967295|j>>>26),j=G+(L^(R|~$))+U[7]+1126891415&4294967295,G=R+(j<<10&4294967295|j>>>22),j=$+(R^(G|~L))+U[14]+2878612391&4294967295,$=G+(j<<15&4294967295|j>>>17),j=L+(G^($|~R))+U[5]+4237533241&4294967295,L=$+(j<<21&4294967295|j>>>11),j=R+($^(L|~G))+U[12]+1700485571&4294967295,R=L+(j<<6&4294967295|j>>>26),j=G+(L^(R|~$))+U[3]+2399980690&4294967295,G=R+(j<<10&4294967295|j>>>22),j=$+(R^(G|~L))+U[10]+4293915773&4294967295,$=G+(j<<15&4294967295|j>>>17),j=L+(G^($|~R))+U[1]+2240044497&4294967295,L=$+(j<<21&4294967295|j>>>11),j=R+($^(L|~G))+U[8]+1873313359&4294967295,R=L+(j<<6&4294967295|j>>>26),j=G+(L^(R|~$))+U[15]+4264355552&4294967295,G=R+(j<<10&4294967295|j>>>22),j=$+(R^(G|~L))+U[6]+2734768916&4294967295,$=G+(j<<15&4294967295|j>>>17),j=L+(G^($|~R))+U[13]+1309151649&4294967295,L=$+(j<<21&4294967295|j>>>11),j=R+($^(L|~G))+U[4]+4149444226&4294967295,R=L+(j<<6&4294967295|j>>>26),j=G+(L^(R|~$))+U[11]+3174756917&4294967295,G=R+(j<<10&4294967295|j>>>22),j=$+(R^(G|~L))+U[2]+718787259&4294967295,$=G+(j<<15&4294967295|j>>>17),j=L+(G^($|~R))+U[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+($+(j<<21&4294967295|j>>>11))&4294967295,D.g[2]=D.g[2]+$&4294967295,D.g[3]=D.g[3]+G&4294967295}n.prototype.v=function(D,R){R===void 0&&(R=D.length);const L=R-this.blockSize,U=this.C;let $=this.h,G=0;for(;G<R;){if($==0)for(;G<=L;)r(this,D,G),G+=this.blockSize;if(typeof D=="string"){for(;G<R;)if(U[$++]=D.charCodeAt(G++),$==this.blockSize){r(this,U),$=0;break}}else for(;G<R;)if(U[$++]=D[G++],$==this.blockSize){r(this,U),$=0;break}}this.h=$,this.o+=R},n.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;R=this.o*8;for(var L=D.length-8;L<D.length;++L)D[L]=R&255,R/=256;for(this.v(D),D=Array(16),R=0,L=0;L<4;++L)for(let U=0;U<32;U+=8)D[R++]=this.g[L]>>>U&255;return D};function i(D,R){var L=u;return Object.prototype.hasOwnProperty.call(L,D)?L[D]:L[D]=R(D)}function o(D,R){this.h=R;const L=[];let U=!0;for(let $=D.length-1;$>=0;$--){const G=D[$]|0;U&&G==R||(L[$]=G,U=!1)}this.g=L}var u={};function d(D){return-128<=D&&D<128?i(D,function(R){return new o([R|0],R<0?-1:0)}):new o([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return T(h(-D));const R=[];let L=1;for(let U=0;D>=L;U++)R[U]=D/L|0,L*=4294967296;return new o(R,0)}function f(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return T(f(D.substring(1),R));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=h(Math.pow(R,8));let U=g;for(let G=0;G<D.length;G+=8){var $=Math.min(8,D.length-G);const j=parseInt(D.substring(G,G+$),R);$<8?($=h(Math.pow(R,$)),U=U.j($).add(h(j))):(U=U.j(L),U=U.add(h(j)))}return U}var g=d(0),w=d(1),A=d(16777216);s=o.prototype,s.m=function(){if(C(this))return-T(this).m();let D=0,R=1;for(let L=0;L<this.g.length;L++){const U=this.i(L);D+=(U>=0?U:4294967296+U)*R,R*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(F(this))return"0";if(C(this))return"-"+T(this).toString(D);const R=h(Math.pow(D,6));var L=this;let U="";for(;;){const $=V(L,R).g;L=P(L,$.j(R));let G=((L.g.length>0?L.g[0]:L.h)>>>0).toString(D);if(L=$,F(L))return G+U;for(;G.length<6;)G="0"+G;U=G+U}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function F(D){if(D.h!=0)return!1;for(let R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function C(D){return D.h==-1}s.l=function(D){return D=P(this,D),C(D)?-1:F(D)?0:1};function T(D){const R=D.g.length,L=[];for(let U=0;U<R;U++)L[U]=~D.g[U];return new o(L,~D.h).add(w)}s.abs=function(){return C(this)?T(this):this},s.add=function(D){const R=Math.max(this.g.length,D.g.length),L=[];let U=0;for(let $=0;$<=R;$++){let G=U+(this.i($)&65535)+(D.i($)&65535),j=(G>>>16)+(this.i($)>>>16)+(D.i($)>>>16);U=j>>>16,G&=65535,j&=65535,L[$]=j<<16|G}return new o(L,L[L.length-1]&-2147483648?-1:0)};function P(D,R){return D.add(T(R))}s.j=function(D){if(F(this)||F(D))return g;if(C(this))return C(D)?T(this).j(T(D)):T(T(this).j(D));if(C(D))return T(this.j(T(D)));if(this.l(A)<0&&D.l(A)<0)return h(this.m()*D.m());const R=this.g.length+D.g.length,L=[];for(var U=0;U<2*R;U++)L[U]=0;for(U=0;U<this.g.length;U++)for(let $=0;$<D.g.length;$++){const G=this.i(U)>>>16,j=this.i(U)&65535,ye=D.i($)>>>16,ce=D.i($)&65535;L[2*U+2*$]+=j*ce,O(L,2*U+2*$),L[2*U+2*$+1]+=G*ce,O(L,2*U+2*$+1),L[2*U+2*$+1]+=j*ye,O(L,2*U+2*$+1),L[2*U+2*$+2]+=G*ye,O(L,2*U+2*$+2)}for(D=0;D<R;D++)L[D]=L[2*D+1]<<16|L[2*D];for(D=R;D<2*R;D++)L[D]=0;return new o(L,0)};function O(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function N(D,R){this.g=D,this.h=R}function V(D,R){if(F(R))throw Error("division by zero");if(F(D))return new N(g,g);if(C(D))return R=V(T(D),R),new N(T(R.g),T(R.h));if(C(R))return R=V(D,T(R)),new N(T(R.g),R.h);if(D.g.length>30){if(C(D)||C(R))throw Error("slowDivide_ only works with positive integers.");for(var L=w,U=R;U.l(D)<=0;)L=z(L),U=z(U);var $=W(L,1),G=W(U,1);for(U=W(U,2),L=W(L,2);!F(U);){var j=G.add(U);j.l(D)<=0&&($=$.add(L),G=j),U=W(U,1),L=W(L,1)}return R=P(D,$.j(R)),new N($,R)}for($=g;D.l(R)>=0;){for(L=Math.max(1,Math.floor(D.m()/R.m())),U=Math.ceil(Math.log(L)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),G=h(L),j=G.j(R);C(j)||j.l(D)>0;)L-=U,G=h(L),j=G.j(R);F(G)&&(G=w),$=$.add(G),D=P(D,j)}return new N($,D)}s.B=function(D){return V(this,D).h},s.and=function(D){const R=Math.max(this.g.length,D.g.length),L=[];for(let U=0;U<R;U++)L[U]=this.i(U)&D.i(U);return new o(L,this.h&D.h)},s.or=function(D){const R=Math.max(this.g.length,D.g.length),L=[];for(let U=0;U<R;U++)L[U]=this.i(U)|D.i(U);return new o(L,this.h|D.h)},s.xor=function(D){const R=Math.max(this.g.length,D.g.length),L=[];for(let U=0;U<R;U++)L[U]=this.i(U)^D.i(U);return new o(L,this.h^D.h)};function z(D){const R=D.g.length+1,L=[];for(let U=0;U<R;U++)L[U]=D.i(U)<<1|D.i(U-1)>>>31;return new o(L,D.h)}function W(D,R){const L=R>>5;R%=32;const U=D.g.length-L,$=[];for(let G=0;G<U;G++)$[G]=R>0?D.i(G+L)>>>R|D.i(G+L+1)<<32-R:D.i(G+L);return new o($,D.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,jD=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Au=o}).apply(typeof BI<"u"?BI:typeof self<"u"?self:typeof window<"u"?window:{});var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $D,mg,zD,yA,cb,HD,WD,GD;(function(){var s,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kv=="object"&&Kv];for(var b=0;b<m.length;++b){var k=m[b];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var n=t(this);function r(m,b){if(b)e:{var k=n;m=m.split(".");for(var B=0;B<m.length-1;B++){var J=m[B];if(!(J in k))break e;k=k[J]}m=m[m.length-1],B=k[m],b=b(B),b!=B&&b!=null&&e(k,m,{configurable:!0,writable:!0,value:b})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(b){var k=[],B;for(B in b)Object.prototype.hasOwnProperty.call(b,B)&&k.push([B,b[B]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function d(m,b,k){return m.call.apply(m.bind,arguments)}function h(m,b,k){return h=d,h.apply(null,arguments)}function f(m,b){var k=Array.prototype.slice.call(arguments,1);return function(){var B=k.slice();return B.push.apply(B,arguments),m.apply(this,B)}}function g(m,b){function k(){}k.prototype=b.prototype,m.Z=b.prototype,m.prototype=new k,m.prototype.constructor=m,m.Ob=function(B,J,te){for(var ge=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ge[qe-2]=arguments[qe];return b.prototype[J].apply(B,ge)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function A(m){const b=m.length;if(b>0){const k=Array(b);for(let B=0;B<b;B++)k[B]=m[B];return k}return[]}function F(m,b){for(let B=1;B<arguments.length;B++){const J=arguments[B];var k=typeof J;if(k=k!="object"?k:J?Array.isArray(J)?"array":k:"null",k=="array"||k=="object"&&typeof J.length=="number"){k=m.length||0;const te=J.length||0;m.length=k+te;for(let ge=0;ge<te;ge++)m[k+ge]=J[ge]}else m.push(J)}}class C{constructor(b,k){this.i=b,this.j=k,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function T(m){o.setTimeout(()=>{throw m},0)}function P(){var m=D;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class O{constructor(){this.h=this.g=null}add(b,k){const B=N.get();B.set(b,k),this.h?this.h.next=B:this.g=B,this.h=B}}var N=new C(()=>new V,m=>m.reset());class V{constructor(){this.next=this.g=this.h=null}set(b,k){this.h=b,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let z,W=!1,D=new O,R=()=>{const m=Promise.resolve(void 0);z=()=>{m.then(L)}};function L(){for(var m;m=P();){try{m.h.call(m.g)}catch(k){T(k)}var b=N;b.j(m),b.h<100&&(b.h++,m.next=b.g,b.g=m)}W=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const k=()=>{};o.addEventListener("test",k,b),o.removeEventListener("test",k,b)}catch{}return m})();function j(m){return/^[\s\xa0]*$/.test(m)}function ye(m,b){$.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,b)}g(ye,$),ye.prototype.init=function(m,b){const k=this.type=m.type,B=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget,b||(k=="mouseover"?b=m.fromElement:k=="mouseout"&&(b=m.toElement)),this.relatedTarget=b,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),de=0;function me(m,b,k,B,J){this.listener=m,this.proxy=null,this.src=b,this.type=k,this.capture=!!B,this.ha=J,this.key=++de,this.da=this.fa=!1}function ie(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ve(m,b,k){for(const B in m)b.call(k,m[B],B,m)}function fe(m,b){for(const k in m)b.call(void 0,m[k],k,m)}function X(m){const b={};for(const k in m)b[k]=m[k];return b}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(m,b){let k,B;for(let J=1;J<arguments.length;J++){B=arguments[J];for(k in B)m[k]=B[k];for(let te=0;te<re.length;te++)k=re[te],Object.prototype.hasOwnProperty.call(B,k)&&(m[k]=B[k])}}function De(m){this.src=m,this.g={},this.h=0}De.prototype.add=function(m,b,k,B,J){const te=m.toString();m=this.g[te],m||(m=this.g[te]=[],this.h++);const ge=Me(m,b,B,J);return ge>-1?(b=m[ge],k||(b.fa=!1)):(b=new me(b,this.src,te,!!B,J),b.fa=k,m.push(b)),b};function ke(m,b){const k=b.type;if(k in m.g){var B=m.g[k],J=Array.prototype.indexOf.call(B,b,void 0),te;(te=J>=0)&&Array.prototype.splice.call(B,J,1),te&&(ie(b),m.g[k].length==0&&(delete m.g[k],m.h--))}}function Me(m,b,k,B){for(let J=0;J<m.length;++J){const te=m[J];if(!te.da&&te.listener==b&&te.capture==!!k&&te.ha==B)return J}return-1}var Ne="closure_lm_"+(Math.random()*1e6|0),et={};function dt(m,b,k,B,J){if(Array.isArray(b)){for(let te=0;te<b.length;te++)dt(m,b[te],k,B,J);return null}return k=c2(k),m&&m[ce]?m.J(b,k,u(B)?!!B.capture:!1,J):he(m,b,k,!1,B,J)}function he(m,b,k,B,J,te){if(!b)throw Error("Invalid event type");const ge=u(J)?!!J.capture:!!J;let qe=np(m);if(qe||(m[Ne]=qe=new De(m)),k=qe.add(b,k,B,ge,te),k.proxy)return k;if(B=Ke(),k.proxy=B,B.src=m,B.listener=k,m.addEventListener)G||(J=ge),J===void 0&&(J=!1),m.addEventListener(b.toString(),B,J);else if(m.attachEvent)m.attachEvent(Ol(b.toString()),B);else if(m.addListener&&m.removeListener)m.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Ke(){function m(k){return b.call(m.src,m.listener,k)}const b=k0;return m}function zn(m,b,k,B,J){if(Array.isArray(b))for(var te=0;te<b.length;te++)zn(m,b[te],k,B,J);else B=u(B)?!!B.capture:!!B,k=c2(k),m&&m[ce]?(m=m.i,te=String(b).toString(),te in m.g&&(b=m.g[te],k=Me(b,k,B,J),k>-1&&(ie(b[k]),Array.prototype.splice.call(b,k,1),b.length==0&&(delete m.g[te],m.h--)))):m&&(m=np(m))&&(b=m.g[b.toString()],m=-1,b&&(m=Me(b,k,B,J)),(k=m>-1?b[m]:null)&&Nr(k))}function Nr(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[ce])ke(b.i,m);else{var k=m.type,B=m.proxy;b.removeEventListener?b.removeEventListener(k,B,m.capture):b.detachEvent?b.detachEvent(Ol(k),B):b.addListener&&b.removeListener&&b.removeListener(B),(k=np(b))?(ke(k,m),k.h==0&&(k.src=null,b[Ne]=null)):ie(m)}}}function Ol(m){return m in et?et[m]:et[m]="on"+m}function k0(m,b){if(m.da)m=!0;else{b=new ye(b,this);const k=m.listener,B=m.ha||m.src;m.fa&&Nr(m),m=k.call(B,b)}return m}function np(m){return m=m[Ne],m instanceof De?m:null}var ju="__closure_events_fn_"+(Math.random()*1e9>>>0);function c2(m){return typeof m=="function"?m:(m[ju]||(m[ju]=function(b){return m.handleEvent(b)}),m[ju])}function En(){U.call(this),this.i=new De(this),this.M=this,this.G=null}g(En,U),En.prototype[ce]=!0,En.prototype.removeEventListener=function(m,b,k,B){zn(this,m,b,k,B)};function gn(m,b){var k,B=m.G;if(B)for(k=[];B;B=B.G)k.push(B);if(m=m.M,B=b.type||b,typeof b=="string")b=new $(b,m);else if(b instanceof $)b.target=b.target||m;else{var J=b;b=new $(B,m),_e(b,J)}J=!0;let te,ge;if(k)for(ge=k.length-1;ge>=0;ge--)te=b.g=k[ge],J=Fi(te,B,!0,b)&&J;if(te=b.g=m,J=Fi(te,B,!0,b)&&J,J=Fi(te,B,!1,b)&&J,k)for(ge=0;ge<k.length;ge++)te=b.g=k[ge],J=Fi(te,B,!1,b)&&J}En.prototype.N=function(){if(En.Z.N.call(this),this.i){var m=this.i;for(const b in m.g){const k=m.g[b];for(let B=0;B<k.length;B++)ie(k[B]);delete m.g[b],m.h--}}this.G=null},En.prototype.J=function(m,b,k,B){return this.i.add(String(m),b,!1,k,B)},En.prototype.K=function(m,b,k,B){return this.i.add(String(m),b,!0,k,B)};function Fi(m,b,k,B){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();let J=!0;for(let te=0;te<b.length;++te){const ge=b[te];if(ge&&!ge.da&&ge.capture==k){const qe=ge.listener,yn=ge.ha||ge.src;ge.fa&&ke(m.i,ge),J=qe.call(yn,B)!==!1&&J}}return J&&!B.defaultPrevented}function u2(m,b){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:o.setTimeout(m,b||0)}function d2(m){m.g=u2(()=>{m.g=null,m.i&&(m.i=!1,d2(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class I0 extends U{constructor(b,k){super(),this.m=b,this.l=k,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:d2(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bl(m){U.call(this),this.h=m,this.g={}}g(Bl,U);var h2=[];function rp(m){ve(m.g,function(b,k){this.g.hasOwnProperty(k)&&Nr(b)},m),m.g={}}Bl.prototype.N=function(){Bl.Z.N.call(this),rp(this)},Bl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vl=o.JSON.stringify,P0=o.JSON.parse,$u=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function Ul(){}function R0(){}var jl={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sp(){$.call(this,"d")}g(sp,$);function p2(){$.call(this,"c")}g(p2,$);var Si={},ip=null;function $l(){return ip=ip||new En}Si.Ia="serverreachability";function ap(m){$.call(this,Si.Ia,m)}g(ap,$);function fo(m){const b=$l();gn(b,new ap(b))}Si.STAT_EVENT="statevent";function mo(m,b){$.call(this,Si.STAT_EVENT,m),this.stat=b}g(mo,$);function an(m){const b=$l();gn(b,new mo(b,m))}Si.Ja="timingevent";function f2(m,b){$.call(this,Si.Ja,m),this.size=b}g(f2,$);function zl(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},b)}function Hl(){this.g=!0}Hl.prototype.ua=function(){this.g=!1};function D0(m,b,k,B,J,te){m.info(function(){if(m.g)if(te){var ge="",qe=te.split("&");for(let Et=0;Et<qe.length;Et++){var yn=qe[Et].split("=");if(yn.length>1){const bn=yn[0];yn=yn[1];const ys=bn.split("_");ge=ys.length>=2&&ys[1]=="type"?ge+(bn+"="+yn+"&"):ge+(bn+"=redacted&")}}}else ge=null;else ge=te;return"XMLHTTP REQ ("+B+") [attempt "+J+"]: "+b+`
`+k+`
`+ge})}function N0(m,b,k,B,J,te,ge){m.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+J+"]: "+b+`
`+k+`
`+te+" "+ge})}function ia(m,b,k,B){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+zu(m,k)+(B?" "+B:"")})}function M0(m,b){m.info(function(){return"TIMEOUT: "+b})}Hl.prototype.info=function(){};function zu(m,b){if(!m.g)return b;if(!b)return null;try{const te=JSON.parse(b);if(te){for(m=0;m<te.length;m++)if(Array.isArray(te[m])){var k=te[m];if(!(k.length<2)){var B=k[1];if(Array.isArray(B)&&!(B.length<1)){var J=B[0];if(J!="noop"&&J!="stop"&&J!="close")for(let ge=1;ge<B.length;ge++)B[ge]=""}}}}return Vl(te)}catch{return b}}var Wl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},L0;function go(){}g(go,Ul),go.prototype.g=function(){return new XMLHttpRequest},L0=new go;function aa(m){return encodeURIComponent(String(m))}function op(m){var b=1;m=m.split(":");const k=[];for(;b>0&&m.length;)k.push(m.shift()),b--;return m.length&&k.push(m.join(":")),k}function Xs(m,b,k,B){this.j=m,this.i=b,this.l=k,this.S=B||1,this.V=new Bl(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new O0}function O0(){this.i=null,this.g="",this.h=!1}var B0={},m2={};function Ti(m,b,k){m.M=1,m.A=wo(Ys(b)),m.u=k,m.R=!0,g2(m,null)}function g2(m,b){m.F=Date.now(),Hu(m),m.B=Ys(m.A);var k=m.B,B=m.S;Array.isArray(B)||(B=[String(B)]),F2(k.i,"t",B),m.C=0,k=m.j.L,m.h=new O0,m.g=K0(m.j,k?b:null,!m.u),m.P>0&&(m.O=new I0(h(m.Y,m,m.g),m.P)),b=m.V,k=m.g,B=m.ba;var J="readystatechange";Array.isArray(J)||(J&&(h2[0]=J.toString()),J=h2);for(let te=0;te<J.length;te++){const ge=dt(k,J[te],B||b.handleEvent,!1,b.h||b);if(!ge)break;b.g[ge.key]=ge}b=m.J?X(m.J):{},m.u?(m.v||(m.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,b)):(m.v="GET",m.g.ea(m.B,m.v,null,b)),fo(),D0(m.i,m.v,m.B,m.l,m.S,m.u)}Xs.prototype.ba=function(m){m=m.target;const b=this.O;b&&pa(m)==3?b.j():this.Y(m)},Xs.prototype.Y=function(m){try{if(m==this.g)e:{const qe=pa(this.g),yn=this.g.ya(),Et=this.g.ca();if(!(qe<3)&&(qe!=3||this.g&&(this.h.h||this.g.la()||G0(this.g)))){this.K||qe!=4||yn==7||(yn==8||Et<=0?fo(3):fo(2)),lp(this);var b=this.g.ca();this.X=b;var k=V0(this);if(this.o=b==200,N0(this.i,this.v,this.B,this.l,this.S,qe,b),this.o){if(this.U&&!this.L){t:{if(this.g){var B,J=this.g;if((B=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(B)){var te=B;break t}}te=null}if(m=te)ia(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jt(this,m);else{this.o=!1,this.m=3,an(12),yo(this),Wu(this);break e}}if(this.R){m=!0;let bn;for(;!this.K&&this.C<k.length;)if(bn=j0(this,k),bn==m2){qe==4&&(this.m=4,an(14),m=!1),ia(this.i,this.l,null,"[Incomplete Response]");break}else if(bn==B0){this.m=4,an(15),ia(this.i,this.l,k,"[Invalid Chunk]"),m=!1;break}else ia(this.i,this.l,bn,null),jt(this,bn);if(U0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||k.length!=0||this.h.h||(this.m=1,an(16),m=!1),this.o=this.o&&m,!m)ia(this.i,this.l,k,"[Invalid Chunked Response]"),yo(this),Wu(this);else if(k.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),ed(ge),ge.P=!0,an(11))}}else ia(this.i,this.l,k,null),jt(this,k);qe==4&&yo(this),this.o&&!this.K&&(qe==4?wp(this.j,this):(this.o=!1,Hu(this)))}else T2(this.g),b==400&&k.indexOf("Unknown SID")>0?(this.m=3,an(12)):(this.m=0,an(13)),yo(this),Wu(this)}}}catch{}finally{}};function V0(m){if(!U0(m))return m.g.la();const b=G0(m.g);if(b==="")return"";let k="";const B=b.length,J=pa(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return yo(m),Wu(m),"";m.h.i=new o.TextDecoder}for(let te=0;te<B;te++)m.h.h=!0,k+=m.h.i.decode(b[te],{stream:!(J&&te==B-1)});return b.length=0,m.h.g+=k,m.C=0,m.h.g}function U0(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function j0(m,b){var k=m.C,B=b.indexOf(`
`,k);return B==-1?m2:(k=Number(b.substring(k,B)),isNaN(k)?B0:(B+=1,B+k>b.length?m2:(b=b.slice(B,B+k),m.C=B+k,b)))}Xs.prototype.cancel=function(){this.K=!0,yo(this)};function Hu(m){m.T=Date.now()+m.H,y2(m,m.H)}function y2(m,b){if(m.D!=null)throw Error("WatchDog timer not null");m.D=zl(h(m.aa,m),b)}function lp(m){m.D&&(o.clearTimeout(m.D),m.D=null)}Xs.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(M0(this.i,this.B),this.M!=2&&(fo(),an(17)),yo(this),this.m=2,Wu(this)):y2(this,this.T-m)};function Wu(m){m.j.I==0||m.K||wp(m.j,m)}function yo(m){lp(m);var b=m.O;b&&typeof b.dispose=="function"&&b.dispose(),m.O=null,rp(m.V),m.g&&(b=m.g,m.g=null,b.abort(),b.dispose())}function jt(m,b){try{var k=m.j;if(k.I!=0&&(k.g==m||v2(k.h,m))){if(!m.L&&v2(k.h,m)&&k.I==3){try{var B=k.Ba.g.parse(b)}catch{B=null}if(Array.isArray(B)&&B.length==3){var J=B;if(J[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<m.F)yp(k),ms(k);else break e;ga(k),an(18)}}else k.xa=J[1],0<k.xa-k.K&&J[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=zl(h(k.Va,k),6e3));Gu(k.h)<=1&&k.ta&&(k.ta=void 0)}else gs(k,11)}else if((m.L||k.g==m)&&yp(k),!j(b))for(J=k.Ba.g.parse(b),b=0;b<J.length;b++){let Et=J[b];const bn=Et[0];if(!(bn<=k.K))if(k.K=bn,Et=Et[1],k.I==2)if(Et[0]=="c"){k.M=Et[1],k.ba=Et[2];const ys=Et[3];ys!=null&&(k.ka=ys,k.j.info("VER="+k.ka));const Eo=Et[4];Eo!=null&&(k.za=Eo,k.j.info("SVER="+k.za));const ya=Et[5];ya!=null&&typeof ya=="number"&&ya>0&&(B=1.5*ya,k.O=B,k.j.info("backChannelRequestTimeoutMs_="+B)),B=k;const wa=m.g;if(wa){const _p=wa.g?wa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_p){var te=B.h;te.g||_p.indexOf("spdy")==-1&&_p.indexOf("quic")==-1&&_p.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(up(te,te.h),te.h=null))}if(B.G){const P2=wa.g?wa.g.getResponseHeader("X-HTTP-Session-Id"):null;P2&&(B.wa=P2,yt(B.J,B.G,P2))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-m.F,k.j.info("Handshake RTT: "+k.T+"ms")),B=k;var ge=m;if(B.na=I2(B,B.L?B.ba:null,B.W),ge.L){qu(B.h,ge);var qe=ge,yn=B.O;yn&&(qe.H=yn),qe.D&&(lp(qe),Hu(qe)),B.g=ge}else wr(B);k.i.length>0&&xo(k)}else Et[0]!="stop"&&Et[0]!="close"||gs(k,7);else k.I==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?gs(k,7):mp(k):Et[0]!="noop"&&k.l&&k.l.qa(Et),k.A=0)}}fo(4)}catch{}}var q1=class{constructor(m,b){this.g=m,this.map=b}};function cp(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function w2(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Gu(m){return m.h?1:m.g?m.g.size:0}function v2(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function up(m,b){m.g?m.g.add(b):m.h=b}function qu(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}cp.prototype.cancel=function(){if(this.i=hs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function hs(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const k of m.g.values())b=b.concat(k.G);return b}return A(m.i)}var $0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ps(m,b){if(m){m=m.split("&");for(let k=0;k<m.length;k++){const B=m[k].indexOf("=");let J,te=null;B>=0?(J=m[k].substring(0,B),te=m[k].substring(B+1)):J=m[k],b(J,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function oa(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;m instanceof oa?(this.l=m.l,Ku(this,m.j),this.o=m.o,this.g=m.g,la(this,m.u),this.h=m.h,ql(this,S2(m.i)),this.m=m.m):m&&(b=String(m).match($0))?(this.l=!1,Ku(this,b[1]||"",!0),this.o=Qu(b[2]||""),this.g=Qu(b[3]||"",!0),la(this,b[4]),this.h=Qu(b[5]||"",!0),ql(this,b[6]||"",!0),this.m=Qu(b[7]||"")):(this.l=!1,this.i=new ot(null,this.l))}oa.prototype.toString=function(){const m=[];var b=this.j;b&&m.push(Xu(b,_2,!0),":");var k=this.g;return(k||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Xu(b,_2,!0),"@"),m.push(aa(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&m.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&m.push("/"),m.push(Xu(k,k.charAt(0)=="/"?Yu:x2,!0))),(k=this.i.toString())&&m.push("?",k),(k=this.m)&&m.push("#",Xu(k,E2)),m.join("")},oa.prototype.resolve=function(m){const b=Ys(this);let k=!!m.j;k?Ku(b,m.j):k=!!m.o,k?b.o=m.o:k=!!m.g,k?b.g=m.g:k=m.u!=null;var B=m.h;if(k)la(b,m.u);else if(k=!!m.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var J=b.h.lastIndexOf("/");J!=-1&&(B=b.h.slice(0,J+1)+B)}if(J=B,J==".."||J==".")B="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){B=J.lastIndexOf("/",0)==0,J=J.split("/");const te=[];for(let ge=0;ge<J.length;){const qe=J[ge++];qe=="."?B&&ge==J.length&&te.push(""):qe==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),B&&ge==J.length&&te.push("")):(te.push(qe),B=!0)}B=te.join("/")}else B=J}return k?b.h=B:k=m.i.toString()!=="",k?ql(b,S2(m.i)):k=!!m.m,k&&(b.m=m.m),b};function Ys(m){return new oa(m)}function Ku(m,b,k){m.j=k?Qu(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function la(m,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);m.u=b}else m.u=null}function ql(m,b,k){b instanceof ot?(m.i=b,hp(m.i,m.l)):(k||(b=Xu(b,K1)),m.i=new ot(b,m.l))}function yt(m,b,k){m.i.set(b,k)}function wo(m){return yt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Qu(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Xu(m,b,k){return typeof m=="string"?(m=encodeURI(m).replace(b,A2),k&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function A2(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var _2=/[#\/\?@]/g,x2=/[#\?:]/g,Yu=/[#\?]/g,K1=/[#\?@]/g,E2=/#/g;function ot(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function ca(m){m.g||(m.g=new Map,m.h=0,m.i&&ps(m.i,function(b,k){m.add(decodeURIComponent(b.replace(/\+/g," ")),k)}))}s=ot.prototype,s.add=function(m,b){ca(this),this.i=null,m=ua(this,m);let k=this.g.get(m);return k||this.g.set(m,k=[]),k.push(b),this.h+=1,this};function b2(m,b){ca(m),b=ua(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function dp(m,b){return ca(m),b=ua(m,b),m.g.has(b)}s.forEach=function(m,b){ca(this),this.g.forEach(function(k,B){k.forEach(function(J){m.call(b,J,B,this)},this)},this)};function C2(m,b){ca(m);let k=[];if(typeof b=="string")dp(m,b)&&(k=k.concat(m.g.get(ua(m,b))));else for(m=Array.from(m.g.values()),b=0;b<m.length;b++)k=k.concat(m[b]);return k}s.set=function(m,b){return ca(this),this.i=null,m=ua(this,m),dp(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},s.get=function(m,b){return m?(m=C2(this,m),m.length>0?String(m[0]):b):b};function F2(m,b,k){b2(m,b),k.length>0&&(m.i=null,m.g.set(ua(m,b),A(k)),m.h+=k.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(let B=0;B<b.length;B++){var k=b[B];const J=aa(k);k=C2(this,k);for(let te=0;te<k.length;te++){let ge=J;k[te]!==""&&(ge+="="+aa(k[te])),m.push(ge)}}return this.i=m.join("&")};function S2(m){const b=new ot;return b.i=m.i,m.g&&(b.g=new Map(m.g),b.h=m.h),b}function ua(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function hp(m,b){b&&!m.j&&(ca(m),m.i=null,m.g.forEach(function(k,B){const J=B.toLowerCase();B!=J&&(b2(this,B),F2(this,J,k))},m)),m.j=b}function da(m,b){const k=new Hl;if(o.Image){const B=new Image;B.onload=f(tr,k,"TestLoadImage: loaded",!0,b,B),B.onerror=f(tr,k,"TestLoadImage: error",!1,b,B),B.onabort=f(tr,k,"TestLoadImage: abort",!1,b,B),B.ontimeout=f(tr,k,"TestLoadImage: timeout",!1,b,B),o.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=m}else b(!1)}function ha(m,b){const k=new Hl,B=new AbortController,J=setTimeout(()=>{B.abort(),tr(k,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:B.signal}).then(te=>{clearTimeout(J),te.ok?tr(k,"TestPingServer: ok",!0,b):tr(k,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(J),tr(k,"TestPingServer: error",!1,b)})}function tr(m,b,k,B,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),B(k)}catch{}}function Ju(){this.g=new $u}function vo(m){this.i=m.Sb||null,this.h=m.ab||!1}g(vo,Ul),vo.prototype.g=function(){return new fs(this.i,this.h)};function fs(m,b){En.call(this),this.H=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(fs,En),s=fs.prototype,s.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=b,this.readyState=1,ki(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(b.body=m),(this.H||o).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kl(this)),this.readyState=0},s.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ki(this)),this.g&&(this.readyState=3,ki(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;z0(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function z0(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}s.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?Kl(this):ki(this),this.readyState==3&&z0(this)}},s.Oa=function(m){this.g&&(this.response=this.responseText=m,Kl(this))},s.Na=function(m){this.g&&(this.response=m,Kl(this))},s.ga=function(){this.g&&Kl(this)};function Kl(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ki(m)}s.setRequestHeader=function(m,b){this.A.append(m,b)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var k=b.next();!k.done;)k=k.value,m.push(k[0]+": "+k[1]),k=b.next();return m.join(`\r
`)};function ki(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function H0(m){let b="";return ve(m,function(k,B){b+=B,b+=":",b+=k,b+=`\r
`}),b}function pp(m,b,k){e:{for(B in k){var B=!1;break e}B=!0}B||(k=H0(k),typeof m=="string"?k!=null&&aa(k):yt(m,b,k))}function Dt(m){En.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Dt,En);var W0=/^https?$/i,Q1=["POST","PUT"];s=Dt.prototype,s.Fa=function(m){this.H=m},s.ea=function(m,b,k,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():L0.g(),this.g.onreadystatechange=w(h(this.Ca,this));try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(te){Ql(this,te);return}if(m=k||"",k=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var J in B)k.set(J,B[J]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const te of B.keys())k.set(te,B.get(te));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(k.keys()).find(te=>te.toLowerCase()=="content-type"),J=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(Q1,b,void 0)>=0)||B||J||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ge]of k)this.g.setRequestHeader(te,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(te){Ql(this,te)}};function Ql(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.o=5,Xl(m),_o(m)}function Xl(m){m.A||(m.A=!0,gn(m,"complete"),gn(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,gn(this,"complete"),gn(this,"abort"),_o(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_o(this,!0)),Dt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ao(this):this.Xa())},s.Xa=function(){Ao(this)};function Ao(m){if(m.h&&typeof i<"u"){if(m.v&&pa(m)==4)setTimeout(m.Ca.bind(m),0);else if(gn(m,"readystatechange"),pa(m)==4){m.h=!1;try{const te=m.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var k;if(!(k=b)){var B;if(B=te===0){let ge=String(m.D).match($0)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),B=!W0.test(ge?ge.toLowerCase():"")}k=B}if(k)gn(m,"complete"),gn(m,"success");else{m.o=6;try{var J=pa(m)>2?m.g.statusText:""}catch{J=""}m.l=J+" ["+m.ca()+"]",Xl(m)}}finally{_o(m)}}}}function _o(m,b){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const k=m.g;m.g=null,b||gn(m,"ready");try{k.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function pa(m){return m.g?m.g.readyState:0}s.ca=function(){try{return pa(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),P0(b)}};function G0(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function T2(m){const b={};m=(m.g&&pa(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<m.length;B++){if(j(m[B]))continue;var k=op(m[B]);const J=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const te=b[J]||[];b[J]=te,te.push(k)}fe(b,function(B){return B.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(m,b,k){return k&&k.internalChannelParams&&k.internalChannelParams[m]||b}function fp(m){this.za=0,this.i=[],this.j=new Hl,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fa("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fa("baseRetryDelayMs",5e3,m),this.Za=fa("retryDelaySeedMs",1e4,m),this.Ta=fa("forwardChannelMaxRetries",2,m),this.va=fa("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new cp(m&&m.concurrentRequestLimit),this.Ba=new Ju,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=fp.prototype,s.ka=8,s.I=1,s.connect=function(m,b,k,B){an(0),this.W=m,this.H=b||{},k&&B!==void 0&&(this.H.OSID=k,this.H.OAID=B),this.F=this.X,this.J=I2(this,null,this.W),xo(this)};function mp(m){if(gp(m),m.I==3){var b=m.V++,k=Ys(m.J);if(yt(k,"SID",m.M),yt(k,"RID",b),yt(k,"TYPE","terminate"),ma(m,k),b=new Xs(m,m.j,b),b.M=2,b.A=wo(Ys(k)),k=!1,o.navigator&&o.navigator.sendBeacon)try{k=o.navigator.sendBeacon(b.A.toString(),"")}catch{}!k&&o.Image&&(new Image().src=b.A,k=!0),k||(b.g=K0(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Hu(b)}td(m)}function ms(m){m.g&&(ed(m),m.g.cancel(),m.g=null)}function gp(m){ms(m),m.v&&(o.clearTimeout(m.v),m.v=null),yp(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function xo(m){if(!w2(m.h)&&!m.m){m.m=!0;var b=m.Ea;z||R(),W||(z(),W=!0),D.add(b,m),m.D=0}}function q0(m,b){return Gu(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=b.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=zl(h(m.Ea,m,b),vp(m,m.D)),m.D++,!0)}s.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const J=new Xs(this,this.j,m);let te=this.o;if(this.U&&(te?(te=X(te),_e(te,this.U)):te=this.U),this.u!==null||this.R||(J.J=te,te=null),this.S)e:{for(var b=0,k=0;k<this.i.length;k++){t:{var B=this.i[k];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(b+=B,b>4096){b=k;break e}if(b===4096||k===this.i.length-1){b=k+1;break e}}b=1e3}else b=1e3;b=k2(this,J,b),k=Ys(this.J),yt(k,"RID",m),yt(k,"CVER",22),this.G&&yt(k,"X-HTTP-Session-Id",this.G),ma(this,k),te&&(this.R?b="headers="+aa(H0(te))+"&"+b:this.u&&pp(k,this.u,te)),up(this.h,J),this.Ra&&yt(k,"TYPE","init"),this.S?(yt(k,"$req",b),yt(k,"SID","null"),J.U=!0,Ti(J,k,null)):Ti(J,k,b),this.I=2}}else this.I==3&&(m?Zu(this,m):this.i.length==0||w2(this.h)||Zu(this))};function Zu(m,b){var k;b?k=b.l:k=m.V++;const B=Ys(m.J);yt(B,"SID",m.M),yt(B,"RID",k),yt(B,"AID",m.K),ma(m,B),m.u&&m.o&&pp(B,m.u,m.o),k=new Xs(m,m.j,k,m.D+1),m.u===null&&(k.J=m.o),b&&(m.i=b.G.concat(m.i)),b=k2(m,k,1e3),k.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),up(m.h,k),Ti(k,B,b)}function ma(m,b){m.H&&ve(m.H,function(k,B){yt(b,B,k)}),m.l&&ve({},function(k,B){yt(b,B,k)})}function k2(m,b,k){k=Math.min(m.i.length,k);const B=m.l?h(m.l.Ka,m.l,m):null;e:{var J=m.i;let qe=-1;for(;;){const yn=["count="+k];qe==-1?k>0?(qe=J[0].g,yn.push("ofs="+qe)):qe=0:yn.push("ofs="+qe);let Et=!0;for(let bn=0;bn<k;bn++){var te=J[bn].g;const ys=J[bn].map;if(te-=qe,te<0)qe=Math.max(0,J[bn].g-100),Et=!1;else try{te="req"+te+"_"||"";try{var ge=ys instanceof Map?ys:Object.entries(ys);for(const[Eo,ya]of ge){let wa=ya;u(ya)&&(wa=Vl(ya)),yn.push(te+Eo+"="+encodeURIComponent(wa))}}catch(Eo){throw yn.push(te+"type="+encodeURIComponent("_badmap")),Eo}}catch{B&&B(ys)}}if(Et){ge=yn.join("&");break e}}ge=void 0}return m=m.i.splice(0,k),b.G=m,ge}function wr(m){if(!m.g&&!m.v){m.Y=1;var b=m.Da;z||R(),W||(z(),W=!0),D.add(b,m),m.A=0}}function ga(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=zl(h(m.Da,m),vp(m,m.A)),m.A++,!0)}s.Da=function(){if(this.v=null,Yl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=zl(h(this.Wa,this),m)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,an(10),ms(this),Yl(this))};function ed(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function Yl(m){m.g=new Xs(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var b=Ys(m.na);yt(b,"RID","rpc"),yt(b,"SID",m.M),yt(b,"AID",m.K),yt(b,"CI",m.F?"0":"1"),!m.F&&m.ia&&yt(b,"TO",m.ia),yt(b,"TYPE","xmlhttp"),ma(m,b),m.u&&m.o&&pp(b,m.u,m.o),m.O&&(m.g.H=m.O);var k=m.g;m=m.ba,k.M=1,k.A=wo(Ys(b)),k.u=null,k.R=!0,g2(k,m)}s.Va=function(){this.C!=null&&(this.C=null,ms(this),ga(this),an(19))};function yp(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function wp(m,b){var k=null;if(m.g==b){yp(m),ed(m),m.g=null;var B=2}else if(v2(m.h,b))k=b.G,qu(m.h,b),B=1;else return;if(m.I!=0){if(b.o)if(B==1){k=b.u?b.u.length:0,b=Date.now()-b.F;var J=m.D;B=$l(),gn(B,new f2(B,k)),xo(m)}else wr(m);else if(J=b.m,J==3||J==0&&b.X>0||!(B==1&&q0(m,b)||B==2&&ga(m)))switch(k&&k.length>0&&(b=m.h,b.i=b.i.concat(k)),J){case 1:gs(m,5);break;case 4:gs(m,10);break;case 3:gs(m,6);break;default:gs(m,2)}}}function vp(m,b){let k=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(k*=2),k*b}function gs(m,b){if(m.j.info("Error code "+b),b==2){var k=h(m.bb,m),B=m.Ua;const J=!B;B=new oa(B||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ku(B,"https"),wo(B),J?da(B.toString(),k):ha(B.toString(),k)}else an(2);m.I=0,m.l&&m.l.pa(b),td(m),gp(m)}s.bb=function(m){m?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function td(m){if(m.I=0,m.ja=[],m.l){const b=hs(m.h);(b.length!=0||m.i.length!=0)&&(F(m.ja,b),F(m.ja,m.i),m.h.i.length=0,A(m.i),m.i.length=0),m.l.oa()}}function I2(m,b,k){var B=k instanceof oa?Ys(k):new oa(k);if(B.g!="")b&&(B.g=b+"."+B.g),la(B,B.u);else{var J=o.location;B=J.protocol,b=b?b+"."+J.hostname:J.hostname,J=+J.port;const te=new oa(null);B&&Ku(te,B),b&&(te.g=b),J&&la(te,J),k&&(te.h=k),B=te}return k=m.G,b=m.wa,k&&b&&yt(B,k,b),yt(B,"VER",m.ka),ma(m,B),B}function K0(m,b,k){if(b&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Aa&&!m.ma?new Dt(new vo({ab:k})):new Dt(m.ma),b.Fa(m.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Q0(){}s=Q0.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ap(){}Ap.prototype.g=function(m,b){return new nr(m,b)};function nr(m,b){En.call(this),this.g=new fp(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(m?m["X-WebChannel-Client-Profile"]=b.sa:m={"X-WebChannel-Client-Profile":b.sa}),this.g.U=m,(m=b&&b.Qb)&&!j(m)&&(this.g.u=m),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!j(b)&&(this.g.G=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Jl(this)}g(nr,En),nr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nr.prototype.close=function(){mp(this.g)},nr.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var k={};k.__data__=m,m=k}else this.v&&(k={},k.__data__=Vl(m),m=k);b.i.push(new q1(b.Ya++,m)),b.I==3&&xo(b)},nr.prototype.N=function(){this.g.l=null,delete this.j,mp(this.g),delete this.g,nr.Z.N.call(this)};function X0(m){sp.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const k in b){m=k;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}g(X0,sp);function Y0(){p2.call(this),this.status=1}g(Y0,p2);function Jl(m){this.g=m}g(Jl,Q0),Jl.prototype.ra=function(){gn(this.g,"a")},Jl.prototype.qa=function(m){gn(this.g,new X0(m))},Jl.prototype.pa=function(m){gn(this.g,new Y0)},Jl.prototype.oa=function(){gn(this.g,"b")},Ap.prototype.createWebChannel=Ap.prototype.g,nr.prototype.send=nr.prototype.o,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,GD=function(){return new Ap},WD=function(){return $l()},HD=Si,cb={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wl.NO_ERROR=0,Wl.TIMEOUT=8,Wl.HTTP_ERROR=6,yA=Wl,Gl.COMPLETE="complete",zD=Gl,R0.EventType=jl,jl.OPEN="a",jl.CLOSE="b",jl.ERROR="c",jl.MESSAGE="d",En.prototype.listen=En.prototype.J,mg=R0,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,$D=Dt}).apply(typeof Kv<"u"?Kv:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r2="12.9.0";function tj(s){r2=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new pF("@firebase/firestore");function zp(){return Vh.logLevel}function be(s,...e){if(Vh.logLevel<=st.DEBUG){const t=e.map(bF);Vh.debug(`Firestore (${r2}): ${s}`,...t)}}function kl(s,...e){if(Vh.logLevel<=st.ERROR){const t=e.map(bF);Vh.error(`Firestore (${r2}): ${s}`,...t)}}function Uh(s,...e){if(Vh.logLevel<=st.WARN){const t=e.map(bF);Vh.warn(`Firestore (${r2}): ${s}`,...t)}}function bF(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(s,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,qD(s,n,t)}function qD(s,e,t){let n=`FIRESTORE (${r2}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw kl(n),new Error(n)}function _t(s,e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,s||qD(e,r,n)}function ze(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends po{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Pr.UNAUTHENTICATED)))}shutdown(){}}class rj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sj{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_t(this.o===void 0,42304);let n=this.i;const r=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let i=new no;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new no,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},u=d=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new no)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_t(typeof n.accessToken=="string",31837,{l:n}),new KD(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new Pr(e)}}class ij{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class aj{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ij(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Pr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class VI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_t(this.o===void 0,3512);const n=i=>{i.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const r=i=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new VI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new VI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<s;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=lj(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function it(s,e){return s<e?-1:s>e?1:0}function ub(s,e){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++){const r=s.charAt(n),i=e.charAt(n);if(r!==i)return RE(r)===RE(i)?it(r,i):RE(r)?1:-1}return it(s.length,e.length)}const cj=55296,uj=57343;function RE(s){const e=s.charCodeAt(0);return e>=cj&&e<=uj}function zm(s,e,t){return s.length===e.length&&s.every(((n,r)=>t(n,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="__name__";class Ta{constructor(e,t,n){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&je(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ta.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ta?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const i=Ta.compareSegments(e.get(r),t.get(r));if(i!==0)return i}return it(e.length,t.length)}static compareSegments(e,t){const n=Ta.isNumericId(e),r=Ta.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Ta.extractNumericId(e).compare(Ta.extractNumericId(t)):ub(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Au.fromString(e.substring(4,e.length-2))}}class Vt extends Ta{construct(e,t,n){return new Vt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ae(se.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((r=>r.length>0)))}return new Vt(t)}static emptyPath(){return new Vt([])}}const dj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mr extends Ta{construct(e,t,n){return new mr(e,t,n)}static isValidIdentifier(e){return dj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UI}static keyField(){return new mr([UI])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(n.length===0)throw new Ae(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new Ae(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ae(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,r+=2}else u==="`"?(o=!o,r++):u!=="."||o?(n+=u,r++):(i(),r++)}if(i(),o)throw new Ae(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mr(t)}static emptyPath(){return new mr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Vt.fromString(e))}static fromName(e){return new Le(Vt.fromString(e).popFirst(5))}static empty(){return new Le(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(s,e,t){if(!t)throw new Ae(se.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function hj(s,e,t,n){if(e===!0&&n===!0)throw new Ae(se.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function jI(s){if(!Le.isDocumentKey(s))throw new Ae(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function $I(s){if(Le.isDocumentKey(s))throw new Ae(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function XD(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function f1(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":je(12329,{type:typeof s})}function ao(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ae(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=f1(s);throw new Ae(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function pj(s,e){if(e<=0)throw new Ae(se.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(s,e){const t={typeString:s};return e&&(t.value=e),t}function f0(s,e){if(!XD(s))throw new Ae(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const r=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in s)){t=`JSON missing required field: '${n}'`;break}const o=s[n];if(r&&typeof o!==r){t=`JSON field '${n}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${n}' field to equal '${i.value}'`;break}}if(t)throw new Ae(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=-62135596800,HI=1e6;class Wt{static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*HI);return new Wt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zI)throw new Ae(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HI}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(f0(e,Wt._jsonSchema))return new Wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Wt._jsonSchemaVersion="firestore/timestamp/1.0",Wt._jsonSchema={type:Pn("string",Wt._jsonSchemaVersion),seconds:Pn("number"),nanoseconds:Pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new Wt(0,0))}static max(){return new He(new Wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=-1;function fj(s,e){const t=s.toTimestamp().seconds,n=s.toTimestamp().nanoseconds+1,r=He.fromTimestamp(n===1e9?new Wt(t+1,0):new Wt(t,n));return new bu(r,Le.empty(),e)}function mj(s){return new bu(s.readTime,s.key,Yg)}class bu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new bu(He.min(),Le.empty(),Yg)}static max(){return new bu(He.max(),Le.empty(),Yg)}}function gj(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(s.documentKey,e.documentKey),t!==0?t:it(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(s){if(s.code!==se.FAILED_PRECONDITION||s.message!==yj)throw s;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae(((n,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.reject(t)}static resolve(e){return new ae(((t,n)=>{t(e)}))}static reject(e){return new ae(((t,n)=>{n(e)}))}static waitFor(e){return new ae(((t,n)=>{let r=0,i=0,o=!1;e.forEach((u=>{++r,u.next((()=>{++i,o&&i===r&&t()}),(d=>n(d)))})),o=!0,i===r&&t()}))}static or(e){let t=ae.resolve(!1);for(const n of e)t=t.next((r=>r?ae.resolve(r):n()));return t}static forEach(e,t){const n=[];return e.forEach(((r,i)=>{n.push(t.call(this,r,i))})),this.waitFor(n)}static mapArray(e,t){return new ae(((n,r)=>{const i=e.length,o=new Array(i);let u=0;for(let d=0;d<i;d++){const h=d;t(e[h]).next((f=>{o[h]=f,++u,u===i&&n(o)}),(f=>r(f)))}}))}static doWhile(e,t){return new ae(((n,r)=>{const i=()=>{e()===!0?t().next((()=>{i()}),r):n()};i()}))}}function vj(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function i2(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}m1.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=-1;function g1(s){return s==null}function m_(s){return s===0&&1/s==-1/0}function Aj(s){return typeof s=="number"&&Number.isInteger(s)&&!m_(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="";function _j(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=WI(e)),e=xj(s.get(t),e);return WI(e)}function xj(s,e){let t=e;const n=s.length;for(let r=0;r<n;r++){const i=s.charAt(r);switch(i){case"\0":t+="";break;case YD:t+="";break;default:t+=i}}return t}function WI(s){return s+YD+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Bu(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Ej(s,e){const t=[];for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.push(e(s[n],n,s));return t}function JD(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t){this.comparator=e,this.root=t||hr.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qv(this.root,e,this.comparator,!0)}}class Qv{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=n??hr.RED,this.left=r??hr.EMPTY,this.right=i??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new hr(e??this.key,t??this.value,n??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return hr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1;hr.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new hr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qI(this.data.getIterator())}getIteratorFrom(e){return new qI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=n.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class qI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.fields=e,e.sort(mr.comparator)}static empty(){return new Ws([])}unionWith(e){let t=new jn(mr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ws(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zm(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ZD("Invalid base64 string: "+i):i}})(e);return new yr(t)}static fromUint8Array(e){const t=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const bj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cu(s){if(_t(!!s,39018),typeof s=="string"){let e=0;const t=bj.exec(s);if(_t(!!t,46558,{timestamp:s}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(s);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:xn(s.seconds),nanos:xn(s.nanos)}}function xn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Fu(s){return typeof s=="string"?yr.fromBase64String(s):yr.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="server_timestamp",t3="__type__",n3="__previous_value__",r3="__local_write_time__";function SF(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[t3])==null?void 0:n.stringValue)===e3}function y1(s){const e=s.mapValue.fields[n3];return SF(e)?y1(e):e}function Jg(s){const e=Cu(s.mapValue.fields[r3].timestampValue);return new Wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,t,n,r,i,o,u,d,h,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=f,this.apiKey=g}}const g_="(default)";class Zg{constructor(e,t){this.projectId=e,this.database=t||g_}static empty(){return new Zg("","")}get isDefaultDatabase(){return this.database===g_}isEqual(e){return e instanceof Zg&&e.projectId===this.projectId&&e.database===this.database}}function Fj(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ae(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zg(s.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="__type__",Sj="__max__",Xv={mapValue:{}},i3="__vector__",y_="value";function Su(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?SF(s)?4:kj(s)?9007199254740991:Tj(s)?10:11:je(28295,{value:s})}function oo(s,e){if(s===e)return!0;const t=Su(s);if(t!==Su(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Jg(s).isEqual(Jg(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Cu(r.timestampValue),u=Cu(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(r,i){return Fu(r.bytesValue).isEqual(Fu(i.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(r,i){return xn(r.geoPointValue.latitude)===xn(i.geoPointValue.latitude)&&xn(r.geoPointValue.longitude)===xn(i.geoPointValue.longitude)})(s,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return xn(r.integerValue)===xn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=xn(r.doubleValue),u=xn(i.doubleValue);return o===u?m_(o)===m_(u):isNaN(o)&&isNaN(u)}return!1})(s,e);case 9:return zm(s.arrayValue.values||[],e.arrayValue.values||[],oo);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(GI(o)!==GI(u))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(u[d]===void 0||!oo(o[d],u[d])))return!1;return!0})(s,e);default:return je(52216,{left:s})}}function ey(s,e){return(s.values||[]).find((t=>oo(t,e)))!==void 0}function Hm(s,e){if(s===e)return 0;const t=Su(s),n=Su(e);if(t!==n)return it(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(s.booleanValue,e.booleanValue);case 2:return(function(i,o){const u=xn(i.integerValue||i.doubleValue),d=xn(o.integerValue||o.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(s,e);case 3:return KI(s.timestampValue,e.timestampValue);case 4:return KI(Jg(s),Jg(e));case 5:return ub(s.stringValue,e.stringValue);case 6:return(function(i,o){const u=Fu(i),d=Fu(o);return u.compareTo(d)})(s.bytesValue,e.bytesValue);case 7:return(function(i,o){const u=i.split("/"),d=o.split("/");for(let h=0;h<u.length&&h<d.length;h++){const f=it(u[h],d[h]);if(f!==0)return f}return it(u.length,d.length)})(s.referenceValue,e.referenceValue);case 8:return(function(i,o){const u=it(xn(i.latitude),xn(o.latitude));return u!==0?u:it(xn(i.longitude),xn(o.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return QI(s.arrayValue,e.arrayValue);case 10:return(function(i,o){var w,A,F,C;const u=i.fields||{},d=o.fields||{},h=(w=u[y_])==null?void 0:w.arrayValue,f=(A=d[y_])==null?void 0:A.arrayValue,g=it(((F=h==null?void 0:h.values)==null?void 0:F.length)||0,((C=f==null?void 0:f.values)==null?void 0:C.length)||0);return g!==0?g:QI(h,f)})(s.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Xv.mapValue&&o===Xv.mapValue)return 0;if(i===Xv.mapValue)return 1;if(o===Xv.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),h=o.fields||{},f=Object.keys(h);d.sort(),f.sort();for(let g=0;g<d.length&&g<f.length;++g){const w=ub(d[g],f[g]);if(w!==0)return w;const A=Hm(u[d[g]],h[f[g]]);if(A!==0)return A}return it(d.length,f.length)})(s.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function KI(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return it(s,e);const t=Cu(s),n=Cu(e),r=it(t.seconds,n.seconds);return r!==0?r:it(t.nanos,n.nanos)}function QI(s,e){const t=s.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const i=Hm(t[r],n[r]);if(i)return i}return it(t.length,n.length)}function Wm(s){return db(s)}function db(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const n=Cu(t);return`time(${n.seconds},${n.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Fu(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Le.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let n="[",r=!0;for(const i of t.values||[])r?r=!1:n+=",",n+=db(i);return n+"]"})(s.arrayValue):"mapValue"in s?(function(t){const n=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const o of n)i?i=!1:r+=",",r+=`${o}:${db(t.fields[o])}`;return r+"}"})(s.mapValue):je(61005,{value:s})}function wA(s){switch(Su(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=y1(s);return e?16+wA(e):16;case 5:return 2*s.stringValue.length;case 6:return Fu(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((r,i)=>r+wA(i)),0)})(s.arrayValue);case 10:case 11:return(function(n){let r=0;return Bu(n.fields,((i,o)=>{r+=i.length+wA(o)})),r})(s.mapValue);default:throw je(13486,{value:s})}}function XI(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function hb(s){return!!s&&"integerValue"in s}function TF(s){return!!s&&"arrayValue"in s}function YI(s){return!!s&&"nullValue"in s}function JI(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vA(s){return!!s&&"mapValue"in s}function Tj(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[s3])==null?void 0:n.stringValue)===i3}function $g(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Bu(s.mapValue.fields,((t,n)=>e.mapValue.fields[t]=$g(n))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$g(s.arrayValue.values[t]);return e}return{...s}}function kj(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Sj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.value=e}static empty(){return new Hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!vA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$g(t)}setAll(e){let t=mr.emptyPath(),n={},r=[];e.forEach(((o,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,r),n={},r=[],t=u.popLast()}o?n[u.lastSegment()]=$g(o):r.push(u.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());vA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];vA(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Bu(t,((r,i)=>e[r]=i));for(const r of n)delete e[r]}clone(){return new Hr($g(this.value))}}function a3(s){const e=[];return Bu(s.fields,((t,n)=>{const r=new mr([t]);if(vA(n)){const i=a3(n.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new Ws(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t,n,r,i,o,u){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Rr(e,0,He.min(),He.min(),He.min(),Hr.empty(),0)}static newFoundDocument(e,t,n,r){return new Rr(e,1,t,He.min(),n,r,0)}static newNoDocument(e,t){return new Rr(e,2,t,He.min(),He.min(),Hr.empty(),0)}static newUnknownDocument(e,t){return new Rr(e,3,t,He.min(),He.min(),Hr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t){this.position=e,this.inclusive=t}}function ZI(s,e,t){let n=0;for(let r=0;r<s.position.length;r++){const i=e[r],o=s.position[r];if(i.field.isKeyField()?n=Le.comparator(Le.fromName(o.referenceValue),t.key):n=Hm(o,t.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function eP(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!oo(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ij(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{}class In extends o3{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Rj(e,t,n):t==="array-contains"?new Mj(e,n):t==="in"?new Lj(e,n):t==="not-in"?new Oj(e,n):t==="array-contains-any"?new Bj(e,n):new In(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Dj(e,n):new Nj(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Hm(t,this.value)):t!==null&&Su(this.value)===Su(t)&&this.matchesComparison(Hm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class na extends o3{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new na(e,t)}matches(e){return l3(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function l3(s){return s.op==="and"}function c3(s){return Pj(s)&&l3(s)}function Pj(s){for(const e of s.filters)if(e instanceof na)return!1;return!0}function pb(s){if(s instanceof In)return s.field.canonicalString()+s.op.toString()+Wm(s.value);if(c3(s))return s.filters.map((e=>pb(e))).join(",");{const e=s.filters.map((t=>pb(t))).join(",");return`${s.op}(${e})`}}function u3(s,e){return s instanceof In?(function(n,r){return r instanceof In&&n.op===r.op&&n.field.isEqual(r.field)&&oo(n.value,r.value)})(s,e):s instanceof na?(function(n,r){return r instanceof na&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce(((i,o,u)=>i&&u3(o,r.filters[u])),!0):!1})(s,e):void je(19439)}function d3(s){return s instanceof In?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wm(t.value)}`})(s):s instanceof na?(function(t){return t.op.toString()+" {"+t.getFilters().map(d3).join(" ,")+"}"})(s):"Filter"}class Rj extends In{constructor(e,t,n){super(e,t,n),this.key=Le.fromName(n.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class Dj extends In{constructor(e,t){super(e,"in",t),this.keys=h3("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Nj extends In{constructor(e,t){super(e,"not-in",t),this.keys=h3("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function h3(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>Le.fromName(n.referenceValue)))}class Mj extends In{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return TF(t)&&ey(t.arrayValue,this.value)}}class Lj extends In{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ey(this.value.arrayValue,t)}}class Oj extends In{constructor(e,t){super(e,"not-in",t)}matches(e){if(ey(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ey(this.value.arrayValue,t)}}class Bj extends In{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!TF(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>ey(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,t=null,n=[],r=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function tP(s,e=null,t=[],n=[],r=null,i=null,o=null){return new Vj(s,e,t,n,r,i,o)}function kF(s){const e=ze(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>pb(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),g1(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Wm(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Wm(n))).join(",")),e.Te=t}return e.Te}function IF(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Ij(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!u3(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!eP(s.startAt,e.startAt)&&eP(s.endAt,e.endAt)}function fb(s){return Le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,t=null,n=[],r=[],i=null,o="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Uj(s,e,t,n,r,i,o,u){return new a2(s,e,t,n,r,i,o,u)}function PF(s){return new a2(s)}function nP(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function jj(s){return Le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function p3(s){return s.collectionGroup!==null}function zg(s){const e=ze(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new jn(mr.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ty(i,n))})),t.has(mr.keyField().canonicalString())||e.Ie.push(new ty(mr.keyField(),n))}return e.Ie}function ro(s){const e=ze(s);return e.Ee||(e.Ee=f3(e,zg(s))),e.Ee}function $j(s){const e=ze(s);return e.Re||(e.Re=f3(e,s.explicitOrderBy)),e.Re}function f3(s,e){if(s.limitType==="F")return tP(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new ty(r.field,i)}));const t=s.endAt?new w_(s.endAt.position,s.endAt.inclusive):null,n=s.startAt?new w_(s.startAt.position,s.startAt.inclusive):null;return tP(s.path,s.collectionGroup,e,s.filters,s.limit,t,n)}}function mb(s,e){const t=s.filters.concat([e]);return new a2(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function zj(s,e){const t=s.explicitOrderBy.concat([e]);return new a2(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function v_(s,e,t){return new a2(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function w1(s,e){return IF(ro(s),ro(e))&&s.limitType===e.limitType}function m3(s){return`${kF(ro(s))}|lt:${s.limitType}`}function Hp(s){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((r=>d3(r))).join(", ")}]`),g1(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Wm(r))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Wm(r))).join(",")),`Target(${n})`})(ro(s))}; limitType=${s.limitType})`}function v1(s,e){return e.isFoundDocument()&&(function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Le.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(s,e)&&(function(n,r){for(const i of zg(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(s,e)&&(function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0})(s,e)&&(function(n,r){return!(n.startAt&&!(function(o,u,d){const h=ZI(o,u,d);return o.inclusive?h<=0:h<0})(n.startAt,zg(n),r)||n.endAt&&!(function(o,u,d){const h=ZI(o,u,d);return o.inclusive?h>=0:h>0})(n.endAt,zg(n),r))})(s,e)}function Hj(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function g3(s){return(e,t)=>{let n=!1;for(const r of zg(s)){const i=Wj(r,e,t);if(i!==0)return i;n=n||r.field.isKeyField()}return 0}}function Wj(s,e,t){const n=s.field.isKeyField()?Le.comparator(e.key,t.key):(function(i,o,u){const d=o.data.field(i),h=u.data.field(i);return d!==null&&h!==null?Hm(d,h):je(42886)})(s.field,e,t);switch(s.dir){case"asc":return n;case"desc":return-1*n;default:return je(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,i]of n)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Bu(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return JD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new sn(Le.comparator);function Il(){return Gj}const y3=new sn(Le.comparator);function gg(...s){let e=y3;for(const t of s)e=e.insert(t.key,t);return e}function w3(s){let e=y3;return s.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function _d(){return Hg()}function v3(){return Hg()}function Hg(){return new Xh((s=>s.toString()),((s,e)=>s.isEqual(e)))}const qj=new sn(Le.comparator),Kj=new jn(Le.comparator);function at(...s){let e=Kj;for(const t of s)e=e.add(t);return e}const Qj=new jn(it);function Xj(){return Qj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:m_(e)?"-0":e}}function A3(s){return{integerValue:""+s}}function Yj(s,e){return Aj(e)?A3(e):RF(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this._=void 0}}function Jj(s,e,t){return s instanceof ny?(function(r,i){const o={fields:{[t3]:{stringValue:e3},[r3]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&SF(i)&&(i=y1(i)),i&&(o.fields[n3]=i),{mapValue:o}})(t,e):s instanceof ry?x3(s,e):s instanceof sy?E3(s,e):(function(r,i){const o=_3(r,i),u=rP(o)+rP(r.Ae);return hb(o)&&hb(r.Ae)?A3(u):RF(r.serializer,u)})(s,e)}function Zj(s,e,t){return s instanceof ry?x3(s,e):s instanceof sy?E3(s,e):t}function _3(s,e){return s instanceof A_?(function(n){return hb(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class ny extends A1{}class ry extends A1{constructor(e){super(),this.elements=e}}function x3(s,e){const t=b3(e);for(const n of s.elements)t.some((r=>oo(r,n)))||t.push(n);return{arrayValue:{values:t}}}class sy extends A1{constructor(e){super(),this.elements=e}}function E3(s,e){let t=b3(e);for(const n of s.elements)t=t.filter((r=>!oo(r,n)));return{arrayValue:{values:t}}}class A_ extends A1{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rP(s){return xn(s.integerValue||s.doubleValue)}function b3(s){return TF(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e,t){this.field=e,this.transform=t}}function t9(s,e){return s.field.isEqual(e.field)&&(function(n,r){return n instanceof ry&&r instanceof ry||n instanceof sy&&r instanceof sy?zm(n.elements,r.elements,oo):n instanceof A_&&r instanceof A_?oo(n.Ae,r.Ae):n instanceof ny&&r instanceof ny})(s.transform,e.transform)}class n9{constructor(e,t){this.version=e,this.transformResults=t}}class Ji{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ji}static exists(e){return new Ji(void 0,e)}static updateTime(e){return new Ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function AA(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class _1{}function C3(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new DF(s.key,Ji.none()):new m0(s.key,s.data,Ji.none());{const t=s.data,n=Hr.empty();let r=new jn(mr.comparator);for(let i of e.fields)if(!r.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?n.delete(i):n.set(i,o),r=r.add(i)}return new Vu(s.key,n,new Ws(r.toArray()),Ji.none())}}function r9(s,e,t){s instanceof m0?(function(r,i,o){const u=r.value.clone(),d=iP(r.fieldTransforms,i,o.transformResults);u.setAll(d),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(s,e,t):s instanceof Vu?(function(r,i,o){if(!AA(r.precondition,i))return void i.convertToUnknownDocument(o.version);const u=iP(r.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(F3(r)),d.setAll(u),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(s,e,t):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Wg(s,e,t,n){return s instanceof m0?(function(i,o,u,d){if(!AA(i.precondition,o))return u;const h=i.value.clone(),f=aP(i.fieldTransforms,d,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(s,e,t,n):s instanceof Vu?(function(i,o,u,d){if(!AA(i.precondition,o))return u;const h=aP(i.fieldTransforms,d,o),f=o.data;return f.setAll(F3(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((g=>g.field)))})(s,e,t,n):(function(i,o,u){return AA(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u})(s,e,t)}function s9(s,e){let t=null;for(const n of s.fieldTransforms){const r=e.data.field(n.field),i=_3(n.transform,r||null);i!=null&&(t===null&&(t=Hr.empty()),t.set(n.field,i))}return t||null}function sP(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&zm(n,r,((i,o)=>t9(i,o)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class m0 extends _1{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vu extends _1{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function F3(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=s.data.field(t);e.set(t,n)}})),e}function iP(s,e,t){const n=new Map;_t(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let r=0;r<t.length;r++){const i=s[r],o=i.transform,u=e.data.field(i.field);n.set(i.field,Zj(o,u,t[r]))}return n}function aP(s,e,t){const n=new Map;for(const r of s){const i=r.transform,o=t.data.field(r.field);n.set(r.field,Jj(i,o,e))}return n}class DF extends _1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class i9 extends _1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&r9(i,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Wg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Wg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=v3();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=t.has(r.key)?null:u;const d=C3(o,u);d!==null&&n.set(r.key,d),o.isValidDocument()||o.convertToNoDocument(He.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),at())}isEqual(e){return this.batchId===e.batchId&&zm(this.mutations,e.mutations,((t,n)=>sP(t,n)))&&zm(this.baseMutations,e.baseMutations,((t,n)=>sP(t,n)))}}class NF{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){_t(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=(function(){return qj})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new NF(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tn,ct;function u9(s){switch(s){case se.OK:return je(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return je(15467,{code:s})}}function S3(s){if(s===void 0)return kl("GRPC error has no .code"),se.UNKNOWN;switch(s){case Tn.OK:return se.OK;case Tn.CANCELLED:return se.CANCELLED;case Tn.UNKNOWN:return se.UNKNOWN;case Tn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Tn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Tn.INTERNAL:return se.INTERNAL;case Tn.UNAVAILABLE:return se.UNAVAILABLE;case Tn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Tn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Tn.NOT_FOUND:return se.NOT_FOUND;case Tn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Tn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Tn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Tn.ABORTED:return se.ABORTED;case Tn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Tn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Tn.DATA_LOSS:return se.DATA_LOSS;default:return je(39323,{code:s})}}(ct=Tn||(Tn={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=new Au([4294967295,4294967295],0);function oP(s){const e=d9().encode(s),t=new jD;return t.update(e),new Uint8Array(t.digest())}function lP(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Au([t,n],0),new Au([r,i],0)]}class MF{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new yg(`Invalid padding: ${t}`);if(n<0)throw new yg(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new yg(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new yg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Au.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Au.fromNumber(n)));return r.compare(h9)===1&&(r=new Au([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=oP(e),[n,r]=lP(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(n,r,i);if(!this.we(o))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new MF(i,r,t);return n.forEach((u=>o.insert(u))),o}insert(e){if(this.ge===0)return;const t=oP(e),[n,r]=lP(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(n,r,i);this.be(o)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class yg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,g0.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new x1(He.min(),r,new sn(it),Il(),at())}}class g0{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new g0(n,t,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}}class T3{constructor(e,t){this.targetId=e,this.Ce=t}}class k3{constructor(e,t,n=yr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class cP{constructor(){this.ve=0,this.Fe=uP(),this.Me=yr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),t=at(),n=at();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:je(38017,{changeType:i})}})),new g0(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=uP()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class p9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Il(),this.He=Yv(),this.Je=Yv(),this.Ze=new sn(it)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(fb(i))if(n===0){const o=new Le(i.path);this.et(t,o,Rr.newNoDocument(o,He.min()))}else _t(n===1,20013,{expectedCount:n});else{const o=this._t(t);if(o!==n){const u=this.ut(e),d=u?this.ct(u,e,o):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,u;try{o=Fu(n).toUint8Array()}catch(d){if(d instanceof ZD)return Uh("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new MF(o,r,i)}catch(d){return Uh(d instanceof yg?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach((i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(t,i,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((i,o)=>{const u=this.ot(o);if(u){if(i.current&&fb(u.target)){const d=new Le(u.target.path);this.It(d).has(o)||this.Et(o,d)||this.et(o,d,Rr.newNoDocument(d,e))}i.Be&&(t.set(o,i.ke()),i.Ke())}}));let n=at();this.Je.forEach(((i,o)=>{let u=!0;o.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new x1(e,t,this.Ze,this.je,n);return this.je=Il(),this.He=Yv(),this.Je=Yv(),this.Ze=new sn(it),r}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new cP,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new jn(it),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new jn(it),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cP),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Yv(){return new sn(Le.comparator)}function uP(){return new sn(Le.comparator)}const f9={asc:"ASCENDING",desc:"DESCENDING"},m9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g9={and:"AND",or:"OR"};class y9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gb(s,e){return s.useProto3Json||g1(e)?e:{value:e}}function __(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I3(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function w9(s,e){return __(s,e.toTimestamp())}function so(s){return _t(!!s,49232),He.fromTimestamp((function(t){const n=Cu(t);return new Wt(n.seconds,n.nanos)})(s))}function LF(s,e){return yb(s,e).canonicalString()}function yb(s,e){const t=(function(r){return new Vt(["projects",r.projectId,"databases",r.database])})(s).child("documents");return e===void 0?t:t.child(e)}function P3(s){const e=Vt.fromString(s);return _t(O3(e),10190,{key:e.toString()}),e}function wb(s,e){return LF(s.databaseId,e.path)}function DE(s,e){const t=P3(e);if(t.get(1)!==s.databaseId.projectId)throw new Ae(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ae(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Le(D3(t))}function R3(s,e){return LF(s.databaseId,e)}function v9(s){const e=P3(s);return e.length===4?Vt.emptyPath():D3(e)}function vb(s){return new Vt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function D3(s){return _t(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function dP(s,e,t){return{name:wb(s,e),fields:t.value.mapValue.fields}}function A9(s,e){let t;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:je(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(_t(f===void 0||typeof f=="string",58123),yr.fromBase64String(f||"")):(_t(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),yr.fromUint8Array(f||new Uint8Array))})(s,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&(function(h){const f=h.code===void 0?se.UNKNOWN:S3(h.code);return new Ae(f,h.message||"")})(o);t=new k3(n,r,i,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=DE(s,n.document.name),i=so(n.document.updateTime),o=n.document.createTime?so(n.document.createTime):He.min(),u=new Hr({mapValue:{fields:n.document.fields}}),d=Rr.newFoundDocument(r,i,o,u),h=n.targetIds||[],f=n.removedTargetIds||[];t=new _A(h,f,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=DE(s,n.document),i=n.readTime?so(n.readTime):He.min(),o=Rr.newNoDocument(r,i),u=n.removedTargetIds||[];t=new _A([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=DE(s,n.document),i=n.removedTargetIds||[];t=new _A([],i,r,null)}else{if(!("filter"in e))return je(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:i}=n,o=new c9(r,i),u=n.targetId;t=new T3(u,o)}}return t}function _9(s,e){let t;if(e instanceof m0)t={update:dP(s,e.key,e.value)};else if(e instanceof DF)t={delete:wb(s,e.key)};else if(e instanceof Vu)t={update:dP(s,e.key,e.data),updateMask:I9(e.fieldMask)};else{if(!(e instanceof i9))return je(16599,{dt:e.type});t={verify:wb(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(i,o){const u=o.transform;if(u instanceof ny)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ry)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof sy)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof A_)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw je(20930,{transform:o.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:w9(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:je(27497)})(s,e.precondition)),t}function x9(s,e){return s&&s.length>0?(_t(e!==void 0,14353),s.map((t=>(function(r,i){let o=r.updateTime?so(r.updateTime):so(i);return o.isEqual(He.min())&&(o=so(i)),new n9(o,r.transformResults||[])})(t,e)))):[]}function E9(s,e){return{documents:[R3(s,e.path)]}}function N3(s,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=R3(s,r);const i=(function(h){if(h.length!==0)return L3(na.create(h,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((f=>(function(w){return{field:vc(w.field),direction:S9(w.dir)}})(f)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=gb(s,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function b9(s,e,t,n){const{ft:r,parent:i}=N3(s,e),o={},u=[];let d=0;return t.forEach((h=>{const f="aggregate_"+d++;o[f]=h.alias,h.aggregateType==="count"?u.push({alias:f,count:{}}):h.aggregateType==="avg"?u.push({alias:f,avg:{field:vc(h.fieldPath)}}):h.aggregateType==="sum"&&u.push({alias:f,sum:{field:vc(h.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:r.structuredQuery},parent:r.parent},gt:o,parent:i}}function C9(s){let e=v9(s.parent);const t=s.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){_t(n===1,65062);const f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=(function(g){const w=M3(g);return w instanceof na&&c3(w)?w.getFilters():[w]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map((w=>(function(F){return new ty(Wp(F.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(w)))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let w;return w=typeof g=="object"?g.value:g,g1(w)?null:w})(t.limit));let d=null;t.startAt&&(d=(function(g){const w=!!g.before,A=g.values||[];return new w_(A,w)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const w=!g.before,A=g.values||[];return new w_(A,w)})(t.endAt)),Uj(e,r,o,i,u,"F",d,h)}function F9(s,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function M3(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Wp(t.unaryFilter.field);return In.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Wp(t.unaryFilter.field);return In.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wp(t.unaryFilter.field);return In.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wp(t.unaryFilter.field);return In.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(s):s.fieldFilter!==void 0?(function(t){return In.create(Wp(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return na.create(t.compositeFilter.filters.map((n=>M3(n))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(s):je(30097,{filter:s})}function S9(s){return f9[s]}function T9(s){return m9[s]}function k9(s){return g9[s]}function vc(s){return{fieldPath:s.canonicalString()}}function Wp(s){return mr.fromServerFormat(s.fieldPath)}function L3(s){return s instanceof In?(function(t){if(t.op==="=="){if(JI(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NAN"}};if(YI(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(JI(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NOT_NAN"}};if(YI(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vc(t.field),op:T9(t.op),value:t.value}}})(s):s instanceof na?(function(t){const n=t.getFilters().map((r=>L3(r)));return n.length===1?n[0]:{compositeFilter:{op:k9(t.op),filters:n}}})(s):je(54877,{filter:s})}function I9(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function O3(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function B3(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t,n,r,i=He.min(),o=He.min(),u=yr.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new gu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.yt=e}}function R9(s){const e=C9({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?v_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(){this.Sn=new N9}addToCollectionParentIndex(e,t){return this.Sn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(bu.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(bu.min())}updateCollectionGroup(e,t,n){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class N9{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new jn(Vt.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new jn(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},V3=41943040;class us{static withCacheSize(e){return new us(e,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us.DEFAULT_COLLECTION_PERCENTILE=10,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,us.DEFAULT=new us(V3,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),us.DISABLED=new us(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Gm(0)}static ar(){return new Gm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="LruGarbageCollector",M9=1048576;function fP([s,e],[t,n]){const r=it(s,t);return r===0?it(e,n):r}class L9{constructor(e){this.Pr=e,this.buffer=new jn(fP),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();fP(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class O9{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){be(pP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){i2(t)?be(pP,"Ignoring IndexedDB error during garbage collection: ",t):await s2(t)}await this.Ar(3e5)}))}}class B9{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(m1.ce);const n=new L9(t);return this.Vr.forEachTarget(e,(r=>n.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>n.Er(r))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(hP)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hP):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,o,u,d,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,o=Date.now(),this.nthSequenceNumber(e,r)))).next((g=>(n=g,u=Date.now(),this.removeTargets(e,n,t)))).next((g=>(i=g,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((g=>(h=Date.now(),zp()<=st.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(u-o)+`ms
	Removed ${i} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-f}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:g}))))}}function V9(s,e){return new B9(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(){this.changes=new Xh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?ae.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(n!==null&&Wg(n.mutation,r,Ws.empty(),Wt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,at()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=at()){const r=_d();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((i=>{let o=gg();return i.forEach(((u,d)=>{o=o.insert(u,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const n=_d();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,at())))}populateOverlays(e,t,n){const r=[];return n.forEach((i=>{t.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,u)=>{t.set(o,u)}))}))}computeViews(e,t,n,r){let i=Il();const o=Hg(),u=(function(){return Hg()})();return t.forEach(((d,h)=>{const f=n.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof Vu)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Wg(f.mutation,h,f.mutation.getFieldMask(),Wt.now())):o.set(h.key,Ws.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,f)=>o.set(h,f))),t.forEach(((h,f)=>u.set(h,new j9(f,o.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Hg();let r=new sn(((o,u)=>o-u)),i=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const u of o)u.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let f=n.get(d)||Ws.empty();f=u.applyToLocalView(h,f),n.set(d,f);const g=(r.get(u.batchId)||at()).add(d);r=r.insert(u.batchId,g)}))})).next((()=>{const o=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,f=d.value,g=v3();f.forEach((w=>{if(!i.has(w)){const A=C3(t.get(w),n.get(w));A!==null&&g.set(w,A),i=i.add(w)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return ae.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,r){return jj(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):p3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ae.resolve(_d());let u=Yg,d=i;return o.next((h=>ae.forEach(h,((f,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),i.get(f)?ae.resolve():this.remoteDocumentCache.getEntry(e,f).next((w=>{d=d.insert(f,w)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,at()))).next((f=>({batchId:u,changes:w3(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((n=>{let r=gg();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=gg();return this.indexManager.getCollectionParents(e,i).next((u=>ae.forEach(u,(d=>{const h=(function(g,w){return new a2(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,r).next((f=>{f.forEach(((g,w)=>{o=o.insert(g,w)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((o=>{i.forEach(((d,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Rr.newInvalidDocument(f)))}));let u=gg();return o.forEach(((d,h)=>{const f=i.get(d);f!==void 0&&Wg(f.mutation,h,Ws.empty(),Wt.now()),v1(t,h)&&(u=u.insert(d,h))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ae.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:so(r.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:R9(r.bundledQuery),readTime:so(r.readTime)}})(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(){this.overlays=new sn(Le.comparator),this.Lr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_d();return ae.forEach(t,(r=>this.getOverlay(e,r).next((i=>{i!==null&&n.set(r,i)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((r,i)=>{this.bt(e,t,i)})),ae.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Lr.get(n);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(n)),ae.resolve()}getOverlaysForCollection(e,t,n){const r=_d(),i=t.length+1,o=new Le(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&r.set(d.getKey(),d)}return ae.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new sn(((h,f)=>h-f));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let f=i.get(h.largestBatchId);f===null&&(f=_d(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const u=_d(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,f)=>u.set(h,f))),!(u.size()>=r)););return ae.resolve(u)}bt(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new o9(t,n));let i=this.Lr.get(t);i===void 0&&(i=at(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(){this.sessionToken=yr.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(){this.kr=new jn(er.Kr),this.qr=new jn(er.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new er(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Wr(new er(e,t))}Qr(e,t){e.forEach((n=>this.removeReference(n,t)))}Gr(e){const t=new Le(new Vt([])),n=new er(t,e),r=new er(t,e+1),i=[];return this.qr.forEachInRange([n,r],(o=>{this.Wr(o),i.push(o.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Le(new Vt([])),n=new er(t,e),r=new er(t,e+1);let i=at();return this.qr.forEachInRange([n,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const t=new er(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class er{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Le.comparator(e.key,t.key)||it(e.Hr,t.Hr)}static Ur(e,t){return it(e.Hr,t.Hr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new jn(er.Kr)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new a9(i,t,n,r);this.mutationQueue.push(o);for(const u of r)this.Jr=this.Jr.add(new er(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ae.resolve(o)}lookupMutationBatch(e,t){return ae.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return ae.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?FF:this.Yn-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new er(t,0),r=new er(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([n,r],(o=>{const u=this.Zr(o.Hr);i.push(u)})),ae.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new jn(it);return t.forEach((r=>{const i=new er(r,0),o=new er(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],(u=>{n=n.add(u.Hr)}))})),ae.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Le.isDocumentKey(i)||(i=i.child(""));const o=new er(new Le(i),0);let u=new jn(it);return this.Jr.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===r&&(u=u.add(d.Hr)),!0)}),o),ae.resolve(this.Yr(u))}Yr(e){const t=[];return e.forEach((n=>{const r=this.Zr(n);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){_t(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return ae.forEach(t.mutations,(r=>{const i=new er(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){const n=new er(t,0),r=this.Jr.firstAfterOrEqual(n);return ae.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e){this.ti=e,this.docs=(function(){return new sn(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ae.resolve(n?n.document.mutableCopy():Rr.newInvalidDocument(t))}getEntries(e,t){let n=Il();return t.forEach((r=>{const i=this.docs.get(r);n=n.insert(r,i?i.document.mutableCopy():Rr.newInvalidDocument(r))})),ae.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Il();const o=t.path,u=new Le(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:f}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||gj(mj(f),n)<=0||(r.has(f.key)||v1(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,t,n,r){je(9500)}ni(e,t){return ae.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new K9(this)}getSize(e){return ae.resolve(this.size)}}class K9 extends U9{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),ae.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.persistence=e,this.ri=new Xh((t=>kF(t)),IF),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.ii=0,this.si=new OF,this.targetCount=0,this.oi=Gm._r()}forEachTarget(e,t){return this.ri.forEach(((n,r)=>t(r))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),ae.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Gm(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.lr(t),ae.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ri.forEach(((o,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)})),ae.waitFor(i).next((()=>r))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return ae.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),ae.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),ae.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return ae.resolve(n)}containsKey(e,t){return ae.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,t){this._i={},this.overlays={},this.ai=new m1(0),this.ui=!1,this.ui=!0,this.ci=new W9,this.referenceDelegate=e(this),this.li=new Q9(this),this.indexManager=new D9,this.remoteDocumentCache=(function(r){return new q9(r)})((n=>this.referenceDelegate.hi(n))),this.serializer=new P9(t),this.Pi=new z9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new H9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new G9(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){be("MemoryPersistence","Starting transaction:",e);const r=new X9(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((i=>this.referenceDelegate.Ii(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ei(e,t){return ae.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}}class X9 extends wj{constructor(e){super(),this.currentSequenceNumber=e}}class BF{constructor(e){this.persistence=e,this.Ri=new OF,this.Ai=null}static Vi(e){return new BF(e)}get di(){if(this.Ai)return this.Ai;throw je(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),ae.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((i=>this.di.add(i.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,(n=>{const r=Le.fromPath(n);return this.mi(e,r).next((i=>{i||t.removeEntry(r,He.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((n=>{n?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class x_{constructor(e,t){this.persistence=e,this.fi=new Xh((n=>_j(n.path)),((n,r)=>n.isEqual(r))),this.garbageCollector=V9(this,t)}static Vi(e,t){return new x_(e,t)}Ti(){}Ii(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((r=>n+r))))}pr(e){let t=0;return this.mr(e,(n=>{t++})).next((()=>t))}mr(e,t){return ae.forEach(this.fi,((n,r)=>this.wr(e,n,r).next((i=>i?ae.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,(o=>this.wr(e,o,t).next((u=>{u||(n++,i.removeEntry(o,He.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ae.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wA(e.data.value)),t}wr(e,t,n){return ae.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return ae.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(e,t){let n=at(),r=at();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new VF(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return x6()?8:vj(Dr())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.gs(e,t).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new Y9;return this.ys(e,t,o).next((u=>{if(i.result=u,this.As)return this.ws(e,t,o,u.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(zp()<=st.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",Hp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ae.resolve()):(zp()<=st.DEBUG&&be("QueryEngine","Query:",Hp(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(zp()<=st.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",Hp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ro(t))):ae.resolve())}gs(e,t){if(nP(t))return ae.resolve(null);let n=ro(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=v_(t,null,"F"),n=ro(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const o=at(...i);return this.fs.getDocuments(e,o).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.bs(t,u);return this.Ss(t,h,o,d.readTime)?this.gs(e,v_(t,null,"F")):this.Ds(e,h,t,d)}))))})))))}ps(e,t,n,r){return nP(t)||r.isEqual(He.min())?ae.resolve(null):this.fs.getDocuments(e,n).next((i=>{const o=this.bs(t,i);return this.Ss(t,o,n,r)?ae.resolve(null):(zp()<=st.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hp(t)),this.Ds(e,o,t,fj(r,Yg)).next((u=>u)))}))}bs(e,t){let n=new jn(g3(e));return t.forEach(((r,i)=>{v1(e,i)&&(n=n.add(i))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return zp()<=st.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",Hp(t)),this.fs.getDocumentsMatchingQuery(e,t,bu.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((i=>(t.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF="LocalStore",Z9=3e8;class e8{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new sn(it),this.Fs=new Xh((i=>kF(i)),IF),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $9(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function t8(s,e,t,n){return new e8(s,e,t,n)}async function j3(s,e){const t=ze(s);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next((i=>(r=i,t.Os(e),t.mutationQueue.getAllMutationBatches(n)))).next((i=>{const o=[],u=[];let d=at();for(const h of r){o.push(h.batchId);for(const f of h.mutations)d=d.add(f.key)}for(const h of i){u.push(h.batchId);for(const f of h.mutations)d=d.add(f.key)}return t.localDocuments.getDocuments(n,d).next((h=>({Ns:h,removedBatchIds:o,addedBatchIds:u})))}))}))}function n8(s,e){const t=ze(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const r=e.batch.keys(),i=t.xs.newChangeBuffer({trackRemovals:!0});return(function(u,d,h,f){const g=h.batch,w=g.keys();let A=ae.resolve();return w.forEach((F=>{A=A.next((()=>f.getEntry(d,F))).next((C=>{const T=h.docVersions.get(F);_t(T!==null,48541),C.version.compareTo(T)<0&&(g.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),f.addEntry(C)))}))})),A.next((()=>u.mutationQueue.removeMutationBatch(d,g)))})(t,n,e,i).next((()=>i.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=at();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,r)))}))}function $3(s){const e=ze(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function r8(s,e){const t=ze(s),n=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const u=[];e.targetChanges.forEach(((f,g)=>{const w=r.get(g);if(!w)return;u.push(t.li.removeMatchingKeys(i,f.removedDocuments,g).next((()=>t.li.addMatchingKeys(i,f.addedDocuments,g))));let A=w.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?A=A.withResumeToken(yr.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,n)),r=r.insert(g,A),(function(C,T,P){return C.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=Z9?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(w,A,f)&&u.push(t.li.updateTargetData(i,A))}));let d=Il(),h=at();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))})),u.push(s8(i,o,e.documentUpdates).next((f=>{d=f.Bs,h=f.Ls}))),!n.isEqual(He.min())){const f=t.li.getLastRemoteSnapshotVersion(i).next((g=>t.li.setTargetsMetadata(i,i.currentSequenceNumber,n)));u.push(f)}return ae.waitFor(u).next((()=>o.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(t.vs=r,i)))}function s8(s,e,t){let n=at(),r=at();return t.forEach((i=>n=n.add(i))),e.getEntries(s,n).next((i=>{let o=Il();return t.forEach(((u,d)=>{const h=i.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(He.min())?(e.removeEntry(u,d.readTime),o=o.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(u,d)):be(UF,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)})),{Bs:o,Ls:r}}))}function i8(s,e){const t=ze(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=FF),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function a8(s,e){const t=ze(s);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let r;return t.li.getTargetData(n,e).next((i=>i?(r=i,ae.resolve(r)):t.li.allocateTargetId(n).next((o=>(r=new gu(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.li.addTargetData(n,r).next((()=>r)))))))})).then((n=>{const r=t.vs.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(n.targetId,n),t.Fs.set(e,n.targetId)),n}))}async function Ab(s,e,t){const n=ze(s),r=n.vs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",i,(o=>n.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!i2(o))throw o;be(UF,`Failed to update sequence numbers for target ${e}: ${o}`)}n.vs=n.vs.remove(e),n.Fs.delete(r.target)}function mP(s,e,t){const n=ze(s);let r=He.min(),i=at();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,f){const g=ze(d),w=g.Fs.get(f);return w!==void 0?ae.resolve(g.vs.get(w)):g.li.getTargetData(h,f)})(n,o,ro(e)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(o,u.targetId).next((d=>{i=d}))})).next((()=>n.Cs.getDocumentsMatchingQuery(o,e,t?r:He.min(),t?i:at()))).next((u=>(o8(n,Hj(e),u),{documents:u,ks:i})))))}function o8(s,e,t){let n=s.Ms.get(e)||He.min();t.forEach(((r,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),s.Ms.set(e,n)}class gP{constructor(){this.activeTargetIds=Xj()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l8{constructor(){this.vo=new gP,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new gP,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="ConnectivityMonitor";class wP{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){be(yP,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){be(yP,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jv=null;function _b(){return Jv===null?Jv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jv++,"0x"+Jv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="RestConnection",u8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class d8{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===g_?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){const o=_b(),u=this.Qo(e,t.toUriEncodedString());be(NE,`Sending RPC '${e}' ${o}:`,u,n);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,r,i);const{host:h}=new URL(u),f=Lu(h);return this.zo(e,u,d,n,f).then((g=>(be(NE,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw Uh(NE,`RPC '${e}' ${o} failed with error: `,g,"url: ",u,"request:",n),g}))}jo(e,t,n,r,i,o){return this.Wo(e,t,n,r,i)}Go(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+r2})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,i)=>e[i]=r)),n&&n.headers.forEach(((r,i)=>e[i]=r))}Qo(e,t){const n=u8[e];let r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="WebChannelConnection",sg=(s,e,t)=>{s.listen(e,(n=>{try{t(n)}catch(r){setTimeout((()=>{throw r}),0)}}))};class df extends d8{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!df.c_){const e=WD();sg(e,HD.STAT_EVENT,(t=>{t.stat===cb.PROXY?be(Er,"STAT_EVENT: detected buffering proxy"):t.stat===cb.NOPROXY&&be(Er,"STAT_EVENT: detected no buffering proxy")})),df.c_=!0}}zo(e,t,n,r,i){const o=_b();return new Promise(((u,d)=>{const h=new $D;h.setWithCredentials(!0),h.listenOnce(zD.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case yA.NO_ERROR:const g=h.getResponseJson();be(Er,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),u(g);break;case yA.TIMEOUT:be(Er,`RPC '${e}' ${o} timed out`),d(new Ae(se.DEADLINE_EXCEEDED,"Request time out"));break;case yA.HTTP_ERROR:const w=h.getStatus();if(be(Er,`RPC '${e}' ${o} failed with status:`,w,"response text:",h.getResponseText()),w>0){let A=h.getResponseJson();Array.isArray(A)&&(A=A[0]);const F=A==null?void 0:A.error;if(F&&F.status&&F.message){const C=(function(P){const O=P.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(O)>=0?O:se.UNKNOWN})(F.status);d(new Ae(C,F.message))}else d(new Ae(se.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Ae(se.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{be(Er,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(r);be(Er,`RPC '${e}' ${o} sending request:`,r),h.send(t,"POST",f,n,15)}))}T_(e,t,n){const r=_b(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const h=i.join("");be(Er,`Creating RPC '${e}' stream ${r}: ${h}`,u);const f=o.createWebChannel(h,u);this.I_(f);let g=!1,w=!1;const A=new h8({Ho:F=>{w?be(Er,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(g||(be(Er,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),be(Er,`RPC '${e}' stream ${r} sending:`,F),f.send(F))},Jo:()=>f.close()});return sg(f,mg.EventType.OPEN,(()=>{w||(be(Er,`RPC '${e}' stream ${r} transport opened.`),A.i_())})),sg(f,mg.EventType.CLOSE,(()=>{w||(w=!0,be(Er,`RPC '${e}' stream ${r} transport closed`),A.o_(),this.E_(f))})),sg(f,mg.EventType.ERROR,(F=>{w||(w=!0,Uh(Er,`RPC '${e}' stream ${r} transport errored. Name:`,F.name,"Message:",F.message),A.o_(new Ae(se.UNAVAILABLE,"The operation could not be completed")))})),sg(f,mg.EventType.MESSAGE,(F=>{var C;if(!w){const T=F.data[0];_t(!!T,16349);const P=T,O=(P==null?void 0:P.error)||((C=P[0])==null?void 0:C.error);if(O){be(Er,`RPC '${e}' stream ${r} received error:`,O);const N=O.status;let V=(function(D){const R=Tn[D];if(R!==void 0)return S3(R)})(N),z=O.message;N==="NOT_FOUND"&&z.includes("database")&&z.includes("does not exist")&&z.includes(this.databaseId.database)&&Uh(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),V===void 0&&(V=se.INTERNAL,z="Unknown error status: "+N+" with message "+O.message),w=!0,A.o_(new Ae(V,z)),f.close()}else be(Er,`RPC '${e}' stream ${r} received:`,T),A.__(T)}})),df.u_(),setTimeout((()=>{A.s_()}),0),A}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return GD()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(s){return new df(s)}function ME(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(s){return new y9(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */df.c_=!1;class z3{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&be("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="PersistentStream";class H3{constructor(e,t,n,r,i,o,u,d){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new z3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(kl(t.toString()),kl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,r])=>{this.D_===t&&this.G_(n,r)}),(n=>{e((()=>{const r=new Ae(se.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(r)}))}))}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{n((()=>this.z_(r)))})),this.stream.onMessage((r=>{n((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return be(vP,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(be(vP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class f8 extends H3{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=A9(this.serializer,e),n=(function(i){if(!("targetChange"in i))return He.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?so(o.readTime):He.min()})(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=vb(this.serializer),t.addTarget=(function(i,o){let u;const d=o.target;if(u=fb(d)?{documents:E9(i,d)}:{query:N3(i,d).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=I3(i,o.resumeToken);const h=gb(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(He.min())>0){u.readTime=__(i,o.snapshotVersion.toTimestamp());const h=gb(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const n=F9(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=vb(this.serializer),t.removeTarget=e,this.K_(t)}}class m8 extends H3{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=x9(e.writeResults,e.commitTime),n=so(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=vb(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>_9(this.serializer,n)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{}class y8 extends g8{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ae(se.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Wo(e,yb(t,n),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(se.UNKNOWN,i.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.jo(e,yb(t,n),r,o,u,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(se.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function w8(s,e,t,n){return new y8(s,e,t,n)}class v8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kl(t),this.aa=!1):be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="RemoteStore";class A8{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((o=>{n.enqueueAndForget((async()=>{Yh(this)&&(be(jh,"Restarting streams for network reachability change."),await(async function(d){const h=ze(d);h.Ea.add(4),await y0(h),h.Va.set("Unknown"),h.Ea.delete(4),await b1(h)})(this))}))})),this.Va=new v8(n,r)}}async function b1(s){if(Yh(s))for(const e of s.Ra)await e(!0)}async function y0(s){for(const e of s.Ra)await e(!1)}function W3(s,e){const t=ze(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),HF(t)?zF(t):o2(t).O_()&&$F(t,e))}function jF(s,e){const t=ze(s),n=o2(t);t.Ia.delete(e),n.O_()&&G3(t,e),t.Ia.size===0&&(n.O_()?n.L_():Yh(t)&&t.Va.set("Unknown"))}function $F(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}o2(s).Z_(e)}function G3(s,e){s.da.$e(e),o2(s).X_(e)}function zF(s){s.da=new p9({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),o2(s).start(),s.Va.ua()}function HF(s){return Yh(s)&&!o2(s).x_()&&s.Ia.size>0}function Yh(s){return ze(s).Ea.size===0}function q3(s){s.da=void 0}async function _8(s){s.Va.set("Online")}async function x8(s){s.Ia.forEach(((e,t)=>{$F(s,e)}))}async function E8(s,e){q3(s),HF(s)?(s.Va.ha(e),zF(s)):s.Va.set("Unknown")}async function b8(s,e,t){if(s.Va.set("Online"),e instanceof k3&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const u of i.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,o),r.Ia.delete(u),r.da.removeTarget(u))})(s,e)}catch(n){be(jh,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await E_(s,n)}else if(e instanceof _A?s.da.Xe(e):e instanceof T3?s.da.st(e):s.da.tt(e),!t.isEqual(He.min()))try{const n=await $3(s.localStore);t.compareTo(n)>=0&&await(function(i,o){const u=i.da.Tt(o);return u.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(d.resumeToken,o))}})),u.targetMismatches.forEach(((d,h)=>{const f=i.Ia.get(d);if(!f)return;i.Ia.set(d,f.withResumeToken(yr.EMPTY_BYTE_STRING,f.snapshotVersion)),G3(i,d);const g=new gu(f.target,d,h,f.sequenceNumber);$F(i,g)})),i.remoteSyncer.applyRemoteEvent(u)})(s,t)}catch(n){be(jh,"Failed to raise snapshot:",n),await E_(s,n)}}async function E_(s,e,t){if(!i2(e))throw e;s.Ea.add(1),await y0(s),s.Va.set("Offline"),t||(t=()=>$3(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{be(jh,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await b1(s)}))}function K3(s,e){return e().catch((t=>E_(s,t,e)))}async function C1(s){const e=ze(s),t=Tu(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:FF;for(;C8(e);)try{const r=await i8(e.localStore,n);if(r===null){e.Ta.length===0&&t.L_();break}n=r.batchId,F8(e,r)}catch(r){await E_(e,r)}Q3(e)&&X3(e)}function C8(s){return Yh(s)&&s.Ta.length<10}function F8(s,e){s.Ta.push(e);const t=Tu(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function Q3(s){return Yh(s)&&!Tu(s).x_()&&s.Ta.length>0}function X3(s){Tu(s).start()}async function S8(s){Tu(s).ra()}async function T8(s){const e=Tu(s);for(const t of s.Ta)e.ea(t.mutations)}async function k8(s,e,t){const n=s.Ta.shift(),r=NF.from(n,e,t);await K3(s,(()=>s.remoteSyncer.applySuccessfulWrite(r))),await C1(s)}async function I8(s,e){e&&Tu(s).Y_&&await(async function(n,r){if((function(o){return u9(o)&&o!==se.ABORTED})(r.code)){const i=n.Ta.shift();Tu(n).B_(),await K3(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r))),await C1(n)}})(s,e),Q3(s)&&X3(s)}async function AP(s,e){const t=ze(s);t.asyncQueue.verifyOperationInProgress(),be(jh,"RemoteStore received new credentials");const n=Yh(t);t.Ea.add(3),await y0(t),n&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await b1(t)}async function P8(s,e){const t=ze(s);e?(t.Ea.delete(2),await b1(t)):e||(t.Ea.add(2),await y0(t),t.Va.set("Unknown"))}function o2(s){return s.ma||(s.ma=(function(t,n,r){const i=ze(t);return i.sa(),new f8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(s.datastore,s.asyncQueue,{Zo:_8.bind(null,s),Yo:x8.bind(null,s),t_:E8.bind(null,s),J_:b8.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),HF(s)?zF(s):s.Va.set("Unknown")):(await s.ma.stop(),q3(s))}))),s.ma}function Tu(s){return s.fa||(s.fa=(function(t,n,r){const i=ze(t);return i.sa(),new m8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:S8.bind(null,s),t_:I8.bind(null,s),ta:T8.bind(null,s),na:k8.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await C1(s)):(await s.fa.stop(),s.Ta.length>0&&(be(jh,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new no,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,u=new WF(e,t,o,r,i);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function GF(s,e){if(kl("AsyncQueue",`${e}: ${s}`),i2(s))return new Ae(se.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{static emptySet(e){return new hf(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Le.comparator(t.key,n.key):(t,n)=>Le.comparator(t.key,n.key),this.keyedMap=gg(),this.sortedSet=new sn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new hf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.ga=new sn(Le.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class qm{constructor(e,t,n,r,i,o,u,d,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((u=>{o.push({type:0,doc:u})})),new qm(e,t,hf.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&w1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class D8{constructor(){this.queries=xP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const r=ze(t),i=r.queries;r.queries=xP(),i.forEach(((o,u)=>{for(const d of u.ba)d.onError(n)}))})(this,new Ae(se.ABORTED,"Firestore shutting down"))}}function xP(){return new Xh((s=>m3(s)),w1)}async function Y3(s,e){const t=ze(s);let n=3;const r=e.query;let i=t.queries.get(r);i?!i.Sa()&&e.Da()&&(n=2):(i=new R8,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await t.onListen(r,!0);break;case 1:i.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const u=GF(o,`Initialization of query '${Hp(e.query)}' failed`);return void e.onError(u)}t.queries.set(r,i),i.ba.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&qF(t)}async function J3(s,e){const t=ze(s),n=e.query;let r=3;const i=t.queries.get(n);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?r=e.Da()?0:1:!i.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function N8(s,e){const t=ze(s);let n=!1;for(const r of e){const i=r.query,o=t.queries.get(i);if(o){for(const u of o.ba)u.Fa(r)&&(n=!0);o.wa=r}}n&&qF(t)}function M8(s,e,t){const n=ze(s),r=n.queries.get(e);if(r)for(const i of r.ba)i.onError(t);n.queries.delete(e)}function qF(s){s.Ca.forEach((e=>{e.next()}))}var xb,EP;(EP=xb||(xb={})).Ma="default",EP.Cache="cache";class Z3{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new qm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.key=e}}class tN{constructor(e){this.key=e}}class L8{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=at(),this.mutatedKeys=at(),this.eu=g3(e),this.tu=new hf(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new _P,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((f,g)=>{const w=r.get(f),A=v1(this.query,g)?g:null,F=!!w&&this.mutatedKeys.has(w.key),C=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let T=!1;w&&A?w.data.isEqual(A.data)?F!==C&&(n.track({type:3,doc:A}),T=!0):this.su(w,A)||(n.track({type:2,doc:A}),T=!0,(d&&this.eu(A,d)>0||h&&this.eu(A,h)<0)&&(u=!0)):!w&&A?(n.track({type:0,doc:A}),T=!0):w&&!A&&(n.track({type:1,doc:w}),T=!0,(d||h)&&(u=!0)),T&&(A?(o=o.add(A),i=C?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{tu:o,iu:n,Ss:u,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,g)=>(function(A,F){const C=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Vt:T})}};return C(A)-C(F)})(f.type,g.type)||this.eu(f.doc,g.doc))),this.ou(n),r=r??!1;const u=t&&!r?this._u():[],d=this.Ya.size===0&&this.current&&!r?1:0,h=d!==this.Xa;return this.Xa=d,o.length!==0||h?{snapshot:new qm(this.query,e.tu,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _P,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=at(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))}));const t=[];return e.forEach((n=>{this.Ya.has(n)||t.push(new tN(n))})),this.Ya.forEach((n=>{e.has(n)||t.push(new eN(n))})),t}cu(e){this.Za=e.ks,this.Ya=at();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return qm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const KF="SyncEngine";class O8{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class B8{constructor(e){this.key=e,this.hu=!1}}class V8{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xh((u=>m3(u)),w1),this.Iu=new Map,this.Eu=new Set,this.Ru=new sn(Le.comparator),this.Au=new Map,this.Vu=new OF,this.du={},this.mu=new Map,this.fu=Gm.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U8(s,e,t=!0){const n=oN(s);let r;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await nN(n,e,t,!0),r}async function j8(s,e){const t=oN(s);await nN(t,e,!0,!1)}async function nN(s,e,t,n){const r=await a8(s.localStore,ro(e)),i=r.targetId,o=s.sharedClientState.addLocalQueryTarget(i,t);let u;return n&&(u=await $8(s,e,i,o==="current",r.resumeToken)),s.isPrimaryClient&&t&&W3(s.remoteStore,r),u}async function $8(s,e,t,n,r){s.pu=(g,w,A)=>(async function(C,T,P,O){let N=T.view.ru(P);N.Ss&&(N=await mP(C.localStore,T.query,!1).then((({documents:D})=>T.view.ru(D,N))));const V=O&&O.targetChanges.get(T.targetId),z=O&&O.targetMismatches.get(T.targetId)!=null,W=T.view.applyChanges(N,C.isPrimaryClient,V,z);return CP(C,T.targetId,W.au),W.snapshot})(s,g,w,A);const i=await mP(s.localStore,e,!0),o=new L8(e,i.ks),u=o.ru(i.documents),d=g0.createSynthesizedTargetChangeForCurrentChange(t,n&&s.onlineState!=="Offline",r),h=o.applyChanges(u,s.isPrimaryClient,d);CP(s,t,h.au);const f=new O8(e,t,o);return s.Tu.set(e,f),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),h.snapshot}async function z8(s,e,t){const n=ze(s),r=n.Tu.get(e),i=n.Iu.get(r.targetId);if(i.length>1)return n.Iu.set(r.targetId,i.filter((o=>!w1(o,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ab(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),t&&jF(n.remoteStore,r.targetId),Eb(n,r.targetId)})).catch(s2)):(Eb(n,r.targetId),await Ab(n.localStore,r.targetId,!0))}async function H8(s,e){const t=ze(s),n=t.Tu.get(e),r=t.Iu.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),jF(t.remoteStore,n.targetId))}async function W8(s,e,t){const n=J8(s);try{const r=await(function(o,u){const d=ze(o),h=Wt.now(),f=u.reduce(((A,F)=>A.add(F.key)),at());let g,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let F=Il(),C=at();return d.xs.getEntries(A,f).next((T=>{F=T,F.forEach(((P,O)=>{O.isValidDocument()||(C=C.add(P))}))})).next((()=>d.localDocuments.getOverlayedDocuments(A,F))).next((T=>{g=T;const P=[];for(const O of u){const N=s9(O,g.get(O.key).overlayedDocument);N!=null&&P.push(new Vu(O.key,N,a3(N.value.mapValue),Ji.exists(!0)))}return d.mutationQueue.addMutationBatch(A,h,P,u)})).next((T=>{w=T;const P=T.applyToLocalDocumentSet(g,C);return d.documentOverlayCache.saveOverlays(A,T.batchId,P)}))})).then((()=>({batchId:w.batchId,changes:w3(g)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),(function(o,u,d){let h=o.du[o.currentUser.toKey()];h||(h=new sn(it)),h=h.insert(u,d),o.du[o.currentUser.toKey()]=h})(n,r.batchId,t),await w0(n,r.changes),await C1(n.remoteStore)}catch(r){const i=GF(r,"Failed to persist write");t.reject(i)}}async function rN(s,e){const t=ze(s);try{const n=await r8(t.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=t.Au.get(i);o&&(_t(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?_t(o.hu,14607):r.removedDocuments.size>0&&(_t(o.hu,42227),o.hu=!1))})),await w0(t,n,e)}catch(n){await s2(n)}}function bP(s,e,t){const n=ze(s);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.Tu.forEach(((i,o)=>{const u=o.view.va(e);u.snapshot&&r.push(u.snapshot)})),(function(o,u){const d=ze(o);d.onlineState=u;let h=!1;d.queries.forEach(((f,g)=>{for(const w of g.ba)w.va(u)&&(h=!0)})),h&&qF(d)})(n.eventManager,e),r.length&&n.Pu.J_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function G8(s,e,t){const n=ze(s);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Au.get(e),i=r&&r.key;if(i){let o=new sn(Le.comparator);o=o.insert(i,Rr.newNoDocument(i,He.min()));const u=at().add(i),d=new x1(He.min(),new Map,new sn(it),o,u);await rN(n,d),n.Ru=n.Ru.remove(i),n.Au.delete(e),QF(n)}else await Ab(n.localStore,e,!1).then((()=>Eb(n,e,t))).catch(s2)}async function q8(s,e){const t=ze(s),n=e.batch.batchId;try{const r=await n8(t.localStore,e);iN(t,n,null),sN(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await w0(t,r)}catch(r){await s2(r)}}async function K8(s,e,t){const n=ze(s);try{const r=await(function(o,u){const d=ze(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return d.mutationQueue.lookupMutationBatch(h,u).next((g=>(_t(g!==null,37113),f=g.keys(),d.mutationQueue.removeMutationBatch(h,g)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,f,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>d.localDocuments.getDocuments(h,f)))}))})(n.localStore,e);iN(n,e,t),sN(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await w0(n,r)}catch(r){await s2(r)}}function sN(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function iN(s,e,t){const n=ze(s);let r=n.du[n.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),n.du[n.currentUser.toKey()]=r}}function Eb(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const n of s.Iu.get(e))s.Tu.delete(n),t&&s.Pu.yu(n,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((n=>{s.Vu.containsKey(n)||aN(s,n)}))}function aN(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(jF(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),QF(s))}function CP(s,e,t){for(const n of t)n instanceof eN?(s.Vu.addReference(n.key,e),Q8(s,n)):n instanceof tN?(be(KF,"Document no longer in limbo: "+n.key),s.Vu.removeReference(n.key,e),s.Vu.containsKey(n.key)||aN(s,n.key)):je(19791,{wu:n})}function Q8(s,e){const t=e.key,n=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(n)||(be(KF,"New document in limbo: "+t),s.Eu.add(n),QF(s))}function QF(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Le(Vt.fromString(e)),n=s.fu.next();s.Au.set(n,new B8(t)),s.Ru=s.Ru.insert(t,n),W3(s.remoteStore,new gu(ro(PF(t.path)),n,"TargetPurposeLimboResolution",m1.ce))}}async function w0(s,e,t){const n=ze(s),r=[],i=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{o.push(n.pu(d,e,t).then((h=>{var f;if((h||t)&&n.isPrimaryClient){const g=h?!h.fromCache:(f=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:f.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(h){r.push(h);const g=VF.Es(d.targetId,h);i.push(g)}})))})),await Promise.all(o),n.Pu.J_(r),await(async function(d,h){const f=ze(d);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>ae.forEach(h,(w=>ae.forEach(w.Ts,(A=>f.persistence.referenceDelegate.addReference(g,w.targetId,A))).next((()=>ae.forEach(w.Is,(A=>f.persistence.referenceDelegate.removeReference(g,w.targetId,A)))))))))}catch(g){if(!i2(g))throw g;be(UF,"Failed to update sequence numbers: "+g)}for(const g of h){const w=g.targetId;if(!g.fromCache){const A=f.vs.get(w),F=A.snapshotVersion,C=A.withLastLimboFreeSnapshotVersion(F);f.vs=f.vs.insert(w,C)}}})(n.localStore,i))}async function X8(s,e){const t=ze(s);if(!t.currentUser.isEqual(e)){be(KF,"User change. New user:",e.toKey());const n=await j3(t.localStore,e);t.currentUser=e,(function(i,o){i.mu.forEach((u=>{u.forEach((d=>{d.reject(new Ae(se.CANCELLED,o))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await w0(t,n.Ns)}}function Y8(s,e){const t=ze(s),n=t.Au.get(e);if(n&&n.hu)return at().add(n.key);{let r=at();const i=t.Iu.get(e);if(!i)return r;for(const o of i){const u=t.Tu.get(o);r=r.unionWith(u.view.nu)}return r}}function oN(s){const e=ze(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=rN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G8.bind(null,e),e.Pu.J_=N8.bind(null,e.eventManager),e.Pu.yu=M8.bind(null,e.eventManager),e}function J8(s){const e=ze(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K8.bind(null,e),e}class b_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=E1(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return t8(this.persistence,new J9,e.initialUser,this.serializer)}Cu(e){return new U3(BF.Vi,this.serializer)}Du(e){return new l8}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}b_.provider={build:()=>new b_};class Z8 extends b_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_t(this.persistence.referenceDelegate instanceof x_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new O9(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?us.withCacheSize(this.cacheSizeBytes):us.DEFAULT;return new U3((n=>x_.Vi(n,t)),this.serializer)}}class bb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>bP(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=X8.bind(null,this.syncEngine),await P8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new D8})()}createDatastore(e){const t=E1(e.databaseInfo.databaseId),n=p8(e.databaseInfo);return w8(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,r,i,o,u){return new A8(n,r,i,o,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>bP(this.syncEngine,t,0)),(function(){return wP.v()?new wP:new c8})())}createSyncEngine(e,t){return(function(r,i,o,u,d,h,f){const g=new V8(r,i,o,u,d,h);return f&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const i=ze(r);be(jh,"RemoteStore shutting down."),i.Ea.add(5),await y0(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}bb.provider={build:()=>new bb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku="FirestoreClient";class e${constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=Pr.UNAUTHENTICATED,this.clientId=CF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async o=>{be(ku,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(be(ku,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new no;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=GF(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function LE(s,e){s.asyncQueue.verifyOperationInProgress(),be(ku,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let n=t.initialUser;s.setCredentialChangeListener((async r=>{n.isEqual(r)||(await j3(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function FP(s,e){s.asyncQueue.verifyOperationInProgress();const t=await t$(s);be(ku,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((n=>AP(e.remoteStore,n))),s.setAppCheckTokenChangeListener(((n,r)=>AP(e.remoteStore,r))),s._onlineComponents=e}async function t$(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){be(ku,"Using user provided OfflineComponentProvider");try{await LE(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===se.FAILED_PRECONDITION||r.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Uh("Error using user provided cache. Falling back to memory cache: "+t),await LE(s,new b_)}}else be(ku,"Using default OfflineComponentProvider"),await LE(s,new Z8(void 0));return s._offlineComponents}async function XF(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(be(ku,"Using user provided OnlineComponentProvider"),await FP(s,s._uninitializedComponentsProvider._online)):(be(ku,"Using default OnlineComponentProvider"),await FP(s,new bb))),s._onlineComponents}function n$(s){return XF(s).then((e=>e.syncEngine))}function r$(s){return XF(s).then((e=>e.datastore))}async function cN(s){const e=await XF(s),t=e.eventManager;return t.onListen=U8.bind(null,e.syncEngine),t.onUnlisten=z8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=j8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=H8.bind(null,e.syncEngine),t}function s$(s,e,t={}){const n=new no;return s.asyncQueue.enqueueAndForget((async()=>(function(i,o,u,d,h){const f=new lN({next:w=>{f.Nu(),o.enqueueAndForget((()=>J3(i,g)));const A=w.docs.has(u);!A&&w.fromCache?h.reject(new Ae(se.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&w.fromCache&&d&&d.source==="server"?h.reject(new Ae(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new Z3(PF(u.path),f,{includeMetadataChanges:!0,Ka:!0});return Y3(i,g)})(await cN(s),s.asyncQueue,e,t,n))),n.promise}function i$(s,e,t={}){const n=new no;return s.asyncQueue.enqueueAndForget((async()=>(function(i,o,u,d,h){const f=new lN({next:w=>{f.Nu(),o.enqueueAndForget((()=>J3(i,g))),w.fromCache&&d.source==="server"?h.reject(new Ae(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new Z3(u,f,{includeMetadataChanges:!0,Ka:!0});return Y3(i,g)})(await cN(s),s.asyncQueue,e,t,n))),n.promise}function a$(s,e,t){const n=new no;return s.asyncQueue.enqueueAndForget((async()=>{try{const r=await r$(s);n.resolve((async function(o,u,d){var C;const h=ze(o),{request:f,gt:g,parent:w}=b9(h.serializer,$j(u),d);h.connection.Ko||delete f.parent;const A=(await h.jo("RunAggregationQuery",h.serializer.databaseId,w,f,1)).filter((T=>!!T.result));_t(A.length===1,64727);const F=(C=A[0].result)==null?void 0:C.aggregateFields;return Object.keys(F).reduce(((T,P)=>(T[g[P]]=F[P],T)),{})})(r,e,t))}catch(r){n.reject(r)}})),n.promise}function o$(s,e){const t=new no;return s.asyncQueue.enqueueAndForget((async()=>W8(await n$(s),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$="ComponentProvider",SP=new Map;function c$(s,e,t,n,r){return new Cj(s,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,uN(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="firestore.googleapis.com",TP=!0;class kP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dN,this.ssl=TP}else this.host=e.host,this.ssl=e.ssl??TP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=V3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M9)throw new Ae(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uN(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Ae(se.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Ae(se.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Ae(se.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class F1{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new nj;switch(n.type){case"firstParty":return new aj(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ae(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=SP.get(t);n&&(be(l$,"Removing Datastore"),SP.delete(t),n.terminate())})(this),Promise.resolve()}}function u$(s,e,t,n={}){var h;s=ao(s,F1);const r=Lu(e),i=s._getSettings(),o={...i,emulatorOptions:s._getEmulatorOptions()},u=`${e}:${t}`;r&&(dF(`https://${u}`),hF("Firestore",!0)),i.host!==dN&&i.host!==u&&Uh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...i,host:u,ssl:r,emulatorOptions:n};if(!Lh(d,o)&&(s._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=Pr.MOCK_USER;else{f=nD(n.mockUserToken,(h=s._app)==null?void 0:h.options.projectId);const w=n.mockUserToken.sub||n.mockUserToken.user_id;if(!w)throw new Ae(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Pr(w)}s._authCredentials=new rj(new KD(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Uu(this.firestore,e,this._query)}}class Rn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}toJSON(){return{type:Rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(f0(t,Rn._jsonSchema))return new Rn(e,n||null,new Le(Vt.fromString(t.referencePath)))}}Rn._jsonSchemaVersion="firestore/documentReference/1.0",Rn._jsonSchema={type:Pn("string",Rn._jsonSchemaVersion),referencePath:Pn("string")};class _u extends Uu{constructor(e,t,n){super(e,t,PF(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new Le(e))}withConverter(e){return new _u(this.firestore,e,this._path)}}function ds(s,e,...t){if(s=pn(s),QD("collection","path",e),s instanceof F1){const n=Vt.fromString(e,...t);return $I(n),new _u(s,null,n)}{if(!(s instanceof Rn||s instanceof _u))throw new Ae(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(Vt.fromString(e,...t));return $I(n),new _u(s.firestore,null,n)}}function sa(s,e,...t){if(s=pn(s),arguments.length===1&&(e=CF.newId()),QD("doc","path",e),s instanceof F1){const n=Vt.fromString(e,...t);return jI(n),new Rn(s,null,new Le(n))}{if(!(s instanceof Rn||s instanceof _u))throw new Ae(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(Vt.fromString(e,...t));return jI(n),new Rn(s.firestore,s instanceof _u?s.converter:null,new Le(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="AsyncQueue";class PP{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new z3(this,"async_queue_retry"),this._c=()=>{const n=ME();n&&be(IP,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=ME();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ME();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new no;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!i2(e))throw e;be(IP,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,kl("INTERNAL UNHANDLED ERROR: ",RP(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=WF.createAndSchedule(this,e,t,n,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&je(47125,{Pc:RP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function RP(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Jh extends F1{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new PP,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PP(e),this._firestoreClient=void 0,await e}}}function d$(s,e){const t=typeof s=="object"?s:mF(),n=typeof s=="string"?s:g_,r=c1(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const i=ZR("firestore");i&&u$(r,...i)}return r}function S1(s){if(s._terminated)throw new Ae(se.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||h$(s),s._firestoreClient}function h$(s){var n,r,i,o;const e=s._freezeSettings(),t=c$(s._databaseId,((n=s._app)==null?void 0:n.options.appId)||"",s._persistenceKey,(r=s._app)==null?void 0:r.options.apiKey,e);s._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new e$(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _i(yr.fromBase64String(e))}catch(t){throw new Ae(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _i(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_i._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(f0(e,_i._jsonSchema))return _i.fromBase64String(e.bytes)}}_i._jsonSchemaVersion="firestore/bytes/1.0",_i._jsonSchema={type:Pn("string",_i._jsonSchemaVersion),bytes:Pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:io._jsonSchemaVersion}}static fromJSON(e){if(f0(e,io._jsonSchema))return new io(e.latitude,e.longitude)}}io._jsonSchemaVersion="firestore/geoPoint/1.0",io._jsonSchema={type:Pn("string",io._jsonSchemaVersion),latitude:Pn("number"),longitude:Pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,r){if(n.length!==r.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(f0(e,Zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Zi(e.vectorValues);throw new Ae(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zi._jsonSchemaVersion="firestore/vectorValue/1.0",Zi._jsonSchema={type:Pn("string",Zi._jsonSchemaVersion),vectorValues:Pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$=/^__.*__$/;class f${constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Vu(e,this.data,this.fieldMask,t,this.fieldTransforms):new m0(e,this.data,t,this.fieldTransforms)}}class hN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Vu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pN(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{dataSource:s})}}class JF{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new JF({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return C_(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(pN(this.dataSource)&&p$.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class m${constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||E1(e)}createContext(e,t,n,r=!1){return new JF({dataSource:e,methodName:t,targetDoc:n,path:mr.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ZF(s){const e=s._freezeSettings(),t=E1(s._databaseId);return new m$(s._databaseId,!!e.ignoreUndefinedProperties,t)}function g$(s,e,t,n,r,i={}){const o=s.createContext(i.merge||i.mergeFields?2:0,e,t,r);tS("Data must be an object, but it was:",o,n);const u=fN(n,o);let d,h;if(i.merge)d=new Ws(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const w=$h(e,g,t);if(!o.contains(w))throw new Ae(se.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);yN(f,w)||f.push(w)}d=new Ws(f),h=o.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,h=o.fieldTransforms;return new f$(new Hr(u),d,h)}class k1 extends T1{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof k1}}class eS extends T1{_toFieldTransform(e){return new e9(e.path,new ny)}isEqual(e){return e instanceof eS}}function y$(s,e,t,n){const r=s.createContext(1,e,t);tS("Data must be an object, but it was:",r,n);const i=[],o=Hr.empty();Bu(n,((d,h)=>{const f=gN(e,d,t);h=pn(h);const g=r.childContextForFieldPath(f);if(h instanceof k1)i.push(f);else{const w=v0(h,g);w!=null&&(i.push(f),o.set(f,w))}}));const u=new Ws(i);return new hN(o,u,r.fieldTransforms)}function w$(s,e,t,n,r,i){const o=s.createContext(1,e,t),u=[$h(e,n,t)],d=[r];if(i.length%2!=0)throw new Ae(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<i.length;w+=2)u.push($h(e,i[w])),d.push(i[w+1]);const h=[],f=Hr.empty();for(let w=u.length-1;w>=0;--w)if(!yN(h,u[w])){const A=u[w];let F=d[w];F=pn(F);const C=o.childContextForFieldPath(A);if(F instanceof k1)h.push(A);else{const T=v0(F,C);T!=null&&(h.push(A),f.set(A,T))}}const g=new Ws(h);return new hN(f,g,o.fieldTransforms)}function v$(s,e,t,n=!1){return v0(t,s.createContext(n?4:3,e))}function v0(s,e){if(mN(s=pn(s)))return tS("Unsupported field value:",e,s),fN(s,e);if(s instanceof T1)return(function(n,r){if(!pN(r.dataSource))throw r.createError(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(n,r){const i=[];let o=0;for(const u of n){let d=v0(u,r.childContextForArray(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(s,e)}return(function(n,r){if((n=pn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Yj(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Wt.fromDate(n);return{timestampValue:__(r.serializer,i)}}if(n instanceof Wt){const i=new Wt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:__(r.serializer,i)}}if(n instanceof io)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof _i)return{bytesValue:I3(r.serializer,n._byteString)};if(n instanceof Rn){const i=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw r.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:LF(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Zi)return(function(o,u){const d=o instanceof Zi?o.toArray():o;return{mapValue:{fields:{[s3]:{stringValue:i3},[y_]:{arrayValue:{values:d.map((f=>{if(typeof f!="number")throw u.createError("VectorValues must only contain numeric values.");return RF(u.serializer,f)}))}}}}}})(n,r);if(B3(n))return n._toProto(r.serializer);throw r.createError(`Unsupported field value: ${f1(n)}`)})(s,e)}function fN(s,e){const t={};return JD(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bu(s,((n,r)=>{const i=v0(r,e.childContextForField(n));i!=null&&(t[n]=i)})),{mapValue:{fields:t}}}function mN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Wt||s instanceof io||s instanceof _i||s instanceof Rn||s instanceof T1||s instanceof Zi||B3(s))}function tS(s,e,t){if(!mN(t)||!XD(t)){const n=f1(t);throw n==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+n)}}function $h(s,e,t){if((e=pn(e))instanceof YF)return e._internalPath;if(typeof e=="string")return gN(s,e);throw C_("Field path arguments must be of type string or ",s,!1,void 0,t)}const A$=new RegExp("[~\\*/\\[\\]]");function gN(s,e,t){if(e.search(A$)>=0)throw C_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new YF(...e.split("."))._internalPath}catch{throw C_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function C_(s,e,t,n,r){const i=n&&!n.isEmpty(),o=r!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${r}`),d+=")"),new Ae(se.INVALID_ARGUMENT,u+s+d)}function yN(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${convertValue(e,t="none"){switch(Su(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Bu(e,((r,i)=>{n[r]=this.convertValue(i,t)})),n}convertVectorValue(e){var n,r,i;const t=(i=(r=(n=e.fields)==null?void 0:n[y_].arrayValue)==null?void 0:r.values)==null?void 0:i.map((o=>xn(o.doubleValue)));return new Zi(t)}convertGeoPoint(e){return new io(xn(e.latitude),xn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=y1(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Jg(e));default:return null}}convertTimestamp(e){const t=Cu(e);return new Wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Vt.fromString(e);_t(O3(n),9688,{name:e});const r=new Zg(n.get(1),n.get(3)),i=new Le(n.popFirst(5));return r.isEqual(t)||kl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS extends _${constructor(e){super(),this.firestore=e}convertBytes(e){return new _i(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}function A0(){return new eS("serverTimestamp")}const DP="@firebase/firestore",NP="4.11.0";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class E${constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new Hr({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field($h("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class b$ extends wN{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ae(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rS{}class sS extends rS{}function ea(s,e,...t){let n=[];e instanceof rS&&n.push(e),n=n.concat(t),(function(i){const o=i.filter((d=>d instanceof iS)).length,u=i.filter((d=>d instanceof I1)).length;if(o>1||o>0&&u>0)throw new Ae(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const r of n)s=r._apply(s);return s}class I1 extends sS{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new I1(e,t,n)}_apply(e){const t=this._parse(e);return AN(e._query,t),new Uu(e.firestore,e.converter,mb(e._query,t))}_parse(e){const t=ZF(e.firestore);return(function(i,o,u,d,h,f,g){let w;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ae(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){LP(g,f);const F=[];for(const C of g)F.push(MP(d,i,C));w={arrayValue:{values:F}}}else w=MP(d,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||LP(g,f),w=v$(u,o,g,f==="in"||f==="not-in");return In.create(h,f,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function xu(s,e,t){const n=e,r=$h("where",s);return I1._create(r,n,t)}class iS extends rS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iS(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:na.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,i){let o=r;const u=i.getFlattenedFilters();for(const d of u)AN(o,d),o=mb(o,d)})(e._query,t),new Uu(e.firestore,e.converter,mb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class aS extends sS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new aS(e,t)}_apply(e){const t=(function(r,i,o){if(r.startAt!==null)throw new Ae(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ae(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ty(i,o)})(e._query,this._field,this._direction);return new Uu(e.firestore,e.converter,zj(e._query,t))}}function Iu(s,e="asc"){const t=e,n=$h("orderBy",s);return aS._create(n,t)}class oS extends sS{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new oS(e,t,n)}_apply(e){return new Uu(e.firestore,e.converter,v_(e._query,this._limit,this._limitType))}}function vN(s){return pj("limit",s),oS._create("limit",s,"F")}function MP(s,e,t){if(typeof(t=pn(t))=="string"){if(t==="")throw new Ae(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p3(e)&&t.indexOf("/")!==-1)throw new Ae(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Vt.fromString(t));if(!Le.isDocumentKey(n))throw new Ae(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return XI(s,new Le(n))}if(t instanceof Rn)return XI(s,t._key);throw new Ae(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${f1(t)}.`)}function LP(s,e){if(!Array.isArray(s)||s.length===0)throw new Ae(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AN(s,e){const t=(function(r,i){for(const o of r)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null})(s.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ae(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function F$(s,e,t){let n;return n=s?s.toFirestore(e):e,n}function S$(){return new x$("count")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(s){return T$(s,{count:S$()})}function T$(s,e){const t=ao(s.firestore,Jh),n=S1(t),r=Ej(e,((i,o)=>new l9(o,i.aggregateType,i._internalFieldPath)));return a$(n,s._query,r).then((i=>(function(u,d,h){const f=new nS(u);return new E$(d,f,h)})(t,s,i)))}class wg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nh extends wN{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field($h("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Nh._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Nh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nh._jsonSchema={type:Pn("string",Nh._jsonSchemaVersion),bundleSource:Pn("string","DocumentSnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class xA extends Nh{data(e={}){return super.data(e)}}class pf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new wg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new xA(this._firestore,this._userDataWriter,n.key,n,new wg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((u=>{const d=new xA(r._firestore,r._userDataWriter,u.doc.key,u.doc,new wg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>i||u.type!==3)).map((u=>{const d=new xA(r._firestore,r._userDataWriter,u.doc.key,u.doc,new wg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:k$(u.type),doc:d,oldIndex:h,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=CF.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function k$(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:s})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pf._jsonSchemaVersion="firestore/querySnapshot/1.0",pf._jsonSchema={type:Pn("string",pf._jsonSchemaVersion),bundleSource:Pn("string","QuerySnapshot"),bundleName:Pn("string"),bundle:Pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(s){s=ao(s,Rn);const e=ao(s.firestore,Jh),t=S1(e);return s$(t,s._key).then((n=>P$(e,s,n)))}function Zh(s){s=ao(s,Uu);const e=ao(s.firestore,Jh),t=S1(e),n=new nS(e);return C$(s._query),i$(t,s._query).then((r=>new pf(e,n,s,r)))}function P1(s,e,t,...n){s=ao(s,Rn);const r=ao(s.firestore,Jh),i=ZF(r);let o;return o=typeof(e=pn(e))=="string"||e instanceof YF?w$(i,"updateDoc",s._key,e,t,n):y$(i,"updateDoc",s._key,e),lS(r,[o.toMutation(s._key,Ji.exists(!0))])}function _0(s){return lS(ao(s.firestore,Jh),[new DF(s._key,Ji.none())])}function x0(s,e){const t=ao(s.firestore,Jh),n=sa(s),r=F$(s.converter,e),i=ZF(s.firestore);return lS(t,[g$(i,"addDoc",n._key,r,s.converter!==null,{}).toMutation(n._key,Ji.exists(!1))]).then((()=>n))}function lS(s,e){const t=S1(s);return o$(t,e)}function P$(s,e,t){const n=t.docs.get(e._key),r=new nS(s);return new Nh(s,r,e._key,n,new wg(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){tj(Kh),Oh(new Eu("firestore",((n,{instanceIdentifier:r,options:i})=>{const o=n.getProvider("app").getImmediate(),u=new Jh(new sj(n.getProvider("auth-internal")),new oj(o,n.getProvider("app-check-internal")),Fj(o,r),o);return i={useFetchStreams:t,...i},u._setSettings(i),u}),"PUBLIC").setMultipleInstances(!0)),Za(DP,NP,e),Za(DP,NP,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="firebasestorage.googleapis.com",xN="storageBucket",R$=120*1e3,D$=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends po{constructor(e,t,n=0){super(BE(e),`Firebase Storage: ${t} (${BE(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return BE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var fn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(fn||(fn={}));function BE(s){return"storage/"+s}function cS(){const s="An unknown error occurred, please check the error payload for server response.";return new mn(fn.UNKNOWN,s)}function N$(s){return new mn(fn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function M$(s){return new mn(fn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function L$(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mn(fn.UNAUTHENTICATED,s)}function O$(){return new mn(fn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function B$(s){return new mn(fn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function V$(){return new mn(fn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U$(){return new mn(fn.CANCELED,"User canceled the upload/download.")}function j$(s){return new mn(fn.INVALID_URL,"Invalid URL '"+s+"'.")}function $$(s){return new mn(fn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function z$(){return new mn(fn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xN+"' property when initializing the app?")}function H$(){return new mn(fn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function W$(){return new mn(fn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function G$(s){return new mn(fn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Cb(s){return new mn(fn.INVALID_ARGUMENT,s)}function EN(){return new mn(fn.APP_DELETED,"The Firebase app was deleted.")}function q$(s){return new mn(fn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gg(s,e){return new mn(fn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function ig(s){throw new mn(fn.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Gs.makeFromUrl(e,t)}catch{return new Gs(e,"")}if(n.path==="")return n;throw $$(e)}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+r+o,"i"),d={bucket:1,path:3};function h(V){V.path_=decodeURIComponent(V.path)}const f="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",A=new RegExp(`^https?://${g}/${f}/b/${r}/o${w}`,"i"),F={bucket:1,path:3},C=t===_N?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",P=new RegExp(`^https?://${C}/${r}/${T}`,"i"),N=[{regex:u,indices:d,postModify:i},{regex:A,indices:F,postModify:h},{regex:P,indices:{bucket:1,path:2},postModify:h}];for(let V=0;V<N.length;V++){const z=N[V],W=z.regex.exec(e);if(W){const D=W[z.indices.bucket];let R=W[z.indices.path];R||(R=""),n=new Gs(D,R),z.postModify(n);break}}if(n==null)throw j$(e);return n}}class K${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(s,e,t){let n=1,r=null,i=null,o=!1,u=0;function d(){return u===2}let h=!1;function f(...T){h||(h=!0,e.apply(null,T))}function g(T){r=setTimeout(()=>{r=null,s(A,d())},T)}function w(){i&&clearTimeout(i)}function A(T,...P){if(h){w();return}if(T){w(),f.call(null,T,...P);return}if(d()||o){w(),f.call(null,T,...P);return}n<64&&(n*=2);let N;u===1?(u=2,N=0):N=(n+Math.random())*1e3,g(N)}let F=!1;function C(T){F||(F=!0,w(),!h&&(r!==null?(T||(u=2),clearTimeout(r),g(0)):T||(u=1)))}return g(0),i=setTimeout(()=>{o=!0,C(!0)},t),C}function X$(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(s){return s!==void 0}function J$(s){return typeof s=="object"&&!Array.isArray(s)}function uS(s){return typeof s=="string"||s instanceof String}function OP(s){return dS()&&s instanceof Blob}function dS(){return typeof Blob<"u"}function BP(s,e,t,n){if(n<e)throw Cb(`Invalid value for '${s}'. Expected ${e} or greater.`);if(n>t)throw Cb(`Invalid value for '${s}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(s,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${s}`}function bN(s){const e=encodeURIComponent;let t="?";for(const n in s)if(s.hasOwnProperty(n)){const r=e(n)+"="+e(s[n]);t=t+r+"&"}return t=t.slice(0,-1),t}var Mh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Mh||(Mh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(s,e){const t=s>=500&&s<600,r=[408,429].indexOf(s)!==-1,i=e.indexOf(s)!==-1;return t||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e,t,n,r,i,o,u,d,h,f,g,w=!0,A=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=g,this.retry=w,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,C)=>{this.resolve_=F,this.reject_=C,this.start_()})}start_(){const e=(n,r)=>{if(r){n(!1,new Zv(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=u=>{const d=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const u=i.getErrorCode()===Mh.NO_ERROR,d=i.getStatus();if(!u||Z$(d,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Mh.ABORT;n(!1,new Zv(!1,null,f));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new Zv(h,i))})},t=(n,r)=>{const i=this.resolve_,o=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());Y$(d)?i(d):i()}catch(d){o(d)}else if(u!==null){const d=cS();d.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,d)):o(d)}else if(r.canceled){const d=this.appDelete_?EN():U$();o(d)}else{const d=V$();o(d)}};this.canceled_?t(!1,new Zv(!1,null,!0)):this.backoffId_=Q$(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&X$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function tz(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function nz(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rz(s,e){e&&(s["X-Firebase-GMPID"]=e)}function sz(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function iz(s,e,t,n,r,i,o=!0,u=!1){const d=bN(s.urlParams),h=s.url+d,f=Object.assign({},s.headers);return rz(f,e),tz(f,t),nz(f,i),sz(f,n),new ez(h,s.method,f,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,r,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function oz(...s){const e=az();if(e!==void 0){const t=new e;for(let n=0;n<s.length;n++)t.append(s[n]);return t.getBlob()}else{if(dS())return new Blob(s);throw new mn(fn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lz(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(s){if(typeof atob>"u")throw G$("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class VE{constructor(e,t){this.data=e,this.contentType=t||null}}function uz(s,e){switch(s){case Ja.RAW:return new VE(CN(e));case Ja.BASE64:case Ja.BASE64URL:return new VE(FN(s,e));case Ja.DATA_URL:return new VE(hz(e),pz(e))}throw cS()}function CN(s){const e=[];for(let t=0;t<s.length;t++){let n=s.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=s.charCodeAt(++t);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function dz(s){let e;try{e=decodeURIComponent(s)}catch{throw Gg(Ja.DATA_URL,"Malformed data URL.")}return CN(e)}function FN(s,e){switch(s){case Ja.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Gg(s,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ja.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Gg(s,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=cz(e)}catch(r){throw r.message.includes("polyfill")?r:Gg(s,"Invalid character found")}const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}class SN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Gg(Ja.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=fz(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function hz(s){const e=new SN(s);return e.base64?FN(Ja.BASE64,e.rest):dz(e.rest)}function pz(s){return new SN(s).contentType}function fz(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){let n=0,r="";OP(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(OP(this.data_)){const n=this.data_,r=lz(n,e,t);return r===null?null:new Ac(r)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Ac(n,!0)}}static getBlob(...e){if(dS()){const t=e.map(n=>n instanceof Ac?n.data_:n);return new Ac(oz.apply(null,t))}else{const t=e.map(o=>uS(o)?uz(Ja.RAW,o).data:o.data_);let n=0;t.forEach(o=>{n+=o.byteLength});const r=new Uint8Array(n);let i=0;return t.forEach(o=>{for(let u=0;u<o.length;u++)r[i++]=o[u]}),new Ac(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(s){let e;try{e=JSON.parse(s)}catch{return null}return J$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function gz(s,e){const t=e.split("/").filter(n=>n.length>0).join("/");return s.length===0?t:s+"/"+t}function kN(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(s,e){return e}class Or{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||yz}}let eA=null;function wz(s){return!uS(s)||s.length<2?s:kN(s)}function IN(){if(eA)return eA;const s=[];s.push(new Or("bucket")),s.push(new Or("generation")),s.push(new Or("metageneration")),s.push(new Or("name","fullPath",!0));function e(i,o){return wz(o)}const t=new Or("name");t.xform=e,s.push(t);function n(i,o){return o!==void 0?Number(o):o}const r=new Or("size");return r.xform=n,s.push(r),s.push(new Or("timeCreated")),s.push(new Or("updated")),s.push(new Or("md5Hash",null,!0)),s.push(new Or("cacheControl",null,!0)),s.push(new Or("contentDisposition",null,!0)),s.push(new Or("contentEncoding",null,!0)),s.push(new Or("contentLanguage",null,!0)),s.push(new Or("contentType",null,!0)),s.push(new Or("metadata","customMetadata",!0)),eA=s,eA}function vz(s,e){function t(){const n=s.bucket,r=s.fullPath,i=new Gs(n,r);return e._makeStorageReference(i)}Object.defineProperty(s,"ref",{get:t})}function Az(s,e,t){const n={};n.type="file";const r=t.length;for(let i=0;i<r;i++){const o=t[i];n[o.local]=o.xform(n,e[o.server])}return vz(n,s),n}function PN(s,e,t){const n=TN(e);return n===null?null:Az(s,n,t)}function _z(s,e,t,n){const r=TN(e);if(r===null||!uS(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const f=s.bucket,g=s.fullPath,w="/b/"+o(f)+"/o/"+o(g),A=R1(w,t,n),F=bN({alt:"media",token:h});return A+F})[0]}function xz(s,e){const t={},n=e.length;for(let r=0;r<n;r++){const i=e[r];i.writable&&(t[i.server]=s[i.local])}return JSON.stringify(t)}class hS{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(s){if(!s)throw cS()}function Ez(s,e){function t(n,r){const i=PN(s,r,e);return RN(i!==null),i}return t}function bz(s,e){function t(n,r){const i=PN(s,r,e);return RN(i!==null),_z(i,r,s.host,s._protocol)}return t}function DN(s){function e(t,n){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=O$():r=L$():t.getStatus()===402?r=M$(s.bucket):t.getStatus()===403?r=B$(s.path):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}return e}function NN(s){const e=DN(s);function t(n,r){let i=e(n,r);return n.getStatus()===404&&(i=N$(s.path)),i.serverResponse=r.serverResponse,i}return t}function Cz(s,e,t){const n=e.fullServerUrl(),r=R1(n,s.host,s._protocol),i="GET",o=s.maxOperationRetryTime,u=new hS(r,i,bz(s,t),o);return u.errorHandler=NN(e),u}function Fz(s,e){const t=e.fullServerUrl(),n=R1(t,s.host,s._protocol),r="DELETE",i=s.maxOperationRetryTime;function o(d,h){}const u=new hS(n,r,o,i);return u.successCodes=[200,204],u.errorHandler=NN(e),u}function Sz(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Tz(s,e,t){const n=Object.assign({},t);return n.fullPath=s.path,n.size=e.size(),n.contentType||(n.contentType=Sz(null,e)),n}function kz(s,e,t,n,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function u(){let N="";for(let V=0;V<2;V++)N=N+Math.random().toString().slice(2);return N}const d=u();o["Content-Type"]="multipart/related; boundary="+d;const h=Tz(e,n,r),f=xz(h,t),g="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+d+"--",A=Ac.getBlob(g,n,w);if(A===null)throw H$();const F={name:h.fullPath},C=R1(i,s.host,s._protocol),T="POST",P=s.maxUploadRetryTime,O=new hS(C,T,Ez(s,t),P);return O.urlParams=F,O.headers=o,O.body=A.uploadData(),O.errorHandler=DN(e),O}class Iz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw ig("cannot .send() more than once");if(Lu(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ig("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ig("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ig("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ig("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Pz extends Iz{initXhr(){this.xhr_.responseType="text"}}function pS(){return new Pz}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t){this._service=e,t instanceof Gs?this._location=t:this._location=Gs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new zh(e,t)}get root(){const e=new Gs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kN(this._location.path)}get storage(){return this._service}get parent(){const e=mz(this._location.path);if(e===null)return null;const t=new Gs(this._location.bucket,e);return new zh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw q$(e)}}function Rz(s,e,t){s._throwIfRoot("uploadBytes");const n=kz(s.storage,s._location,IN(),new Ac(e,!0),t);return s.storage.makeRequestWithTokens(n,pS).then(r=>({metadata:r,ref:s}))}function Dz(s){s._throwIfRoot("getDownloadURL");const e=Cz(s.storage,s._location,IN());return s.storage.makeRequestWithTokens(e,pS).then(t=>{if(t===null)throw W$();return t})}function Nz(s){s._throwIfRoot("deleteObject");const e=Fz(s.storage,s._location);return s.storage.makeRequestWithTokens(e,pS)}function Mz(s,e){const t=gz(s._location.path,e),n=new Gs(s._location.bucket,t);return new zh(s.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(s){return/^[A-Za-z]+:\/\//.test(s)}function Oz(s,e){return new zh(s,e)}function MN(s,e){if(s instanceof fS){const t=s;if(t._bucket==null)throw z$();const n=new zh(t,t._bucket);return e!=null?MN(n,e):n}else return e!==void 0?Mz(s,e):s}function Bz(s,e){if(e&&Lz(e)){if(s instanceof fS)return Oz(s,e);throw Cb("To use ref(service, url), the first argument must be a Storage instance.")}else return MN(s,e)}function VP(s,e){const t=e==null?void 0:e[xN];return t==null?null:Gs.makeFromBucketSpec(t,s)}function Vz(s,e,t,n={}){s.host=`${e}:${t}`;const r=Lu(e);r&&(dF(`https://${s.host}/b`),hF("Storage",!0)),s._isUsingEmulator=!0,s._protocol=r?"https":"http";const{mockUserToken:i}=n;i&&(s._overrideAuthToken=typeof i=="string"?i:nD(i,s.app.options.projectId))}class fS{constructor(e,t,n,r,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=_N,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=R$,this._maxUploadRetryTime=D$,this._requests=new Set,r!=null?this._bucket=Gs.makeFromBucketSpec(r,this._host):this._bucket=VP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gs.makeFromBucketSpec(this._url,e):this._bucket=VP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zh(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new K$(EN());{const o=iz(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const UP="@firebase/storage",jP="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="storage";function Km(s,e,t){return s=pn(s),Rz(s,e,t)}function Qm(s){return s=pn(s),Dz(s)}function Fb(s){return s=pn(s),Nz(s)}function Pl(s,e){return s=pn(s),Bz(s,e)}function Uz(s=mF(),e){s=pn(s);const n=c1(s,LN).getImmediate({identifier:e}),r=ZR("storage");return r&&jz(n,...r),n}function jz(s,e,t,n={}){Vz(s,e,t,n)}function $z(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),n=s.getProvider("auth-internal"),r=s.getProvider("app-check-internal");return new fS(t,n,r,e,Kh)}function zz(){Oh(new Eu(LN,$z,"PUBLIC").setMultipleInstances(!0)),Za(UP,jP,""),Za(UP,jP,"esm2020")}zz();const Hz={apiKey:"AIzaSyD_jwiALUoQcZIOkfhgvJ1MTUsD4mQD8cU",authDomain:`studomate1.firebaseapp.com
`,projectId:"studomate1",storageBucket:"studomate1.firebasestorage.app",messagingSenderId:"819063499606",appId:"1:819063499606:web:79b8457a7333050e0404f7"},mS=iD(Hz),gS=ZU(mS),Yt=d$(mS),Rl=Uz(mS),$P=s=>{let e;const t=new Set,n=(h,f)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const w=e;e=f??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(A=>A(e,w))}},r=()=>e,u={setState:n,getState:r,getInitialState:()=>d,subscribe:h=>(t.add(h),()=>t.delete(h))},d=e=s(n,r,u);return u},Wz=(s=>s?$P(s):$P),Gz=s=>s;function qz(s,e=Gz){const t=Hv.useSyncExternalStore(s.subscribe,Hv.useCallback(()=>e(s.getState()),[s,e]),Hv.useCallback(()=>e(s.getInitialState()),[s,e]));return Hv.useDebugValue(t),t}const zP=s=>{const e=Wz(s),t=n=>qz(e,n);return Object.assign(t,e),t},Kz=(s=>s?zP(s):zP),E0=Kz(s=>({user:null,adminProfile:null,loading:!0,setUser:e=>s({user:e}),setAdminProfile:e=>s({adminProfile:e}),setLoading:e=>s({loading:e}),checkUserRole:async e=>{try{const t=await I$(sa(Yt,"admins",e));t.exists()?s({adminProfile:t.data()}):s({adminProfile:null})}catch(t){console.error("Error fetching admin profile:",t),t.code==="permission-denied"&&console.error('Check your Firestore Security Rules. You might not have permission to read the "admins" collection.'),s({adminProfile:null})}}})),Qz=()=>{const s=i1(),{setUser:e,setAdminProfile:t}=E0(),n=async()=>{try{await gS.signOut(),e(null),t(null),s("/login")}catch(i){console.error("Error signing out:",i)}},r=[{path:"/dashboard",label:"Dashboard",icon:NB},{path:"/universities",label:"Manage Universities",icon:ZE},{path:"/modules",label:"Modules",icon:hB},{path:"/exams",label:"Exams",icon:jm},{path:"/tests",label:"Tests",icon:SB},{path:"/supplementary-exams",label:"Supp. Exams",icon:CB},{path:"/users",label:"Manage Users",icon:aI},{path:"/analytics",label:"Analytics",icon:HR},{path:"/announcements",label:"Announcements",icon:GR}];return E.jsxs("div",{"trae-inspector-start-line":"47","trae-inspector-start-column":"4","trae-inspector-end-line":"92","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-screen w-64 bg-gradient-to-b from-blue-600 to-blue-800 text-white flex flex-col fixed left-0 top-0 z-10",children:[E.jsxs("div",{"trae-inspector-start-line":"48","trae-inspector-start-column":"6","trae-inspector-end-line":"53","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-6 flex items-center space-x-3",children:[E.jsx("div",{"trae-inspector-start-line":"49","trae-inspector-start-column":"8","trae-inspector-end-line":"51","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white/10 p-2 rounded-lg",children:E.jsx(ZE,{className:"h-8 w-8 text-white"})}),E.jsx("span",{"trae-inspector-start-line":"52","trae-inspector-start-column":"8","trae-inspector-end-line":"52","trae-inspector-end-column":"62","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22StudentMATE%22%2C%22textStartLine%22%3A%2252%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%2252%22%2C%22textEndColumn%22%3A%2255%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xl font-bold",children:"StudentMATE"})]}),E.jsx("nav",{"trae-inspector-start-line":"55","trae-inspector-start-column":"6","trae-inspector-end-line":"72","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:r.map(i=>E.jsxs(jR,{to:i.path,className:({isActive:o})=>`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${o?"bg-white/20 text-white":"text-blue-100 hover:bg-white/10 hover:text-white"}`,children:[E.jsx(i.icon,{className:"h-5 w-5"}),E.jsx("span",{"trae-inspector-start-line":"69","trae-inspector-start-column":"12","trae-inspector-end-line":"69","trae-inspector-end-column":"61","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium",children:i.label})]},i.path))}),E.jsxs("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"6","trae-inspector-end-line":"91","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-t border-blue-500",children:[E.jsxs("div",{"trae-inspector-start-line":"75","trae-inspector-start-column":"8","trae-inspector-end-line":"83","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-900/50 rounded-lg p-4 mb-4 flex items-center space-x-3",children:[E.jsx("div",{"trae-inspector-start-line":"76","trae-inspector-start-column":"10","trae-inspector-end-line":"78","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center",children:E.jsx(aI,{className:"h-6 w-6 text-white"})}),E.jsxs("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"10","trae-inspector-end-line":"82","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("p",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"80","trae-inspector-end-column":"56","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Admin%22%2C%22textStartLine%22%3A%2280%22%2C%22textStartColumn%22%3A%2247%22%2C%22textEndLine%22%3A%2280%22%2C%22textEndColumn%22%3A%2252%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium",children:"Admin"}),E.jsx("p",{"trae-inspector-start-line":"81","trae-inspector-start-column":"12","trae-inspector-end-line":"81","trae-inspector-end-column":"64","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Super%20Admin%22%2C%22textStartLine%22%3A%2281%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%2281%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-blue-200",children:"Super Admin"})]})]}),E.jsxs("button",{"trae-inspector-start-line":"84","trae-inspector-start-column":"8","trae-inspector-end-line":"90","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:n,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-red-500/80 hover:bg-red-600 rounded-lg transition-colors text-sm",children:[E.jsx($B,{className:"h-4 w-4"}),E.jsx("span",{"trae-inspector-start-line":"89","trae-inspector-start-column":"10","trae-inspector-end-line":"89","trae-inspector-end-column":"29","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logout%22%2C%22textStartLine%22%3A%2289%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2289%22%2C%22textEndColumn%22%3A%2222%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Logout"})]})]})]})},Xz=()=>{const{user:s}=E0();return E.jsxs("header",{"trae-inspector-start-line":"9","trae-inspector-start-column":"4","trae-inspector-end-line":"42","trae-inspector-end-column":"13","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white h-16 border-b border-gray-200 flex items-center justify-between px-6 sticky top-0 z-10",children:[E.jsx("div",{"trae-inspector-start-line":"10","trae-inspector-start-column":"6","trae-inspector-end-line":"21","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center flex-1",children:E.jsxs("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"8","trae-inspector-end-line":"20","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative w-96",children:[E.jsx("div",{"trae-inspector-start-line":"12","trae-inspector-start-column":"10","trae-inspector-end-line":"14","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(o1,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{"trae-inspector-start-line":"15","trae-inspector-start-column":"10","trae-inspector-end-line":"19","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-full leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition duration-150 ease-in-out",placeholder:"Search..."})]})}),E.jsxs("div",{"trae-inspector-start-line":"23","trae-inspector-start-column":"6","trae-inspector-end-line":"41","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4",children:[E.jsxs("button",{"trae-inspector-start-line":"24","trae-inspector-start-column":"8","trae-inspector-end-line":"27","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[E.jsx(uB,{className:"h-6 w-6"}),E.jsx("span",{"trae-inspector-start-line":"26","trae-inspector-start-column":"10","trae-inspector-end-line":"26","trae-inspector-end-column":"114","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"})]}),E.jsxs("div",{"trae-inspector-start-line":"29","trae-inspector-start-column":"8","trae-inspector-end-line":"40","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-3 pl-4 border-l border-gray-200",children:[E.jsx("span",{"trae-inspector-start-line":"30","trae-inspector-start-column":"10","trae-inspector-end-line":"32","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-700",children:(s==null?void 0:s.email)||"Admin"}),E.jsx("div",{"trae-inspector-start-line":"33","trae-inspector-start-column":"10","trae-inspector-end-line":"39","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:s!=null&&s.photoURL?E.jsx("img",{"trae-inspector-start-line":"35","trae-inspector-start-column":"14","trae-inspector-end-line":"35","trae-inspector-end-column":"94","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:s.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):E.jsx(KR,{className:"h-5 w-5 text-gray-500"})})]})]})]})},Ea=({children:s})=>E.jsxs("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"4","trae-inspector-end-line":"19","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen bg-gray-50 flex",children:[E.jsx(Qz,{}),E.jsxs("div",{"trae-inspector-start-line":"13","trae-inspector-start-column":"6","trae-inspector-end-line":"18","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 ml-64 flex flex-col",children:[E.jsx(Xz,{}),E.jsx("main",{"trae-inspector-start-line":"15","trae-inspector-start-column":"8","trae-inspector-end-line":"17","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 p-6 overflow-auto",children:s})]})]}),ba=({children:s})=>{const{user:e,loading:t,setUser:n,setLoading:r,checkUserRole:i}=E0();return K.useEffect(()=>{const o=$V(gS,async u=>{n(u),u&&await i(u.uid),r(!1)});return()=>o()},[n,r,i]),t?E.jsx("div",{"trae-inspector-start-line":"24","trae-inspector-start-column":"6","trae-inspector-end-line":"26","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/ProtectedRoute.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen flex items-center justify-center bg-gray-50",children:E.jsx("div",{"trae-inspector-start-line":"25","trae-inspector-start-column":"8","trae-inspector-end-line":"25","trae-inspector-end-column":"105","trae-inspector-file-path":"src/components/ProtectedRoute.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?E.jsx(E.Fragment,{children:s}):E.jsx(YE,{to:"/login",replace:!0})},Yz=()=>{const[s,e]=K.useState(""),[t,n]=K.useState(""),[r,i]=K.useState(""),[o,u]=K.useState(!1),d=i1(),{checkUserRole:h}=E0(),f=async g=>{g.preventDefault(),i(""),u(!0);try{const w=await VV(gS,s,t);await h(w.user.uid),d("/dashboard")}catch(w){i("Failed to login. Please check your credentials."),console.error(w)}finally{u(!1)}};return E.jsxs("div",{"trae-inspector-start-line":"34","trae-inspector-start-column":"4","trae-inspector-end-line":"114","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[E.jsxs("div",{"trae-inspector-start-line":"35","trae-inspector-start-column":"6","trae-inspector-end-line":"47","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"sm:mx-auto sm:w-full sm:max-w-md",children:[E.jsx("div",{"trae-inspector-start-line":"36","trae-inspector-start-column":"8","trae-inspector-end-line":"40","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-center",children:E.jsx("div",{"trae-inspector-start-line":"37","trae-inspector-start-column":"10","trae-inspector-end-line":"39","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-600 p-2 rounded-full",children:E.jsx(IB,{className:"h-10 w-10 text-white"})})}),E.jsx("h2",{"trae-inspector-start-line":"41","trae-inspector-start-column":"8","trae-inspector-end-line":"43","trae-inspector-end-column":"13","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22StudentMATE%20Admin%22%2C%22textStartLine%22%3A%2241%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%2243%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"StudentMATE Admin"}),E.jsx("p",{"trae-inspector-start-line":"44","trae-inspector-start-column":"8","trae-inspector-end-line":"46","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Sign%20in%20to%20access%20the%20control%20panel%22%2C%22textStartLine%22%3A%2244%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%2246%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access the control panel"})]}),E.jsx("div",{"trae-inspector-start-line":"49","trae-inspector-start-column":"6","trae-inspector-end-line":"113","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:E.jsx("div",{"trae-inspector-start-line":"50","trae-inspector-start-column":"8","trae-inspector-end-line":"112","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:E.jsxs("form",{"trae-inspector-start-line":"51","trae-inspector-start-column":"10","trae-inspector-end-line":"111","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",onSubmit:f,children:[E.jsxs("div",{"trae-inspector-start-line":"52","trae-inspector-start-column":"12","trae-inspector-end-line":"72","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"53","trae-inspector-start-column":"14","trae-inspector-end-line":"55","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Email%20address%22%2C%22textStartLine%22%3A%2253%22%2C%22textStartColumn%22%3A%2289%22%2C%22textEndLine%22%3A%2255%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),E.jsxs("div",{"trae-inspector-start-line":"56","trae-inspector-start-column":"14","trae-inspector-end-line":"71","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 relative rounded-md shadow-sm",children:[E.jsx("div",{"trae-inspector-start-line":"57","trae-inspector-start-column":"16","trae-inspector-end-line":"59","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(WR,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{"trae-inspector-start-line":"60","trae-inspector-start-column":"16","trae-inspector-end-line":"70","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:g=>e(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:"admin@studentmate.com"})]})]}),E.jsxs("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"12","trae-inspector-end-line":"94","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"75","trae-inspector-start-column":"14","trae-inspector-end-line":"77","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Password%22%2C%22textStartLine%22%3A%2275%22%2C%22textStartColumn%22%3A%2292%22%2C%22textEndLine%22%3A%2277%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),E.jsxs("div",{"trae-inspector-start-line":"78","trae-inspector-start-column":"14","trae-inspector-end-line":"93","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 relative rounded-md shadow-sm",children:[E.jsx("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"16","trae-inspector-end-line":"81","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(UB,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{"trae-inspector-start-line":"82","trae-inspector-start-column":"16","trae-inspector-end-line":"92","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:g=>n(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:""})]})]}),r&&E.jsx("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"14","trae-inspector-end-line":"99","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-red-600 text-sm text-center",children:r}),E.jsx("div",{"trae-inspector-start-line":"102","trae-inspector-start-column":"12","trae-inspector-end-line":"110","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsx("button",{"trae-inspector-start-line":"103","trae-inspector-start-column":"14","trae-inspector-end-line":"109","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:o,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-75 cursor-not-allowed":""}`,children:o?"Signing in...":"Sign in"})})]})})})]})},Ll="assessments",Jz=async(s,e,t)=>{const n=ea(ds(Yt,Ll),xu("universityId","==",s),xu("moduleId","==",e),xu("type","==",t),Iu("year","desc"));return(await Zh(n)).docs.map(i=>({assessmentId:i.id,...i.data()}))},Zz=async(s=5)=>{const e=ea(ds(Yt,Ll),Iu("createdAt","desc"),vN(s));return(await Zh(e)).docs.map(n=>({assessmentId:n.id,...n.data()}))},eH=async()=>{const s=ds(Yt,Ll),e=await OE(ea(s,xu("type","==","exam"))),t=await OE(ea(s,xu("type","==","test"))),n=await OE(ea(s,xu("type","==","supplementary")));return{exams:e.data().count,tests:t.data().count,supps:n.data().count}},tH=async(s,e,t,n,r,i,o)=>{let u="";if(o){const h=Pl(Rl,`assessments/${s}/${e}/${t}/${Date.now()}_${o.name}`);await Km(h,o),u=await Qm(h)}return(await x0(ds(Yt,Ll),{universityId:s,moduleId:e,type:t,title:n,year:r,pdfUrl:u||null,createdBy:i,createdAt:A0()})).id},nH=async s=>{if(s.pdfUrl)try{const e=Pl(Rl,s.pdfUrl);await Fb(e)}catch(e){console.error("Error deleting file from storage:",e)}await _0(sa(Yt,Ll,s.assessmentId))},rH=async(s,e,t)=>{const n={};if(e){const r=Pl(Rl,`assessments/${s}/memo/${Date.now()}_${e.name}`);await Km(r,e),n.memoUrl=await Qm(r)}t!==void 0&&(n.videoUrl=t),Object.keys(n).length>0&&await P1(sa(Yt,Ll,s),n)},sH=async s=>{const e=ea(ds(Yt,Ll,s,"questions"),Iu("order","asc"));return(await Zh(e)).docs.map(n=>({questionId:n.id,...n.data()}))},HP=async(s,e,t,n,r,i,o,u,d,h,f)=>{let g="";if(r){const A=Pl(Rl,`questions/${s}/${Date.now()}_content_${r.name}`);await Km(A,r),g=await Qm(A)}let w="";if(o){const A=Pl(Rl,`questions/${s}/${Date.now()}_answer_${o.name}`);await Km(A,o),w=await Qm(A)}await x0(ds(Yt,Ll,s,"questions"),{title:e,marks:t,order:n,contentUrl:g||null,content:i||null,answerUrl:w||null,answerText:null,videoUrl:d||null,page:h||null,coordinates:f||null,createdAt:A0()})},iH=async(s,e)=>{if(e.contentUrl)try{const t=Pl(Rl,e.contentUrl);await Fb(t)}catch(t){console.error("Error deleting content image",t)}if(e.answerUrl)try{const t=Pl(Rl,e.answerUrl);await Fb(t)}catch(t){console.error("Error deleting answer image",t)}await _0(sa(Yt,Ll,s,"questions",e.questionId))},D1="universities",l2=async()=>{const s=ea(ds(Yt,D1),Iu("name"));return(await Zh(s)).docs.map(t=>({universityId:t.id,...t.data()}))},aH=async(s,e,t)=>{let n="";if(t){const i=Pl(Rl,`university-logos/${Date.now()}_${t.name}`);await Km(i,t),n=await Qm(i)}return(await x0(ds(Yt,D1),{name:s,code:e,logoUrl:n,createdAt:A0()})).id},oH=async(s,e,t)=>{let n={...e};if(t){const r=Pl(Rl,`university-logos/${Date.now()}_${t.name}`);await Km(r,t),n.logoUrl=await Qm(r)}await P1(sa(Yt,D1,s),n)},lH=async s=>{await _0(sa(Yt,D1,s))},tA=43200,WP=1440,GP=Symbol.for("constructDateFrom");function yS(s,e){return typeof s=="function"?s(e):s&&typeof s=="object"&&GP in s?s[GP](e):s instanceof Date?new s.constructor(e):new Date(e)}function Pu(s,e){return yS(s,s)}let cH={};function uH(){return cH}function qP(s){const e=Pu(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function wS(s,...e){const t=yS.bind(null,s||e.find(n=>typeof n=="object"));return e.map(t)}function EA(s,e){const t=+Pu(s)-+Pu(e);return t<0?-1:t>0?1:t}function dH(s){return yS(s,Date.now())}function hH(s,e,t){const[n,r]=wS(t==null?void 0:t.in,s,e),i=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return i*12+o}function pH(s){return e=>{const n=(s?Math[s]:Math.trunc)(e);return n===0?0:n}}function fH(s,e){return+Pu(s)-+Pu(e)}function mH(s,e){const t=Pu(s);return t.setHours(23,59,59,999),t}function gH(s,e){const t=Pu(s),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function yH(s,e){const t=Pu(s);return+mH(t)==+gH(t)}function wH(s,e,t){const[n,r,i]=wS(t==null?void 0:t.in,s,s,e),o=EA(r,i),u=Math.abs(hH(r,i));if(u<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*u);let d=EA(r,i)===-o;yH(n)&&u===1&&EA(n,i)===1&&(d=!1);const h=o*(u-+d);return h===0?0:h}function vH(s,e,t){const n=fH(s,e)/1e3;return pH(t==null?void 0:t.roundingMethod)(n)}const AH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_H=(s,e,t)=>{let n;const r=AH[s];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function UE(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const xH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},EH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},CH={date:UE({formats:xH,defaultWidth:"full"}),time:UE({formats:EH,defaultWidth:"full"}),dateTime:UE({formats:bH,defaultWidth:"full"})},FH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},SH=(s,e,t,n)=>FH[s];function ag(s){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let r;if(n==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,u=t!=null&&t.width?String(t.width):o;r=s.formattingValues[u]||s.formattingValues[o]}else{const o=s.defaultWidth,u=t!=null&&t.width?String(t.width):s.defaultWidth;r=s.values[u]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(e):e;return r[i]}}const TH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},IH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},PH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},RH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},DH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NH=(s,e)=>{const t=Number(s),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},MH={ordinalNumber:NH,era:ag({values:TH,defaultWidth:"wide"}),quarter:ag({values:kH,defaultWidth:"wide",argumentCallback:s=>s-1}),month:ag({values:IH,defaultWidth:"wide"}),day:ag({values:PH,defaultWidth:"wide"}),dayPeriod:ag({values:RH,defaultWidth:"wide",formattingValues:DH,defaultFormattingWidth:"wide"})};function og(s){return(e,t={})=>{const n=t.width,r=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],i=e.match(r);if(!i)return null;const o=i[0],u=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],d=Array.isArray(u)?OH(u,g=>g.test(o)):LH(u,g=>g.test(o));let h;h=s.valueCallback?s.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(o.length);return{value:h,rest:f}}}function LH(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function OH(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function BH(s){return(e,t={})=>{const n=e.match(s.matchPattern);if(!n)return null;const r=n[0],i=e.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const u=e.slice(r.length);return{value:o,rest:u}}}const VH=/^(\d+)(th|st|nd|rd)?/i,UH=/\d+/i,jH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$H={any:[/^b/i,/^(a|c)/i]},zH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},HH={any:[/1/i,/2/i,/3/i,/4/i]},WH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},GH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},KH={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},QH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},XH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},YH={ordinalNumber:BH({matchPattern:VH,parsePattern:UH,valueCallback:s=>parseInt(s,10)}),era:og({matchPatterns:jH,defaultMatchWidth:"wide",parsePatterns:$H,defaultParseWidth:"any"}),quarter:og({matchPatterns:zH,defaultMatchWidth:"wide",parsePatterns:HH,defaultParseWidth:"any",valueCallback:s=>s+1}),month:og({matchPatterns:WH,defaultMatchWidth:"wide",parsePatterns:GH,defaultParseWidth:"any"}),day:og({matchPatterns:qH,defaultMatchWidth:"wide",parsePatterns:KH,defaultParseWidth:"any"}),dayPeriod:og({matchPatterns:QH,defaultMatchWidth:"any",parsePatterns:XH,defaultParseWidth:"any"})},JH={code:"en-US",formatDistance:_H,formatLong:CH,formatRelative:SH,localize:MH,match:YH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ZH(s,e,t){const n=uH(),r=(t==null?void 0:t.locale)??n.locale??JH,i=2520,o=EA(s,e);if(isNaN(o))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:o}),[d,h]=wS(t==null?void 0:t.in,...o>0?[e,s]:[s,e]),f=vH(h,d),g=(qP(h)-qP(d))/1e3,w=Math.round((f-g)/60);let A;if(w<2)return t!=null&&t.includeSeconds?f<5?r.formatDistance("lessThanXSeconds",5,u):f<10?r.formatDistance("lessThanXSeconds",10,u):f<20?r.formatDistance("lessThanXSeconds",20,u):f<40?r.formatDistance("halfAMinute",0,u):f<60?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",1,u):w===0?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",w,u);if(w<45)return r.formatDistance("xMinutes",w,u);if(w<90)return r.formatDistance("aboutXHours",1,u);if(w<WP){const F=Math.round(w/60);return r.formatDistance("aboutXHours",F,u)}else{if(w<i)return r.formatDistance("xDays",1,u);if(w<tA){const F=Math.round(w/WP);return r.formatDistance("xDays",F,u)}else if(w<tA*2)return A=Math.round(w/tA),r.formatDistance("aboutXMonths",A,u)}if(A=wH(h,d),A<12){const F=Math.round(w/tA);return r.formatDistance("xMonths",F,u)}else{const F=A%12,C=Math.trunc(A/12);return F<3?r.formatDistance("aboutXYears",C,u):F<9?r.formatDistance("overXYears",C,u):r.formatDistance("almostXYears",C+1,u)}}function eW(s,e){return ZH(s,dH(s),e)}const jE=({title:s,value:e,icon:t,color:n})=>E.jsxs("div",{"trae-inspector-start-line":"16","trae-inspector-start-column":"2","trae-inspector-end-line":"24","trae-inspector-end-column":"8","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-6 flex items-center space-x-4",children:[E.jsx("div",{"trae-inspector-start-line":"17","trae-inspector-start-column":"4","trae-inspector-end-line":"19","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`p-4 rounded-lg ${n}`,children:E.jsx(t,{className:"h-6 w-6 text-white"})}),E.jsxs("div",{"trae-inspector-start-line":"20","trae-inspector-start-column":"4","trae-inspector-end-line":"23","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("h3",{"trae-inspector-start-line":"21","trae-inspector-start-column":"6","trae-inspector-end-line":"21","trae-inspector-end-column":"67","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:e}),E.jsx("p",{"trae-inspector-start-line":"22","trae-inspector-start-column":"6","trae-inspector-end-line":"22","trae-inspector-end-column":"54","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500",children:s})]})]}),tW=()=>{const[s,e]=K.useState([]),[t,n]=K.useState({exams:0,tests:0,supps:0}),[r,i]=K.useState([]),[o,u]=K.useState(!0);return K.useEffect(()=>{(async()=>{try{const[h,f,g]=await Promise.all([Zz(),eH(),l2()]);e(h),n(f),i(g)}catch(h){console.error("Error loading dashboard data:",h)}finally{u(!1)}})()},[]),E.jsxs("div",{"trae-inspector-start-line":"54","trae-inspector-start-column":"4","trae-inspector-end-line":"161","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[E.jsxs("div",{"trae-inspector-start-line":"55","trae-inspector-start-column":"6","trae-inspector-end-line":"70","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center",children:[E.jsx("h1",{"trae-inspector-start-line":"56","trae-inspector-start-column":"8","trae-inspector-end-line":"56","trae-inspector-end-column":"77","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Admin%20Dashboard%22%2C%22textStartLine%22%3A%2256%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2256%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),E.jsxs("div",{"trae-inspector-start-line":"57","trae-inspector-start-column":"8","trae-inspector-end-line":"69","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-2 bg-white rounded-lg p-1 shadow-sm overflow-x-auto max-w-md",children:[r.slice(0,5).map(d=>E.jsx("button",{"trae-inspector-start-line":"59","trae-inspector-start-column":"12","trae-inspector-end-line":"64","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-4 py-1.5 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 whitespace-nowrap",children:d.code},d.universityId)),E.jsxs(a_,{to:"/universities",className:"px-4 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-md whitespace-nowrap flex items-center",children:["View All ",E.jsx(aB,{className:"ml-1 h-3 w-3"})]})]})]}),E.jsxs("div",{"trae-inspector-start-line":"73","trae-inspector-start-column":"6","trae-inspector-end-line":"92","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[E.jsx(jE,{title:"Total Exams",value:t.exams,icon:fB,color:"bg-blue-500"}),E.jsx(jE,{title:"Total Tests",value:t.tests,icon:jm,color:"bg-orange-500"}),E.jsx(jE,{title:"Supp. Exams",value:t.supps,icon:EB,color:"bg-green-500"})]}),E.jsx("div",{"trae-inspector-start-line":"94","trae-inspector-start-column":"6","trae-inspector-end-line":"160","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:E.jsxs("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"8","trae-inspector-end-line":"159","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"lg:col-span-3 bg-white rounded-xl shadow-sm overflow-hidden",children:[E.jsxs("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"10","trae-inspector-end-line":"102","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[E.jsx("h2",{"trae-inspector-start-line":"98","trae-inspector-start-column":"12","trae-inspector-end-line":"98","trae-inspector-end-column":"71","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Recent%20Uploads%22%2C%22textStartLine%22%3A%2298%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%2298%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-bold text-gray-900",children:"Recent Uploads"}),E.jsx(a_,{to:"/exams",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:"+ Manage Assessments"})]}),E.jsx("div",{"trae-inspector-start-line":"103","trae-inspector-start-column":"10","trae-inspector-end-line":"158","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:E.jsxs("table",{"trae-inspector-start-line":"104","trae-inspector-start-column":"12","trae-inspector-end-line":"157","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[E.jsx("thead",{"trae-inspector-start-line":"105","trae-inspector-start-column":"14","trae-inspector-end-line":"113","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:E.jsxs("tr",{"trae-inspector-start-line":"106","trae-inspector-start-column":"16","trae-inspector-end-line":"112","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("th",{"trae-inspector-start-line":"107","trae-inspector-start-column":"18","trae-inspector-end-line":"107","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Type%22%2C%22textStartLine%22%3A%22107%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Type"}),E.jsx("th",{"trae-inspector-start-line":"108","trae-inspector-start-column":"18","trae-inspector-end-line":"108","trae-inspector-end-column":"54","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22108%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22108%22%2C%22textEndColumn%22%3A%2249%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Title"}),E.jsx("th",{"trae-inspector-start-line":"109","trae-inspector-start-column":"18","trae-inspector-end-line":"109","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22109%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22109%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Year"}),E.jsx("th",{"trae-inspector-start-line":"110","trae-inspector-start-column":"18","trae-inspector-end-line":"110","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Date%22%2C%22textStartLine%22%3A%22110%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22110%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Date"}),E.jsx("th",{"trae-inspector-start-line":"111","trae-inspector-start-column":"18","trae-inspector-end-line":"111","trae-inspector-end-column":"59","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Created%20By%22%2C%22textStartLine%22%3A%22111%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22111%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Created By"})]})}),E.jsx("tbody",{"trae-inspector-start-line":"114","trae-inspector-start-column":"14","trae-inspector-end-line":"156","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:o?E.jsx("tr",{"trae-inspector-start-line":"116","trae-inspector-start-column":"18","trae-inspector-end-line":"118","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsx("td",{"trae-inspector-start-line":"117","trae-inspector-start-column":"20","trae-inspector-end-line":"117","trae-inspector-end-column":"99","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22117%22%2C%22textStartColumn%22%3A%2284%22%2C%22textEndLine%22%3A%22117%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):s.length===0?E.jsx("tr",{"trae-inspector-start-line":"120","trae-inspector-start-column":"18","trae-inspector-end-line":"125","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsxs("td",{"trae-inspector-start-line":"121","trae-inspector-start-column":"20","trae-inspector-end-line":"124","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500 py-10",children:[E.jsx("p",{"trae-inspector-start-line":"122","trae-inspector-start-column":"22","trae-inspector-end-line":"122","trae-inspector-end-column":"92","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20recent%20uploads%22%2C%22textStartLine%22%3A%22122%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22122%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-medium text-gray-900",children:"No recent uploads"}),E.jsx("p",{"trae-inspector-start-line":"123","trae-inspector-start-column":"22","trae-inspector-end-line":"123","trae-inspector-end-column":"118","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Start%20by%20adding%20universities%2C%20modules%2C%20and%20assessments.%22%2C%22textStartLine%22%3A%22123%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22123%22%2C%22textEndColumn%22%3A%22114%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500",children:"Start by adding universities, modules, and assessments."})]})}):s.map(d=>{var h,f;return E.jsxs("tr",{"trae-inspector-start-line":"128","trae-inspector-start-column":"20","trae-inspector-end-line":"153","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50 transition-colors",children:[E.jsx("td",{"trae-inspector-start-line":"129","trae-inspector-start-column":"22","trae-inspector-end-line":"137","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-gray-900 capitalize",children:E.jsx("span",{"trae-inspector-start-line":"130","trae-inspector-start-column":"24","trae-inspector-end-line":"136","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`px-2 py-1 rounded-full text-xs ${d.type==="exam"?"bg-blue-100 text-blue-800":d.type==="test"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:d.type})}),E.jsx("td",{"trae-inspector-start-line":"138","trae-inspector-start-column":"22","trae-inspector-end-line":"140","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:E.jsx("div",{"trae-inspector-start-line":"139","trae-inspector-start-column":"24","trae-inspector-end-line":"139","trae-inspector-end-column":"91","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-bold text-gray-900",children:d.title})}),E.jsx("td",{"trae-inspector-start-line":"141","trae-inspector-start-column":"22","trae-inspector-end-line":"141","trae-inspector-end-column":"86","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:d.year}),E.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:E.jsx("div",{"trae-inspector-start-line":"143","trae-inspector-start-column":"24","trae-inspector-end-line":"145","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-900",children:(h=d.createdAt)!=null&&h.seconds?new Date(d.createdAt.seconds*1e3).toLocaleDateString():"Just now"})}),E.jsxs("td",{"trae-inspector-start-line":"147","trae-inspector-start-column":"22","trae-inspector-end-line":"152","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500 flex items-center space-x-2",children:[E.jsx("span",{"trae-inspector-start-line":"148","trae-inspector-start-column":"24","trae-inspector-end-line":"148","trae-inspector-end-column":"67","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:d.createdBy.split("@")[0]}),E.jsx("span",{"trae-inspector-start-line":"149","trae-inspector-start-column":"24","trae-inspector-end-line":"151","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-400",children:(f=d.createdAt)!=null&&f.seconds?eW(new Date(d.createdAt.seconds*1e3),{addSuffix:!0}):"now"})]})]},d.assessmentId)})})]})})]})})]})},Xm=({isOpen:s,onClose:e,title:t,children:n})=>s?E.jsx("div",{"trae-inspector-start-line":"15","trae-inspector-start-column":"4","trae-inspector-end-line":"40","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-50 overflow-y-auto",children:E.jsxs("div",{"trae-inspector-start-line":"16","trae-inspector-start-column":"6","trae-inspector-end-line":"39","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[E.jsx("div",{"trae-inspector-start-line":"17","trae-inspector-start-column":"8","trae-inspector-end-line":"19","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:E.jsx("div",{"trae-inspector-start-line":"18","trae-inspector-start-column":"10","trae-inspector-end-line":"18","trae-inspector-end-column":"91","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),E.jsx("span",{"trae-inspector-start-line":"21","trae-inspector-start-column":"8","trae-inspector-end-line":"21","trae-inspector-end-column":"110","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%2221%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%2221%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),E.jsx("div",{"trae-inspector-start-line":"23","trae-inspector-start-column":"8","trae-inspector-end-line":"38","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:E.jsxs("div",{"trae-inspector-start-line":"24","trae-inspector-start-column":"10","trae-inspector-end-line":"37","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[E.jsxs("div",{"trae-inspector-start-line":"25","trae-inspector-start-column":"12","trae-inspector-end-line":"35","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-start mb-4",children:[E.jsx("h3",{"trae-inspector-start-line":"26","trae-inspector-start-column":"14","trae-inspector-end-line":"28","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:t}),E.jsx("button",{"trae-inspector-start-line":"29","trae-inspector-start-column":"14","trae-inspector-end-line":"34","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:e,className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none",children:E.jsx(eb,{className:"h-6 w-6"})})]}),n]})})]})}):null,nW=()=>{const[s,e]=K.useState([]),[t,n]=K.useState(!0),[r,i]=K.useState(!1),[o,u]=K.useState(""),[d,h]=K.useState(null),[f,g]=K.useState(""),[w,A]=K.useState(""),[F,C]=K.useState(null),[T,P]=K.useState(!1),O=async()=>{try{const D=await l2();e(D)}catch(D){console.error("Error fetching universities:",D)}finally{n(!1)}};K.useEffect(()=>{O()},[]);const N=D=>{D?(h(D),g(D.name),A(D.code)):(h(null),g(""),A("")),C(null),i(!0)},V=async D=>{D.preventDefault(),P(!0);try{d?await oH(d.universityId,{name:f,code:w},F):await aH(f,w,F),i(!1),O()}catch(R){console.error("Error saving university:",R)}finally{P(!1)}},z=async D=>{if(window.confirm("Are you sure you want to delete this university?"))try{await lH(D),O()}catch(R){console.error("Error deleting university:",R)}},W=s.filter(D=>D.name.toLowerCase().includes(o.toLowerCase())||D.code.toLowerCase().includes(o.toLowerCase()));return E.jsxs("div",{"trae-inspector-start-line":"85","trae-inspector-start-column":"4","trae-inspector-end-line":"214","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsxs("div",{"trae-inspector-start-line":"86","trae-inspector-start-column":"6","trae-inspector-end-line":"95","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[E.jsx("h1",{"trae-inspector-start-line":"87","trae-inspector-start-column":"8","trae-inspector-end-line":"87","trae-inspector-end-column":"81","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Universities%22%2C%22textStartLine%22%3A%2287%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2287%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Manage Universities"}),E.jsxs("button",{"trae-inspector-start-line":"88","trae-inspector-start-column":"8","trae-inspector-end-line":"94","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>N(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[E.jsx(o0,{className:"h-5 w-5"}),E.jsx("span",{"trae-inspector-start-line":"93","trae-inspector-start-column":"10","trae-inspector-end-line":"93","trae-inspector-end-column":"37","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20University%22%2C%22textStartLine%22%3A%2293%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2293%22%2C%22textEndColumn%22%3A%2230%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add University"})]})]}),E.jsxs("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"6","trae-inspector-end-line":"164","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[E.jsx("div",{"trae-inspector-start-line":"98","trae-inspector-start-column":"8","trae-inspector-end-line":"111","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100",children:E.jsxs("div",{"trae-inspector-start-line":"99","trae-inspector-start-column":"10","trae-inspector-end-line":"110","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative max-w-md",children:[E.jsx("div",{"trae-inspector-start-line":"100","trae-inspector-start-column":"12","trae-inspector-end-line":"102","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(o1,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{"trae-inspector-start-line":"103","trae-inspector-start-column":"12","trae-inspector-end-line":"109","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search universities...",value:o,onChange:D=>u(D.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})}),E.jsx("div",{"trae-inspector-start-line":"113","trae-inspector-start-column":"8","trae-inspector-end-line":"163","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:E.jsxs("table",{"trae-inspector-start-line":"114","trae-inspector-start-column":"10","trae-inspector-end-line":"162","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[E.jsx("thead",{"trae-inspector-start-line":"115","trae-inspector-start-column":"12","trae-inspector-end-line":"122","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:E.jsxs("tr",{"trae-inspector-start-line":"116","trae-inspector-start-column":"14","trae-inspector-end-line":"121","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("th",{"trae-inspector-start-line":"117","trae-inspector-start-column":"16","trae-inspector-end-line":"117","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logo%22%2C%22textStartLine%22%3A%22117%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22117%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Logo"}),E.jsx("th",{"trae-inspector-start-line":"118","trae-inspector-start-column":"16","trae-inspector-end-line":"118","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Name%22%2C%22textStartLine%22%3A%22118%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22118%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Name"}),E.jsx("th",{"trae-inspector-start-line":"119","trae-inspector-start-column":"16","trae-inspector-end-line":"119","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Code%22%2C%22textStartLine%22%3A%22119%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22119%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Code"}),E.jsx("th",{"trae-inspector-start-line":"120","trae-inspector-start-column":"16","trae-inspector-end-line":"120","trae-inspector-end-column":"65","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22120%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22120%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),E.jsx("tbody",{"trae-inspector-start-line":"123","trae-inspector-start-column":"12","trae-inspector-end-line":"161","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:t?E.jsx("tr",{"trae-inspector-start-line":"125","trae-inspector-start-column":"16","trae-inspector-end-line":"127","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsx("td",{"trae-inspector-start-line":"126","trae-inspector-start-column":"18","trae-inspector-end-line":"126","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22126%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22126%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):W.length===0?E.jsx("tr",{"trae-inspector-start-line":"129","trae-inspector-start-column":"16","trae-inspector-end-line":"131","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsx("td",{"trae-inspector-start-line":"130","trae-inspector-start-column":"18","trae-inspector-end-line":"130","trae-inspector-end-column":"108","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20universities%20found%22%2C%22textStartLine%22%3A%22130%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22130%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No universities found"})}):W.map(D=>E.jsxs("tr",{"trae-inspector-start-line":"134","trae-inspector-start-column":"18","trae-inspector-end-line":"158","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[E.jsx("td",{"trae-inspector-start-line":"135","trae-inspector-start-column":"20","trae-inspector-end-line":"141","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:D.logoUrl?E.jsx("img",{"trae-inspector-start-line":"137","trae-inspector-start-column":"24","trae-inspector-end-line":"137","trae-inspector-end-column":"109","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:D.logoUrl,alt:D.name,className:"h-10 w-10 object-contain rounded"}):E.jsx("div",{"trae-inspector-start-line":"139","trae-inspector-start-column":"24","trae-inspector-end-line":"139","trae-inspector-end-column":"139","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20Logo%22%2C%22textStartLine%22%3A%22139%22%2C%22textStartColumn%22%3A%22126%22%2C%22textEndLine%22%3A%22139%22%2C%22textEndColumn%22%3A%22133%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 text-xs",children:"No Logo"})}),E.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"20","trae-inspector-end-line":"142","trae-inspector-end-column":"95","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-gray-900",children:D.name}),E.jsx("td",{"trae-inspector-start-line":"143","trae-inspector-start-column":"20","trae-inspector-end-line":"143","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:D.code}),E.jsxs("td",{"trae-inspector-start-line":"144","trae-inspector-start-column":"20","trae-inspector-end-line":"157","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:[E.jsx("button",{"trae-inspector-start-line":"145","trae-inspector-start-column":"22","trae-inspector-end-line":"150","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>N(D),className:"text-blue-600 hover:text-blue-900",children:E.jsx(qR,{className:"h-5 w-5"})}),E.jsx("button",{"trae-inspector-start-line":"151","trae-inspector-start-column":"22","trae-inspector-end-line":"156","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(D.universityId),className:"text-red-600 hover:text-red-900",children:E.jsx(l0,{className:"h-5 w-5"})})]})]},D.universityId))})]})})]}),E.jsx(Xm,{isOpen:r,onClose:()=>i(!1),title:d?"Edit University":"Add University",children:E.jsxs("form",{"trae-inspector-start-line":"171","trae-inspector-start-column":"8","trae-inspector-end-line":"212","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:V,className:"space-y-4",children:[E.jsxs("div",{"trae-inspector-start-line":"172","trae-inspector-start-column":"10","trae-inspector-end-line":"182","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"173","trae-inspector-start-column":"12","trae-inspector-end-line":"173","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%20Name%22%2C%22textStartLine%22%3A%22173%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22173%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"University Name"}),E.jsx("input",{"trae-inspector-start-line":"174","trae-inspector-start-column":"12","trae-inspector-end-line":"181","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:f,onChange:D=>g(D.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"University of Pretoria"})]}),E.jsxs("div",{"trae-inspector-start-line":"183","trae-inspector-start-column":"10","trae-inspector-end-line":"193","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"184","trae-inspector-start-column":"12","trae-inspector-end-line":"184","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%20Code%22%2C%22textStartLine%22%3A%22184%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22184%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"University Code"}),E.jsx("input",{"trae-inspector-start-line":"185","trae-inspector-start-column":"12","trae-inspector-end-line":"192","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:w,onChange:D=>A(D.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"UP"})]}),E.jsxs("div",{"trae-inspector-start-line":"194","trae-inspector-start-column":"10","trae-inspector-end-line":"202","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"195","trae-inspector-start-column":"12","trae-inspector-end-line":"195","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logo%22%2C%22textStartLine%22%3A%22195%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22195%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Logo"}),E.jsx("input",{"trae-inspector-start-line":"196","trae-inspector-start-column":"12","trae-inspector-end-line":"201","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:"image/*",onChange:D=>C(D.target.files?D.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),E.jsx("div",{"trae-inspector-start-line":"203","trae-inspector-start-column":"10","trae-inspector-end-line":"211","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:E.jsx("button",{"trae-inspector-start-line":"204","trae-inspector-start-column":"12","trae-inspector-end-line":"210","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:T,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${T?"opacity-75 cursor-not-allowed":""}`,children:T?"Saving...":"Save"})})]})})]})},N1="modules",ON=async s=>{const e=ea(ds(Yt,N1),xu("universityId","==",s),Iu("code"));return(await Zh(e)).docs.map(n=>({moduleId:n.id,...n.data()}))},rW=async(s,e,t)=>(await x0(ds(Yt,N1),{universityId:s,code:e,name:t,createdAt:A0()})).id,sW=async(s,e)=>{await P1(sa(Yt,N1,s),e)},iW=async s=>{await _0(sa(Yt,N1,s))},aW=()=>{const[s,e]=K.useState([]),[t,n]=K.useState(""),[r,i]=K.useState([]),[o,u]=K.useState(!1),[d,h]=K.useState(!1),[f,g]=K.useState(""),[w,A]=K.useState(null),[F,C]=K.useState(""),[T,P]=K.useState(""),[O,N]=K.useState(!1);K.useEffect(()=>{(async()=>{try{const U=await l2();e(U),U.length>0&&n(U[0].universityId)}catch(U){console.error("Error fetching universities:",U)}})()},[]),K.useEffect(()=>{t&&V(t)},[t]);const V=async L=>{u(!0);try{const U=await ON(L);i(U)}catch(U){console.error("Error fetching modules:",U)}finally{u(!1)}},z=L=>{L?(A(L),C(L.code),P(L.name)):(A(null),C(""),P("")),h(!0)},W=async L=>{if(L.preventDefault(),!!t){N(!0);try{w?await sW(w.moduleId,{code:F,name:T}):await rW(t,F,T),h(!1),V(t)}catch(U){console.error("Error saving module:",U)}finally{N(!1)}}},D=async L=>{if(window.confirm("Are you sure you want to delete this module?"))try{await iW(L),V(t)}catch(U){console.error("Error deleting module:",U)}},R=r.filter(L=>L.name.toLowerCase().includes(f.toLowerCase())||L.code.toLowerCase().includes(f.toLowerCase()));return E.jsxs("div",{"trae-inspector-start-line":"105","trae-inspector-start-column":"4","trae-inspector-end-line":"239","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsxs("div",{"trae-inspector-start-line":"106","trae-inspector-start-column":"6","trae-inspector-end-line":"116","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[E.jsx("h1",{"trae-inspector-start-line":"107","trae-inspector-start-column":"8","trae-inspector-end-line":"107","trae-inspector-end-column":"76","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Modules%22%2C%22textStartLine%22%3A%22107%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Manage Modules"}),E.jsxs("button",{"trae-inspector-start-line":"108","trae-inspector-start-column":"8","trae-inspector-end-line":"115","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(),disabled:!t,className:`bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 ${t?"":"opacity-50 cursor-not-allowed"}`,children:[E.jsx(o0,{className:"h-5 w-5"}),E.jsx("span",{"trae-inspector-start-line":"114","trae-inspector-start-column":"10","trae-inspector-end-line":"114","trae-inspector-end-column":"33","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20Module%22%2C%22textStartLine%22%3A%22114%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%22114%22%2C%22textEndColumn%22%3A%2226%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add Module"})]})]}),E.jsx("div",{"trae-inspector-start-line":"118","trae-inspector-start-column":"6","trae-inspector-end-line":"150","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:E.jsxs("div",{"trae-inspector-start-line":"119","trae-inspector-start-column":"8","trae-inspector-end-line":"149","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[E.jsxs("div",{"trae-inspector-start-line":"120","trae-inspector-start-column":"10","trae-inspector-end-line":"133","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[E.jsx("label",{"trae-inspector-start-line":"121","trae-inspector-start-column":"12","trae-inspector-end-line":"121","trae-inspector-end-column":"101","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20University%22%2C%22textStartLine%22%3A%22121%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22121%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select University"}),E.jsx("select",{"trae-inspector-start-line":"122","trae-inspector-start-column":"12","trae-inspector-end-line":"132","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:t,onChange:L=>n(L.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:s.map(L=>E.jsxs("option",{"trae-inspector-start-line":"128","trae-inspector-start-column":"16","trae-inspector-end-line":"130","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:L.universityId,children:[L.name," (",L.code,")"]},L.universityId))})]}),E.jsxs("div",{"trae-inspector-start-line":"134","trae-inspector-start-column":"10","trae-inspector-end-line":"148","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[E.jsx("label",{"trae-inspector-start-line":"135","trae-inspector-start-column":"12","trae-inspector-end-line":"135","trae-inspector-end-column":"98","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Search%20Modules%22%2C%22textStartLine%22%3A%22135%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22135%22%2C%22textEndColumn%22%3A%2290%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Modules"}),E.jsxs("div",{"trae-inspector-start-line":"136","trae-inspector-start-column":"12","trae-inspector-end-line":"147","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative",children:[E.jsx("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"14","trae-inspector-end-line":"139","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(o1,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{"trae-inspector-start-line":"140","trae-inspector-start-column":"14","trae-inspector-end-line":"146","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search by code or name...",value:f,onChange:L=>g(L.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}),E.jsx("div",{"trae-inspector-start-line":"152","trae-inspector-start-column":"6","trae-inspector-end-line":"198","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:E.jsx("div",{"trae-inspector-start-line":"153","trae-inspector-start-column":"8","trae-inspector-end-line":"197","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:E.jsxs("table",{"trae-inspector-start-line":"154","trae-inspector-start-column":"10","trae-inspector-end-line":"196","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[E.jsx("thead",{"trae-inspector-start-line":"155","trae-inspector-start-column":"12","trae-inspector-end-line":"161","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:E.jsxs("tr",{"trae-inspector-start-line":"156","trae-inspector-start-column":"14","trae-inspector-end-line":"160","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("th",{"trae-inspector-start-line":"157","trae-inspector-start-column":"16","trae-inspector-end-line":"157","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Code%22%2C%22textStartLine%22%3A%22157%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22157%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Code"}),E.jsx("th",{"trae-inspector-start-line":"158","trae-inspector-start-column":"16","trae-inspector-end-line":"158","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Name%22%2C%22textStartLine%22%3A%22158%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22158%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Name"}),E.jsx("th",{"trae-inspector-start-line":"159","trae-inspector-start-column":"16","trae-inspector-end-line":"159","trae-inspector-end-column":"65","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22159%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22159%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),E.jsx("tbody",{"trae-inspector-start-line":"162","trae-inspector-start-column":"12","trae-inspector-end-line":"195","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:o?E.jsx("tr",{"trae-inspector-start-line":"164","trae-inspector-start-column":"16","trae-inspector-end-line":"166","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsx("td",{"trae-inspector-start-line":"165","trae-inspector-start-column":"18","trae-inspector-end-line":"165","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22165%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22165%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):R.length===0?E.jsx("tr",{"trae-inspector-start-line":"168","trae-inspector-start-column":"16","trae-inspector-end-line":"172","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsx("td",{"trae-inspector-start-line":"169","trae-inspector-start-column":"18","trae-inspector-end-line":"171","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:t?"No modules found for this university":"Please select a university"})}):R.map(L=>E.jsxs("tr",{"trae-inspector-start-line":"175","trae-inspector-start-column":"18","trae-inspector-end-line":"192","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[E.jsx("td",{"trae-inspector-start-line":"176","trae-inspector-start-column":"20","trae-inspector-end-line":"176","trae-inspector-end-column":"95","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-blue-600",children:L.code}),E.jsx("td",{"trae-inspector-start-line":"177","trae-inspector-start-column":"20","trae-inspector-end-line":"177","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-900",children:L.name}),E.jsxs("td",{"trae-inspector-start-line":"178","trae-inspector-start-column":"20","trae-inspector-end-line":"191","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:[E.jsx("button",{"trae-inspector-start-line":"179","trae-inspector-start-column":"22","trae-inspector-end-line":"184","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(L),className:"text-blue-600 hover:text-blue-900",children:E.jsx(qR,{className:"h-5 w-5"})}),E.jsx("button",{"trae-inspector-start-line":"185","trae-inspector-start-column":"22","trae-inspector-end-line":"190","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>D(L.moduleId),className:"text-red-600 hover:text-red-900",children:E.jsx(l0,{className:"h-5 w-5"})})]})]},L.moduleId))})]})})}),E.jsx(Xm,{isOpen:d,onClose:()=>h(!1),title:w?"Edit Module":"Add Module",children:E.jsxs("form",{"trae-inspector-start-line":"205","trae-inspector-start-column":"8","trae-inspector-end-line":"237","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:W,className:"space-y-4",children:[E.jsxs("div",{"trae-inspector-start-line":"206","trae-inspector-start-column":"10","trae-inspector-end-line":"216","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"207","trae-inspector-start-column":"12","trae-inspector-end-line":"207","trae-inspector-end-column":"90","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Module%20Code%22%2C%22textStartLine%22%3A%22207%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22207%22%2C%22textEndColumn%22%3A%2282%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Module Code"}),E.jsx("input",{"trae-inspector-start-line":"208","trae-inspector-start-column":"12","trae-inspector-end-line":"215","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:F,onChange:L=>C(L.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"SMTH011"})]}),E.jsxs("div",{"trae-inspector-start-line":"217","trae-inspector-start-column":"10","trae-inspector-end-line":"227","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"218","trae-inspector-start-column":"12","trae-inspector-end-line":"218","trae-inspector-end-column":"90","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Module%20Name%22%2C%22textStartLine%22%3A%22218%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22218%22%2C%22textEndColumn%22%3A%2282%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Module Name"}),E.jsx("input",{"trae-inspector-start-line":"219","trae-inspector-start-column":"12","trae-inspector-end-line":"226","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:T,onChange:L=>P(L.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Introduction to Calculus"})]}),E.jsx("div",{"trae-inspector-start-line":"228","trae-inspector-start-column":"10","trae-inspector-end-line":"236","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:E.jsx("button",{"trae-inspector-start-line":"229","trae-inspector-start-column":"12","trae-inspector-end-line":"235","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:O,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${O?"opacity-75 cursor-not-allowed":""}`,children:O?"Saving...":"Save"})})]})})]})},zr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Sb=[.001,0,0,.001,0,0],$E=1.35,$s={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},_c={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},iy="pdfjs_internal_editor_",Xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},lt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},oW={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Tb={TRIANGLES:1,LATTICE:2},On={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},bA={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Sn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Gp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},M1={ERRORS:0,WARNINGS:1,INFOS:5},ay={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},lg={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},lW={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let L1=M1.WARNINGS;function cW(s){Number.isInteger(s)&&(L1=s)}function uW(){return L1}function O1(s){L1>=M1.INFOS&&console.info(`Info: ${s}`)}function We(s){L1>=M1.WARNINGS&&console.warn(`Warning: ${s}`)}function At(s){throw new Error(s)}function vt(s,e){s||At(e)}function dW(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function BN(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"){if(t.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(t.tryConvertEncoding)try{s=yW(s)}catch{}}const n=e?URL.parse(s,e):URL.parse(s);return dW(n)?n:null}function VN(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&BN(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Ge(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const ep=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class KP extends ep{constructor(e,t){super(e,"PasswordException"),this.code=t}}class zE extends ep{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class kb extends ep{constructor(e){super(e,"InvalidPDFException")}}class F_ extends ep{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class hW extends ep{constructor(e){super(e,"FormatError")}}class Ru extends ep{constructor(e){super(e,"AbortException")}}function pW(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&At("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=s.subarray(r,i);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function B1(s){typeof s!="string"&&At("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function fW(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function mW(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function gW(){try{return new Function(""),!0}catch{return!1}}class $n{static get isLittleEndian(){return Ge(this,"isLittleEndian",mW())}static get isEvalSupported(){return Ge(this,"isEvalSupported",gW())}static get isOffscreenCanvasSupported(){return Ge(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ge(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Ge(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Ge(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Ge(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Ge(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const HE=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var El,CA,Ib;class xe{static makeHexColor(e,t,n){return`#${HE[e]}${HE[t]}${HE[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const r=e[n],i=e[n+1];e[n]=r*t[0]+i*t[2]+t[4],e[n+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],i=t[1],o=t[2],u=t[3],d=t[4],h=t[5];for(let f=0;f<6;f+=2){const g=e[n+f],w=e[n+f+1];e[n+f]=g*r+w*o+d,e[n+f+1]=g*i+w*u+h}}static applyInverseTransform(e,t){const n=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){const r=t[0],i=t[1],o=t[2],u=t[3],d=t[4],h=t[5],f=e[0],g=e[1],w=e[2],A=e[3];let F=r*f+d,C=F,T=r*w+d,P=T,O=u*g+h,N=O,V=u*A+h,z=V;if(i!==0||o!==0){const W=i*f,D=i*w,R=o*g,L=o*A;F+=R,P+=R,T+=L,C+=L,O+=W,z+=W,V+=D,N+=D}n[0]=Math.min(n[0],F,T,C,P),n[1]=Math.min(n[1],O,V,N,z),n[2]=Math.max(n[2],F,T,C,P),n[3]=Math.max(n[3],O,V,N,z)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],i=e[2],o=e[3],u=n**2+r**2,d=n*i+r*o,h=i**2+o**2,f=(u+h)/2,g=Math.sqrt(f**2-(u*h-d**2));t[0]=Math.sqrt(f+g||1),t[1]=Math.sqrt(f-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[n,i,r,o]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,n,r,i,o,u,d,h){h[0]=Math.min(h[0],e,u),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,u),h[3]=Math.max(h[3],t,d),I(this,El,Ib).call(this,e,n,i,u,t,r,o,d,3*(-e+3*(n-i)+u),6*(e-2*n+i),3*(n-e),h),I(this,El,Ib).call(this,e,n,i,u,t,r,o,d,3*(-t+3*(r-o)+d),6*(t-2*r+o),3*(r-t),h)}}El=new WeakSet,CA=function(e,t,n,r,i,o,u,d,h,f){if(h<=0||h>=1)return;const g=1-h,w=h*h,A=w*h,F=g*(g*(g*e+3*h*t)+3*w*n)+A*r,C=g*(g*(g*i+3*h*o)+3*w*u)+A*d;f[0]=Math.min(f[0],F),f[1]=Math.min(f[1],C),f[2]=Math.max(f[2],F),f[3]=Math.max(f[3],C)},Ib=function(e,t,n,r,i,o,u,d,h,f,g,w){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&I(this,El,CA).call(this,e,t,n,r,i,o,u,d,-g/f,w);return}const A=f**2-4*g*h;if(A<0)return;const F=Math.sqrt(A),C=2*h;I(this,El,CA).call(this,e,t,n,r,i,o,u,d,(-f+F)/C,w),I(this,El,CA).call(this,e,t,n,r,i,o,u,d,(-f-F)/C,w)},S(xe,El);function yW(s){return decodeURIComponent(escape(s))}let WE=null,QP=null;function wW(s){return WE||(WE=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,QP=new Map([["","t"]])),s.replaceAll(WE,(e,t,n)=>t?t.normalize("NFKC"):QP.get(n))}function UN(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),pW(s)}const tf="pdfjs_internal_id_";function vW(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...i]=t;if(!s(n)&&!Number.isInteger(n)||!e(r))return!1;const o=i.length;let u=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;u=!1;break;default:return!1}for(const d of i)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function dr(s,e,t){return Math.min(Math.max(s,e),t)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});class oy{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(i){var d;if(!i)return;let o=null;const u=i.name;if(u==="#text")o=i.value;else if(oy.shouldBuildText(u))(d=i==null?void 0:i.attributes)!=null&&d.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const h of i.children)r(h)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class jN{static setupStorage(e,t,n,r,i){const o=r.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const u of n.children)u.attributes.value===o.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const d=u.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){const{attributes:o}=t,u=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[d,h]of Object.entries(o))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!u||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}u&&i.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var g,w;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:n});const u=i!=="richText",d=e.div;if(d.append(o),e.viewport){const A=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=A}u&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(r.children.length===0){if(r.value){const A=document.createTextNode(r.value);o.append(A),u&&oy.shouldBuildText(r.name)&&h.push(A)}return{textDivs:h}}const f=[[r,-1,o]];for(;f.length>0;){const[A,F,C]=f.at(-1);if(F+1===A.children.length){f.pop();continue}const T=A.children[++f.at(-1)[1]];if(T===null)continue;const{name:P}=T;if(P==="#text"){const N=document.createTextNode(T.value);h.push(N),C.append(N);continue}const O=(g=T==null?void 0:T.attributes)!=null&&g.xmlns?document.createElementNS(T.attributes.xmlns,P):document.createElement(P);if(C.append(O),T.attributes&&this.setAttributes({html:O,element:T,storage:t,intent:i,linkService:n}),((w=T.children)==null?void 0:w.length)>0)f.push([T,-1,O]);else if(T.value){const N=document.createTextNode(T.value);u&&oy.shouldBuildText(P)&&h.push(N),O.append(N)}}for(const A of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Ro="http://www.w3.org/2000/svg",wd=class wd{};ne(wd,"CSS",96),ne(wd,"PDF",72),ne(wd,"PDF_TO_CSS_UNITS",wd.CSS/wd.PDF);let Du=wd;async function b0(s,e="text"){if(vg(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class C0{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=o,n*=t;const d=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,g,w,A;switch(r%=360,r<0&&(r+=360),r){case 180:f=-1,g=0,w=0,A=1;break;case 90:f=0,g=1,w=1,A=0;break;case 270:f=0,g=-1,w=-1,A=0;break;case 0:f=1,g=0,w=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(w=-w,A=-A);let F,C,T,P;f===0?(F=Math.abs(h-e[1])*n+i,C=Math.abs(d-e[0])*n+o,T=(e[3]-e[1])*n,P=(e[2]-e[0])*n):(F=Math.abs(d-e[0])*n+i,C=Math.abs(h-e[1])*n+o,T=(e[2]-e[0])*n,P=(e[3]-e[1])*n),this.transform=[f*n,g*n,w*n,A*n,F-f*n*d-w*n*h,C-g*n*d-A*n*h],this.width=T,this.height=P}get rawDims(){const e=this.viewBox;return Ge(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new C0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const n=[e,t];return xe.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];xe.applyTransform(t,this.transform);const n=[e[2],e[3]];return xe.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return xe.applyInverseTransform(n,this.transform),n}}class vS extends ep{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function V1(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function AS(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function AW(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function _W(s,e="document.pdf"){if(typeof s!="string")return e;if(V1(s))return We('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},i=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(i.test(o))return r(o);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const h of u)if(i.test(h))return r(h);const d=Array.from(n.searchParams.keys()).reverse();for(const h of d)if(i.test(h))return r(h)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return r(d[0])}return e}class XP{constructor(){ne(this,"started",Object.create(null));ne(this,"times",[])}time(e){e in this.started&&We(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||We(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms
`);return e.join("")}}function vg(s,e){const t=e?URL.parse(s,e):URL.parse(s);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Ci(s){s.preventDefault()}function hn(s){s.preventDefault(),s.stopPropagation()}function xW(s){console.log("Deprecated API usage: "+s)}var dy;class S_{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;c(this,dy)||_(this,dy,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,dy).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(o+=f,u+=g):h==="+"&&(o-=f,u-=g),new Date(Date.UTC(n,r,i,o,u,d))}}dy=new WeakMap,S(S_,dy);function EW(s,{scale:e=1,rotation:t=0}){const{width:n,height:r}=s.attributes.style,i=[0,0,parseInt(n),parseInt(r)];return new C0({viewBox:i,userUnit:1,scale:e,rotation:t})}function F0(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(We(`Not a valid color format: "${s}"`),[0,0,0])}function bW(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,F0(n))}e.remove()}function nn(s){const{a:e,b:t,c:n,d:r,e:i,f:o}=s.getTransform();return[e,t,n,r,i,o]}function Ca(s){const{a:e,b:t,c:n,d:r,e:i,f:o}=s.getTransform().invertSelf();return[e,t,n,r,i,o]}function Hh(s,e,t=!1,n=!0){if(e instanceof C0){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=s,u=$n.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,h=`var(--total-scale-factor) * ${i}px`,f=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,g=u?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(o.width=f,o.height=g):(o.width=g,o.height=f)}n&&s.setAttribute("data-main-rotation",e.rotation)}class lo{constructor(){const{pixelRatio:e}=lo;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,i=-1){let o=1/0,u=1/0,d=1/0;n=lo.capPixels(n,i),n>0&&(o=Math.sqrt(n/(e*t))),r!==-1&&(u=r/e,d=r/t);const h=Math.min(o,u,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Pb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class CW{static get isDarkMode(){var e;return Ge(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class FW{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Ge(this,"commentForegroundColor",F0(n))}}function SW(s,e,t,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return s=Math.round(s*n+r),e=Math.round(e*n+r),t=Math.round(t*n+r),[s,e,t]}function YP(s,e){const t=s[0]/255,n=s[1]/255,r=s[2]/255,i=Math.max(t,n,r),o=Math.min(t,n,r),u=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const d=i-o;switch(e[1]=u<.5?d/(i+o):d/(2-i-o),i){case t:e[0]=((n-r)/d+(n<r?6:0))*60;break;case n:e[0]=((r-t)/d+2)*60;break;case r:e[0]=((t-n)/d+4)*60;break}}e[2]=u}function Rb(s,e){const t=s[0],n=s[1],r=s[2],i=(1-Math.abs(2*r-1))*n,o=i*(1-Math.abs(t/60%2-1)),u=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+u,e[1]=o+u,e[2]=u;break;case 1:e[0]=o+u,e[1]=i+u,e[2]=u;break;case 2:e[0]=u,e[1]=i+u,e[2]=o+u;break;case 3:e[0]=u,e[1]=o+u,e[2]=i+u;break;case 4:e[0]=o+u,e[1]=u,e[2]=i+u;break;case 5:case 6:e[0]=i+u,e[1]=u,e[2]=o+u;break}}function JP(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function ZP(s,e,t){Rb(s,t),t.map(JP);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];Rb(e,t),t.map(JP);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const eR=new Map;function TW(s,e){const t=s[0]+s[1]*256+s[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=eR.get(t);if(n)return n;const r=new Float32Array(9),i=r.subarray(0,3),o=r.subarray(3,6);YP(s,o);const u=r.subarray(6,9);YP(e,u);const d=u[2]<.5,h=d?12:4.5;if(o[2]=d?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),ZP(o,u,i)<h){let f,g;d?(f=o[2],g=1):(f=0,g=o[2]);const w=.005;for(;g-f>w;){const A=o[2]=(f+g)/2;d===ZP(o,u,i)<h?f=A:g=A}o[2]=d?g:f}return Rb(o,i),n=xe.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),eR.set(t,n),n}function $N({html:s,dir:e,className:t},n){const r=document.createDocumentFragment();if(typeof s=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=s.split(/(?:\r\n?|\n)/);for(let u=0,d=o.length;u<d;++u){const h=o[u];i.append(document.createTextNode(h)),u<d-1&&i.append(document.createElement("br"))}r.append(i)}else jN.render({xfaHtml:s,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",t),n.append(r)}function zN(s){const e=new Path2D;if(!s)return e;for(let t=0,n=s.length;t<n;)switch(s[t++]){case lg.moveTo:e.moveTo(s[t++],s[t++]);break;case lg.lineTo:e.lineTo(s[t++],s[t++]);break;case lg.curveTo:e.bezierCurveTo(s[t++],s[t++],s[t++],s[t++],s[t++],s[t++]);break;case lg.quadraticCurveTo:e.quadraticCurveTo(s[t++],s[t++],s[t++],s[t++]);break;case lg.closePath:e.closePath();break;default:We(`Unrecognized drawing path operator: ${s[t-1]}`);break}return e}var Oo,Bi,mf,xc,xd,Ym,HN,WN;const ut=class ut{constructor(){S(this,Ym)}get pagesNumber(){return c(ut,xc)}set pagesNumber(e){c(ut,xc)!==e&&(_(ut,xc,e),e===0&&(_(ut,Bi,null),_(ut,Oo,null)))}addListener(e){c(ut,xd).push(e)}removeListener(e){const t=c(ut,xd).indexOf(e);t>=0&&c(ut,xd).splice(t,1)}movePages(e,t,n){I(this,Ym,WN).call(this,!0);const r=c(ut,Bi),i=c(ut,Oo);c(ut,mf).set(i);const o=t.length,u=new Uint32Array(o);let d=0;for(let A=0;A<o;A++){const F=t[A]-1;u[A]=r[F],F<n&&(d+=1)}const h=c(ut,xc);let f=n-d;const g=h-o;f=dr(f,0,g);for(let A=0,F=0;A<h;A++)e.has(A+1)||(r[F++]=r[A]);r.copyWithin(f+o,f,g),r.set(u,f);let w=!1;for(let A=0,F=h;A<F;A++){const C=r[A];w||(w=C!==A+1),i[C-1]=A+1}I(this,Ym,HN).call(this),w||(this.pagesNumber=0)}hasBeenAltered(){return c(ut,Bi)!==null}getPageMappingForSaving(){return{pageIndices:c(ut,Oo)?c(ut,Oo).map(e=>e-1):null}}getPrevPageNumber(e){return c(ut,mf)[c(ut,Bi)[e-1]-1]}getPageNumber(e){var t;return((t=c(ut,Oo))==null?void 0:t[e-1])??e}getPageId(e){var t;return((t=c(ut,Bi))==null?void 0:t[e-1])??e}static get instance(){return Ge(this,"instance",new ut)}getMapping(){return c(ut,Bi).subarray(0,this.pagesNumber)}};Oo=new WeakMap,Bi=new WeakMap,mf=new WeakMap,xc=new WeakMap,xd=new WeakMap,Ym=new WeakSet,HN=function(){for(const e of c(ut,xd))e()},WN=function(e){if(c(ut,Bi))return;const t=c(ut,xc),n=new Uint32Array(3*t),r=_(ut,Bi,n.subarray(0,t)),i=_(ut,Oo,n.subarray(t,2*t));if(e)for(let o=0;o<t;o++)r[o]=i[o]=o+1;_(ut,mf,n.subarray(2*t))},S(ut,Oo,null),S(ut,Bi,null),S(ut,mf,null),S(ut,xc,0),S(ut,xd,[]);let ly=ut;var Ec,bc,ai,oi,hy,Cc,gf,yf,py,V_,GN,gr,qN,KN,qp,Ag;const Mo=class Mo{constructor(e){S(this,gr);S(this,Ec,null);S(this,bc,null);S(this,ai);S(this,oi,null);S(this,hy,null);S(this,Cc,null);S(this,gf,null);S(this,yf,null);_(this,ai,e),c(Mo,py)||_(Mo,py,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=_(this,Ec,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,ai)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Ci,{signal:t}),e.addEventListener("pointerdown",I(Mo,V_,GN),{signal:t}));const n=_(this,oi,document.createElement("div"));n.className="buttons",e.append(n);const r=c(this,ai).toolbarPosition;if(r){const{style:i}=e,o=c(this,ai)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return c(this,Ec)}hide(){var e;c(this,Ec).classList.add("hidden"),(e=c(this,bc))==null||e.hideDropdown()}show(){var e,t;c(this,Ec).classList.remove("hidden"),(e=c(this,hy))==null||e.shown(),(t=c(this,Cc))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=c(this,ai),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",c(Mo,py)[e]),I(this,gr,qp).call(this,n)&&n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,oi).append(n)}async addAltText(e){const t=await e.render();I(this,gr,qp).call(this,t),c(this,oi).append(t,c(this,gr,Ag)),_(this,hy,e)}addComment(e,t=null){if(c(this,Cc))return;const n=e.renderForToolbar();if(!n)return;I(this,gr,qp).call(this,n);const r=_(this,gf,c(this,gr,Ag));t?(c(this,oi).insertBefore(n,t),c(this,oi).insertBefore(r,t)):c(this,oi).append(n,r),_(this,Cc,e),e.toolbar=this}addColorPicker(e){if(c(this,bc))return;_(this,bc,e);const t=e.renderButton();I(this,gr,qp).call(this,t),c(this,oi).append(t,c(this,gr,Ag))}async addEditSignatureButton(e){const t=_(this,yf,await e.renderEditButton(c(this,ai)));I(this,gr,qp).call(this,t),c(this,oi).append(t,c(this,gr,Ag))}removeButton(e){var t,n;switch(e){case"comment":(t=c(this,Cc))==null||t.removeToolbarCommentButton(),_(this,Cc,null),(n=c(this,gf))==null||n.remove(),_(this,gf,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;const r=c(this,oi).querySelector(n);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){c(this,yf)&&(c(this,yf).title=e)}remove(){var e;c(this,Ec).remove(),(e=c(this,bc))==null||e.destroy(),_(this,bc,null)}};Ec=new WeakMap,bc=new WeakMap,ai=new WeakMap,oi=new WeakMap,hy=new WeakMap,Cc=new WeakMap,gf=new WeakMap,yf=new WeakMap,py=new WeakMap,V_=new WeakSet,GN=function(e){e.stopPropagation()},gr=new WeakSet,qN=function(e){c(this,ai)._focusEventsAllowed=!1,hn(e)},KN=function(e){c(this,ai)._focusEventsAllowed=!0,hn(e)},qp=function(e){const t=c(this,ai)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",I(this,gr,qN).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",I(this,gr,KN).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ci,{signal:t}),!0)},Ag=function(){const e=document.createElement("div");return e.className="divider",e},S(Mo,V_),S(Mo,py,null);let Db=Mo;var fy,Ed,Bo,Dl,QN,XN,Nb;class kW{constructor(e){S(this,Dl);S(this,fy,null);S(this,Ed,null);S(this,Bo);_(this,Bo,e)}show(e,t,n){const[r,i]=I(this,Dl,XN).call(this,t,n),{style:o}=c(this,Ed)||_(this,Ed,I(this,Dl,QN).call(this));e.append(c(this,Ed)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Ed).remove()}}fy=new WeakMap,Ed=new WeakMap,Bo=new WeakMap,Dl=new WeakSet,QN=function(){const e=_(this,Ed,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=c(this,Bo)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Ci,{signal:t});const n=_(this,fy,document.createElement("div"));return n.className="buttons",e.append(n),c(this,Bo).hasCommentManager()&&I(this,Dl,Nb).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,Bo).commentSelection("floating_button")}),I(this,Dl,Nb).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,Bo).highlightSelection("floating_button")}),e},XN=function(e,t){let n=0,r=0;for(const i of e){const o=i.y+i.height;if(o<n)continue;const u=i.x+(t?i.width:0);if(o>n){r=u,n=o;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,n]},Nb=function(e,t,n,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const u=c(this,Bo)._signal;u instanceof AbortSignal&&!u.aborted&&(i.addEventListener("contextmenu",Ci,{signal:u}),i.addEventListener("click",r,{signal:u})),c(this,fy).append(i)};function YN(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}var bd,Cd,wf,Fd;const St=class St{static initializeAndAddPointerId(e){(c(St,Cd)||_(St,Cd,new Set)).add(e)}static setPointer(e,t){c(St,bd)||_(St,bd,t),c(St,Fd)??_(St,Fd,e)}static setTimeStamp(e){_(St,wf,e)}static isSamePointerId(e){return c(St,bd)===e}static isSamePointerIdOrRemove(e){var t;return c(St,bd)===e?!0:((t=c(St,Cd))==null||t.delete(e),!1)}static isSamePointerType(e){return c(St,Fd)===e}static isInitializedAndDifferentPointerType(e){return c(St,Fd)!==null&&!St.isSamePointerType(e)}static isSameTimeStamp(e){return c(St,wf)===e}static isUsingMultiplePointers(){var e;return((e=c(St,Cd))==null?void 0:e.size)>=1}static clearPointerType(){_(St,Fd,null)}static clearPointerIds(){_(St,bd,NaN),_(St,Cd,null)}static clearTimeStamp(){_(St,wf,NaN)}};bd=new WeakMap,Cd=new WeakMap,wf=new WeakMap,Fd=new WeakMap,S(St,bd,NaN),S(St,Cd,null),S(St,wf,NaN),S(St,Fd,null);let Cr=St;var U_;class IW{constructor(){S(this,U_,0)}get id(){return`${iy}${Ln(this,U_)._++}`}}U_=new WeakMap;var vf,my,Fr,Af,FA;const kS=class kS{constructor(){S(this,Af);S(this,vf,UN());S(this,my,0);S(this,Fr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ge(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return I(this,Af,FA).call(this,`${t}_${n}_${r}_${i}`,e)}async getFromUrl(e){return I(this,Af,FA).call(this,e,e)}async getFromBlob(e,t){const n=await t;return I(this,Af,FA).call(this,e,n)}async getFromId(e){c(this,Fr)||_(this,Fr,new Map);const t=c(this,Fr).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,Fr)||_(this,Fr,new Map);let n=c(this,Fr).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${c(this,vf)}_${Ln(this,my)._++}`,refCounter:1,isSvg:!1},c(this,Fr).set(e,n),c(this,Fr).set(n.id,n),n}getSvgUrl(e){const t=c(this,Fr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,Fr)||_(this,Fr,new Map);const t=c(this,Fr).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,vf)}_`)}};vf=new WeakMap,my=new WeakMap,Fr=new WeakMap,Af=new WeakSet,FA=async function(e,t){c(this,Fr)||_(this,Fr,new Map);let n=c(this,Fr).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,vf)}_${Ln(this,my)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await b0(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=kS._isSVGFittingCanvas,o=new FileReader,u=new Image,d=new Promise((h,f)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,h()},o.onload=async()=>{const g=n.svgUrl=o.result;u.src=await i?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=o.onerror=f});o.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){We(r),n=null}return c(this,Fr).set(e,n),n&&c(this,Fr).set(n.id,n),n};let Mb=kS;var vn,Fc,gy,en;class PW{constructor(e=128){S(this,vn,[]);S(this,Fc,!1);S(this,gy);S(this,en,-1);_(this,gy,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:u=!1}){if(r&&e(),c(this,Fc))return;const d={cmd:e,undo:t,post:n,type:i};if(c(this,en)===-1){c(this,vn).length>0&&(c(this,vn).length=0),_(this,en,0),c(this,vn).push(d);return}if(o&&c(this,vn)[c(this,en)].type===i){u&&(d.undo=c(this,vn)[c(this,en)].undo),c(this,vn)[c(this,en)]=d;return}const h=c(this,en)+1;h===c(this,gy)?c(this,vn).splice(0,1):(_(this,en,h),h<c(this,vn).length&&c(this,vn).splice(h)),c(this,vn).push(d)}undo(){if(c(this,en)===-1)return;_(this,Fc,!0);const{undo:e,post:t}=c(this,vn)[c(this,en)];e(),t==null||t(),_(this,Fc,!1),_(this,en,c(this,en)-1)}redo(){if(c(this,en)<c(this,vn).length-1){_(this,en,c(this,en)+1),_(this,Fc,!0);const{cmd:e,post:t}=c(this,vn)[c(this,en)];e(),t==null||t(),_(this,Fc,!1)}}hasSomethingToUndo(){return c(this,en)!==-1}hasSomethingToRedo(){return c(this,en)<c(this,vn).length-1}cleanType(e){if(c(this,en)!==-1){for(let t=c(this,en);t>=0;t--)if(c(this,vn)[t].type!==e){c(this,vn).splice(t+1,c(this,en)-t),_(this,en,t);return}c(this,vn).length=0,_(this,en,-1)}}destroy(){_(this,vn,null)}}vn=new WeakMap,Fc=new WeakMap,gy=new WeakMap,en=new WeakMap;var j_,JN;class S0{constructor(e){S(this,j_);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=$n.platform;for(const[n,r,i={}]of e)for(const o of n){const u=o.startsWith("mac+");t&&u?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!u&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(I(this,j_,JN).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:u=null}}=n;u&&!u(e,t)||(r.bind(e,...o,t)(),i||hn(t))}}j_=new WeakSet,JN=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const $_=class $_{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return bW(e),Ge(this,"_colors",e)}convert(e){const t=F0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((i,o)=>i===t[o]))return $_._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?xe.makeHexColor(...t):e}};ne($_,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Lb=$_;var _f,Es,xf,tn,An,Ef,li,bf,ci,Sr,Sc,Tc,Cf,kc,ka,ui,Sd,yy,wy,Ff,vy,Ia,Ic,Sf,Pc,Pa,z_,Rc,Tf,Ay,Dc,Td,kf,Nc,_y,kn,bt,Vo,Mc,Lc,xy,If,Ey,Oc,Ra,Uo,by,Cy,di,we,SA,Ob,ZN,eM,_g,tM,nM,rM,Bb,sM,iM,aM,oM,Br,Do,lM,cM,Vb,uM,xg,Ub;const rf=class rf{constructor(e,t,n,r,i,o,u,d,h,f,g,w,A,F,C,T){S(this,we);S(this,_f,new AbortController);S(this,Es,null);S(this,xf,null);S(this,tn,new Map);S(this,An,new Map);S(this,Ef,null);S(this,li,null);S(this,bf,null);S(this,ci,new PW);S(this,Sr,null);S(this,Sc,null);S(this,Tc,null);S(this,Cf,0);S(this,kc,new Set);S(this,ka,null);S(this,ui,null);S(this,Sd,new Set);ne(this,"_editorUndoBar",null);S(this,yy,!1);S(this,wy,!1);S(this,Ff,!1);S(this,vy,null);S(this,Ia,null);S(this,Ic,null);S(this,Sf,null);S(this,Pc,!1);S(this,Pa,null);S(this,z_,new IW);S(this,Rc,!1);S(this,Tf,!1);S(this,Ay,!1);S(this,Dc,null);S(this,Td,null);S(this,kf,null);S(this,Nc,null);S(this,_y,null);S(this,kn,Xe.NONE);S(this,bt,new Set);S(this,Vo,null);S(this,Mc,null);S(this,Lc,null);S(this,xy,null);S(this,If,null);S(this,Ey,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,Oc,[0,0]);S(this,Ra,null);S(this,Uo,null);S(this,by,null);S(this,Cy,null);S(this,di,null);const P=this._signal=c(this,_f).signal;_(this,Uo,e),_(this,by,t),_(this,Cy,n),_(this,Ef,r),_(this,Sr,i),_(this,Mc,o),_(this,If,d),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:P}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:P}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:P}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:P}),u._on("setpreference",this.onSetPreference.bind(this),{signal:P}),u._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:P}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:P}),window.addEventListener("pointerdown",()=>{_(this,Tf,!0)},{capture:!0,signal:P}),window.addEventListener("pointerup",()=>{_(this,Tf,!1)},{capture:!0,signal:P}),I(this,we,tM).call(this),I(this,we,oM).call(this),I(this,we,Bb).call(this),_(this,li,d.annotationStorage),_(this,vy,d.filterFactory),_(this,Lc,h),_(this,Sf,f||null),_(this,yy,g),_(this,wy,w),_(this,Ff,A),_(this,_y,F||null),this.viewParameters={realScale:Du.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=C||null,this._supportsPinchToZoom=T!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=rf.prototype,t=o=>c(o,Uo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Ge(this,"_keyboardManager",new S0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&c(o,Uo).contains(u)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&c(o,Uo).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,r,i,o,u,d,h;(e=c(this,di))==null||e.resolve(),_(this,di,null),(t=c(this,_f))==null||t.abort(),_(this,_f,null),this._signal=null;for(const f of c(this,An).values())f.destroy();c(this,An).clear(),c(this,tn).clear(),c(this,Sd).clear(),(n=c(this,Nc))==null||n.clear(),_(this,Es,null),c(this,bt).clear(),c(this,ci).destroy(),(r=c(this,Ef))==null||r.destroy(),(i=c(this,Sr))==null||i.destroy(),(o=c(this,Mc))==null||o.destroy(),(u=c(this,Pa))==null||u.hide(),_(this,Pa,null),(d=c(this,kf))==null||d.destroy(),_(this,kf,null),_(this,xf,null),c(this,Ia)&&(clearTimeout(c(this,Ia)),_(this,Ia,null)),c(this,Ra)&&(clearTimeout(c(this,Ra)),_(this,Ra,null)),(h=this._editorUndoBar)==null||h.destroy(),_(this,If,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,_y)}get useNewAltTextFlow(){return c(this,wy)}get useNewAltTextWhenAddingImage(){return c(this,Ff)}get hcmFilter(){return Ge(this,"hcmFilter",c(this,Lc)?c(this,vy).addHCMFilter(c(this,Lc).foreground,c(this,Lc).background):"none")}get direction(){return Ge(this,"direction",getComputedStyle(c(this,Uo)).direction)}get _highlightColors(){return Ge(this,"_highlightColors",c(this,Sf)?new Map(c(this,Sf).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Ge(this,"highlightColors",null);const t=new Map,n=!!c(this,Lc);for(const[r,i]of e){const o=r.endsWith("_HCM");if(n&&o){t.set(r.replace("_HCM",""),i);continue}!n&&!o&&t.set(r,i)}return Ge(this,"highlightColors",t)}get highlightColorNames(){return Ge(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),_(this,Tc,e)}setMainHighlightColorPicker(e){_(this,kf,e)}editAltText(e,t=!1){var n;(n=c(this,Ef))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!c(this,Sr)}editComment(e,t,n,r){var i;(i=c(this,Sr))==null||i.showDialog(this,e,t,n,r)}selectComment(e,t){const n=c(this,An).get(e),r=n==null?void 0:n.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=c(this,Sr))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=c(this,Sr))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=c(this,Sr))==null||t.removeComments([e.uid])}deleteComment(e,t){const n=()=>{e.comment=t},r=()=>{var i;(i=this._editorUndoBar)==null||i.show(n,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:r,undo:n,mustExec:!0})}toggleComment(e,t,n=void 0){var r;(r=c(this,Sr))==null||r.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=c(this,Sr))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=c(this,Sr))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(c(this,An).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await n}getSignature(e){var t;(t=c(this,Mc))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(this,Mc)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":_(this,Ff,t);break}}onPagesEdited({pagesMapper:e}){for(const r of c(this,tn).values())r.updatePageIndex(e.getPrevPageNumber(r.pageIndex+1)-1);const t=c(this,An),n=_(this,An,new Map);for(const[r,i]of t){const o=e.getPrevPageNumber(r+1)-1;if(o===-1){i.destroy();continue}n.set(o,i),i.updatePageIndex(o)}}onPageChanging({pageNumber:e}){_(this,Cf,e-1)}focusMainContainer(){c(this,Uo).focus()}findParent(e,t){for(const n of c(this,An).values()){const{x:r,y:i,width:o,height:u}=n.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+u)return n}return null}disableUserSelect(e=!1){c(this,by).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,Sd).add(e)}removeShouldRescale(e){c(this,Sd).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Du.PDF_TO_CSS_UNITS;for(const n of c(this,Sd))n.onScaleChanging();(t=c(this,Tc))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:u}=n,d=n.toString(),f=I(this,we,SA).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;n.empty();const w=I(this,we,Ob).call(this,f),A=c(this,kn)===Xe.NONE,F=()=>{const C=w==null?void 0:w.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),t&&(C==null||C.editComment())};if(A){this.switchToMode(Xe.HIGHLIGHT,F);return}F()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!c(this,li))return null;const t=`${iy}${e}`,n=c(this,li).getRawValue(t);return n&&c(this,li).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&c(this,li)&&!c(this,li).has(e.id)&&c(this,li).setValue(e.id,e)}a11yAlert(e,t=null){const n=c(this,Cy);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,Pc)&&(_(this,Pc,!1),I(this,we,_g).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,bt))if(t.div.contains(e)){_(this,Td,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,Td))return;const[e,t]=c(this,Td);_(this,Td,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){I(this,we,Bb).call(this),this.setEditingState(!0)}removeEditListeners(){I(this,we,sM).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of c(this,ui))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of c(this,ui))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=c(this,Es))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,bt)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of c(this,ui))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){We(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const d of n){const h=await r.deserialize(d);if(!h)return;i.push(h)}const o=()=>{for(const d of i)I(this,we,Vb).call(this,d);I(this,we,Ub).call(this,i)},u=()=>{for(const d of i)d.remove()};this.addCommands({cmd:o,undo:u,mustExec:!0})}catch(i){We(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,kn)!==Xe.NONE&&!this.isEditorHandlingKeyboard&&rf._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Pc)&&(_(this,Pc,!1),I(this,we,_g).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(I(this,we,nM).call(this),I(this,we,iM).call(this),I(this,we,Br).call(this,{isEditing:c(this,kn)!==Xe.NONE,isEmpty:I(this,we,xg).call(this),hasSomethingToUndo:c(this,ci).hasSomethingToUndo(),hasSomethingToRedo:c(this,ci).hasSomethingToRedo(),hasSelectedEditor:!1})):(I(this,we,rM).call(this),I(this,we,aM).call(this),I(this,we,Br).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,ui)){_(this,ui,e);for(const t of c(this,ui))I(this,we,Do).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,z_).id}get currentLayer(){return c(this,An).get(c(this,Cf))}getLayer(e){return c(this,An).get(e)}get currentPageIndex(){return c(this,Cf)}addLayer(e){c(this,An).set(e.pageIndex,e),c(this,Rc)?e.enable():e.disable()}removeLayer(e){c(this,An).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,i=!1,o=!1){var u,d,h,f,g,w;if(c(this,kn)!==e&&!(c(this,di)&&(await c(this,di).promise,!c(this,di)))){if(_(this,di,Promise.withResolvers()),(u=c(this,Tc))==null||u.commitOrRemove(),c(this,kn)===Xe.POPUP&&((d=c(this,Sr))==null||d.hideSidebar()),(h=c(this,Sr))==null||h.destroyPopup(),_(this,kn,e),e===Xe.NONE){this.setEditingState(!1),I(this,we,cM).call(this);for(const A of c(this,tn).values())A.hideStandaloneCommentButton();(f=this._editorUndoBar)==null||f.hide(),this.toggleComment(null),c(this,di).resolve();return}for(const A of c(this,tn).values())A.addStandaloneCommentButton();e===Xe.SIGNATURE&&await((g=c(this,Mc))==null?void 0:g.loadSignatures()),n&&Cr.clearPointerType(),this.setEditingState(!0),await I(this,we,lM).call(this),this.unselectAll();for(const A of c(this,An).values())A.updateMode(e);if(e===Xe.POPUP){c(this,xf)||_(this,xf,await c(this,If).getAnnotationsByType(new Set(c(this,ui).map(C=>C._editorType))));const A=new Set,F=[];for(const C of c(this,tn).values()){const{annotationElementId:T,hasComment:P,deleted:O}=C;T&&A.add(T),P&&!O&&F.push(C.getData())}for(const C of c(this,xf)){const{id:T,popupRef:P,contentsObj:O}=C;P&&(O!=null&&O.str)&&!A.has(T)&&!c(this,kc).has(T)&&F.push(C)}(w=c(this,Sr))==null||w.showSidebar(F)}if(!t){r&&this.addNewEditorFromKeyboard(),c(this,di).resolve();return}for(const A of c(this,tn).values())A.uid===t?(this.setSelected(A),o?A.editComment():i?A.enterInEditMode():A.focus()):A.unselect();c(this,di).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(this,kn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(c(this,ui)){switch(e){case lt.CREATE:this.currentLayer.addNewEditor(t);return;case lt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,xy)||_(this,xy,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of c(this,bt))n.updateParams(e,t);else for(const n of c(this,ui))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const o of c(this,tn).values())o.editorType===e&&o.show(t);(((i=c(this,xy))==null?void 0:i.get(lt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&I(this,we,Do).call(this,[[lt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,Ay)!==e){_(this,Ay,e);for(const t of c(this,An).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of c(this,tn).values())t.pageIndex===e&&(yield t)}getEditor(e){return c(this,tn).get(e)}addEditor(e){c(this,tn).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(c(this,Ia)&&clearTimeout(c(this,Ia)),_(this,Ia,setTimeout(()=>{this.focusMainContainer(),_(this,Ia,null)},0))),c(this,tn).delete(e.id),e.annotationElementId&&((t=c(this,Nc))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!c(this,kc).has(e.annotationElementId))&&((n=c(this,li))==null||n.remove(e.id))}addDeletedAnnotationElement(e){c(this,kc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,kc).has(e)}removeDeletedAnnotationElement(e){c(this,kc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,Es)!==e&&(_(this,Es,e),e&&I(this,we,Do).call(this,e.propertiesToUpdate))}updateUI(e){c(this,we,uM)===e&&I(this,we,Do).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){I(this,we,Do).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,bt).has(e)){c(this,bt).delete(e),e.unselect(),I(this,we,Br).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,bt).add(e),e.select(),I(this,we,Do).call(this,e.propertiesToUpdate),I(this,we,Br).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=c(this,Tc))==null||t.commitOrRemove();for(const n of c(this,bt))n!==e&&n.unselect();c(this,bt).clear(),c(this,bt).add(e),e.select(),I(this,we,Do).call(this,e.propertiesToUpdate),I(this,we,Br).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,bt).has(e)}get firstSelectedEditor(){return c(this,bt).values().next().value}unselect(e){e.unselect(),c(this,bt).delete(e),I(this,we,Br).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,bt).size!==0}get isEnterHandled(){return c(this,bt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,ci).undo(),I(this,we,Br).call(this,{hasSomethingToUndo:c(this,ci).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:I(this,we,xg).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,ci).redo(),I(this,we,Br).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,ci).hasSomethingToRedo(),isEmpty:I(this,we,xg).call(this)})}addCommands(e){c(this,ci).add(e),I(this,we,Br).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:I(this,we,xg).call(this)})}cleanUndoStack(e){c(this,ci).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,bt)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const u of t)u.remove()},r=()=>{for(const o of t)I(this,we,Vb).call(this,o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=c(this,Es))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,Es)||this.hasSelection}selectAll(){for(const e of c(this,bt))e.commit();I(this,we,Ub).call(this,c(this,tn).values())}unselectAll(){var e;if(!(c(this,Es)&&(c(this,Es).commitOrRemove(),c(this,kn)!==Xe.NONE))&&!((e=c(this,Tc))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,bt))t.unselect();c(this,bt).clear(),I(this,we,Br).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,Oc)[0]+=e,c(this,Oc)[1]+=t;const[r,i]=c(this,Oc),o=[...c(this,bt)],u=1e3;c(this,Ra)&&clearTimeout(c(this,Ra)),_(this,Ra,setTimeout(()=>{_(this,Ra,null),c(this,Oc)[0]=c(this,Oc)[1]=0,this.addCommands({cmd:()=>{for(const d of o)c(this,tn).has(d.id)&&(d.translateInPage(r,i),d.translationDone())},undo:()=>{for(const d of o)c(this,tn).has(d.id)&&(d.translateInPage(-r,-i),d.translationDone())},mustExec:!1})},u));for(const d of o)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),_(this,ka,new Map);for(const e of c(this,bt))c(this,ka).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,ka))return!1;this.disableUserSelect(!1);const e=c(this,ka);_(this,ka,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},u]of e)u.newX=r,u.newY=i,u.newPageIndex=o,t||(t=r!==u.savedX||i!==u.savedY||o!==u.savedPageIndex);if(!t)return!1;const n=(r,i,o,u)=>{if(c(this,tn).has(r.id)){const d=c(this,An).get(u);d?r._setParentAndPosition(d,i,o):(r.pageIndex=u,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:u}]of e)n(r,i,o,u)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:u}]of e)n(r,i,o,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,ka))for(const n of c(this,ka).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,bt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,Es)===e}getActive(){return c(this,Es)}getMode(){return c(this,kn)}isEditingMode(){return c(this,kn)!==Xe.NONE}get imageManager(){return Ge(this,"imageManager",new Mb)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:o}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(h,f,g,w)=>({x:(f-r)/o,y:1-(h+g-n)/i,width:w/o,height:g/i});break;case"180":u=(h,f,g,w)=>({x:1-(h+g-n)/i,y:1-(f+w-r)/o,width:g/i,height:w/o});break;case"270":u=(h,f,g,w)=>({x:1-(f+w-r)/o,y:(h-n)/i,width:w/o,height:g/i});break;default:u=(h,f,g,w)=>({x:(h-n)/i,y:(f-r)/o,width:g/i,height:w/o});break}const d=[];for(let h=0,f=t.rangeCount;h<f;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x:w,y:A,width:F,height:C}of g.getClientRects())F===0||C===0||d.push(u(w,A,F,C))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,bf)||_(this,bf,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,bf))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,bf))==null?void 0:r.get(e.data.id);if(!t)return;const n=c(this,li).getRawValue(t);n&&(c(this,kn)===Xe.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var i;const r=(i=c(this,Nc))==null?void 0:i.get(e);r&&(r.setCanvas(t,n),c(this,Nc).delete(e))}addMissingCanvas(e,t){(c(this,Nc)||_(this,Nc,new Map)).set(e,t)}};_f=new WeakMap,Es=new WeakMap,xf=new WeakMap,tn=new WeakMap,An=new WeakMap,Ef=new WeakMap,li=new WeakMap,bf=new WeakMap,ci=new WeakMap,Sr=new WeakMap,Sc=new WeakMap,Tc=new WeakMap,Cf=new WeakMap,kc=new WeakMap,ka=new WeakMap,ui=new WeakMap,Sd=new WeakMap,yy=new WeakMap,wy=new WeakMap,Ff=new WeakMap,vy=new WeakMap,Ia=new WeakMap,Ic=new WeakMap,Sf=new WeakMap,Pc=new WeakMap,Pa=new WeakMap,z_=new WeakMap,Rc=new WeakMap,Tf=new WeakMap,Ay=new WeakMap,Dc=new WeakMap,Td=new WeakMap,kf=new WeakMap,Nc=new WeakMap,_y=new WeakMap,kn=new WeakMap,bt=new WeakMap,Vo=new WeakMap,Mc=new WeakMap,Lc=new WeakMap,xy=new WeakMap,If=new WeakMap,Ey=new WeakMap,Oc=new WeakMap,Ra=new WeakMap,Uo=new WeakMap,by=new WeakMap,Cy=new WeakMap,di=new WeakMap,we=new WeakSet,SA=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Ob=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of c(this,An).values())if(n.hasTextLayer(e))return n;return null},ZN=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=I(this,we,SA).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(c(this,Pa)||_(this,Pa,new kW(this)),c(this,Pa).show(n,r,this.direction==="ltr"))},eM=function(){var i,o,u;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Vo)&&((i=c(this,Pa))==null||i.hide(),_(this,Vo,null),I(this,we,Br).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Vo))return;const r=I(this,we,SA).call(this,e).closest(".textLayer");if(!r){c(this,Vo)&&((o=c(this,Pa))==null||o.hide(),_(this,Vo,null),I(this,we,Br).call(this,{hasSelectedText:!1}));return}if((u=c(this,Pa))==null||u.hide(),_(this,Vo,t),I(this,we,Br).call(this,{hasSelectedText:!0}),!(c(this,kn)!==Xe.HIGHLIGHT&&c(this,kn)!==Xe.NONE)&&(c(this,kn)===Xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),_(this,Pc,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=c(this,kn)===Xe.HIGHLIGHT?I(this,we,Ob).call(this,r):null;if(d==null||d.toggleDrawing(),c(this,Tf)){const h=new AbortController,f=this.combinedSignal(h),g=w=>{w.type==="pointerup"&&w.button!==0||(h.abort(),d==null||d.toggleDrawing(!0),w.type==="pointerup"&&I(this,we,_g).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("blur",g,{signal:f})}else d==null||d.toggleDrawing(!0),I(this,we,_g).call(this,"main_toolbar")}},_g=function(e=""){c(this,kn)===Xe.HIGHLIGHT?this.highlightSelection(e):c(this,yy)&&I(this,we,ZN).call(this)},tM=function(){document.addEventListener("selectionchange",I(this,we,eM).bind(this),{signal:this._signal})},nM=function(){if(c(this,Ic))return;_(this,Ic,new AbortController);const e=this.combinedSignal(c(this,Ic));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},rM=function(){var e;(e=c(this,Ic))==null||e.abort(),_(this,Ic,null)},Bb=function(){if(c(this,Dc))return;_(this,Dc,new AbortController);const e=this.combinedSignal(c(this,Dc));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},sM=function(){var e;(e=c(this,Dc))==null||e.abort(),_(this,Dc,null)},iM=function(){if(c(this,Sc))return;_(this,Sc,new AbortController);const e=this.combinedSignal(c(this,Sc));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},aM=function(){var e;(e=c(this,Sc))==null||e.abort(),_(this,Sc,null)},oM=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Br=function(e){Object.entries(e).some(([n,r])=>c(this,Ey)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Ey),e)}),c(this,kn)===Xe.HIGHLIGHT&&e.hasSelectedEditor===!1&&I(this,we,Do).call(this,[[lt.HIGHLIGHT_FREE,!0]]))},Do=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},lM=async function(){if(!c(this,Rc)){_(this,Rc,!0);const e=[];for(const t of c(this,An).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,tn).values())t.enable()}},cM=function(){if(this.unselectAll(),c(this,Rc)){_(this,Rc,!1);for(const e of c(this,An).values())e.disable();for(const e of c(this,tn).values())e.disable()}},Vb=function(e){const t=c(this,An).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},uM=function(){let e=null;for(e of c(this,bt));return e},xg=function(){if(c(this,tn).size===0)return!0;if(c(this,tn).size===1)for(const e of c(this,tn).values())return e.isEmpty();return!1},Ub=function(e){for(const t of c(this,bt))t.unselect();c(this,bt).clear();for(const t of e)t.isEmpty()||(c(this,bt).add(t),t.select());I(this,we,Br).call(this,{hasSelectedEditor:this.hasSelection})},ne(rf,"TRANSLATE_SMALL",1),ne(rf,"TRANSLATE_BIG",10);let Wh=rf;var qn,Da,Vi,Pf,Na,bs,Rf,Ma,ts,jo,kd,La,Bc,Yi,Eg,TA;const Vr=class Vr{constructor(e){S(this,Yi);S(this,qn,null);S(this,Da,!1);S(this,Vi,null);S(this,Pf,null);S(this,Na,null);S(this,bs,null);S(this,Rf,!1);S(this,Ma,null);S(this,ts,null);S(this,jo,null);S(this,kd,null);S(this,La,!1);_(this,ts,e),_(this,La,e._uiManager.useNewAltTextFlow),c(Vr,Bc)||_(Vr,Bc,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Vr._l10n??(Vr._l10n=e)}async render(){const e=_(this,Vi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=_(this,Pf,document.createElement("span"));e.append(t),c(this,La)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(Vr,Bc).missing),t.setAttribute("data-l10n-id",c(Vr,Bc)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,ts)._uiManager._signal;e.addEventListener("contextmenu",Ci,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),c(this,ts)._uiManager.editAltText(c(this,ts)),c(this,La)&&c(this,ts)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Yi,Eg)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(_(this,Rf,!0),r(i))},{signal:n}),await I(this,Yi,TA).call(this),e}finish(){c(this,Vi)&&(c(this,Vi).focus({focusVisible:c(this,Rf)}),_(this,Rf,!1))}isEmpty(){return c(this,La)?c(this,qn)===null:!c(this,qn)&&!c(this,Da)}hasData(){return c(this,La)?c(this,qn)!==null||!!c(this,jo):this.isEmpty()}get guessedText(){return c(this,jo)}async setGuessedText(e){c(this,qn)===null&&(_(this,jo,e),_(this,kd,await Vr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),I(this,Yi,TA).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,La)||c(this,qn)){(t=c(this,Ma))==null||t.remove(),_(this,Ma,null);return}if(!c(this,Ma)){const n=_(this,Ma,document.createElement("div"));n.className="noAltTextBadge",c(this,ts).div.append(n)}c(this,Ma).classList.toggle("hidden",!e)}serialize(e){let t=c(this,qn);return!e&&c(this,jo)===t&&(t=c(this,kd)),{altText:t,decorative:c(this,Da),guessedText:c(this,jo),textWithDisclaimer:c(this,kd)}}get data(){return{altText:c(this,qn),decorative:c(this,Da)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:i=!1}){n&&(_(this,jo,n),_(this,kd,r)),!(c(this,qn)===e&&c(this,Da)===t)&&(i||(_(this,qn,e),_(this,Da,t)),I(this,Yi,TA).call(this))}toggle(e=!1){c(this,Vi)&&(!e&&c(this,bs)&&(clearTimeout(c(this,bs)),_(this,bs,null)),c(this,Vi).disabled=!e)}shown(){c(this,ts)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Yi,Eg)}})}destroy(){var e,t;(e=c(this,Vi))==null||e.remove(),_(this,Vi,null),_(this,Pf,null),_(this,Na,null),(t=c(this,Ma))==null||t.remove(),_(this,Ma,null)}};qn=new WeakMap,Da=new WeakMap,Vi=new WeakMap,Pf=new WeakMap,Na=new WeakMap,bs=new WeakMap,Rf=new WeakMap,Ma=new WeakMap,ts=new WeakMap,jo=new WeakMap,kd=new WeakMap,La=new WeakMap,Bc=new WeakMap,Yi=new WeakSet,Eg=function(){return c(this,qn)&&"added"||c(this,qn)===null&&this.guessedText&&"review"||"missing"},TA=async function(){var r,i,o;const e=c(this,Vi);if(!e)return;if(c(this,La)){if(e.classList.toggle("done",!!c(this,qn)),e.setAttribute("data-l10n-id",c(Vr,Bc)[c(this,Yi,Eg)]),(r=c(this,Pf))==null||r.setAttribute("data-l10n-id",c(Vr,Bc)[`${c(this,Yi,Eg)}-label`]),!c(this,qn)){(i=c(this,Na))==null||i.remove();return}}else{if(!c(this,qn)&&!c(this,Da)){e.classList.remove("done"),(o=c(this,Na))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,Na);if(!t){_(this,Na,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,ts).id}`;const u=100,d=c(this,ts)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(c(this,bs)),_(this,bs,null)},{once:!0}),e.addEventListener("mouseenter",()=>{_(this,bs,setTimeout(()=>{_(this,bs,null),c(this,Na).classList.add("show"),c(this,ts)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),e.addEventListener("mouseleave",()=>{var h;c(this,bs)&&(clearTimeout(c(this,bs)),_(this,bs,null)),(h=c(this,Na))==null||h.classList.remove("show")},{signal:d})}c(this,Da)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,qn)),t.parentNode||e.append(t);const n=c(this,ts).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},S(Vr,Bc,null),ne(Vr,"_l10n",null);let T_=Vr;var ar,hi,Id,Bt,Fy,Vc,pi,Uc,jc,Pd,Sy,jb;class nA{constructor(e){S(this,Sy);S(this,ar,null);S(this,hi,null);S(this,Id,!1);S(this,Bt,null);S(this,Fy,null);S(this,Vc,null);S(this,pi,null);S(this,Uc,null);S(this,jc,!1);S(this,Pd,null);_(this,Bt,e)}renderForToolbar(){const e=_(this,hi,document.createElement("button"));return e.className="comment",I(this,Sy,jb).call(this,e,!1)}renderForStandalone(){const e=_(this,ar,document.createElement("button"));e.className="annotationCommentButton";const t=c(this,Bt).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(c(this,Bt)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=c(this,Bt).commentButtonColor;r&&(n.backgroundColor=r)}return I(this,Sy,jb).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=c(this,ar)??c(this,hi))==null||e.focus()},0)}onUpdatedColor(){if(!c(this,ar))return;const e=c(this,Bt).commentButtonColor;e&&(c(this,ar).style.backgroundColor=e),c(this,Bt)._uiManager.updatePopupColor(c(this,Bt))}get commentButtonWidth(){var e;return(((e=c(this,ar))==null?void 0:e.getBoundingClientRect().width)??0)/c(this,Bt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,Pd))return c(this,Pd);if(!c(this,ar))return null;const{x:e,y:t,height:n}=c(this,ar).getBoundingClientRect(),{x:r,y:i,width:o,height:u}=c(this,Bt).parent.boundingClientRect;return[(e-r)/o,(t+n-i)/u]}set commentPopupPositionInLayer(e){_(this,Pd,e)}hasDefaultPopupPosition(){return c(this,Pd)===null}removeStandaloneCommentButton(){var e;(e=c(this,ar))==null||e.remove(),_(this,ar,null)}removeToolbarCommentButton(){var e;(e=c(this,hi))==null||e.remove(),_(this,hi,null)}setCommentButtonStates({selected:e,hasPopup:t}){c(this,ar)&&(c(this,ar).classList.toggle("selected",e),c(this,ar).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,r;if(t)[n,r]=t;else{[n,r]=c(this,Bt).commentButtonPosition;const{width:f,height:g,x:w,y:A}=c(this,Bt);n=w+n*f,r=A+r*g}const i=c(this,Bt).parent.boundingClientRect,{x:o,y:u,width:d,height:h}=i;c(this,Bt)._uiManager.editComment(c(this,Bt),o+n*d,u+r*h,{...e,parentDimensions:i})}finish(){c(this,hi)&&(c(this,hi).focus({focusVisible:c(this,Id)}),_(this,Id,!1))}isDeleted(){return c(this,jc)||c(this,pi)===""}isEmpty(){return c(this,pi)===null}hasBeenEdited(){return this.isDeleted()||c(this,pi)!==c(this,Fy)}serialize(){return this.data}get data(){return{text:c(this,pi),richText:c(this,Vc),date:c(this,Uc),deleted:this.isDeleted()}}set data(e){if(e!==c(this,pi)&&_(this,Vc,null),e===null){_(this,pi,""),_(this,jc,!0);return}_(this,pi,e),_(this,Uc,new Date),_(this,jc,!1)}restoreData({text:e,richText:t,date:n}){_(this,pi,e),_(this,Vc,t),_(this,Uc,n),_(this,jc,!1)}setInitialText(e,t=null){_(this,Fy,e),this.data=e,_(this,Uc,null),_(this,Vc,t)}shown(){}destroy(){var e,t;(e=c(this,hi))==null||e.remove(),_(this,hi,null),(t=c(this,ar))==null||t.remove(),_(this,ar,null),_(this,pi,""),_(this,Vc,null),_(this,Uc,null),_(this,Bt,null),_(this,Id,!1),_(this,jc,!1)}}ar=new WeakMap,hi=new WeakMap,Id=new WeakMap,Bt=new WeakMap,Fy=new WeakMap,Vc=new WeakMap,pi=new WeakMap,Uc=new WeakMap,jc=new WeakMap,Pd=new WeakMap,Sy=new WeakSet,jb=function(e,t){if(!c(this,Bt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[c(this,Bt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=c(this,Bt)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Ci,{signal:n}),t&&(e.addEventListener("focusin",i=>{c(this,Bt)._focusEventsAllowed=!1,hn(i)},{capture:!0,signal:n}),e.addEventListener("focusout",i=>{c(this,Bt)._focusEventsAllowed=!0,hn(i)},{capture:!0,signal:n})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),e===c(this,hi)?this.edit():c(this,Bt).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(_(this,Id,!0),r(i))},{signal:n}),e.addEventListener("pointerenter",()=>{c(this,Bt).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{c(this,Bt).toggleComment(!1,!1)},{signal:n}),e};var Df,Rd,Ty,ky,Iy,Py,Ry,$o,Dd,zo,Nd,Ho,Nu,dM,hM,pM;const IS=class IS{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:u}){S(this,Nu);S(this,Df);S(this,Rd,!1);S(this,Ty,null);S(this,ky);S(this,Iy);S(this,Py);S(this,Ry);S(this,$o,null);S(this,Dd);S(this,zo,null);S(this,Nd);S(this,Ho,null);_(this,Df,e),_(this,Ty,n),_(this,ky,t),_(this,Iy,r),_(this,Py,i),_(this,Ry,o),_(this,Nd,new AbortController),_(this,Dd,AbortSignal.any([u,c(this,Nd).signal])),e.addEventListener("touchstart",I(this,Nu,dM).bind(this),{passive:!1,signal:c(this,Dd)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/lo.pixelRatio}destroy(){var e,t;(e=c(this,Nd))==null||e.abort(),_(this,Nd,null),(t=c(this,$o))==null||t.abort(),_(this,$o,null)}};Df=new WeakMap,Rd=new WeakMap,Ty=new WeakMap,ky=new WeakMap,Iy=new WeakMap,Py=new WeakMap,Ry=new WeakMap,$o=new WeakMap,Dd=new WeakMap,zo=new WeakMap,Nd=new WeakMap,Ho=new WeakMap,Nu=new WeakSet,dM=function(e){var r,i,o;if((r=c(this,ky))!=null&&r.call(this))return;if(e.touches.length===1){if(c(this,$o))return;const u=_(this,$o,new AbortController),d=AbortSignal.any([c(this,Dd),u.signal]),h=c(this,Df),f={capture:!0,signal:d,passive:!1},g=w=>{var A;w.pointerType==="touch"&&((A=c(this,$o))==null||A.abort(),_(this,$o,null))};h.addEventListener("pointerdown",w=>{w.pointerType==="touch"&&(hn(w),g(w))},f),h.addEventListener("pointerup",g,f),h.addEventListener("pointercancel",g,f);return}if(!c(this,Ho)){_(this,Ho,new AbortController);const u=AbortSignal.any([c(this,Dd),c(this,Ho).signal]),d=c(this,Df),h={signal:u,capture:!1,passive:!1};d.addEventListener("touchmove",I(this,Nu,hM).bind(this),h);const f=I(this,Nu,pM).bind(this);d.addEventListener("touchend",f,h),d.addEventListener("touchcancel",f,h),h.capture=!0,d.addEventListener("pointerdown",hn,h),d.addEventListener("pointermove",hn,h),d.addEventListener("pointercancel",hn,h),d.addEventListener("pointerup",hn,h),(i=c(this,Iy))==null||i.call(this)}if(hn(e),e.touches.length!==2||(o=c(this,Ty))!=null&&o.call(this)){_(this,zo,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),_(this,zo,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},hM=function(e){var V;if(!c(this,zo)||e.touches.length!==2)return;hn(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:u}=n,d=c(this,zo),{touch0X:h,touch0Y:f,touch1X:g,touch1Y:w}=d,A=g-h,F=w-f,C=o-r,T=u-i,P=Math.hypot(C,T)||1,O=Math.hypot(A,F)||1;if(!c(this,Rd)&&Math.abs(O-P)<=IS.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=i,d.touch1X=o,d.touch1Y=u,!c(this,Rd)){_(this,Rd,!0);return}const N=[(r+o)/2,(i+u)/2];(V=c(this,Py))==null||V.call(this,N,O,P)},pM=function(e){var t;e.touches.length>=2||(c(this,Ho)&&(c(this,Ho).abort(),_(this,Ho,null),(t=c(this,Ry))==null||t.call(this)),c(this,zo)&&(hn(e),_(this,zo,null),_(this,Rd,!1)))};let k_=IS;var Md,Ui,Kt,Ct,Wo,Nf,$c,Dy,or,Ld,Go,fi,zc,Ny,Od,Cs,My,Bd,qo,Oa,Mf,Lf,mi,Vd,Ly,H_,Ve,$b,Oy,zb,kA,fM,mM,Hb,IA,Wb,gM,yM,wM,Gb,vM,qb,AM,_M,xM,Kb,bg;const Qe=class Qe{constructor(e){S(this,Ve);S(this,Md,null);S(this,Ui,null);S(this,Kt,null);S(this,Ct,null);S(this,Wo,null);S(this,Nf,!1);S(this,$c,null);S(this,Dy,"");S(this,or,null);S(this,Ld,null);S(this,Go,null);S(this,fi,null);S(this,zc,null);S(this,Ny,"");S(this,Od,!1);S(this,Cs,null);S(this,My,!1);S(this,Bd,!1);S(this,qo,!1);S(this,Oa,null);S(this,Mf,0);S(this,Lf,0);S(this,mi,null);S(this,Vd,null);ne(this,"isSelected",!1);ne(this,"_isCopy",!1);ne(this,"_editToolbar",null);ne(this,"_initialOptions",Object.create(null));ne(this,"_initialData",null);ne(this,"_isVisible",!0);ne(this,"_uiManager",null);ne(this,"_focusEventsAllowed",!0);S(this,Ly,!1);S(this,H_,Qe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,o];const[u,d]=this.parentDimensions;this.x=e.x/u,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Qe.prototype._resizeWithKeyboard,t=Wh.TRANSLATE_SMALL,n=Wh.TRANSLATE_BIG;return Ge(this,"_resizerKeyboardManager",new S0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Qe.prototype._stopResizingWithKeyboard]]))}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ge(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new RW({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Qe._l10n??(Qe._l10n=e),Qe._l10nResizer||(Qe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Qe._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Qe._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){At("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Ly)}set _isDraggable(e){var t;_(this,Ly,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,H_)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(I(this,Ve,bg).call(this),(t=c(this,fi))==null||t.remove(),_(this,fi,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Od)?_(this,Od,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,o]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){I(this,Ve,$b).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,Cs)||_(this,Cs,[this.x,this.y,this.width,this.height]),I(this,Ve,$b).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c(this,Cs)||_(this,Cs,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:u}=this;const[d,h]=this.getBaseTranslation();o+=d,u+=h;const{style:f}=n;f.left=`${(100*o).toFixed(2)}%`,f.top=`${(100*u).toFixed(2)}%`,this._onTranslating(o,u),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,Cs)&&(c(this,Cs)[0]!==this.x||c(this,Cs)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Cs)&&(c(this,Cs)[2]!==this.width||c(this,Cs)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Qe,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:i,y:o,width:u,height:d}=this;if(u*=n,d*=r,i*=n,o*=r,this._mustFixPosition)switch(e){case 0:i=dr(i,0,n-u),o=dr(o,0,r-d);break;case 90:i=dr(i,0,n-d),o=dr(o,u,r);break;case 180:i=dr(i,u,n),o=dr(o,d,r);break;case 270:i=dr(i,d,n),o=dr(o,0,r-u);break}this.x=i/=n,this.y=o/=r;const[h,f]=this.getBaseTranslation();i+=h,o+=f,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return I(n=Qe,Oy,zb).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return I(n=Qe,Oy,zb).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,Kt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,Bd))return this._editToolbar;this._editToolbar=new Db(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=c(this,Kt))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,Kt)||(T_.initialize(Qe._l10n),_(this,Kt,new T_(this)),c(this,Md)&&(c(this,Kt).data=c(this,Md),_(this,Md,null))),c(this,Kt)}get altTextData(){var e;return(e=c(this,Kt))==null?void 0:e.data}set altTextData(e){c(this,Kt)&&(c(this,Kt).data=e)}get guessedAltText(){var e;return(e=c(this,Kt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,Kt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,Kt))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,Kt)&&!c(this,Kt).isEmpty()}hasAltTextData(){var e;return((e=c(this,Kt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=c(this,Ct))==null||e.focusButton()}addCommentButton(){return this.canAddComment?c(this,Ct)||_(this,Ct,new nA(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(c(this,Wo)){this._uiManager.isEditingMode()&&c(this,Wo).classList.remove("hidden");return}this.hasComment&&(_(this,Wo,c(this,Ct).renderForStandalone()),this.div.append(c(this,Wo)))}}removeStandaloneCommentButton(){c(this,Ct).removeStandaloneCommentButton(),_(this,Wo,null)}hideStandaloneCommentButton(){var e;(e=c(this,Wo))==null||e.classList.add("hidden")}get comment(){if(!c(this,Ct))return null;const{data:{richText:e,text:t,date:n,deleted:r}}=c(this,Ct);return{text:t,richText:e,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){c(this,Ct)||_(this,Ct,new nA(this)),typeof e=="object"&&e!==null?c(this,Ct).restoreData(e):c(this,Ct).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(c(this,Ct)||_(this,Ct,new nA(this)),c(this,Ct).setInitialText(e,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=c(this,Ct))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=c(this,Ct))==null?void 0:e.isDeleted()}get hasComment(){return!!c(this,Ct)&&!c(this,Ct).isEmpty()&&!c(this,Ct).isDeleted()}async editComment(e){c(this,Ct)||_(this,Ct,new nA(this)),c(this,Ct).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){c(this,Ct).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,u=o+i+1,d=r-100,h=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,h,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){c(this,Ct).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=c(this,Nf)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),I(this,Ve,qb).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),YN(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Vd)||_(this,Vd,new k_({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:I(this,Ve,gM).bind(this),onPinching:I(this,Ve,yM).bind(this),onPinchEnd:I(this,Ve,wM).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=$n.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(_(this,Od,!0),this._isDraggable){I(this,Ve,vM).call(this,e);return}I(this,Ve,Gb).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Oa)&&clearTimeout(c(this,Oa)),_(this,Oa,setTimeout(()=>{var e;_(this,Oa,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[u,d]=this.pageTranslation,h=e/r,f=t/r,g=this.x*i,w=this.y*o,A=this.width*i,F=this.height*o;switch(n){case 0:return[g+h+u,o-w-f-F+d,g+h+A+u,o-w-f+d];case 90:return[g+f+u,o-w+h+d,g+f+F+u,o-w+h+A+d];case 180:return[g-h-A+u,o-w+f+d,g-h+u,o-w+f+F+d];case 270:return[g-f-F+u,o-w-h-A+d,g-f+u,o-w-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,o]=e,u=i-n,d=o-r;switch(this.rotation){case 0:return[n,t-o,u,d];case 90:return[n,t-r,d,u];case 180:return[i,t-r,u,d];case 270:return[i,t-o,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Qe._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=c(this,Ct))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:r,deleted:i,richText:o},uid:u,pageIndex:d,creationDate:h,modificationDate:f}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:h,modificationDate:n||f,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),_(this,Bd,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),_(this,Bd,!1),!0):!1}isInEditMode(){return c(this,Bd)}shouldGetKeyboardEvents(){return c(this,qo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&n>0}rebuild(){I(this,Ve,qb).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,_(r,Md,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[u,d,h,f]=r.getRectInCurrentCoords(e.rect,o);return r.x=u/i,r.y=d/o,r.width=h/i,r.height=f/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,n;if((e=c(this,zc))==null||e.abort(),_(this,zc,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),c(this,Oa)&&(clearTimeout(c(this,Oa)),_(this,Oa,null)),I(this,Ve,bg).call(this),this.removeEditToolbar(),c(this,mi)){for(const r of c(this,mi).values())clearTimeout(r);_(this,mi,null)}this.parent=null,(t=c(this,Vd))==null||t.destroy(),_(this,Vd,null),(n=c(this,fi))==null||n.remove(),_(this,fi,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(I(this,Ve,fM).call(this),c(this,or).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,r,i,o]=this.getPDFRect();return[Qe._round(n+(i-n)*e),Qe._round(r+(o-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,Ct).commentPopupPositionInLayer}set commentPopupPosition(e){c(this,Ct).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return c(this,Ct).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,Ct).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=c(this,Ct))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),_(this,Go,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,or).children;if(!c(this,Ui)){_(this,Ui,Array.from(t));const o=I(this,Ve,AM).bind(this),u=I(this,Ve,_M).bind(this),d=this._uiManager._signal;for(const h of c(this,Ui)){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:d}),h.addEventListener("blur",u,{signal:d}),h.addEventListener("focus",I(this,Ve,xM).bind(this,f),{signal:d}),h.setAttribute("data-l10n-id",Qe._l10nResizer[f])}}const n=c(this,Ui)[0];let r=0;for(const o of t){if(o===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(c(this,Ui).length/4);if(i!==r){if(i<r)for(let u=0;u<r-i;u++)c(this,or).append(c(this,or).firstElementChild);else if(i>r)for(let u=0;u<i-r;u++)c(this,or).firstElementChild.before(c(this,or).lastElementChild);let o=0;for(const u of t){const h=c(this,Ui)[o++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Qe._l10nResizer[h])}}I(this,Ve,Kb).call(this,0),_(this,qo,!0),c(this,or).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,qo)&&I(this,Ve,Wb).call(this,c(this,Ny),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){I(this,Ve,bg).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=c(this,Kt))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,r,i;this.isSelected&&(this.isSelected=!1,(e=c(this,or))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=c(this,Kt))==null||i.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,My)}set isEditing(e){_(this,My,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,mi)||_(this,mi,new Map);const{action:n}=e;let r=c(this,mi).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,mi).delete(n),c(this,mi).size===0&&_(this,mi,null)},Qe._telemetryTimeout),c(this,mi).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),_(this,Nf,!1)}disable(){this.div&&(this.div.tabIndex=-1),_(this,Nf,!0)}updateFakeAnnotationElement(e){if(!c(this,fi)&&!this.deleted){_(this,fi,e.addFakeAnnotation(this));return}if(this.deleted){c(this,fi).remove(),_(this,fi,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,fi).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Md=new WeakMap,Ui=new WeakMap,Kt=new WeakMap,Ct=new WeakMap,Wo=new WeakMap,Nf=new WeakMap,$c=new WeakMap,Dy=new WeakMap,or=new WeakMap,Ld=new WeakMap,Go=new WeakMap,fi=new WeakMap,zc=new WeakMap,Ny=new WeakMap,Od=new WeakMap,Cs=new WeakMap,My=new WeakMap,Bd=new WeakMap,qo=new WeakMap,Oa=new WeakMap,Mf=new WeakMap,Lf=new WeakMap,mi=new WeakMap,Vd=new WeakMap,Ly=new WeakMap,H_=new WeakMap,Ve=new WeakSet,$b=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Oy=new WeakSet,zb=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},kA=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},fM=function(){if(c(this,or))return;_(this,or,document.createElement("div")),c(this,or).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");c(this,or).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",I(this,Ve,mM).bind(this,n),{signal:t}),r.addEventListener("contextmenu",Ci,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,or))},mM=function(e,t){var f;t.preventDefault();const{isMac:n}=$n.platform;if(t.button!==0||t.ctrlKey&&n)return;(f=c(this,Kt))==null||f.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,_(this,Ld,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",I(this,Ve,Wb).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",hn,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ci,{signal:o}),_(this,Go,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{var g;i.abort(),this.parent.togglePointerEvents(!0),(g=c(this,Kt))==null||g.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,I(this,Ve,IA).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},Hb=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},IA=function(){if(!c(this,Go))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=c(this,Go);_(this,Go,null);const i=this.x,o=this.y,u=this.width,d=this.height;i===e&&o===t&&u===n&&d===r||this.addCommands({cmd:I(this,Ve,Hb).bind(this,i,o,u,d),undo:I(this,Ve,Hb).bind(this,e,t,n,r),mustExec:!0})},Wb=function(e,t){const[n,r]=this.parentDimensions,i=this.x,o=this.y,u=this.width,d=this.height,h=Qe.MIN_SIZE/n,f=Qe.MIN_SIZE/r,g=I(this,Ve,kA).call(this,this.rotation),w=(de,me)=>[g[0]*de+g[2]*me,g[1]*de+g[3]*me],A=I(this,Ve,kA).call(this,360-this.rotation),F=(de,me)=>[A[0]*de+A[2]*me,A[1]*de+A[3]*me];let C,T,P=!1,O=!1;switch(e){case"topLeft":P=!0,C=(de,me)=>[0,0],T=(de,me)=>[de,me];break;case"topMiddle":C=(de,me)=>[de/2,0],T=(de,me)=>[de/2,me];break;case"topRight":P=!0,C=(de,me)=>[de,0],T=(de,me)=>[0,me];break;case"middleRight":O=!0,C=(de,me)=>[de,me/2],T=(de,me)=>[0,me/2];break;case"bottomRight":P=!0,C=(de,me)=>[de,me],T=(de,me)=>[0,0];break;case"bottomMiddle":C=(de,me)=>[de/2,me],T=(de,me)=>[de/2,0];break;case"bottomLeft":P=!0,C=(de,me)=>[0,me],T=(de,me)=>[de,0];break;case"middleLeft":O=!0,C=(de,me)=>[0,me/2],T=(de,me)=>[de,me/2];break}const N=C(u,d),V=T(u,d);let z=w(...V);const W=Qe._round(i+z[0]),D=Qe._round(o+z[1]);let R=1,L=1,U,$;if(t.fromKeyboard)({deltaX:U,deltaY:$}=t);else{const{screenX:de,screenY:me}=t,[ie,ve]=c(this,Ld);[U,$]=this.screenToPageTranslation(de-ie,me-ve),c(this,Ld)[0]=de,c(this,Ld)[1]=me}if([U,$]=F(U/n,$/r),P){const de=Math.hypot(u,d);R=L=Math.max(Math.min(Math.hypot(V[0]-N[0]-U,V[1]-N[1]-$)/de,1/u,1/d),h/u,f/d)}else O?R=dr(Math.abs(V[0]-N[0]-U),h,1)/u:L=dr(Math.abs(V[1]-N[1]-$),f,1)/d;const G=Qe._round(u*R),j=Qe._round(d*L);z=w(...T(G,j));const ye=W-z[0],ce=D-z[1];c(this,Cs)||_(this,Cs,[this.x,this.y,this.width,this.height]),this.width=G,this.height=j,this.x=ye,this.y=ce,this.setDims(),this.fixAndSetPosition(),this._onResizing()},gM=function(){var e;_(this,Go,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,Kt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},yM=function(e,t,n){let i=.7*(n/t)+1-.7;if(i===1)return;const o=I(this,Ve,kA).call(this,this.rotation),u=(W,D)=>[o[0]*W+o[2]*D,o[1]*W+o[3]*D],[d,h]=this.parentDimensions,f=this.x,g=this.y,w=this.width,A=this.height,F=Qe.MIN_SIZE/d,C=Qe.MIN_SIZE/h;i=Math.max(Math.min(i,1/w,1/A),F/w,C/A);const T=Qe._round(w*i),P=Qe._round(A*i);if(T===w&&P===A)return;c(this,Cs)||_(this,Cs,[f,g,w,A]);const O=u(w/2,A/2),N=Qe._round(f+O[0]),V=Qe._round(g+O[1]),z=u(T/2,P/2);this.x=N-z[0],this.y=V-z[1],this.width=T,this.height=P,this.setDims(),this.fixAndSetPosition(),this._onResizing()},wM=function(){var e;(e=c(this,Kt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),I(this,Ve,IA).call(this)},Gb=function(e){const{isMac:t}=$n.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},vM=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},u=h=>{r.abort(),_(this,$c,null),_(this,Od,!1),this._uiManager.endDragSession()||I(this,Ve,Gb).call(this,h),n&&this._onStopDragging()};t&&(_(this,Mf,e.clientX),_(this,Lf,e.clientY),_(this,$c,e.pointerId),_(this,Dy,e.pointerType),window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:g,pointerId:w}=h;if(w!==c(this,$c)){hn(h);return}const[A,F]=this.screenToPageTranslation(f-c(this,Mf),g-c(this,Lf));_(this,Mf,f),_(this,Lf,g),this._uiManager.dragSelectedEditors(A,F)},o),window.addEventListener("touchmove",hn,o),window.addEventListener("pointerdown",h=>{h.pointerType===c(this,Dy)&&(c(this,Vd)||h.isPrimary)&&u(h),hn(h)},o));const d=h=>{if(!c(this,$c)||c(this,$c)===h.pointerId){u(h);return}hn(h)};window.addEventListener("pointerup",d,{signal:i}),window.addEventListener("blur",d,{signal:i})},qb=function(){if(c(this,zc)||!this.div)return;_(this,zc,new AbortController);const e=this._uiManager.combinedSignal(c(this,zc));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},AM=function(e){Qe._resizerKeyboardManager.exec(this,e)},_M=function(e){var t;c(this,qo)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,or)&&I(this,Ve,bg).call(this)},xM=function(e){_(this,Ny,c(this,qo)?e:"")},Kb=function(e){if(c(this,Ui))for(const t of c(this,Ui))t.tabIndex=e},bg=function(){_(this,qo,!1),I(this,Ve,Kb).call(this,-1),I(this,Ve,IA).call(this)},S(Qe,Oy),ne(Qe,"_l10n",null),ne(Qe,"_l10nResizer",null),ne(Qe,"_borderLineWidth",-1),ne(Qe,"_colorManager",new Lb),ne(Qe,"_zIndex",1),ne(Qe,"_telemetryTimeout",1e3);let Ut=Qe;class RW extends Ut{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const tR=3285377520,si=4294901760,Fa=65535;class EM{constructor(e){this.h1=e?e&4294967295:tR,this.h2=e?e&4294967295:tR}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let C=0,T=e.length;C<T;C++){const P=e.charCodeAt(C);P<=255?t[n++]=P:(t[n++]=P>>>8,t[n++]=P&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,i=n-r*4,o=new Uint32Array(t.buffer,0,r);let u=0,d=0,h=this.h1,f=this.h2;const g=3432918353,w=461845907,A=g&Fa,F=w&Fa;for(let C=0;C<r;C++)C&1?(u=o[C],u=u*g&si|u*A&Fa,u=u<<15|u>>>17,u=u*w&si|u*F&Fa,h^=u,h=h<<13|h>>>19,h=h*5+3864292196):(d=o[C],d=d*g&si|d*A&Fa,d=d<<15|d>>>17,d=d*w&si|d*F&Fa,f^=d,f=f<<13|f>>>19,f=f*5+3864292196);switch(u=0,i){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*g&si|u*A&Fa,u=u<<15|u>>>17,u=u*w&si|u*F&Fa,r&1?h^=u:f^=u}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&si|e*36045&Fa,t=t*4283543511&si|((t<<16|e>>>16)*2950163797&si)>>>16,e^=t>>>1,e=e*444984403&si|e*60499&Fa,t=t*3301882366&si|((t<<16|e>>>16)*3120437893&si)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Qb=Object.freeze({map:null,hash:"",transfer:void 0});var Ud,jd,Ko,lr,W_,bM;class _S{constructor(){S(this,W_);S(this,Ud,!1);S(this,jd,null);S(this,Ko,null);S(this,lr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=c(this,lr).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return c(this,lr).get(e)}remove(e){const t=c(this,lr).get(e);if(t!==void 0&&(t instanceof Ut&&c(this,Ko).delete(t.annotationElementId),c(this,lr).delete(e),c(this,lr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of c(this,lr).values())if(n instanceof Ut)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=c(this,lr).get(e);let r=!1;if(n!==void 0)for(const[i,o]of Object.entries(t))n[i]!==o&&(r=!0,n[i]=o);else r=!0,c(this,lr).set(e,t);r&&I(this,W_,bM).call(this),t instanceof Ut&&((c(this,Ko)||_(this,Ko,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return c(this,lr).has(e)}get size(){return c(this,lr).size}resetModified(){c(this,Ud)&&(_(this,Ud,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new CM(this)}get serializable(){if(c(this,lr).size===0)return Qb;const e=new Map,t=new EM,n=[],r=Object.create(null);let i=!1;for(const[o,u]of c(this,lr)){const d=u instanceof Ut?u.serialize(!1,r):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(e.set(o,d),t.update(`${o}:${JSON.stringify(d)}`),i||(i=!!d.bitmap))}if(i)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Qb}get editorStats(){let e=null;const t=new Map;let n=0,r=0;for(const i of c(this,lr).values()){if(!(i instanceof Ut)){i.popup&&(i.popup.deleted?r+=1:n+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(n+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:u}=o;t.has(u)||t.set(u,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const d=e[u]||(e[u]=new Map);for(const[h,f]of Object.entries(o)){if(h==="type")continue;let g=d.get(h);g||(g=new Map,d.set(h,g));const w=g.get(f)??0;g.set(f,w+1)}}if((r>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:n}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){_(this,jd,null)}updateEditor(e,t){var r;const n=(r=c(this,Ko))==null?void 0:r.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=c(this,Ko))==null?void 0:t.get(e))||null}get modifiedIds(){if(c(this,jd))return c(this,jd);const e=[];if(c(this,Ko))for(const t of c(this,Ko).values())t.serialize()&&e.push(t.annotationElementId);return _(this,jd,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(this,lr).entries()}}Ud=new WeakMap,jd=new WeakMap,Ko=new WeakMap,lr=new WeakMap,W_=new WeakSet,bM=function(){c(this,Ud)||(_(this,Ud,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var By;class CM extends _S{constructor(t){super();S(this,By);const{map:n,hash:r,transfer:i}=t.serializable,o=structuredClone(n,i?{transfer:i}:null);_(this,By,{map:o,hash:r,transfer:i})}get print(){At("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,By)}get modifiedIds(){return Ge(this,"modifiedIds",{ids:new Set,hash:""})}}By=new WeakMap;var Of;class DW{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){S(this,Of,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Of).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||c(this,Of).has(e.loadedName))){if(vt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,u=new FontFace(r,i,o);this.addNativeFontFace(u);try{await u.load(),c(this,Of).add(r),n==null||n(e)}catch{We(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}At("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw We(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ge(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Ge(this,"isSyncFontLoadingSupported",zr||$n.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(vt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ge(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(V,z){return V.charCodeAt(z)<<24|V.charCodeAt(z+1)<<16|V.charCodeAt(z+2)<<8|V.charCodeAt(z+3)&255}function r(V,z,W,D){const R=V.substring(0,z),L=V.substring(z+W);return R+D+L}let i,o;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let h=0;function f(V,z){if(++h>30){We("Load test font never loaded."),z();return}if(d.font="30px "+V,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(f.bind(null,V,z))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,g.length,g);const F=16,C=1482184792;let T=n(w,F);for(i=0,o=g.length-3;i<o;i+=4)T=T-C+n(g,i)|0;i<g.length&&(T=T-C+n(g+"XXX",i)|0),w=r(w,F,4,fW(T));const P=`url(data:font/opentype;base64,${btoa(w)});`,O=`@font-face {font-family:"${g}";src:${P}}`;this.insertRule(O);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const V of[e.loadedName,g]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=V,N.append(z)}this._document.body.append(N),f(g,()=>{N.remove(),t.complete()})}}Of=new WeakMap;var Tt;class NW{constructor(e,t=null,n,r){S(this,Tt);this.compiledGlyphs=Object.create(null),_(this,Tt,e),this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(o){We(`getPathGenerator - ignoring character: "${o}".`)}const i=zN(r==null?void 0:r.path);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}get black(){return c(this,Tt).black}get bold(){return c(this,Tt).bold}get disableFontFace(){return c(this,Tt).disableFontFace??!1}set disableFontFace(e){Ge(this,"disableFontFace",!!e)}get fontExtraProperties(){return c(this,Tt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,Tt).isInvalidPDFjsFont}get isType3Font(){return c(this,Tt).isType3Font}get italic(){return c(this,Tt).italic}get missingFile(){return c(this,Tt).missingFile}get remeasure(){return c(this,Tt).remeasure}get vertical(){return c(this,Tt).vertical}get ascent(){return c(this,Tt).ascent}get defaultWidth(){return c(this,Tt).defaultWidth}get descent(){return c(this,Tt).descent}get bbox(){return c(this,Tt).bbox}set bbox(e){Ge(this,"bbox",e)}get fontMatrix(){return c(this,Tt).fontMatrix}get fallbackName(){return c(this,Tt).fallbackName}get loadedName(){return c(this,Tt).loadedName}get mimetype(){return c(this,Tt).mimetype}get name(){return c(this,Tt).name}get data(){return c(this,Tt).data}clearData(){c(this,Tt).clearData()}get cssFontInfo(){return c(this,Tt).cssFontInfo}get systemFontInfo(){return c(this,Tt).systemFontInfo}get defaultVMetrics(){return c(this,Tt).defaultVMetrics}}Tt=new WeakMap;var Bf,Vf,Vy,Uf,PA;const sf=class sf{constructor(e){S(this,Uf);S(this,Bf);S(this,Vf);S(this,Vy);_(this,Bf,e),_(this,Vf,new DataView(c(this,Bf))),_(this,Vy,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const h of sf.strings){const f=t.encode(e[h]);n[h]=f,r+=4+f.length}const i=new ArrayBuffer(r),o=new Uint8Array(i),u=new DataView(i);let d=0;for(const h of sf.strings){const f=n[h],g=f.length;u.setUint32(d,g),o.set(f,d+4),d+=4+g}return vt(d===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return I(this,Uf,PA).call(this,0)}get fontWeight(){return I(this,Uf,PA).call(this,1)}get italicAngle(){return I(this,Uf,PA).call(this,2)}};Bf=new WeakMap,Vf=new WeakMap,Vy=new WeakMap,Uf=new WeakSet,PA=function(e){vt(e<sf.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=c(this,Vf).getUint32(t)+4;const n=c(this,Vf).getUint32(t);return c(this,Vy).decode(new Uint8Array(c(this,Bf),t+4,n))},ne(sf,"strings",["fontFamily","fontWeight","italicAngle"]);let I_=sf;var Hc,Ba,$d,zd,Cg;const af=class af{constructor(e){S(this,zd);S(this,Hc);S(this,Ba);S(this,$d);_(this,Hc,e),_(this,Ba,new DataView(c(this,Hc))),_(this,$d,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const w of af.strings){const A=t.encode(e[w]);n[w]=A,r+=4+A.length}r+=4;let i,o,u=1+r;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),u+=4+i.length+4+o.length);const d=new ArrayBuffer(u),h=new Uint8Array(d),f=new DataView(d);let g=0;f.setUint8(g++,e.guessFallback?1:0),f.setUint32(g,0),g+=4,r=0;for(const w of af.strings){const A=n[w],F=A.length;r+=4+F,f.setUint32(g,F),h.set(A,g+4),g+=4+F}return f.setUint32(g-r-4,r),e.style&&(f.setUint32(g,i.length),h.set(i,g+4),g+=4+i.length,f.setUint32(g,o.length),h.set(o,g+4),g+=4+o.length),vt(g<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(g)}get guessFallback(){return c(this,Ba).getUint8(0)!==0}get css(){return I(this,zd,Cg).call(this,0)}get loadedName(){return I(this,zd,Cg).call(this,1)}get baseFontName(){return I(this,zd,Cg).call(this,2)}get src(){return I(this,zd,Cg).call(this,3)}get style(){let e=1;e+=4+c(this,Ba).getUint32(e);const t=c(this,Ba).getUint32(e),n=c(this,$d).decode(new Uint8Array(c(this,Hc),e+4,t));e+=4+t;const r=c(this,Ba).getUint32(e),i=c(this,$d).decode(new Uint8Array(c(this,Hc),e+4,r));return{style:n,weight:i}}};Hc=new WeakMap,Ba=new WeakMap,$d=new WeakMap,zd=new WeakSet,Cg=function(e){vt(e<af.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=c(this,Ba).getUint32(t)+4;const n=c(this,Ba).getUint32(t);return c(this,$d).decode(new Uint8Array(c(this,Hc),t+4,n))},ne(af,"strings",["css","loadedName","baseFontName","src"]);let P_=af;var jf,$f,zf,Hf,Fs,Va,Uy,kt,dn,Li,RA,Fg;const Ye=class Ye{constructor({data:e,extra:t}){S(this,dn);S(this,Va);S(this,Uy);S(this,kt);_(this,Va,e),_(this,Uy,new TextDecoder),_(this,kt,new DataView(c(this,Va))),t&&Object.assign(this,t)}get black(){return I(this,dn,Li).call(this,0)}get bold(){return I(this,dn,Li).call(this,1)}get disableFontFace(){return I(this,dn,Li).call(this,2)}get fontExtraProperties(){return I(this,dn,Li).call(this,3)}get isInvalidPDFjsFont(){return I(this,dn,Li).call(this,4)}get isType3Font(){return I(this,dn,Li).call(this,5)}get italic(){return I(this,dn,Li).call(this,6)}get missingFile(){return I(this,dn,Li).call(this,7)}get remeasure(){return I(this,dn,Li).call(this,8)}get vertical(){return I(this,dn,Li).call(this,9)}get ascent(){return I(this,dn,RA).call(this,0)}get defaultWidth(){return I(this,dn,RA).call(this,1)}get descent(){return I(this,dn,RA).call(this,2)}get bbox(){let e=c(Ye,$f);if(c(this,kt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<4;r++)n.push(c(this,kt).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=c(Ye,zf);if(c(this,kt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<6;r++)n.push(c(this,kt).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=c(Ye,Hf);if(c(this,kt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<3;r++)n.push(c(this,kt).getInt16(e,!0)),e+=2;return n}get fallbackName(){return I(this,dn,Fg).call(this,0)}get loadedName(){return I(this,dn,Fg).call(this,1)}get mimetype(){return I(this,dn,Fg).call(this,2)}get name(){return I(this,dn,Fg).call(this,3)}get data(){let e=c(Ye,Fs);const t=c(this,kt).getUint32(e);e+=4+t;const n=c(this,kt).getUint32(e);e+=4+n;const r=c(this,kt).getUint32(e);e+=4+r;const i=c(this,kt).getUint32(e);if(i!==0)return new Uint8Array(c(this,Va),e+4,i)}clearData(){let e=c(Ye,Fs);const t=c(this,kt).getUint32(e);e+=4+t;const n=c(this,kt).getUint32(e);e+=4+n;const r=c(this,kt).getUint32(e);e+=4+r;const i=c(this,kt).getUint32(e);new Uint8Array(c(this,Va),e+4,i).fill(0),c(this,kt).setUint32(e,0)}get cssFontInfo(){let e=c(Ye,Fs);const t=c(this,kt).getUint32(e);e+=4+t;const n=c(this,kt).getUint32(e);e+=4+n;const r=c(this,kt).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(c(this,Va),e+4,r)),new I_(i.buffer)}get systemFontInfo(){let e=c(Ye,Fs);const t=c(this,kt).getUint32(e);e+=4+t;const n=c(this,kt).getUint32(e);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(c(this,Va),e+4,n)),new P_(r.buffer)}static write(e){const t=e.systemFontInfo?P_.write(e.systemFontInfo):null,n=e.cssFontInfo?I_.write(e.cssFontInfo):null,r=new TextEncoder,i={};let o=0;for(const C of Ye.strings)i[C]=r.encode(e[C]),o+=4+i[C].length;const u=c(Ye,Fs)+4+o+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),d=new ArrayBuffer(u),h=new Uint8Array(d),f=new DataView(d);let g=0;const w=Ye.bools.length;let A=0,F=0;for(let C=0;C<w;C++){const T=e[Ye.bools[C]];A|=(T===void 0?0:T?2:1)<<F,F+=2,(F===8||C===w-1)&&(f.setUint8(g++,A),A=0,F=0)}vt(g===c(Ye,jf),"FontInfo.write: Boolean properties offset mismatch");for(const C of Ye.numbers)f.setFloat64(g,e[C]),g+=8;if(vt(g===c(Ye,$f),"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(g++,4);for(const C of e.bbox)f.setInt16(g,C,!0),g+=2}else f.setUint8(g++,0),g+=8;if(vt(g===c(Ye,zf),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(g++,6);for(const C of e.fontMatrix)f.setFloat64(g,C,!0),g+=8}else f.setUint8(g++,0),g+=48;if(vt(g===c(Ye,Hf),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(g++,1);for(const C of e.defaultVMetrics)f.setInt16(g,C,!0),g+=2}else f.setUint8(g++,0),g+=6;vt(g===c(Ye,Fs),"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(c(Ye,Fs),0),g+=4;for(const C of Ye.strings){const T=i[C],P=T.length;f.setUint32(g,P),h.set(T,g+4),g+=4+P}if(f.setUint32(c(Ye,Fs),g-c(Ye,Fs)-4),!t)f.setUint32(g,0),g+=4;else{const C=t.byteLength;f.setUint32(g,C),vt(g+4+C<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),g+4),g+=4+C}if(!n)f.setUint32(g,0),g+=4;else{const C=n.byteLength;f.setUint32(g,C),vt(g+4+C<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),g+4),g+=4+C}return e.data===void 0?(f.setUint32(g,0),g+=4):(f.setUint32(g,e.data.length),h.set(e.data,g+4),g+=4+e.data.length),vt(g<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(g)}};jf=new WeakMap,$f=new WeakMap,zf=new WeakMap,Hf=new WeakMap,Fs=new WeakMap,Va=new WeakMap,Uy=new WeakMap,kt=new WeakMap,dn=new WeakSet,Li=function(e){vt(e<Ye.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,r=c(this,kt).getUint8(t)>>n&3;return r===0?void 0:r===2},RA=function(e){return vt(e<Ye.numbers.length,"Invalid number index"),c(this,kt).getFloat64(c(Ye,jf)+e*8)},Fg=function(e){vt(e<Ye.strings.length,"Invalid string index");let t=c(Ye,Fs)+4;for(let i=0;i<e;i++)t+=c(this,kt).getUint32(t)+4;const n=c(this,kt).getUint32(t),r=new Uint8Array(n);return r.set(new Uint8Array(c(this,Va),t+4,n)),c(this,Uy).decode(r)},ne(Ye,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),ne(Ye,"numbers",["ascent","defaultWidth","descent"]),ne(Ye,"strings",["fallbackName","loadedName","mimetype","name"]),S(Ye,jf,Math.ceil(Ye.bools.length*2/8)),S(Ye,$f,c(Ye,jf)+Ye.numbers.length*8),S(Ye,zf,c(Ye,$f)+1+8),S(Ye,Hf,c(Ye,zf)+1+48),S(Ye,Fs,c(Ye,Hf)+1+6);let Xb=Ye;var jy,$y,zy,Hy,Wy,Gy,qy,Ky;const Ot=class Ot{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,r=[],i=[],o=[],u=[],d=null,h=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],o=e[3],t===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,d=e[1],r=e[2],i=e[3],u=e[4]||[],n=e[6],h=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const f=Math.floor(r.length/2),g=Math.floor(i.length/3),w=o.length,A=u.length;let F=0;for(const z of u)F+=1,F=Math.ceil(F/4)*4,F+=4+z.coords.length*4,F+=4+z.colors.length*4,z.verticesPerRow!==void 0&&(F+=4);const C=20+f*8+g*3+w*8+(n?16:0)+(h?3:0)+F,T=new ArrayBuffer(C),P=new DataView(T),O=new Uint8Array(T);P.setUint8(c(Ot,jy),t),P.setUint8(c(Ot,$y),n?1:0),P.setUint8(c(Ot,zy),h?1:0),P.setUint8(c(Ot,Hy),d),P.setUint32(c(Ot,Wy),f,!0),P.setUint32(c(Ot,Gy),g,!0),P.setUint32(c(Ot,qy),w,!0),P.setUint32(c(Ot,Ky),A,!0);let N=20;new Float32Array(T,N,f*2).set(r),N+=f*8,O.set(i,N),N+=g*3;for(const[z,W]of o)P.setFloat32(N,z,!0),N+=4,P.setUint32(N,parseInt(W.slice(1),16),!0),N+=4;if(n)for(const z of n)P.setFloat32(N,z,!0),N+=4;h&&(O.set(h,N),N+=3);for(let z=0;z<u.length;z++){const W=u[z];P.setUint8(N,W.type),N+=1,N=Math.ceil(N/4)*4,P.setUint32(N,W.coords.length,!0),N+=4,new Int32Array(T,N,W.coords.length).set(W.coords),N+=W.coords.length*4,P.setUint32(N,W.colors.length,!0),N+=4,new Int32Array(T,N,W.colors.length).set(W.colors),N+=W.colors.length*4,W.verticesPerRow!==void 0&&(P.setUint32(N,W.verticesPerRow,!0),N+=4)}return T}getIR(){const e=this.view,t=this.data[c(Ot,jy)],n=!!this.data[c(Ot,$y)],r=!!this.data[c(Ot,zy)],i=e.getUint32(c(Ot,Wy),!0),o=e.getUint32(c(Ot,Gy),!0),u=e.getUint32(c(Ot,qy),!0),d=e.getUint32(c(Ot,Ky),!0);let h=20;const f=new Float32Array(this.buffer,h,i*2);h+=i*8;const g=new Uint8Array(this.buffer,h,o*3);h+=o*3;const w=[];for(let T=0;T<u;++T){const P=e.getFloat32(h,!0);h+=4;const O=e.getUint32(h,!0);h+=4,w.push([P,`#${O.toString(16).padStart(6,"0")}`])}let A=null;if(n){A=[];for(let T=0;T<4;++T)A.push(e.getFloat32(h,!0)),h+=4}let F=null;r&&(F=new Uint8Array(this.buffer,h,3),h+=3);const C=[];for(let T=0;T<d;++T){const P=e.getUint8(h);h+=1,h=Math.ceil(h/4)*4;const O=e.getUint32(h,!0);h+=4;const N=new Int32Array(this.buffer,h,O);h+=O*4;const V=e.getUint32(h,!0);h+=4;const z=new Int32Array(this.buffer,h,V);h+=V*4;const W={type:P,coords:N,colors:z};P===Tb.LATTICE&&(W.verticesPerRow=e.getUint32(h,!0),h+=4),C.push(W)}if(t===1)return["RadialAxial","axial",A,w,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",A,w,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(t===3){const T=this.data[c(Ot,Hy)];let P=null;if(f.length>0){let O=f[0],N=f[0],V=f[1],z=f[1];for(let W=0;W<f.length;W+=2){const D=f[W],R=f[W+1];O=O>D?D:O,V=V>R?R:V,N=N<D?D:N,z=z<R?R:z}P=[O,V,N,z]}return["Mesh",T,f,g,C,P,A,F]}throw new Error(`Unsupported pattern kind: ${t}`)}};jy=new WeakMap,$y=new WeakMap,zy=new WeakMap,Hy=new WeakMap,Wy=new WeakMap,Gy=new WeakMap,qy=new WeakMap,Ky=new WeakMap,S(Ot,jy,0),S(Ot,$y,1),S(Ot,zy,2),S(Ot,Hy,3),S(Ot,Wy,4),S(Ot,Gy,8),S(Ot,qy,12),S(Ot,Ky,16);let Yb=Ot;var Wf;class MW{constructor(e){S(this,Wf);_(this,Wf,e)}static write(e){let t,n;return $n.isFloat16ArraySupported?(n=new ArrayBuffer(e.length*2),t=new Float16Array(n)):(n=new ArrayBuffer(e.length*4),t=new Float32Array(n)),t.set(e),n}get path(){return $n.isFloat16ArraySupported?new Float16Array(c(this,Wf)):new Float32Array(c(this,Wf))}}Wf=new WeakMap;function LW(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(zr)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function OW(s){if(zr&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return B1(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function rA(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const Jb=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,BW=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",VW=vW.bind(null,Jb,BW);var Qo,G_;class UW{constructor(){S(this,Qo,new Map);S(this,G_,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};c(this,G_).then(()=>{for(const[r]of c(this,Qo))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){We("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}c(this,Qo).set(t,r)}removeEventListener(e,t){const n=c(this,Qo).get(t);n==null||n(),c(this,Qo).delete(t)}terminate(){for(const[,e]of c(this,Qo))e==null||e();c(this,Qo).clear()}}Qo=new WeakMap,G_=new WeakMap;const sA={DATA:1,ERROR:2},Fn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function nR(){}function Zr(s){if(s instanceof Ru||s instanceof kb||s instanceof KP||s instanceof F_||s instanceof zE)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||At('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Ru(s.message);case"InvalidPDFException":return new kb(s.message);case"PasswordException":return new KP(s.message,s.code);case"ResponseException":return new F_(s.message,s.status,s.missing);case"UnknownErrorException":return new zE(s.message,s.details)}return new zE(s.message,s.toString())}var Gf,Ei,FM,SM,TM,DA;class Sg{constructor(e,t,n){S(this,Ei);S(this,Gf,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",I(this,Ei,FM).bind(this),{signal:c(this,Gf).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,o=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:o,targetName:u,action:e,streamId:i,data:t,desiredSize:h.desiredSize},r),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[i].pullCall=f,d.postMessage({sourceName:o,targetName:u,stream:Fn.PULL,streamId:i,desiredSize:h.desiredSize}),f.promise},cancel:h=>{vt(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[i].cancelCall=f,this.streamControllers[i].isClosed=!0,d.postMessage({sourceName:o,targetName:u,stream:Fn.CANCEL,streamId:i,reason:Zr(h)}),f.promise}},n)}destroy(){var e;(e=c(this,Gf))==null||e.abort(),_(this,Gf,null)}}Gf=new WeakMap,Ei=new WeakSet,FM=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){I(this,Ei,TM).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===sA.DATA)r.resolve(e.data);else if(e.callback===sA.ERROR)r.reject(Zr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:n,targetName:r,callback:sA.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:n,targetName:r,callback:sA.ERROR,callbackId:e.callbackId,reason:Zr(o)})});return}if(e.streamId){I(this,Ei,SM).call(this,e);return}t(e.data)},SM=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,o=this,u=this.actionHandler[e.action],d={enqueue(h,f=1,g){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=f,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:Fn.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Fn.CLOSE,streamId:t}),delete o.streamSinks[t])},error(h){vt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Fn.ERROR,streamId:t,reason:Zr(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(u,e.data,d).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Fn.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Fn.START_COMPLETE,streamId:t,reason:Zr(h)})})},TM=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case Fn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Zr(e.reason));break;case Fn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Zr(e.reason));break;case Fn.PULL:if(!u){i.postMessage({sourceName:n,targetName:r,stream:Fn.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||nR).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Fn.PULL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Fn.PULL_COMPLETE,streamId:t,reason:Zr(h)})});break;case Fn.ENQUEUE:if(vt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Fn.CLOSE:if(vt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),I(this,Ei,DA).call(this,o,t);break;case Fn.ERROR:vt(o,"error should have stream controller"),o.controller.error(Zr(e.reason)),I(this,Ei,DA).call(this,o,t);break;case Fn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Zr(e.reason)),I(this,Ei,DA).call(this,o,t);break;case Fn.CANCEL:if(!u)break;const d=Zr(e.reason);Promise.try(u.onCancel||nR,d).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Fn.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:Fn.CANCEL_COMPLETE,streamId:t,reason:Zr(h)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},DA=async function(e,t){var n,r,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Qy;class kM{constructor({enableHWA:e=!1}){S(this,Qy,!1);_(this,Qy,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,Qy)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){At("Abstract method `_createCanvas` called.")}}Qy=new WeakMap;class jW extends kM{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class IM{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){At("Abstract method `_fetch` called.")}}class rR extends IM{async _fetch(e){const t=await b0(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):B1(t)}}class PM{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(e=!1){}}var Hd,qf,Xo,Yo,Tr,Wd,Gd,Ce,br,Tg,Kp,NA,Qp,RM,Zb,Xp,kg,Ig,eC,Pg;class $W extends PM{constructor({docId:t,ownerDocument:n=globalThis.document}){super();S(this,Ce);S(this,Hd);S(this,qf);S(this,Xo);S(this,Yo);S(this,Tr);S(this,Wd);S(this,Gd,0);_(this,Yo,t),_(this,Tr,n)}addFilter(t){if(!t)return"none";let n=c(this,Ce,br).get(t);if(n)return n;const[r,i,o]=I(this,Ce,NA).call(this,t),u=t.length===1?r:`${r}${i}${o}`;if(n=c(this,Ce,br).get(u),n)return c(this,Ce,br).set(t,n),n;const d=`g_${c(this,Yo)}_transfer_map_${Ln(this,Gd)._++}`,h=I(this,Ce,Qp).call(this,d);c(this,Ce,br).set(t,h),c(this,Ce,br).set(u,h);const f=I(this,Ce,Xp).call(this,d);return I(this,Ce,Ig).call(this,r,i,o,f),h}addHCMFilter(t,n){var F;const r=`${t}-${n}`,i="base";let o=c(this,Ce,Tg).get(i);if((o==null?void 0:o.key)===r||(o?((F=o.filter)==null||F.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},c(this,Ce,Tg).set(i,o)),!t||!n))return o.url;const u=I(this,Ce,Pg).call(this,t);t=xe.makeHexColor(...u);const d=I(this,Ce,Pg).call(this,n);if(n=xe.makeHexColor(...d),c(this,Ce,Kp).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const h=new Array(256);for(let C=0;C<=255;C++){const T=C/255;h[C]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const f=h.join(","),g=`g_${c(this,Yo)}_hcm_filter`,w=o.filter=I(this,Ce,Xp).call(this,g);I(this,Ce,Ig).call(this,f,f,f,w),I(this,Ce,Zb).call(this,w);const A=(C,T)=>{const P=u[C]/255,O=d[C]/255,N=new Array(T+1);for(let V=0;V<=T;V++)N[V]=P+V/T*(O-P);return N.join(",")};return I(this,Ce,Ig).call(this,A(0,5),A(1,5),A(2,5),w),o.url=I(this,Ce,Qp).call(this,g),o.url}addAlphaFilter(t){let n=c(this,Ce,br).get(t);if(n)return n;const[r]=I(this,Ce,NA).call(this,[t]),i=`alpha_${r}`;if(n=c(this,Ce,br).get(i),n)return c(this,Ce,br).set(t,n),n;const o=`g_${c(this,Yo)}_alpha_map_${Ln(this,Gd)._++}`,u=I(this,Ce,Qp).call(this,o);c(this,Ce,br).set(t,u),c(this,Ce,br).set(i,u);const d=I(this,Ce,Xp).call(this,o);return I(this,Ce,eC).call(this,r,d),u}addLuminosityFilter(t){let n=c(this,Ce,br).get(t||"luminosity");if(n)return n;let r,i;if(t?([r]=I(this,Ce,NA).call(this,[t]),i=`luminosity_${r}`):i="luminosity",n=c(this,Ce,br).get(i),n)return c(this,Ce,br).set(t,n),n;const o=`g_${c(this,Yo)}_luminosity_map_${Ln(this,Gd)._++}`,u=I(this,Ce,Qp).call(this,o);c(this,Ce,br).set(t,u),c(this,Ce,br).set(i,u);const d=I(this,Ce,Xp).call(this,o);return I(this,Ce,RM).call(this,d),t&&I(this,Ce,eC).call(this,r,d),u}addHighlightHCMFilter(t,n,r,i,o){var O;const u=`${n}-${r}-${i}-${o}`;let d=c(this,Ce,Tg).get(t);if((d==null?void 0:d.key)===u||(d?((O=d.filter)==null||O.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},c(this,Ce,Tg).set(t,d)),!n||!r))return d.url;const[h,f]=[n,r].map(I(this,Ce,Pg).bind(this));let g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),w=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[A,F]=[i,o].map(I(this,Ce,Pg).bind(this));w<g&&([g,w,A,F]=[w,g,F,A]),c(this,Ce,Kp).style.color="";const C=(N,V,z)=>{const W=new Array(256),D=(w-g)/z,R=N/255,L=(V-N)/(255*z);let U=0;for(let $=0;$<=z;$++){const G=Math.round(g+$*D),j=R+$*L;for(let ye=U;ye<=G;ye++)W[ye]=j;U=G+1}for(let $=U;$<256;$++)W[$]=W[U-1];return W.join(",")},T=`g_${c(this,Yo)}_hcm_${t}_filter`,P=d.filter=I(this,Ce,Xp).call(this,T);return I(this,Ce,Zb).call(this,P),I(this,Ce,Ig).call(this,C(A[0],F[0],5),C(A[1],F[1],5),C(A[2],F[2],5),P),d.url=I(this,Ce,Qp).call(this,T),d.url}destroy(t=!1){var n,r,i,o;t&&((n=c(this,Wd))!=null&&n.size)||((r=c(this,Xo))==null||r.parentNode.parentNode.remove(),_(this,Xo,null),(i=c(this,qf))==null||i.clear(),_(this,qf,null),(o=c(this,Wd))==null||o.clear(),_(this,Wd,null),_(this,Gd,0))}}Hd=new WeakMap,qf=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Tr=new WeakMap,Wd=new WeakMap,Gd=new WeakMap,Ce=new WeakSet,br=function(){return c(this,qf)||_(this,qf,new Map)},Tg=function(){return c(this,Wd)||_(this,Wd,new Map)},Kp=function(){if(!c(this,Xo)){const t=c(this,Tr).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=c(this,Tr).createElementNS(Ro,"svg");r.setAttribute("width",0),r.setAttribute("height",0),_(this,Xo,c(this,Tr).createElementNS(Ro,"defs")),t.append(r),r.append(c(this,Xo)),c(this,Tr).body.append(t)}return c(this,Xo)},NA=function(t){if(t.length===1){const h=t[0],f=new Array(256);for(let w=0;w<256;w++)f[w]=h[w]/255;const g=f.join(",");return[g,g,g]}const[n,r,i]=t,o=new Array(256),u=new Array(256),d=new Array(256);for(let h=0;h<256;h++)o[h]=n[h]/255,u[h]=r[h]/255,d[h]=i[h]/255;return[o.join(","),u.join(","),d.join(",")]},Qp=function(t){if(c(this,Hd)===void 0){_(this,Hd,"");const n=c(this,Tr).URL;n!==c(this,Tr).baseURI&&(V1(n)?We('#createUrl: ignore "data:"-URL for performance reasons.'):_(this,Hd,VN(n,"")))}return`url(${c(this,Hd)}#${t})`},RM=function(t){const n=c(this,Tr).createElementNS(Ro,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Zb=function(t){const n=c(this,Tr).createElementNS(Ro,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Xp=function(t){const n=c(this,Tr).createElementNS(Ro,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),c(this,Ce,Kp).append(n),n},kg=function(t,n,r){const i=c(this,Tr).createElementNS(Ro,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Ig=function(t,n,r,i){const o=c(this,Tr).createElementNS(Ro,"feComponentTransfer");i.append(o),I(this,Ce,kg).call(this,o,"feFuncR",t),I(this,Ce,kg).call(this,o,"feFuncG",n),I(this,Ce,kg).call(this,o,"feFuncB",r)},eC=function(t,n){const r=c(this,Tr).createElementNS(Ro,"feComponentTransfer");n.append(r),I(this,Ce,kg).call(this,r,"feFuncA",t)},Pg=function(t){return c(this,Ce,Kp).style.color=t,F0(getComputedStyle(c(this,Ce,Kp)).getPropertyValue("color"))};class DM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){At("Abstract method `_fetch` called.")}}class sR extends DM{async _fetch(e){const t=await b0(e,"arraybuffer");return new Uint8Array(t)}}class NM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){At("Abstract method `_fetch` called.")}}class iR extends NM{async _fetch(e){const t=await b0(e,"arraybuffer");return new Uint8Array(t)}}zr&&We("Please use the `legacy` build in Node.js environments.");async function xS(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class zW extends PM{}class HW extends kM{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class WW extends IM{async _fetch(e){return xS(e)}}class GW extends DM{async _fetch(e){return xS(e)}}class qW extends NM{async _fetch(e){return xS(e)}}const $p="__forcedDependency",{floor:aR,ceil:oR}=Math;function iA(s,e,t,n,r,i){s[e*4+0]=Math.min(s[e*4+0],t),s[e*4+1]=Math.min(s[e*4+1],n),s[e*4+2]=Math.max(s[e*4+2],r),s[e*4+3]=Math.max(s[e*4+3],i)}const tC=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Kf,Wc;class KW{constructor(e,t){S(this,Kf);S(this,Wc);_(this,Kf,e),_(this,Wc,t)}get length(){return c(this,Kf).length}isEmpty(e){return c(this,Kf)[e]===tC}minX(e){return c(this,Wc)[e*4+0]/256}minY(e){return c(this,Wc)[e*4+1]/256}maxX(e){return(c(this,Wc)[e*4+2]+1)/256}maxY(e){return(c(this,Wc)[e*4+3]+1)/256}}Kf=new WeakMap,Wc=new WeakMap;const aA=(s,e)=>{if(!s)return;let t=s.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},s.set(e,t)),t};var ns,rs,qd,ji,Kd,Jo,Ft,It,Zo,ss,Xy,Qf,Qd,Xd,el,kr,Ua,Yy,nC;class QW{constructor(e,t,n=!1){S(this,Yy);S(this,ns,{__proto__:null});S(this,rs,{__proto__:null,transform:[],moveText:[],sameLineText:[],[$p]:[]});S(this,qd,new Map);S(this,ji,[]);S(this,Kd,[]);S(this,Jo,[[1,0,0,1,0,0]]);S(this,Ft,[-1/0,-1/0,1/0,1/0]);S(this,It,new Float64Array([1/0,1/0,-1/0,-1/0]));S(this,Zo,-1);S(this,ss,new Set);S(this,Xy,new Map);S(this,Qf,new Map);S(this,Qd);S(this,Xd);S(this,el);S(this,kr);S(this,Ua);_(this,Qd,e.width),_(this,Xd,e.height),I(this,Yy,nC).call(this,t),n&&_(this,Ua,new Map)}growOperationsCount(e){e>=c(this,kr).length&&I(this,Yy,nC).call(this,e,c(this,kr))}save(e){return _(this,ns,{__proto__:c(this,ns)}),_(this,rs,{__proto__:c(this,rs),transform:{__proto__:c(this,rs).transform},moveText:{__proto__:c(this,rs).moveText},sameLineText:{__proto__:c(this,rs).sameLineText},[$p]:{__proto__:c(this,rs)[$p]}}),_(this,Ft,{__proto__:c(this,Ft)}),c(this,ji).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(c(this,ns));if(t===null)return this;_(this,ns,t),_(this,rs,Object.getPrototypeOf(c(this,rs))),_(this,Ft,Object.getPrototypeOf(c(this,Ft)));const n=c(this,ji).pop();return n!==void 0&&((r=aA(c(this,Ua),e))==null||r.dependencies.add(n),c(this,kr)[e]=c(this,kr)[n]),this}recordOpenMarker(e){return c(this,ji).push(e),this}getOpenMarker(){return c(this,ji).length===0?null:c(this,ji).at(-1)}recordCloseMarker(e){var n;const t=c(this,ji).pop();return t!==void 0&&((n=aA(c(this,Ua),e))==null||n.dependencies.add(t),c(this,kr)[e]=c(this,kr)[t]),this}beginMarkedContent(e){return c(this,Kd).push(e),this}endMarkedContent(e){var n;const t=c(this,Kd).pop();return t!==void 0&&((n=aA(c(this,Ua),e))==null||n.dependencies.add(t),c(this,kr)[e]=c(this,kr)[t]),this}pushBaseTransform(e){return c(this,Jo).push(xe.multiplyByDOMMatrix(c(this,Jo).at(-1),e.getTransform())),this}popBaseTransform(){return c(this,Jo).length>1&&c(this,Jo).pop(),this}recordSimpleData(e,t){return c(this,ns)[e]=t,this}recordIncrementalData(e,t){return c(this,rs)[e].push(t),this}resetIncrementalData(e,t){return c(this,rs)[e].length=0,this}recordNamedData(e,t){return c(this,qd).set(e,t),this}recordSimpleDataFromNamed(e,t,n){c(this,ns)[e]=c(this,qd).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData($p,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in c(this,ns)&&this.recordFutureForcedDependency(t,c(this,ns)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of c(this,ss))this.recordFutureForcedDependency($p,e);return this}resetBBox(e){return c(this,Zo)!==e&&(_(this,Zo,e),c(this,It)[0]=1/0,c(this,It)[1]=1/0,c(this,It)[2]=-1/0,c(this,It)[3]=-1/0),this}recordClipBox(e,t,n,r,i,o){const u=xe.multiplyByDOMMatrix(c(this,Jo).at(-1),t.getTransform()),d=[1/0,1/0,-1/0,-1/0];xe.axialAlignedBoundingBox([n,i,r,o],u,d);const h=xe.intersect(c(this,Ft),d);return h?(c(this,Ft)[0]=h[0],c(this,Ft)[1]=h[1],c(this,Ft)[2]=h[2],c(this,Ft)[3]=h[3]):(c(this,Ft)[0]=c(this,Ft)[1]=1/0,c(this,Ft)[2]=c(this,Ft)[3]=-1/0),this}recordBBox(e,t,n,r,i,o){const u=c(this,Ft);if(u[0]===1/0)return this;const d=xe.multiplyByDOMMatrix(c(this,Jo).at(-1),t.getTransform());if(u[0]===-1/0)return xe.axialAlignedBoundingBox([n,i,r,o],d,c(this,It)),this;const h=[1/0,1/0,-1/0,-1/0];return xe.axialAlignedBoundingBox([n,i,r,o],d,h),c(this,It)[0]=Math.min(c(this,It)[0],Math.max(h[0],u[0])),c(this,It)[1]=Math.min(c(this,It)[1],Math.max(h[1],u[1])),c(this,It)[2]=Math.max(c(this,It)[2],Math.min(h[2],u[2])),c(this,It)[3]=Math.max(c(this,It)[3],Math.min(h[3],u[3])),this}recordCharacterBBox(e,t,n,r=1,i=0,o=0,u){const d=n.bbox;let h,f;if(d&&(h=d[2]!==d[0]&&d[3]!==d[1]&&c(this,Qf).get(n),h!==!1&&(f=[0,0,0,0],xe.axialAlignedBoundingBox(d,n.fontMatrix,f),(r!==1||i!==0||o!==0)&&xe.scaleMinMax([r,0,0,-r,i,o],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!u)return this.recordFullPageBBox(e);const g=u();return d&&f&&h===void 0&&(h=f[0]<=i-g.actualBoundingBoxLeft&&f[2]>=i+g.actualBoundingBoxRight&&f[1]<=o-g.actualBoundingBoxAscent&&f[3]>=o+g.actualBoundingBoxDescent,c(this,Qf).set(n,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,i-g.actualBoundingBoxLeft,i+g.actualBoundingBoxRight,o-g.actualBoundingBoxAscent,o+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return c(this,It)[0]=Math.max(0,c(this,Ft)[0]),c(this,It)[1]=Math.max(0,c(this,Ft)[1]),c(this,It)[2]=Math.min(c(this,Qd),c(this,Ft)[2]),c(this,It)[3]=Math.min(c(this,Xd),c(this,Ft)[3]),this}getSimpleIndex(e){return c(this,ns)[e]}recordDependencies(e,t){const n=c(this,ss),r=c(this,ns),i=c(this,rs);for(const o of t)o in c(this,ns)?n.add(r[o]):o in i&&i[o].forEach(n.add,n);return this}recordNamedDependency(e,t){return c(this,qd).has(t)&&c(this,ss).add(c(this,qd).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[$p]),c(this,Ua)){const n=aA(c(this,Ua),e),{dependencies:r}=n;c(this,ss).forEach(r.add,r),c(this,ji).forEach(r.add,r),c(this,Kd).forEach(r.add,r),r.delete(e),n.isRenderingOperation=!0}if(c(this,Zo)===e){const n=aR(c(this,It)[0]*256/c(this,Qd)),r=aR(c(this,It)[1]*256/c(this,Xd)),i=oR(c(this,It)[2]*256/c(this,Qd)),o=oR(c(this,It)[3]*256/c(this,Xd));iA(c(this,el),e,n,r,i,o);for(const u of c(this,ss))u!==e&&iA(c(this,el),u,n,r,i,o);for(const u of c(this,ji))u!==e&&iA(c(this,el),u,n,r,i,o);for(const u of c(this,Kd))u!==e&&iA(c(this,el),u,n,r,i,o);t||(c(this,ss).clear(),_(this,Zo,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(c(this,ss));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return c(this,Zo)===e&&(_(this,Zo,-1),c(this,Ft)[0]=Math.max(c(this,Ft)[0],c(this,It)[0]),c(this,Ft)[1]=Math.max(c(this,Ft)[1],c(this,It)[1]),c(this,Ft)[2]=Math.min(c(this,Ft)[2],c(this,It)[2]),c(this,Ft)[3]=Math.min(c(this,Ft)[3],c(this,It)[3]),t||c(this,ss).clear()),this}_takePendingDependencies(){const e=c(this,ss);return _(this,ss,new Set),e}_extractOperation(e){const t=c(this,Xy).get(e);return c(this,Xy).delete(e),t}_pushPendingDependencies(e){for(const t of e)c(this,ss).add(t)}take(){return c(this,Qf).clear(),new KW(c(this,kr),c(this,el))}takeDebugMetadata(){return c(this,Ua)}}ns=new WeakMap,rs=new WeakMap,qd=new WeakMap,ji=new WeakMap,Kd=new WeakMap,Jo=new WeakMap,Ft=new WeakMap,It=new WeakMap,Zo=new WeakMap,ss=new WeakMap,Xy=new WeakMap,Qf=new WeakMap,Qd=new WeakMap,Xd=new WeakMap,el=new WeakMap,kr=new WeakMap,Ua=new WeakMap,Yy=new WeakSet,nC=function(e,t){const n=new ArrayBuffer(e*4);_(this,el,new Uint8ClampedArray(n)),_(this,kr,new Uint32Array(n)),t&&t.length>0?(c(this,kr).set(t),c(this,kr).fill(tC,t.length)):c(this,kr).fill(tC)};var Nt,ln,$i,Xf,Yf;const PS=class PS{constructor(e,t,n){S(this,Nt);S(this,ln);S(this,$i);S(this,Xf,0);S(this,Yf,0);if(e instanceof PS&&c(e,$i)===!!n)return e;_(this,Nt,e),_(this,ln,t),_(this,$i,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Ln(this,Yf)._++,c(this,Nt).save(c(this,ln)),this}restore(e){return c(this,Yf)>0&&(c(this,Nt).restore(c(this,ln)),Ln(this,Yf)._--),this}recordOpenMarker(e){return Ln(this,Xf)._++,this}getOpenMarker(){return c(this,Xf)>0?c(this,ln):c(this,Nt).getOpenMarker()}recordCloseMarker(e){return Ln(this,Xf)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return c(this,Nt).pushBaseTransform(e),this}popBaseTransform(){return c(this,Nt).popBaseTransform(),this}recordSimpleData(e,t){return c(this,Nt).recordSimpleData(e,c(this,ln)),this}recordIncrementalData(e,t){return c(this,Nt).recordIncrementalData(e,c(this,ln)),this}resetIncrementalData(e,t){return c(this,Nt).resetIncrementalData(e,c(this,ln)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return c(this,Nt).recordSimpleDataFromNamed(e,t,c(this,ln)),this}recordFutureForcedDependency(e,t){return c(this,Nt).recordFutureForcedDependency(e,c(this,ln)),this}inheritSimpleDataAsFutureForcedDependencies(e){return c(this,Nt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,Nt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return c(this,$i)||c(this,Nt).resetBBox(c(this,ln)),this}recordClipBox(e,t,n,r,i,o){return c(this,$i)||c(this,Nt).recordClipBox(c(this,ln),t,n,r,i,o),this}recordBBox(e,t,n,r,i,o){return c(this,$i)||c(this,Nt).recordBBox(c(this,ln),t,n,r,i,o),this}recordCharacterBBox(e,t,n,r,i,o,u){return c(this,$i)||c(this,Nt).recordCharacterBBox(c(this,ln),t,n,r,i,o,u),this}recordFullPageBBox(e){return c(this,$i)||c(this,Nt).recordFullPageBBox(c(this,ln)),this}getSimpleIndex(e){return c(this,Nt).getSimpleIndex(e)}recordDependencies(e,t){return c(this,Nt).recordDependencies(c(this,ln),t),this}recordNamedDependency(e,t){return c(this,Nt).recordNamedDependency(c(this,ln),t),this}recordOperation(e){return c(this,Nt).recordOperation(c(this,ln),!0),this}recordShowTextOperation(e){return c(this,Nt).recordShowTextOperation(c(this,ln),!0),this}bboxToClipBoxDropOperation(e){return c(this,$i)||c(this,Nt).bboxToClipBoxDropOperation(c(this,ln),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Nt=new WeakMap,ln=new WeakMap,$i=new WeakMap,Xf=new WeakMap,Yf=new WeakMap;let R_=PS;const ii={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},pr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function rC(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),s.clip(r)}class ES{isModifyingCurrentTransform(){return!1}getPattern(){At("Abstract method `getPattern` called.")}}class XW extends ES{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let n,r=this._p0,i=this._p1;if(t&&(r=r.slice(),i=i.slice(),xe.applyTransform(r,t),xe.applyTransform(i,t)),this._type==="axial")n=e.createLinearGradient(r[0],r[1],i[0],i[1]);else if(this._type==="radial"){let o=this._r0,u=this._r1;if(t){const d=new Float32Array(2);xe.singularValueDecompose2dScale(t,d),o*=d[0],u*=d[0]}n=e.createRadialGradient(r[0],r[1],o,i[0],i[1],u)}for(const o of this._colorStops)n.addColorStop(o[0],o[1]);return n}getPattern(e,t,n,r){let i;if(r===pr.STROKE||r===pr.FILL){if(this.isOriginBased()){let w=xe.transform(n,t.baseTransform);this.matrix&&(w=xe.transform(w,this.matrix));const A=.001,F=Math.hypot(w[0],w[1]),C=Math.hypot(w[2],w[3]),T=(w[0]*w[2]+w[1]*w[3])/(F*C);if(Math.abs(T)<A)if(this.isRadial()){if(Math.abs(F-C)<A)return this._createGradient(e,w)}else return this._createGradient(e,w)}const o=t.current.getClippedPathBoundingBox(r,nn(e))||[0,0,0,0],u=Math.ceil(o[2]-o[0])||1,d=Math.ceil(o[3]-o[1])||1,h=t.cachedCanvases.getCanvas("pattern",u,d),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),n=xe.transform(n,[1,0,0,1,o[0],o[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),rC(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),i=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(n);i.setTransform(g)}else rC(e,this._bbox),i=this._createGradient(e);return i}}function GE(s,e,t,n,r,i,o,u){const d=e.coords,h=e.colors,f=s.data,g=s.width*4;let w;d[t+1]>d[n+1]&&(w=t,t=n,n=w,w=i,i=o,o=w),d[n+1]>d[r+1]&&(w=n,n=r,r=w,w=o,o=u,u=w),d[t+1]>d[n+1]&&(w=t,t=n,n=w,w=i,i=o,o=w);const A=(d[t]+e.offsetX)*e.scaleX,F=(d[t+1]+e.offsetY)*e.scaleY,C=(d[n]+e.offsetX)*e.scaleX,T=(d[n+1]+e.offsetY)*e.scaleY,P=(d[r]+e.offsetX)*e.scaleX,O=(d[r+1]+e.offsetY)*e.scaleY;if(F>=O)return;const N=h[i],V=h[i+1],z=h[i+2],W=h[o],D=h[o+1],R=h[o+2],L=h[u],U=h[u+1],$=h[u+2],G=Math.round(F),j=Math.round(O);let ye,ce,de,me,ie,ve,fe,X;for(let re=G;re<=j;re++){if(re<T){const Ne=re<F?0:(F-re)/(F-T);ye=A-(A-C)*Ne,ce=N-(N-W)*Ne,de=V-(V-D)*Ne,me=z-(z-R)*Ne}else{let Ne;re>O?Ne=1:T===O?Ne=0:Ne=(T-re)/(T-O),ye=C-(C-P)*Ne,ce=W-(W-L)*Ne,de=D-(D-U)*Ne,me=R-(R-$)*Ne}let _e;re<F?_e=0:re>O?_e=1:_e=(F-re)/(F-O),ie=A-(A-P)*_e,ve=N-(N-L)*_e,fe=V-(V-U)*_e,X=z-(z-$)*_e;const De=Math.round(Math.min(ye,ie)),ke=Math.round(Math.max(ye,ie));let Me=g*re+De*4;for(let Ne=De;Ne<=ke;Ne++)_e=(ye-Ne)/(ye-ie),_e<0?_e=0:_e>1&&(_e=1),f[Me++]=ce-(ce-ve)*_e|0,f[Me++]=de-(de-fe)*_e|0,f[Me++]=me-(me-X)*_e|0,f[Me++]=255}}function YW(s,e,t){const n=e.coords,r=e.colors;let i,o;switch(e.type){case Tb.LATTICE:const u=e.verticesPerRow,d=Math.floor(n.length/u)-1,h=u-1;for(i=0;i<d;i++){let f=i*u;for(let g=0;g<h;g++,f++)GE(s,t,n[f],n[f+1],n[f+u],r[f],r[f+1],r[f+u]),GE(s,t,n[f+u+1],n[f+1],n[f+u],r[f+u+1],r[f+1],r[f+u])}break;case Tb.TRIANGLES:for(i=0,o=n.length;i<o;i+=3)GE(s,t,n[i],n[i+1],n[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class JW extends ES{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-u,f=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),A=h/g,F=f/w,C={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/F},T=g+4,P=w+4,O=n.getCanvas("mesh",T,P),N=O.context,V=N.createImageData(g,w);if(t){const W=V.data;for(let D=0,R=W.length;D<R;D+=4)W[D]=t[0],W[D+1]=t[1],W[D+2]=t[2],W[D+3]=255}for(const W of this._figures)YW(V,W,C);return N.putImageData(V,2,2),{canvas:O.canvas,offsetX:u-2*A,offsetY:d-2*F,scaleX:A,scaleY:F}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){rC(e,this._bbox);const i=new Float32Array(2);if(r===pr.SHADING)xe.singularValueDecompose2dScale(nn(e),i);else if(this.matrix){xe.singularValueDecompose2dScale(this.matrix,i);const[u,d]=i;xe.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=u,i[1]*=d}else xe.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===pr.SHADING?null:this._background,t.cachedCanvases);return r!==pr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class ZW extends ES{getPattern(){return"hotpink"}}function eG(s){switch(s[0]){case"RadialAxial":return new XW(s);case"Mesh":return new JW(s);case"Dummy":return new ZW}throw new Error(`Unknown IR type: ${s[0]}`)}const lR={COLORED:1,UNCOLORED:2},q_=class q_{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){var ve,fe;const{bbox:n,operatorList:r,paintType:i,tilingType:o,color:u,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),O1("TilingType: "+o);const g=n[0],w=n[1],A=n[2],F=n[3],C=A-g,T=F-w,P=new Float32Array(2);xe.singularValueDecompose2dScale(this.matrix,P);const[O,N]=P;xe.singularValueDecompose2dScale(this.baseTransform,P);const V=O*P[0],z=N*P[1];let W=C,D=T,R=!1,L=!1;const U=Math.ceil(h*V),$=Math.ceil(f*z),G=Math.ceil(C*V),j=Math.ceil(T*z);U>=G?W=h:R=!0,$>=j?D=f:L=!0;const ye=this.getSizeAndScale(W,this.ctx.canvas.width,V),ce=this.getSizeAndScale(D,this.ctx.canvas.height,z),de=e.cachedCanvases.getCanvas("pattern",ye.size,ce.size),me=de.context,ie=d.createCanvasGraphics(me,t);if(ie.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ie,i,u),me.translate(-ye.scale*g,-ce.scale*w),ie.transform(0,ye.scale,0,0,ce.scale,0,0),me.save(),(ve=ie.dependencyTracker)==null||ve.save(),this.clipBbox(ie,g,w,A,F),ie.baseTransform=nn(ie.ctx),ie.executeOperatorList(r),ie.endDrawing(),(fe=ie.dependencyTracker)==null||fe.restore(),me.restore(),R||L){const X=de.canvas;R&&(W=h),L&&(D=f);const re=this.getSizeAndScale(W,this.ctx.canvas.width,V),_e=this.getSizeAndScale(D,this.ctx.canvas.height,z),De=re.size,ke=_e.size,Me=e.cachedCanvases.getCanvas("pattern-workaround",De,ke),Ne=Me.context,et=R?Math.floor(C/h):0,dt=L?Math.floor(T/f):0;for(let he=0;he<=et;he++)for(let Ke=0;Ke<=dt;Ke++)Ne.drawImage(X,De*he,ke*Ke,De,ke,0,0,De,ke);return{canvas:Me.canvas,scaleX:re.scale,scaleY:_e.scale,offsetX:g,offsetY:w}}return{canvas:de.canvas,scaleX:ye.scale,scaleY:ce.scale,offsetX:g,offsetY:w}}getSizeAndScale(e,t,n){const r=Math.max(q_.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const o=r-t,u=i-n;e.ctx.rect(t,n,o,u),xe.axialAlignedBoundingBox([t,n,r,i],nn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case lR.COLORED:const{fillStyle:o,strokeStyle:u}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=u;break;case lR.UNCOLORED:r.fillStyle=r.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new hW(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,i){let o=n;r!==pr.SHADING&&(o=xe.transform(o,t.baseTransform),this.matrix&&(o=xe.transform(o,this.matrix)));const u=this.createPatternCanvas(t,i);let d=new DOMMatrix(o);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const h=e.createPattern(u.canvas,"repeat");return h.setTransform(d),h}};ne(q_,"MAX_PATTERN_SIZE",3e3);let sC=q_;function tG({src:s,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const u=$n.isLittleEndian?4278190080:255,[d,h]=o?[i,u]:[u,i],f=n>>3,g=n&7,w=s.length;t=new Uint32Array(t.buffer);let A=0;for(let F=0;F<r;F++){for(const T=e+f;e<T;e++){const P=e<w?s[e]:255;t[A++]=P&128?h:d,t[A++]=P&64?h:d,t[A++]=P&32?h:d,t[A++]=P&16?h:d,t[A++]=P&8?h:d,t[A++]=P&4?h:d,t[A++]=P&2?h:d,t[A++]=P&1?h:d}if(g===0)continue;const C=e<w?s[e++]:255;for(let T=0;T<g;T++)t[A++]=C&1<<7-T?h:d}return{srcPos:e,destPos:A}}const cR=16,uR=100,nG=15,dR=10,cs=16,qE=new DOMMatrix,zs=new Float32Array(2),nf=new Float32Array([1/0,1/0,-1/0,-1/0]);function rG(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,r,i,o,u){e.transform(t,n,r,i,o,u),this.__originalTransform(t,n,r,i,o,u)},s.setTransform=function(t,n,r,i,o,u){e.setTransform(t,n,r,i,o,u),this.__originalSetTransform(t,n,r,i,o,u)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,r,i,o,u){e.bezierCurveTo(t,n,r,i,o,u),this.__originalBezierCurveTo(t,n,r,i,o,u)},s.rect=function(t,n,r,i){e.rect(t,n,r,i),this.__originalRect(t,n,r,i)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class sG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function oA(s,e,t,n,r,i,o,u,d,h){const[f,g,w,A,F,C]=nn(s);if(g===0&&w===0){const O=o*f+F,N=Math.round(O),V=u*A+C,z=Math.round(V),W=(o+d)*f+F,D=Math.abs(Math.round(W)-N)||1,R=(u+h)*A+C,L=Math.abs(Math.round(R)-z)||1;return s.setTransform(Math.sign(f),0,0,Math.sign(A),N,z),s.drawImage(e,t,n,r,i,0,0,D,L),s.setTransform(f,g,w,A,F,C),[D,L]}if(f===0&&A===0){const O=u*w+F,N=Math.round(O),V=o*g+C,z=Math.round(V),W=(u+h)*w+F,D=Math.abs(Math.round(W)-N)||1,R=(o+d)*g+C,L=Math.abs(Math.round(R)-z)||1;return s.setTransform(0,Math.sign(g),Math.sign(w),0,N,z),s.drawImage(e,t,n,r,i,0,0,L,D),s.setTransform(f,g,w,A,F,C),[L,D]}s.drawImage(e,t,n,r,i,o,u,d,h);const T=Math.hypot(f,g),P=Math.hypot(w,A);return[T*d,P*h]}class hR{constructor(e,t,n){ne(this,"alphaIsShape",!1);ne(this,"fontSize",0);ne(this,"fontSizeScale",1);ne(this,"textMatrix",null);ne(this,"textMatrixScale",1);ne(this,"fontMatrix",Sb);ne(this,"leading",0);ne(this,"x",0);ne(this,"y",0);ne(this,"lineX",0);ne(this,"lineY",0);ne(this,"charSpacing",0);ne(this,"wordSpacing",0);ne(this,"textHScale",1);ne(this,"textRenderingMode",On.FILL);ne(this,"textRise",0);ne(this,"fillColor","#000000");ne(this,"strokeColor","#000000");ne(this,"patternFill",!1);ne(this,"patternStroke",!1);ne(this,"fillAlpha",1);ne(this,"strokeAlpha",1);ne(this,"lineWidth",1);ne(this,"activeSMask",null);ne(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=nf.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=pr.FILL,t=null){const n=this.minMax.slice();if(e===pr.STROKE){t||At("Stroke bounding box must include transform."),xe.singularValueDecompose2dScale(t,zs);const r=zs[0]*this.lineWidth/2,i=zs[1]*this.lineWidth/2;n[0]-=r,n[1]-=i,n[2]+=r,n[3]+=i}return n}updateClipFromPath(){const e=xe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(nf,0)}getClippedPathBoundingBox(e=pr.FILL,t=null){return xe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function pR(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%cs,i=(t-r)/cs,o=r===0?i:i+1,u=s.createImageData(n,cs);let d=0,h;const f=e.data,g=u.data;let w,A,F,C;if(e.kind===bA.GRAYSCALE_1BPP){const T=f.byteLength,P=new Uint32Array(g.buffer,0,g.byteLength>>2),O=P.length,N=n+7>>3,V=4294967295,z=$n.isLittleEndian?4278190080:255;for(w=0;w<o;w++){for(F=w<i?cs:r,h=0,A=0;A<F;A++){const W=T-d;let D=0;const R=W>N?n:W*8-7,L=R&-8;let U=0,$=0;for(;D<L;D+=8)$=f[d++],P[h++]=$&128?V:z,P[h++]=$&64?V:z,P[h++]=$&32?V:z,P[h++]=$&16?V:z,P[h++]=$&8?V:z,P[h++]=$&4?V:z,P[h++]=$&2?V:z,P[h++]=$&1?V:z;for(;D<R;D++)U===0&&($=f[d++],U=128),P[h++]=$&U?V:z,U>>=1}for(;h<O;)P[h++]=0;s.putImageData(u,0,w*cs)}}else if(e.kind===bA.RGBA_32BPP){for(A=0,C=n*cs*4,w=0;w<i;w++)g.set(f.subarray(d,d+C)),d+=C,s.putImageData(u,0,A),A+=cs;w<o&&(C=n*r*4,g.set(f.subarray(d,d+C)),s.putImageData(u,0,A))}else if(e.kind===bA.RGB_24BPP)for(F=cs,C=n*F,w=0;w<o;w++){for(w>=i&&(F=r,C=n*F),h=0,A=C;A--;)g[h++]=f[d++],g[h++]=f[d++],g[h++]=f[d++],g[h++]=255;s.putImageData(u,0,w*cs)}else throw new Error(`bad image kind: ${e.kind}`)}function fR(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%cs,i=(t-r)/cs,o=r===0?i:i+1,u=s.createImageData(n,cs);let d=0;const h=e.data,f=u.data;for(let g=0;g<o;g++){const w=g<i?cs:r;({srcPos:d}=tG({src:h,srcPos:d,dest:f,width:n,height:w,nonBlackColor:0})),s.putImageData(u,0,g*cs)}}function cg(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function lA(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function mR(s,e){if(e)return!0;xe.singularValueDecompose2dScale(s,zs);const t=Math.fround(lo.pixelRatio*Du.PDF_TO_CSS_UNITS);return zs[0]<=t&&zs[1]<=t}const iG=["butt","round","square"],aG=["miter","round","bevel"],oG={},gR={};var ra,iC,aC,oC;const RS=class RS{constructor(e,t,n,r,i,{optionalContentConfig:o,markedContentStack:u=null},d,h,f){S(this,ra);this.ctx=e,this.current=new hR(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=o,this.cachedCanvases=new sG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,n=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...nn(this.compositeCtx))}this.ctx.save(),lA(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=nn(this.ctx)}executeOperatorList(e,t,n,r,i){var P;const o=e.argsArray,u=e.fnArray;let d=t||0;const h=o.length;if(h===d)return d;const f=h-d>dR&&typeof n=="function",g=f?Date.now()+nG:0;let w=0;const A=this.commonObjs,F=this.objs;let C,T;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,n),d;if(!i||i(d))if(C=u[d],T=o[d]??null,C!==ay.dependency)T===null?this[C](d):this[C](d,...T);else for(const O of T){(P=this.dependencyTracker)==null||P.recordNamedData(O,d);const N=O.startsWith("g_")?A:F;if(!N.has(O))return N.get(O,n),d}if(d++,d===h)return d;if(f&&++w>dR){if(Date.now()>g)return n(),d;w=0}}}endDrawing(){I(this,ra,iC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),I(this,ra,aC).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),u=n,d=r,h="prescale1",f,g;for(;i>2&&u>1||o>2&&d>1;){let w=u,A=d;i>2&&u>1&&(w=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),i/=u/w),o>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,o/=d/A),f=this.cachedCanvases.getCanvas(h,w,A),g=f.context,g.clearRect(0,0,w,A),g.drawImage(e,0,0,u,d,0,0,w,A),e=f.canvas,u=w,d=A,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:d}}_createMaskCanvas(e,t){var U,$;const n=this.ctx,{width:r,height:i}=t,o=this.current.fillColor,u=this.current.patternFill,d=nn(n);let h,f,g,w;if((t.bitmap||t.data)&&t.count>1){const G=t.bitmap||t.data.buffer;f=JSON.stringify(u?d:[d.slice(0,4),o]),h=this._cachedBitmapsMap.get(G),h||(h=new Map,this._cachedBitmapsMap.set(G,h));const j=h.get(f);if(j&&!u){const ye=Math.round(Math.min(d[0],d[2])+d[4]),ce=Math.round(Math.min(d[1],d[3])+d[5]);return(U=this.dependencyTracker)==null||U.recordDependencies(e,ii.transformAndFill),{canvas:j,offsetX:ye,offsetY:ce}}g=j}g||(w=this.cachedCanvases.getCanvas("maskCanvas",r,i),fR(w.context,t));let A=xe.transform(d,[1/r,0,0,-1/i,0,0]);A=xe.transform(A,[1,0,0,1,0,-i]);const F=nf.slice();xe.axialAlignedBoundingBox([0,0,r,i],A,F);const[C,T,P,O]=F,N=Math.round(P-C)||1,V=Math.round(O-T)||1,z=this.cachedCanvases.getCanvas("fillCanvas",N,V),W=z.context,D=C,R=T;W.translate(-D,-R),W.transform(...A),g||(g=this._scaleImage(w.canvas,Ca(W)),g=g.img,h&&u&&h.set(f,g)),W.imageSmoothingEnabled=mR(nn(W),t.interpolate),oA(W,g,0,0,g.width,g.height,0,0,r,i),W.globalCompositeOperation="source-in";const L=xe.transform(Ca(W),[1,0,0,1,-D,-R]);return W.fillStyle=u?o.getPattern(n,this,L,pr.FILL,e):o,W.fillRect(0,0,r,i),h&&!u&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,z.canvas)),($=this.dependencyTracker)==null||$.recordDependencies(e,ii.transformAndFill),{canvas:z.canvas,offsetX:Math.round(D),offsetY:Math.round(R)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=iG[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=aG[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,r,i,o,u;for(const[d,h]of t)switch(d){case"LW":this.setLineWidth(e,h);break;case"LC":this.setLineCap(e,h);break;case"LJ":this.setLineJoin(e,h);break;case"ML":this.setMiterLimit(e,h);break;case"D":this.setDash(e,h[0],h[1]);break;case"RI":this.setRenderingIntent(e,h);break;case"FL":this.setFlatness(e,h);break;case"Font":this.setFont(e,h[0],h[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=h;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=h;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=h;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=h?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(h);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),cg(this.suspendedCtx,o),rG(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),cg(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],o=r[1],u=r[2]-i,d=r[3]-o;u===0||d===0||(this.genericComposeSMask(t.context,n,u,d,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,o,u,d,h,f,g){let w=e.canvas,A=d-f,F=h-g;if(o)if(A<0||F<0||A+n>w.width||F+r>w.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,r),P=T.context;P.drawImage(w,-A,-F),P.globalCompositeOperation="destination-atop",P.fillStyle=o,P.fillRect(0,0,n,r),P.globalCompositeOperation="source-over",w=T.canvas,A=F=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(A,F,n,r),e.clip(T),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(A,F,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const C=new Path2D;C.rect(d,h,n,r),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(w,A,F,n,r,d,h,n,r),t.restore()}save(e){var n;this.inSMaskMode&&cg(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&cg(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,i,o,u){var d;(d=this.dependencyTracker)==null||d.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,i,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[i]=n;if(!r){i||(i=n[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===ay.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(e,["transform"])}i instanceof Path2D||(i=n[0]=zN(i)),xe.axialAlignedBoundingBox(r,nn(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var o;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const u=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,Ca(r),pr.STROKE,e),u){const d=new Path2D;d.addPath(t,r.getTransform().invertSelf().multiplySelf(u)),t=d}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,ii.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(pr.STROKE,nn(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var h,f,g;const r=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let u=!1;if(o){const w=i.isModifyingCurrentTransform()?r.getTransform():null;if((h=this.dependencyTracker)==null||h.save(e),r.save(),r.fillStyle=i.getPattern(r,this,Ca(r),pr.FILL,e),w){const A=new Path2D;A.addPath(t,r.getTransform().invertSelf().multiplySelf(w)),t=A}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(f=this.dependencyTracker)==null||f.recordDependencies(e,ii.fill),u&&(r.restore(),(g=this.dependencyTracker)==null||g.restore(e)),n&&this.consumePath(e,t,d)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,ii.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=oG}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=gR}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=n.getTransform().invertSelf();for(const{transform:o,x:u,y:d,fontSize:h,path:f}of t)f&&r.addPath(f,new DOMMatrix(o).preMultiplySelf(i).translate(u,d).scale(h,-h));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var g,w;(g=this.dependencyTracker)==null||g.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||Sb,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&We("Invalid font matrix for font "+t),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const o=r.loadedName||"sans-serif",u=((w=r.systemFontInfo)==null?void 0:w.css)||`"${o}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const h=r.italic?"italic":"normal";let f=n;n<cR?f=cR:n>uR&&(f=uR),this.current.fontSizeScale=n/f,this.ctx.font=`${h} ${d} ${f}px ${u}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,r,i,o){var P,O,N,V;const u=this.ctx,d=this.current,h=d.font,f=d.textRenderingMode,g=d.fontSize/d.fontSizeScale,w=f&On.FILL_STROKE_MASK,A=!!(f&On.ADD_TO_PATH_FLAG),F=d.patternFill&&!h.missingFile,C=d.patternStroke&&!h.missingFile;let T;if((h.disableFontFace||A||F||C)&&!h.missingFile&&(T=h.getPathGenerator(this.commonObjs,t)),T&&(h.disableFontFace||F||C)){u.save(),u.translate(n,r),u.scale(g,-g),(P=this.dependencyTracker)==null||P.recordCharacterBBox(e,u,h);let z;if(w===On.FILL||w===On.FILL_STROKE)if(i){z=u.getTransform(),u.setTransform(...i);const W=I(this,ra,oC).call(this,T,z,i);u.fill(W)}else u.fill(T);if(w===On.STROKE||w===On.FILL_STROKE)if(o){z||(z=u.getTransform()),u.setTransform(...o);const{a:W,b:D,c:R,d:L}=z,U=xe.inverseTransform(o),$=xe.transform([W,D,R,L,0,0],U);xe.singularValueDecompose2dScale($,zs),u.lineWidth*=Math.max(zs[0],zs[1])/g,u.stroke(I(this,ra,oC).call(this,T,z,o))}else u.lineWidth/=g,u.stroke(T);u.restore()}else(w===On.FILL||w===On.FILL_STROKE)&&(u.fillText(t,n,r),(O=this.dependencyTracker)==null||O.recordCharacterBBox(e,u,h,g,n,r,()=>u.measureText(t))),(w===On.STROKE||w===On.FILL_STROKE)&&(this.dependencyTracker&&((N=this.dependencyTracker)==null||N.recordCharacterBBox(e,u,h,g,n,r,()=>u.measureText(t)).recordDependencies(e,ii.stroke)),u.strokeText(t,n,r));A&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:nn(u),x:n,y:r,fontSize:g,path:T}),(V=this.dependencyTracker)==null||V.recordCharacterBBox(e,u,h,g,n,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Ge(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var $,G,j,ye;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ii.showText).resetBBox(e),this.current.textRenderingMode&On.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(e,t),($=this.dependencyTracker)==null||$.recordShowTextOperation(e);return}const i=n.fontSize;if(i===0){(G=this.dependencyTracker)==null||G.recordOperation(e);return}const o=this.ctx,u=n.fontSizeScale,d=n.charSpacing,h=n.wordSpacing,f=n.fontDirection,g=n.textHScale*f,w=t.length,A=r.vertical,F=A?1:-1,C=r.defaultVMetrics,T=i*n.fontMatrix[0],P=n.textRenderingMode===On.FILL&&!r.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),f>0?o.scale(g,-1):o.scale(g,1);let O,N;const V=n.textRenderingMode&On.FILL_STROKE_MASK,z=V===On.FILL||V===On.FILL_STROKE,W=V===On.STROKE||V===On.FILL_STROKE;if(z&&n.patternFill){o.save();const ce=n.fillColor.getPattern(o,this,Ca(o),pr.FILL,e);O=nn(o),o.restore(),o.fillStyle=ce}if(W&&n.patternStroke){o.save();const ce=n.strokeColor.getPattern(o,this,Ca(o),pr.STROKE,e);N=nn(o),o.restore(),o.strokeStyle=ce}let D=n.lineWidth;const R=n.textMatrixScale;if(R===0||D===0?W&&(D=this.getSinglePixelWidth()):D/=R,u!==1&&(o.scale(u,u),D/=u),o.lineWidth=D,r.isInvalidPDFjsFont){const ce=[];let de=0;for(const ie of t)ce.push(ie.unicode),de+=ie.width;const me=ce.join("");if(o.fillText(me,0,0),this.dependencyTracker!==null){const ie=o.measureText(me);this.dependencyTracker.recordBBox(e,this.ctx,-ie.actualBoundingBoxLeft,ie.actualBoundingBoxRight,-ie.actualBoundingBoxAscent,ie.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=de*T*g,o.restore(),this.compose();return}let L=0,U;for(U=0;U<w;++U){const ce=t[U];if(typeof ce=="number"){L+=F*ce*i/1e3;continue}let de=!1;const me=(ce.isSpace?h:0)+d,ie=ce.fontChar,ve=ce.accent;let fe,X,re=ce.width;if(A){const ke=ce.vmetric||C,Me=-(ce.vmetric?ke[1]:re*.5)*T,Ne=ke[2]*T;re=ke?-ke[0]:re,fe=Me/u,X=(L+Ne)/u}else fe=L/u,X=0;let _e;if(r.remeasure&&re>0){_e=o.measureText(ie);const ke=_e.width*1e3/i*u;if(re<ke&&this.isFontSubpixelAAEnabled){const Me=re/ke;de=!0,o.save(),o.scale(Me,1),fe/=Me}else re!==ke&&(fe+=(re-ke)/2e3*i/u)}if(this.contentVisible&&(ce.isInFont||r.missingFile)){if(P&&!ve)o.fillText(ie,fe,X),(j=this.dependencyTracker)==null||j.recordCharacterBBox(e,o,_e?{bbox:null}:r,i/u,fe,X,()=>_e??o.measureText(ie));else if(this.paintChar(e,ie,fe,X,O,N),ve){const ke=fe+i*ve.offset.x/u,Me=X-i*ve.offset.y/u;this.paintChar(e,ve.fontChar,ke,Me,O,N)}}const De=A?re*T-me*f:re*T+me*f;L+=De,de&&o.restore()}A?n.y-=L:n.x+=L*g,o.restore(),this.compose(),(ye=this.dependencyTracker)==null||ye.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,r=this.current,i=r.font,o=r.fontSize,u=r.fontDirection,d=i.vertical?1:-1,h=r.charSpacing,f=r.wordSpacing,g=r.textHScale*u,w=r.fontMatrix||Sb,A=t.length,F=r.textRenderingMode===On.INVISIBLE;let C,T,P,O;if(F||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(g,u);const N=this.dependencyTracker;for(this.dependencyTracker=N?new R_(N,e):null,C=0;C<A;++C){if(T=t[C],typeof T=="number"){O=d*T*o/1e3,this.ctx.translate(O,0),r.x+=O*g;continue}const V=(T.isSpace?f:0)+h,z=i.charProcOperatorList[T.operatorListId];z?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...w),this.executeOperatorList(z),this.restore()):We(`Type3 character "${T.operatorListId}" is not available.`);const W=[T.width,0];xe.applyTransform(W,w),P=W[0]*o+V,n.translate(P,0),r.x+=P*g}n.restore(),N&&(this.dependencyTracker=N)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,i,o,u){var h;const d=new Path2D;d.rect(r,i,o-r,u-i),this.ctx.clip(d),(h=this.dependencyTracker)==null||h.recordBBox(e,this.ctx,r,o,i,u).recordClipBox(e,this.ctx,r,o,i,u),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const r=this.baseTransform||nn(this.ctx),i={createCanvasGraphics:(o,u)=>new RS(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new R_(this.dependencyTracker,u,!0):null)};n=new sC(t,this.ctx,i,r)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=eG(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const r=this._getPattern(e,t);n.fillStyle=r.getPattern(n,this,Ca(n),pr.SHADING,e);const i=Ca(n);if(i){const{width:u,height:d}=n.canvas,h=nf.slice();xe.axialAlignedBoundingBox([0,0,u,d],i,h);const[f,g,w,A]=h;this.ctx.fillRect(f,g,w-f,A-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ii.transform).recordDependencies(e,ii.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){At("Should not call beginInlineImage")}beginImageData(){At("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=nn(this.ctx),n)){xe.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,o,u,d]=n,h=new Path2D;h.rect(i,o,u-i,d-o),this.ctx.clip(h),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,u,o,d),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var N;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||O1("TODO: Support non-isolated groups."),t.knockout&&We("Knockout groups not supported.");const r=nn(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=nf.slice();xe.axialAlignedBoundingBox(t.bbox,nn(n),i);const o=[0,0,n.canvas.width,n.canvas.height];i=xe.intersect(i,o)||[0,0,0,0];const u=Math.floor(i[0]),d=Math.floor(i[1]),h=Math.max(Math.ceil(i[2])-u,1),f=Math.max(Math.ceil(i[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const w=this.cachedCanvases.getCanvas(g,h,f),A=w.context;A.translate(-u,-d),A.transform(...r);let F=new Path2D;const[C,T,P,O]=t.bbox;if(F.rect(C,T,P-C,O-T),t.matrix){const V=new Path2D;V.addPath(F,new DOMMatrix(t.matrix)),F=V}A.clip(F),t.smask&&this.smaskStack.push({canvas:w.canvas,context:A,offsetX:u,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,d),n.save()),cg(n,A),this.ctx=A,(N=this.dependencyTracker)==null||N.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=nn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const u=nf.slice();xe.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(e,t,n,r,i,o){if(I(this,ra,iC).call(this),lA(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],d=n[3]-n[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=d,xe.singularValueDecompose2dScale(nn(this.ctx),zs);const{viewportScale:h}=this,f=Math.ceil(u*this.outputScaleX*h),g=Math.ceil(d*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:w,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(zs[0],0,0,-zs[1],0,d*zs[1]),lA(this.ctx)}else{lA(this.ctx),this.endPath(e);const h=new Path2D;h.rect(n[0],n[1],u,d),this.ctx.clip(h)}}this.current=new hR(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),I(this,ra,aC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var u;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const r=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,i=0,o,u){var g,w,A;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const h=nn(d);d.transform(n,r,i,o,0,0);const f=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),(g=this.dependencyTracker)==null||g.resetBBox(e);for(let F=0,C=u.length;F<C;F+=2){const T=xe.transform(h,[n,r,i,o,u[F],u[F+1]]);d.drawImage(f.canvas,T[4],T[5]),(w=this.dependencyTracker)==null||w.recordBBox(e,this.ctx,T[4],T[4]+f.canvas.width,T[5],T[5]+f.canvas.height)}d.restore(),this.compose(),(A=this.dependencyTracker)==null||A.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,u,d;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,ii.transformAndFill);for(const h of t){const{data:f,width:g,height:w,transform:A}=h,F=this.cachedCanvases.getCanvas("maskCanvas",g,w),C=F.context;C.save();const T=this.getObject(e,f,h);fR(C,T),C.globalCompositeOperation="source-in",C.fillStyle=i?r.getPattern(C,this,Ca(n),pr.FILL,e):r,C.fillRect(0,0,g,w),C.restore(),n.save(),n.transform(...A),n.scale(1,-1),oA(n,F.canvas,0,0,g,w,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(e,n,0,g,0,w),n.restore()}this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){We("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,r,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){We("Dependent image isn't ready yet");return}const u=o.width,d=o.height,h=[];for(let f=0,g=i.length;f<g;f+=2)h.push({transform:[n,0,0,r,i[f],i[f+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(e,o,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var h;if(!this.contentVisible)return;const n=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/n,-1/r);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,r).context;pR(g,t),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,Ca(i));i.imageSmoothingEnabled=mR(nn(i),t.interpolate),(h=this.dependencyTracker)==null||h.resetBBox(e).recordBBox(e,i,0,n,-r,0).recordDependencies(e,ii.imageXObject).recordOperation(e),oA(i,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,n,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var o,u,d;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const h=t.width,f=t.height,w=this.cachedCanvases.getCanvas("inlineImage",h,f).context;pR(w,t),i=this.applyTransferMapsToCanvas(w)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const h of n)r.save(),r.transform(...h.transform),r.scale(1,-1),oA(r,i,h.x,h.y,h.w,h.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(e,r,0,1,-1,0),r.restore();(d=this.dependencyTracker)==null||d.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ii.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var o,u;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===gR?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(u=this.dependencyTracker)==null||u.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=nn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let o,u;if(n===0&&r===0){const d=Math.abs(t),h=Math.abs(i);if(d===h)if(e===0)o=u=1/d;else{const f=d*e;o=u=f<1?1/f:1}else if(e===0)o=1/d,u=1/h;else{const f=d*e,g=h*e;o=f<1?1/f:1,u=g<1?1/g:1}}else{const d=Math.abs(t*i-n*r),h=Math.hypot(t,n),f=Math.hypot(r,i);if(e===0)o=f/d,u=h/d;else{const g=e*d;o=f>g?f/g:1,u=h>g?h/g:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){n.lineWidth=(r||1)*i,n.stroke(e);return}const u=n.getLineDash();t&&n.save(),n.scale(i,o),qE.a=1/i,qE.d=1/o;const d=new Path2D;if(d.addPath(e,qE),u.length>0){const h=Math.max(i,o);n.setLineDash(u.map(f=>f/h)),n.lineDashOffset/=h}n.lineWidth=r||1,n.stroke(d),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ra=new WeakSet,iC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},aC=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},oC=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let ff=RS;for(const s in ay)ff.prototype[s]!==void 0&&(ff.prototype[ay[s]]=ff.prototype[s]);var Jy,Zy;class Ya{static get workerPort(){return c(this,Jy)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");_(this,Jy,e)}static get workerSrc(){return c(this,Zy)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");_(this,Zy,e)}}Jy=new WeakMap,Zy=new WeakMap,S(Ya,Jy,null),S(Ya,Zy,"");var Jf,ew;class lG{constructor({parsedData:e,rawData:t}){S(this,Jf);S(this,ew);_(this,Jf,e),_(this,ew,t)}getRaw(){return c(this,ew)}get(e){return c(this,Jf).get(e)??null}[Symbol.iterator](){return c(this,Jf).entries()}}Jf=new WeakMap,ew=new WeakMap;const Yp=Symbol("INTERNAL");var tw,nw,rw,Zf;class cG{constructor(e,{name:t,intent:n,usage:r,rbGroups:i}){S(this,tw,!1);S(this,nw,!1);S(this,rw,!1);S(this,Zf,!0);_(this,tw,!!(e&$s.DISPLAY)),_(this,nw,!!(e&$s.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=i}get visible(){if(c(this,rw))return c(this,Zf);if(!c(this,Zf))return!1;const{print:e,view:t}=this.usage;return c(this,tw)?(t==null?void 0:t.viewState)!=="OFF":c(this,nw)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Yp&&At("Internal method `_setVisible` called."),_(this,rw,n),_(this,Zf,t)}}tw=new WeakMap,nw=new WeakMap,rw=new WeakMap,Zf=new WeakMap;var Gc,Pt,em,tm,sw,lC;class uG{constructor(e,t=$s.DISPLAY){S(this,sw);S(this,Gc,null);S(this,Pt,new Map);S(this,em,null);S(this,tm,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,_(this,tm,e.order);for(const n of e.groups)c(this,Pt).set(n.id,new cG(t,n));if(e.baseState==="OFF")for(const n of c(this,Pt).values())n._setVisible(Yp,!1);for(const n of e.on)c(this,Pt).get(n)._setVisible(Yp,!0);for(const n of e.off)c(this,Pt).get(n)._setVisible(Yp,!1);_(this,em,this.getHash())}}isVisible(e){if(c(this,Pt).size===0)return!0;if(!e)return O1("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,Pt).has(e.id)?c(this,Pt).get(e.id).visible:(We(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return I(this,sw,lC).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,Pt).has(t))return We(`Optional content group not found: ${t}`),!0;if(c(this,Pt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,Pt).has(t))return We(`Optional content group not found: ${t}`),!0;if(!c(this,Pt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,Pt).has(t))return We(`Optional content group not found: ${t}`),!0;if(!c(this,Pt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,Pt).has(t))return We(`Optional content group not found: ${t}`),!0;if(c(this,Pt).get(t).visible)return!1}return!0}return We(`Unknown optional content policy ${e.policy}.`),!0}return We(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const r=c(this,Pt).get(e);if(!r){We(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const u of o)u!==e&&((i=c(this,Pt).get(u))==null||i._setVisible(Yp,!1,!0));r._setVisible(Yp,!!t,!0),_(this,Gc,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const i=c(this,Pt).get(r);if(i)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}_(this,Gc,null)}get hasInitialVisibility(){return c(this,em)===null||this.getHash()===c(this,em)}getOrder(){return c(this,Pt).size?c(this,tm)?c(this,tm).slice():[...c(this,Pt).keys()]:null}getGroup(e){return c(this,Pt).get(e)||null}getHash(){if(c(this,Gc)!==null)return c(this,Gc);const e=new EM;for(const[t,n]of c(this,Pt))e.update(`${t}:${n.visible}`);return _(this,Gc,e.hexdigest())}[Symbol.iterator](){return c(this,Pt).entries()}}Gc=new WeakMap,Pt=new WeakMap,em=new WeakMap,tm=new WeakMap,sw=new WeakSet,lC=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=I(this,sw,lC).call(this,i);else if(c(this,Pt).has(i))o=c(this,Pt).get(i).visible;else return We(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};var iw,aw;class U1{constructor(e,t,n){S(this,iw,null);S(this,aw,null);ne(this,"_fullReader",null);ne(this,"_rangeReaders",new Set);ne(this,"_source",null);this._source=e,_(this,iw,t),_(this,aw,n)}get _progressiveDataLength(){var e;return((e=this._fullReader)==null?void 0:e._loaded)??0}getFullReader(){return vt(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(c(this,iw))(this)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new(c(this,aw))(this,e,t);return this._rangeReaders.add(n),n}cancelAllRequests(e){var t;(t=this._fullReader)==null||t.cancel(e);for(const n of new Set(this._rangeReaders))n.cancel(e)}}iw=new WeakMap,aw=new WeakMap;class j1{constructor(e){ne(this,"onProgress",null);ne(this,"_contentLength",0);ne(this,"_filename",null);ne(this,"_headersCapability",Promise.withResolvers());ne(this,"_isRangeSupported",!1);ne(this,"_isStreamingSupported",!1);ne(this,"_loaded",0);ne(this,"_stream",null);this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){At("Abstract method `read` called")}cancel(e){At("Abstract method `cancel` called")}}class $1{constructor(e,t,n){ne(this,"_stream",null);this._stream=e}async read(){At("Abstract method `read` called")}cancel(e){At("Abstract method `cancel` called")}}function yR(s){return s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}var ow,cC;class dG extends U1{constructor(t){super(t,hG,pG);S(this,ow);ne(this,"_progressiveDone",!1);ne(this,"_queuedChunks",[]);const{pdfDataRangeTransport:n}=t,{initialData:r,progressiveDone:i}=n;if((r==null?void 0:r.length)>0){const o=yR(r);this._queuedChunks.push(o)}this._progressiveDone=i,n.addRangeListener((o,u)=>{I(this,ow,cC).call(this,o,u)}),n.addProgressListener((o,u)=>{var d,h;u!==void 0&&((h=(d=this._fullReader)==null?void 0:d.onProgress)==null||h.call(d,{loaded:o,total:u}))}),n.addProgressiveReadListener(o=>{I(this,ow,cC).call(this,void 0,o)}),n.addProgressiveDoneListener(()=>{var o;(o=this._fullReader)==null||o.progressiveDone(),this._progressiveDone=!0}),n.transportReady()}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,n){const r=super.getRangeReader(t,n);return r&&(r.onDone=()=>this._rangeReaders.delete(r),this._source.pdfDataRangeTransport.requestDataRange(t,n)),r}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}ow=new WeakSet,cC=function(t,n){const r=yR(n);if(t===void 0)this._fullReader?this._fullReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.keys().find(o=>o._begin===t);vt(i,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),i._enqueue(r)}};class hG extends j1{constructor(t){super(t);ne(this,"_done",!1);ne(this,"_queuedChunks",null);ne(this,"_requests",[]);const{pdfDataRangeTransport:n,disableRange:r,disableStream:i}=t._source,{length:o,contentDispositionFilename:u}=n;this._queuedChunks=t._queuedChunks||[];for(const d of this._queuedChunks)this._loaded+=d.byteLength;this._done=t._progressiveDone,this._contentLength=o,this._isStreamingSupported=!i,this._isRangeSupported=!r,AS(u)&&(this._filename=u),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class pG extends $1{constructor(t,n,r){super(t,n,r);ne(this,"onDone",null);ne(this,"_begin",-1);ne(this,"_done",!1);ne(this,"_queuedChunk",null);ne(this,"_requests",[]);this._begin=n}_enqueue(t){var n;if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(n=this.onDone)==null||n.call(this)}}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onDone)==null||n.call(this)}}function fG(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let f=u(t);return f=unescape(f),f=d(f),f=h(f),i(f)}if(t=o(s),t){const f=h(t);return i(f)}if(t=n("filename","i").exec(s),t){t=t[1];let f=u(t);return f=h(f),i(f)}function n(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function r(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const w=new TextDecoder(f,{fatal:!0}),A=B1(g);g=w.decode(A),e=!1}catch{}}return g}function i(f){return e&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),e&&(f=r("iso-8859-1",f))),f}function o(f){const g=[];let w;const A=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=A.exec(f))!==null;){let[,C,T,P]=w;if(C=parseInt(C,10),C in g){if(C===0)break;continue}g[C]=[T,P]}const F=[];for(let C=0;C<g.length&&C in g;++C){let[T,P]=g[C];P=u(P),T&&(P=unescape(P),C===0&&(P=d(P))),F.push(P)}return F.join("")}function u(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let w=0;w<g.length;++w){const A=g[w].indexOf('"');A!==-1&&(g[w]=g[w].slice(0,A),g.length=w+1),g[w]=g[w].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function d(f){const g=f.indexOf("'");if(g===-1)return f;const w=f.slice(0,g),F=f.slice(g+1).replace(/^[^']*'/,"");return r(w,F)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,w,A,F){if(A==="q"||A==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,T){return String.fromCharCode(parseInt(T,16))}),r(w,F);try{F=atob(F)}catch{}return r(w,F)})}return""}function MM(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function z1(s){var e;return((e=URL.parse(s))==null?void 0:e.origin)??null}function LM({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(s.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function OM(s){const e=s.get("Content-Disposition");if(e){let t=fG(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(AS(t))return t}return null}function H1(s,e){return new F_(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function BM(s,e){if(s!==e)throw new Error(`Expected range response-origin "${s}" to match "${e}".`)}function VM(s,e,t,n){return fetch(s,{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"})}function UM(s,e){if(s!==200&&s!==206)throw H1(s,e)}function jM(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(We(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class mG extends U1{constructor(t){super(t,gG,yG);ne(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(t.url),this.headers=MM(this.isHttp,t.httpHeaders)}}class gG extends j1{constructor(t){super(t);ne(this,"_abortController",new AbortController);ne(this,"_reader",null);const{disableRange:n,disableStream:r,length:i,rangeChunkSize:o,url:u,withCredentials:d}=t._source;this._contentLength=i,this._isStreamingSupported=!r,this._isRangeSupported=!n;const h=new Headers(t.headers);VM(u,h,d,this._abortController).then(f=>{t._responseOrigin=z1(f.url),UM(f.status,u),this._reader=f.body.getReader();const g=f.headers,{allowRangeRequests:w,suggestedLength:A}=LM({responseHeaders:g,isHttp:t.isHttp,rangeChunkSize:o,disableRange:n});this._isRangeSupported=w,this._contentLength=A||this._contentLength,this._filename=OM(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ru("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var r;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:jM(t),done:!1})}cancel(t){var n;(n=this._reader)==null||n.cancel(t),this._abortController.abort()}}class yG extends $1{constructor(t,n,r){super(t,n,r);ne(this,"_abortController",new AbortController);ne(this,"_readCapability",Promise.withResolvers());ne(this,"_reader",null);const{url:i,withCredentials:o}=t._source,u=new Headers(t.headers);u.append("Range",`bytes=${n}-${r-1}`),VM(i,u,o,this._abortController).then(d=>{const h=z1(d.url);BM(h,t._responseOrigin),UM(d.status,i),this._reader=d.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:{value:jM(t),done:!1}}cancel(t){var n;(n=this._reader)==null||n.cancel(t),this._abortController.abort()}}const KE=200,wR=206;function wG(s){return typeof s!="string"?s:B1(s).buffer}var ja,Jm,$M,zM;class vG extends U1{constructor(t){super(t,AG,_G);S(this,Jm);S(this,ja,new WeakMap);ne(this,"_responseOrigin",null);this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=MM(this.isHttp,t.httpHeaders)}_request(t){const n=new XMLHttpRequest,r={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};c(this,ja).set(n,r),n.open("GET",this.url),n.withCredentials=this._source.withCredentials;for(const[i,o]of this.headers)n.setRequestHeader(i,o);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.validateStatus=i=>i===wR||i===KE):r.validateStatus=i=>i===KE,n.responseType="arraybuffer",vt(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>t.onError(n.status),n.onreadystatechange=I(this,Jm,zM).bind(this,n),n.onprogress=I(this,Jm,$M).bind(this,n),n.send(null),n}_abortRequest(t){c(this,ja).has(t)&&(c(this,ja).delete(t),t.abort())}getRangeReader(t,n){const r=super.getRangeReader(t,n);return r&&(r.onClosed=()=>this._rangeReaders.delete(r)),r}}ja=new WeakMap,Jm=new WeakSet,$M=function(t,n){var i;const r=c(this,ja).get(t);(i=r==null?void 0:r.onProgress)==null||i.call(r,n)},zM=function(t,n){const r=c(this,ja).get(t);if(!r||(t.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),t.readyState!==4)||!c(this,ja).has(t))return;if(c(this,ja).delete(t),t.status===0&&this.isHttp){r.onError(t.status);return}const i=t.status||KE;if(!r.validateStatus(i)){r.onError(t.status);return}const o=wG(t.response);if(i===wR){const u=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(u)?r.onDone(o):(We('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone(o):r.onError(t.status)};var co,HM,WM,GM,qM;class AG extends j1{constructor(t){super(t);S(this,co);ne(this,"_cachedChunks",[]);ne(this,"_done",!1);ne(this,"_requests",[]);ne(this,"_storedError",null);const{length:n}=t._source;this._contentLength=n,this._fullRequestXhr=t._request({onHeadersReceived:I(this,co,HM).bind(this),onDone:I(this,co,WM).bind(this),onError:I(this,co,GM).bind(this),onProgress:I(this,co,qM).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}co=new WeakSet,HM=function(){const t=this._stream,{disableRange:n,rangeChunkSize:r}=t._source,i=this._fullRequestXhr;t._responseOrigin=z1(i.responseURL);const o=i.getAllResponseHeaders(),u=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[g,...w]=f.split(": ");return[g,w.join(": ")]}):[]),{allowRangeRequests:d,suggestedLength:h}=LM({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:r,disableRange:n});d&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=OM(u),this._isRangeSupported&&t._abortRequest(i),this._headersCapability.resolve()},WM=function(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}},GM=function(t){this._storedError=H1(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},qM=function(t){var n;(n=this.onProgress)==null||n.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})};var Nl,KM,QM,uC;class _G extends $1{constructor(t,n,r){super(t,n,r);S(this,Nl);ne(this,"onClosed",null);ne(this,"_done",!1);ne(this,"_queuedChunk",null);ne(this,"_requests",[]);ne(this,"_storedError",null);this._requestXhr=t._request({begin:n,end:r,onHeadersReceived:I(this,Nl,KM).bind(this),onDone:I(this,Nl,QM).bind(this),onError:I(this,Nl,uC).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(n=this.onClosed)==null||n.call(this)}}Nl=new WeakSet,KM=function(){var n;const t=z1((n=this._requestXhr)==null?void 0:n.responseURL);try{BM(t,this._stream._responseOrigin)}catch(r){this._storedError=r,I(this,Nl,uC).call(this,0)}},QM=function(t){var n;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onClosed)==null||n.call(this)},uC=function(t){this._storedError??(this._storedError=H1(t,this._stream.url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const xG=/^[a-z][a-z0-9\-+.]+:/i;function EG(s){if(xG.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}function XM(s){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(s):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(s)}function YM(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(We(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class bG extends U1{constructor(e){super(e,CG,FG),this.url=EG(e.url),vt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class CG extends j1{constructor(t){super(t);ne(this,"_reader",null);const{disableRange:n,disableStream:r,length:i,rangeChunkSize:o}=t._source;this._contentLength=i,this._isStreamingSupported=!r,this._isRangeSupported=!n;const u=t.url,d=process.getBuiltinModule("fs");d.promises.lstat(u).then(h=>{const f=d.createReadStream(u),g=XM(f);this._reader=g.getReader();const{size:w}=h;w<=2*o&&(this._isRangeSupported=!1),this._contentLength=w,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ru("Streaming is disabled.")),this._headersCapability.resolve()}).catch(h=>{h.code==="ENOENT"&&(h=H1(0,u.href)),this._headersCapability.reject(h)})}async read(){var r;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:YM(t),done:!1})}cancel(t){var n;(n=this._reader)==null||n.cancel(t)}}class FG extends $1{constructor(t,n,r){super(t,n,r);ne(this,"_readCapability",Promise.withResolvers());ne(this,"_reader",null);const i=t.url,o=process.getBuiltinModule("fs");try{const u=o.createReadStream(i,{start:n,end:r-1}),d=XM(u);this._reader=d.getReader(),this._readCapability.resolve()}catch(u){this._readCapability.reject(u)}}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:{value:YM(t),done:!1}}cancel(t){var n;(n=this._reader)==null||n.cancel(t)}}const ug=Symbol("INITIAL_DATA");var Ss,lw,dC;class JM{constructor(){S(this,lw);S(this,Ss,Object.create(null))}get(e,t=null){if(t){const r=I(this,lw,dC).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=c(this,Ss)[e];if(!n||n.data===ug)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=c(this,Ss)[e];return!!t&&t.data!==ug}delete(e){const t=c(this,Ss)[e];return!t||t.data===ug?!1:(delete c(this,Ss)[e],!0)}resolve(e,t=null){const n=I(this,lw,dC).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in c(this,Ss)){const{data:n}=c(this,Ss)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}_(this,Ss,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,Ss)){const{data:t}=c(this,Ss)[e];t!==ug&&(yield[e,t])}}}Ss=new WeakMap,lw=new WeakSet,dC=function(e){var t;return(t=c(this,Ss))[e]||(t[e]={...Promise.withResolvers(),data:ug})};const SG=1e5,vR=30;var bR,qc,is,cw,uw,Yd,tl,dw,hw,Jd,pw,nm,Kc,rm,fw,sm,Zd,mw,gw,im,eh,yw,am,om,Ml,ZM,eL,hC,Ks,MA,pC,tL,nL;const ir=class ir{constructor({textContentSource:e,container:t,viewport:n}){S(this,Ml);S(this,qc,Promise.withResolvers());S(this,is,null);S(this,cw,!1);S(this,uw,!!((bR=globalThis.FontInspector)!=null&&bR.enabled));S(this,Yd,null);S(this,tl,null);S(this,dw,0);S(this,hw,0);S(this,Jd,null);S(this,pw,null);S(this,nm,0);S(this,Kc,0);S(this,rm,Object.create(null));S(this,fw,[]);S(this,sm,null);S(this,Zd,[]);S(this,mw,new WeakMap);S(this,gw,null);var d;if(e instanceof ReadableStream)_(this,sm,e);else if(typeof e=="object")_(this,sm,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');_(this,is,_(this,pw,t)),_(this,Kc,n.scale*lo.pixelRatio),_(this,nm,n.rotation),_(this,tl,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:u}=n.rawDims;_(this,gw,[1,0,0,-1,-o,u+i]),_(this,hw,r),_(this,dw,i),I(d=ir,Ks,tL).call(d),t.style.setProperty("--min-font-size",c(ir,am)),Hh(t,n),c(this,qc).promise.finally(()=>{c(ir,om).delete(this),_(this,tl,null),_(this,rm,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=$n.platform;return Ge(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Jd).read().then(({value:t,done:n})=>{if(n){c(this,qc).resolve();return}c(this,Yd)??_(this,Yd,t.lang),Object.assign(c(this,rm),t.styles),I(this,Ml,ZM).call(this,t.items),e()},c(this,qc).reject)};return _(this,Jd,c(this,sm).getReader()),c(ir,om).add(this),e(),c(this,qc).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*lo.pixelRatio,r=e.rotation;if(r!==c(this,nm)&&(t==null||t(),_(this,nm,r),Hh(c(this,pw),{rotation:r})),n!==c(this,Kc)){t==null||t(),_(this,Kc,n);const o={div:null,properties:null,ctx:I(i=ir,Ks,MA).call(i,c(this,Yd))};for(const u of c(this,Zd))o.properties=c(this,mw).get(u),o.div=u,I(this,Ml,hC).call(this,o)}}cancel(){var t;const e=new Ru("TextLayer task cancelled.");(t=c(this,Jd))==null||t.cancel(e).catch(()=>{}),_(this,Jd,null),c(this,qc).reject(e)}get textDivs(){return c(this,Zd)}get textContentItemsStr(){return c(this,fw)}static cleanup(){if(!(c(this,om).size>0)){c(this,im).clear();for(const{canvas:e}of c(this,eh).values())e.remove();c(this,eh).clear()}}};qc=new WeakMap,is=new WeakMap,cw=new WeakMap,uw=new WeakMap,Yd=new WeakMap,tl=new WeakMap,dw=new WeakMap,hw=new WeakMap,Jd=new WeakMap,pw=new WeakMap,nm=new WeakMap,Kc=new WeakMap,rm=new WeakMap,fw=new WeakMap,sm=new WeakMap,Zd=new WeakMap,mw=new WeakMap,gw=new WeakMap,im=new WeakMap,eh=new WeakMap,yw=new WeakMap,am=new WeakMap,om=new WeakMap,Ml=new WeakSet,ZM=function(e){var r,i;if(c(this,cw))return;(i=c(this,tl)).ctx??(i.ctx=I(r=ir,Ks,MA).call(r,c(this,Yd)));const t=c(this,Zd),n=c(this,fw);for(const o of e){if(t.length>SG){We("Ignoring additional textDivs for performance reasons."),_(this,cw,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const u=c(this,is);_(this,is,document.createElement("span")),c(this,is).classList.add("markedContent"),o.id&&c(this,is).setAttribute("id",`${o.id}`),o.tag==="Artifact"&&(c(this,is).ariaHidden=!0),u.append(c(this,is))}else o.type==="endMarkedContent"&&_(this,is,c(this,is).parentNode);continue}n.push(o.str),I(this,Ml,eL).call(this,o)}},eL=function(e){var F;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Zd).push(t);const r=xe.transform(c(this,gw),e.transform);let i=Math.atan2(r[1],r[0]);const o=c(this,rm)[e.fontName];o.vertical&&(i+=Math.PI/2);let u=c(this,uw)&&o.fontSubstitution||o.fontFamily;u=ir.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),h=d*I(F=ir,Ks,nL).call(F,u,o,c(this,Yd));let f,g;i===0?(f=r[4],g=r[5]-h):(f=r[4]+h*Math.sin(i),g=r[5]-h*Math.cos(i));const w=t.style;w.left=`${(100*f/c(this,hw)).toFixed(2)}%`,w.top=`${(100*g/c(this,dw)).toFixed(2)}%`,w.setProperty("--font-height",`${d.toFixed(2)}px`),w.fontFamily=u,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,uw)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),T=Math.abs(e.transform[3]);C!==T&&Math.max(C,T)/Math.min(C,T)>1.5&&(A=!0)}if(A&&(n.canvasWidth=o.vertical?e.height:e.width),c(this,mw).set(t,n),c(this,tl).div=t,c(this,tl).properties=n,I(this,Ml,hC).call(this,c(this,tl)),n.hasText&&c(this,is).append(t),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),c(this,is).append(C)}},hC=function(e){var o;const{div:t,properties:n,ctx:r}=e,{style:i}=t;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=i,{canvasWidth:d,fontSize:h}=n;I(o=ir,Ks,pC).call(o,r,h*c(this,Kc),u);const{width:f}=r.measureText(t.textContent);f>0&&i.setProperty("--scale-x",d*c(this,Kc)/f)}n.angle!==0&&i.setProperty("--rotate",`${n.angle}deg`)},Ks=new WeakSet,MA=function(e=null){let t=c(this,eh).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,eh).set(e,t),c(this,yw).set(t,{size:0,family:""})}return t},pC=function(e,t,n){const r=c(this,yw).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},tL=function(){if(c(this,am)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),_(this,am,e.getBoundingClientRect().height),e.remove()},nL=function(e,t,n){const r=c(this,im).get(e);if(r)return r;const i=I(this,Ks,MA).call(this,n);i.canvas.width=i.canvas.height=vR,I(this,Ks,pC).call(this,i,vR,e);const o=i.measureText(""),u=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let h=.8;return u?h=u/(u+d):($n.platform.isFirefox&&We("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),c(this,im).set(e,h),h},S(ir,Ks),S(ir,im,new Map),S(ir,eh,new Map),S(ir,yw,new WeakMap),S(ir,am,null),S(ir,om,new Set);let cy=ir;const TG=100;function rL(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new fC,{docId:t}=e,n=s.url?LW(s.url):null,r=s.data?OW(s.data):null,i=s.httpHeaders||null,o=s.withCredentials===!0,u=s.password??null,d=s.range instanceof sL?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let f=s.worker instanceof uy?s.worker:null;const g=s.verbosity,w=typeof s.docBaseUrl=="string"&&!V1(s.docBaseUrl)?s.docBaseUrl:null,A=rA(s.cMapUrl),F=s.cMapPacked!==!1,C=s.CMapReaderFactory||(zr?WW:rR),T=rA(s.iccUrl),P=rA(s.standardFontDataUrl),O=s.StandardFontDataFactory||(zr?GW:sR),N=rA(s.wasmUrl),V=s.WasmFactory||(zr?qW:iR),z=s.stopAtErrors!==!0,W=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,D=s.isEvalSupported!==!1,R=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!zr,L=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!zr&&($n.platform.isFirefox||!globalThis.chrome),U=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,$=typeof s.disableFontFace=="boolean"?s.disableFontFace:zr,G=s.fontExtraProperties===!0,j=s.enableXfa===!0,ye=s.ownerDocument||globalThis.document,ce=s.disableRange===!0,de=s.disableStream===!0,me=s.disableAutoFetch===!0,ie=s.pdfBug===!0,ve=s.CanvasFactory||(zr?HW:jW),fe=s.FilterFactory||(zr?zW:$W),X=s.enableHWA===!0,re=s.useWasm!==!1,_e=d?d.length:s.length??NaN,De=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!zr&&!$,ke=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(C===rR&&O===sR&&V===iR&&A&&P&&N&&vg(A,document.baseURI)&&vg(P,document.baseURI)&&vg(N,document.baseURI)),Me=null;cW(g);const Ne={canvasFactory:new ve({ownerDocument:ye,enableHWA:X}),filterFactory:new fe({docId:t,ownerDocument:ye}),cMapReaderFactory:ke?null:new C({baseUrl:A,isCompressed:F}),standardFontDataFactory:ke?null:new O({baseUrl:P}),wasmFactory:ke?null:new V({baseUrl:N})};f||(f=uy.create({verbosity:g,port:Ya.workerPort}),e._worker=f);const et={docId:t,apiVersion:"5.4.624",data:r,password:u,disableAutoFetch:me,rangeChunkSize:h,length:_e,docBaseUrl:w,enableXfa:j,evaluatorOptions:{maxImageSize:W,disableFontFace:$,ignoreErrors:z,isEvalSupported:D,isOffscreenCanvasSupported:R,isImageDecoderSupported:L,canvasMaxAreaInBytes:U,fontExtraProperties:G,useSystemFonts:De,useWasm:re,useWorkerFetch:ke,cMapUrl:A,iccUrl:T,standardFontDataUrl:P,wasmUrl:N}},dt={ownerDocument:ye,pdfBug:ie,styleElement:Me,enableHWA:X,loadingParams:{disableAutoFetch:me,enableXfa:j}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const he=f.messageHandler.sendWithPromise("GetDocRequest",et,r?[r.buffer]:null);let Ke;if(d)Ke=new dG({pdfDataRangeTransport:d,disableRange:ce,disableStream:de});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const zn=vg(n)?mG:zr?bG:vG;Ke=new zn({url:n,length:_e,httpHeaders:i,withCredentials:o,rangeChunkSize:h,disableRange:ce,disableStream:de})}return he.then(zn=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Nr=new Sg(t,zn,f.port),Ol=new PG(Nr,e,Ke,dt,Ne);e._transport=Ol,Nr.send("Ready",null)})}).catch(e._capability.reject),e}var K_;const Q_=class Q_{constructor(){ne(this,"_capability",Promise.withResolvers());ne(this,"_transport",null);ne(this,"_worker",null);ne(this,"docId",`d${Ln(Q_,K_)._++}`);ne(this,"destroyed",!1);ne(this,"onPassword",null);ne(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};K_=new WeakMap,S(Q_,K_,0);let fC=Q_;var th,ww,vw,Aw,_w;class sL{constructor(e,t,n=!1,r=null){S(this,th,Promise.withResolvers());S(this,ww,[]);S(this,vw,[]);S(this,Aw,[]);S(this,_w,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){c(this,_w).push(e)}addProgressListener(e){c(this,Aw).push(e)}addProgressiveReadListener(e){c(this,vw).push(e)}addProgressiveDoneListener(e){c(this,ww).push(e)}onDataRange(e,t){for(const n of c(this,_w))n(e,t)}onDataProgress(e,t){c(this,th).promise.then(()=>{for(const n of c(this,Aw))n(e,t)})}onDataProgressiveRead(e){c(this,th).promise.then(()=>{for(const t of c(this,vw))t(e)})}onDataProgressiveDone(){c(this,th).promise.then(()=>{for(const e of c(this,ww))e()})}transportReady(){c(this,th).resolve()}requestDataRange(e,t){At("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}th=new WeakMap,ww=new WeakMap,vw=new WeakMap,Aw=new WeakMap,_w=new WeakMap;class kG{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ge(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var nl,xw,nh,Rg;class IG{constructor(e,t,n,r=!1){S(this,nh);S(this,nl,!1);S(this,xw,ly.instance);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new XP:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new JM,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new C0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ge(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:i=_c.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:w=!1,recordOperations:A=!1,operationsFilter:F=null}){var L,U,$;(L=this._stats)==null||L.time("Overall");const C=this._transport.getRenderingIntent(r,i,g,w),{renderingIntent:T,cacheKey:P}=C;_(this,nl,!1),d||(d=this._transport.getOptionalContentConfig(T));let O=this._intentStates.get(P);O||(O=Object.create(null),this._intentStates.set(P,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const N=!!(T&$s.PRINT);O.displayReadyCapability||(O.displayReadyCapability=Promise.withResolvers(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(U=this._stats)==null||U.time("Page Request"),this._pumpOperatorList(C));const V=!!(this._pdfBug&&(($=globalThis.StepperManager)!=null&&$.enabled)),z=!this.recordedBBoxes&&(A||V),W=G=>{var j,ye;if(O.renderTasks.delete(D),z){const ce=(j=D.gfx)==null?void 0:j.dependencyTracker.take();ce&&(D.stepper&&D.stepper.setOperatorBBoxes(ce,D.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=ce))}N&&_(this,nl,!0),I(this,nh,Rg).call(this),G?(D.capability.reject(G),this._abortOperatorList({intentState:O,reason:G instanceof Error?G:new Error(G)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(ye=globalThis.Stats)!=null&&ye.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new mC({callback:W,params:{canvas:t,canvasContext:e,dependencyTracker:z?new QW(t,O.operatorList.length,V):null,viewport:n,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:F});(O.renderTasks||(O.renderTasks=new Set)).add(D);const R=D.task;return Promise.all([O.displayReadyCapability.promise,d]).then(([G,j])=>{var ye;if(this.destroyed){W();return}if((ye=this._stats)==null||ye.time("Rendering"),!(j.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:G,optionalContentConfig:j}),D.operatorListChanged()}).catch(W),R}getOperatorList({intent:e="display",annotationMode:t=_c.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var h;function i(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const o=this._transport.getRenderingIntent(e,t,n,r,!0);let u=this._intentStates.get(o.cacheKey);u||(u=Object.create(null),this._intentStates.set(o.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=i,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:c(this,xw).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>oy.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function i(){o.read().then(function({value:d,done:h}){if(h){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),i()},r)}const o=t.getReader(),u={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),_(this,nl,!1),Promise.all(e)}cleanup(e=!1){_(this,nl,!0);const t=I(this,nh,Rg).call(this);return e&&t&&this._stats&&(this._stats=new XP),t}_startRenderPage(e,t){var r,i;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&I(this,nh,Rg).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:i,transfer:o}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:c(this,xw).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),h=this._intentStates.get(t);h.streamReader=d;const f=()=>{d.read().then(({value:g,done:w})=>{if(w){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const w of h.renderTasks)w.operatorListChanged();I(this,nh,Rg).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof vS){let r=TG;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Ru(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}nl=new WeakMap,xw=new WeakMap,nh=new WeakSet,Rg=function(){if(!c(this,nl)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_(this,nl,!1),!0};var Qc,zi,rl,rh,X_,sh,ih,Wr,LA,iL,aL,Dg,lm,OA;const qt=class qt{constructor({name:e=null,port:t=null,verbosity:n=uW()}={}){S(this,Wr);S(this,Qc,Promise.withResolvers());S(this,zi,null);S(this,rl,null);S(this,rh,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(c(qt,ih).has(t))throw new Error("Cannot use more than one PDFWorker per port.");c(qt,ih).set(t,this),I(this,Wr,iL).call(this,t)}else I(this,Wr,aL).call(this)}get promise(){return c(this,Qc).promise}get port(){return c(this,rl)}get messageHandler(){return c(this,zi)}destroy(){var e,t;this.destroyed=!0,(e=c(this,rh))==null||e.terminate(),_(this,rh,null),c(qt,ih).delete(c(this,rl)),_(this,rl,null),(t=c(this,zi))==null||t.destroy(),_(this,zi,null)}static create(e){const t=c(this,ih).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new qt(e)}static get workerSrc(){if(Ya.workerSrc)return Ya.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ge(this,"_setupFakeWorkerGlobal",(async()=>c(this,lm,OA)?c(this,lm,OA):(await import(this.workerSrc)).WorkerMessageHandler)())}};Qc=new WeakMap,zi=new WeakMap,rl=new WeakMap,rh=new WeakMap,X_=new WeakMap,sh=new WeakMap,ih=new WeakMap,Wr=new WeakSet,LA=function(){c(this,Qc).resolve(),c(this,zi).send("configure",{verbosity:this.verbosity})},iL=function(e){_(this,rl,e),_(this,zi,new Sg("main","worker",e)),c(this,zi).on("ready",()=>{}),I(this,Wr,LA).call(this)},aL=function(){if(c(qt,sh)||c(qt,lm,OA)){I(this,Wr,Dg).call(this);return}let{workerSrc:e}=qt;try{qt._isSameOrigin(window.location,e)||(e=qt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Sg("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?c(this,Qc).reject(new Error("Worker was destroyed")):I(this,Wr,Dg).call(this)},i=new AbortController;t.addEventListener("error",()=>{c(this,rh)||r()},{signal:i.signal}),n.on("test",u=>{if(i.abort(),this.destroyed||!u){r();return}_(this,zi,n),_(this,rl,t),_(this,rh,t),I(this,Wr,LA).call(this)}),n.on("ready",u=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{I(this,Wr,Dg).call(this)}});const o=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};o();return}catch{O1("The worker has been disabled.")}I(this,Wr,Dg).call(this)},Dg=function(){c(qt,sh)||(We("Setting up fake worker."),_(qt,sh,!0)),qt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){c(this,Qc).reject(new Error("Worker was destroyed"));return}const t=new UW;_(this,rl,t);const n=`fake${Ln(qt,X_)._++}`,r=new Sg(n+"_worker",n,t);e.setup(r,t),_(this,zi,new Sg(n,n+"_worker",t)),I(this,Wr,LA).call(this)}).catch(e=>{c(this,Qc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},lm=new WeakSet,OA=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},S(qt,lm),S(qt,X_,0),S(qt,sh,!1),S(qt,ih,new WeakMap),zr&&(_(qt,sh,!0),Ya.workerSrc||(Ya.workerSrc="./pdf.worker.mjs")),qt._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},qt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},qt.fromPort=e=>{if(xW("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return qt.create(e)};let uy=qt;var Ts,sl,il,gi,Xc,cm,al,as,qs,oL,Ng,BA;class PG{constructor(e,t,n,r,i){S(this,qs);ne(this,"downloadInfoCapability",Promise.withResolvers());S(this,Ts,null);S(this,sl,new Map);S(this,il,null);S(this,gi,new Map);S(this,Xc,new Map);S(this,cm,new Map);S(this,al,null);S(this,as,ly.instance);this.messageHandler=e,this.loadingTask=t,_(this,il,n),this.commonObjs=new JM,this.fontLoader=new DW({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),c(this,as).addListener(I(this,qs,oL).bind(this))}get annotationStorage(){return Ge(this,"annotationStorage",new _S)}getRenderingIntent(e,t=_c.ENABLE,n=null,r=!1,i=!1){let o=$s.DISPLAY,u=Qb;switch(e){case"any":o=$s.ANY;break;case"display":break;case"print":o=$s.PRINT;break;default:We(`getRenderingIntent - invalid intent: ${e}`)}const d=o&$s.PRINT&&n instanceof CM?n:this.annotationStorage;switch(t){case _c.DISABLE:o+=$s.ANNOTATIONS_DISABLE;break;case _c.ENABLE:break;case _c.ENABLE_FORMS:o+=$s.ANNOTATIONS_FORMS;break;case _c.ENABLE_STORAGE:o+=$s.ANNOTATIONS_STORAGE,u=d.serializable;break;default:We(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=$s.IS_EDITING),i&&(o+=$s.OPLIST);const{ids:h,hash:f}=d.modifiedIds,g=[o,u.hash,f];return{renderingIntent:o,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,al))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,gi).values())e.push(r._destroy());c(this,gi).clear(),c(this,Xc).clear(),c(this,cm).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),c(this,sl).clear(),this.filterFactory.destroy(),cy.cleanup(),(r=c(this,il))==null||r.cancelAllRequests(new Ru("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{vt(c(this,il),"GetReader - no `BasePDFStream` instance available."),_(this,Ts,c(this,il).getFullReader()),c(this,Ts).onProgress=i=>I(this,qs,BA).call(this,i),r.onPull=()=>{c(this,Ts).read().then(function({value:i,done:o}){if(o){r.close();return}vt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{c(this,Ts).cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{await c(this,Ts).headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=c(this,Ts);return r&&i&&(c(this,Ts).onProgress=null),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(n,r)=>{vt(c(this,il),"GetRangeReader - no `BasePDFStream` instance available.");const i=c(this,il).getRangeReader(n.begin,n.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:u}){if(u){r.close();return}vt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:n})=>{c(this,as).pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new kG(n,this))}),e.on("DocException",n=>{t._capability.reject(Zr(n))}),e.on("PasswordRequest",n=>{_(this,al,Promise.withResolvers());try{if(!t.onPassword)throw Zr(n);const r=i=>{i instanceof Error?c(this,al).reject(i):c(this,al).resolve({password:i})};t.onPassword(r,n.code)}catch(r){c(this,al).reject(r)}return c(this,al).promise}),e.on("DataLoaded",n=>{I(this,qs,BA).call(this,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,gi).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in i){const w=i.error;We(`Error during font loading: ${w}`),this.commonObjs.resolve(n,w);break}const u=new Xb(i),d=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(w,A)=>globalThis.FontInspector.fontAdded(w,A):null,h=new NW(u,d,i.extra,i.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:f}=i;vt(f,"The imageRef must be defined.");for(const w of c(this,gi).values())for(const[,A]of w.objs)if((A==null?void 0:A.ref)===f)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new MW(i));break;case"Image":this.commonObjs.resolve(n,i);break;case"Pattern":const g=new Yb(i);this.commonObjs.resolve(n,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,i,o])=>{var d;if(this.destroyed)return;const u=c(this,gi).get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=o==null?void 0:o.bitmap)==null||d.close();return}switch(i){case"Image":case"Pattern":u.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{this.destroyed||I(this,qs,BA).call(this,n)}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&We("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=c(this,Ts))==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>c(this,as).pagesNumber)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=c(this,as).getPageId(e)-1,r=c(this,Xc).get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&c(this,cm).set(o.refStr,n);const u=new IG(t,o,this,this._params.pdfBug);return c(this,gi).set(t,u),u});return c(this,Xc).set(t,i),i}async getPageIndex(e){if(!Jb(e))throw new Error("Invalid pageIndex request.");const t=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return c(this,as).getPageNumber(t+1)-1}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c(this,as).getPageId(e+1)-1,intent:t})}getFieldObjects(){return I(this,qs,Ng).call(this,"GetFieldObjects")}hasJSActions(){return I(this,qs,Ng).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return I(this,qs,Ng).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c(this,as).getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c(this,as).getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return I(this,qs,Ng).call(this,"GetOptionalContentConfig").then(t=>new uG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,sl).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new lG(r[1]):null,contentDispositionFilename:((i=c(this,Ts))==null?void 0:i.filename)??null,contentLength:((o=c(this,Ts))==null?void 0:o.contentLength)??null,hasStructTree:r[2]}});return c(this,sl).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,gi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,sl).clear(),this.filterFactory.destroy(!0),cy.cleanup()}}cachedPageNumber(e){if(!Jb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,n=c(this,cm).get(t);return n>=0?c(this,as).getPageNumber(n+1):null}}Ts=new WeakMap,sl=new WeakMap,il=new WeakMap,gi=new WeakMap,Xc=new WeakMap,cm=new WeakMap,al=new WeakMap,as=new WeakMap,qs=new WeakSet,oL=function(){const e=new Map,t=new Map;for(let n=0,r=c(this,as).pagesNumber;n<r;n++){const i=c(this,as).getPrevPageNumber(n+1)-1,o=c(this,gi).get(i);o&&e.set(n,o);const u=c(this,Xc).get(i);u&&t.set(n,u)}_(this,gi,e),_(this,Xc,t)},Ng=function(e,t=null){const n=c(this,sl).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return c(this,sl).set(e,r),r},BA=function({loaded:e,total:t}){var n,r;(r=(n=this.loadingTask).onProgress)==null||r.call(n,{loaded:e,total:t,percent:dr(Math.round(e/t*100),0,100)})};class RG{constructor(e){ne(this,"_internalRenderTask",null);ne(this,"onContinue",null);ne(this,"onError",null);this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this._internalRenderTask;return e.form||e.canvas&&(t==null?void 0:t.size)>0}}var Yc,ah;const vd=class vd{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:u,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:w=null,enableHWA:A=!1,operationsFilter:F=null}){S(this,Yc,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=g,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RG(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=A,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=F}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var d,h;if(this.cancelled)return;if(this._canvas){if(c(vd,ah).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(vd,ah).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:i,dependencyTracker:o}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ff(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(e=null,t=0){var n,r,i;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,Yc)&&(window.cancelAnimationFrame(c(this,Yc)),_(this,Yc,null)),c(vd,ah).delete(this._canvas),e||(e=new vS(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?_(this,Yc,window.requestAnimationFrame(()=>{_(this,Yc,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(vd,ah).delete(this._canvas),this.callback())))}};Yc=new WeakMap,ah=new WeakMap,S(vd,ah,new WeakSet);let mC=vd;const DG="5.4.624",NG="384c6208b";var ks,oh,um,Vn,Ew,dm,ol,bw,Jc,Hi,Cw,Rt,gC,yC,wC,md,lL,fc;const es=class es{constructor({editor:e=null,uiManager:t=null}){S(this,Rt);S(this,ks,null);S(this,oh,null);S(this,um);S(this,Vn,null);S(this,Ew,!1);S(this,dm,!1);S(this,ol,null);S(this,bw);S(this,Jc,null);S(this,Hi,null);var n,r;e?(_(this,dm,!1),_(this,ol,e)):_(this,dm,!0),_(this,Hi,(e==null?void 0:e._uiManager)||t),_(this,bw,c(this,Hi)._eventBus),_(this,um,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((r=c(this,Hi))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),c(es,Cw)||_(es,Cw,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ge(this,"_keyboardManager",new S0([[["Escape","mac+Escape"],es.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],es.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],es.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],es.prototype._moveToPrevious],[["Home","mac+Home"],es.prototype._moveToBeginning],[["End","mac+End"],es.prototype._moveToEnd]]))}renderButton(){const e=_(this,ks,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",c(this,ol)&&(e.ariaControls=`${c(this,ol).id}_colorpicker_dropdown`);const t=c(this,Hi)._signal;e.addEventListener("click",I(this,Rt,md).bind(this),{signal:t}),e.addEventListener("keydown",I(this,Rt,wC).bind(this),{signal:t});const n=_(this,oh,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=c(this,um),e.append(n),e}renderMainDropdown(){const e=_(this,Vn,I(this,Rt,gC).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===c(this,ks)){I(this,Rt,md).call(this,e);return}const t=e.target.getAttribute("data-color");t&&I(this,Rt,yC).call(this,t,e)}_moveToNext(e){var t,n;if(!c(this,Rt,fc)){I(this,Rt,md).call(this,e);return}if(e.target===c(this,ks)){(t=c(this,Vn).firstElementChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=c(this,Vn))==null?void 0:t.firstElementChild)||e.target===c(this,ks)){c(this,Rt,fc)&&this._hideDropdownFromKeyboard();return}c(this,Rt,fc)||I(this,Rt,md).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!c(this,Rt,fc)){I(this,Rt,md).call(this,e);return}(t=c(this,Vn).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Rt,fc)){I(this,Rt,md).call(this,e);return}(t=c(this,Vn).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,Vn))==null||e.classList.add("hidden"),c(this,ks).ariaExpanded="false",(t=c(this,Jc))==null||t.abort(),_(this,Jc,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,dm)){if(!c(this,Rt,fc)){(e=c(this,ol))==null||e.unselect();return}this.hideDropdown(),c(this,ks).focus({preventScroll:!0,focusVisible:c(this,Ew)})}}updateColor(e){if(c(this,oh)&&(c(this,oh).style.backgroundColor=e),!c(this,Vn))return;const t=c(this,Hi).highlightColors.values();for(const n of c(this,Vn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=c(this,ks))==null||e.remove(),_(this,ks,null),_(this,oh,null),(t=c(this,Vn))==null||t.remove(),_(this,Vn,null)}};ks=new WeakMap,oh=new WeakMap,um=new WeakMap,Vn=new WeakMap,Ew=new WeakMap,dm=new WeakMap,ol=new WeakMap,bw=new WeakMap,Jc=new WeakMap,Hi=new WeakMap,Cw=new WeakMap,Rt=new WeakSet,gC=function(){const e=document.createElement("div"),t=c(this,Hi)._signal;e.addEventListener("contextmenu",Ci,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,ol)&&(e.id=`${c(this,ol).id}_colorpicker_dropdown`);for(const[n,r]of c(this,Hi).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",c(es,Cw)[n]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===c(this,um),i.addEventListener("click",I(this,Rt,yC).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",I(this,Rt,wC).bind(this),{signal:t}),e},yC=function(e,t){t.stopPropagation(),c(this,bw).dispatch("switchannotationeditorparams",{source:this,type:lt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},wC=function(e){es._keyboardManager.exec(this,e)},md=function(e){if(c(this,Rt,fc)){this.hideDropdown();return}if(_(this,Ew,e.detail===0),c(this,Jc)||(_(this,Jc,new AbortController),window.addEventListener("pointerdown",I(this,Rt,lL).bind(this),{signal:c(this,Hi).combinedSignal(c(this,Jc))})),c(this,ks).ariaExpanded="true",c(this,Vn)){c(this,Vn).classList.remove("hidden");return}const t=_(this,Vn,I(this,Rt,gC).call(this));c(this,ks).append(t)},lL=function(e){var t;(t=c(this,Vn))!=null&&t.contains(e.target)||this.hideDropdown()},fc=function(){return c(this,Vn)&&!c(this,Vn).classList.contains("hidden")},S(es,Cw,null);let D_=es;var $a,Fw,hm,Sw;const Ad=class Ad{constructor(e){S(this,$a,null);S(this,Fw,null);S(this,hm,null);_(this,Fw,e),_(this,hm,e._uiManager),c(Ad,Sw)||_(Ad,Sw,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,$a))return c(this,$a);const{editorType:e,colorType:t,color:n}=c(this,Fw),r=_(this,$a,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",c(Ad,Sw)[e]),r.addEventListener("input",()=>{c(this,hm).updateParams(t,r.value)},{signal:c(this,hm)._signal}),r}update(e){c(this,$a)&&(c(this,$a).value=e)}destroy(){var e;(e=c(this,$a))==null||e.remove(),_(this,$a,null)}hideDropdown(){}};$a=new WeakMap,Fw=new WeakMap,hm=new WeakMap,Sw=new WeakMap,S(Ad,Sw,null);let N_=Ad;function AR(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function dg(s){return Math.max(0,Math.min(255,255*s))}class _R{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=dg(e),[e,e,e]}static G_HTML([e]){const t=AR(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(dg)}static RGB_HTML(e){return`#${e.map(AR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[dg(1-Math.min(1,e+r)),dg(1-Math.min(1,n+r)),dg(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,i=1-t,o=1-n,u=Math.min(r,i,o);return["CMYK",r,i,o,u]}}class MG{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){At("Abstract method `_createSVG` called.")}}class M_ extends MG{_createSVG(e){return document.createElementNS(Ro,e)}}const LG=9,Gh=new WeakSet,OG=new Date().getTimezoneOffset()*60*1e3;class QE{static create(e){switch(e.data.annotationType){case Sn.LINK:return new bS(e);case Sn.TEXT:return new VG(e);case Sn.WIDGET:switch(e.data.fieldType){case"Tx":return new UG(e);case"Btn":return e.data.radioButton?new dL(e):e.data.checkBox?new $G(e):new zG(e);case"Ch":return new HG(e);case"Sig":return new jG(e)}return new tp(e);case Sn.POPUP:return new AC(e);case Sn.FREETEXT:return new gL(e);case Sn.LINE:return new GG(e);case Sn.SQUARE:return new qG(e);case Sn.CIRCLE:return new KG(e);case Sn.POLYLINE:return new yL(e);case Sn.CARET:return new XG(e);case Sn.INK:return new CS(e);case Sn.POLYGON:return new QG(e);case Sn.HIGHLIGHT:return new wL(e);case Sn.UNDERLINE:return new YG(e);case Sn.SQUIGGLY:return new JG(e);case Sn.STRIKEOUT:return new ZG(e);case Sn.STAMP:return new vL(e);case Sn.FILEATTACHMENT:return new eq(e);default:return new rn(e)}}}var lh,pm,yi,Tw,vC;const DS=class DS{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){S(this,Tw);S(this,lh,null);S(this,pm,!1);S(this,yi,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return DS._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const e=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:r}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let d=0;d<t.length;d+=8)t[d+1]>o?(o=t[d+1],i=t[d+2]):t[d+1]===o&&(i=Math.max(i,t[d+2]));return[i,o]}if((n==null?void 0:n.length)>=1){for(const d of n)for(let h=0,f=d.length;h<f;h+=2)d[h+1]>o?(o=d[h+1],i=d[h]):d[h+1]===o&&(i=Math.max(i,d[h]));if(i!==1/0)return[i,o]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/n,e[1]=100*(e[1]-o)/r,e}get commentText(){var t,n,r;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${iy}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${iy}${t.id}`,{id:t.id,annotationType:t.annotationType,page:this.parent.page,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=c(this,yi))==null?void 0:e.popup)||this.popup)==null||t.remove(),_(this,yi,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(c(this,lh)||_(this,lh,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&I(this,Tw,vC).call(this,t);let r=((i=c(this,yi))==null?void 0:i.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=c(this,yi).popup),r&&(r.updateEdited(e),n!=null&&n.deleted&&(r.remove(),_(this,yi,null),this.popup=null))}resetEdited(){var e;c(this,lh)&&(I(this,Tw,vC).call(this,c(this,lh).rect),(e=c(this,yi))==null||e.popup.resetEdited(),_(this,lh,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof tp)&&!(this instanceof bS)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof AC){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,i),i}const{width:u,height:d}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,T=t.borderStyle.verticalCornerRadius;if(C>0||T>0){const O=`calc(${C}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;o.borderRadius=O}else if(this instanceof dL){const O=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;o.borderRadius=O}switch(t.borderStyle.style){case Gp.SOLID:o.borderStyle="solid";break;case Gp.DASHED:o.borderStyle="dashed";break;case Gp.BEVELED:We("Unimplemented border style: beveled");break;case Gp.INSET:We("Unimplemented border style: inset");break;case Gp.UNDERLINE:o.borderBottomStyle="solid";break}const P=t.borderColor||null;P?(_(this,pm,!0),o.borderColor=xe.makeHexColor(P[0]|0,P[1]|0,P[2]|0)):o.borderWidth=0}const h=xe.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:g,pageX:w,pageY:A}=r.rawDims;o.left=`${100*(h[0]-w)/f}%`,o.top=`${100*(h[1]-A)/g}%`;const{rotation:F}=t;return t.hasOwnCanvas||F===0?(o.width=`${100*u/f}%`,o.height=`${100*d/g}%`):this.setRotation(F,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/n}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const i=r.detail[t],o=i[0],u=i.slice(1);r.target.style[n]=_R[`${o}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:_R[`${o}_rgb`](u)})};return Ge(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const o=n[r];if(o){const u={detail:{[r]:i},target:e};o(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,T,P,O]=e.subarray(2,6);if(r===C&&i===T&&t===P&&n===O)return}const{style:o}=this.container;let u;if(c(this,pm)){const{borderColor:C,borderWidth:T}=o;o.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=r-t,h=i-n,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const w=f.createElement("defs");g.append(w);const A=f.createElement("clipPath"),F=`clippath_${this.data.id}`;A.setAttribute("id",F),A.setAttribute("clipPathUnits","objectBoundingBox"),w.append(A);for(let C=2,T=e.length;C<T;C+=8){const P=e[C],O=e[C+1],N=e[C+2],V=e[C+3],z=f.createElement("rect"),W=(N-t)/d,D=(i-O)/h,R=(P-N)/d,L=(O-V)/h;z.setAttribute("x",W),z.setAttribute("y",D),z.setAttribute("width",R),z.setAttribute("height",L),A.append(z),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${W}" y="${D}" width="${R}" height="${L}"/>`)}c(this,pm)&&(u.push("</g></svg>')"),o.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${F})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate),_(this,yi,new AC({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(c(this,yi)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,yi)}render(){At("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:u}of r){if(i===-1||o===t)continue;const d=typeof u=="string"?u:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Gh.has(h)){We(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:d,domElement:h})}return n}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&Gh.has(r)&&n.push({id:o,exportValue:i,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};lh=new WeakMap,pm=new WeakMap,yi=new WeakMap,Tw=new WeakSet,vC=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-u)/i}%`,t.top=`${100*(o-e[3]+d)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let rn=DS;class BG extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Hs,gd,cL,uL;class bS extends rn{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});S(this,Hs);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(I(this,Hs,cL).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(I(this,Hs,uL).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(t,n,r=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&I(this,Hs,gd).call(this),r&&(t.title=r)}_bindNamedAction(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(t.title=r),I(this,Hs,gd).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const o=r.get(i);o&&(t[o]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),I(this,Hs,gd).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),I(this,Hs,gd).call(this),!this._fieldObjects){We('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var g;r==null||r();const{fields:i,refs:o,include:u}=n,d=[];if(i.length!==0||o.length!==0){const w=new Set(o);for(const A of i){const F=this._fieldObjects[A]||[];for(const{id:C}of F)w.add(C)}for(const A of Object.values(this._fieldObjects))for(const F of A)w.has(F.id)===u&&d.push(F)}else for(const w of Object.values(this._fieldObjects))d.push(...w);const h=this.annotationStorage,f=[];for(const w of d){const{id:A}=w;switch(f.push(A),w.type){case"text":{const C=w.defaultValue||"";h.setValue(A,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;h.setValue(A,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";h.setValue(A,{value:C});break}default:continue}const F=document.querySelector(`[data-element-id="${A}"]`);if(F){if(!Gh.has(F)){We(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;F.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}Hs=new WeakSet,gd=function(){this.container.setAttribute("data-internal-link","")},cL=function(t,n,r="",i=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,i),!1},I(this,Hs,gd).call(this)},uL=function(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(t.title=r),I(this,Hs,gd).call(this)};class VG extends rn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class tp extends rn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return $n.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,o=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var u;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,n,r){var i,o,u;for(const[d,h]of n)(h==="Action"||(i=this.data.actions)!=null&&i[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,h,r),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":xe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||LG,i=e.style;let o;const u=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u),f=Math.round(h/($E*r))||1,g=h/f;o=Math.min(r,d(g/$E))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u);o=Math.min(r,d(h/$E))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=xe.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class UG extends tp{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),i.setValue(o.id,{[r]:n})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let u=o.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let h=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const f={userValue:u,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",h??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Gh.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:w,timeStep:A}=this.data,F=!!w&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",T=>{e.setValue(t,{value:T.target.value}),this.setPropertyOnSiblings(n,"value",T.target.value,"value"),f.formattedValue=null}),n.addEventListener("resetform",T=>{const P=this.data.defaultFieldValue??"";n.value=f.userValue=P,f.formattedValue=null});let C=T=>{const{formattedValue:P}=f;P!=null&&(T.target.value=P),T.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",P=>{var N;if(f.focused)return;const{target:O}=P;if(F&&(O.type=w,A&&(O.step=A)),f.userValue){const V=f.userValue;if(F)if(w==="time"){const z=new Date(V),W=[z.getHours(),z.getMinutes(),z.getSeconds()];O.value=W.map(D=>D.toString().padStart(2,"0")).join(":")}else O.value=new Date(V-OG).toISOString().split(w==="date"?"T":".",1)[0];else O.value=V}f.lastCommittedValue=O.value,f.commitKey=1,(N=this.data.actions)!=null&&N.Focus||(f.focused=!0)}),n.addEventListener("updatefromsandbox",P=>{this.showElementAndHideCanvas(P.target);const O={value(N){f.userValue=N.detail.value??"",F||e.setValue(t,{value:f.userValue.toString()}),N.target.value=f.userValue},formattedValue(N){const{formattedValue:V}=N.detail;f.formattedValue=V,V!=null&&N.target!==document.activeElement&&(N.target.value=V);const z={formattedValue:V};F&&(z.value=V),e.setValue(t,z)},selRange(N){N.target.setSelectionRange(...N.detail.selRange)},charLimit:N=>{var D;const{charLimit:V}=N.detail,{target:z}=N;if(V===0){z.removeAttribute("maxLength");return}z.setAttribute("maxLength",V);let W=f.userValue;!W||W.length<=V||(W=W.slice(0,V),z.value=f.userValue=W,e.setValue(t,{value:W}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:W,willCommit:!0,commitKey:1,selStart:z.selectionStart,selEnd:z.selectionEnd}}))}};this._dispatchEventFromSandbox(O,P)}),n.addEventListener("keydown",P=>{var V;f.commitKey=1;let O=-1;if(P.key==="Escape"?O=0:P.key==="Enter"&&!this.data.multiLine?O=2:P.key==="Tab"&&(f.commitKey=3),O===-1)return;const{value:N}=P.target;f.lastCommittedValue!==N&&(f.lastCommittedValue=N,f.userValue=N,(V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:O,selStart:P.target.selectionStart,selEnd:P.target.selectionEnd}}))});const T=C;C=null,n.addEventListener("blur",P=>{var V,z;if(!f.focused||!P.relatedTarget)return;(V=this.data.actions)!=null&&V.Blur||(f.focused=!1);const{target:O}=P;let{value:N}=O;if(F){if(N&&w==="time"){const W=N.split(":").map(D=>parseInt(D,10));N=new Date(2e3,0,1,W[0],W[1],W[2]||0).valueOf(),O.step=""}else N.includes("T")||(N=`${N}T00:00`),N=new Date(N).valueOf();O.type="text"}f.userValue=N,f.lastCommittedValue!==N&&((z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:f.commitKey,selStart:P.target.selectionStart,selEnd:P.target.selectionEnd}})),T(P)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",P=>{var L;f.lastCommittedValue=null;const{data:O,target:N}=P,{value:V,selectionStart:z,selectionEnd:W}=N;let D=z,R=W;switch(P.inputType){case"deleteWordBackward":{const U=V.substring(0,z).match(/\w*[^\w]*$/);U&&(D-=U[0].length);break}case"deleteWordForward":{const U=V.substring(z).match(/^[^\w]*\w*/);U&&(R+=U[0].length);break}case"deleteContentBackward":z===W&&(D-=1);break;case"deleteContentForward":z===W&&(R+=1);break}P.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:V,change:O||"",willCommit:!1,selStart:D,selEnd:R}})}),this._setEventListeners(n,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],P=>P.target.value)}if(C&&n.addEventListener("blur",C),this.data.comb){const P=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${P}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class jG extends tp{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class $G extends tp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Gh.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:u,checked:d}=o.target;for(const h of this._getElementsByName(u,n)){const f=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(n,{value:d})}),i.addEventListener("resetform",o=>{const u=t.defaultFieldValue||"Off";o.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const u={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class dL extends tp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Gh.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:u,checked:d}=o.target;for(const h of this._getElementsByName(u,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:d})}),i.addEventListener("resetform",o=>{const u=t.defaultFieldValue;o.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",u=>{const d={value:h=>{const f=o===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const w=f&&g.id===n;g.domElement&&(g.domElement.checked=w),e.setValue(g.id,{value:w})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class zG extends bS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class HG extends tp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Gh.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,n.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),i=!1),r.append(g)}let o=null;if(i){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),o=()=>{f.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const u=f=>{const g=f?"value":"textContent",{options:w,multiple:A}=r;return A?Array.prototype.filter.call(w,F=>F.selected).map(F=>F[g]):w.selectedIndex===-1?null:w[w.selectedIndex][g]};let d=u(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const g={value(w){o==null||o();const A=w.detail.value,F=new Set(Array.isArray(A)?A:[A]);for(const C of r.options)C.selected=F.has(C.value);e.setValue(t,{value:u(!0)}),d=u(!1)},multipleSelection(w){r.multiple=!0},remove(w){const A=r.options,F=w.detail.remove;A[F].selected=!1,r.remove(F),A.length>0&&Array.prototype.findIndex.call(A,T=>T.selected)===-1&&(A[0].selected=!0),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},clear(w){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=u(!1)},insert(w){const{index:A,displayValue:F,exportValue:C}=w.detail.insert,T=r.children[A],P=document.createElement("option");P.textContent=F,P.value=C,T?T.before(P):r.append(P),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},items(w){const{items:A}=w.detail;for(;r.length!==0;)r.remove(0);for(const F of A){const{displayValue:C,exportValue:T}=F,P=document.createElement("option");P.textContent=C,P.value=T,r.append(P)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},indices(w){const A=new Set(w.detail.indices);for(const F of w.target.options)F.selected=A.has(F.index);e.setValue(t,{value:u(!0)}),d=u(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(g,f)}),r.addEventListener("input",f=>{var A;const g=u(!0),w=u(!1);e.setValue(t,{value:g}),f.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:w,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var kw,_C;class AC extends rn{constructor(t){const{data:n,elements:r,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&rn._hasPopupData(n)});S(this,kw);if(this.elements=r,o&&rn._hasPopupData(n)){const u=this.popup=I(this,kw,_C).call(this);for(const d of r)d.popup=u}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=I(this,kw,_C).call(this),r=[];for(const i of this.elements)i.popup=n,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${tf}${i}`).join(",")),this.container}}kw=new WeakSet,_C=function(){return new WG({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Is,Zc,Y_,J_,fm,mm,cn,za,eu,ch,gm,ym,Ha,Ps,ll,cl,un,ul,tu,Iw,dl,wm,uh,nu,Kn,ru,Ze,VA,xC,EC,bC,UA,CC,hL,pL,fL,mL,jA,$A,FC;class WG{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:i,contentsObj:o,richText:u,parent:d,rect:h,parentRect:f,open:g,commentManager:w=null}){S(this,Ze);S(this,Is,null);S(this,Zc,I(this,Ze,fL).bind(this));S(this,Y_,I(this,Ze,FC).bind(this));S(this,J_,I(this,Ze,$A).bind(this));S(this,fm,I(this,Ze,jA).bind(this));S(this,mm,null);S(this,cn,null);S(this,za,null);S(this,eu,null);S(this,ch,null);S(this,gm,null);S(this,ym,null);S(this,Ha,!1);S(this,Ps,null);S(this,ll,null);S(this,cl,null);S(this,un,null);S(this,ul,null);S(this,tu,null);S(this,Iw,null);S(this,dl,null);S(this,wm,null);S(this,uh,null);S(this,nu,!1);S(this,Kn,null);S(this,ru,null);_(this,cn,e),_(this,wm,r),_(this,za,o),_(this,dl,u),_(this,gm,d),_(this,mm,t),_(this,Iw,h),_(this,ym,f),_(this,ch,n),_(this,Is,w),_(this,Kn,n[0]),_(this,eu,S_.toDateObject(i)),this.trigger=n.flatMap(A=>A.getElementsToTriggerPopup()),w||(I(this,Ze,VA).call(this),c(this,cn).hidden=!0,g&&I(this,Ze,jA).call(this))}renderCommentButton(){if(c(this,un)){c(this,un).parentNode||c(this,Kn).container.after(c(this,un));return}if(c(this,ul)||I(this,Ze,xC).call(this),!c(this,ul))return;const{signal:e}=_(this,ll,new AbortController),t=c(this,Kn).hasOwnCommentButton,n=()=>{c(this,Is).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{c(this,Is).toggleCommentPopup(this,!1,!0,!t)},i=()=>{c(this,Is).toggleCommentPopup(this,!1,!1)};if(t){_(this,un,c(this,Kn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",c(this,Zc),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=_(this,un,document.createElement("button"));o.className="annotationCommentButton";const u=c(this,Kn).container;o.style.zIndex=u.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),I(this,Ze,bC).call(this),I(this,Ze,EC).call(this),o.addEventListener("keydown",c(this,Zc),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),u.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=c(this,Kn).commentData;return e?c(this,gm)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=c(this,un))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}=c(this,Kn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}}get elementBeforePopup(){return c(this,un)}get comment(){return c(this,ru)||_(this,ru,c(this,Kn).commentText),c(this,ru)}set comment(e){e!==this.comment&&(c(this,Kn).commentText=_(this,ru,e))}focus(){var e;(e=c(this,Kn).container)==null||e.focus()}get parentBoundingClientRect(){return c(this,Kn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){c(this,un)&&(c(this,un).classList.toggle("selected",e),c(this,un).ariaExpanded=t)}setSelectedCommentButton(e){c(this,un).classList.toggle("selected",e)}get commentPopupPosition(){if(c(this,tu))return c(this,tu);const{x:e,y:t,height:n}=c(this,un).getBoundingClientRect(),{x:r,y:i,width:o,height:u}=c(this,Kn).layer.getBoundingClientRect();return[(e-r)/o,(t+n-i)/u]}set commentPopupPosition(e){_(this,tu,e)}hasDefaultPopupPosition(){return c(this,tu)===null}get commentButtonPosition(){return c(this,ul)}get commentButtonWidth(){return c(this,un).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=c(this,tu)||this.commentButtonPosition.map(h=>h/100),r=this.parentBoundingClientRect,{x:i,y:o,width:u,height:d}=r;c(this,Is).showDialog(null,this,i+t*u,o+n*d,{...e,parentDimensions:r})}render(){var n,r;if(c(this,Ps))return;const e=_(this,Ps,document.createElement("div"));if(e.className="popup",c(this,mm)){const i=e.style.outlineColor=xe.makeHexColor(...c(this,mm));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=c(this,wm))!=null&&n.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=c(this,wm)}if(e.append(t),c(this,eu)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,eu).valueOf()})),i.dateTime=c(this,eu).toISOString(),t.append(i)}$N({html:c(this,Ze,UA)||c(this,za).str,dir:(r=c(this,za))==null?void 0:r.dir,className:"popupContent"},e),c(this,cn).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var r;if(c(this,Is)){n?(this.remove(),_(this,ru,null)):t&&(t.deleted?this.remove():(I(this,Ze,bC).call(this),_(this,ru,t.text))),e&&(_(this,ul,null),I(this,Ze,xC).call(this),I(this,Ze,EC).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}I(this,Ze,VA).call(this),c(this,uh)||_(this,uh,{contentsObj:c(this,za),richText:c(this,dl)}),e&&_(this,cl,null),t&&t.text&&(_(this,dl,I(this,Ze,pL).call(this,t.text)),_(this,eu,S_.toDateObject(t.date)),_(this,za,null)),(r=c(this,Ps))==null||r.remove(),_(this,Ps,null)}resetEdited(){var e;c(this,uh)&&({contentsObj:Ln(this,za)._,richText:Ln(this,dl)._}=c(this,uh),_(this,uh,null),(e=c(this,Ps))==null||e.remove(),_(this,Ps,null),_(this,cl,null))}remove(){var e,t,n;if((e=c(this,ll))==null||e.abort(),_(this,ll,null),(t=c(this,Ps))==null||t.remove(),_(this,Ps,null),_(this,nu,!1),_(this,Ha,!1),(n=c(this,un))==null||n.remove(),_(this,un,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){_(this,nu,this.isVisible),c(this,nu)&&(c(this,cn).hidden=!0)}maybeShow(){c(this,Is)||(I(this,Ze,VA).call(this),c(this,nu)&&(c(this,Ps)||I(this,Ze,$A).call(this),_(this,nu,!1),c(this,cn).hidden=!1))}get isVisible(){return c(this,Is)?!1:c(this,cn).hidden===!1}}Is=new WeakMap,Zc=new WeakMap,Y_=new WeakMap,J_=new WeakMap,fm=new WeakMap,mm=new WeakMap,cn=new WeakMap,za=new WeakMap,eu=new WeakMap,ch=new WeakMap,gm=new WeakMap,ym=new WeakMap,Ha=new WeakMap,Ps=new WeakMap,ll=new WeakMap,cl=new WeakMap,un=new WeakMap,ul=new WeakMap,tu=new WeakMap,Iw=new WeakMap,dl=new WeakMap,wm=new WeakMap,uh=new WeakMap,nu=new WeakMap,Kn=new WeakMap,ru=new WeakMap,Ze=new WeakSet,VA=function(){var t;if(c(this,ll))return;_(this,ll,new AbortController);const{signal:e}=c(this,ll);for(const n of this.trigger)n.addEventListener("click",c(this,fm),{signal:e}),n.addEventListener("pointerenter",c(this,J_),{signal:e}),n.addEventListener("pointerleave",c(this,Y_),{signal:e}),n.classList.add("popupTriggerArea");for(const n of c(this,ch))(t=n.container)==null||t.addEventListener("keydown",c(this,Zc),{signal:e})},xC=function(){const e=c(this,ch).find(t=>t.hasCommentButton);e&&_(this,ul,e._normalizePoint(e.commentButtonPosition))},EC=function(){if(c(this,Kn).extraPopupElement&&!c(this,Kn).editor)return;c(this,un)||this.renderCommentButton();const[e,t]=c(this,ul),{style:n}=c(this,un);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},bC=function(){c(this,Kn).extraPopupElement||(c(this,un)||this.renderCommentButton(),c(this,un).style.backgroundColor=this.commentButtonColor||"")},UA=function(){const e=c(this,dl),t=c(this,za);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,dl).html||null},CC=function(){var e,t,n;return((n=(t=(e=c(this,Ze,UA))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},hL=function(){var e,t,n;return((n=(t=(e=c(this,Ze,UA))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},pL=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,Ze,hL),fontSize:c(this,Ze,CC)?`calc(${c(this,Ze,CC)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return n},fL=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,Ha))&&I(this,Ze,jA).call(this)},mL=function(){if(c(this,cl)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=c(this,gm);let o=!!c(this,ym),u=o?c(this,ym):c(this,Iw);for(const F of c(this,ch))if(!u||xe.intersect(F.data.rect,u)!==null){u=F.data.rect,o=!0;break}const d=xe.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),f=o?u[2]-u[0]+5:0,g=d[0]+f,w=d[1];_(this,cl,[100*(g-r)/t,100*(w-i)/n]);const{style:A}=c(this,cn);A.left=`${c(this,cl)[0]}%`,A.top=`${c(this,cl)[1]}%`},jA=function(){if(c(this,Is)){c(this,Is).toggleCommentPopup(this,!1);return}_(this,Ha,!c(this,Ha)),c(this,Ha)?(I(this,Ze,$A).call(this),c(this,cn).addEventListener("click",c(this,fm)),c(this,cn).addEventListener("keydown",c(this,Zc))):(I(this,Ze,FC).call(this),c(this,cn).removeEventListener("click",c(this,fm)),c(this,cn).removeEventListener("keydown",c(this,Zc)))},$A=function(){c(this,Ps)||this.render(),this.isVisible?c(this,Ha)&&c(this,cn).classList.add("focused"):(I(this,Ze,mL).call(this),c(this,cn).hidden=!1,c(this,cn).style.zIndex=parseInt(c(this,cn).style.zIndex)+1e3)},FC=function(){c(this,cn).classList.remove("focused"),!(c(this,Ha)||!this.isVisible)&&(c(this,cn).hidden=!0,c(this,cn).style.zIndex=parseInt(c(this,cn).style.zIndex)-1e3)};class gL extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Pw;class GG extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Pw,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=_(this,Pw,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Pw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pw=new WeakMap;var Rw;class qG extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Rw,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,u=_(this,Rw,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",o/2),u.setAttribute("y",o/2),u.setAttribute("width",n-o),u.setAttribute("height",r-o),u.setAttribute("stroke-width",o||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),i.append(u),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Rw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rw=new WeakMap;var Dw;class KG extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Dw,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,u=_(this,Dw,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",r/2),u.setAttribute("rx",n/2-o/2),u.setAttribute("ry",r/2-o/2),u.setAttribute("stroke-width",o||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),i.append(u),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Dw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dw=new WeakMap;var Nw;class yL extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Nw,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:i},width:o,height:u}=this;if(!n)return this.container;const d=this.svgFactory.create(o,u,!0);let h=[];for(let g=0,w=n.length;g<w;g+=2){const A=n[g]-t[0],F=t[3]-n[g+1];h.push(`${A},${F}`)}h=h.join(" ");const f=_(this,Nw,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",h),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),d.append(f),this.container.append(d),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Nw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nw=new WeakMap;class QG extends yL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class XG extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Mw,dh,Lw,SC;class CS extends rn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Lw);S(this,Mw,null);S(this,dh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Xe.HIGHLIGHT:Xe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:u,width:d,height:h}=I(this,Lw,SC).call(this,n,t),f=this.svgFactory.create(d,h,!0),g=_(this,Mw,this.svgFactory.createElement("svg:g"));f.append(g),g.setAttribute("stroke-width",i.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",u);for(let w=0,A=r.length;w<A;w++){const F=this.svgFactory.createElement(this.svgElementName);c(this,dh).push(F),F.setAttribute("points",r[w].join(",")),g.append(F)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:i}=t,o=c(this,Mw);if(n>=0&&o.setAttribute("stroke-width",n||1),r)for(let u=0,d=c(this,dh).length;u<d;u++)c(this,dh)[u].setAttribute("points",r[u].join(","));if(i){const{transform:u,width:d,height:h}=I(this,Lw,SC).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${d} ${h}`),o.setAttribute("transform",u)}}getElementsToTriggerPopup(){return c(this,dh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mw=new WeakMap,dh=new WeakMap,Lw=new WeakSet,SC=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class wL extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Xe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class YG extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class JG extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class ZG extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class vL extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Xe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Ow,Bw,TC;class eq extends rn{constructor(t){var r;super(t,{isRenderable:!0});S(this,Bw);S(this,Ow,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",I(this,Bw,TC).bind(this)),_(this,Ow,r);const{isMac:i}=$n.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&I(this,Bw,TC).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,Ow)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ow=new WeakMap,Bw=new WeakSet,TC=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var hh,ph,vm,su,Vw,fh,Rs,Uw,bl,zA,IC;const NS=class NS{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:u,commentManager:d,linkService:h,annotationStorage:f}){S(this,bl);S(this,hh,null);S(this,ph,null);S(this,vm,null);S(this,su,new Map);S(this,Vw,null);S(this,fh,null);S(this,Rs,[]);S(this,Uw,!1);this.div=e,_(this,hh,t),_(this,ph,n),_(this,Vw,u||null),_(this,fh,h||null),_(this,vm,f||new _S),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return c(this,su).size>0}async render(e){var u;const{annotations:t}=e,n=this.div;Hh(n,this.viewport);const r=new Map,i=[],o={data:null,layer:n,linkService:c(this,fh),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new M_,annotationStorage:c(this,vm),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const h=d.annotationType===Sn.POPUP;if(h){const w=r.get(d.id);if(!w)continue;if(!this._commentManager){i.push(d);continue}o.elements=w}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;o.data=d;const f=QE.create(o);if(!f.isRenderable)continue;if(!h&&(c(this,Rs).push(f),d.popupRef)){const w=r.get(d.popupRef);w?w.push(f):r.set(d.popupRef,[f])}const g=f.render();d.hidden&&(g.style.visibility="hidden"),f._isEditable&&(c(this,su).set(f.data.id,f),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(f))}await I(this,bl,zA).call(this);for(const d of i){const h=o.elements=r.get(d.id);o.data=d;const f=QE.create(o);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${tf}${d.id}`,d.hidden&&(g.style.visibility="hidden"),h.at(-1).container.after(g)}I(this,bl,IC).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:c(this,fh),svgFactory:new M_,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=NS._defaultBorderStyle),t.data=n;const r=QE.create(t);r.isRenderable&&(r.render(),r.contentElement.id=`${tf}${n.id}`,c(this,Rs).push(r))}await I(this,bl,zA).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Hh(t,{rotation:e.rotation}),I(this,bl,IC).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,su).values())}getEditableAnnotation(e){return c(this,su).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:r}=e,i=new BG({data:{id:n,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:c(this,fh),annotationStorage:c(this,vm)});return i.render(),i.contentElement.id=`${tf}${n}`,i.createOrUpdatePopup(),c(this,Rs).push(i),i}removeAnnotation(e){var r;const t=c(this,Rs).findIndex(i=>i.data.id===e);if(t<0)return;const[n]=c(this,Rs).splice(t,1);(r=c(this,hh))==null||r.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);I(this,bl,zA).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Ge(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Gp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};hh=new WeakMap,ph=new WeakMap,vm=new WeakMap,su=new WeakMap,Vw=new WeakMap,fh=new WeakMap,Rs=new WeakMap,Uw=new WeakMap,bl=new WeakSet,zA=async function(){var n,r,i;if(c(this,Rs).length===0)return;this.div.replaceChildren();const e=[];if(!c(this,Uw)){_(this,Uw,!0);for(const{contentElement:o,data:{id:u}}of c(this,Rs)){const d=o.id=`${tf}${u}`;e.push((n=c(this,Vw))==null?void 0:n.getAriaAttributes(d).then(h=>{if(h)for(const[f,g]of h)o.setAttribute(f,g)}))}}c(this,Rs).sort(({data:{rect:[o,u,d,h]}},{data:{rect:[f,g,w,A]}})=>{if(o===d&&u===h)return 1;if(f===w&&g===A)return-1;const F=h,C=u,T=(u+h)/2,P=A,O=g,N=(g+A)/2;if(T>=P&&N<=C)return-1;if(N>=F&&T<=O)return 1;const V=(o+d)/2,z=(f+w)/2;return V-z});const t=document.createDocumentFragment();for(const o of c(this,Rs))t.append(o.container),this._commentManager?(i=((r=o.extraPopupElement)==null?void 0:r.popup)||o.popup)==null||i.renderCommentButton():o.extraPopupElement&&t.append(o.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),c(this,hh))for(const o of c(this,Rs))c(this,hh).addPointerInTextLayer(o.contentElement,!1)},IC=function(){var t;if(!c(this,ph))return;const e=this.div;for(const[n,r]of c(this,ph)){const i=e.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const u=c(this,su).get(n);u&&(u._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,i.id,r),u._hasNoCanvas=!1):u.canvas=r)}c(this,ph).clear()};let kC=NS;const cA=/\r\n?|\n/g;var Ds,jw,mh,Ns,Dn,AL,_L,xL,HA,Cl,WA,GA,EL,RC,bL;const Ht=class Ht extends Ut{constructor(t){super({...t,name:"freeTextEditor"});S(this,Dn);S(this,Ds,"");S(this,jw,`${this.id}-editor`);S(this,mh,null);S(this,Ns);ne(this,"_colorPicker",null);this.color=t.color||Ht._defaultColor||Ut._defaultLineColor,_(this,Ns,t.fontSize||Ht._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=Ht.prototype,n=o=>o.isEmpty(),r=Wh.TRANSLATE_SMALL,i=Wh.TRANSLATE_BIG;return Ge(this,"_keyboardManager",new S0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){Ut.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case lt.FREETEXT_SIZE:Ht._defaultFontSize=n;break;case lt.FREETEXT_COLOR:Ht._defaultColor=n;break}}updateParams(t,n){switch(t){case lt.FREETEXT_SIZE:I(this,Dn,AL).call(this,n);break;case lt.FREETEXT_COLOR:I(this,Dn,_L).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[lt.FREETEXT_SIZE,Ht._defaultFontSize],[lt.FREETEXT_COLOR,Ht._defaultColor||Ut._defaultLineColor]]}get propertiesToUpdate(){return[[lt.FREETEXT_SIZE,c(this,Ns)],[lt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new N_(this)),[["colorPicker",this._colorPicker]]}get colorType(){return lt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ht._internalPadding*t,-(Ht._internalPadding+c(this,Ns))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),_(this,mh,new AbortController);const t=this._uiManager.combinedSignal(c(this,mh));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,jw)),this._isDraggable=!0,(t=c(this,mh))==null||t.abort(),_(this,mh,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,Ds),n=_(this,Ds,I(this,Dn,xL).call(this).trimEnd());if(t===n)return;const r=i=>{if(_(this,Ds,i),!i){this.remove();return}I(this,Dn,GA).call(this),this._uiManager.rebuild(this),I(this,Dn,HA).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),I(this,Dn,HA).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ht._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,jw)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,Ns)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,h]=this.getInitialTranslation();[d,h]=this.pageTranslationToScreen(d,h);const[f,g]=this.pageDimensions,[w,A]=this.pageTranslation;let F,C;switch(this.rotation){case 0:F=t+(u[0]-w)/f,C=n+this.height-(u[1]-A)/g;break;case 90:F=t+(u[0]-w)/f,C=n-(u[1]-A)/g,[d,h]=[h,-d];break;case 180:F=t-this.width+(u[0]-w)/f,C=n-(u[1]-A)/g,[d,h]=[-d,-h];break;case 270:F=t+(u[0]-w-this.height*g)/f,C=n+(u[1]-A-this.width*f)/g,[d,h]=[-h,d];break}this.setAt(F*i,C*o,d,h)}else this._moveAfterPaste(t,n);I(this,Dn,GA).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var F,C,T;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=I(F=Ht,Cl,RC).call(F,n.getData("text")||"").replaceAll(cA,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const u=o.getRangeAt(0);if(!i.includes(`
`)){u.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:d,startOffset:h}=u,f=[],g=[];if(d.nodeType===Node.TEXT_NODE){const P=d.parentElement;if(g.push(d.nodeValue.slice(h).replaceAll(cA,"")),P!==this.editorDiv){let O=f;for(const N of this.editorDiv.childNodes){if(N===P){O=g;continue}O.push(I(C=Ht,Cl,WA).call(C,N))}}f.push(d.nodeValue.slice(0,h).replaceAll(cA,""))}else if(d===this.editorDiv){let P=f,O=0;for(const N of this.editorDiv.childNodes)O++===h&&(P=g),P.push(I(T=Ht,Cl,WA).call(T,N))}_(this,Ds,`${f.join(`
`)}${i}${g.join(`
`)}`),I(this,Dn,GA).call(this);const w=new Range;let A=Math.sumPrecise(f.map(P=>P.length));for(const{firstChild:P}of this.editorDiv.childNodes)if(P.nodeType===Node.TEXT_NODE){const O=P.nodeValue.length;if(A<=O){w.setStart(P,A),w.setEnd(P,A);break}A-=O}o.removeAllRanges(),o.addRange(w)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ht._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,r){var u;let i=null;if(t instanceof gL){const{data:{defaultAppearanceData:{fontSize:d,fontColor:h},rect:f,rotation:g,id:w,popupRef:A,richText:F,contentsObj:C,creationDate:T,modificationDate:P},textContent:O,textPosition:N,parent:{page:{pageNumber:V}}}=t;if(!O||O.length===0)return null;i=t={annotationType:Xe.FREETEXT,color:Array.from(h),fontSize:d,value:O.join(`
`),position:N,pageIndex:V-1,rect:f.slice(0),rotation:g,annotationElementId:w,id:w,deleted:!1,popupRef:A,comment:(C==null?void 0:C.str)||null,richText:F,creationDate:T,modificationDate:P}}const o=await super.deserialize(t,n,r);return _(o,Ns,t.fontSize),o.color=xe.makeHexColor(...t.color),_(o,Ds,I(u=Ht,Cl,RC).call(u,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ut._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:n,fontSize:c(this,Ns),value:I(this,Dn,EL).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!I(this,Dn,bL).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${c(this,Ns)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const i of c(this,Ds).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),n.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,Ds)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ds=new WeakMap,jw=new WeakMap,mh=new WeakMap,Ns=new WeakMap,Dn=new WeakSet,AL=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-c(this,Ns))*this.parentScale),_(this,Ns,i),I(this,Dn,HA).call(this)},r=c(this,Ns);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},_L=function(t){const n=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},xL=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(I(r=Ht,Cl,WA).call(r,i)),n=i);return t.join(`
`)},HA=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,u=o.style.display,d=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=u,o.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},Cl=new WeakSet,WA=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(cA,"")},GA=function(){if(this.editorDiv.replaceChildren(),!!c(this,Ds))for(const t of c(this,Ds).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},EL=function(){return c(this,Ds).replaceAll(""," ")},RC=function(t){return t.replaceAll(" ","")},bL=function(t){const{value:n,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((u,d)=>u!==i[d])||t.pageIndex!==o},S(Ht,Cl),ne(Ht,"_freeTextDefaultContent",""),ne(Ht,"_internalPadding",0),ne(Ht,"_defaultColor",null),ne(Ht,"_defaultFontSize",10),ne(Ht,"_type","freetext"),ne(Ht,"_editorType",Xe.FREETEXT);let PC=Ht;class Fe{toSVGPath(){At("Abstract method `toSVGPath` must be implemented.")}get box(){At("Abstract getter `box` must be implemented.")}serialize(e,t){At("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,o){o||(o=new Float32Array(e.length));for(let u=0,d=e.length;u<d;u+=2)o[u]=t+e[u]*r,o[u+1]=n+e[u+1]*i;return o}static _rescaleAndSwap(e,t,n,r,i,o){o||(o=new Float32Array(e.length));for(let u=0,d=e.length;u<d;u+=2)o[u]=t+e[u+1]*r,o[u+1]=n+e[u]*i;return o}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,o){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+o)/6,(n+i)/2,(r+o)/2]}}ne(Fe,"PRECISION",1e-4);var Ms,Wi,Am,_m,Wa,nt,gh,yh,$w,zw,xm,Em,iu,Hw,Z_,e1,Un,Mg,CL,FL,SL,TL,kL,IL;const Lo=class Lo{constructor({x:e,y:t},n,r,i,o,u=0){S(this,Un);S(this,Ms);S(this,Wi,[]);S(this,Am);S(this,_m);S(this,Wa,[]);S(this,nt,new Float32Array(18));S(this,gh);S(this,yh);S(this,$w);S(this,zw);S(this,xm);S(this,Em);S(this,iu,[]);_(this,Ms,n),_(this,Em,i*r),_(this,_m,o),c(this,nt).set([NaN,NaN,NaN,NaN,e,t],6),_(this,Am,u),_(this,zw,c(Lo,Hw)*r),_(this,$w,c(Lo,e1)*r),_(this,xm,r),c(this,iu).push(e,t)}isEmpty(){return isNaN(c(this,nt)[8])}add({x:e,y:t}){var L;_(this,gh,e),_(this,yh,t);const[n,r,i,o]=c(this,Ms);let[u,d,h,f]=c(this,nt).subarray(8,12);const g=e-h,w=t-f,A=Math.hypot(g,w);if(A<c(this,$w))return!1;const F=A-c(this,zw),C=F/A,T=C*g,P=C*w;let O=u,N=d;u=h,d=f,h+=T,f+=P,(L=c(this,iu))==null||L.push(e,t);const V=-P/F,z=T/F,W=V*c(this,Em),D=z*c(this,Em);return c(this,nt).set(c(this,nt).subarray(2,8),0),c(this,nt).set([h+W,f+D],4),c(this,nt).set(c(this,nt).subarray(14,18),12),c(this,nt).set([h-W,f-D],16),isNaN(c(this,nt)[6])?(c(this,Wa).length===0&&(c(this,nt).set([u+W,d+D],2),c(this,Wa).push(NaN,NaN,NaN,NaN,(u+W-n)/i,(d+D-r)/o),c(this,nt).set([u-W,d-D],14),c(this,Wi).push(NaN,NaN,NaN,NaN,(u-W-n)/i,(d-D-r)/o)),c(this,nt).set([O,N,u,d,h,f],6),!this.isEmpty()):(c(this,nt).set([O,N,u,d,h,f],6),Math.abs(Math.atan2(N-d,O-u)-Math.atan2(P,T))<Math.PI/2?([u,d,h,f]=c(this,nt).subarray(2,6),c(this,Wa).push(NaN,NaN,NaN,NaN,((u+h)/2-n)/i,((d+f)/2-r)/o),[u,d,O,N]=c(this,nt).subarray(14,18),c(this,Wi).push(NaN,NaN,NaN,NaN,((O+u)/2-n)/i,((N+d)/2-r)/o),!0):([O,N,u,d,h,f]=c(this,nt).subarray(0,6),c(this,Wa).push(((O+5*u)/6-n)/i,((N+5*d)/6-r)/o,((5*u+h)/6-n)/i,((5*d+f)/6-r)/o,((u+h)/2-n)/i,((d+f)/2-r)/o),[h,f,u,d,O,N]=c(this,nt).subarray(12,18),c(this,Wi).push(((O+5*u)/6-n)/i,((N+5*d)/6-r)/o,((5*u+h)/6-n)/i,((5*d+f)/6-r)/o,((u+h)/2-n)/i,((d+f)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,Wa),t=c(this,Wi);if(isNaN(c(this,nt)[6])&&!this.isEmpty())return I(this,Un,CL).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);I(this,Un,SL).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return I(this,Un,FL).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,o){return new PL(e,t,n,r,i,o)}getOutlines(){var g;const e=c(this,Wa),t=c(this,Wi),n=c(this,nt),[r,i,o,u]=c(this,Ms),d=new Float32Array((((g=c(this,iu))==null?void 0:g.length)??0)+2);for(let w=0,A=d.length-2;w<A;w+=2)d[w]=(c(this,iu)[w]-r)/o,d[w+1]=(c(this,iu)[w+1]-i)/u;if(d[d.length-2]=(c(this,gh)-r)/o,d[d.length-1]=(c(this,yh)-i)/u,isNaN(n[6])&&!this.isEmpty())return I(this,Un,TL).call(this,d);const h=new Float32Array(c(this,Wa).length+24+c(this,Wi).length);let f=e.length;for(let w=0;w<f;w+=2){if(isNaN(e[w])){h[w]=h[w+1]=NaN;continue}h[w]=e[w],h[w+1]=e[w+1]}f=I(this,Un,IL).call(this,h,f);for(let w=t.length-6;w>=6;w-=6)for(let A=0;A<6;A+=2){if(isNaN(t[w+A])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[w+A],h[f+1]=t[w+A+1],f+=2}return I(this,Un,kL).call(this,h,f),this.newFreeDrawOutline(h,d,c(this,Ms),c(this,xm),c(this,Am),c(this,_m))}};Ms=new WeakMap,Wi=new WeakMap,Am=new WeakMap,_m=new WeakMap,Wa=new WeakMap,nt=new WeakMap,gh=new WeakMap,yh=new WeakMap,$w=new WeakMap,zw=new WeakMap,xm=new WeakMap,Em=new WeakMap,iu=new WeakMap,Hw=new WeakMap,Z_=new WeakMap,e1=new WeakMap,Un=new WeakSet,Mg=function(){const e=c(this,nt).subarray(4,6),t=c(this,nt).subarray(16,18),[n,r,i,o]=c(this,Ms);return[(c(this,gh)+(e[0]-t[0])/2-n)/i,(c(this,yh)+(e[1]-t[1])/2-r)/o,(c(this,gh)+(t[0]-e[0])/2-n)/i,(c(this,yh)+(t[1]-e[1])/2-r)/o]},CL=function(){const[e,t,n,r]=c(this,Ms),[i,o,u,d]=I(this,Un,Mg).call(this);return`M${(c(this,nt)[2]-e)/n} ${(c(this,nt)[3]-t)/r} L${(c(this,nt)[4]-e)/n} ${(c(this,nt)[5]-t)/r} L${i} ${o} L${u} ${d} L${(c(this,nt)[16]-e)/n} ${(c(this,nt)[17]-t)/r} L${(c(this,nt)[14]-e)/n} ${(c(this,nt)[15]-t)/r} Z`},FL=function(e){const t=c(this,Wi);e.push(`L${t[4]} ${t[5]} Z`)},SL=function(e){const[t,n,r,i]=c(this,Ms),o=c(this,nt).subarray(4,6),u=c(this,nt).subarray(16,18),[d,h,f,g]=I(this,Un,Mg).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-n)/i} L${d} ${h} L${f} ${g} L${(u[0]-t)/r} ${(u[1]-n)/i}`)},TL=function(e){const t=c(this,nt),[n,r,i,o]=c(this,Ms),[u,d,h,f]=I(this,Un,Mg).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(g,e,c(this,Ms),c(this,xm),c(this,Am),c(this,_m))},kL=function(e,t){const n=c(this,Wi);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},IL=function(e,t){const n=c(this,nt).subarray(4,6),r=c(this,nt).subarray(16,18),[i,o,u,d]=c(this,Ms),[h,f,g,w]=I(this,Un,Mg).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/u,(n[1]-o)/d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,w,NaN,NaN,NaN,NaN,(r[0]-i)/u,(r[1]-o)/d],t),t+=24},S(Lo,Hw,8),S(Lo,Z_,2),S(Lo,e1,c(Lo,Hw)+c(Lo,Z_));let L_=Lo;var bm,wh,hl,Ww,Ls,Gw,_n,t1,RL;class PL extends Fe{constructor(t,n,r,i,o,u){super();S(this,t1);S(this,bm);S(this,wh,new Float32Array(4));S(this,hl);S(this,Ww);S(this,Ls);S(this,Gw);S(this,_n);_(this,_n,t),_(this,Ls,n),_(this,bm,r),_(this,Gw,i),_(this,hl,o),_(this,Ww,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],I(this,t1,RL).call(this,u);const[d,h,f,g]=c(this,wh);for(let w=0,A=t.length;w<A;w+=2)t[w]=(t[w]-d)/f,t[w+1]=(t[w+1]-h)/g;for(let w=0,A=n.length;w<A;w+=2)n[w]=(n[w]-d)/f,n[w+1]=(n[w+1]-h)/g}toSVGPath(){const t=[`M${c(this,_n)[4]} ${c(this,_n)[5]}`];for(let n=6,r=c(this,_n).length;n<r;n+=6){if(isNaN(c(this,_n)[n])){t.push(`L${c(this,_n)[n+4]} ${c(this,_n)[n+5]}`);continue}t.push(`C${c(this,_n)[n]} ${c(this,_n)[n+1]} ${c(this,_n)[n+2]} ${c(this,_n)[n+3]} ${c(this,_n)[n+4]} ${c(this,_n)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,i],o){const u=r-t,d=i-n;let h,f;switch(o){case 0:h=Fe._rescale(c(this,_n),t,i,u,-d),f=Fe._rescale(c(this,Ls),t,i,u,-d);break;case 90:h=Fe._rescaleAndSwap(c(this,_n),t,n,u,d),f=Fe._rescaleAndSwap(c(this,Ls),t,n,u,d);break;case 180:h=Fe._rescale(c(this,_n),r,n,-u,d),f=Fe._rescale(c(this,Ls),r,n,-u,d);break;case 270:h=Fe._rescaleAndSwap(c(this,_n),r,i,-u,-d),f=Fe._rescaleAndSwap(c(this,Ls),r,i,-u,-d);break}return{outline:Array.from(h),points:[Array.from(f)]}}get box(){return c(this,wh)}newOutliner(t,n,r,i,o,u=0){return new L_(t,n,r,i,o,u)}getNewOutline(t,n){const[r,i,o,u]=c(this,wh),[d,h,f,g]=c(this,bm),w=o*f,A=u*g,F=r*f+d,C=i*g+h,T=this.newOutliner({x:c(this,Ls)[0]*w+F,y:c(this,Ls)[1]*A+C},c(this,bm),c(this,Gw),t,c(this,Ww),n??c(this,hl));for(let P=2;P<c(this,Ls).length;P+=2)T.add({x:c(this,Ls)[P]*w+F,y:c(this,Ls)[P+1]*A+C});return T.getOutlines()}}bm=new WeakMap,wh=new WeakMap,hl=new WeakMap,Ww=new WeakMap,Ls=new WeakMap,Gw=new WeakMap,_n=new WeakMap,t1=new WeakSet,RL=function(t){const n=c(this,_n);let r=n[4],i=n[5];const o=[r,i,r,i];let u=r,d=i,h=r,f=i;const g=t?Math.max:Math.min,w=new Float32Array(4);for(let F=6,C=n.length;F<C;F+=6){const T=n[F+4],P=n[F+5];isNaN(n[F])?(xe.pointBoundingBox(T,P,o),d>P?(u=T,d=P):d===P&&(u=g(u,T)),f<P?(h=T,f=P):f===P&&(h=g(h,T))):(w[0]=w[1]=1/0,w[2]=w[3]=-1/0,xe.bezierBoundingBox(r,i,...n.slice(F,F+6),w),xe.rectBoundingBox(w[0],w[1],w[2],w[3],o),d>w[1]?(u=w[0],d=w[1]):d===w[1]&&(u=g(u,w[0])),f<w[3]?(h=w[2],f=w[3]):f===w[3]&&(h=g(h,w[2]))),r=T,i=P}const A=c(this,wh);A[0]=o[0]-c(this,hl),A[1]=o[1]-c(this,hl),A[2]=o[2]-o[0]+2*c(this,hl),A[3]=o[3]-o[1]+2*c(this,hl),this.firstPoint=[u,d],this.lastPoint=[h,f]};var qw,Kw,Qw,au,Gi,Gr,DL,qA,NL,ML,NC;class DC{constructor(e,t=0,n=0,r=!0){S(this,Gr);S(this,qw);S(this,Kw);S(this,Qw);S(this,au,[]);S(this,Gi,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:C,y:T,width:P,height:O}of e){const N=Math.floor((C-t)/o)*o,V=Math.ceil((C+P+t)/o)*o,z=Math.floor((T-t)/o)*o,W=Math.ceil((T+O+t)/o)*o,D=[N,z,W,!0],R=[V,z,W,!1];c(this,au).push(D,R),xe.rectBoundingBox(N,z,V,W,i)}const u=i[2]-i[0]+2*n,d=i[3]-i[1]+2*n,h=i[0]-n,f=i[1]-n;let g=r?-1/0:1/0,w=1/0;const A=c(this,au).at(r?-1:-2),F=[A[0],A[2]];for(const C of c(this,au)){const[T,P,O,N]=C;!N&&r?P<w?(w=P,g=T):P===w&&(g=Math.max(g,T)):N&&!r&&(P<w?(w=P,g=T):P===w&&(g=Math.min(g,T))),C[0]=(T-h)/u,C[1]=(P-f)/d,C[2]=(O-f)/d}_(this,qw,new Float32Array([h,f,u,d])),_(this,Kw,[g,w]),_(this,Qw,F)}getOutlines(){c(this,au).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of c(this,au))t[3]?(e.push(...I(this,Gr,NC).call(this,t)),I(this,Gr,NL).call(this,t)):(I(this,Gr,ML).call(this,t),e.push(...I(this,Gr,NC).call(this,t)));return I(this,Gr,DL).call(this,e)}}qw=new WeakMap,Kw=new WeakMap,Qw=new WeakMap,au=new WeakMap,Gi=new WeakMap,Gr=new WeakSet,DL=function(e){const t=[],n=new Set;for(const o of e){const[u,d,h]=o;t.push([u,d,o],[u,h,o])}t.sort((o,u)=>o[1]-u[1]||o[0]-u[0]);for(let o=0,u=t.length;o<u;o+=2){const d=t[o][2],h=t[o+1][2];d.push(h),h.push(d),n.add(d),n.add(h)}const r=[];let i;for(;n.size>0;){const o=n.values().next().value;let[u,d,h,f,g]=o;n.delete(o);let w=u,A=d;for(i=[u,h],r.push(i);;){let F;if(n.has(f))F=f;else if(n.has(g))F=g;else break;n.delete(F),[u,d,h,f,g]=F,w!==u&&(i.push(w,A,u,A===d?d:h),w=u),A=A===d?h:d}i.push(w,A)}return new tq(r,c(this,qw),c(this,Kw),c(this,Qw))},qA=function(e){const t=c(this,Gi);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,o=t[i][0];if(o===e)return i;o<e?n=i+1:r=i-1}return r+1},NL=function([,e,t]){const n=I(this,Gr,qA).call(this,e);c(this,Gi).splice(n,0,[e,t])},ML=function([,e,t]){const n=I(this,Gr,qA).call(this,e);for(let r=n;r<c(this,Gi).length;r++){const[i,o]=c(this,Gi)[r];if(i!==e)break;if(i===e&&o===t){c(this,Gi).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[i,o]=c(this,Gi)[r];if(i!==e)break;if(i===e&&o===t){c(this,Gi).splice(r,1);return}}},NC=function(e){const[t,n,r]=e,i=[[t,n,r]],o=I(this,Gr,qA).call(this,r);for(let u=0;u<o;u++){const[d,h]=c(this,Gi)[u];for(let f=0,g=i.length;f<g;f++){const[,w,A]=i[f];if(!(h<=w||A<=d)){if(w>=d){if(A>h)i[f][1]=h;else{if(g===1)return[];i.splice(f,1),f--,g--}continue}i[f][2]=d,A>h&&i.push([t,h,A])}}}return i};var Xw,Cm;class tq extends Fe{constructor(t,n,r,i){super();S(this,Xw);S(this,Cm);_(this,Cm,t),_(this,Xw,n),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const n of c(this,Cm)){let[r,i]=n;t.push(`M${r} ${i}`);for(let o=2;o<n.length;o+=2){const u=n[o],d=n[o+1];u===r?(t.push(`V${d}`),i=d):d===i&&(t.push(`H${u}`),r=u)}t.push("Z")}return t.join(" ")}serialize([t,n,r,i],o){const u=[],d=r-t,h=i-n;for(const f of c(this,Cm)){const g=new Array(f.length);for(let w=0;w<f.length;w+=2)g[w]=t+f[w]*d,g[w+1]=i-f[w+1]*h;u.push(g)}return u}get box(){return c(this,Xw)}get classNamesForOutlining(){return["highlightOutline"]}}Xw=new WeakMap,Cm=new WeakMap;class MC extends L_{newFreeDrawOutline(e,t,n,r,i,o){return new nq(e,t,n,r,i,o)}}class nq extends PL{newOutliner(e,t,n,r,i,o=0){return new MC(e,t,n,r,i,o)}}var Fm,Yw,pl,vh,Jw,os,Zw,e0,Ah,Os,Bs,cr,Sm,Tm,Ir,km,wi,t0,Je,LC,KA,LL,OL,BL,OC,yd,xi,Jp,VL,QA,XA,UL,jL,$L,zL,HL;const wt=class wt extends Ut{constructor(t){super({...t,name:"highlightEditor"});S(this,Je);S(this,Fm,null);S(this,Yw,0);S(this,pl);S(this,vh,null);S(this,Jw,null);S(this,os,null);S(this,Zw,null);S(this,e0,0);S(this,Ah,null);S(this,Os,null);S(this,Bs,null);S(this,cr,!1);S(this,Sm,null);S(this,Tm,null);S(this,Ir,null);S(this,km,"");S(this,wi);S(this,t0,"");this.color=t.color||wt._defaultColor,_(this,wi,t.thickness||wt._defaultThickness),this.opacity=t.opacity||wt._defaultOpacity,_(this,pl,t.boxes||null),_(this,t0,t.methodOfCreation||""),_(this,km,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(_(this,cr,!0),I(this,Je,KA).call(this,t),I(this,Je,yd).call(this)):c(this,pl)&&(_(this,Fm,t.anchorNode),_(this,Yw,t.anchorOffset),_(this,Zw,t.focusNode),_(this,e0,t.focusOffset),I(this,Je,LC).call(this),I(this,Je,yd).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=wt.prototype;return Ge(this,"_keyboardManager",new S0([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,cr)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,wi),methodOfCreation:c(this,t0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;Ut.initialize(t,n),wt._defaultColor||(wt._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case lt.HIGHLIGHT_COLOR:wt._defaultColor=n;break;case lt.HIGHLIGHT_THICKNESS:wt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return c(this,Tm)}get commentButtonPosition(){return c(this,Sm)}updateParams(t,n){switch(t){case lt.HIGHLIGHT_COLOR:I(this,Je,LL).call(this,n);break;case lt.HIGHLIGHT_THICKNESS:I(this,Je,OL).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[lt.HIGHLIGHT_COLOR,wt._defaultColor],[lt.HIGHLIGHT_THICKNESS,wt._defaultThickness]]}get propertiesToUpdate(){return[[lt.HIGHLIGHT_COLOR,this.color||wt._defaultColor],[lt.HIGHLIGHT_THICKNESS,c(this,wi)||wt._defaultThickness],[lt.HIGHLIGHT_FREE,c(this,cr)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Bs),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=c(this,Jw))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",_(this,Jw,new D_({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(I(this,Je,XA).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,I(this,Je,XA).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){I(this,Je,OC).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,Je,yd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?I(this,Je,OC).call(this):t&&(I(this,Je,yd).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,o,u;const{drawLayer:n}=this.parent;let r;c(this,cr)?(t=(t-this.rotation+360)%360,r=I(i=wt,xi,Jp).call(i,c(this,Os).box,t)):r=I(o=wt,xi,Jp).call(o,[this.x,this.y,this.width,this.height],t),n.updateProperties(c(this,Bs),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(c(this,Ir),{bbox:I(u=wt,xi,Jp).call(u,c(this,os).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,km)&&(t.setAttribute("aria-label",c(this,km)),t.setAttribute("role","mark")),c(this,cr)?t.classList.add("free"):this.div.addEventListener("keydown",I(this,Je,VL).bind(this),{signal:this._uiManager._signal});const n=_(this,Ah,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,vh),this.setDims(),YN(this,c(this,Ah),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Ir),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Ir),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:I(this,Je,QA).call(this,!0);break;case 1:case 3:I(this,Je,QA).call(this,!1);break}}select(){var t;super.select(),c(this,Ir)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Ir),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,Ir)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Ir),{rootClass:{selected:!1}}),c(this,cr)||I(this,Je,QA).call(this,!1))}get _mustFixPosition(){return!c(this,cr)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Bs),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,Ir),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:i,y:o}){const{x:u,y:d,width:h,height:f}=r.getBoundingClientRect(),g=new AbortController,w=t.combinedSignal(g),A=F=>{g.abort(),I(this,xi,zL).call(this,t,F)};window.addEventListener("blur",A,{signal:w}),window.addEventListener("pointerup",A,{signal:w}),window.addEventListener("pointerdown",hn,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Ci,{signal:w}),r.addEventListener("pointermove",I(this,xi,$L).bind(this,t),{signal:w}),this._freeHighlight=new MC({x:i,y:o},[u,d,h,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var C,T,P,O;let i=null;if(t instanceof wL){const{data:{quadPoints:N,rect:V,rotation:z,id:W,color:D,opacity:R,popupRef:L,richText:U,contentsObj:$,creationDate:G,modificationDate:j},parent:{page:{pageNumber:ye}}}=t;i=t={annotationType:Xe.HIGHLIGHT,color:Array.from(D),opacity:R,quadPoints:N,boxes:null,pageIndex:ye-1,rect:V.slice(0),rotation:z,annotationElementId:W,id:W,deleted:!1,popupRef:L,richText:U,comment:($==null?void 0:$.str)||null,creationDate:G,modificationDate:j}}else if(t instanceof CS){const{data:{inkLists:N,rect:V,rotation:z,id:W,color:D,borderStyle:{rawWidth:R},popupRef:L,richText:U,contentsObj:$,creationDate:G,modificationDate:j},parent:{page:{pageNumber:ye}}}=t;i=t={annotationType:Xe.HIGHLIGHT,color:Array.from(D),thickness:R,inkLists:N,boxes:null,pageIndex:ye-1,rect:V.slice(0),rotation:z,annotationElementId:W,id:W,deleted:!1,popupRef:L,richText:U,comment:($==null?void 0:$.str)||null,creationDate:G,modificationDate:j}}const{color:o,quadPoints:u,inkLists:d,opacity:h}=t,f=await super.deserialize(t,n,r);f.color=xe.makeHexColor(...o),f.opacity=h||1,d&&_(f,wi,t.thickness),f._initialData=i,t.comment&&f.setCommentData(t);const[g,w]=f.pageDimensions,[A,F]=f.pageTranslation;if(u){const N=_(f,pl,[]);for(let V=0;V<u.length;V+=8)N.push({x:(u[V]-A)/g,y:1-(u[V+1]-F)/w,width:(u[V+2]-u[V])/g,height:(u[V+1]-u[V+5])/w});I(C=f,Je,LC).call(C),I(T=f,Je,yd).call(T),f.rotate(f.rotation)}else if(d){_(f,cr,!0);const N=d[0],V={x:N[0]-A,y:w-(N[1]-F)},z=new MC(V,[0,0,g,w],1,c(f,wi)/2,!0,.001);for(let R=0,L=N.length;R<L;R+=2)V.x=N[R]-A,V.y=w-(N[R+1]-F),z.add(V);const{id:W,clipPathId:D}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);I(P=f,Je,KA).call(P,{highlightOutlines:z.getOutlines(),highlightId:W,clipPathId:D}),I(O=f,Je,yd).call(O),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=Ut._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:n,opacity:this.opacity,thickness:c(this,wi),quadPoints:I(this,Je,UL).call(this),outlines:I(this,Je,jL).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!I(this,Je,HL).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Fm=new WeakMap,Yw=new WeakMap,pl=new WeakMap,vh=new WeakMap,Jw=new WeakMap,os=new WeakMap,Zw=new WeakMap,e0=new WeakMap,Ah=new WeakMap,Os=new WeakMap,Bs=new WeakMap,cr=new WeakMap,Sm=new WeakMap,Tm=new WeakMap,Ir=new WeakMap,km=new WeakMap,wi=new WeakMap,t0=new WeakMap,Je=new WeakSet,LC=function(){const t=new DC(c(this,pl),.001);_(this,Os,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,Os).box;const n=new DC(c(this,pl),.0025,.001,this._uiManager.direction==="ltr");_(this,os,n.getOutlines());const{firstPoint:r}=c(this,Os);_(this,Sm,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=c(this,os);_(this,Tm,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},KA=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var w,A;if(_(this,Os,t),_(this,os,t.getNewOutline(c(this,wi)/2+1.5,.0025)),n>=0)_(this,Bs,n),_(this,vh,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),_(this,Ir,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,os).box,path:{d:c(this,os).toSVGPath()}},!0));else if(this.parent){const F=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Bs),{bbox:I(w=wt,xi,Jp).call(w,c(this,Os).box,(F-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Ir),{bbox:I(A=wt,xi,Jp).call(A,c(this,os).box,F),path:{d:c(this,os).toSVGPath()}})}const[o,u,d,h]=t.box;switch(this.rotation){case 0:this.x=o,this.y=u,this.width=d,this.height=h;break;case 90:{const[F,C]=this.parentDimensions;this.x=u,this.y=1-o,this.width=d*C/F,this.height=h*F/C;break}case 180:this.x=1-o,this.y=1-u,this.width=d,this.height=h;break;case 270:{const[F,C]=this.parentDimensions;this.x=1-u,this.y=o,this.width=d*C/F,this.height=h*F/C;break}}const{firstPoint:f}=t;_(this,Sm,[(f[0]-o)/d,(f[1]-u)/h]);const{lastPoint:g}=c(this,os);_(this,Tm,[(g[0]-o)/d,(g[1]-u)/h])},LL=function(t){const n=(o,u)=>{this.color=o,this.opacity=u,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:n.bind(this,t,wt._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},OL=function(t){const n=c(this,wi),r=i=>{_(this,wi,i),I(this,Je,BL).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},BL=function(t){c(this,cr)&&(I(this,Je,KA).call(this,{highlightOutlines:c(this,Os).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},OC=function(){c(this,Bs)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Bs)),_(this,Bs,null),this.parent.drawLayer.remove(c(this,Ir)),_(this,Ir,null))},yd=function(t=this.parent){c(this,Bs)===null&&({id:Ln(this,Bs)._,clipPathId:Ln(this,vh)._}=t.drawLayer.draw({bbox:c(this,Os).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,cr)},path:{d:c(this,Os).toSVGPath()}},!1,!0),_(this,Ir,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,cr)},bbox:c(this,os).box,path:{d:c(this,os).toSVGPath()}},c(this,cr))),c(this,Ah)&&(c(this,Ah).style.clipPath=c(this,vh)))},xi=new WeakSet,Jp=function([t,n,r,i],o){switch(o){case 90:return[1-n-i,t,i,r];case 180:return[1-t-r,1-n-i,r,i];case 270:return[n,1-t-r,i,r]}return[t,n,r,i]},VL=function(t){wt._keyboardManager.exec(this,t)},QA=function(t){if(!c(this,Fm))return;const n=window.getSelection();t?n.setPosition(c(this,Fm),c(this,Yw)):n.setPosition(c(this,Zw),c(this,e0))},XA=function(){return c(this,cr)?this.rotation:0},UL=function(){if(c(this,cr))return null;const[t,n]=this.pageDimensions,[r,i]=this.pageTranslation,o=c(this,pl),u=new Float32Array(o.length*8);let d=0;for(const{x:h,y:f,width:g,height:w}of o){const A=h*t+r,F=(1-f)*n+i;u[d]=u[d+4]=A,u[d+1]=u[d+3]=F,u[d+2]=u[d+6]=A+g*t,u[d+5]=u[d+7]=F-w*n,d+=8}return u},jL=function(t){return c(this,Os).serialize(t,I(this,Je,XA).call(this))},$L=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},zL=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},HL=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==n[i])},S(wt,xi),ne(wt,"_defaultColor",null),ne(wt,"_defaultOpacity",1),ne(wt,"_defaultThickness",12),ne(wt,"_type","highlight"),ne(wt,"_editorType",Xe.HIGHLIGHT),ne(wt,"_freeHighlightId",-1),ne(wt,"_freeHighlight",null),ne(wt,"_freeHighlightClipId","");let O_=wt;var _h;class WL{constructor(){S(this,_h,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){c(this,_h)[e]=t}toSVGProperties(){const e=c(this,_h);return _(this,_h,Object.create(null)),{root:e}}reset(){_(this,_h,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){At("Not implemented")}}_h=new WeakMap;var Vs,Im,Qn,xh,Eh,pt,BC,VC,UC,Lg,GL,YA,Og,Zp;const rt=class rt extends Ut{constructor(t){super(t);S(this,pt);S(this,Vs,null);S(this,Im);ne(this,"_colorPicker",null);ne(this,"_drawId",null);_(this,Im,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(I(this,pt,BC).call(this,t),I(this,pt,Lg).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(n))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){At("Not implemented")}static get typesMap(){At("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(c(rt,Qn).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,n[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,n[i]]);return t}_updateProperty(t,n,r){const i=this._drawingOptions,o=i[n],u=d=>{var f;i.updateProperty(n,d);const h=c(this,Vs).updateProperty(n,d);h&&I(this,pt,Og).call(this,h),(f=this.parent)==null||f.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,r),undo:u.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,rt._mergeSVGProperties(c(this,Vs).getPathResizingSVGProperties(I(this,pt,YA).call(this)),{bbox:I(this,pt,Zp).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,rt._mergeSVGProperties(c(this,Vs).getPathResizedSVGProperties(I(this,pt,YA).call(this)),{bbox:I(this,pt,Zp).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:I(this,pt,Zp).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,rt._mergeSVGProperties(c(this,Vs).getPathTranslatedSVGProperties(I(this,pt,YA).call(this),this.parentDimensions),{bbox:I(this,pt,Zp).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Im)&&(_(this,Im,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){I(this,pt,UC).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,pt,Lg).call(this),I(this,pt,Og).call(this,c(this,Vs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),I(this,pt,UC).call(this)):t&&(this._uiManager.addShouldRescale(this),I(this,pt,Lg).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,rt._mergeSVGProperties({bbox:I(this,pt,Zp).call(this)},c(this,Vs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&I(this,pt,Og).call(this,c(this,Vs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,i,o){At("Not implemented")}static startDrawing(t,n,r,i){var T;const{target:o,offsetX:u,offsetY:d,pointerId:h,pointerType:f}=i;if(Cr.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:w,height:A}=o.getBoundingClientRect(),F=_(rt,xh,new AbortController),C=t.combinedSignal(F);if(Cr.setPointer(f,h),window.addEventListener("pointerup",P=>{Cr.isSamePointerIdOrRemove(P.pointerId)&&this._endDraw(P)},{signal:C}),window.addEventListener("pointercancel",P=>{Cr.isSamePointerIdOrRemove(P.pointerId)&&this._currentParent.endDrawingSession()},{signal:C}),window.addEventListener("pointerdown",P=>{Cr.isSamePointerType(P.pointerType)&&(Cr.initializeAndAddPointerId(P.pointerId),c(rt,Qn).isCancellable()&&(c(rt,Qn).removeLastElement(),c(rt,Qn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",Ci,{signal:C}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),o.addEventListener("touchmove",P=>{Cr.isSameTimeStamp(P.timeStamp)&&hn(P)},{signal:C}),t.toggleDrawing(),(T=n._editorUndoBar)==null||T.hide(),c(rt,Qn)){t.drawLayer.updateProperties(this._currentDrawId,c(rt,Qn).startNew(u,d,w,A,g));return}n.updateUIForDefaultProperties(this),_(rt,Qn,this.createDrawerInstance(u,d,w,A,g)),_(rt,Eh,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(rt,Eh).toSVGProperties(),c(rt,Qn).defaultSVGProperties),!0,!1)}static _drawMove(t){if(Cr.isSameTimeStamp(t.timeStamp),!c(rt,Qn))return;const{offsetX:n,offsetY:r,pointerId:i}=t;if(Cr.isSamePointerId(i)){if(Cr.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(rt,Qn).add(n,r)),Cr.setTimeStamp(t.timeStamp),hn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,_(rt,Qn,null),_(rt,Eh,null),Cr.clearTimeStamp()),c(rt,xh)&&(c(rt,xh).abort(),_(rt,xh,null),Cr.clearPointerIds())}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,c(rt,Qn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=c(rt,Qn),i=this._currentDrawId,o=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:lt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(lt.DRAW_STEP),!c(rt,Qn).isEmpty()){const{pageDimensions:[r,i],scale:o}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(rt,Qn).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:c(rt,Eh),mustBeCommitted:!t});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,i,o,u){At("Not implemented")}static async deserialize(t,n,r){var g,w;const{rawDims:{pageWidth:i,pageHeight:o,pageX:u,pageY:d}}=n.viewport,h=this.deserializeDraw(u,d,i,o,this._INNER_MARGIN,t),f=await super.deserialize(t,n,r);return f.createDrawingOptions(t),I(g=f,pt,BC).call(g,{drawOutlines:h}),I(w=f,pt,Lg).call(w),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[n,r]=this.pageTranslation,[i,o]=this.pageDimensions;return c(this,Vs).serialize([n,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Vs=new WeakMap,Im=new WeakMap,Qn=new WeakMap,xh=new WeakMap,Eh=new WeakMap,pt=new WeakSet,BC=function({drawOutlines:t,drawId:n,drawingOptions:r}){_(this,Vs,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=I(this,pt,VC).call(this,t,this.parent),I(this,pt,Og).call(this,t.box)},VC=function(t,n){const{id:r}=n.drawLayer.draw(rt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},UC=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Lg=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=I(this,pt,VC).call(this,c(this,Vs),t)}},GL=function([t,n,r,i]){const{parentDimensions:[o,u],rotation:d}=this;switch(d){case 90:return[n,1-t,r*(u/o),i*(o/u)];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,r*(u/o),i*(o/u)];default:return[t,n,r,i]}},YA=function(){const{x:t,y:n,width:r,height:i,parentDimensions:[o,u],rotation:d}=this;switch(d){case 90:return[1-n,t,r*(o/u),i*(u/o)];case 180:return[1-t,1-n,r,i];case 270:return[n,1-t,r*(o/u),i*(u/o)];default:return[t,n,r,i]}},Og=function(t){[this.x,this.y,this.width,this.height]=I(this,pt,GL).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Zp=function(){const{x:t,y:n,width:r,height:i,rotation:o,parentRotation:u,parentDimensions:[d,h]}=this;switch((o*4+u)/90){case 1:return[1-n-i,t,i,r];case 2:return[1-t-r,1-n-i,r,i];case 3:return[n,1-t-r,i,r];case 4:return[t,n-r*(d/h),i*(h/d),r*(d/h)];case 5:return[1-n,t,r*(d/h),i*(h/d)];case 6:return[1-t-i*(h/d),1-n,i*(h/d),r*(d/h)];case 7:return[n-r*(d/h),1-t-i*(h/d),r*(d/h),i*(h/d)];case 8:return[t-r,n-i,r,i];case 9:return[1-n,t-r,i,r];case 10:return[1-t,1-n,r,i];case 11:return[n-i,1-t,i,r];case 12:return[t-i*(h/d),n,i*(h/d),r*(d/h)];case 13:return[1-n-r*(d/h),t-i*(h/d),r*(d/h),i*(h/d)];case 14:return[1-t,1-n-r*(d/h),i*(h/d),r*(d/h)];case 15:return[n,1-t,r*(d/h),i*(h/d)];default:return[t,n,r,i]}},ne(rt,"_currentDrawId",-1),ne(rt,"_currentParent",null),S(rt,Qn,null),S(rt,xh,null),S(rt,Eh,null),ne(rt,"_INNER_MARGIN",3);let B_=rt;var Ga,Xn,Yn,bh,Pm,Ur,ur,vi,Ch,Fh,Sh,Rm,JA;class rq{constructor(e,t,n,r,i,o){S(this,Rm);S(this,Ga,new Float64Array(6));S(this,Xn);S(this,Yn);S(this,bh);S(this,Pm);S(this,Ur);S(this,ur,"");S(this,vi,0);S(this,Ch,new T0);S(this,Fh);S(this,Sh);_(this,Fh,n),_(this,Sh,r),_(this,bh,i),_(this,Pm,o),[e,t]=I(this,Rm,JA).call(this,e,t);const u=_(this,Xn,[NaN,NaN,NaN,NaN,e,t]);_(this,Ur,[e,t]),_(this,Yn,[{line:u,points:c(this,Ur)}]),c(this,Ga).set(u,0)}updateProperty(e,t){e==="stroke-width"&&_(this,Pm,t)}isEmpty(){return!c(this,Yn)||c(this,Yn).length===0}isCancellable(){return c(this,Ur).length<=10}add(e,t){[e,t]=I(this,Rm,JA).call(this,e,t);const[n,r,i,o]=c(this,Ga).subarray(2,6),u=e-i,d=t-o;return Math.hypot(c(this,Fh)*u,c(this,Sh)*d)<=2?null:(c(this,Ur).push(e,t),isNaN(n)?(c(this,Ga).set([i,o,e,t],2),c(this,Xn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Ga)[0])&&c(this,Xn).splice(6,6),c(this,Ga).set([n,r,i,o,e,t],0),c(this,Xn).push(...Fe.createBezierPoints(n,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(c(this,Ur).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){_(this,Fh,n),_(this,Sh,r),_(this,bh,i),[e,t]=I(this,Rm,JA).call(this,e,t);const o=_(this,Xn,[NaN,NaN,NaN,NaN,e,t]);_(this,Ur,[e,t]);const u=c(this,Yn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),c(this,Yn).push({line:o,points:c(this,Ur)}),c(this,Ga).set(o,0),_(this,vi,0),this.toSVGPath(),null}getLastElement(){return c(this,Yn).at(-1)}setLastElement(e){return c(this,Yn)?(c(this,Yn).push(e),_(this,Xn,e.line),_(this,Ur,e.points),_(this,vi,0),{path:{d:this.toSVGPath()}}):c(this,Ch).setLastElement(e)}removeLastElement(){if(!c(this,Yn))return c(this,Ch).removeLastElement();c(this,Yn).pop(),_(this,ur,"");for(let e=0,t=c(this,Yn).length;e<t;e++){const{line:n,points:r}=c(this,Yn)[e];_(this,Xn,n),_(this,Ur,r),_(this,vi,0),this.toSVGPath()}return{path:{d:c(this,ur)}}}toSVGPath(){const e=Fe.svgRound(c(this,Xn)[4]),t=Fe.svgRound(c(this,Xn)[5]);if(c(this,Ur).length===2)return _(this,ur,`${c(this,ur)} M ${e} ${t} Z`),c(this,ur);if(c(this,Ur).length<=6){const r=c(this,ur).lastIndexOf("M");_(this,ur,`${c(this,ur).slice(0,r)} M ${e} ${t}`),_(this,vi,6)}if(c(this,Ur).length===4){const r=Fe.svgRound(c(this,Xn)[10]),i=Fe.svgRound(c(this,Xn)[11]);return _(this,ur,`${c(this,ur)} L ${r} ${i}`),_(this,vi,12),c(this,ur)}const n=[];c(this,vi)===0&&(n.push(`M ${e} ${t}`),_(this,vi,6));for(let r=c(this,vi),i=c(this,Xn).length;r<i;r+=6){const[o,u,d,h,f,g]=c(this,Xn).slice(r,r+6).map(Fe.svgRound);n.push(`C${o} ${u} ${d} ${h} ${f} ${g}`)}return _(this,ur,c(this,ur)+n.join(" ")),_(this,vi,c(this,Xn).length),c(this,ur)}getOutlines(e,t,n,r){const i=c(this,Yn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),c(this,Ch).build(c(this,Yn),e,t,n,c(this,bh),c(this,Pm),r),_(this,Ga,null),_(this,Xn,null),_(this,Yn,null),_(this,ur,null),c(this,Ch)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ga=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,bh=new WeakMap,Pm=new WeakMap,Ur=new WeakMap,ur=new WeakMap,vi=new WeakMap,Ch=new WeakMap,Fh=new WeakMap,Sh=new WeakMap,Rm=new WeakSet,JA=function(e,t){return Fe._normalizePoint(e,t,c(this,Fh),c(this,Sh),c(this,bh))};var jr,n0,r0,Us,qa,Ka,Dm,Nm,Th,fr,No,qL,KL,QL;class T0 extends Fe{constructor(){super(...arguments);S(this,fr);S(this,jr);S(this,n0,0);S(this,r0);S(this,Us);S(this,qa);S(this,Ka);S(this,Dm);S(this,Nm);S(this,Th)}build(t,n,r,i,o,u,d){_(this,qa,n),_(this,Ka,r),_(this,Dm,i),_(this,Nm,o),_(this,Th,u),_(this,r0,d??0),_(this,Us,t),I(this,fr,KL).call(this)}get thickness(){return c(this,Th)}setLastElement(t){return c(this,Us).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Us).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of c(this,Us)){if(t.push(`M${Fe.svgRound(n[4])} ${Fe.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Fe.svgRound(n[10])} ${Fe.svgRound(n[11])}`);continue}for(let r=6,i=n.length;r<i;r+=6){const[o,u,d,h,f,g]=n.subarray(r,r+6).map(Fe.svgRound);t.push(`C${o} ${u} ${d} ${h} ${f} ${g}`)}}return t.join("")}serialize([t,n,r,i],o){const u=[],d=[],[h,f,g,w]=I(this,fr,qL).call(this);let A,F,C,T,P,O,N,V,z;switch(c(this,Nm)){case 0:z=Fe._rescale,A=t,F=n+i,C=r,T=-i,P=t+h*r,O=n+(1-f-w)*i,N=t+(h+g)*r,V=n+(1-f)*i;break;case 90:z=Fe._rescaleAndSwap,A=t,F=n,C=r,T=i,P=t+f*r,O=n+h*i,N=t+(f+w)*r,V=n+(h+g)*i;break;case 180:z=Fe._rescale,A=t+r,F=n,C=-r,T=i,P=t+(1-h-g)*r,O=n+f*i,N=t+(1-h)*r,V=n+(f+w)*i;break;case 270:z=Fe._rescaleAndSwap,A=t+r,F=n+i,C=-r,T=-i,P=t+(1-f-w)*r,O=n+(1-h-g)*i,N=t+(1-f)*r,V=n+(1-h)*i;break}for(const{line:W,points:D}of c(this,Us))u.push(z(W,A,F,C,T,o?new Array(W.length):null)),d.push(z(D,A,F,C,T,o?new Array(D.length):null));return{lines:u,points:d,rect:[P,O,N,V]}}static deserialize(t,n,r,i,o,{paths:{lines:u,points:d},rotation:h,thickness:f}){const g=[];let w,A,F,C,T;switch(h){case 0:T=Fe._rescale,w=-t/r,A=n/i+1,F=1/r,C=-1/i;break;case 90:T=Fe._rescaleAndSwap,w=-n/i,A=-t/r,F=1/i,C=1/r;break;case 180:T=Fe._rescale,w=t/r+1,A=-n/i,F=-1/r,C=1/i;break;case 270:T=Fe._rescaleAndSwap,w=n/i+1,A=t/r+1,F=-1/i,C=-1/r;break}if(!u){u=[];for(const O of d){const N=O.length;if(N===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1]]));continue}if(N===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1],NaN,NaN,NaN,NaN,O[2],O[3]]));continue}const V=new Float32Array(3*(N-2));u.push(V);let[z,W,D,R]=O.subarray(0,4);V.set([NaN,NaN,NaN,NaN,z,W],0);for(let L=4;L<N;L+=2){const U=O[L],$=O[L+1];V.set(Fe.createBezierPoints(z,W,D,R,U,$),(L-2)*3),[z,W,D,R]=[D,R,U,$]}}}for(let O=0,N=u.length;O<N;O++)g.push({line:T(u[O].map(V=>V??NaN),w,A,F,C),points:T(d[O].map(V=>V??NaN),w,A,F,C)});const P=new this.prototype.constructor;return P.build(g,r,i,1,h,f,o),P}get box(){return c(this,jr)}updateProperty(t,n){return t==="stroke-width"?I(this,fr,QL).call(this,n):null}updateParentDimensions([t,n],r){const[i,o]=I(this,fr,No).call(this);_(this,qa,t),_(this,Ka,n),_(this,Dm,r);const[u,d]=I(this,fr,No).call(this),h=u-i,f=d-o,g=c(this,jr);return g[0]-=h,g[1]-=f,g[2]+=2*h,g[3]+=2*f,g}updateRotation(t){return _(this,n0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,jr).map(Fe.svgRound).join(" ")}get defaultProperties(){const[t,n]=c(this,jr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Fe.svgRound(t)} ${Fe.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=c(this,jr);let r=0,i=0,o=0,u=0,d=0,h=0;switch(c(this,n0)){case 90:i=n/t,o=-t/n,d=t;break;case 180:r=-1,u=-1,d=t,h=n;break;case 270:i=-n/t,o=t/n,h=n;break;default:return""}return`matrix(${r} ${i} ${o} ${u} ${Fe.svgRound(d)} ${Fe.svgRound(h)})`}getPathResizingSVGProperties([t,n,r,i]){const[o,u]=I(this,fr,No).call(this),[d,h,f,g]=c(this,jr);if(Math.abs(f-o)<=Fe.PRECISION||Math.abs(g-u)<=Fe.PRECISION){const T=t+r/2-(d+f/2),P=n+i/2-(h+g/2);return{path:{"transform-origin":`${Fe.svgRound(t)} ${Fe.svgRound(n)}`,transform:`${this.rotationTransform} translate(${T} ${P})`}}}const w=(r-2*o)/(f-2*o),A=(i-2*u)/(g-2*u),F=f/r,C=g/i;return{path:{"transform-origin":`${Fe.svgRound(d)} ${Fe.svgRound(h)}`,transform:`${this.rotationTransform} scale(${F} ${C}) translate(${Fe.svgRound(o)} ${Fe.svgRound(u)}) scale(${w} ${A}) translate(${Fe.svgRound(-o)} ${Fe.svgRound(-u)})`}}}getPathResizedSVGProperties([t,n,r,i]){const[o,u]=I(this,fr,No).call(this),d=c(this,jr),[h,f,g,w]=d;if(d[0]=t,d[1]=n,d[2]=r,d[3]=i,Math.abs(g-o)<=Fe.PRECISION||Math.abs(w-u)<=Fe.PRECISION){const P=t+r/2-(h+g/2),O=n+i/2-(f+w/2);for(const{line:N,points:V}of c(this,Us))Fe._translate(N,P,O,N),Fe._translate(V,P,O,V);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Fe.svgRound(t)} ${Fe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(r-2*o)/(g-2*o),F=(i-2*u)/(w-2*u),C=-A*(h+o)+t+o,T=-F*(f+u)+n+u;if(A!==1||F!==1||C!==0||T!==0)for(const{line:P,points:O}of c(this,Us))Fe._rescale(P,C,T,A,F,P),Fe._rescale(O,C,T,A,F,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Fe.svgRound(t)} ${Fe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[i,o]=r,u=c(this,jr),d=t-u[0],h=n-u[1];if(c(this,qa)===i&&c(this,Ka)===o)for(const{line:f,points:g}of c(this,Us))Fe._translate(f,d,h,f),Fe._translate(g,d,h,g);else{const f=c(this,qa)/i,g=c(this,Ka)/o;_(this,qa,i),_(this,Ka,o);for(const{line:w,points:A}of c(this,Us))Fe._rescale(w,d,h,f,g,w),Fe._rescale(A,d,h,f,g,A);u[2]*=f,u[3]*=g}return u[0]=t,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Fe.svgRound(t)} ${Fe.svgRound(n)}`}}}get defaultSVGProperties(){const t=c(this,jr);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Fe.svgRound(t[0])} ${Fe.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}jr=new WeakMap,n0=new WeakMap,r0=new WeakMap,Us=new WeakMap,qa=new WeakMap,Ka=new WeakMap,Dm=new WeakMap,Nm=new WeakMap,Th=new WeakMap,fr=new WeakSet,No=function(t=c(this,Th)){const n=c(this,r0)+t/2*c(this,Dm);return c(this,Nm)%180===0?[n/c(this,qa),n/c(this,Ka)]:[n/c(this,Ka),n/c(this,qa)]},qL=function(){const[t,n,r,i]=c(this,jr),[o,u]=I(this,fr,No).call(this,0);return[t+o,n+u,r-2*o,i-2*u]},KL=function(){const t=_(this,jr,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of c(this,Us)){if(i.length<=12){for(let d=4,h=i.length;d<h;d+=6)xe.pointBoundingBox(i[d],i[d+1],t);continue}let o=i[4],u=i[5];for(let d=6,h=i.length;d<h;d+=6){const[f,g,w,A,F,C]=i.subarray(d,d+6);xe.bezierBoundingBox(o,u,f,g,w,A,F,C,t),o=F,u=C}}const[n,r]=I(this,fr,No).call(this);t[0]=dr(t[0]-n,0,1),t[1]=dr(t[1]-r,0,1),t[2]=dr(t[2]+n,0,1),t[3]=dr(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},QL=function(t){const[n,r]=I(this,fr,No).call(this);_(this,Th,t);const[i,o]=I(this,fr,No).call(this),[u,d]=[i-n,o-r],h=c(this,jr);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h};class W1 extends WL{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Ut._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new W1(this._viewParameters);return e.updateAll(this),e}}var n1,XL;const of=class of extends B_{constructor(t){super({...t,name:"inkEditor"});S(this,n1);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){Ut.initialize(t,n),this._defaultDrawingOptions=new W1(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ge(this,"typesMap",new Map([[lt.INK_THICKNESS,"stroke-width"],[lt.INK_COLOR,"stroke"],[lt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,i,o){return new rq(t,n,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,i,o,u){return T0.deserialize(t,n,r,i,o,u)}static async deserialize(t,n,r){let i=null;if(t instanceof CS){const{data:{inkLists:u,rect:d,rotation:h,id:f,color:g,opacity:w,borderStyle:{rawWidth:A},popupRef:F,richText:C,contentsObj:T,creationDate:P,modificationDate:O},parent:{page:{pageNumber:N}}}=t;i=t={annotationType:Xe.INK,color:Array.from(g),thickness:A,opacity:w,paths:{points:u},boxes:null,pageIndex:N-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:F,richText:C,comment:(T==null?void 0:T.str)||null,creationDate:P,modificationDate:O}}const o=await super.deserialize(t,n,r);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new N_(this)),[["colorPicker",this._colorPicker]]}get colorType(){return lt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=of.getDefaultDrawingOptions({stroke:xe.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":u}}=this,d=Object.assign(super.serialize(t),{color:Ut._colorManager.convert(i),opacity:o,thickness:u,paths:{lines:n,points:r}});return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!I(this,n1,XL).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};n1=new WeakSet,XL=function(t){const{color:n,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((u,d)=>u!==n[d])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},ne(of,"_type","ink"),ne(of,"_editorType",Xe.INK),ne(of,"_defaultDrawingOptions",null);let jC=of;class $C extends T0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const uA=8,hg=3;var kh,xt,zC,qi,YL,JL,HC,ZA,ZL,eO,tO,WC,GC,nO;class vl{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},i,o,u,d){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const g=200,w=f.font=`${n} ${r} ${g}px ${t}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:F,actualBoundingBoxAscent:C,actualBoundingBoxDescent:T,fontBoundingBoxAscent:P,fontBoundingBoxDescent:O,width:N}=f.measureText(e),V=1.5,z=Math.ceil(Math.max(Math.abs(A)+Math.abs(F)||0,N)*V),W=Math.ceil(Math.max(Math.abs(C)+Math.abs(T)||g,Math.abs(P)+Math.abs(O)||g)*V);h=new OffscreenCanvas(z,W),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=w,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,z,W),f.fillStyle="black",f.fillText(e,z*(V-1)/2,W*(3-V)/2);const D=I(this,xt,WC).call(this,f.getImageData(0,0,z,W).data),R=I(this,xt,tO).call(this,D),L=I(this,xt,GC).call(this,R),U=I(this,xt,HC).call(this,D,z,W,L);return this.processDrawnLines({lines:{curves:U,width:z,height:W},pageWidth:i,pageHeight:o,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,i){const[o,u,d]=I(this,xt,nO).call(this,e),[h,f]=I(this,xt,eO).call(this,o,u,d,Math.hypot(u,d)*c(this,kh).sigmaSFactor,c(this,kh).sigmaR,c(this,kh).kernelSize),g=I(this,xt,GC).call(this,f),w=I(this,xt,HC).call(this,h,u,d,g);return this.processDrawnLines({lines:{curves:w,width:u,height:d},pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:o,areContours:u}){r%180!==0&&([t,n]=[n,t]);const{curves:d,width:h,height:f}=e,g=e.thickness??0,w=[],A=Math.min(t/h,n/f),F=A/t,C=A/n,T=[];for(const{points:O}of d){const N=o?I(this,xt,ZL).call(this,O):O;if(!N)continue;T.push(N);const V=N.length,z=new Float32Array(V),W=new Float32Array(3*(V===2?2:V-2));if(w.push({line:W,points:z}),V===2){z[0]=N[0]*F,z[1]=N[1]*C,W.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[D,R,L,U]=N;D*=F,R*=C,L*=F,U*=C,z.set([D,R,L,U],0),W.set([NaN,NaN,NaN,NaN,D,R],0);for(let $=4;$<V;$+=2){const G=z[$]=N[$]*F,j=z[$+1]=N[$+1]*C;W.set(Fe.createBezierPoints(D,R,L,U,G,j),($-2)*3),[D,R,L,U]=[L,U,G,j]}}if(w.length===0)return null;const P=u?new $C:new T0;return P.build(w,t,n,1,r,u?0:g,i),{outline:P,newCurves:T,areContours:u,thickness:g,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:i}){let o=1/0,u=-1/0,d=0;for(const N of e){d+=N.length;for(let V=2,z=N.length;V<z;V++){const W=N[V]-N[V-2];o=Math.min(o,W),u=Math.max(u,W)}}let h;o>=-128&&u<=127?h=Int8Array:o>=-32768&&u<=32767?h=Int16Array:h=Int32Array;const f=e.length,g=uA+hg*f,w=new Uint32Array(g);let A=0;w[A++]=g*Uint32Array.BYTES_PER_ELEMENT+(d-2*f)*h.BYTES_PER_ELEMENT,w[A++]=0,w[A++]=r,w[A++]=i,w[A++]=t?0:1,w[A++]=Math.max(0,Math.floor(n??0)),w[A++]=f,w[A++]=h.BYTES_PER_ELEMENT;for(const N of e)w[A++]=N.length-2,w[A++]=N[0],w[A++]=N[1];const F=new CompressionStream("deflate-raw"),C=F.writable.getWriter();await C.ready,C.write(w);const T=h.prototype.constructor;for(const N of e){const V=new T(N.length-2);for(let z=2,W=N.length;z<W;z++)V[z-2]=N[z]-N[z-2];C.write(V)}C.close();const P=await new Response(F.readable).arrayBuffer();return new Uint8Array(P).toBase64()}static async decompressSignature(e){try{const t=Uint8Array.fromBase64(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,u=0;for await(const N of n)o||(o=new Uint8Array(new Uint32Array(N.buffer,0,4)[0])),o.set(N,u),u+=N.length;const d=new Uint32Array(o.buffer,0,o.length>>2),h=d[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=d[2],g=d[3],w=d[4]===0,A=d[5],F=d[6],C=d[7],T=[],P=(uA+hg*F)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(C){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(o.buffer,P);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(o.buffer,P);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(o.buffer,P);break}u=0;for(let N=0;N<F;N++){const V=d[hg*N+uA],z=new Float32Array(V+2);T.push(z);for(let W=0;W<hg-1;W++)z[W]=d[hg*N+uA+W+1];for(let W=0;W<V;W++)z[W+2]=z[W]+O[u++]}return{areContours:w,thickness:A,outlines:T,width:f,height:g}}catch(t){return We(`decompressSignature: ${t}`),null}}}kh=new WeakMap,xt=new WeakSet,zC=function(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r},qi=new WeakMap,YL=function(e,t,n,r,i,o,u){const d=I(this,xt,zC).call(this,n,r,i,o);for(let h=0;h<8;h++){const f=(-h+d-u+16)%8,g=c(this,qi)[2*f],w=c(this,qi)[2*f+1];if(e[(n+g)*t+(r+w)]!==0)return f}return-1},JL=function(e,t,n,r,i,o,u){const d=I(this,xt,zC).call(this,n,r,i,o);for(let h=0;h<8;h++){const f=(h+d+u+16)%8,g=c(this,qi)[2*f],w=c(this,qi)[2*f+1];if(e[(n+g)*t+(r+w)]!==0)return f}return-1},HC=function(e,t,n,r){const i=e.length,o=new Int32Array(i);for(let f=0;f<i;f++)o[f]=e[f]<=r?1:0;for(let f=1;f<n-1;f++)o[f*t]=o[f*t+t-1]=0;for(let f=0;f<t;f++)o[f]=o[t*n-1-f]=0;let u=1,d;const h=[];for(let f=1;f<n-1;f++){d=1;for(let g=1;g<t-1;g++){const w=f*t+g,A=o[w];if(A===0)continue;let F=f,C=g;if(A===1&&o[w-1]===0)u+=1,C-=1;else if(A>=1&&o[w+1]===0)u+=1,C+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const T=[g,f],P=C===g+1,O={isHole:P,points:T,id:u,parent:0};h.push(O);let N;for(const $ of h)if($.id===d){N=$;break}N?N.isHole?O.parent=P?N.parent:d:O.parent=P?d:N.parent:O.parent=P?d:0;const V=I(this,xt,YL).call(this,o,t,f,g,F,C,0);if(V===-1){o[w]=-u,o[w]!==1&&(d=Math.abs(o[w]));continue}let z=c(this,qi)[2*V],W=c(this,qi)[2*V+1];const D=f+z,R=g+W;F=D,C=R;let L=f,U=g;for(;;){const $=I(this,xt,JL).call(this,o,t,L,U,F,C,1);z=c(this,qi)[2*$],W=c(this,qi)[2*$+1];const G=L+z,j=U+W;T.push(j,G);const ye=L*t+U;if(o[ye+1]===0?o[ye]=-u:o[ye]===1&&(o[ye]=u),G===f&&j===g&&L===D&&U===R){o[w]!==1&&(d=Math.abs(o[w]));break}else F=L,C=U,L=G,U=j}}}return h},ZA=function(e,t,n,r){if(n-t<=4){for(let D=t;D<n-2;D+=2)r.push(e[D],e[D+1]);return}const i=e[t],o=e[t+1],u=e[n-4]-i,d=e[n-3]-o,h=Math.hypot(u,d),f=u/h,g=d/h,w=f*o-g*i,A=d/u,F=1/h,C=Math.atan(A),T=Math.cos(C),P=Math.sin(C),O=F*(Math.abs(T)+Math.abs(P)),N=F*(1-O+O**2),V=Math.max(Math.atan(Math.abs(P+T)*N),Math.atan(Math.abs(P-T)*N));let z=0,W=t;for(let D=t+2;D<n-2;D+=2){const R=Math.abs(w-f*e[D+1]+g*e[D]);R>z&&(W=D,z=R)}z>(h*V)**2?(I(this,xt,ZA).call(this,e,t,W+2,r),I(this,xt,ZA).call(this,e,W,n,r)):r.push(i,o)},ZL=function(e){const t=[],n=e.length;return I(this,xt,ZA).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},eO=function(e,t,n,r,i,o){const u=new Float32Array(o**2),d=-2*r**2,h=o>>1;for(let C=0;C<o;C++){const T=(C-h)**2;for(let P=0;P<o;P++)u[C*o+P]=Math.exp((T+(P-h)**2)/d)}const f=new Float32Array(256),g=-2*i**2;for(let C=0;C<256;C++)f[C]=Math.exp(C**2/g);const w=e.length,A=new Uint8Array(w),F=new Uint32Array(256);for(let C=0;C<n;C++)for(let T=0;T<t;T++){const P=C*t+T,O=e[P];let N=0,V=0;for(let W=0;W<o;W++){const D=C+W-h;if(!(D<0||D>=n))for(let R=0;R<o;R++){const L=T+R-h;if(L<0||L>=t)continue;const U=e[D*t+L],$=u[W*o+R]*f[Math.abs(U-O)];N+=U*$,V+=$}}const z=A[P]=Math.round(N/V);F[z]++}return[A,F]},tO=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},WC=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let u=0,d=n.length;u<d;u++){const h=n[u]=e[u<<2];r=Math.max(r,h),i=Math.min(i,h)}const o=255/(r-i);for(let u=0,d=n.length;u<d;u++)n[u]=(n[u]-i)*o;return n},GC=function(e){let t,n=-1/0,r=-1/0;const i=e.findIndex(d=>d!==0);let o=i,u=i;for(t=i;t<256;t++){const d=e[t];d>n&&(t-o>r&&(r=t-o,u=t-1),n=d,o=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t},nO=function(e){const t=e,{width:n,height:r}=e,{maxDim:i}=c(this,kh);let o=n,u=r;if(n>i||r>i){let w=n,A=r,F=Math.log2(Math.max(n,r)/i);const C=Math.floor(F);F=F===C?C-1:C;for(let P=0;P<F;P++){o=Math.ceil(w/2),u=Math.ceil(A/2);const O=new OffscreenCanvas(o,u);O.getContext("2d").drawImage(e,0,0,w,A,0,0,o,u),w=o,A=u,e!==t&&e.close(),e=O.transferToImageBitmap()}const T=Math.min(i/o,i/u);o=Math.round(o*T),u=Math.round(u*T)}const h=new OffscreenCanvas(o,u).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,o,u),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,o,u);const f=h.getImageData(0,0,o,u).data;return[I(this,xt,WC).call(this,f),o,u]},S(vl,xt),S(vl,kh,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),S(vl,qi,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class FS extends WL{constructor(){super(),super.updateProperties({fill:Ut._defaultLineColor,"stroke-width":0})}clone(){const e=new FS;return e.updateAll(this),e}}class SS extends W1{constructor(e){super(e),super.updateProperties({stroke:Ut._defaultLineColor,"stroke-width":1})}clone(){const e=new SS(this._viewParameters);return e.updateAll(this),e}}var ou,Qa,lu,Ih;const xs=class xs extends B_{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});S(this,ou,!1);S(this,Qa,null);S(this,lu,null);S(this,Ih,null);this._willKeepAspectRatio=!0,_(this,lu,t.signatureData||null),_(this,Qa,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){Ut.initialize(t,n),this._defaultDrawingOptions=new FS,this._defaultDrawnSignatureOptions=new SS(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ge(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,Qa)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(c(this,lu)){const{lines:i,mustSmooth:o,areContours:u,description:d,uuid:h,heightInPage:f}=c(this,lu),{rawDims:{pageWidth:g,pageHeight:w},rotation:A}=this.parent.viewport,F=vl.processDrawnLines({lines:i,pageWidth:g,pageHeight:w,rotation:A,innerMargin:xs._INNER_MARGIN,mustSmooth:o,areContours:u});this.addSignature(F,f,d,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,Qa)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){_(this,Ih,t),this.addEditToolbar()}getUuid(){return c(this,Ih)}get description(){return c(this,Qa)}set description(t){_(this,Qa,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:r,width:i,height:o}=c(this,lu),u=Math.max(i,o),d=vl.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:r,width:i,height:o},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,i){const{x:o,y:u}=this,{outline:d}=_(this,lu,t);_(this,ou,d instanceof $C),this.description=r;let h;c(this,ou)?h=xs.getDefaultDrawingOptions():(h=xs._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:h});const[,f]=this.pageDimensions;let g=n/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return vl.process(t,n,r,i,xs._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return vl.extractContoursFromText(t,n,r,i,o,xs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return vl.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:i,innerMargin:xs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=xs.getDefaultDrawingOptions():(this._drawingOptions=xs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:c(this,ou),color:[0,0,0],thickness:c(this,ou)?0:i});return this.addComment(o),t?(o.paths={lines:n,points:r},o.uuid=c(this,Ih),o.isCopy=!0):o.lines=n,c(this,Qa)&&(o.accessibilityData={type:"Figure",alt:c(this,Qa)}),o}static deserializeDraw(t,n,r,i,o,u){return u.areContours?$C.deserialize(t,n,r,i,o,u):T0.deserialize(t,n,r,i,o,u)}static async deserialize(t,n,r){var o;const i=await super.deserialize(t,n,r);return _(i,ou,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",_(i,Ih,t.uuid),i}};ou=new WeakMap,Qa=new WeakMap,lu=new WeakMap,Ih=new WeakMap,ne(xs,"_type","signature"),ne(xs,"_editorType",Xe.SIGNATURE),ne(xs,"_defaultDrawingOptions",null);let qC=xs;var Qt,Jn,cu,fl,uu,Mm,ml,Ph,Xa,js,Lm,ft,Bg,Vg,e_,t_,n_,QC,r_,rO;class KC extends Ut{constructor(t){super({...t,name:"stampEditor"});S(this,ft);S(this,Qt,null);S(this,Jn,null);S(this,cu,null);S(this,fl,null);S(this,uu,null);S(this,Mm,"");S(this,ml,null);S(this,Ph,!1);S(this,Xa,null);S(this,js,!1);S(this,Lm,!1);_(this,fl,t.bitmapUrl),_(this,uu,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){Ut.initialize(t,n)}static isHandlingMimeForPasting(t){return Pb.includes(t)}static paste(t,n){n.pasteEditor({mode:Xe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:u}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:i,width:o,height:u,channels:i.length/(o*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const h=d.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t;c(this,Jn)&&(_(this,Qt,null),this._uiManager.imageManager.deleteId(c(this,Jn)),(t=c(this,ml))==null||t.remove(),_(this,ml,null),c(this,Xa)&&(clearTimeout(c(this,Xa)),_(this,Xa,null))),super.remove()}rebuild(){if(!this.parent){c(this,Jn)&&I(this,ft,e_).call(this);return}super.rebuild(),this.div!==null&&(c(this,Jn)&&c(this,ml)===null&&I(this,ft,e_).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,cu)||c(this,Qt)||c(this,fl)||c(this,uu)||c(this,Jn)||c(this,Ph))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,Ph)||(c(this,Qt)?I(this,ft,t_).call(this):I(this,ft,e_).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(_(this,Jn,r),i&&_(this,Qt,i),_(this,Ph,!1),I(this,ft,t_).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Xa)!==null&&clearTimeout(c(this,Xa)),_(this,Xa,setTimeout(()=>{_(this,Xa,null),I(this,ft,QC).call(this)},200))}copyCanvas(t,n,r=!1){t||(t=224);const{width:i,height:o}=c(this,Qt),u=new lo;let d=c(this,Qt),h=i,f=o,g=null;if(n){if(i>n||o>n){const D=Math.min(n/i,n/o);h=Math.floor(i*D),f=Math.floor(o*D)}g=document.createElement("canvas");const A=g.width=Math.ceil(h*u.sx),F=g.height=Math.ceil(f*u.sy);c(this,js)||(d=I(this,ft,n_).call(this,A,F));const C=g.getContext("2d");C.filter=this._uiManager.hcmFilter;let T="white",P="#cfcfd8";this._uiManager.hcmFilter!=="none"?P="black":CW.isDarkMode&&(T="#8f8f9d",P="#42414d");const O=15,N=O*u.sx,V=O*u.sy,z=new OffscreenCanvas(N*2,V*2),W=z.getContext("2d");W.fillStyle=T,W.fillRect(0,0,N*2,V*2),W.fillStyle=P,W.fillRect(0,0,N,V),W.fillRect(N,V,N,V),C.fillStyle=C.createPattern(z,"repeat"),C.fillRect(0,0,A,F),C.drawImage(d,0,0,d.width,d.height,0,0,A,F)}let w=null;if(r){let A,F;if(u.symmetric&&d.width<t&&d.height<t)A=d.width,F=d.height;else if(d=c(this,Qt),i>t||o>t){const P=Math.min(t/i,t/o);A=Math.floor(i*P),F=Math.floor(o*P),c(this,js)||(d=I(this,ft,n_).call(this,A,F))}const T=new OffscreenCanvas(A,F).getContext("2d",{willReadFrequently:!0});T.drawImage(d,0,0,d.width,d.height,0,0,A,F),w={width:A,height:F,data:T.getImageData(0,0,A,F).data}}return{canvas:g,width:h,height:f,imageData:w}}static async deserialize(t,n,r){var T;let i=null,o=!1;if(t instanceof vL){const{data:{rect:P,rotation:O,id:N,structParent:V,popupRef:z,richText:W,contentsObj:D,creationDate:R,modificationDate:L},container:U,parent:{page:{pageNumber:$}},canvas:G}=t;let j,ye;G?(delete t.canvas,{id:j,bitmap:ye}=r.imageManager.getFromCanvas(U.id,G),G.remove()):(o=!0,t._hasNoCanvas=!0);const ce=((T=await n._structTree.getAriaAttributes(`${tf}${N}`))==null?void 0:T.get("aria-label"))||"";i=t={annotationType:Xe.STAMP,bitmapId:j,bitmap:ye,pageIndex:$-1,rect:P.slice(0),rotation:O,annotationElementId:N,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:ce},isSvg:!1,structParent:V,popupRef:z,richText:W,comment:(D==null?void 0:D.str)||null,creationDate:R,modificationDate:L}}const u=await super.deserialize(t,n,r),{rect:d,bitmap:h,bitmapUrl:f,bitmapId:g,isSvg:w,accessibilityData:A}=t;o?(r.addMissingCanvas(t.id,u),_(u,Ph,!0)):g&&r.imageManager.isValidId(g)?(_(u,Jn,g),h&&_(u,Qt,h)):_(u,fl,f),_(u,js,w);const[F,C]=u.pageDimensions;return u.width=(d[2]-d[0])/F,u.height=(d[3]-d[1])/C,A&&(u.altTextData=A),u._initialData=i,t.comment&&u.setCommentData(t),_(u,Lm,!!i),u}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:c(this,Jn),isSvg:c(this,js)});if(this.addComment(r),t)return r.bitmapUrl=I(this,ft,r_).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const d=I(this,ft,rO).call(this,r);return d.isSame?null:(d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const u=c(this,js)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(c(this,Jn)))n.stamps.set(c(this,Jn),{area:u,serialized:r}),r.bitmap=I(this,ft,r_).call(this,!1);else if(c(this,js)){const d=n.stamps.get(c(this,Jn));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=I(this,ft,r_).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Qt=new WeakMap,Jn=new WeakMap,cu=new WeakMap,fl=new WeakMap,uu=new WeakMap,Mm=new WeakMap,ml=new WeakMap,Ph=new WeakMap,Xa=new WeakMap,js=new WeakMap,Lm=new WeakMap,ft=new WeakSet,Bg=function(t,n=!1){if(!t){this.remove();return}_(this,Qt,t.bitmap),n||(_(this,Jn,t.id),_(this,js,t.isSvg)),t.file&&_(this,Mm,t.file.name),I(this,ft,t_).call(this)},Vg=function(){if(_(this,cu,null),this._uiManager.enableWaiting(!1),!!c(this,ml)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Qt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Qt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},e_=function(){if(c(this,Jn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Jn)).then(r=>I(this,ft,Bg).call(this,r,!0)).finally(()=>I(this,ft,Vg).call(this));return}if(c(this,fl)){const r=c(this,fl);_(this,fl,null),this._uiManager.enableWaiting(!0),_(this,cu,this._uiManager.imageManager.getFromUrl(r).then(i=>I(this,ft,Bg).call(this,i)).finally(()=>I(this,ft,Vg).call(this)));return}if(c(this,uu)){const r=c(this,uu);_(this,uu,null),this._uiManager.enableWaiting(!0),_(this,cu,this._uiManager.imageManager.getFromFile(r).then(i=>I(this,ft,Bg).call(this,i)).finally(()=>I(this,ft,Vg).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Pb.join(",");const n=this._uiManager._signal;_(this,cu,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),I(this,ft,Bg).call(this,i)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>I(this,ft,Vg).call(this))),t.click()},t_=function(){var h;const{div:t}=this;let{width:n,height:r}=c(this,Qt);const[i,o]=this.pageDimensions,u=.75;if(this.width)n=this.width*i,r=this.height*o;else if(n>u*i||r>u*o){const f=Math.min(u*i/n,u*o/r);n*=f,r*=f}this._uiManager.enableWaiting(!1);const d=_(this,ml,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/i,this.height=r/o,this.setDims(),(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),I(this,ft,QC).call(this),c(this,Lm)||(this.parent.addUndoableEditor(this),_(this,Lm,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Mm)&&this.div.setAttribute("aria-description",c(this,Mm)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},n_=function(t,n){const{width:r,height:i}=c(this,Qt);let o=r,u=i,d=c(this,Qt);for(;o>2*t||u>2*n;){const h=o,f=u;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(o,u);g.getContext("2d").drawImage(d,0,0,h,f,0,0,o,u),d=g.transferToImageBitmap()}return d},QC=function(){const[t,n]=this.parentDimensions,{width:r,height:i}=this,o=new lo,u=Math.ceil(r*t*o.sx),d=Math.ceil(i*n*o.sy),h=c(this,ml);if(!h||h.width===u&&h.height===d)return;h.width=u,h.height=d;const f=c(this,js)?c(this,Qt):I(this,ft,n_).call(this,u,d),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,u,d)},r_=function(t){if(t){if(c(this,js)){const i=this._uiManager.imageManager.getSvgUrl(c(this,Jn));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,Qt),n.getContext("2d").drawImage(c(this,Qt),0,0),n.toDataURL()}if(c(this,js)){const[n,r]=this.pageDimensions,i=Math.round(this.width*n*Du.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Du.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(i,o);return u.getContext("2d").drawImage(c(this,Qt),0,0,c(this,Qt).width,c(this,Qt).height,0,0,i,o),u.transferToImageBitmap()}return structuredClone(c(this,Qt))},rO=function(t){var u;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===n,o=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},ne(KC,"_type","stamp"),ne(KC,"_editorType",Xe.STAMP);var Rh,Om,du,hu,gl,ls,pu,Bm,Vm,Ki,yl,Zn,wl,fu,Um,Pe,mu,Mt,YC,sO,Sa,JC,ZC,s_;const Oi=class Oi{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:u,textLayer:d,viewport:h,l10n:f}){S(this,Mt);S(this,Rh);S(this,Om,!1);S(this,du,null);S(this,hu,null);S(this,gl,null);S(this,ls,new Map);S(this,pu,!1);S(this,Bm,!1);S(this,Vm,!1);S(this,Ki,null);S(this,yl,null);S(this,Zn,null);S(this,wl,null);S(this,fu,null);S(this,Um,-1);S(this,Pe);const g=[...c(Oi,mu).values()];if(!Oi._initialized){Oi._initialized=!0;for(const w of g)w.initialize(f,e)}e.registerEditorTypes(g),_(this,Pe,e),this.pageIndex=t,this.div=n,_(this,Rh,i),_(this,du,o),this.viewport=h,_(this,Zn,d),this.drawLayer=u,this._structTree=r,c(this,Pe).addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return c(this,ls).size===0}get isInvisible(){return this.isEmpty&&c(this,Pe).getMode()===Xe.NONE}updateToolbar(e){c(this,Pe).updateToolbar(e)}updateMode(e=c(this,Pe).getMode()){switch(I(this,Mt,s_).call(this),e){case Xe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Xe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Xe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of c(Oi,mu).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,Zn))==null?void 0:t.div)}setEditingState(e){c(this,Pe).setEditingState(e)}addCommands(e){c(this,Pe).addCommands(e)}cleanUndoStack(e){c(this,Pe).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,du))==null||t.togglePointerEvents(e)}async enable(){var n;_(this,Vm,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=c(this,fu))==null||n.abort(),_(this,fu,null);const e=new Set;for(const r of c(this,Mt,YC))r.enableEditing(),r.show(!0),r.annotationElementId&&(c(this,Pe).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=c(this,du);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),c(this,Pe).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}_(this,Vm,!1),c(this,Pe)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(_(this,Bm,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,Zn)&&!c(this,fu)){_(this,fu,new AbortController);const i=c(this,Pe).combinedSignal(c(this,fu));c(this,Zn).div.addEventListener("pointerdown",o=>{const{clientX:d,clientY:h,timeStamp:f}=o,g=c(this,Um);if(f-g>500){_(this,Um,f);return}_(this,Um,-1);const{classList:w}=this.div;w.toggle("getElements",!0);const A=document.elementsFromPoint(d,h);if(w.toggle("getElements",!1),!this.div.contains(A[0]))return;let F;const C=new RegExp(`^${iy}[0-9]+$`);for(const P of A)if(C.test(P.id)){F=P.id;break}if(!F)return;const T=c(this,ls).get(F);(T==null?void 0:T.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),T.dblclick(o))},{signal:i,capture:!0})}const e=c(this,du),t=[];if(e){const i=new Map,o=new Map;for(const d of c(this,Mt,YC)){if(d.disableEditing(),!d.annotationElementId){t.push(d);continue}if(d.serialize()!==null){i.set(d.annotationElementId,d);continue}else o.set(d.annotationElementId,d);(r=this.getEditableAnnotation(d.annotationElementId))==null||r.show(),d.remove()}const u=e.getEditableAnnotations();for(const d of u){const{id:h}=d.data;if(c(this,Pe).isDeletedAnnotationElement(h)){d.updateEdited({deleted:!0});continue}let f=o.get(h);if(f){f.resetAnnotationElement(d),f.show(!1),d.show();continue}f=i.get(h),f&&(c(this,Pe).addChangedExistingAnnotation(f),f.renderAnnotationElement(d)&&f.show(!1)),d.show()}}I(this,Mt,s_).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of c(Oi,mu).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),_(this,Bm,!1)}getEditableAnnotation(e){var t;return((t=c(this,du))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,Pe).getActive()!==e&&c(this,Pe).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,Zn))!=null&&e.div&&!c(this,wl)){_(this,wl,new AbortController);const t=c(this,Pe).combinedSignal(c(this,wl));c(this,Zn).div.addEventListener("pointerdown",I(this,Mt,sO).bind(this),{signal:t}),c(this,Zn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,Zn))!=null&&e.div&&c(this,wl)&&(c(this,wl).abort(),_(this,wl,null),c(this,Zn).div.classList.remove("highlighting"))}enableClick(){if(c(this,hu))return;_(this,hu,new AbortController);const e=c(this,Pe).combinedSignal(c(this,hu));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,hu))==null||e.abort(),_(this,hu,null)}attach(e){c(this,ls).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,Pe).isDeletedAnnotationElement(t)&&c(this,Pe).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,ls).delete(e.id),(t=c(this,Rh))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,Bm)&&e.annotationElementId&&c(this,Pe).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,Pe).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,Pe).addDeletedAnnotationElement(e),Ut.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,Pe).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,Vm)),c(this,Pe).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,gl)&&(e._focusEventsAllowed=!1,_(this,gl,setTimeout(()=>{_(this,gl,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,Pe)._signal}),t.focus())},0))),e._structTreeParentId=(n=c(this,Rh))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of c(this,ls).values())if(t.uid===e)return t;return null}getNextId(){return c(this,Pe).getId()}combinedSignal(e){return c(this,Pe).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,Mt,Sa))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c(this,Pe).updateMode(e.mode);const{offsetX:n,offsetY:r}=I(this,Mt,ZC).call(this),i=this.getNextId(),o=I(this,Mt,JC).call(this,{parent:this,id:i,x:n,y:r,uiManager:c(this,Pe),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=c(Oi,mu).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,Pe)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),i=I(this,Mt,JC).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,Pe),isCentered:t,...n});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(I(this,Mt,ZC).call(this),!0,e)}setSelected(e){c(this,Pe).setSelected(e)}toggleSelected(e){c(this,Pe).toggleSelected(e)}unselect(e){c(this,Pe).unselect(e)}pointerup(e){var r;const{isMac:t}=$n.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!c(this,pu)||(_(this,pu,!1),(r=c(this,Mt,Sa))!=null&&r.isDrawer&&c(this,Mt,Sa).supportMultipleDrawings))return;if(!c(this,Om)){_(this,Om,!0);return}const n=c(this,Pe).getMode();if(n===Xe.STAMP||n===Xe.SIGNATURE){c(this,Pe).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(c(this,Pe).getMode()===Xe.HIGHLIGHT&&this.enableTextSelection(),c(this,pu)){_(this,pu,!1);return}const{isMac:t}=$n.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(_(this,pu,!0),(r=c(this,Mt,Sa))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=c(this,Pe).getActive();_(this,Om,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(this,Ki)){c(this,Mt,Sa).startDrawing(this,c(this,Pe),!1,e);return}c(this,Pe).setCurrentDrawingSession(this),_(this,Ki,new AbortController);const t=c(this,Pe).combinedSignal(c(this,Ki));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(_(this,yl,null),this.commitOrRemove())},{signal:t}),c(this,Mt,Sa).startDrawing(this,c(this,Pe),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&_(this,yl,t);return}c(this,yl)&&setTimeout(()=>{var t;(t=c(this,yl))==null||t.focus(),_(this,yl,null)},0)}endDrawingSession(e=!1){return c(this,Ki)?(c(this,Pe).setCurrentDrawingSession(null),c(this,Ki).abort(),_(this,Ki,null),_(this,yl,null),c(this,Mt,Sa).endDrawing(e)):null}findNewParent(e,t,n){const r=c(this,Pe).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return c(this,Ki)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Ki)&&c(this,Mt,Sa).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,Pe).getActive())==null?void 0:e.parent)===this&&(c(this,Pe).commitOrRemove(),c(this,Pe).setActiveEditor(null)),c(this,gl)&&(clearTimeout(c(this,gl)),_(this,gl,null));for(const n of c(this,ls).values())(t=c(this,Rh))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,ls).clear(),c(this,Pe).removeLayer(this)}render({viewport:e}){this.viewport=e,Hh(this.div,e);for(const t of c(this,Pe).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,Pe).commitOrRemove(),I(this,Mt,s_).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Hh(this.div,{rotation:n}),t!==n)for(const r of c(this,ls).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,Pe).viewParameters.realScale}};Rh=new WeakMap,Om=new WeakMap,du=new WeakMap,hu=new WeakMap,gl=new WeakMap,ls=new WeakMap,pu=new WeakMap,Bm=new WeakMap,Vm=new WeakMap,Ki=new WeakMap,yl=new WeakMap,Zn=new WeakMap,wl=new WeakMap,fu=new WeakMap,Um=new WeakMap,Pe=new WeakMap,mu=new WeakMap,Mt=new WeakSet,YC=function(){return c(this,ls).size!==0?c(this,ls).values():c(this,Pe).getEditors(this.pageIndex)},sO=function(e){c(this,Pe).unselectAll();const{target:t}=e;if(t===c(this,Zn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,Zn).div.contains(t)){const{isMac:n}=$n.platform;if(e.button!==0||e.ctrlKey&&n)return;c(this,Pe).showAllEditors("highlight",!0,!0),c(this,Zn).div.classList.add("free"),this.toggleDrawing(),O_.startHighlighting(this,c(this,Pe).direction==="ltr",{target:c(this,Zn).div,x:e.x,y:e.y}),c(this,Zn).div.addEventListener("pointerup",()=>{c(this,Zn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,Pe)._signal}),e.preventDefault()}},Sa=function(){return c(Oi,mu).get(c(this,Pe).getMode())},JC=function(e){const t=c(this,Mt,Sa);return t?new t.prototype.constructor(e):null},ZC=function(){const{x:e,y:t,width:n,height:r}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),u=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+r),h=(i+u)/2-e,f=(o+d)/2-t,[g,w]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:w}},s_=function(){for(const e of c(this,ls).values())e.isEmpty()&&e.remove()},ne(Oi,"_initialized",!1),S(Oi,mu,new Map([PC,jC,KC,O_,qC].map(e=>[e._editorType,e])));let XC=Oi;var Qi,$r,Dh,s0,r1,iO,uo,tF,aO,nF;const Bn=class Bn{constructor(){S(this,uo);S(this,Qi,null);S(this,$r,new Map);S(this,Dh,new Map)}setParent(e){if(!c(this,Qi)){_(this,Qi,e);return}if(c(this,Qi)!==e){if(c(this,$r).size>0)for(const t of c(this,$r).values())t.remove(),e.append(t);_(this,Qi,e)}}static get _svgFactory(){return Ge(this,"_svgFactory",new M_)}draw(e,t=!1,n=!1){const r=Ln(Bn,s0)._++,i=I(this,uo,tF).call(this),o=Bn._svgFactory.createElement("defs");i.append(o);const u=Bn._svgFactory.createElement("path");o.append(u);const d=`path_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,Dh).set(r,u);const h=n?I(this,uo,aO).call(this,o,d):null,f=Bn._svgFactory.createElement("use");return i.append(f),f.setAttribute("href",`#${d}`),this.updateProperties(i,e),c(this,$r).set(r,i),{id:r,clipPathId:`url(#${h})`}}drawOutline(e,t){const n=Ln(Bn,s0)._++,r=I(this,uo,tF).call(this),i=Bn._svgFactory.createElement("defs");r.append(i);const o=Bn._svgFactory.createElement("path");i.append(o);const u=`path_${n}`;o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const g=Bn._svgFactory.createElement("mask");i.append(g),d=`mask_${n}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const w=Bn._svgFactory.createElement("rect");g.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const A=Bn._svgFactory.createElement("use");g.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const h=Bn._svgFactory.createElement("use");r.append(h),h.setAttribute("href",`#${u}`),d&&h.setAttribute("mask",`url(#${d})`);const f=h.cloneNode();return r.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(r,e),c(this,$r).set(n,r),n}finalizeDraw(e,t){c(this,Dh).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:n,bbox:r,rootClass:i,path:o}=t,u=typeof e=="number"?c(this,$r).get(e):e;if(u){if(n&&I(this,uo,nF).call(this,u,n),r&&I(d=Bn,r1,iO).call(d,u,r),i){const{classList:h}=u;for(const[f,g]of Object.entries(i))h.toggle(f,g)}if(o){const f=u.firstElementChild.firstElementChild;I(this,uo,nF).call(this,f,o)}}}updateParent(e,t){if(t===this)return;const n=c(this,$r).get(e);n&&(c(t,Qi).append(n),c(this,$r).delete(e),c(t,$r).set(e,n))}remove(e){c(this,Dh).delete(e),c(this,Qi)!==null&&(c(this,$r).get(e).remove(),c(this,$r).delete(e))}destroy(){_(this,Qi,null);for(const e of c(this,$r).values())e.remove();c(this,$r).clear(),c(this,Dh).clear()}};Qi=new WeakMap,$r=new WeakMap,Dh=new WeakMap,s0=new WeakMap,r1=new WeakSet,iO=function(e,[t,n,r,i]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},uo=new WeakSet,tF=function(){const e=Bn._svgFactory.create(1,1,!0);return c(this,Qi).append(e),e.setAttribute("aria-hidden",!0),e},aO=function(e,t){const n=Bn._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=Bn._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},nF=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},S(Bn,r1),S(Bn,s0,0);let eF=Bn;globalThis._pdfjsTestingUtils={HighlightOutliner:DC};globalThis.pdfjsLib={AbortException:Ru,AnnotationEditorLayer:XC,AnnotationEditorParamsType:lt,AnnotationEditorType:Xe,AnnotationEditorUIManager:Wh,AnnotationLayer:kC,AnnotationMode:_c,AnnotationType:Sn,applyOpacity:SW,build:NG,ColorPicker:D_,createValidAbsoluteUrl:BN,CSSConstants:FW,DOMSVGFactory:M_,DrawLayer:eF,FeatureTest:$n,fetchData:b0,findContrastColor:TW,getDocument:rL,getFilenameFromUrl:AW,getPdfFilenameFromUrl:_W,getRGB:F0,getUuid:UN,getXfaPageViewport:EW,GlobalWorkerOptions:Ya,ImageKind:bA,InvalidPDFException:kb,isDataScheme:V1,isPdfFile:AS,isValidExplicitDest:VW,MathClamp:dr,noContextMenu:Ci,normalizeUnicode:wW,OPS:ay,OutputScale:lo,PagesMapper:ly,PasswordResponses:lW,PDFDataRangeTransport:sL,PDFDateString:S_,PDFWorker:uy,PermissionFlag:oW,PixelsPerInch:Du,RenderingCancelledException:vS,renderRichText:$N,ResponseException:F_,setLayerDimensions:Hh,shadow:Ge,SignatureExtractor:vl,stopEvent:hn,SupportedImageMimeTypes:Pb,TextLayer:cy,TouchManager:k_,updateUrlHash:VN,Util:xe,VerbosityLevel:M1,version:DG,XfaLayer:jN};Ya.workerSrc="/studentmate-admin-panel/pdf.worker.min.mjs";const sq=async s=>{const e=await s.arrayBuffer(),n=await rL({data:e}).promise,r=[];for(let i=1;i<=n.numPages;i++){const o=await n.getPage(i),u=o.getViewport({scale:2}),d=await o.getTextContent(),h=[];if(d.items.forEach(A=>{const C=A.str.trim().match(/^(?:Question|Q)\s*(\d+)/i);if(C){const T=A.transform[5],P=u.height-T*u.scale;h.push({number:parseInt(C[1]),y:P})}}),h.sort((A,F)=>A.y-F.y),h.length===0)continue;const f=document.createElement("canvas"),g=f.getContext("2d");if(f.height=u.height,f.width=u.width,!g)continue;const w={canvasContext:g,viewport:u};await o.render(w).promise;for(let A=0;A<h.length;A++){const F=h[A],C=Math.max(0,F.y-50);let T=u.height;A<h.length-1&&(T=h[A+1].y-20);const P=T-C;if(P<=0)continue;const O=document.createElement("canvas");O.width=u.width,O.height=P;const N=O.getContext("2d");if(N){N.drawImage(f,0,C,u.width,P,0,0,u.width,P);const V=await new Promise(z=>O.toBlob(z,"image/jpeg",.85));V&&(r.push({number:F.number,text:`(Image Extracted from Page ${i})`,marks:0,imageBlob:V,page:i,coordinates:{yStart:C/2,yEnd:T/2}}),F.number)}}}return r},iq=({assessmentId:s,assessmentTitle:e,onClose:t})=>{const[n,r]=K.useState([]),[i,o]=K.useState(!1),[u,d]=K.useState(!1),[h,f]=K.useState(!1),[g,w]=K.useState(!1),[A,F]=K.useState(!1),[C,T]=K.useState(""),[P,O]=K.useState(0),[N,V]=K.useState(1),[z,W]=K.useState(null),[D,R]=K.useState(null),[L,U]=K.useState(""),[$,G]=K.useState(null),[j,ye]=K.useState([]),[ce,de]=K.useState(!1),[me,ie]=K.useState(null),[ve,fe]=K.useState("");K.useEffect(()=>{X()},[s]);const X=async()=>{o(!0);try{const he=await sH(s);r(he),he.length>0&&V(he.length+1)}catch(he){console.error("Error fetching questions:",he)}finally{o(!1)}},re=()=>{T(`Question ${n.length+1}`),O(0),W(null),R(null),U(""),V(n.length+1),d(!0)},_e=async he=>{if(he.preventDefault(),!!z){F(!0);try{await HP(s,C,P,N,z,void 0,D,void 0,L),d(!1),X()}catch(Ke){console.error("Error adding question:",Ke)}finally{F(!1)}}},De=async he=>{if(he.target.files&&he.target.files[0]){G(he.target.files[0]),de(!0);try{const Ke=await sq(he.target.files[0]);ye(Ke)}catch(Ke){console.error("Error parsing PDF:",Ke),alert("Failed to parse PDF. Please ensure it is a valid PDF.")}finally{de(!1)}}},ke=async()=>{if(j.length!==0){F(!0);try{let he=n.length>0?n.length+1:1;for(const Ke of j){let zn;Ke.imageBlob&&(zn=new File([Ke.imageBlob],`question_${Ke.number}.jpg`,{type:"image/jpeg"})),await HP(s,`Question ${Ke.number}`,Ke.marks,he++,zn,Ke.text,void 0,void 0,void 0,Ke.page,Ke.coordinates)}f(!1),ye([]),G(null),X()}catch(he){console.error("Error saving bulk questions:",he),alert("Error saving questions. See console for details.")}finally{F(!1)}}},Me=he=>{const Ke=[...j];Ke.splice(he,1),ye(Ke)},Ne=(he,Ke,zn)=>{const Nr=[...j];Nr[he]={...Nr[he],[Ke]:zn},ye(Nr)},et=async he=>{if(window.confirm("Are you sure you want to delete this question?"))try{await iH(s,he),X()}catch(Ke){console.error("Error deleting question:",Ke)}},dt=async he=>{if(he.preventDefault(),!(!me&&!ve)){F(!0);try{await rH(s,me,ve||void 0),alert("Resources updated successfully!"),w(!1),ie(null),fe("")}catch(Ke){console.error("Error updating resources:",Ke),alert("Failed to update resources.")}finally{F(!1)}}};return E.jsxs("div",{"trae-inspector-start-line":"194","trae-inspector-start-column":"4","trae-inspector-end-line":"588","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[E.jsxs("div",{"trae-inspector-start-line":"195","trae-inspector-start-column":"6","trae-inspector-end-line":"324","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[E.jsx("div",{"trae-inspector-start-line":"196","trae-inspector-start-column":"8","trae-inspector-end-line":"196","trae-inspector-end-column":"127","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t}),E.jsx("span",{"trae-inspector-start-line":"198","trae-inspector-start-column":"8","trae-inspector-end-line":"198","trae-inspector-end-column":"110","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%22198%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%22198%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),E.jsx("div",{"trae-inspector-start-line":"200","trae-inspector-start-column":"8","trae-inspector-end-line":"323","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",children:E.jsxs("div",{"trae-inspector-start-line":"201","trae-inspector-start-column":"10","trae-inspector-end-line":"322","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[E.jsxs("div",{"trae-inspector-start-line":"202","trae-inspector-start-column":"12","trae-inspector-end-line":"240","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[E.jsxs("div",{"trae-inspector-start-line":"203","trae-inspector-start-column":"14","trae-inspector-end-line":"210","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsxs("h3",{"trae-inspector-start-line":"204","trae-inspector-start-column":"16","trae-inspector-end-line":"206","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["Manage Questions: ",e]}),E.jsx("p",{"trae-inspector-start-line":"207","trae-inspector-start-column":"16","trae-inspector-end-line":"209","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20questions%20via%20image%20upload%20or%20auto-parse%20from%20PDF.%22%2C%22textStartLine%22%3A%22207%22%2C%22textStartColumn%22%3A%2258%22%2C%22textEndLine%22%3A%22209%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 text-sm text-gray-500",children:"Add questions via image upload or auto-parse from PDF."})]}),E.jsxs("div",{"trae-inspector-start-line":"211","trae-inspector-start-column":"14","trae-inspector-end-line":"239","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-3",children:[E.jsxs("button",{"trae-inspector-start-line":"212","trae-inspector-start-column":"16","trae-inspector-end-line":"218","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>w(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[E.jsx(LB,{className:"h-5 w-5"}),E.jsx("span",{"trae-inspector-start-line":"217","trae-inspector-start-column":"18","trae-inspector-end-line":"217","trae-inspector-end-column":"40","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Resources%22%2C%22textStartLine%22%3A%22217%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22217%22%2C%22textEndColumn%22%3A%2233%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Resources"})]}),E.jsxs("button",{"trae-inspector-start-line":"219","trae-inspector-start-column":"16","trae-inspector-end-line":"225","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>f(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[E.jsx(jm,{className:"h-5 w-5"}),E.jsx("span",{"trae-inspector-start-line":"224","trae-inspector-start-column":"18","trae-inspector-end-line":"224","trae-inspector-end-column":"46","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20PDF%22%2C%22textStartLine%22%3A%22224%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22224%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Bulk Upload PDF"})]}),E.jsxs("button",{"trae-inspector-start-line":"226","trae-inspector-start-column":"16","trae-inspector-end-line":"232","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:re,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[E.jsx(o0,{className:"h-5 w-5"}),E.jsx("span",{"trae-inspector-start-line":"231","trae-inspector-start-column":"18","trae-inspector-end-line":"231","trae-inspector-end-column":"41","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20Manual%22%2C%22textStartLine%22%3A%22231%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22231%22%2C%22textEndColumn%22%3A%2234%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add Manual"})]}),E.jsx("button",{"trae-inspector-start-line":"233","trae-inspector-start-column":"16","trae-inspector-end-line":"238","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Close%22%2C%22textStartLine%22%3A%22236%22%2C%22textStartColumn%22%3A%2217%22%2C%22textEndLine%22%3A%22238%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:t,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg",children:"Close"})]})]}),E.jsx("div",{"trae-inspector-start-line":"242","trae-inspector-start-column":"12","trae-inspector-end-line":"321","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 rounded-lg min-h-[400px] p-4 max-h-[70vh] overflow-y-auto",children:i?E.jsx("div",{"trae-inspector-start-line":"244","trae-inspector-start-column":"16","trae-inspector-end-line":"244","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading%20questions...%22%2C%22textStartLine%22%3A%22244%22%2C%22textStartColumn%22%3A%2251%22%2C%22textEndLine%22%3A%22244%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-10",children:"Loading questions..."}):n.length===0?E.jsx("div",{"trae-inspector-start-line":"246","trae-inspector-start-column":"16","trae-inspector-end-line":"248","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20questions%20added%20yet.%20Click%20%5C%22Add%20Manual%5C%22%20or%20%5C%22Bulk%20Upload%20PDF%5C%22%20to%20start.%22%2C%22textStartLine%22%3A%22246%22%2C%22textStartColumn%22%3A%2265%22%2C%22textEndLine%22%3A%22248%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-10 text-gray-500",children:'No questions added yet. Click "Add Manual" or "Bulk Upload PDF" to start.'}):E.jsx("div",{"trae-inspector-start-line":"250","trae-inspector-start-column":"16","trae-inspector-end-line":"319","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:n.map(he=>E.jsxs("div",{"trae-inspector-start-line":"252","trae-inspector-start-column":"20","trae-inspector-end-line":"317","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[E.jsxs("div",{"trae-inspector-start-line":"254","trae-inspector-start-column":"22","trae-inspector-end-line":"270","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center p-4 border-b border-gray-100 bg-gray-50",children:[E.jsxs("div",{"trae-inspector-start-line":"255","trae-inspector-start-column":"24","trae-inspector-end-line":"258","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-3",children:[E.jsx("div",{"trae-inspector-start-line":"256","trae-inspector-start-column":"26","trae-inspector-end-line":"256","trae-inspector-end-column":"82","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-1 h-6 bg-blue-600 rounded-full"}),E.jsx("h4",{"trae-inspector-start-line":"257","trae-inspector-start-column":"26","trae-inspector-end-line":"257","trae-inspector-end-column":"80","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-bold text-blue-900",children:he.title})]}),E.jsxs("div",{"trae-inspector-start-line":"259","trae-inspector-start-column":"24","trae-inspector-end-line":"269","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4",children:[E.jsxs("span",{"trae-inspector-start-line":"260","trae-inspector-start-column":"26","trae-inspector-end-line":"262","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-xs font-bold",children:[he.marks," Marks"]}),E.jsx("button",{"trae-inspector-start-line":"263","trae-inspector-start-column":"26","trae-inspector-end-line":"268","trae-inspector-end-column":"35","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>et(he),className:"text-red-500 hover:text-red-700",children:E.jsx(l0,{className:"h-5 w-5"})})]})]}),E.jsxs("div",{"trae-inspector-start-line":"273","trae-inspector-start-column":"22","trae-inspector-end-line":"316","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4",children:[E.jsxs("div",{"trae-inspector-start-line":"274","trae-inspector-start-column":"24","trae-inspector-end-line":"285","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mb-4",children:[E.jsx("p",{"trae-inspector-start-line":"275","trae-inspector-start-column":"26","trae-inspector-end-line":"275","trae-inspector-end-column":"112","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20Content%22%2C%22textStartLine%22%3A%22275%22%2C%22textStartColumn%22%3A%2292%22%2C%22textEndLine%22%3A%22275%22%2C%22textEndColumn%22%3A%22108%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Question Content"}),E.jsx("div",{"trae-inspector-start-line":"276","trae-inspector-start-column":"26","trae-inspector-end-line":"284","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border border-gray-100 rounded bg-gray-50 p-2",children:he.contentUrl?E.jsx("img",{"trae-inspector-start-line":"278","trae-inspector-start-column":"30","trae-inspector-end-line":"278","trae-inspector-end-column":"124","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:he.contentUrl,alt:he.title,className:"max-w-full h-auto max-h-64 object-contain"}):he.content?E.jsx("div",{"trae-inspector-start-line":"280","trae-inspector-start-column":"30","trae-inspector-end-line":"280","trae-inspector-end-column":"109","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"whitespace-pre-wrap text-gray-800 font-serif",children:he.content}):E.jsx("span",{"trae-inspector-start-line":"282","trae-inspector-start-column":"30","trae-inspector-end-line":"282","trae-inspector-end-column":"96","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20content%20available%22%2C%22textStartLine%22%3A%22282%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22282%22%2C%22textEndColumn%22%3A%2289%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-400 italic",children:"No content available"})})]}),E.jsxs("div",{"trae-inspector-start-line":"287","trae-inspector-start-column":"24","trae-inspector-end-line":"315","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{"trae-inspector-start-line":"288","trae-inspector-start-column":"26","trae-inspector-end-line":"301","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("p",{"trae-inspector-start-line":"289","trae-inspector-start-column":"28","trae-inspector-end-line":"289","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%22%2C%22textStartLine%22%3A%22289%22%2C%22textStartColumn%22%3A%2294%22%2C%22textEndLine%22%3A%22289%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Answer"}),he.answerUrl?E.jsxs("div",{"trae-inspector-start-line":"291","trae-inspector-start-column":"30","trae-inspector-end-line":"295","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2 text-green-600",children:[E.jsx(yB,{className:"h-4 w-4"}),E.jsx("span",{"trae-inspector-start-line":"293","trae-inspector-start-column":"32","trae-inspector-end-line":"293","trae-inspector-end-column":"86","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%20Image%20Uploaded%22%2C%22textStartLine%22%3A%22293%22%2C%22textStartColumn%22%3A%2258%22%2C%22textEndLine%22%3A%22293%22%2C%22textEndColumn%22%3A%2279%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm",children:"Answer Image Uploaded"}),E.jsx("a",{"trae-inspector-start-line":"294","trae-inspector-start-column":"32","trae-inspector-end-line":"294","trae-inspector-end-column":"147","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22(View)%22%2C%22textStartLine%22%3A%22294%22%2C%22textStartColumn%22%3A%22137%22%2C%22textEndLine%22%3A%22294%22%2C%22textEndColumn%22%3A%22143%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:he.answerUrl,target:"_blank",rel:"noreferrer",className:"text-blue-500 text-xs hover:underline",children:"(View)"})]}):he.answerText?E.jsx("div",{"trae-inspector-start-line":"297","trae-inspector-start-column":"32","trae-inspector-end-line":"297","trae-inspector-end-column":"91","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-700",children:he.answerText}):E.jsx("span",{"trae-inspector-start-line":"299","trae-inspector-start-column":"30","trae-inspector-end-line":"299","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20answer%20provided%22%2C%22textStartLine%22%3A%22299%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22299%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-400",children:"No answer provided"})]}),E.jsxs("div",{"trae-inspector-start-line":"302","trae-inspector-start-column":"26","trae-inspector-end-line":"314","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("p",{"trae-inspector-start-line":"303","trae-inspector-start-column":"28","trae-inspector-end-line":"303","trae-inspector-end-column":"112","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Video%20Solution%22%2C%22textStartLine%22%3A%22303%22%2C%22textStartColumn%22%3A%2294%22%2C%22textEndLine%22%3A%22303%22%2C%22textEndColumn%22%3A%22108%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Video Solution"}),he.videoUrl?E.jsxs("div",{"trae-inspector-start-line":"305","trae-inspector-start-column":"30","trae-inspector-end-line":"310","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2 text-blue-600",children:[E.jsx(r6,{className:"h-4 w-4"}),E.jsx("a",{"trae-inspector-start-line":"307","trae-inspector-start-column":"32","trae-inspector-end-line":"309","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:he.videoUrl,target:"_blank",rel:"noreferrer",className:"text-sm hover:underline truncate block max-w-[200px]",children:he.videoUrl})]}):E.jsx("span",{"trae-inspector-start-line":"312","trae-inspector-start-column":"30","trae-inspector-end-line":"312","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20video%20link%22%2C%22textStartLine%22%3A%22312%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22312%22%2C%22textEndColumn%22%3A%2283%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-400",children:"No video link"})]})]})]})]},he.questionId))})})]})})]}),E.jsx(Xm,{isOpen:g,onClose:()=>w(!1),title:"Assessment Resources",children:E.jsxs("form",{"trae-inspector-start-line":"332","trae-inspector-start-column":"8","trae-inspector-end-line":"376","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:dt,className:"space-y-4",children:[E.jsxs("div",{"trae-inspector-start-line":"333","trae-inspector-start-column":"10","trae-inspector-end-line":"349","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"334","trae-inspector-start-column":"12","trae-inspector-end-line":"334","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Memorandum%20PDF%20(Optional)%22%2C%22textStartLine%22%3A%22334%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22334%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Memorandum PDF (Optional)"}),E.jsx("div",{"trae-inspector-start-line":"335","trae-inspector-start-column":"12","trae-inspector-end-line":"348","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:E.jsxs("div",{"trae-inspector-start-line":"336","trae-inspector-start-column":"14","trae-inspector-end-line":"347","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-1 text-center",children:[E.jsx(jm,{className:"mx-auto h-12 w-12 text-gray-400"}),E.jsxs("div",{"trae-inspector-start-line":"338","trae-inspector-start-column":"16","trae-inspector-end-line":"344","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex text-sm text-gray-600",children:[E.jsxs("label",{"trae-inspector-start-line":"339","trae-inspector-start-column":"18","trae-inspector-end-line":"342","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"memo-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[E.jsx("span",{"trae-inspector-start-line":"340","trae-inspector-start-column":"20","trae-inspector-end-line":"340","trae-inspector-end-column":"46","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20a%20file%22%2C%22textStartLine%22%3A%22340%22%2C%22textStartColumn%22%3A%2226%22%2C%22textEndLine%22%3A%22340%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Upload a file"}),E.jsx("input",{"trae-inspector-start-line":"341","trae-inspector-start-column":"20","trae-inspector-end-line":"341","trae-inspector-end-column":"184","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"memo-upload",name:"memo-upload",type:"file",className:"sr-only",accept:".pdf",onChange:he=>ie(he.target.files?he.target.files[0]:null)})]}),E.jsx("p",{"trae-inspector-start-line":"343","trae-inspector-start-column":"18","trae-inspector-end-line":"343","trae-inspector-end-column":"58","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22or%20drag%20and%20drop%22%2C%22textStartLine%22%3A%22343%22%2C%22textStartColumn%22%3A%2238%22%2C%22textEndLine%22%3A%22343%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"pl-1",children:"or drag and drop"})]}),E.jsx("p",{"trae-inspector-start-line":"345","trae-inspector-start-column":"16","trae-inspector-end-line":"345","trae-inspector-end-column":"71","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PDF%20up%20to%2010MB%22%2C%22textStartLine%22%3A%22345%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22345%22%2C%22textEndColumn%22%3A%2267%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"PDF up to 10MB"}),me&&E.jsx("p",{"trae-inspector-start-line":"346","trae-inspector-start-column":"29","trae-inspector-end-line":"346","trae-inspector-end-column":"100","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-green-600 font-semibold",children:me.name})]})})]}),E.jsxs("div",{"trae-inspector-start-line":"351","trae-inspector-start-column":"10","trae-inspector-end-line":"365","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"352","trae-inspector-start-column":"12","trae-inspector-end-line":"352","trae-inspector-end-column":"113","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Full%20Video%20Solution%20URL%20(Optional)%22%2C%22textStartLine%22%3A%22352%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22352%22%2C%22textEndColumn%22%3A%22105%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Full Video Solution URL (Optional)"}),E.jsxs("div",{"trae-inspector-start-line":"353","trae-inspector-start-column":"12","trae-inspector-end-line":"364","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 flex rounded-md shadow-sm",children:[E.jsx("span",{"trae-inspector-start-line":"354","trae-inspector-start-column":"14","trae-inspector-end-line":"356","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22https%3A%2F%2F%22%2C%22textStartLine%22%3A%22354%22%2C%22textStartColumn%22%3A%22142%22%2C%22textEndLine%22%3A%22356%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"https://"}),E.jsx("input",{"trae-inspector-start-line":"357","trae-inspector-start-column":"14","trae-inspector-end-line":"363","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"url",value:ve,onChange:he=>fe(he.target.value),className:"focus:ring-blue-500 focus:border-blue-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300 py-2 px-3 border",placeholder:"youtube.com/playlist?list=..."})]})]}),E.jsx("div",{"trae-inspector-start-line":"367","trae-inspector-start-column":"10","trae-inspector-end-line":"375","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:E.jsx("button",{"trae-inspector-start-line":"368","trae-inspector-start-column":"12","trae-inspector-end-line":"374","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:A,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-purple-600 text-base font-medium text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:text-sm ${A?"opacity-75 cursor-not-allowed":""}`,children:A?"Saving Resources...":"Save Resources"})})]})}),E.jsx(Xm,{isOpen:u,onClose:()=>d(!1),title:"Add New Question (Manual)",children:E.jsxs("form",{"trae-inspector-start-line":"385","trae-inspector-start-column":"8","trae-inspector-end-line":"476","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:_e,className:"space-y-4",children:[E.jsxs("div",{"trae-inspector-start-line":"386","trae-inspector-start-column":"10","trae-inspector-end-line":"409","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{"trae-inspector-start-line":"387","trae-inspector-start-column":"12","trae-inspector-end-line":"397","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"388","trae-inspector-start-column":"14","trae-inspector-end-line":"388","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20Title%22%2C%22textStartLine%22%3A%22388%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%22388%22%2C%22textEndColumn%22%3A%2287%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Question Title"}),E.jsx("input",{"trae-inspector-start-line":"389","trae-inspector-start-column":"14","trae-inspector-end-line":"396","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:C,onChange:he=>T(he.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Question 1"})]}),E.jsxs("div",{"trae-inspector-start-line":"398","trae-inspector-start-column":"12","trae-inspector-end-line":"408","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"399","trae-inspector-start-column":"14","trae-inspector-end-line":"399","trae-inspector-end-column":"86","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Marks%22%2C%22textStartLine%22%3A%22399%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%22399%22%2C%22textEndColumn%22%3A%2278%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Marks"}),E.jsx("input",{"trae-inspector-start-line":"400","trae-inspector-start-column":"14","trae-inspector-end-line":"407","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,min:"0",value:P,onChange:he=>O(parseInt(he.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),E.jsxs("div",{"trae-inspector-start-line":"411","trae-inspector-start-column":"10","trae-inspector-end-line":"421","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"412","trae-inspector-start-column":"12","trae-inspector-end-line":"412","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Order%22%2C%22textStartLine%22%3A%22412%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22412%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Order"}),E.jsx("input",{"trae-inspector-start-line":"413","trae-inspector-start-column":"12","trae-inspector-end-line":"420","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,min:"1",value:N,onChange:he=>V(parseInt(he.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),E.jsxs("div",{"trae-inspector-start-line":"423","trae-inspector-start-column":"10","trae-inspector-end-line":"439","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"424","trae-inspector-start-column":"12","trae-inspector-end-line":"424","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20Image%20(Required)%22%2C%22textStartLine%22%3A%22424%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22424%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Question Image (Required)"}),E.jsx("div",{"trae-inspector-start-line":"425","trae-inspector-start-column":"12","trae-inspector-end-line":"438","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:E.jsxs("div",{"trae-inspector-start-line":"426","trae-inspector-start-column":"14","trae-inspector-end-line":"437","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-1 text-center",children:[E.jsx(RB,{className:"mx-auto h-12 w-12 text-gray-400"}),E.jsxs("div",{"trae-inspector-start-line":"428","trae-inspector-start-column":"16","trae-inspector-end-line":"434","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex text-sm text-gray-600",children:[E.jsxs("label",{"trae-inspector-start-line":"429","trae-inspector-start-column":"18","trae-inspector-end-line":"432","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"content-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[E.jsx("span",{"trae-inspector-start-line":"430","trae-inspector-start-column":"20","trae-inspector-end-line":"430","trae-inspector-end-column":"46","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20a%20file%22%2C%22textStartLine%22%3A%22430%22%2C%22textStartColumn%22%3A%2226%22%2C%22textEndLine%22%3A%22430%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Upload a file"}),E.jsx("input",{"trae-inspector-start-line":"431","trae-inspector-start-column":"20","trae-inspector-end-line":"431","trae-inspector-end-column":"205","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"content-upload",name:"content-upload",type:"file",className:"sr-only",accept:"image/*",onChange:he=>W(he.target.files?he.target.files[0]:null),required:!0})]}),E.jsx("p",{"trae-inspector-start-line":"433","trae-inspector-start-column":"18","trae-inspector-end-line":"433","trae-inspector-end-column":"58","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22or%20drag%20and%20drop%22%2C%22textStartLine%22%3A%22433%22%2C%22textStartColumn%22%3A%2238%22%2C%22textEndLine%22%3A%22433%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"pl-1",children:"or drag and drop"})]}),E.jsx("p",{"trae-inspector-start-line":"435","trae-inspector-start-column":"16","trae-inspector-end-line":"435","trae-inspector-end-column":"75","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PNG%2C%20JPG%20up%20to%205MB%22%2C%22textStartLine%22%3A%22435%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22435%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"PNG, JPG up to 5MB"}),z&&E.jsx("p",{"trae-inspector-start-line":"436","trae-inspector-start-column":"32","trae-inspector-end-line":"436","trae-inspector-end-column":"106","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-green-600 font-semibold",children:z.name})]})})]}),E.jsxs("div",{"trae-inspector-start-line":"441","trae-inspector-start-column":"10","trae-inspector-end-line":"449","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"442","trae-inspector-start-column":"12","trae-inspector-end-line":"442","trae-inspector-end-column":"102","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%20Image%20(Optional)%22%2C%22textStartLine%22%3A%22442%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22442%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Answer Image (Optional)"}),E.jsx("input",{"trae-inspector-start-line":"443","trae-inspector-start-column":"12","trae-inspector-end-line":"448","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:"image/*",onChange:he=>R(he.target.files?he.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),E.jsxs("div",{"trae-inspector-start-line":"451","trae-inspector-start-column":"10","trae-inspector-end-line":"465","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"452","trae-inspector-start-column":"12","trae-inspector-end-line":"452","trae-inspector-end-column":"108","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Video%20Solution%20URL%20(Optional)%22%2C%22textStartLine%22%3A%22452%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22452%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Video Solution URL (Optional)"}),E.jsxs("div",{"trae-inspector-start-line":"453","trae-inspector-start-column":"12","trae-inspector-end-line":"464","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 flex rounded-md shadow-sm",children:[E.jsx("span",{"trae-inspector-start-line":"454","trae-inspector-start-column":"14","trae-inspector-end-line":"456","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22https%3A%2F%2F%22%2C%22textStartLine%22%3A%22454%22%2C%22textStartColumn%22%3A%22142%22%2C%22textEndLine%22%3A%22456%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"https://"}),E.jsx("input",{"trae-inspector-start-line":"457","trae-inspector-start-column":"14","trae-inspector-end-line":"463","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"url",value:L,onChange:he=>U(he.target.value),className:"focus:ring-blue-500 focus:border-blue-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300 py-2 px-3 border",placeholder:"youtube.com/watch?v=..."})]})]}),E.jsx("div",{"trae-inspector-start-line":"467","trae-inspector-start-column":"10","trae-inspector-end-line":"475","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:E.jsx("button",{"trae-inspector-start-line":"468","trae-inspector-start-column":"12","trae-inspector-end-line":"474","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:A,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${A?"opacity-75 cursor-not-allowed":""}`,children:A?"Saving Question...":"Save Question"})})]})}),h&&E.jsx("div",{"trae-inspector-start-line":"481","trae-inspector-start-column":"8","trae-inspector-end-line":"586","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-[60] overflow-y-auto",children:E.jsxs("div",{"trae-inspector-start-line":"482","trae-inspector-start-column":"10","trae-inspector-end-line":"585","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[E.jsx("div",{"trae-inspector-start-line":"483","trae-inspector-start-column":"12","trae-inspector-end-line":"485","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:E.jsx("div",{"trae-inspector-start-line":"484","trae-inspector-start-column":"14","trae-inspector-end-line":"484","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-0 bg-gray-500 opacity-75"})}),E.jsx("span",{"trae-inspector-start-line":"486","trae-inspector-start-column":"12","trae-inspector-end-line":"486","trae-inspector-end-column":"114","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%22486%22%2C%22textStartColumn%22%3A%22100%22%2C%22textEndLine%22%3A%22486%22%2C%22textEndColumn%22%3A%22107%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),E.jsx("div",{"trae-inspector-start-line":"487","trae-inspector-start-column":"12","trae-inspector-end-line":"584","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:E.jsxs("div",{"trae-inspector-start-line":"488","trae-inspector-start-column":"14","trae-inspector-end-line":"583","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[E.jsxs("div",{"trae-inspector-start-line":"489","trae-inspector-start-column":"16","trae-inspector-end-line":"494","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[E.jsx("h3",{"trae-inspector-start-line":"490","trae-inspector-start-column":"18","trae-inspector-end-line":"490","trae-inspector-end-column":"93","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20from%20PDF%22%2C%22textStartLine%22%3A%22490%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22490%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-medium text-gray-900",children:"Bulk Upload from PDF"}),E.jsx("button",{"trae-inspector-start-line":"491","trae-inspector-start-column":"18","trae-inspector-end-line":"493","trae-inspector-end-column":"27","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-500",children:E.jsx(eb,{className:"h-6 w-6"})})]}),E.jsxs("div",{"trae-inspector-start-line":"496","trae-inspector-start-column":"16","trae-inspector-end-line":"582","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[E.jsxs("div",{"trae-inspector-start-line":"498","trae-inspector-start-column":"18","trae-inspector-end-line":"513","trae-inspector-end-column":"24","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50 transition-colors",children:[E.jsx("input",{"trae-inspector-start-line":"499","trae-inspector-start-column":"20","trae-inspector-end-line":"505","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:".pdf",onChange:De,className:"hidden",id:"bulk-upload"}),E.jsxs("label",{"trae-inspector-start-line":"506","trae-inspector-start-column":"20","trae-inspector-end-line":"512","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"bulk-upload",className:"cursor-pointer block",children:[E.jsx(ZB,{className:"mx-auto h-12 w-12 text-gray-400"}),E.jsx("p",{"trae-inspector-start-line":"508","trae-inspector-start-column":"22","trae-inspector-end-line":"510","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 text-sm text-gray-600",children:$?$.name:"Click to upload Exam PDF"}),E.jsx("p",{"trae-inspector-start-line":"511","trae-inspector-start-column":"22","trae-inspector-end-line":"511","trae-inspector-end-column":"98","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PDFs%20with%20selectable%20text%20only%22%2C%22textStartLine%22%3A%22511%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22511%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mt-1",children:"PDFs with selectable text only"})]})]}),ce&&E.jsx("div",{"trae-inspector-start-line":"516","trae-inspector-start-column":"20","trae-inspector-end-line":"518","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Parsing%20PDF...%20Please%20wait.%22%2C%22textStartLine%22%3A%22516%22%2C%22textStartColumn%22%3A%2280%22%2C%22textEndLine%22%3A%22518%22%2C%22textEndColumn%22%3A%2220%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-4 text-blue-600 font-medium",children:"Parsing PDF... Please wait."}),j.length>0&&E.jsxs("div",{"trae-inspector-start-line":"523","trae-inspector-start-column":"20","trae-inspector-end-line":"580","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-6",children:[E.jsxs("div",{"trae-inspector-start-line":"524","trae-inspector-start-column":"22","trae-inspector-end-line":"534","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-4",children:[E.jsxs("h4",{"trae-inspector-start-line":"525","trae-inspector-start-column":"24","trae-inspector-end-line":"525","trae-inspector-end-column":"120","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium text-gray-900",children:["Extracted Questions (",j.length,")"]}),E.jsxs("button",{"trae-inspector-start-line":"526","trae-inspector-start-column":"24","trae-inspector-end-line":"533","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:ke,disabled:A,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm",children:[E.jsx(KB,{className:"h-4 w-4"}),E.jsx("span",{"trae-inspector-start-line":"532","trae-inspector-start-column":"26","trae-inspector-end-line":"532","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:A?"Saving...":"Save All to Database"})]})]}),E.jsx("div",{"trae-inspector-start-line":"536","trae-inspector-start-column":"22","trae-inspector-end-line":"579","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2",children:j.map((he,Ke)=>E.jsxs("div",{"trae-inspector-start-line":"538","trae-inspector-start-column":"26","trae-inspector-end-line":"577","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[E.jsxs("div",{"trae-inspector-start-line":"539","trae-inspector-start-column":"28","trae-inspector-end-line":"559","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-start mb-2",children:[E.jsxs("div",{"trae-inspector-start-line":"540","trae-inspector-start-column":"30","trae-inspector-end-line":"552","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[E.jsxs("span",{"trae-inspector-start-line":"541","trae-inspector-start-column":"32","trae-inspector-end-line":"543","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded",children:["#",he.number]}),E.jsx("input",{"trae-inspector-start-line":"544","trae-inspector-start-column":"32","trae-inspector-end-line":"550","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",value:he.marks,onChange:zn=>Ne(Ke,"marks",parseInt(zn.target.value)),className:"w-20 text-xs border-gray-300 rounded p-1",placeholder:"Marks"}),E.jsx("span",{"trae-inspector-start-line":"551","trae-inspector-start-column":"32","trae-inspector-end-line":"551","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22marks%22%2C%22textStartLine%22%3A%22551%22%2C%22textStartColumn%22%3A%2272%22%2C%22textEndLine%22%3A%22551%22%2C%22textEndColumn%22%3A%2277%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"marks"})]}),E.jsx("button",{"trae-inspector-start-line":"553","trae-inspector-start-column":"30","trae-inspector-end-line":"558","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>Me(Ke),className:"text-red-500 hover:text-red-700",children:E.jsx(eb,{className:"h-4 w-4"})})]}),he.imageBlob?E.jsx("div",{"trae-inspector-start-line":"563","trae-inspector-start-column":"30","trae-inspector-end-line":"569","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border border-gray-300 rounded p-2 bg-white flex justify-center",children:E.jsx("img",{"trae-inspector-start-line":"564","trae-inspector-start-column":"32","trae-inspector-end-line":"568","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:URL.createObjectURL(he.imageBlob),alt:`Question ${he.number}`,className:"max-w-full max-h-64 object-contain"})}):E.jsx("textarea",{"trae-inspector-start-line":"571","trae-inspector-start-column":"31","trae-inspector-end-line":"575","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:he.text,onChange:zn=>Ne(Ke,"text",zn.target.value),className:"w-full text-sm border-gray-300 rounded p-2 h-24 font-serif"})]},Ke))})]})]})]})})]})})]})},TS=({type:s,title:e})=>{const{user:t}=E0(),[n,r]=K.useState([]),[i,o]=K.useState(""),[u,d]=K.useState([]),[h,f]=K.useState(""),[g,w]=K.useState([]),[A,F]=K.useState(!1),[C,T]=K.useState(!1),[P,O]=K.useState(!1),[N,V]=K.useState(null),[z,W]=K.useState(""),[D,R]=K.useState(new Date().getFullYear()),[L,U]=K.useState(null);K.useEffect(()=>{(async()=>{try{const de=await l2();r(de),de.length>0&&o(de[0].universityId)}catch(de){console.error("Error fetching universities:",de)}})()},[]),K.useEffect(()=>{i&&(async()=>{try{const de=await ON(i);d(de),de.length>0?f(de[0].code):(f(""),w([]))}catch(de){console.error("Error fetching modules:",de)}})()},[i]),K.useEffect(()=>{i&&h&&$()},[i,h,s]);const $=async()=>{F(!0);try{const ce=await Jz(i,h,s);w(ce)}catch(ce){console.error("Error fetching assessments:",ce)}finally{F(!1)}},G=()=>{W(""),R(new Date().getFullYear()),U(null),T(!0)},j=async ce=>{if(ce.preventDefault(),!(!i||!h||!t)){O(!0);try{await tH(i,h,s,z,D,t.email||"Admin",L),T(!1),$()}catch(de){console.error("Error saving assessment:",de)}finally{O(!1)}}},ye=async ce=>{if(window.confirm("Are you sure you want to delete this assessment?"))try{await nH(ce),$()}catch(de){console.error("Error deleting assessment:",de)}};return E.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"4","trae-inspector-end-line":"304","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[N?E.jsx(iq,{assessmentId:N.assessmentId,assessmentTitle:N.title,onClose:()=>V(null)}):null,E.jsxs("div",{"trae-inspector-start-line":"138","trae-inspector-start-column":"6","trae-inspector-end-line":"148","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[E.jsx("h1",{"trae-inspector-start-line":"139","trae-inspector-start-column":"8","trae-inspector-end-line":"139","trae-inspector-end-column":"69","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:e}),E.jsxs("button",{"trae-inspector-start-line":"140","trae-inspector-start-column":"8","trae-inspector-end-line":"147","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:G,disabled:!i||!h,className:`bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 ${!i||!h?"opacity-50 cursor-not-allowed":""}`,children:[E.jsx(o0,{className:"h-5 w-5"}),E.jsxs("span",{"trae-inspector-start-line":"146","trae-inspector-start-column":"10","trae-inspector-end-line":"146","trae-inspector-end-column":"50","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:["Create ",e.slice(0,-1)]})]})]}),E.jsx("div",{"trae-inspector-start-line":"150","trae-inspector-start-column":"6","trae-inspector-end-line":"183","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:E.jsxs("div",{"trae-inspector-start-line":"151","trae-inspector-start-column":"8","trae-inspector-end-line":"182","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[E.jsxs("div",{"trae-inspector-start-line":"152","trae-inspector-start-column":"10","trae-inspector-end-line":"165","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[E.jsx("label",{"trae-inspector-start-line":"153","trae-inspector-start-column":"12","trae-inspector-end-line":"153","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20University%22%2C%22textStartLine%22%3A%22153%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22153%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select University"}),E.jsx("select",{"trae-inspector-start-line":"154","trae-inspector-start-column":"12","trae-inspector-end-line":"164","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:i,onChange:ce=>o(ce.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:n.map(ce=>E.jsxs("option",{"trae-inspector-start-line":"160","trae-inspector-start-column":"16","trae-inspector-end-line":"162","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:ce.universityId,children:[ce.name," (",ce.code,")"]},ce.universityId))})]}),E.jsxs("div",{"trae-inspector-start-line":"166","trae-inspector-start-column":"10","trae-inspector-end-line":"181","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[E.jsx("label",{"trae-inspector-start-line":"167","trae-inspector-start-column":"12","trae-inspector-end-line":"167","trae-inspector-end-column":"97","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20Module%22%2C%22textStartLine%22%3A%22167%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22167%22%2C%22textEndColumn%22%3A%2289%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Module"}),E.jsxs("select",{"trae-inspector-start-line":"168","trae-inspector-start-column":"12","trae-inspector-end-line":"180","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:h,onChange:ce=>f(ce.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",disabled:!i,children:[u.length===0&&E.jsx("option",{"trae-inspector-start-line":"174","trae-inspector-start-column":"39","trae-inspector-end-line":"174","trae-inspector-end-column":"81","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20modules%20found%22%2C%22textStartLine%22%3A%22174%22%2C%22textStartColumn%22%3A%2256%22%2C%22textEndLine%22%3A%22174%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"",children:"No modules found"}),u.map(ce=>E.jsxs("option",{"trae-inspector-start-line":"176","trae-inspector-start-column":"16","trae-inspector-end-line":"178","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:ce.code,children:[" ",ce.code," - ",ce.name]},ce.moduleId))]})]})]})}),E.jsx("div",{"trae-inspector-start-line":"185","trae-inspector-start-column":"6","trae-inspector-end-line":"254","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:E.jsx("div",{"trae-inspector-start-line":"186","trae-inspector-start-column":"8","trae-inspector-end-line":"253","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:E.jsxs("table",{"trae-inspector-start-line":"187","trae-inspector-start-column":"10","trae-inspector-end-line":"252","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[E.jsx("thead",{"trae-inspector-start-line":"188","trae-inspector-start-column":"12","trae-inspector-end-line":"195","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:E.jsxs("tr",{"trae-inspector-start-line":"189","trae-inspector-start-column":"14","trae-inspector-end-line":"194","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("th",{"trae-inspector-start-line":"190","trae-inspector-start-column":"16","trae-inspector-end-line":"190","trae-inspector-end-column":"51","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22190%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22190%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Year"}),E.jsx("th",{"trae-inspector-start-line":"191","trae-inspector-start-column":"16","trae-inspector-end-line":"191","trae-inspector-end-column":"52","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22191%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22191%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Title"}),E.jsx("th",{"trae-inspector-start-line":"192","trae-inspector-start-column":"16","trae-inspector-end-line":"192","trae-inspector-end-column":"54","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Content%22%2C%22textStartLine%22%3A%22192%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22192%22%2C%22textEndColumn%22%3A%2249%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Content"}),E.jsx("th",{"trae-inspector-start-line":"193","trae-inspector-start-column":"16","trae-inspector-end-line":"193","trae-inspector-end-column":"65","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22193%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22193%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),E.jsx("tbody",{"trae-inspector-start-line":"196","trae-inspector-start-column":"12","trae-inspector-end-line":"251","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:A?E.jsx("tr",{"trae-inspector-start-line":"198","trae-inspector-start-column":"16","trae-inspector-end-line":"200","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsx("td",{"trae-inspector-start-line":"199","trae-inspector-start-column":"18","trae-inspector-end-line":"199","trae-inspector-end-column":"97","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22199%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22199%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):g.length===0?E.jsx("tr",{"trae-inspector-start-line":"202","trae-inspector-start-column":"16","trae-inspector-end-line":"206","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsx("td",{"trae-inspector-start-line":"203","trae-inspector-start-column":"18","trae-inspector-end-line":"205","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:h?"No assessments found":"Please select a module"})}):g.map(ce=>E.jsxs("tr",{"trae-inspector-start-line":"209","trae-inspector-start-column":"18","trae-inspector-end-line":"248","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[E.jsx("td",{"trae-inspector-start-line":"210","trae-inspector-start-column":"20","trae-inspector-end-line":"210","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-900",children:ce.year}),E.jsx("td",{"trae-inspector-start-line":"211","trae-inspector-start-column":"20","trae-inspector-end-line":"216","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:E.jsxs("div",{"trae-inspector-start-line":"212","trae-inspector-start-column":"22","trae-inspector-end-line":"215","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[E.jsx(jm,{className:"h-4 w-4 text-blue-500"}),E.jsx("span",{"trae-inspector-start-line":"214","trae-inspector-start-column":"24","trae-inspector-end-line":"214","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-900",children:ce.title})]})}),E.jsx("td",{"trae-inspector-start-line":"217","trae-inspector-start-column":"20","trae-inspector-end-line":"238","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:E.jsxs("div",{"trae-inspector-start-line":"218","trae-inspector-start-column":"22","trae-inspector-end-line":"237","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-4",children:[ce.pdfUrl&&E.jsxs("a",{"trae-inspector-start-line":"220","trae-inspector-start-column":"26","trae-inspector-end-line":"228","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:ce.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-red-600 hover:text-red-900 text-xs",title:"Download PDF",children:[E.jsx(jm,{className:"h-4 w-4 mr-1"})," PDF"]}),E.jsxs("button",{"trae-inspector-start-line":"230","trae-inspector-start-column":"24","trae-inspector-end-line":"236","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>V(ce),className:"flex items-center text-blue-600 hover:text-blue-900 text-xs",title:"Manage Questions",children:[E.jsx(BB,{className:"h-4 w-4 mr-1"})," Questions"]})]})}),E.jsx("td",{"trae-inspector-start-line":"239","trae-inspector-start-column":"20","trae-inspector-end-line":"247","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:E.jsx("button",{"trae-inspector-start-line":"240","trae-inspector-start-column":"22","trae-inspector-end-line":"246","trae-inspector-end-column":"31","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>ye(ce),className:"text-red-600 hover:text-red-900",title:"Delete Assessment",children:E.jsx(l0,{className:"h-5 w-5"})})})]},ce.assessmentId))})]})})}),E.jsx(Xm,{isOpen:C,onClose:()=>T(!1),title:`Create ${e.slice(0,-1)}`,children:E.jsxs("form",{"trae-inspector-start-line":"261","trae-inspector-start-column":"8","trae-inspector-end-line":"302","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:j,className:"space-y-4",children:[E.jsxs("div",{"trae-inspector-start-line":"262","trae-inspector-start-column":"10","trae-inspector-end-line":"271","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"263","trae-inspector-start-column":"12","trae-inspector-end-line":"263","trae-inspector-end-column":"83","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22263%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22263%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Year"}),E.jsx("input",{"trae-inspector-start-line":"264","trae-inspector-start-column":"12","trae-inspector-end-line":"270","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,value:D,onChange:ce=>R(parseInt(ce.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),E.jsxs("div",{"trae-inspector-start-line":"272","trae-inspector-start-column":"10","trae-inspector-end-line":"282","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"273","trae-inspector-start-column":"12","trae-inspector-end-line":"273","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22273%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22273%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Title"}),E.jsx("input",{"trae-inspector-start-line":"274","trae-inspector-start-column":"12","trae-inspector-end-line":"281","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:z,onChange:ce=>W(ce.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g. Final Exam, Semester Test 1"})]}),E.jsxs("div",{"trae-inspector-start-line":"283","trae-inspector-start-column":"10","trae-inspector-end-line":"292","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"284","trae-inspector-start-column":"12","trae-inspector-end-line":"284","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Full%20Paper%20PDF%20(Optional)%22%2C%22textStartLine%22%3A%22284%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22284%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Full Paper PDF (Optional)"}),E.jsx("p",{"trae-inspector-start-line":"285","trae-inspector-start-column":"12","trae-inspector-end-line":"285","trae-inspector-end-column":"147","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20the%20full%20paper%20if%20you%20have%20it%2C%20otherwise%20you%20can%20add%20questions%20individually%20later.%22%2C%22textStartLine%22%3A%22285%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%22285%22%2C%22textEndColumn%22%3A%22143%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1",children:"Upload the full paper if you have it, otherwise you can add questions individually later."}),E.jsx("input",{"trae-inspector-start-line":"286","trae-inspector-start-column":"12","trae-inspector-end-line":"291","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:".pdf",onChange:ce=>U(ce.target.files?ce.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),E.jsx("div",{"trae-inspector-start-line":"293","trae-inspector-start-column":"10","trae-inspector-end-line":"301","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:E.jsx("button",{"trae-inspector-start-line":"294","trae-inspector-start-column":"12","trae-inspector-end-line":"300","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:P,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${P?"opacity-75 cursor-not-allowed":""}`,children:P?"Creating...":"Create Assessment"})})]})})]})},aq=()=>E.jsx(TS,{type:"exam",title:"Exams"}),oq=()=>E.jsx(TS,{type:"test",title:"Tests"}),lq=()=>E.jsx(TS,{type:"supplementary",title:"Supplementary Exams"}),xR="users",ER=async s=>{let e;return s?e=ea(ds(Yt,xR),xu("universityId","==",s),Iu("createdAt","desc")):e=ea(ds(Yt,xR),Iu("createdAt","desc"),vN(50)),(await Zh(e)).docs.map(n=>({userId:n.id,...n.data()}))},cq=()=>{const[s,e]=K.useState([]),[t,n]=K.useState([]),[r,i]=K.useState(""),[o,u]=K.useState(!0),[d,h]=K.useState("");K.useEffect(()=>{(async()=>{try{const[A,F]=await Promise.all([l2(),ER()]);n(A),e(F)}catch(A){console.error("Error loading data:",A)}finally{u(!1)}})()},[]),K.useEffect(()=>{(async()=>{u(!0);try{const A=await ER(r||void 0);e(A)}catch(A){console.error("Error fetching users:",A)}finally{u(!1)}})()},[r]);const f=s.filter(w=>w.name.toLowerCase().includes(d.toLowerCase())||w.email.toLowerCase().includes(d.toLowerCase())),g=w=>{const A=t.find(F=>F.universityId===w);return A?A.code:"Unknown"};return E.jsxs("div",{"trae-inspector-start-line":"58","trae-inspector-start-column":"4","trae-inspector-end-line":"167","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("h1",{"trae-inspector-start-line":"59","trae-inspector-start-column":"6","trae-inspector-end-line":"59","trae-inspector-end-column":"77","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Users%22%2C%22textStartLine%22%3A%2259%22%2C%22textStartColumn%22%3A%2260%22%2C%22textEndLine%22%3A%2259%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900 mb-6",children:"Manage Users"}),E.jsx("div",{"trae-inspector-start-line":"61","trae-inspector-start-column":"6","trae-inspector-end-line":"94","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:E.jsxs("div",{"trae-inspector-start-line":"62","trae-inspector-start-column":"8","trae-inspector-end-line":"93","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[E.jsxs("div",{"trae-inspector-start-line":"63","trae-inspector-start-column":"10","trae-inspector-end-line":"77","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[E.jsx("label",{"trae-inspector-start-line":"64","trae-inspector-start-column":"12","trae-inspector-end-line":"64","trae-inspector-end-column":"104","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Filter%20by%20University%22%2C%22textStartLine%22%3A%2264%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2264%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by University"}),E.jsxs("select",{"trae-inspector-start-line":"65","trae-inspector-start-column":"12","trae-inspector-end-line":"76","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:r,onChange:w=>i(w.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:[E.jsx("option",{"trae-inspector-start-line":"70","trae-inspector-start-column":"14","trae-inspector-end-line":"70","trae-inspector-end-column":"56","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22All%20Universities%22%2C%22textStartLine%22%3A%2270%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%2270%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"",children:"All Universities"}),t.map(w=>E.jsxs("option",{"trae-inspector-start-line":"72","trae-inspector-start-column":"16","trae-inspector-end-line":"74","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:w.universityId,children:[w.name," (",w.code,")"]},w.universityId))]})]}),E.jsxs("div",{"trae-inspector-start-line":"78","trae-inspector-start-column":"10","trae-inspector-end-line":"92","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[E.jsx("label",{"trae-inspector-start-line":"79","trae-inspector-start-column":"12","trae-inspector-end-line":"79","trae-inspector-end-column":"96","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Search%20Users%22%2C%22textStartLine%22%3A%2279%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2279%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Users"}),E.jsxs("div",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"91","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative",children:[E.jsx("div",{"trae-inspector-start-line":"81","trae-inspector-start-column":"14","trae-inspector-end-line":"83","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(o1,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{"trae-inspector-start-line":"84","trae-inspector-start-column":"14","trae-inspector-end-line":"90","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search by name or email...",value:d,onChange:w=>h(w.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}),E.jsx("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"6","trae-inspector-end-line":"166","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:E.jsx("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"8","trae-inspector-end-line":"165","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:E.jsxs("table",{"trae-inspector-start-line":"98","trae-inspector-start-column":"10","trae-inspector-end-line":"164","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[E.jsx("thead",{"trae-inspector-start-line":"99","trae-inspector-start-column":"12","trae-inspector-end-line":"107","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:E.jsxs("tr",{"trae-inspector-start-line":"100","trae-inspector-start-column":"14","trae-inspector-end-line":"106","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("th",{"trae-inspector-start-line":"101","trae-inspector-start-column":"16","trae-inspector-end-line":"101","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22User%22%2C%22textStartLine%22%3A%22101%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22101%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"User"}),E.jsx("th",{"trae-inspector-start-line":"102","trae-inspector-start-column":"16","trae-inspector-end-line":"102","trae-inspector-end-column":"57","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%22%2C%22textStartLine%22%3A%22102%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22102%22%2C%22textEndColumn%22%3A%2252%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"University"}),E.jsx("th",{"trae-inspector-start-line":"103","trae-inspector-start-column":"16","trae-inspector-end-line":"103","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Points%22%2C%22textStartLine%22%3A%22103%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22103%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Points"}),E.jsx("th",{"trae-inspector-start-line":"104","trae-inspector-start-column":"16","trae-inspector-end-line":"104","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Status%22%2C%22textStartLine%22%3A%22104%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22104%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Status"}),E.jsx("th",{"trae-inspector-start-line":"105","trae-inspector-start-column":"16","trae-inspector-end-line":"105","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Joined%22%2C%22textStartLine%22%3A%22105%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22105%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Joined"})]})}),E.jsx("tbody",{"trae-inspector-start-line":"108","trae-inspector-start-column":"12","trae-inspector-end-line":"163","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:o?E.jsx("tr",{"trae-inspector-start-line":"110","trae-inspector-start-column":"16","trae-inspector-end-line":"112","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsx("td",{"trae-inspector-start-line":"111","trae-inspector-start-column":"18","trae-inspector-end-line":"111","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22111%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22111%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):f.length===0?E.jsx("tr",{"trae-inspector-start-line":"114","trae-inspector-start-column":"16","trae-inspector-end-line":"116","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:E.jsx("td",{"trae-inspector-start-line":"115","trae-inspector-start-column":"18","trae-inspector-end-line":"115","trae-inspector-end-column":"101","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20users%20found%22%2C%22textStartLine%22%3A%22115%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22115%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):f.map(w=>E.jsxs("tr",{"trae-inspector-start-line":"119","trae-inspector-start-column":"18","trae-inspector-end-line":"160","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[E.jsx("td",{"trae-inspector-start-line":"120","trae-inspector-start-column":"20","trae-inspector-end-line":"135","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:E.jsxs("div",{"trae-inspector-start-line":"121","trae-inspector-start-column":"22","trae-inspector-end-line":"134","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center",children:[E.jsx("div",{"trae-inspector-start-line":"122","trae-inspector-start-column":"24","trae-inspector-end-line":"126","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-shrink-0 h-10 w-10",children:E.jsx("div",{"trae-inspector-start-line":"123","trae-inspector-start-column":"26","trae-inspector-end-line":"125","trae-inspector-end-column":"32","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:E.jsx(KR,{className:"h-6 w-6 text-blue-600"})})}),E.jsxs("div",{"trae-inspector-start-line":"127","trae-inspector-start-column":"24","trae-inspector-end-line":"133","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"ml-4",children:[E.jsx("div",{"trae-inspector-start-line":"128","trae-inspector-start-column":"26","trae-inspector-end-line":"128","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-900",children:w.name}),E.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"26","trae-inspector-end-line":"132","trae-inspector-end-column":"32","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500 flex items-center",children:[E.jsx(WR,{className:"h-3 w-3 mr-1"}),w.email]})]})]})}),E.jsx("td",{"trae-inspector-start-line":"136","trae-inspector-start-column":"20","trae-inspector-end-line":"141","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:E.jsxs("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"22","trae-inspector-end-line":"140","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center text-sm text-gray-900",children:[E.jsx(ZE,{className:"h-4 w-4 mr-2 text-gray-400"}),g(w.universityId)]})}),E.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"20","trae-inspector-end-line":"147","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:E.jsxs("div",{"trae-inspector-start-line":"143","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center text-sm text-gray-900",children:[E.jsx(lB,{className:"h-4 w-4 mr-2 text-yellow-500"}),w.points]})}),E.jsx("td",{"trae-inspector-start-line":"148","trae-inspector-start-column":"20","trae-inspector-end-line":"156","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:E.jsx("span",{"trae-inspector-start-line":"149","trae-inspector-start-column":"22","trae-inspector-end-line":"155","trae-inspector-end-column":"29","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w.subscriptionActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.subscriptionActive?"Premium":"Free"})}),E.jsx("td",{"trae-inspector-start-line":"157","trae-inspector-start-column":"20","trae-inspector-end-line":"159","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:w.createdAt?new Date(w.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]},w.userId))})]})})})]})},uq=()=>E.jsxs("div",{"trae-inspector-start-line":"6","trae-inspector-start-column":"4","trae-inspector-end-line":"20","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[E.jsx("h1",{"trae-inspector-start-line":"7","trae-inspector-start-column":"6","trae-inspector-end-line":"7","trae-inspector-end-column":"78","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Analytics%20Overview%22%2C%22textStartLine%22%3A%227%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%227%22%2C%22textEndColumn%22%3A%2273%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Analytics Overview"}),E.jsxs("div",{"trae-inspector-start-line":"9","trae-inspector-start-column":"6","trae-inspector-end-line":"19","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[E.jsx("div",{"trae-inspector-start-line":"10","trae-inspector-start-column":"8","trae-inspector-end-line":"14","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-center mb-6",children:E.jsx("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"10","trae-inspector-end-line":"13","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-100 p-4 rounded-full",children:E.jsx(HR,{className:"h-12 w-12 text-blue-600"})})}),E.jsx("h2",{"trae-inspector-start-line":"15","trae-inspector-start-column":"8","trae-inspector-end-line":"15","trae-inspector-end-column":"85","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Analytics%20Dashboard%22%2C%22textStartLine%22%3A%2215%22%2C%22textStartColumn%22%3A%2261%22%2C%22textEndLine%22%3A%2215%22%2C%22textEndColumn%22%3A%2280%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xl font-bold text-gray-900 mb-2",children:"Analytics Dashboard"}),E.jsx("p",{"trae-inspector-start-line":"16","trae-inspector-start-column":"8","trae-inspector-end-line":"18","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Detailed%20usage%20statistics%20and%20engagement%20metrics%20will%20appear%20here%20once%20students%20start%20using%20the%20mobile%20application.%22%2C%22textStartLine%22%3A%2216%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%2218%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-500 max-w-md mx-auto",children:"Detailed usage statistics and engagement metrics will appear here once students start using the mobile application."})]})]}),G1="announcements",dq=async()=>{const s=ea(ds(Yt,G1),Iu("createdAt","desc"));return(await Zh(s)).docs.map(t=>({announcementId:t.id,...t.data()}))},hq=async(s,e,t,n)=>(await x0(ds(Yt,G1),{title:s,message:e,universityId:t,active:n,createdAt:A0()})).id,pq=async(s,e)=>{await P1(sa(Yt,G1,s),{active:e})},fq=async s=>{await _0(sa(Yt,G1,s))},mq=()=>{const[s,e]=K.useState([]),[t,n]=K.useState([]),[r,i]=K.useState(!0),[o,u]=K.useState(!1),[d,h]=K.useState(!1),[f,g]=K.useState(""),[w,A]=K.useState(""),[F,C]=K.useState(""),[T,P]=K.useState(!0);K.useEffect(()=>{O()},[]);const O=async()=>{try{const[R,L]=await Promise.all([dq(),l2()]);e(R),n(L)}catch(R){console.error("Error fetching data:",R)}finally{i(!1)}},N=()=>{g(""),A(""),C(""),P(!0),u(!0)},V=async R=>{R.preventDefault(),h(!0);try{await hq(f,w,F||"all",T),u(!1),O()}catch(L){console.error("Error creating announcement:",L)}finally{h(!1)}},z=async R=>{try{await pq(R.announcementId,!R.active),O()}catch(L){console.error("Error updating status:",L)}},W=async R=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await fq(R),O()}catch(L){console.error("Error deleting announcement:",L)}},D=R=>{if(R==="all")return"All Universities";const L=t.find(U=>U.universityId===R);return L?L.name:"Unknown"};return E.jsxs("div",{"trae-inspector-start-line":"89","trae-inspector-start-column":"4","trae-inspector-end-line":"229","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsxs("div",{"trae-inspector-start-line":"90","trae-inspector-start-column":"6","trae-inspector-end-line":"99","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[E.jsx("h1",{"trae-inspector-start-line":"91","trae-inspector-start-column":"8","trae-inspector-end-line":"91","trae-inspector-end-column":"75","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Announcements%22%2C%22textStartLine%22%3A%2291%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2291%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Announcements"}),E.jsxs("button",{"trae-inspector-start-line":"92","trae-inspector-start-column":"8","trae-inspector-end-line":"98","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:N,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[E.jsx(o0,{className:"h-5 w-5"}),E.jsx("span",{"trae-inspector-start-line":"97","trae-inspector-start-column":"10","trae-inspector-end-line":"97","trae-inspector-end-column":"42","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Create%20Announcement%22%2C%22textStartLine%22%3A%2297%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2297%22%2C%22textEndColumn%22%3A%2235%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Create Announcement"})]})]}),E.jsx("div",{"trae-inspector-start-line":"101","trae-inspector-start-column":"6","trae-inspector-end-line":"160","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid gap-6",children:r?E.jsx("div",{"trae-inspector-start-line":"103","trae-inspector-start-column":"10","trae-inspector-end-line":"103","trae-inspector-end-column":"75","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22103%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22103%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center text-gray-500 py-10",children:"Loading..."}):s.length===0?E.jsx("div",{"trae-inspector-start-line":"105","trae-inspector-start-column":"10","trae-inspector-end-line":"107","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20announcements%20found%22%2C%22textStartLine%22%3A%22105%22%2C%22textStartColumn%22%3A%2289%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center text-gray-500 py-10 bg-white rounded-xl shadow-sm",children:"No announcements found"}):s.map(R=>E.jsxs("div",{"trae-inspector-start-line":"110","trae-inspector-start-column":"12","trae-inspector-end-line":"157","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-6 flex justify-between items-start",children:[E.jsxs("div",{"trae-inspector-start-line":"111","trae-inspector-start-column":"14","trae-inspector-end-line":"127","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-start space-x-4",children:[E.jsx("div",{"trae-inspector-start-line":"112","trae-inspector-start-column":"16","trae-inspector-end-line":"114","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`p-3 rounded-lg ${R.active?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-500"}`,children:E.jsx(GR,{className:"h-6 w-6"})}),E.jsxs("div",{"trae-inspector-start-line":"115","trae-inspector-start-column":"16","trae-inspector-end-line":"126","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("h3",{"trae-inspector-start-line":"116","trae-inspector-start-column":"18","trae-inspector-end-line":"116","trae-inspector-end-column":"82","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-bold text-gray-900",children:R.title}),E.jsx("p",{"trae-inspector-start-line":"117","trae-inspector-start-column":"18","trae-inspector-end-line":"117","trae-inspector-end-column":"69","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-600 mt-1",children:R.message}),E.jsxs("div",{"trae-inspector-start-line":"118","trae-inspector-start-column":"18","trae-inspector-end-line":"125","trae-inspector-end-column":"24","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4 mt-3 text-sm text-gray-500",children:[E.jsxs("span",{"trae-inspector-start-line":"119","trae-inspector-start-column":"20","trae-inspector-end-line":"121","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-100 px-2 py-1 rounded-md",children:["Target: ",D(R.universityId)]}),E.jsxs("span",{"trae-inspector-start-line":"122","trae-inspector-start-column":"20","trae-inspector-end-line":"124","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:["Created: ",R.createdAt?new Date(R.createdAt.seconds*1e3).toLocaleDateString():"Just now"]})]})]})]}),E.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"14","trae-inspector-end-line":"156","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[E.jsx("button",{"trae-inspector-start-line":"130","trae-inspector-start-column":"16","trae-inspector-end-line":"149","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(R),className:`flex items-center space-x-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${R.active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:R.active?E.jsxs(E.Fragment,{children:[E.jsx(vB,{className:"h-4 w-4"}),E.jsx("span",{"trae-inspector-start-line":"141","trae-inspector-start-column":"22","trae-inspector-end-line":"141","trae-inspector-end-column":"41","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Active%22%2C%22textStartLine%22%3A%22141%22%2C%22textStartColumn%22%3A%2228%22%2C%22textEndLine%22%3A%22141%22%2C%22textEndColumn%22%3A%2234%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Active"})]}):E.jsxs(E.Fragment,{children:[E.jsx(_B,{className:"h-4 w-4"}),E.jsx("span",{"trae-inspector-start-line":"146","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"43","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Inactive%22%2C%22textStartLine%22%3A%22146%22%2C%22textStartColumn%22%3A%2228%22%2C%22textEndLine%22%3A%22146%22%2C%22textEndColumn%22%3A%2236%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Inactive"})]})}),E.jsx("button",{"trae-inspector-start-line":"150","trae-inspector-start-column":"16","trae-inspector-end-line":"155","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>W(R.announcementId),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:E.jsx(l0,{className:"h-5 w-5"})})]})]},R.announcementId))}),E.jsx(Xm,{isOpen:o,onClose:()=>u(!1),title:"Create Announcement",children:E.jsxs("form",{"trae-inspector-start-line":"167","trae-inspector-start-column":"8","trae-inspector-end-line":"227","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:V,className:"space-y-4",children:[E.jsxs("div",{"trae-inspector-start-line":"168","trae-inspector-start-column":"10","trae-inspector-end-line":"178","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"169","trae-inspector-start-column":"12","trae-inspector-end-line":"169","trae-inspector-end-column":"84","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22169%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22169%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Title"}),E.jsx("input",{"trae-inspector-start-line":"170","trae-inspector-start-column":"12","trae-inspector-end-line":"177","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:f,onChange:R=>g(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g. System Maintenance"})]}),E.jsxs("div",{"trae-inspector-start-line":"179","trae-inspector-start-column":"10","trae-inspector-end-line":"189","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"180","trae-inspector-start-column":"12","trae-inspector-end-line":"180","trae-inspector-end-column":"86","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Message%22%2C%22textStartLine%22%3A%22180%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22180%22%2C%22textEndColumn%22%3A%2278%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Message"}),E.jsx("textarea",{"trae-inspector-start-line":"181","trae-inspector-start-column":"12","trae-inspector-end-line":"188","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",required:!0,rows:3,value:w,onChange:R=>A(R.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter announcement details..."})]}),E.jsxs("div",{"trae-inspector-start-line":"190","trae-inspector-start-column":"10","trae-inspector-end-line":"205","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[E.jsx("label",{"trae-inspector-start-line":"191","trae-inspector-start-column":"12","trae-inspector-end-line":"191","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Target%20Audience%22%2C%22textStartLine%22%3A%22191%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22191%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Target Audience"}),E.jsxs("select",{"trae-inspector-start-line":"192","trae-inspector-start-column":"12","trae-inspector-end-line":"204","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:F,onChange:R=>C(R.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[E.jsx("option",{"trae-inspector-start-line":"197","trae-inspector-start-column":"14","trae-inspector-end-line":"197","trae-inspector-end-column":"56","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20Target...%22%2C%22textStartLine%22%3A%22197%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%22197%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"",children:"Select Target..."}),E.jsx("option",{"trae-inspector-start-line":"198","trae-inspector-start-column":"14","trae-inspector-end-line":"198","trae-inspector-end-column":"59","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22All%20Universities%22%2C%22textStartLine%22%3A%22198%22%2C%22textStartColumn%22%3A%2234%22%2C%22textEndLine%22%3A%22198%22%2C%22textEndColumn%22%3A%2250%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"all",children:"All Universities"}),t.map(R=>E.jsx("option",{"trae-inspector-start-line":"200","trae-inspector-start-column":"16","trae-inspector-end-line":"202","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:R.universityId,children:R.name},R.universityId))]})]}),E.jsxs("div",{"trae-inspector-start-line":"206","trae-inspector-start-column":"10","trae-inspector-end-line":"217","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center",children:[E.jsx("input",{"trae-inspector-start-line":"207","trae-inspector-start-column":"12","trae-inspector-end-line":"213","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"active",type:"checkbox",checked:T,onChange:R=>P(R.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),E.jsx("label",{"trae-inspector-start-line":"214","trae-inspector-start-column":"12","trae-inspector-end-line":"216","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Set%20as%20Active%20immediately%22%2C%22textStartLine%22%3A%22214%22%2C%22textStartColumn%22%3A%2281%22%2C%22textEndLine%22%3A%22216%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Set as Active immediately"})]}),E.jsx("div",{"trae-inspector-start-line":"218","trae-inspector-start-column":"10","trae-inspector-end-line":"226","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:E.jsx("button",{"trae-inspector-start-line":"219","trae-inspector-start-column":"12","trae-inspector-end-line":"225","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:d,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${d?"opacity-75 cursor-not-allowed":""}`,children:d?"Creating...":"Create Announcement"})})]})})]})};function gq(){return E.jsx(W7,{children:E.jsxs(_7,{children:[E.jsx(_s,{path:"/login",element:E.jsx(Yz,{})}),E.jsx(_s,{path:"/",element:E.jsx(ba,{children:E.jsx(Ea,{children:E.jsx(YE,{to:"/dashboard",replace:!0})})})}),E.jsx(_s,{path:"/dashboard",element:E.jsx(ba,{children:E.jsx(Ea,{children:E.jsx(tW,{})})})}),E.jsx(_s,{path:"/universities",element:E.jsx(ba,{children:E.jsx(Ea,{children:E.jsx(nW,{})})})}),E.jsx(_s,{path:"/modules",element:E.jsx(ba,{children:E.jsx(Ea,{children:E.jsx(aW,{})})})}),E.jsx(_s,{path:"/exams",element:E.jsx(ba,{children:E.jsx(Ea,{children:E.jsx(aq,{})})})}),E.jsx(_s,{path:"/tests",element:E.jsx(ba,{children:E.jsx(Ea,{children:E.jsx(oq,{})})})}),E.jsx(_s,{path:"/supplementary-exams",element:E.jsx(ba,{children:E.jsx(Ea,{children:E.jsx(lq,{})})})}),E.jsx(_s,{path:"/users",element:E.jsx(ba,{children:E.jsx(Ea,{children:E.jsx(cq,{})})})}),E.jsx(_s,{path:"/analytics",element:E.jsx(ba,{children:E.jsx(Ea,{children:E.jsx(uq,{})})})}),E.jsx(_s,{path:"/announcements",element:E.jsx(ba,{children:E.jsx(Ea,{children:E.jsx(mq,{})})})}),E.jsx(_s,{path:"*",element:E.jsx(YE,{to:"/",replace:!0})})]})})}b4.createRoot(document.getElementById("root")).render(E.jsx(K.StrictMode,{children:E.jsx(gq,{})}));

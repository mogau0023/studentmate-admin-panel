var A4=Object.defineProperty;var AI=s=>{throw TypeError(s)};var x4=(s,e,t)=>e in s?A4(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var oe=(s,e,t)=>x4(s,typeof e!="symbol"?e+"":e,t),EE=(s,e,t)=>e.has(s)||AI("Cannot "+t);var c=(s,e,t)=>(EE(s,e,"read from private field"),t?t.call(s):e.get(s)),T=(s,e,t)=>e.has(s)?AI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),_=(s,e,t,n)=>(EE(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),P=(s,e,t)=>(EE(s,e,"access private method"),t);var er=(s,e,t,n)=>({set _(r){_(s,e,r,t)},get _(){return c(s,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function ID(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var bE={exports:{}},gg={},CE={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI;function _4(){if(xI)return it;xI=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=g&&H[g]||H["@@iterator"],typeof H=="function"?H:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,C={};function S(H,Q,ae){this.props=H,this.context=Q,this.refs=C,this.updater=ae||v}S.prototype.isReactComponent={},S.prototype.setState=function(H,Q){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Q,"setState")},S.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function I(){}I.prototype=S.prototype;function O(H,Q,ae){this.props=H,this.context=Q,this.refs=C,this.updater=ae||v}var R=O.prototype=new I;R.constructor=O,F(R,S.prototype),R.isPureReactComponent=!0;var B=Array.isArray,z=Object.prototype.hasOwnProperty,W={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function N(H,Q,ae){var ye,xe={},Ee=null,Se=null;if(Q!=null)for(ye in Q.ref!==void 0&&(Se=Q.ref),Q.key!==void 0&&(Ee=""+Q.key),Q)z.call(Q,ye)&&!D.hasOwnProperty(ye)&&(xe[ye]=Q[ye]);var Ue=arguments.length-2;if(Ue===1)xe.children=ae;else if(1<Ue){for(var Ce=Array(Ue),Me=0;Me<Ue;Me++)Ce[Me]=arguments[Me+2];xe.children=Ce}if(H&&H.defaultProps)for(ye in Ue=H.defaultProps,Ue)xe[ye]===void 0&&(xe[ye]=Ue[ye]);return{$$typeof:s,type:H,key:Ee,ref:Se,props:xe,_owner:W.current}}function L(H,Q){return{$$typeof:s,type:H.type,key:Q,ref:H.ref,props:H.props,_owner:H._owner}}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===s}function $(H){var Q={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ae){return Q[ae]})}var K=/\/+/g;function U(H,Q){return typeof H=="object"&&H!==null&&H.key!=null?$(""+H.key):Q.toString(36)}function me(H,Q,ae,ye,xe){var Ee=typeof H;(Ee==="undefined"||Ee==="boolean")&&(H=null);var Se=!1;if(H===null)Se=!0;else switch(Ee){case"string":case"number":Se=!0;break;case"object":switch(H.$$typeof){case s:case e:Se=!0}}if(Se)return Se=H,xe=xe(Se),H=ye===""?"."+U(Se,0):ye,B(xe)?(ae="",H!=null&&(ae=H.replace(K,"$&/")+"/"),me(xe,Q,ae,"",function(Me){return Me})):xe!=null&&(V(xe)&&(xe=L(xe,ae+(!xe.key||Se&&Se.key===xe.key?"":(""+xe.key).replace(K,"$&/")+"/")+H)),Q.push(xe)),1;if(Se=0,ye=ye===""?".":ye+":",B(H))for(var Ue=0;Ue<H.length;Ue++){Ee=H[Ue];var Ce=ye+U(Ee,Ue);Se+=me(Ee,Q,ae,Ce,xe)}else if(Ce=w(H),typeof Ce=="function")for(H=Ce.call(H),Ue=0;!(Ee=H.next()).done;)Ee=Ee.value,Ce=ye+U(Ee,Ue++),Se+=me(Ee,Q,ae,Ce,xe);else if(Ee==="object")throw Q=String(H),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Se}function Ae(H,Q,ae){if(H==null)return H;var ye=[],xe=0;return me(H,ye,"","",function(Ee){return Q.call(ae,Ee,xe++)}),ye}function we(H){if(H._status===-1){var Q=H._result;Q=Q(),Q.then(function(ae){(H._status===0||H._status===-1)&&(H._status=1,H._result=ae)},function(ae){(H._status===0||H._status===-1)&&(H._status=2,H._result=ae)}),H._status===-1&&(H._status=0,H._result=Q)}if(H._status===1)return H._result.default;throw H._result}var fe={current:null},le={transition:null},Z={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:le,ReactCurrentOwner:W};function J(){throw Error("act(...) is not supported in production builds of React.")}return it.Children={map:Ae,forEach:function(H,Q,ae){Ae(H,function(){Q.apply(this,arguments)},ae)},count:function(H){var Q=0;return Ae(H,function(){Q++}),Q},toArray:function(H){return Ae(H,function(Q){return Q})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},it.Component=S,it.Fragment=t,it.Profiler=r,it.PureComponent=O,it.StrictMode=n,it.Suspense=d,it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,it.act=J,it.cloneElement=function(H,Q,ae){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var ye=F({},H.props),xe=H.key,Ee=H.ref,Se=H._owner;if(Q!=null){if(Q.ref!==void 0&&(Ee=Q.ref,Se=W.current),Q.key!==void 0&&(xe=""+Q.key),H.type&&H.type.defaultProps)var Ue=H.type.defaultProps;for(Ce in Q)z.call(Q,Ce)&&!D.hasOwnProperty(Ce)&&(ye[Ce]=Q[Ce]===void 0&&Ue!==void 0?Ue[Ce]:Q[Ce])}var Ce=arguments.length-2;if(Ce===1)ye.children=ae;else if(1<Ce){Ue=Array(Ce);for(var Me=0;Me<Ce;Me++)Ue[Me]=arguments[Me+2];ye.children=Ue}return{$$typeof:s,type:H.type,key:xe,ref:Ee,props:ye,_owner:Se}},it.createContext=function(H){return H={$$typeof:a,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:i,_context:H},H.Consumer=H},it.createElement=N,it.createFactory=function(H){var Q=N.bind(null,H);return Q.type=H,Q},it.createRef=function(){return{current:null}},it.forwardRef=function(H){return{$$typeof:u,render:H}},it.isValidElement=V,it.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:we}},it.memo=function(H,Q){return{$$typeof:h,type:H,compare:Q===void 0?null:Q}},it.startTransition=function(H){var Q=le.transition;le.transition={};try{H()}finally{le.transition=Q}},it.unstable_act=J,it.useCallback=function(H,Q){return fe.current.useCallback(H,Q)},it.useContext=function(H){return fe.current.useContext(H)},it.useDebugValue=function(){},it.useDeferredValue=function(H){return fe.current.useDeferredValue(H)},it.useEffect=function(H,Q){return fe.current.useEffect(H,Q)},it.useId=function(){return fe.current.useId()},it.useImperativeHandle=function(H,Q,ae){return fe.current.useImperativeHandle(H,Q,ae)},it.useInsertionEffect=function(H,Q){return fe.current.useInsertionEffect(H,Q)},it.useLayoutEffect=function(H,Q){return fe.current.useLayoutEffect(H,Q)},it.useMemo=function(H,Q){return fe.current.useMemo(H,Q)},it.useReducer=function(H,Q,ae){return fe.current.useReducer(H,Q,ae)},it.useRef=function(H){return fe.current.useRef(H)},it.useState=function(H){return fe.current.useState(H)},it.useSyncExternalStore=function(H,Q,ae){return fe.current.useSyncExternalStore(H,Q,ae)},it.useTransition=function(){return fe.current.useTransition()},it.version="18.3.1",it}var _I;function PF(){return _I||(_I=1,CE.exports=_4()),CE.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EI;function E4(){if(EI)return gg;EI=1;var s=PF(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,h){var f,g={},w=null,v=null;h!==void 0&&(w=""+h),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(v=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(g[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)g[f]===void 0&&(g[f]=d[f]);return{$$typeof:e,type:u,key:w,ref:v,props:g,_owner:r.current}}return gg.Fragment=t,gg.jsx=a,gg.jsxs=a,gg}var bI;function b4(){return bI||(bI=1,bE.exports=E4()),bE.exports}var x=b4(),q=PF();const qv=ID(q);var Qv={},FE={exports:{}},bs={},SE={exports:{}},TE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CI;function C4(){return CI||(CI=1,(function(s){function e(le,Z){var J=le.length;le.push(Z);e:for(;0<J;){var H=J-1>>>1,Q=le[H];if(0<r(Q,Z))le[H]=Z,le[J]=Q,J=H;else break e}}function t(le){return le.length===0?null:le[0]}function n(le){if(le.length===0)return null;var Z=le[0],J=le.pop();if(J!==Z){le[0]=J;e:for(var H=0,Q=le.length,ae=Q>>>1;H<ae;){var ye=2*(H+1)-1,xe=le[ye],Ee=ye+1,Se=le[Ee];if(0>r(xe,J))Ee<Q&&0>r(Se,xe)?(le[H]=Se,le[Ee]=J,H=Ee):(le[H]=xe,le[ye]=J,H=ye);else if(Ee<Q&&0>r(Se,J))le[H]=Se,le[Ee]=J,H=Ee;else break e}}return Z}function r(le,Z){var J=le.sortIndex-Z.sortIndex;return J!==0?J:le.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var a=Date,u=a.now();s.unstable_now=function(){return a.now()-u}}var d=[],h=[],f=1,g=null,w=3,v=!1,F=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(le){for(var Z=t(h);Z!==null;){if(Z.callback===null)n(h);else if(Z.startTime<=le)n(h),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(h)}}function B(le){if(C=!1,R(le),!F)if(t(d)!==null)F=!0,we(z);else{var Z=t(h);Z!==null&&fe(B,Z.startTime-le)}}function z(le,Z){F=!1,C&&(C=!1,I(N),N=-1),v=!0;var J=w;try{for(R(Z),g=t(d);g!==null&&(!(g.expirationTime>Z)||le&&!$());){var H=g.callback;if(typeof H=="function"){g.callback=null,w=g.priorityLevel;var Q=H(g.expirationTime<=Z);Z=s.unstable_now(),typeof Q=="function"?g.callback=Q:g===t(d)&&n(d),R(Z)}else n(d);g=t(d)}if(g!==null)var ae=!0;else{var ye=t(h);ye!==null&&fe(B,ye.startTime-Z),ae=!1}return ae}finally{g=null,w=J,v=!1}}var W=!1,D=null,N=-1,L=5,V=-1;function $(){return!(s.unstable_now()-V<L)}function K(){if(D!==null){var le=s.unstable_now();V=le;var Z=!0;try{Z=D(!0,le)}finally{Z?U():(W=!1,D=null)}}else W=!1}var U;if(typeof O=="function")U=function(){O(K)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ae=me.port2;me.port1.onmessage=K,U=function(){Ae.postMessage(null)}}else U=function(){S(K,0)};function we(le){D=le,W||(W=!0,U())}function fe(le,Z){N=S(function(){le(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(le){le.callback=null},s.unstable_continueExecution=function(){F||v||(F=!0,we(z))},s.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<le?Math.floor(1e3/le):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_getFirstCallbackNode=function(){return t(d)},s.unstable_next=function(le){switch(w){case 1:case 2:case 3:var Z=3;break;default:Z=w}var J=w;w=Z;try{return le()}finally{w=J}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(le,Z){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var J=w;w=le;try{return Z()}finally{w=J}},s.unstable_scheduleCallback=function(le,Z,J){var H=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?H+J:H):J=H,le){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=J+Q,le={id:f++,callback:Z,priorityLevel:le,startTime:J,expirationTime:Q,sortIndex:-1},J>H?(le.sortIndex=J,e(h,le),t(d)===null&&le===t(h)&&(C?(I(N),N=-1):C=!0,fe(B,J-H))):(le.sortIndex=Q,e(d,le),F||v||(F=!0,we(z))),le},s.unstable_shouldYield=$,s.unstable_wrapCallback=function(le){var Z=w;return function(){var J=w;w=Z;try{return le.apply(this,arguments)}finally{w=J}}}})(TE)),TE}var FI;function F4(){return FI||(FI=1,SE.exports=C4()),SE.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SI;function S4(){if(SI)return bs;SI=1;var s=PF(),e=F4();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function i(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(r[o]=l,o=0;o<l.length;o++)n.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function w(o){return d.call(g,o)?!0:d.call(f,o)?!1:h.test(o)?g[o]=!0:(f[o]=!0,!1)}function v(o,l,p,y){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function F(o,l,p,y){if(l===null||typeof l>"u"||v(o,l,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(o,l,p,y,A,E,M){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=A,this.mustUseProperty=p,this.propertyName=o,this.type=l,this.sanitizeURL=E,this.removeEmptyString=M}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new C(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];S[l]=new C(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new C(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new C(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new C(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new C(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new C(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new C(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new C(o,5,!1,o.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function O(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(I,O);S[l]=new C(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(I,O);S[l]=new C(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(I,O);S[l]=new C(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new C(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new C(o,1,!1,o.toLowerCase(),null,!0,!0)});function R(o,l,p,y){var A=S.hasOwnProperty(l)?S[l]:null;(A!==null?A.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(F(l,p,A,y)&&(p=null),y||A===null?w(l)&&(p===null?o.removeAttribute(l):o.setAttribute(l,""+p)):A.mustUseProperty?o[A.propertyName]=p===null?A.type===3?!1:"":p:(l=A.attributeName,y=A.attributeNamespace,p===null?o.removeAttribute(l):(A=A.type,p=A===3||A===4&&p===!0?"":""+p,y?o.setAttributeNS(y,l,p):o.setAttribute(l,p))))}var B=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),W=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),$=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),le=Symbol.iterator;function Z(o){return o===null||typeof o!="object"?null:(o=le&&o[le]||o["@@iterator"],typeof o=="function"?o:null)}var J=Object.assign,H;function Q(o){if(H===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);H=l&&l[1]||""}return`
`+H+o}var ae=!1;function ye(o,l){if(!o||ae)return"";ae=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(se){var y=se}Reflect.construct(o,[],l)}else{try{l.call()}catch(se){y=se}o.call(l.prototype)}else{try{throw Error()}catch(se){y=se}o()}}catch(se){if(se&&y&&typeof se.stack=="string"){for(var A=se.stack.split(`
`),E=y.stack.split(`
`),M=A.length-1,G=E.length-1;1<=M&&0<=G&&A[M]!==E[G];)G--;for(;1<=M&&0<=G;M--,G--)if(A[M]!==E[G]){if(M!==1||G!==1)do if(M--,G--,0>G||A[M]!==E[G]){var X=`
`+A[M].replace(" at new "," at ");return o.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",o.displayName)),X}while(1<=M&&0<=G);break}}}finally{ae=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?Q(o):""}function xe(o){switch(o.tag){case 5:return Q(o.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return o=ye(o.type,!1),o;case 11:return o=ye(o.type.render,!1),o;case 1:return o=ye(o.type,!0),o;default:return""}}function Ee(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case D:return"Fragment";case W:return"Portal";case L:return"Profiler";case N:return"StrictMode";case U:return"Suspense";case me:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case $:return(o.displayName||"Context")+".Consumer";case V:return(o._context.displayName||"Context")+".Provider";case K:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ae:return l=o.displayName||null,l!==null?l:Ee(o.type)||"Memo";case we:l=o._payload,o=o._init;try{return Ee(o(l))}catch{}}return null}function Se(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(l);case 8:return l===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ue(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ce(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Me(o){var l=Ce(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),y=""+o[l];if(!o.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var A=p.get,E=p.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return A.call(this)},set:function(M){y=""+M,E.call(this,M)}}),Object.defineProperty(o,l,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(M){y=""+M},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function st(o){o._valueTracker||(o._valueTracker=Me(o))}function Et(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var p=l.getValue(),y="";return o&&(y=Ce(o)?o.checked?"true":"false":o.value),o=y,o!==p?(l.setValue(o),!0):!1}function Lt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function yn(o,l){var p=l.checked;return J({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function Bs(o,l){var p=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;p=Ue(l.value!=null?l.value:p),o._wrapperState={initialChecked:y,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Br(o,l){l=l.checked,l!=null&&R(o,"checked",l,!1)}function ms(o,l){Br(o,l);var p=Ue(l.value),y=l.type;if(p!=null)y==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ot(o,l.type,p):l.hasOwnProperty("defaultValue")&&Ot(o,l.type,Ue(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function La(o,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,p||l===o.value||(o.value=l),o.defaultValue=l}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function Ot(o,l,p){(l!=="number"||Lt(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var Pt=Array.isArray;function ln(o,l,p,y){if(o=o.options,l){l={};for(var A=0;A<p.length;A++)l["$"+p[A]]=!0;for(p=0;p<o.length;p++)A=l.hasOwnProperty("$"+o[p].value),o[p].selected!==A&&(o[p].selected=A),A&&y&&(o[p].defaultSelected=!0)}else{for(p=""+Ue(p),l=null,A=0;A<o.length;A++){if(o[A].value===p){o[A].selected=!0,y&&(o[A].defaultSelected=!0);return}l!==null||o[A].disabled||(l=o[A])}l!==null&&(l.selected=!0)}}function fd(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function gs(o,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(t(92));if(Pt(p)){if(1<p.length)throw Error(t(93));p=p[0]}l=p}l==null&&(l=""),p=l}o._wrapperState={initialValue:Ue(p)}}function Ip(o,l){var p=Ue(l.value),y=Ue(l.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),l.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),y!=null&&(o.defaultValue=""+y)}function Bt(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function sa(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qt(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?sa(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var ys,js=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,y,A){MSApp.execUnsafeLocalFunction(function(){return o(l,p,y,A)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(ys=ys||document.createElement("div"),ys.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=ys.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function ws(o,l){if(l){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=l;return}}o.textContent=l}var Un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oa=["Webkit","ms","Moz","O"];Object.keys(Un).forEach(function(o){Oa.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Un[l]=Un[o]})});function or(o,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Un.hasOwnProperty(o)&&Un[o]?(""+l).trim():l+"px"}function Ci(o,l){o=o.style;for(var p in l)if(l.hasOwnProperty(p)){var y=p.indexOf("--")===0,A=or(p,l[p],y);p==="float"&&(p="cssFloat"),y?o.setProperty(p,A):o[p]=A}}var wc=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vr(o,l){if(l){if(wc[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Ba(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ar=null;function Yn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var jr=null,Fi=null,cn=null;function md(o){if(o=tg(o)){if(typeof jr!="function")throw Error(t(280));var l=o.stateNode;l&&(l=lv(l),jr(o.stateNode,o.type,l))}}function ja(o){Fi?cn?cn.push(o):cn=[o]:Fi=o}function Ua(){if(Fi){var o=Fi,l=cn;if(cn=Fi=null,md(o),l)for(o=0;o<l.length;o++)md(l[o])}}function Pp(o,l){return o(l)}function Rp(){}var Si=!1;function Dp(o,l,p){if(Si)return o(l,p);Si=!0;try{return Pp(o,l,p)}finally{Si=!1,(Fi!==null||cn!==null)&&(Rp(),Ua())}}function Jo(o,l){var p=o.stateNode;if(p===null)return null;var y=lv(p);if(y===null)return null;p=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(t(231,l,typeof p));return p}var Va=!1;if(u)try{var $a={};Object.defineProperty($a,"passive",{get:function(){Va=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{Va=!1}function gd(o,l,p,y,A,E,M,G,X){var se=Array.prototype.slice.call(arguments,3);try{l.apply(p,se)}catch(he){this.onError(he)}}var ia=!1,Ti=null,Zo=!1,re=null,_e={onError:function(o){ia=!0,Ti=o}};function ke(o,l,p,y,A,E,M,G,X){ia=!1,Ti=null,gd.apply(_e,arguments)}function bt(o,l,p,y,A,E,M,G,X){if(ke.apply(this,arguments),ia){if(ia){var se=Ti;ia=!1,Ti=null}else throw Error(t(198));Zo||(Zo=!0,re=se)}}function Kt(o){var l=o,p=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(p=l.return),o=l.return;while(o)}return l.tag===3?p:null}function un(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function ft(o){if(Kt(o)!==o)throw Error(t(188))}function At(o){var l=o.alternate;if(!l){if(l=Kt(o),l===null)throw Error(t(188));return l!==o?null:o}for(var p=o,y=l;;){var A=p.return;if(A===null)break;var E=A.alternate;if(E===null){if(y=A.return,y!==null){p=y;continue}break}if(A.child===E.child){for(E=A.child;E;){if(E===p)return ft(A),o;if(E===y)return ft(A),l;E=E.sibling}throw Error(t(188))}if(p.return!==y.return)p=A,y=E;else{for(var M=!1,G=A.child;G;){if(G===p){M=!0,p=A,y=E;break}if(G===y){M=!0,y=A,p=E;break}G=G.sibling}if(!M){for(G=E.child;G;){if(G===p){M=!0,p=E,y=A;break}if(G===y){M=!0,y=E,p=A;break}G=G.sibling}if(!M)throw Error(t(189))}}if(p.alternate!==y)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?o:l}function ot(o){return o=At(o),o!==null?Xt(o):null}function Xt(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Xt(o);if(l!==null)return l;o=o.sibling}return null}var ns=e.unstable_scheduleCallback,vc=e.unstable_cancelCallback,Us=e.unstable_shouldYield,el=e.unstable_requestPaint,nn=e.unstable_now,e_=e.unstable_getCurrentPriorityLevel,Np=e.unstable_ImmediatePriority,Rm=e.unstable_UserBlockingPriority,yd=e.unstable_NormalPriority,Dm=e.unstable_LowPriority,Mp=e.unstable_IdlePriority,wd=null,Vs=null;function W0(o){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(wd,o,void 0,(o.current.flags&128)===128)}catch{}}var $s=Math.clz32?Math.clz32:vd,za=Math.log,ki=Math.LN2;function vd(o){return o>>>=0,o===0?32:31-(za(o)/ki|0)|0}var Ha=64,Ac=4194304;function Ct(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function tl(o,l){var p=o.pendingLanes;if(p===0)return 0;var y=0,A=o.suspendedLanes,E=o.pingedLanes,M=p&268435455;if(M!==0){var G=M&~A;G!==0?y=Ct(G):(E&=M,E!==0&&(y=Ct(E)))}else M=p&~A,M!==0?y=Ct(M):E!==0&&(y=Ct(E));if(y===0)return 0;if(l!==0&&l!==y&&(l&A)===0&&(A=y&-y,E=l&-l,A>=E||A===16&&(E&4194240)!==0))return l;if((y&4)!==0&&(y|=p&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=y;0<l;)p=31-$s(l),A=1<<p,y|=o[p],l&=~A;return y}function Ad(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xd(o,l){for(var p=o.suspendedLanes,y=o.pingedLanes,A=o.expirationTimes,E=o.pendingLanes;0<E;){var M=31-$s(E),G=1<<M,X=A[M];X===-1?((G&p)===0||(G&y)!==0)&&(A[M]=Ad(G,l)):X<=l&&(o.expiredLanes|=G),E&=~G}}function Nm(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Mm(){var o=Ha;return Ha<<=1,(Ha&4194240)===0&&(Ha=64),o}function Lm(o){for(var l=[],p=0;31>p;p++)l.push(o);return l}function _d(o,l,p){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-$s(l),o[l]=p}function t_(o,l){var p=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<p;){var A=31-$s(p),E=1<<A;l[A]=0,y[A]=-1,o[A]=-1,p&=~E}}function Om(o,l){var p=o.entangledLanes|=l;for(o=o.entanglements;p;){var y=31-$s(p),A=1<<y;A&l|o[y]&l&&(o[y]|=l),p&=~A}}var ht=0;function Wa(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Bm,Lp,jm,Um,Vm,Ga=!1,Op=[],qa=null,Qa=null,xr=null,Ed=new Map,nl=new Map,zs=[],G0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xc(o,l){switch(o){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Ed.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(l.pointerId)}}function aa(o,l,p,y,A,E){return o===null||o.nativeEvent!==E?(o={blockedOn:l,domEventName:p,eventSystemFlags:y,nativeEvent:E,targetContainers:[A]},l!==null&&(l=tg(l),l!==null&&Lp(l)),o):(o.eventSystemFlags|=y,l=o.targetContainers,A!==null&&l.indexOf(A)===-1&&l.push(A),o)}function q0(o,l,p,y,A){switch(l){case"focusin":return qa=aa(qa,o,l,p,y,A),!0;case"dragenter":return Qa=aa(Qa,o,l,p,y,A),!0;case"mouseover":return xr=aa(xr,o,l,p,y,A),!0;case"pointerover":var E=A.pointerId;return Ed.set(E,aa(Ed.get(E)||null,o,l,p,y,A)),!0;case"gotpointercapture":return E=A.pointerId,nl.set(E,aa(nl.get(E)||null,o,l,p,y,A)),!0}return!1}function Bp(o){var l=Sd(o.target);if(l!==null){var p=Kt(l);if(p!==null){if(l=p.tag,l===13){if(l=un(p),l!==null){o.blockedOn=l,Vm(o.priority,function(){jm(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Wt(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var p=jp(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);Ar=y,p.target.dispatchEvent(y),Ar=null}else return l=tg(p),l!==null&&Lp(l),o.blockedOn=p,!1;l.shift()}return!0}function Q0(o,l,p){Wt(o)&&p.delete(l)}function n_(){Ga=!1,qa!==null&&Wt(qa)&&(qa=null),Qa!==null&&Wt(Qa)&&(Qa=null),xr!==null&&Wt(xr)&&(xr=null),Ed.forEach(Q0),nl.forEach(Q0)}function _c(o,l){o.blockedOn===l&&(o.blockedOn=null,Ga||(Ga=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,n_)))}function Ec(o){function l(A){return _c(A,o)}if(0<Op.length){_c(Op[0],o);for(var p=1;p<Op.length;p++){var y=Op[p];y.blockedOn===o&&(y.blockedOn=null)}}for(qa!==null&&_c(qa,o),Qa!==null&&_c(Qa,o),xr!==null&&_c(xr,o),Ed.forEach(l),nl.forEach(l),p=0;p<zs.length;p++)y=zs[p],y.blockedOn===o&&(y.blockedOn=null);for(;0<zs.length&&(p=zs[0],p.blockedOn===null);)Bp(p),p.blockedOn===null&&zs.shift()}var rl=B.ReactCurrentBatchConfig,sl=!0;function Ka(o,l,p,y){var A=ht,E=rl.transition;rl.transition=null;try{ht=1,$m(o,l,p,y)}finally{ht=A,rl.transition=E}}function K0(o,l,p,y){var A=ht,E=rl.transition;rl.transition=null;try{ht=4,$m(o,l,p,y)}finally{ht=A,rl.transition=E}}function $m(o,l,p,y){if(sl){var A=jp(o,l,p,y);if(A===null)p_(o,l,y,Xa,p),xc(o,y);else if(q0(A,o,l,p,y))y.stopPropagation();else if(xc(o,y),l&4&&-1<G0.indexOf(o)){for(;A!==null;){var E=tg(A);if(E!==null&&Bm(E),E=jp(o,l,p,y),E===null&&p_(o,l,y,Xa,p),E===A)break;A=E}A!==null&&y.stopPropagation()}else p_(o,l,y,null,p)}}var Xa=null;function jp(o,l,p,y){if(Xa=null,o=Yn(y),o=Sd(o),o!==null)if(l=Kt(o),l===null)o=null;else if(p=l.tag,p===13){if(o=un(l),o!==null)return o;o=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Xa=o,null}function Up(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e_()){case Np:return 1;case Rm:return 4;case yd:case Dm:return 16;case Mp:return 536870912;default:return 16}default:return 16}}var Hs=null,Vp=null,il=null;function X0(){if(il)return il;var o,l=Vp,p=l.length,y,A="value"in Hs?Hs.value:Hs.textContent,E=A.length;for(o=0;o<p&&l[o]===A[o];o++);var M=p-o;for(y=1;y<=M&&l[p-y]===A[E-y];y++);return il=A.slice(o,1<y?1-y:void 0)}function bd(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Ya(){return!0}function zm(){return!1}function Ur(o){function l(p,y,A,E,M){this._reactName=p,this._targetInst=A,this.type=y,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var G in o)o.hasOwnProperty(G)&&(p=o[G],this[G]=p?p(E):E[G]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Ya:zm,this.isPropagationStopped=zm,this}return J(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Ya)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Ya)},persist:function(){},isPersistent:Ya}),l}var Ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cd=Ur(Ja),bc=J({},Ja,{view:0,detail:0}),$p=Ur(bc),zp,Hp,Ws,Fd=J({},bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Je,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ws&&(Ws&&o.type==="mousemove"?(zp=o.screenX-Ws.screenX,Hp=o.screenY-Ws.screenY):Hp=zp=0,Ws=o),zp)},movementY:function(o){return"movementY"in o?o.movementY:Hp}}),Hm=Ur(Fd),Y0=J({},Fd,{dataTransfer:0}),J0=Ur(Y0),Wp=J({},bc,{relatedTarget:0}),_r=Ur(Wp),Z0=J({},Ja,{animationName:0,elapsedTime:0,pseudoElement:0}),ev=Ur(Z0),Cc=J({},Ja,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),m=Ur(Cc),b=J({},Ja,{data:0}),k=Ur(b),j={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},te={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ve(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=ie[o])?!!l[o]:!1}function Je(){return ve}var Nn=J({},bc,{key:function(o){if(o.key){var l=j[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=bd(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?te[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Je,charCode:function(o){return o.type==="keypress"?bd(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?bd(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rt=Ur(Nn),Vn=J({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gs=Ur(Vn),al=J({},bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Je}),Za=Ur(al),eo=J({},Ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gp=Ur(eo),Wm=J({},Fd,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),f7=Ur(Wm),m7=[9,13,27,32],r_=u&&"CompositionEvent"in window,Gm=null;u&&"documentMode"in document&&(Gm=document.documentMode);var g7=u&&"TextEvent"in window&&!Gm,hT=u&&(!r_||Gm&&8<Gm&&11>=Gm),pT=" ",fT=!1;function mT(o,l){switch(o){case"keyup":return m7.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gT(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var qp=!1;function y7(o,l){switch(o){case"compositionend":return gT(l);case"keypress":return l.which!==32?null:(fT=!0,pT);case"textInput":return o=l.data,o===pT&&fT?null:o;default:return null}}function w7(o,l){if(qp)return o==="compositionend"||!r_&&mT(o,l)?(o=X0(),il=Vp=Hs=null,qp=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return hT&&l.locale!=="ko"?null:l.data;default:return null}}var v7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yT(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!v7[o.type]:l==="textarea"}function wT(o,l,p,y){ja(y),l=iv(l,"onChange"),0<l.length&&(p=new Cd("onChange","change",null,p,y),o.push({event:p,listeners:l}))}var qm=null,Qm=null;function A7(o){LT(o,0)}function tv(o){var l=Jp(o);if(Et(l))return o}function x7(o,l){if(o==="change")return l}var vT=!1;if(u){var s_;if(u){var i_="oninput"in document;if(!i_){var AT=document.createElement("div");AT.setAttribute("oninput","return;"),i_=typeof AT.oninput=="function"}s_=i_}else s_=!1;vT=s_&&(!document.documentMode||9<document.documentMode)}function xT(){qm&&(qm.detachEvent("onpropertychange",_T),Qm=qm=null)}function _T(o){if(o.propertyName==="value"&&tv(Qm)){var l=[];wT(l,Qm,o,Yn(o)),Dp(A7,l)}}function _7(o,l,p){o==="focusin"?(xT(),qm=l,Qm=p,qm.attachEvent("onpropertychange",_T)):o==="focusout"&&xT()}function E7(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return tv(Qm)}function b7(o,l){if(o==="click")return tv(l)}function C7(o,l){if(o==="input"||o==="change")return tv(l)}function F7(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var oa=typeof Object.is=="function"?Object.is:F7;function Km(o,l){if(oa(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var p=Object.keys(o),y=Object.keys(l);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var A=p[y];if(!d.call(l,A)||!oa(o[A],l[A]))return!1}return!0}function ET(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function bT(o,l){var p=ET(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=l&&y>=l)return{node:p,offset:l-o};o=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=ET(p)}}function CT(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?CT(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function FT(){for(var o=window,l=Lt();l instanceof o.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)o=l.contentWindow;else break;l=Lt(o.document)}return l}function a_(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function S7(o){var l=FT(),p=o.focusedElem,y=o.selectionRange;if(l!==p&&p&&p.ownerDocument&&CT(p.ownerDocument.documentElement,p)){if(y!==null&&a_(p)){if(l=y.start,o=y.end,o===void 0&&(o=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(o,p.value.length);else if(o=(l=p.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var A=p.textContent.length,E=Math.min(y.start,A);y=y.end===void 0?E:Math.min(y.end,A),!o.extend&&E>y&&(A=y,y=E,E=A),A=bT(p,E);var M=bT(p,y);A&&M&&(o.rangeCount!==1||o.anchorNode!==A.node||o.anchorOffset!==A.offset||o.focusNode!==M.node||o.focusOffset!==M.offset)&&(l=l.createRange(),l.setStart(A.node,A.offset),o.removeAllRanges(),E>y?(o.addRange(l),o.extend(M.node,M.offset)):(l.setEnd(M.node,M.offset),o.addRange(l)))}}for(l=[],o=p;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)o=l[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var T7=u&&"documentMode"in document&&11>=document.documentMode,Qp=null,o_=null,Xm=null,l_=!1;function ST(o,l,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;l_||Qp==null||Qp!==Lt(y)||(y=Qp,"selectionStart"in y&&a_(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Xm&&Km(Xm,y)||(Xm=y,y=iv(o_,"onSelect"),0<y.length&&(l=new Cd("onSelect","select",null,l,p),o.push({event:l,listeners:y}),l.target=Qp)))}function nv(o,l){var p={};return p[o.toLowerCase()]=l.toLowerCase(),p["Webkit"+o]="webkit"+l,p["Moz"+o]="moz"+l,p}var Kp={animationend:nv("Animation","AnimationEnd"),animationiteration:nv("Animation","AnimationIteration"),animationstart:nv("Animation","AnimationStart"),transitionend:nv("Transition","TransitionEnd")},c_={},TT={};u&&(TT=document.createElement("div").style,"AnimationEvent"in window||(delete Kp.animationend.animation,delete Kp.animationiteration.animation,delete Kp.animationstart.animation),"TransitionEvent"in window||delete Kp.transitionend.transition);function rv(o){if(c_[o])return c_[o];if(!Kp[o])return o;var l=Kp[o],p;for(p in l)if(l.hasOwnProperty(p)&&p in TT)return c_[o]=l[p];return o}var kT=rv("animationend"),IT=rv("animationiteration"),PT=rv("animationstart"),RT=rv("transitionend"),DT=new Map,NT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fc(o,l){DT.set(o,l),i(l,[o])}for(var u_=0;u_<NT.length;u_++){var d_=NT[u_],k7=d_.toLowerCase(),I7=d_[0].toUpperCase()+d_.slice(1);Fc(k7,"on"+I7)}Fc(kT,"onAnimationEnd"),Fc(IT,"onAnimationIteration"),Fc(PT,"onAnimationStart"),Fc("dblclick","onDoubleClick"),Fc("focusin","onFocus"),Fc("focusout","onBlur"),Fc(RT,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ym="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P7=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ym));function MT(o,l,p){var y=o.type||"unknown-event";o.currentTarget=p,bt(y,l,void 0,o),o.currentTarget=null}function LT(o,l){l=(l&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],A=y.event;y=y.listeners;e:{var E=void 0;if(l)for(var M=y.length-1;0<=M;M--){var G=y[M],X=G.instance,se=G.currentTarget;if(G=G.listener,X!==E&&A.isPropagationStopped())break e;MT(A,G,se),E=X}else for(M=0;M<y.length;M++){if(G=y[M],X=G.instance,se=G.currentTarget,G=G.listener,X!==E&&A.isPropagationStopped())break e;MT(A,G,se),E=X}}}if(Zo)throw o=re,Zo=!1,re=null,o}function rn(o,l){var p=l[v_];p===void 0&&(p=l[v_]=new Set);var y=o+"__bubble";p.has(y)||(OT(l,o,2,!1),p.add(y))}function h_(o,l,p){var y=0;l&&(y|=4),OT(p,o,y,l)}var sv="_reactListening"+Math.random().toString(36).slice(2);function Jm(o){if(!o[sv]){o[sv]=!0,n.forEach(function(p){p!=="selectionchange"&&(P7.has(p)||h_(p,!1,o),h_(p,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[sv]||(l[sv]=!0,h_("selectionchange",!1,l))}}function OT(o,l,p,y){switch(Up(l)){case 1:var A=Ka;break;case 4:A=K0;break;default:A=$m}p=A.bind(null,l,p,o),A=void 0,!Va||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(A=!0),y?A!==void 0?o.addEventListener(l,p,{capture:!0,passive:A}):o.addEventListener(l,p,!0):A!==void 0?o.addEventListener(l,p,{passive:A}):o.addEventListener(l,p,!1)}function p_(o,l,p,y,A){var E=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var M=y.tag;if(M===3||M===4){var G=y.stateNode.containerInfo;if(G===A||G.nodeType===8&&G.parentNode===A)break;if(M===4)for(M=y.return;M!==null;){var X=M.tag;if((X===3||X===4)&&(X=M.stateNode.containerInfo,X===A||X.nodeType===8&&X.parentNode===A))return;M=M.return}for(;G!==null;){if(M=Sd(G),M===null)return;if(X=M.tag,X===5||X===6){y=E=M;continue e}G=G.parentNode}}y=y.return}Dp(function(){var se=E,he=Yn(p),pe=[];e:{var de=DT.get(o);if(de!==void 0){var Ie=Cd,Le=o;switch(o){case"keypress":if(bd(p)===0)break e;case"keydown":case"keyup":Ie=Rt;break;case"focusin":Le="focus",Ie=_r;break;case"focusout":Le="blur",Ie=_r;break;case"beforeblur":case"afterblur":Ie=_r;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=Hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=J0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Za;break;case kT:case IT:case PT:Ie=ev;break;case RT:Ie=Gp;break;case"scroll":Ie=$p;break;case"wheel":Ie=f7;break;case"copy":case"cut":case"paste":Ie=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Gs}var Oe=(l&4)!==0,Mn=!Oe&&o==="scroll",ee=Oe?de!==null?de+"Capture":null:de;Oe=[];for(var Y=se,ne;Y!==null;){ne=Y;var ge=ne.stateNode;if(ne.tag===5&&ge!==null&&(ne=ge,ee!==null&&(ge=Jo(Y,ee),ge!=null&&Oe.push(Zm(Y,ge,ne)))),Mn)break;Y=Y.return}0<Oe.length&&(de=new Ie(de,Le,null,p,he),pe.push({event:de,listeners:Oe}))}}if((l&7)===0){e:{if(de=o==="mouseover"||o==="pointerover",Ie=o==="mouseout"||o==="pointerout",de&&p!==Ar&&(Le=p.relatedTarget||p.fromElement)&&(Sd(Le)||Le[ol]))break e;if((Ie||de)&&(de=he.window===he?he:(de=he.ownerDocument)?de.defaultView||de.parentWindow:window,Ie?(Le=p.relatedTarget||p.toElement,Ie=se,Le=Le?Sd(Le):null,Le!==null&&(Mn=Kt(Le),Le!==Mn||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Ie=null,Le=se),Ie!==Le)){if(Oe=Hm,ge="onMouseLeave",ee="onMouseEnter",Y="mouse",(o==="pointerout"||o==="pointerover")&&(Oe=Gs,ge="onPointerLeave",ee="onPointerEnter",Y="pointer"),Mn=Ie==null?de:Jp(Ie),ne=Le==null?de:Jp(Le),de=new Oe(ge,Y+"leave",Ie,p,he),de.target=Mn,de.relatedTarget=ne,ge=null,Sd(he)===se&&(Oe=new Oe(ee,Y+"enter",Le,p,he),Oe.target=ne,Oe.relatedTarget=Mn,ge=Oe),Mn=ge,Ie&&Le)t:{for(Oe=Ie,ee=Le,Y=0,ne=Oe;ne;ne=Xp(ne))Y++;for(ne=0,ge=ee;ge;ge=Xp(ge))ne++;for(;0<Y-ne;)Oe=Xp(Oe),Y--;for(;0<ne-Y;)ee=Xp(ee),ne--;for(;Y--;){if(Oe===ee||ee!==null&&Oe===ee.alternate)break t;Oe=Xp(Oe),ee=Xp(ee)}Oe=null}else Oe=null;Ie!==null&&BT(pe,de,Ie,Oe,!1),Le!==null&&Mn!==null&&BT(pe,Mn,Le,Oe,!0)}}e:{if(de=se?Jp(se):window,Ie=de.nodeName&&de.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&de.type==="file")var je=x7;else if(yT(de))if(vT)je=C7;else{je=E7;var $e=_7}else(Ie=de.nodeName)&&Ie.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(je=b7);if(je&&(je=je(o,se))){wT(pe,je,p,he);break e}$e&&$e(o,de,se),o==="focusout"&&($e=de._wrapperState)&&$e.controlled&&de.type==="number"&&Ot(de,"number",de.value)}switch($e=se?Jp(se):window,o){case"focusin":(yT($e)||$e.contentEditable==="true")&&(Qp=$e,o_=se,Xm=null);break;case"focusout":Xm=o_=Qp=null;break;case"mousedown":l_=!0;break;case"contextmenu":case"mouseup":case"dragend":l_=!1,ST(pe,p,he);break;case"selectionchange":if(T7)break;case"keydown":case"keyup":ST(pe,p,he)}var ze;if(r_)e:{switch(o){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else qp?mT(o,p)&&(qe="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(qe="onCompositionStart");qe&&(hT&&p.locale!=="ko"&&(qp||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&qp&&(ze=X0()):(Hs=he,Vp="value"in Hs?Hs.value:Hs.textContent,qp=!0)),$e=iv(se,qe),0<$e.length&&(qe=new k(qe,o,null,p,he),pe.push({event:qe,listeners:$e}),ze?qe.data=ze:(ze=gT(p),ze!==null&&(qe.data=ze)))),(ze=g7?y7(o,p):w7(o,p))&&(se=iv(se,"onBeforeInput"),0<se.length&&(he=new k("onBeforeInput","beforeinput",null,p,he),pe.push({event:he,listeners:se}),he.data=ze))}LT(pe,l)})}function Zm(o,l,p){return{instance:o,listener:l,currentTarget:p}}function iv(o,l){for(var p=l+"Capture",y=[];o!==null;){var A=o,E=A.stateNode;A.tag===5&&E!==null&&(A=E,E=Jo(o,p),E!=null&&y.unshift(Zm(o,E,A)),E=Jo(o,l),E!=null&&y.push(Zm(o,E,A))),o=o.return}return y}function Xp(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function BT(o,l,p,y,A){for(var E=l._reactName,M=[];p!==null&&p!==y;){var G=p,X=G.alternate,se=G.stateNode;if(X!==null&&X===y)break;G.tag===5&&se!==null&&(G=se,A?(X=Jo(p,E),X!=null&&M.unshift(Zm(p,X,G))):A||(X=Jo(p,E),X!=null&&M.push(Zm(p,X,G)))),p=p.return}M.length!==0&&o.push({event:l,listeners:M})}var R7=/\r\n?/g,D7=/\u0000|\uFFFD/g;function jT(o){return(typeof o=="string"?o:""+o).replace(R7,`
`).replace(D7,"")}function av(o,l,p){if(l=jT(l),jT(o)!==l&&p)throw Error(t(425))}function ov(){}var f_=null,m_=null;function g_(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var y_=typeof setTimeout=="function"?setTimeout:void 0,N7=typeof clearTimeout=="function"?clearTimeout:void 0,UT=typeof Promise=="function"?Promise:void 0,M7=typeof queueMicrotask=="function"?queueMicrotask:typeof UT<"u"?function(o){return UT.resolve(null).then(o).catch(L7)}:y_;function L7(o){setTimeout(function(){throw o})}function w_(o,l){var p=l,y=0;do{var A=p.nextSibling;if(o.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"){if(y===0){o.removeChild(A),Ec(l);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=A}while(p);Ec(l)}function Sc(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function VT(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return o;l--}else p==="/$"&&l++}o=o.previousSibling}return null}var Yp=Math.random().toString(36).slice(2),to="__reactFiber$"+Yp,eg="__reactProps$"+Yp,ol="__reactContainer$"+Yp,v_="__reactEvents$"+Yp,O7="__reactListeners$"+Yp,B7="__reactHandles$"+Yp;function Sd(o){var l=o[to];if(l)return l;for(var p=o.parentNode;p;){if(l=p[ol]||p[to]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(o=VT(o);o!==null;){if(p=o[to])return p;o=VT(o)}return l}o=p,p=o.parentNode}return null}function tg(o){return o=o[to]||o[ol],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Jp(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function lv(o){return o[eg]||null}var A_=[],Zp=-1;function Tc(o){return{current:o}}function sn(o){0>Zp||(o.current=A_[Zp],A_[Zp]=null,Zp--)}function Yt(o,l){Zp++,A_[Zp]=o.current,o.current=l}var kc={},Vr=Tc(kc),vs=Tc(!1),Td=kc;function e2(o,l){var p=o.type.contextTypes;if(!p)return kc;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var A={},E;for(E in p)A[E]=l[E];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=A),A}function As(o){return o=o.childContextTypes,o!=null}function cv(){sn(vs),sn(Vr)}function $T(o,l,p){if(Vr.current!==kc)throw Error(t(168));Yt(Vr,l),Yt(vs,p)}function zT(o,l,p){var y=o.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var A in y)if(!(A in l))throw Error(t(108,Se(o)||"Unknown",A));return J({},p,y)}function uv(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||kc,Td=Vr.current,Yt(Vr,o),Yt(vs,vs.current),!0}function HT(o,l,p){var y=o.stateNode;if(!y)throw Error(t(169));p?(o=zT(o,l,Td),y.__reactInternalMemoizedMergedChildContext=o,sn(vs),sn(Vr),Yt(Vr,o)):sn(vs),Yt(vs,p)}var ll=null,dv=!1,x_=!1;function WT(o){ll===null?ll=[o]:ll.push(o)}function j7(o){dv=!0,WT(o)}function Ic(){if(!x_&&ll!==null){x_=!0;var o=0,l=ht;try{var p=ll;for(ht=1;o<p.length;o++){var y=p[o];do y=y(!0);while(y!==null)}ll=null,dv=!1}catch(A){throw ll!==null&&(ll=ll.slice(o+1)),ns(Np,Ic),A}finally{ht=l,x_=!1}}return null}var t2=[],n2=0,hv=null,pv=0,Ii=[],Pi=0,kd=null,cl=1,ul="";function Id(o,l){t2[n2++]=pv,t2[n2++]=hv,hv=o,pv=l}function GT(o,l,p){Ii[Pi++]=cl,Ii[Pi++]=ul,Ii[Pi++]=kd,kd=o;var y=cl;o=ul;var A=32-$s(y)-1;y&=~(1<<A),p+=1;var E=32-$s(l)+A;if(30<E){var M=A-A%5;E=(y&(1<<M)-1).toString(32),y>>=M,A-=M,cl=1<<32-$s(l)+A|p<<A|y,ul=E+o}else cl=1<<E|p<<A|y,ul=o}function __(o){o.return!==null&&(Id(o,1),GT(o,1,0))}function E_(o){for(;o===hv;)hv=t2[--n2],t2[n2]=null,pv=t2[--n2],t2[n2]=null;for(;o===kd;)kd=Ii[--Pi],Ii[Pi]=null,ul=Ii[--Pi],Ii[Pi]=null,cl=Ii[--Pi],Ii[Pi]=null}var qs=null,Qs=null,dn=!1,la=null;function qT(o,l){var p=Mi(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=o,l=o.deletions,l===null?(o.deletions=[p],o.flags|=16):l.push(p)}function QT(o,l){switch(o.tag){case 5:var p=o.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,qs=o,Qs=Sc(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,qs=o,Qs=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=kd!==null?{id:cl,overflow:ul}:null,o.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=Mi(18,null,null,0),p.stateNode=l,p.return=o,o.child=p,qs=o,Qs=null,!0):!1;default:return!1}}function b_(o){return(o.mode&1)!==0&&(o.flags&128)===0}function C_(o){if(dn){var l=Qs;if(l){var p=l;if(!QT(o,l)){if(b_(o))throw Error(t(418));l=Sc(p.nextSibling);var y=qs;l&&QT(o,l)?qT(y,p):(o.flags=o.flags&-4097|2,dn=!1,qs=o)}}else{if(b_(o))throw Error(t(418));o.flags=o.flags&-4097|2,dn=!1,qs=o}}}function KT(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;qs=o}function fv(o){if(o!==qs)return!1;if(!dn)return KT(o),dn=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!g_(o.type,o.memoizedProps)),l&&(l=Qs)){if(b_(o))throw XT(),Error(t(418));for(;l;)qT(o,l),l=Sc(l.nextSibling)}if(KT(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(l===0){Qs=Sc(o.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}o=o.nextSibling}Qs=null}}else Qs=qs?Sc(o.stateNode.nextSibling):null;return!0}function XT(){for(var o=Qs;o;)o=Sc(o.nextSibling)}function r2(){Qs=qs=null,dn=!1}function F_(o){la===null?la=[o]:la.push(o)}var U7=B.ReactCurrentBatchConfig;function ng(o,l,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,o));var A=y,E=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(M){var G=A.refs;M===null?delete G[E]:G[E]=M},l._stringRef=E,l)}if(typeof o!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,o))}return o}function mv(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function YT(o){var l=o._init;return l(o._payload)}function JT(o){function l(ee,Y){if(o){var ne=ee.deletions;ne===null?(ee.deletions=[Y],ee.flags|=16):ne.push(Y)}}function p(ee,Y){if(!o)return null;for(;Y!==null;)l(ee,Y),Y=Y.sibling;return null}function y(ee,Y){for(ee=new Map;Y!==null;)Y.key!==null?ee.set(Y.key,Y):ee.set(Y.index,Y),Y=Y.sibling;return ee}function A(ee,Y){return ee=Bc(ee,Y),ee.index=0,ee.sibling=null,ee}function E(ee,Y,ne){return ee.index=ne,o?(ne=ee.alternate,ne!==null?(ne=ne.index,ne<Y?(ee.flags|=2,Y):ne):(ee.flags|=2,Y)):(ee.flags|=1048576,Y)}function M(ee){return o&&ee.alternate===null&&(ee.flags|=2),ee}function G(ee,Y,ne,ge){return Y===null||Y.tag!==6?(Y=yE(ne,ee.mode,ge),Y.return=ee,Y):(Y=A(Y,ne),Y.return=ee,Y)}function X(ee,Y,ne,ge){var je=ne.type;return je===D?he(ee,Y,ne.props.children,ge,ne.key):Y!==null&&(Y.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===we&&YT(je)===Y.type)?(ge=A(Y,ne.props),ge.ref=ng(ee,Y,ne),ge.return=ee,ge):(ge=jv(ne.type,ne.key,ne.props,null,ee.mode,ge),ge.ref=ng(ee,Y,ne),ge.return=ee,ge)}function se(ee,Y,ne,ge){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ne.containerInfo||Y.stateNode.implementation!==ne.implementation?(Y=wE(ne,ee.mode,ge),Y.return=ee,Y):(Y=A(Y,ne.children||[]),Y.return=ee,Y)}function he(ee,Y,ne,ge,je){return Y===null||Y.tag!==7?(Y=Bd(ne,ee.mode,ge,je),Y.return=ee,Y):(Y=A(Y,ne),Y.return=ee,Y)}function pe(ee,Y,ne){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=yE(""+Y,ee.mode,ne),Y.return=ee,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case z:return ne=jv(Y.type,Y.key,Y.props,null,ee.mode,ne),ne.ref=ng(ee,null,Y),ne.return=ee,ne;case W:return Y=wE(Y,ee.mode,ne),Y.return=ee,Y;case we:var ge=Y._init;return pe(ee,ge(Y._payload),ne)}if(Pt(Y)||Z(Y))return Y=Bd(Y,ee.mode,ne,null),Y.return=ee,Y;mv(ee,Y)}return null}function de(ee,Y,ne,ge){var je=Y!==null?Y.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return je!==null?null:G(ee,Y,""+ne,ge);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case z:return ne.key===je?X(ee,Y,ne,ge):null;case W:return ne.key===je?se(ee,Y,ne,ge):null;case we:return je=ne._init,de(ee,Y,je(ne._payload),ge)}if(Pt(ne)||Z(ne))return je!==null?null:he(ee,Y,ne,ge,null);mv(ee,ne)}return null}function Ie(ee,Y,ne,ge,je){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ee=ee.get(ne)||null,G(Y,ee,""+ge,je);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case z:return ee=ee.get(ge.key===null?ne:ge.key)||null,X(Y,ee,ge,je);case W:return ee=ee.get(ge.key===null?ne:ge.key)||null,se(Y,ee,ge,je);case we:var $e=ge._init;return Ie(ee,Y,ne,$e(ge._payload),je)}if(Pt(ge)||Z(ge))return ee=ee.get(ne)||null,he(Y,ee,ge,je,null);mv(Y,ge)}return null}function Le(ee,Y,ne,ge){for(var je=null,$e=null,ze=Y,qe=Y=0,ur=null;ze!==null&&qe<ne.length;qe++){ze.index>qe?(ur=ze,ze=null):ur=ze.sibling;var xt=de(ee,ze,ne[qe],ge);if(xt===null){ze===null&&(ze=ur);break}o&&ze&&xt.alternate===null&&l(ee,ze),Y=E(xt,Y,qe),$e===null?je=xt:$e.sibling=xt,$e=xt,ze=ur}if(qe===ne.length)return p(ee,ze),dn&&Id(ee,qe),je;if(ze===null){for(;qe<ne.length;qe++)ze=pe(ee,ne[qe],ge),ze!==null&&(Y=E(ze,Y,qe),$e===null?je=ze:$e.sibling=ze,$e=ze);return dn&&Id(ee,qe),je}for(ze=y(ee,ze);qe<ne.length;qe++)ur=Ie(ze,ee,qe,ne[qe],ge),ur!==null&&(o&&ur.alternate!==null&&ze.delete(ur.key===null?qe:ur.key),Y=E(ur,Y,qe),$e===null?je=ur:$e.sibling=ur,$e=ur);return o&&ze.forEach(function(jc){return l(ee,jc)}),dn&&Id(ee,qe),je}function Oe(ee,Y,ne,ge){var je=Z(ne);if(typeof je!="function")throw Error(t(150));if(ne=je.call(ne),ne==null)throw Error(t(151));for(var $e=je=null,ze=Y,qe=Y=0,ur=null,xt=ne.next();ze!==null&&!xt.done;qe++,xt=ne.next()){ze.index>qe?(ur=ze,ze=null):ur=ze.sibling;var jc=de(ee,ze,xt.value,ge);if(jc===null){ze===null&&(ze=ur);break}o&&ze&&jc.alternate===null&&l(ee,ze),Y=E(jc,Y,qe),$e===null?je=jc:$e.sibling=jc,$e=jc,ze=ur}if(xt.done)return p(ee,ze),dn&&Id(ee,qe),je;if(ze===null){for(;!xt.done;qe++,xt=ne.next())xt=pe(ee,xt.value,ge),xt!==null&&(Y=E(xt,Y,qe),$e===null?je=xt:$e.sibling=xt,$e=xt);return dn&&Id(ee,qe),je}for(ze=y(ee,ze);!xt.done;qe++,xt=ne.next())xt=Ie(ze,ee,qe,xt.value,ge),xt!==null&&(o&&xt.alternate!==null&&ze.delete(xt.key===null?qe:xt.key),Y=E(xt,Y,qe),$e===null?je=xt:$e.sibling=xt,$e=xt);return o&&ze.forEach(function(v4){return l(ee,v4)}),dn&&Id(ee,qe),je}function Mn(ee,Y,ne,ge){if(typeof ne=="object"&&ne!==null&&ne.type===D&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case z:e:{for(var je=ne.key,$e=Y;$e!==null;){if($e.key===je){if(je=ne.type,je===D){if($e.tag===7){p(ee,$e.sibling),Y=A($e,ne.props.children),Y.return=ee,ee=Y;break e}}else if($e.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===we&&YT(je)===$e.type){p(ee,$e.sibling),Y=A($e,ne.props),Y.ref=ng(ee,$e,ne),Y.return=ee,ee=Y;break e}p(ee,$e);break}else l(ee,$e);$e=$e.sibling}ne.type===D?(Y=Bd(ne.props.children,ee.mode,ge,ne.key),Y.return=ee,ee=Y):(ge=jv(ne.type,ne.key,ne.props,null,ee.mode,ge),ge.ref=ng(ee,Y,ne),ge.return=ee,ee=ge)}return M(ee);case W:e:{for($e=ne.key;Y!==null;){if(Y.key===$e)if(Y.tag===4&&Y.stateNode.containerInfo===ne.containerInfo&&Y.stateNode.implementation===ne.implementation){p(ee,Y.sibling),Y=A(Y,ne.children||[]),Y.return=ee,ee=Y;break e}else{p(ee,Y);break}else l(ee,Y);Y=Y.sibling}Y=wE(ne,ee.mode,ge),Y.return=ee,ee=Y}return M(ee);case we:return $e=ne._init,Mn(ee,Y,$e(ne._payload),ge)}if(Pt(ne))return Le(ee,Y,ne,ge);if(Z(ne))return Oe(ee,Y,ne,ge);mv(ee,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,Y!==null&&Y.tag===6?(p(ee,Y.sibling),Y=A(Y,ne),Y.return=ee,ee=Y):(p(ee,Y),Y=yE(ne,ee.mode,ge),Y.return=ee,ee=Y),M(ee)):p(ee,Y)}return Mn}var s2=JT(!0),ZT=JT(!1),gv=Tc(null),yv=null,i2=null,S_=null;function T_(){S_=i2=yv=null}function k_(o){var l=gv.current;sn(gv),o._currentValue=l}function I_(o,l,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),o===p)break;o=o.return}}function a2(o,l){yv=o,S_=i2=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(xs=!0),o.firstContext=null)}function Ri(o){var l=o._currentValue;if(S_!==o)if(o={context:o,memoizedValue:l,next:null},i2===null){if(yv===null)throw Error(t(308));i2=o,yv.dependencies={lanes:0,firstContext:o}}else i2=i2.next=o;return l}var Pd=null;function P_(o){Pd===null?Pd=[o]:Pd.push(o)}function ek(o,l,p,y){var A=l.interleaved;return A===null?(p.next=p,P_(l)):(p.next=A.next,A.next=p),l.interleaved=p,dl(o,y)}function dl(o,l){o.lanes|=l;var p=o.alternate;for(p!==null&&(p.lanes|=l),p=o,o=o.return;o!==null;)o.childLanes|=l,p=o.alternate,p!==null&&(p.childLanes|=l),p=o,o=o.return;return p.tag===3?p.stateNode:null}var Pc=!1;function R_(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tk(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function hl(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Rc(o,l,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(yt&2)!==0){var A=y.pending;return A===null?l.next=l:(l.next=A.next,A.next=l),y.pending=l,dl(o,p)}return A=y.interleaved,A===null?(l.next=l,P_(y)):(l.next=A.next,A.next=l),y.interleaved=l,dl(o,p)}function wv(o,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var y=l.lanes;y&=o.pendingLanes,p|=y,l.lanes=p,Om(o,p)}}function nk(o,l){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var A=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var M={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};E===null?A=E=M:E=E.next=M,p=p.next}while(p!==null);E===null?A=E=l:E=E.next=l}else A=E=l;p={baseState:y.baseState,firstBaseUpdate:A,lastBaseUpdate:E,shared:y.shared,effects:y.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=l:o.next=l,p.lastBaseUpdate=l}function vv(o,l,p,y){var A=o.updateQueue;Pc=!1;var E=A.firstBaseUpdate,M=A.lastBaseUpdate,G=A.shared.pending;if(G!==null){A.shared.pending=null;var X=G,se=X.next;X.next=null,M===null?E=se:M.next=se,M=X;var he=o.alternate;he!==null&&(he=he.updateQueue,G=he.lastBaseUpdate,G!==M&&(G===null?he.firstBaseUpdate=se:G.next=se,he.lastBaseUpdate=X))}if(E!==null){var pe=A.baseState;M=0,he=se=X=null,G=E;do{var de=G.lane,Ie=G.eventTime;if((y&de)===de){he!==null&&(he=he.next={eventTime:Ie,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Le=o,Oe=G;switch(de=l,Ie=p,Oe.tag){case 1:if(Le=Oe.payload,typeof Le=="function"){pe=Le.call(Ie,pe,de);break e}pe=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Oe.payload,de=typeof Le=="function"?Le.call(Ie,pe,de):Le,de==null)break e;pe=J({},pe,de);break e;case 2:Pc=!0}}G.callback!==null&&G.lane!==0&&(o.flags|=64,de=A.effects,de===null?A.effects=[G]:de.push(G))}else Ie={eventTime:Ie,lane:de,tag:G.tag,payload:G.payload,callback:G.callback,next:null},he===null?(se=he=Ie,X=pe):he=he.next=Ie,M|=de;if(G=G.next,G===null){if(G=A.shared.pending,G===null)break;de=G,G=de.next,de.next=null,A.lastBaseUpdate=de,A.shared.pending=null}}while(!0);if(he===null&&(X=pe),A.baseState=X,A.firstBaseUpdate=se,A.lastBaseUpdate=he,l=A.shared.interleaved,l!==null){A=l;do M|=A.lane,A=A.next;while(A!==l)}else E===null&&(A.shared.lanes=0);Nd|=M,o.lanes=M,o.memoizedState=pe}}function rk(o,l,p){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var y=o[l],A=y.callback;if(A!==null){if(y.callback=null,y=p,typeof A!="function")throw Error(t(191,A));A.call(y)}}}var rg={},no=Tc(rg),sg=Tc(rg),ig=Tc(rg);function Rd(o){if(o===rg)throw Error(t(174));return o}function D_(o,l){switch(Yt(ig,l),Yt(sg,o),Yt(no,rg),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Qt(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Qt(l,o)}sn(no),Yt(no,l)}function o2(){sn(no),sn(sg),sn(ig)}function sk(o){Rd(ig.current);var l=Rd(no.current),p=Qt(l,o.type);l!==p&&(Yt(sg,o),Yt(no,p))}function N_(o){sg.current===o&&(sn(no),sn(sg))}var wn=Tc(0);function Av(o){for(var l=o;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var M_=[];function L_(){for(var o=0;o<M_.length;o++)M_[o]._workInProgressVersionPrimary=null;M_.length=0}var xv=B.ReactCurrentDispatcher,O_=B.ReactCurrentBatchConfig,Dd=0,vn=null,Jn=null,lr=null,_v=!1,ag=!1,og=0,V7=0;function $r(){throw Error(t(321))}function B_(o,l){if(l===null)return!1;for(var p=0;p<l.length&&p<o.length;p++)if(!oa(o[p],l[p]))return!1;return!0}function j_(o,l,p,y,A,E){if(Dd=E,vn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,xv.current=o===null||o.memoizedState===null?W7:G7,o=p(y,A),ag){E=0;do{if(ag=!1,og=0,25<=E)throw Error(t(301));E+=1,lr=Jn=null,l.updateQueue=null,xv.current=q7,o=p(y,A)}while(ag)}if(xv.current=Cv,l=Jn!==null&&Jn.next!==null,Dd=0,lr=Jn=vn=null,_v=!1,l)throw Error(t(300));return o}function U_(){var o=og!==0;return og=0,o}function ro(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?vn.memoizedState=lr=o:lr=lr.next=o,lr}function Di(){if(Jn===null){var o=vn.alternate;o=o!==null?o.memoizedState:null}else o=Jn.next;var l=lr===null?vn.memoizedState:lr.next;if(l!==null)lr=l,Jn=o;else{if(o===null)throw Error(t(310));Jn=o,o={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},lr===null?vn.memoizedState=lr=o:lr=lr.next=o}return lr}function lg(o,l){return typeof l=="function"?l(o):l}function V_(o){var l=Di(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var y=Jn,A=y.baseQueue,E=p.pending;if(E!==null){if(A!==null){var M=A.next;A.next=E.next,E.next=M}y.baseQueue=A=E,p.pending=null}if(A!==null){E=A.next,y=y.baseState;var G=M=null,X=null,se=E;do{var he=se.lane;if((Dd&he)===he)X!==null&&(X=X.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),y=se.hasEagerState?se.eagerState:o(y,se.action);else{var pe={lane:he,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};X===null?(G=X=pe,M=y):X=X.next=pe,vn.lanes|=he,Nd|=he}se=se.next}while(se!==null&&se!==E);X===null?M=y:X.next=G,oa(y,l.memoizedState)||(xs=!0),l.memoizedState=y,l.baseState=M,l.baseQueue=X,p.lastRenderedState=y}if(o=p.interleaved,o!==null){A=o;do E=A.lane,vn.lanes|=E,Nd|=E,A=A.next;while(A!==o)}else A===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function $_(o){var l=Di(),p=l.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=o;var y=p.dispatch,A=p.pending,E=l.memoizedState;if(A!==null){p.pending=null;var M=A=A.next;do E=o(E,M.action),M=M.next;while(M!==A);oa(E,l.memoizedState)||(xs=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),p.lastRenderedState=E}return[E,y]}function ik(){}function ak(o,l){var p=vn,y=Di(),A=l(),E=!oa(y.memoizedState,A);if(E&&(y.memoizedState=A,xs=!0),y=y.queue,z_(ck.bind(null,p,y,o),[o]),y.getSnapshot!==l||E||lr!==null&&lr.memoizedState.tag&1){if(p.flags|=2048,cg(9,lk.bind(null,p,y,A,l),void 0,null),cr===null)throw Error(t(349));(Dd&30)!==0||ok(p,l,A)}return A}function ok(o,l,p){o.flags|=16384,o={getSnapshot:l,value:p},l=vn.updateQueue,l===null?(l={lastEffect:null,stores:null},vn.updateQueue=l,l.stores=[o]):(p=l.stores,p===null?l.stores=[o]:p.push(o))}function lk(o,l,p,y){l.value=p,l.getSnapshot=y,uk(l)&&dk(o)}function ck(o,l,p){return p(function(){uk(l)&&dk(o)})}function uk(o){var l=o.getSnapshot;o=o.value;try{var p=l();return!oa(o,p)}catch{return!0}}function dk(o){var l=dl(o,1);l!==null&&ha(l,o,1,-1)}function hk(o){var l=ro();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lg,lastRenderedState:o},l.queue=o,o=o.dispatch=H7.bind(null,vn,o),[l.memoizedState,o]}function cg(o,l,p,y){return o={tag:o,create:l,destroy:p,deps:y,next:null},l=vn.updateQueue,l===null?(l={lastEffect:null,stores:null},vn.updateQueue=l,l.lastEffect=o.next=o):(p=l.lastEffect,p===null?l.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,l.lastEffect=o)),o}function pk(){return Di().memoizedState}function Ev(o,l,p,y){var A=ro();vn.flags|=o,A.memoizedState=cg(1|l,p,void 0,y===void 0?null:y)}function bv(o,l,p,y){var A=Di();y=y===void 0?null:y;var E=void 0;if(Jn!==null){var M=Jn.memoizedState;if(E=M.destroy,y!==null&&B_(y,M.deps)){A.memoizedState=cg(l,p,E,y);return}}vn.flags|=o,A.memoizedState=cg(1|l,p,E,y)}function fk(o,l){return Ev(8390656,8,o,l)}function z_(o,l){return bv(2048,8,o,l)}function mk(o,l){return bv(4,2,o,l)}function gk(o,l){return bv(4,4,o,l)}function yk(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function wk(o,l,p){return p=p!=null?p.concat([o]):null,bv(4,4,yk.bind(null,l,o),p)}function H_(){}function vk(o,l){var p=Di();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&B_(l,y[1])?y[0]:(p.memoizedState=[o,l],o)}function Ak(o,l){var p=Di();l=l===void 0?null:l;var y=p.memoizedState;return y!==null&&l!==null&&B_(l,y[1])?y[0]:(o=o(),p.memoizedState=[o,l],o)}function xk(o,l,p){return(Dd&21)===0?(o.baseState&&(o.baseState=!1,xs=!0),o.memoizedState=p):(oa(p,l)||(p=Mm(),vn.lanes|=p,Nd|=p,o.baseState=!0),l)}function $7(o,l){var p=ht;ht=p!==0&&4>p?p:4,o(!0);var y=O_.transition;O_.transition={};try{o(!1),l()}finally{ht=p,O_.transition=y}}function _k(){return Di().memoizedState}function z7(o,l,p){var y=Lc(o);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},Ek(o))bk(l,p);else if(p=ek(o,l,p,y),p!==null){var A=ss();ha(p,o,y,A),Ck(p,l,y)}}function H7(o,l,p){var y=Lc(o),A={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ek(o))bk(l,A);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var M=l.lastRenderedState,G=E(M,p);if(A.hasEagerState=!0,A.eagerState=G,oa(G,M)){var X=l.interleaved;X===null?(A.next=A,P_(l)):(A.next=X.next,X.next=A),l.interleaved=A;return}}catch{}finally{}p=ek(o,l,A,y),p!==null&&(A=ss(),ha(p,o,y,A),Ck(p,l,y))}}function Ek(o){var l=o.alternate;return o===vn||l!==null&&l===vn}function bk(o,l){ag=_v=!0;var p=o.pending;p===null?l.next=l:(l.next=p.next,p.next=l),o.pending=l}function Ck(o,l,p){if((p&4194240)!==0){var y=l.lanes;y&=o.pendingLanes,p|=y,l.lanes=p,Om(o,p)}}var Cv={readContext:Ri,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useInsertionEffect:$r,useLayoutEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useMutableSource:$r,useSyncExternalStore:$r,useId:$r,unstable_isNewReconciler:!1},W7={readContext:Ri,useCallback:function(o,l){return ro().memoizedState=[o,l===void 0?null:l],o},useContext:Ri,useEffect:fk,useImperativeHandle:function(o,l,p){return p=p!=null?p.concat([o]):null,Ev(4194308,4,yk.bind(null,l,o),p)},useLayoutEffect:function(o,l){return Ev(4194308,4,o,l)},useInsertionEffect:function(o,l){return Ev(4,2,o,l)},useMemo:function(o,l){var p=ro();return l=l===void 0?null:l,o=o(),p.memoizedState=[o,l],o},useReducer:function(o,l,p){var y=ro();return l=p!==void 0?p(l):l,y.memoizedState=y.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},y.queue=o,o=o.dispatch=z7.bind(null,vn,o),[y.memoizedState,o]},useRef:function(o){var l=ro();return o={current:o},l.memoizedState=o},useState:hk,useDebugValue:H_,useDeferredValue:function(o){return ro().memoizedState=o},useTransition:function(){var o=hk(!1),l=o[0];return o=$7.bind(null,o[1]),ro().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,p){var y=vn,A=ro();if(dn){if(p===void 0)throw Error(t(407));p=p()}else{if(p=l(),cr===null)throw Error(t(349));(Dd&30)!==0||ok(y,l,p)}A.memoizedState=p;var E={value:p,getSnapshot:l};return A.queue=E,fk(ck.bind(null,y,E,o),[o]),y.flags|=2048,cg(9,lk.bind(null,y,E,p,l),void 0,null),p},useId:function(){var o=ro(),l=cr.identifierPrefix;if(dn){var p=ul,y=cl;p=(y&~(1<<32-$s(y)-1)).toString(32)+p,l=":"+l+"R"+p,p=og++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=V7++,l=":"+l+"r"+p.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},G7={readContext:Ri,useCallback:vk,useContext:Ri,useEffect:z_,useImperativeHandle:wk,useInsertionEffect:mk,useLayoutEffect:gk,useMemo:Ak,useReducer:V_,useRef:pk,useState:function(){return V_(lg)},useDebugValue:H_,useDeferredValue:function(o){var l=Di();return xk(l,Jn.memoizedState,o)},useTransition:function(){var o=V_(lg)[0],l=Di().memoizedState;return[o,l]},useMutableSource:ik,useSyncExternalStore:ak,useId:_k,unstable_isNewReconciler:!1},q7={readContext:Ri,useCallback:vk,useContext:Ri,useEffect:z_,useImperativeHandle:wk,useInsertionEffect:mk,useLayoutEffect:gk,useMemo:Ak,useReducer:$_,useRef:pk,useState:function(){return $_(lg)},useDebugValue:H_,useDeferredValue:function(o){var l=Di();return Jn===null?l.memoizedState=o:xk(l,Jn.memoizedState,o)},useTransition:function(){var o=$_(lg)[0],l=Di().memoizedState;return[o,l]},useMutableSource:ik,useSyncExternalStore:ak,useId:_k,unstable_isNewReconciler:!1};function ca(o,l){if(o&&o.defaultProps){l=J({},l),o=o.defaultProps;for(var p in o)l[p]===void 0&&(l[p]=o[p]);return l}return l}function W_(o,l,p,y){l=o.memoizedState,p=p(y,l),p=p==null?l:J({},l,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Fv={isMounted:function(o){return(o=o._reactInternals)?Kt(o)===o:!1},enqueueSetState:function(o,l,p){o=o._reactInternals;var y=ss(),A=Lc(o),E=hl(y,A);E.payload=l,p!=null&&(E.callback=p),l=Rc(o,E,A),l!==null&&(ha(l,o,A,y),wv(l,o,A))},enqueueReplaceState:function(o,l,p){o=o._reactInternals;var y=ss(),A=Lc(o),E=hl(y,A);E.tag=1,E.payload=l,p!=null&&(E.callback=p),l=Rc(o,E,A),l!==null&&(ha(l,o,A,y),wv(l,o,A))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var p=ss(),y=Lc(o),A=hl(p,y);A.tag=2,l!=null&&(A.callback=l),l=Rc(o,A,y),l!==null&&(ha(l,o,y,p),wv(l,o,y))}};function Fk(o,l,p,y,A,E,M){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,E,M):l.prototype&&l.prototype.isPureReactComponent?!Km(p,y)||!Km(A,E):!0}function Sk(o,l,p){var y=!1,A=kc,E=l.contextType;return typeof E=="object"&&E!==null?E=Ri(E):(A=As(l)?Td:Vr.current,y=l.contextTypes,E=(y=y!=null)?e2(o,A):kc),l=new l(p,E),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Fv,o.stateNode=l,l._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=A,o.__reactInternalMemoizedMaskedChildContext=E),l}function Tk(o,l,p,y){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,y),l.state!==o&&Fv.enqueueReplaceState(l,l.state,null)}function G_(o,l,p,y){var A=o.stateNode;A.props=p,A.state=o.memoizedState,A.refs={},R_(o);var E=l.contextType;typeof E=="object"&&E!==null?A.context=Ri(E):(E=As(l)?Td:Vr.current,A.context=e2(o,E)),A.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(W_(o,l,E,p),A.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(l=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),l!==A.state&&Fv.enqueueReplaceState(A,A.state,null),vv(o,p,A,y),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308)}function l2(o,l){try{var p="",y=l;do p+=xe(y),y=y.return;while(y);var A=p}catch(E){A=`
Error generating stack: `+E.message+`
`+E.stack}return{value:o,source:l,stack:A,digest:null}}function q_(o,l,p){return{value:o,source:null,stack:p??null,digest:l??null}}function Q_(o,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var Q7=typeof WeakMap=="function"?WeakMap:Map;function kk(o,l,p){p=hl(-1,p),p.tag=3,p.payload={element:null};var y=l.value;return p.callback=function(){Dv||(Dv=!0,cE=y),Q_(o,l)},p}function Ik(o,l,p){p=hl(-1,p),p.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var A=l.value;p.payload=function(){return y(A)},p.callback=function(){Q_(o,l)}}var E=o.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(p.callback=function(){Q_(o,l),typeof y!="function"&&(Nc===null?Nc=new Set([this]):Nc.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),p}function Pk(o,l,p){var y=o.pingCache;if(y===null){y=o.pingCache=new Q7;var A=new Set;y.set(l,A)}else A=y.get(l),A===void 0&&(A=new Set,y.set(l,A));A.has(p)||(A.add(p),o=l4.bind(null,o,l,p),l.then(o,o))}function Rk(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Dk(o,l,p,y,A){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=hl(-1,1),l.tag=2,Rc(p,l,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=A,o)}var K7=B.ReactCurrentOwner,xs=!1;function rs(o,l,p,y){l.child=o===null?ZT(l,null,p,y):s2(l,o.child,p,y)}function Nk(o,l,p,y,A){p=p.render;var E=l.ref;return a2(l,A),y=j_(o,l,p,y,E,A),p=U_(),o!==null&&!xs?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~A,pl(o,l,A)):(dn&&p&&__(l),l.flags|=1,rs(o,l,y,A),l.child)}function Mk(o,l,p,y,A){if(o===null){var E=p.type;return typeof E=="function"&&!gE(E)&&E.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=E,Lk(o,l,E,y,A)):(o=jv(p.type,null,y,l,l.mode,A),o.ref=l.ref,o.return=l,l.child=o)}if(E=o.child,(o.lanes&A)===0){var M=E.memoizedProps;if(p=p.compare,p=p!==null?p:Km,p(M,y)&&o.ref===l.ref)return pl(o,l,A)}return l.flags|=1,o=Bc(E,y),o.ref=l.ref,o.return=l,l.child=o}function Lk(o,l,p,y,A){if(o!==null){var E=o.memoizedProps;if(Km(E,y)&&o.ref===l.ref)if(xs=!1,l.pendingProps=y=E,(o.lanes&A)!==0)(o.flags&131072)!==0&&(xs=!0);else return l.lanes=o.lanes,pl(o,l,A)}return K_(o,l,p,y,A)}function Ok(o,l,p){var y=l.pendingProps,A=y.children,E=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(u2,Ks),Ks|=p;else{if((p&1073741824)===0)return o=E!==null?E.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Yt(u2,Ks),Ks|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=E!==null?E.baseLanes:p,Yt(u2,Ks),Ks|=y}else E!==null?(y=E.baseLanes|p,l.memoizedState=null):y=p,Yt(u2,Ks),Ks|=y;return rs(o,l,A,p),l.child}function Bk(o,l){var p=l.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function K_(o,l,p,y,A){var E=As(p)?Td:Vr.current;return E=e2(l,E),a2(l,A),p=j_(o,l,p,y,E,A),y=U_(),o!==null&&!xs?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~A,pl(o,l,A)):(dn&&y&&__(l),l.flags|=1,rs(o,l,p,A),l.child)}function jk(o,l,p,y,A){if(As(p)){var E=!0;uv(l)}else E=!1;if(a2(l,A),l.stateNode===null)Tv(o,l),Sk(l,p,y),G_(l,p,y,A),y=!0;else if(o===null){var M=l.stateNode,G=l.memoizedProps;M.props=G;var X=M.context,se=p.contextType;typeof se=="object"&&se!==null?se=Ri(se):(se=As(p)?Td:Vr.current,se=e2(l,se));var he=p.getDerivedStateFromProps,pe=typeof he=="function"||typeof M.getSnapshotBeforeUpdate=="function";pe||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(G!==y||X!==se)&&Tk(l,M,y,se),Pc=!1;var de=l.memoizedState;M.state=de,vv(l,y,M,A),X=l.memoizedState,G!==y||de!==X||vs.current||Pc?(typeof he=="function"&&(W_(l,p,he,y),X=l.memoizedState),(G=Pc||Fk(l,p,G,y,de,X,se))?(pe||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=X),M.props=y,M.state=X,M.context=se,y=G):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{M=l.stateNode,tk(o,l),G=l.memoizedProps,se=l.type===l.elementType?G:ca(l.type,G),M.props=se,pe=l.pendingProps,de=M.context,X=p.contextType,typeof X=="object"&&X!==null?X=Ri(X):(X=As(p)?Td:Vr.current,X=e2(l,X));var Ie=p.getDerivedStateFromProps;(he=typeof Ie=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(G!==pe||de!==X)&&Tk(l,M,y,X),Pc=!1,de=l.memoizedState,M.state=de,vv(l,y,M,A);var Le=l.memoizedState;G!==pe||de!==Le||vs.current||Pc?(typeof Ie=="function"&&(W_(l,p,Ie,y),Le=l.memoizedState),(se=Pc||Fk(l,p,se,y,de,Le,X)||!1)?(he||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(y,Le,X),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(y,Le,X)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||G===o.memoizedProps&&de===o.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&de===o.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Le),M.props=y,M.state=Le,M.context=X,y=se):(typeof M.componentDidUpdate!="function"||G===o.memoizedProps&&de===o.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===o.memoizedProps&&de===o.memoizedState||(l.flags|=1024),y=!1)}return X_(o,l,p,y,E,A)}function X_(o,l,p,y,A,E){Bk(o,l);var M=(l.flags&128)!==0;if(!y&&!M)return A&&HT(l,p,!1),pl(o,l,E);y=l.stateNode,K7.current=l;var G=M&&typeof p.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,o!==null&&M?(l.child=s2(l,o.child,null,E),l.child=s2(l,null,G,E)):rs(o,l,G,E),l.memoizedState=y.state,A&&HT(l,p,!0),l.child}function Uk(o){var l=o.stateNode;l.pendingContext?$T(o,l.pendingContext,l.pendingContext!==l.context):l.context&&$T(o,l.context,!1),D_(o,l.containerInfo)}function Vk(o,l,p,y,A){return r2(),F_(A),l.flags|=256,rs(o,l,p,y),l.child}var Y_={dehydrated:null,treeContext:null,retryLane:0};function J_(o){return{baseLanes:o,cachePool:null,transitions:null}}function $k(o,l,p){var y=l.pendingProps,A=wn.current,E=!1,M=(l.flags&128)!==0,G;if((G=M)||(G=o!==null&&o.memoizedState===null?!1:(A&2)!==0),G?(E=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(A|=1),Yt(wn,A&1),o===null)return C_(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(M=y.children,o=y.fallback,E?(y=l.mode,E=l.child,M={mode:"hidden",children:M},(y&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=M):E=Uv(M,y,0,null),o=Bd(o,y,p,null),E.return=l,o.return=l,E.sibling=o,l.child=E,l.child.memoizedState=J_(p),l.memoizedState=Y_,o):Z_(l,M));if(A=o.memoizedState,A!==null&&(G=A.dehydrated,G!==null))return X7(o,l,M,y,G,A,p);if(E){E=y.fallback,M=l.mode,A=o.child,G=A.sibling;var X={mode:"hidden",children:y.children};return(M&1)===0&&l.child!==A?(y=l.child,y.childLanes=0,y.pendingProps=X,l.deletions=null):(y=Bc(A,X),y.subtreeFlags=A.subtreeFlags&14680064),G!==null?E=Bc(G,E):(E=Bd(E,M,p,null),E.flags|=2),E.return=l,y.return=l,y.sibling=E,l.child=y,y=E,E=l.child,M=o.child.memoizedState,M=M===null?J_(p):{baseLanes:M.baseLanes|p,cachePool:null,transitions:M.transitions},E.memoizedState=M,E.childLanes=o.childLanes&~p,l.memoizedState=Y_,y}return E=o.child,o=E.sibling,y=Bc(E,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=p),y.return=l,y.sibling=null,o!==null&&(p=l.deletions,p===null?(l.deletions=[o],l.flags|=16):p.push(o)),l.child=y,l.memoizedState=null,y}function Z_(o,l){return l=Uv({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Sv(o,l,p,y){return y!==null&&F_(y),s2(l,o.child,null,p),o=Z_(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function X7(o,l,p,y,A,E,M){if(p)return l.flags&256?(l.flags&=-257,y=q_(Error(t(422))),Sv(o,l,M,y)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(E=y.fallback,A=l.mode,y=Uv({mode:"visible",children:y.children},A,0,null),E=Bd(E,A,M,null),E.flags|=2,y.return=l,E.return=l,y.sibling=E,l.child=y,(l.mode&1)!==0&&s2(l,o.child,null,M),l.child.memoizedState=J_(M),l.memoizedState=Y_,E);if((l.mode&1)===0)return Sv(o,l,M,null);if(A.data==="$!"){if(y=A.nextSibling&&A.nextSibling.dataset,y)var G=y.dgst;return y=G,E=Error(t(419)),y=q_(E,y,void 0),Sv(o,l,M,y)}if(G=(M&o.childLanes)!==0,xs||G){if(y=cr,y!==null){switch(M&-M){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(y.suspendedLanes|M))!==0?0:A,A!==0&&A!==E.retryLane&&(E.retryLane=A,dl(o,A),ha(y,o,A,-1))}return mE(),y=q_(Error(t(421))),Sv(o,l,M,y)}return A.data==="$?"?(l.flags|=128,l.child=o.child,l=c4.bind(null,o),A._reactRetry=l,null):(o=E.treeContext,Qs=Sc(A.nextSibling),qs=l,dn=!0,la=null,o!==null&&(Ii[Pi++]=cl,Ii[Pi++]=ul,Ii[Pi++]=kd,cl=o.id,ul=o.overflow,kd=l),l=Z_(l,y.children),l.flags|=4096,l)}function zk(o,l,p){o.lanes|=l;var y=o.alternate;y!==null&&(y.lanes|=l),I_(o.return,l,p)}function eE(o,l,p,y,A){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:A}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=p,E.tailMode=A)}function Hk(o,l,p){var y=l.pendingProps,A=y.revealOrder,E=y.tail;if(rs(o,l,y.children,p),y=wn.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&zk(o,p,l);else if(o.tag===19)zk(o,p,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(Yt(wn,y),(l.mode&1)===0)l.memoizedState=null;else switch(A){case"forwards":for(p=l.child,A=null;p!==null;)o=p.alternate,o!==null&&Av(o)===null&&(A=p),p=p.sibling;p=A,p===null?(A=l.child,l.child=null):(A=p.sibling,p.sibling=null),eE(l,!1,A,p,E);break;case"backwards":for(p=null,A=l.child,l.child=null;A!==null;){if(o=A.alternate,o!==null&&Av(o)===null){l.child=A;break}o=A.sibling,A.sibling=p,p=A,A=o}eE(l,!0,p,null,E);break;case"together":eE(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Tv(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function pl(o,l,p){if(o!==null&&(l.dependencies=o.dependencies),Nd|=l.lanes,(p&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,p=Bc(o,o.pendingProps),l.child=p,p.return=l;o.sibling!==null;)o=o.sibling,p=p.sibling=Bc(o,o.pendingProps),p.return=l;p.sibling=null}return l.child}function Y7(o,l,p){switch(l.tag){case 3:Uk(l),r2();break;case 5:sk(l);break;case 1:As(l.type)&&uv(l);break;case 4:D_(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,A=l.memoizedProps.value;Yt(gv,y._currentValue),y._currentValue=A;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(Yt(wn,wn.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?$k(o,l,p):(Yt(wn,wn.current&1),o=pl(o,l,p),o!==null?o.sibling:null);Yt(wn,wn.current&1);break;case 19:if(y=(p&l.childLanes)!==0,(o.flags&128)!==0){if(y)return Hk(o,l,p);l.flags|=128}if(A=l.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Yt(wn,wn.current),y)break;return null;case 22:case 23:return l.lanes=0,Ok(o,l,p)}return pl(o,l,p)}var Wk,tE,Gk,qk;Wk=function(o,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},tE=function(){},Gk=function(o,l,p,y){var A=o.memoizedProps;if(A!==y){o=l.stateNode,Rd(no.current);var E=null;switch(p){case"input":A=yn(o,A),y=yn(o,y),E=[];break;case"select":A=J({},A,{value:void 0}),y=J({},y,{value:void 0}),E=[];break;case"textarea":A=fd(o,A),y=fd(o,y),E=[];break;default:typeof A.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=ov)}vr(p,y);var M;p=null;for(se in A)if(!y.hasOwnProperty(se)&&A.hasOwnProperty(se)&&A[se]!=null)if(se==="style"){var G=A[se];for(M in G)G.hasOwnProperty(M)&&(p||(p={}),p[M]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(r.hasOwnProperty(se)?E||(E=[]):(E=E||[]).push(se,null));for(se in y){var X=y[se];if(G=A!=null?A[se]:void 0,y.hasOwnProperty(se)&&X!==G&&(X!=null||G!=null))if(se==="style")if(G){for(M in G)!G.hasOwnProperty(M)||X&&X.hasOwnProperty(M)||(p||(p={}),p[M]="");for(M in X)X.hasOwnProperty(M)&&G[M]!==X[M]&&(p||(p={}),p[M]=X[M])}else p||(E||(E=[]),E.push(se,p)),p=X;else se==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,G=G?G.__html:void 0,X!=null&&G!==X&&(E=E||[]).push(se,X)):se==="children"?typeof X!="string"&&typeof X!="number"||(E=E||[]).push(se,""+X):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(r.hasOwnProperty(se)?(X!=null&&se==="onScroll"&&rn("scroll",o),E||G===X||(E=[])):(E=E||[]).push(se,X))}p&&(E=E||[]).push("style",p);var se=E;(l.updateQueue=se)&&(l.flags|=4)}},qk=function(o,l,p,y){p!==y&&(l.flags|=4)};function ug(o,l){if(!dn)switch(o.tailMode){case"hidden":l=o.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function zr(o){var l=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(l)for(var A=o.child;A!==null;)p|=A.lanes|A.childLanes,y|=A.subtreeFlags&14680064,y|=A.flags&14680064,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)p|=A.lanes|A.childLanes,y|=A.subtreeFlags,y|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=y,o.childLanes=p,l}function J7(o,l,p){var y=l.pendingProps;switch(E_(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zr(l),null;case 1:return As(l.type)&&cv(),zr(l),null;case 3:return y=l.stateNode,o2(),sn(vs),sn(Vr),L_(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(fv(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,la!==null&&(hE(la),la=null))),tE(o,l),zr(l),null;case 5:N_(l);var A=Rd(ig.current);if(p=l.type,o!==null&&l.stateNode!=null)Gk(o,l,p,y,A),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return zr(l),null}if(o=Rd(no.current),fv(l)){y=l.stateNode,p=l.type;var E=l.memoizedProps;switch(y[to]=l,y[eg]=E,o=(l.mode&1)!==0,p){case"dialog":rn("cancel",y),rn("close",y);break;case"iframe":case"object":case"embed":rn("load",y);break;case"video":case"audio":for(A=0;A<Ym.length;A++)rn(Ym[A],y);break;case"source":rn("error",y);break;case"img":case"image":case"link":rn("error",y),rn("load",y);break;case"details":rn("toggle",y);break;case"input":Bs(y,E),rn("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!E.multiple},rn("invalid",y);break;case"textarea":gs(y,E),rn("invalid",y)}vr(p,E),A=null;for(var M in E)if(E.hasOwnProperty(M)){var G=E[M];M==="children"?typeof G=="string"?y.textContent!==G&&(E.suppressHydrationWarning!==!0&&av(y.textContent,G,o),A=["children",G]):typeof G=="number"&&y.textContent!==""+G&&(E.suppressHydrationWarning!==!0&&av(y.textContent,G,o),A=["children",""+G]):r.hasOwnProperty(M)&&G!=null&&M==="onScroll"&&rn("scroll",y)}switch(p){case"input":st(y),La(y,E,!0);break;case"textarea":st(y),Bt(y);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(y.onclick=ov)}y=A,l.updateQueue=y,y!==null&&(l.flags|=4)}else{M=A.nodeType===9?A:A.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=sa(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=M.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=M.createElement(p,{is:y.is}):(o=M.createElement(p),p==="select"&&(M=o,y.multiple?M.multiple=!0:y.size&&(M.size=y.size))):o=M.createElementNS(o,p),o[to]=l,o[eg]=y,Wk(o,l,!1,!1),l.stateNode=o;e:{switch(M=Ba(p,y),p){case"dialog":rn("cancel",o),rn("close",o),A=y;break;case"iframe":case"object":case"embed":rn("load",o),A=y;break;case"video":case"audio":for(A=0;A<Ym.length;A++)rn(Ym[A],o);A=y;break;case"source":rn("error",o),A=y;break;case"img":case"image":case"link":rn("error",o),rn("load",o),A=y;break;case"details":rn("toggle",o),A=y;break;case"input":Bs(o,y),A=yn(o,y),rn("invalid",o);break;case"option":A=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},A=J({},y,{value:void 0}),rn("invalid",o);break;case"textarea":gs(o,y),A=fd(o,y),rn("invalid",o);break;default:A=y}vr(p,A),G=A;for(E in G)if(G.hasOwnProperty(E)){var X=G[E];E==="style"?Ci(o,X):E==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&js(o,X)):E==="children"?typeof X=="string"?(p!=="textarea"||X!=="")&&ws(o,X):typeof X=="number"&&ws(o,""+X):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(r.hasOwnProperty(E)?X!=null&&E==="onScroll"&&rn("scroll",o):X!=null&&R(o,E,X,M))}switch(p){case"input":st(o),La(o,y,!1);break;case"textarea":st(o),Bt(o);break;case"option":y.value!=null&&o.setAttribute("value",""+Ue(y.value));break;case"select":o.multiple=!!y.multiple,E=y.value,E!=null?ln(o,!!y.multiple,E,!1):y.defaultValue!=null&&ln(o,!!y.multiple,y.defaultValue,!0);break;default:typeof A.onClick=="function"&&(o.onclick=ov)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return zr(l),null;case 6:if(o&&l.stateNode!=null)qk(o,l,o.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(p=Rd(ig.current),Rd(no.current),fv(l)){if(y=l.stateNode,p=l.memoizedProps,y[to]=l,(E=y.nodeValue!==p)&&(o=qs,o!==null))switch(o.tag){case 3:av(y.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&av(y.nodeValue,p,(o.mode&1)!==0)}E&&(l.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[to]=l,l.stateNode=y}return zr(l),null;case 13:if(sn(wn),y=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(dn&&Qs!==null&&(l.mode&1)!==0&&(l.flags&128)===0)XT(),r2(),l.flags|=98560,E=!1;else if(E=fv(l),y!==null&&y.dehydrated!==null){if(o===null){if(!E)throw Error(t(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[to]=l}else r2(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zr(l),E=!1}else la!==null&&(hE(la),la=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(wn.current&1)!==0?Zn===0&&(Zn=3):mE())),l.updateQueue!==null&&(l.flags|=4),zr(l),null);case 4:return o2(),tE(o,l),o===null&&Jm(l.stateNode.containerInfo),zr(l),null;case 10:return k_(l.type._context),zr(l),null;case 17:return As(l.type)&&cv(),zr(l),null;case 19:if(sn(wn),E=l.memoizedState,E===null)return zr(l),null;if(y=(l.flags&128)!==0,M=E.rendering,M===null)if(y)ug(E,!1);else{if(Zn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(M=Av(o),M!==null){for(l.flags|=128,ug(E,!1),y=M.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=p,p=l.child;p!==null;)E=p,o=y,E.flags&=14680066,M=E.alternate,M===null?(E.childLanes=0,E.lanes=o,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=M.childLanes,E.lanes=M.lanes,E.child=M.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=M.memoizedProps,E.memoizedState=M.memoizedState,E.updateQueue=M.updateQueue,E.type=M.type,o=M.dependencies,E.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return Yt(wn,wn.current&1|2),l.child}o=o.sibling}E.tail!==null&&nn()>d2&&(l.flags|=128,y=!0,ug(E,!1),l.lanes=4194304)}else{if(!y)if(o=Av(M),o!==null){if(l.flags|=128,y=!0,p=o.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),ug(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!dn)return zr(l),null}else 2*nn()-E.renderingStartTime>d2&&p!==1073741824&&(l.flags|=128,y=!0,ug(E,!1),l.lanes=4194304);E.isBackwards?(M.sibling=l.child,l.child=M):(p=E.last,p!==null?p.sibling=M:l.child=M,E.last=M)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=nn(),l.sibling=null,p=wn.current,Yt(wn,y?p&1|2:p&1),l):(zr(l),null);case 22:case 23:return fE(),y=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(Ks&1073741824)!==0&&(zr(l),l.subtreeFlags&6&&(l.flags|=8192)):zr(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function Z7(o,l){switch(E_(l),l.tag){case 1:return As(l.type)&&cv(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return o2(),sn(vs),sn(Vr),L_(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return N_(l),null;case 13:if(sn(wn),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));r2()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return sn(wn),null;case 4:return o2(),null;case 10:return k_(l.type._context),null;case 22:case 23:return fE(),null;case 24:return null;default:return null}}var kv=!1,Hr=!1,e4=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function c2(o,l){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){Cn(o,l,y)}else p.current=null}function nE(o,l,p){try{p()}catch(y){Cn(o,l,y)}}var Qk=!1;function t4(o,l){if(f_=sl,o=FT(),a_(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var A=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var M=0,G=-1,X=-1,se=0,he=0,pe=o,de=null;t:for(;;){for(var Ie;pe!==p||A!==0&&pe.nodeType!==3||(G=M+A),pe!==E||y!==0&&pe.nodeType!==3||(X=M+y),pe.nodeType===3&&(M+=pe.nodeValue.length),(Ie=pe.firstChild)!==null;)de=pe,pe=Ie;for(;;){if(pe===o)break t;if(de===p&&++se===A&&(G=M),de===E&&++he===y&&(X=M),(Ie=pe.nextSibling)!==null)break;pe=de,de=pe.parentNode}pe=Ie}p=G===-1||X===-1?null:{start:G,end:X}}else p=null}p=p||{start:0,end:0}}else p=null;for(m_={focusedElem:o,selectionRange:p},sl=!1,Ne=l;Ne!==null;)if(l=Ne,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Ne=o;else for(;Ne!==null;){l=Ne;try{var Le=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var Oe=Le.memoizedProps,Mn=Le.memoizedState,ee=l.stateNode,Y=ee.getSnapshotBeforeUpdate(l.elementType===l.type?Oe:ca(l.type,Oe),Mn);ee.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var ne=l.stateNode.containerInfo;ne.nodeType===1?ne.textContent="":ne.nodeType===9&&ne.documentElement&&ne.removeChild(ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ge){Cn(l,l.return,ge)}if(o=l.sibling,o!==null){o.return=l.return,Ne=o;break}Ne=l.return}return Le=Qk,Qk=!1,Le}function dg(o,l,p){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var A=y=y.next;do{if((A.tag&o)===o){var E=A.destroy;A.destroy=void 0,E!==void 0&&nE(l,p,E)}A=A.next}while(A!==y)}}function Iv(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&o)===o){var y=p.create;p.destroy=y()}p=p.next}while(p!==l)}}function rE(o){var l=o.ref;if(l!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof l=="function"?l(o):l.current=o}}function Kk(o){var l=o.alternate;l!==null&&(o.alternate=null,Kk(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[to],delete l[eg],delete l[v_],delete l[O7],delete l[B7])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Xk(o){return o.tag===5||o.tag===3||o.tag===4}function Yk(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Xk(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function sE(o,l,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(o,l):p.insertBefore(o,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(o,p)):(l=p,l.appendChild(o)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=ov));else if(y!==4&&(o=o.child,o!==null))for(sE(o,l,p),o=o.sibling;o!==null;)sE(o,l,p),o=o.sibling}function iE(o,l,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?p.insertBefore(o,l):p.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for(iE(o,l,p),o=o.sibling;o!==null;)iE(o,l,p),o=o.sibling}var Er=null,ua=!1;function Dc(o,l,p){for(p=p.child;p!==null;)Jk(o,l,p),p=p.sibling}function Jk(o,l,p){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(wd,p)}catch{}switch(p.tag){case 5:Hr||c2(p,l);case 6:var y=Er,A=ua;Er=null,Dc(o,l,p),Er=y,ua=A,Er!==null&&(ua?(o=Er,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):Er.removeChild(p.stateNode));break;case 18:Er!==null&&(ua?(o=Er,p=p.stateNode,o.nodeType===8?w_(o.parentNode,p):o.nodeType===1&&w_(o,p),Ec(o)):w_(Er,p.stateNode));break;case 4:y=Er,A=ua,Er=p.stateNode.containerInfo,ua=!0,Dc(o,l,p),Er=y,ua=A;break;case 0:case 11:case 14:case 15:if(!Hr&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){A=y=y.next;do{var E=A,M=E.destroy;E=E.tag,M!==void 0&&((E&2)!==0||(E&4)!==0)&&nE(p,l,M),A=A.next}while(A!==y)}Dc(o,l,p);break;case 1:if(!Hr&&(c2(p,l),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(G){Cn(p,l,G)}Dc(o,l,p);break;case 21:Dc(o,l,p);break;case 22:p.mode&1?(Hr=(y=Hr)||p.memoizedState!==null,Dc(o,l,p),Hr=y):Dc(o,l,p);break;default:Dc(o,l,p)}}function Zk(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new e4),l.forEach(function(y){var A=u4.bind(null,o,y);p.has(y)||(p.add(y),y.then(A,A))})}}function da(o,l){var p=l.deletions;if(p!==null)for(var y=0;y<p.length;y++){var A=p[y];try{var E=o,M=l,G=M;e:for(;G!==null;){switch(G.tag){case 5:Er=G.stateNode,ua=!1;break e;case 3:Er=G.stateNode.containerInfo,ua=!0;break e;case 4:Er=G.stateNode.containerInfo,ua=!0;break e}G=G.return}if(Er===null)throw Error(t(160));Jk(E,M,A),Er=null,ua=!1;var X=A.alternate;X!==null&&(X.return=null),A.return=null}catch(se){Cn(A,l,se)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)eI(l,o),l=l.sibling}function eI(o,l){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(da(l,o),so(o),y&4){try{dg(3,o,o.return),Iv(3,o)}catch(Oe){Cn(o,o.return,Oe)}try{dg(5,o,o.return)}catch(Oe){Cn(o,o.return,Oe)}}break;case 1:da(l,o),so(o),y&512&&p!==null&&c2(p,p.return);break;case 5:if(da(l,o),so(o),y&512&&p!==null&&c2(p,p.return),o.flags&32){var A=o.stateNode;try{ws(A,"")}catch(Oe){Cn(o,o.return,Oe)}}if(y&4&&(A=o.stateNode,A!=null)){var E=o.memoizedProps,M=p!==null?p.memoizedProps:E,G=o.type,X=o.updateQueue;if(o.updateQueue=null,X!==null)try{G==="input"&&E.type==="radio"&&E.name!=null&&Br(A,E),Ba(G,M);var se=Ba(G,E);for(M=0;M<X.length;M+=2){var he=X[M],pe=X[M+1];he==="style"?Ci(A,pe):he==="dangerouslySetInnerHTML"?js(A,pe):he==="children"?ws(A,pe):R(A,he,pe,se)}switch(G){case"input":ms(A,E);break;case"textarea":Ip(A,E);break;case"select":var de=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!E.multiple;var Ie=E.value;Ie!=null?ln(A,!!E.multiple,Ie,!1):de!==!!E.multiple&&(E.defaultValue!=null?ln(A,!!E.multiple,E.defaultValue,!0):ln(A,!!E.multiple,E.multiple?[]:"",!1))}A[eg]=E}catch(Oe){Cn(o,o.return,Oe)}}break;case 6:if(da(l,o),so(o),y&4){if(o.stateNode===null)throw Error(t(162));A=o.stateNode,E=o.memoizedProps;try{A.nodeValue=E}catch(Oe){Cn(o,o.return,Oe)}}break;case 3:if(da(l,o),so(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Ec(l.containerInfo)}catch(Oe){Cn(o,o.return,Oe)}break;case 4:da(l,o),so(o);break;case 13:da(l,o),so(o),A=o.child,A.flags&8192&&(E=A.memoizedState!==null,A.stateNode.isHidden=E,!E||A.alternate!==null&&A.alternate.memoizedState!==null||(lE=nn())),y&4&&Zk(o);break;case 22:if(he=p!==null&&p.memoizedState!==null,o.mode&1?(Hr=(se=Hr)||he,da(l,o),Hr=se):da(l,o),so(o),y&8192){if(se=o.memoizedState!==null,(o.stateNode.isHidden=se)&&!he&&(o.mode&1)!==0)for(Ne=o,he=o.child;he!==null;){for(pe=Ne=he;Ne!==null;){switch(de=Ne,Ie=de.child,de.tag){case 0:case 11:case 14:case 15:dg(4,de,de.return);break;case 1:c2(de,de.return);var Le=de.stateNode;if(typeof Le.componentWillUnmount=="function"){y=de,p=de.return;try{l=y,Le.props=l.memoizedProps,Le.state=l.memoizedState,Le.componentWillUnmount()}catch(Oe){Cn(y,p,Oe)}}break;case 5:c2(de,de.return);break;case 22:if(de.memoizedState!==null){rI(pe);continue}}Ie!==null?(Ie.return=de,Ne=Ie):rI(pe)}he=he.sibling}e:for(he=null,pe=o;;){if(pe.tag===5){if(he===null){he=pe;try{A=pe.stateNode,se?(E=A.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(G=pe.stateNode,X=pe.memoizedProps.style,M=X!=null&&X.hasOwnProperty("display")?X.display:null,G.style.display=or("display",M))}catch(Oe){Cn(o,o.return,Oe)}}}else if(pe.tag===6){if(he===null)try{pe.stateNode.nodeValue=se?"":pe.memoizedProps}catch(Oe){Cn(o,o.return,Oe)}}else if((pe.tag!==22&&pe.tag!==23||pe.memoizedState===null||pe===o)&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===o)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===o)break e;he===pe&&(he=null),pe=pe.return}he===pe&&(he=null),pe.sibling.return=pe.return,pe=pe.sibling}}break;case 19:da(l,o),so(o),y&4&&Zk(o);break;case 21:break;default:da(l,o),so(o)}}function so(o){var l=o.flags;if(l&2){try{e:{for(var p=o.return;p!==null;){if(Xk(p)){var y=p;break e}p=p.return}throw Error(t(160))}switch(y.tag){case 5:var A=y.stateNode;y.flags&32&&(ws(A,""),y.flags&=-33);var E=Yk(o);iE(o,E,A);break;case 3:case 4:var M=y.stateNode.containerInfo,G=Yk(o);sE(o,G,M);break;default:throw Error(t(161))}}catch(X){Cn(o,o.return,X)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function n4(o,l,p){Ne=o,tI(o)}function tI(o,l,p){for(var y=(o.mode&1)!==0;Ne!==null;){var A=Ne,E=A.child;if(A.tag===22&&y){var M=A.memoizedState!==null||kv;if(!M){var G=A.alternate,X=G!==null&&G.memoizedState!==null||Hr;G=kv;var se=Hr;if(kv=M,(Hr=X)&&!se)for(Ne=A;Ne!==null;)M=Ne,X=M.child,M.tag===22&&M.memoizedState!==null?sI(A):X!==null?(X.return=M,Ne=X):sI(A);for(;E!==null;)Ne=E,tI(E),E=E.sibling;Ne=A,kv=G,Hr=se}nI(o)}else(A.subtreeFlags&8772)!==0&&E!==null?(E.return=A,Ne=E):nI(o)}}function nI(o){for(;Ne!==null;){var l=Ne;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Hr||Iv(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Hr)if(p===null)y.componentDidMount();else{var A=l.elementType===l.type?p.memoizedProps:ca(l.type,p.memoizedProps);y.componentDidUpdate(A,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&rk(l,E,y);break;case 3:var M=l.updateQueue;if(M!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}rk(l,M,p)}break;case 5:var G=l.stateNode;if(p===null&&l.flags&4){p=G;var X=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&p.focus();break;case"img":X.src&&(p.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var se=l.alternate;if(se!==null){var he=se.memoizedState;if(he!==null){var pe=he.dehydrated;pe!==null&&Ec(pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Hr||l.flags&512&&rE(l)}catch(de){Cn(l,l.return,de)}}if(l===o){Ne=null;break}if(p=l.sibling,p!==null){p.return=l.return,Ne=p;break}Ne=l.return}}function rI(o){for(;Ne!==null;){var l=Ne;if(l===o){Ne=null;break}var p=l.sibling;if(p!==null){p.return=l.return,Ne=p;break}Ne=l.return}}function sI(o){for(;Ne!==null;){var l=Ne;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{Iv(4,l)}catch(X){Cn(l,p,X)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var A=l.return;try{y.componentDidMount()}catch(X){Cn(l,A,X)}}var E=l.return;try{rE(l)}catch(X){Cn(l,E,X)}break;case 5:var M=l.return;try{rE(l)}catch(X){Cn(l,M,X)}}}catch(X){Cn(l,l.return,X)}if(l===o){Ne=null;break}var G=l.sibling;if(G!==null){G.return=l.return,Ne=G;break}Ne=l.return}}var r4=Math.ceil,Pv=B.ReactCurrentDispatcher,aE=B.ReactCurrentOwner,Ni=B.ReactCurrentBatchConfig,yt=0,cr=null,$n=null,br=0,Ks=0,u2=Tc(0),Zn=0,hg=null,Nd=0,Rv=0,oE=0,pg=null,_s=null,lE=0,d2=1/0,fl=null,Dv=!1,cE=null,Nc=null,Nv=!1,Mc=null,Mv=0,fg=0,uE=null,Lv=-1,Ov=0;function ss(){return(yt&6)!==0?nn():Lv!==-1?Lv:Lv=nn()}function Lc(o){return(o.mode&1)===0?1:(yt&2)!==0&&br!==0?br&-br:U7.transition!==null?(Ov===0&&(Ov=Mm()),Ov):(o=ht,o!==0||(o=window.event,o=o===void 0?16:Up(o.type)),o)}function ha(o,l,p,y){if(50<fg)throw fg=0,uE=null,Error(t(185));_d(o,p,y),((yt&2)===0||o!==cr)&&(o===cr&&((yt&2)===0&&(Rv|=p),Zn===4&&Oc(o,br)),Es(o,y),p===1&&yt===0&&(l.mode&1)===0&&(d2=nn()+500,dv&&Ic()))}function Es(o,l){var p=o.callbackNode;xd(o,l);var y=tl(o,o===cr?br:0);if(y===0)p!==null&&vc(p),o.callbackNode=null,o.callbackPriority=0;else if(l=y&-y,o.callbackPriority!==l){if(p!=null&&vc(p),l===1)o.tag===0?j7(aI.bind(null,o)):WT(aI.bind(null,o)),M7(function(){(yt&6)===0&&Ic()}),p=null;else{switch(Wa(y)){case 1:p=Np;break;case 4:p=Rm;break;case 16:p=yd;break;case 536870912:p=Mp;break;default:p=yd}p=fI(p,iI.bind(null,o))}o.callbackPriority=l,o.callbackNode=p}}function iI(o,l){if(Lv=-1,Ov=0,(yt&6)!==0)throw Error(t(327));var p=o.callbackNode;if(h2()&&o.callbackNode!==p)return null;var y=tl(o,o===cr?br:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||l)l=Bv(o,y);else{l=y;var A=yt;yt|=2;var E=lI();(cr!==o||br!==l)&&(fl=null,d2=nn()+500,Ld(o,l));do try{a4();break}catch(G){oI(o,G)}while(!0);T_(),Pv.current=E,yt=A,$n!==null?l=0:(cr=null,br=0,l=Zn)}if(l!==0){if(l===2&&(A=Nm(o),A!==0&&(y=A,l=dE(o,A))),l===1)throw p=hg,Ld(o,0),Oc(o,y),Es(o,nn()),p;if(l===6)Oc(o,y);else{if(A=o.current.alternate,(y&30)===0&&!s4(A)&&(l=Bv(o,y),l===2&&(E=Nm(o),E!==0&&(y=E,l=dE(o,E))),l===1))throw p=hg,Ld(o,0),Oc(o,y),Es(o,nn()),p;switch(o.finishedWork=A,o.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:Od(o,_s,fl);break;case 3:if(Oc(o,y),(y&130023424)===y&&(l=lE+500-nn(),10<l)){if(tl(o,0)!==0)break;if(A=o.suspendedLanes,(A&y)!==y){ss(),o.pingedLanes|=o.suspendedLanes&A;break}o.timeoutHandle=y_(Od.bind(null,o,_s,fl),l);break}Od(o,_s,fl);break;case 4:if(Oc(o,y),(y&4194240)===y)break;for(l=o.eventTimes,A=-1;0<y;){var M=31-$s(y);E=1<<M,M=l[M],M>A&&(A=M),y&=~E}if(y=A,y=nn()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*r4(y/1960))-y,10<y){o.timeoutHandle=y_(Od.bind(null,o,_s,fl),y);break}Od(o,_s,fl);break;case 5:Od(o,_s,fl);break;default:throw Error(t(329))}}}return Es(o,nn()),o.callbackNode===p?iI.bind(null,o):null}function dE(o,l){var p=pg;return o.current.memoizedState.isDehydrated&&(Ld(o,l).flags|=256),o=Bv(o,l),o!==2&&(l=_s,_s=p,l!==null&&hE(l)),o}function hE(o){_s===null?_s=o:_s.push.apply(_s,o)}function s4(o){for(var l=o;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var A=p[y],E=A.getSnapshot;A=A.value;try{if(!oa(E(),A))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Oc(o,l){for(l&=~oE,l&=~Rv,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var p=31-$s(l),y=1<<p;o[p]=-1,l&=~y}}function aI(o){if((yt&6)!==0)throw Error(t(327));h2();var l=tl(o,0);if((l&1)===0)return Es(o,nn()),null;var p=Bv(o,l);if(o.tag!==0&&p===2){var y=Nm(o);y!==0&&(l=y,p=dE(o,y))}if(p===1)throw p=hg,Ld(o,0),Oc(o,l),Es(o,nn()),p;if(p===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Od(o,_s,fl),Es(o,nn()),null}function pE(o,l){var p=yt;yt|=1;try{return o(l)}finally{yt=p,yt===0&&(d2=nn()+500,dv&&Ic())}}function Md(o){Mc!==null&&Mc.tag===0&&(yt&6)===0&&h2();var l=yt;yt|=1;var p=Ni.transition,y=ht;try{if(Ni.transition=null,ht=1,o)return o()}finally{ht=y,Ni.transition=p,yt=l,(yt&6)===0&&Ic()}}function fE(){Ks=u2.current,sn(u2)}function Ld(o,l){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,N7(p)),$n!==null)for(p=$n.return;p!==null;){var y=p;switch(E_(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&cv();break;case 3:o2(),sn(vs),sn(Vr),L_();break;case 5:N_(y);break;case 4:o2();break;case 13:sn(wn);break;case 19:sn(wn);break;case 10:k_(y.type._context);break;case 22:case 23:fE()}p=p.return}if(cr=o,$n=o=Bc(o.current,null),br=Ks=l,Zn=0,hg=null,oE=Rv=Nd=0,_s=pg=null,Pd!==null){for(l=0;l<Pd.length;l++)if(p=Pd[l],y=p.interleaved,y!==null){p.interleaved=null;var A=y.next,E=p.pending;if(E!==null){var M=E.next;E.next=A,y.next=M}p.pending=y}Pd=null}return o}function oI(o,l){do{var p=$n;try{if(T_(),xv.current=Cv,_v){for(var y=vn.memoizedState;y!==null;){var A=y.queue;A!==null&&(A.pending=null),y=y.next}_v=!1}if(Dd=0,lr=Jn=vn=null,ag=!1,og=0,aE.current=null,p===null||p.return===null){Zn=1,hg=l,$n=null;break}e:{var E=o,M=p.return,G=p,X=l;if(l=br,G.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var se=X,he=G,pe=he.tag;if((he.mode&1)===0&&(pe===0||pe===11||pe===15)){var de=he.alternate;de?(he.updateQueue=de.updateQueue,he.memoizedState=de.memoizedState,he.lanes=de.lanes):(he.updateQueue=null,he.memoizedState=null)}var Ie=Rk(M);if(Ie!==null){Ie.flags&=-257,Dk(Ie,M,G,E,l),Ie.mode&1&&Pk(E,se,l),l=Ie,X=se;var Le=l.updateQueue;if(Le===null){var Oe=new Set;Oe.add(X),l.updateQueue=Oe}else Le.add(X);break e}else{if((l&1)===0){Pk(E,se,l),mE();break e}X=Error(t(426))}}else if(dn&&G.mode&1){var Mn=Rk(M);if(Mn!==null){(Mn.flags&65536)===0&&(Mn.flags|=256),Dk(Mn,M,G,E,l),F_(l2(X,G));break e}}E=X=l2(X,G),Zn!==4&&(Zn=2),pg===null?pg=[E]:pg.push(E),E=M;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var ee=kk(E,X,l);nk(E,ee);break e;case 1:G=X;var Y=E.type,ne=E.stateNode;if((E.flags&128)===0&&(typeof Y.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Nc===null||!Nc.has(ne)))){E.flags|=65536,l&=-l,E.lanes|=l;var ge=Ik(E,G,l);nk(E,ge);break e}}E=E.return}while(E!==null)}uI(p)}catch(je){l=je,$n===p&&p!==null&&($n=p=p.return);continue}break}while(!0)}function lI(){var o=Pv.current;return Pv.current=Cv,o===null?Cv:o}function mE(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),cr===null||(Nd&268435455)===0&&(Rv&268435455)===0||Oc(cr,br)}function Bv(o,l){var p=yt;yt|=2;var y=lI();(cr!==o||br!==l)&&(fl=null,Ld(o,l));do try{i4();break}catch(A){oI(o,A)}while(!0);if(T_(),yt=p,Pv.current=y,$n!==null)throw Error(t(261));return cr=null,br=0,Zn}function i4(){for(;$n!==null;)cI($n)}function a4(){for(;$n!==null&&!Us();)cI($n)}function cI(o){var l=pI(o.alternate,o,Ks);o.memoizedProps=o.pendingProps,l===null?uI(o):$n=l,aE.current=null}function uI(o){var l=o;do{var p=l.alternate;if(o=l.return,(l.flags&32768)===0){if(p=J7(p,l,Ks),p!==null){$n=p;return}}else{if(p=Z7(p,l),p!==null){p.flags&=32767,$n=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Zn=6,$n=null;return}}if(l=l.sibling,l!==null){$n=l;return}$n=l=o}while(l!==null);Zn===0&&(Zn=5)}function Od(o,l,p){var y=ht,A=Ni.transition;try{Ni.transition=null,ht=1,o4(o,l,p,y)}finally{Ni.transition=A,ht=y}return null}function o4(o,l,p,y){do h2();while(Mc!==null);if((yt&6)!==0)throw Error(t(327));p=o.finishedWork;var A=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var E=p.lanes|p.childLanes;if(t_(o,E),o===cr&&($n=cr=null,br=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Nv||(Nv=!0,fI(yd,function(){return h2(),null})),E=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||E){E=Ni.transition,Ni.transition=null;var M=ht;ht=1;var G=yt;yt|=4,aE.current=null,t4(o,p),eI(p,o),S7(m_),sl=!!f_,m_=f_=null,o.current=p,n4(p),el(),yt=G,ht=M,Ni.transition=E}else o.current=p;if(Nv&&(Nv=!1,Mc=o,Mv=A),E=o.pendingLanes,E===0&&(Nc=null),W0(p.stateNode),Es(o,nn()),l!==null)for(y=o.onRecoverableError,p=0;p<l.length;p++)A=l[p],y(A.value,{componentStack:A.stack,digest:A.digest});if(Dv)throw Dv=!1,o=cE,cE=null,o;return(Mv&1)!==0&&o.tag!==0&&h2(),E=o.pendingLanes,(E&1)!==0?o===uE?fg++:(fg=0,uE=o):fg=0,Ic(),null}function h2(){if(Mc!==null){var o=Wa(Mv),l=Ni.transition,p=ht;try{if(Ni.transition=null,ht=16>o?16:o,Mc===null)var y=!1;else{if(o=Mc,Mc=null,Mv=0,(yt&6)!==0)throw Error(t(331));var A=yt;for(yt|=4,Ne=o.current;Ne!==null;){var E=Ne,M=E.child;if((Ne.flags&16)!==0){var G=E.deletions;if(G!==null){for(var X=0;X<G.length;X++){var se=G[X];for(Ne=se;Ne!==null;){var he=Ne;switch(he.tag){case 0:case 11:case 15:dg(8,he,E)}var pe=he.child;if(pe!==null)pe.return=he,Ne=pe;else for(;Ne!==null;){he=Ne;var de=he.sibling,Ie=he.return;if(Kk(he),he===se){Ne=null;break}if(de!==null){de.return=Ie,Ne=de;break}Ne=Ie}}}var Le=E.alternate;if(Le!==null){var Oe=Le.child;if(Oe!==null){Le.child=null;do{var Mn=Oe.sibling;Oe.sibling=null,Oe=Mn}while(Oe!==null)}}Ne=E}}if((E.subtreeFlags&2064)!==0&&M!==null)M.return=E,Ne=M;else e:for(;Ne!==null;){if(E=Ne,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:dg(9,E,E.return)}var ee=E.sibling;if(ee!==null){ee.return=E.return,Ne=ee;break e}Ne=E.return}}var Y=o.current;for(Ne=Y;Ne!==null;){M=Ne;var ne=M.child;if((M.subtreeFlags&2064)!==0&&ne!==null)ne.return=M,Ne=ne;else e:for(M=Y;Ne!==null;){if(G=Ne,(G.flags&2048)!==0)try{switch(G.tag){case 0:case 11:case 15:Iv(9,G)}}catch(je){Cn(G,G.return,je)}if(G===M){Ne=null;break e}var ge=G.sibling;if(ge!==null){ge.return=G.return,Ne=ge;break e}Ne=G.return}}if(yt=A,Ic(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(wd,o)}catch{}y=!0}return y}finally{ht=p,Ni.transition=l}}return!1}function dI(o,l,p){l=l2(p,l),l=kk(o,l,1),o=Rc(o,l,1),l=ss(),o!==null&&(_d(o,1,l),Es(o,l))}function Cn(o,l,p){if(o.tag===3)dI(o,o,p);else for(;l!==null;){if(l.tag===3){dI(l,o,p);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Nc===null||!Nc.has(y))){o=l2(p,o),o=Ik(l,o,1),l=Rc(l,o,1),o=ss(),l!==null&&(_d(l,1,o),Es(l,o));break}}l=l.return}}function l4(o,l,p){var y=o.pingCache;y!==null&&y.delete(l),l=ss(),o.pingedLanes|=o.suspendedLanes&p,cr===o&&(br&p)===p&&(Zn===4||Zn===3&&(br&130023424)===br&&500>nn()-lE?Ld(o,0):oE|=p),Es(o,l)}function hI(o,l){l===0&&((o.mode&1)===0?l=1:(l=Ac,Ac<<=1,(Ac&130023424)===0&&(Ac=4194304)));var p=ss();o=dl(o,l),o!==null&&(_d(o,l,p),Es(o,p))}function c4(o){var l=o.memoizedState,p=0;l!==null&&(p=l.retryLane),hI(o,p)}function u4(o,l){var p=0;switch(o.tag){case 13:var y=o.stateNode,A=o.memoizedState;A!==null&&(p=A.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),hI(o,p)}var pI;pI=function(o,l,p){if(o!==null)if(o.memoizedProps!==l.pendingProps||vs.current)xs=!0;else{if((o.lanes&p)===0&&(l.flags&128)===0)return xs=!1,Y7(o,l,p);xs=(o.flags&131072)!==0}else xs=!1,dn&&(l.flags&1048576)!==0&&GT(l,pv,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Tv(o,l),o=l.pendingProps;var A=e2(l,Vr.current);a2(l,p),A=j_(null,l,y,o,A,p);var E=U_();return l.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,As(y)?(E=!0,uv(l)):E=!1,l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,R_(l),A.updater=Fv,l.stateNode=A,A._reactInternals=l,G_(l,y,o,p),l=X_(null,l,y,!0,E,p)):(l.tag=0,dn&&E&&__(l),rs(null,l,A,p),l=l.child),l;case 16:y=l.elementType;e:{switch(Tv(o,l),o=l.pendingProps,A=y._init,y=A(y._payload),l.type=y,A=l.tag=h4(y),o=ca(y,o),A){case 0:l=K_(null,l,y,o,p);break e;case 1:l=jk(null,l,y,o,p);break e;case 11:l=Nk(null,l,y,o,p);break e;case 14:l=Mk(null,l,y,ca(y.type,o),p);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,A=l.pendingProps,A=l.elementType===y?A:ca(y,A),K_(o,l,y,A,p);case 1:return y=l.type,A=l.pendingProps,A=l.elementType===y?A:ca(y,A),jk(o,l,y,A,p);case 3:e:{if(Uk(l),o===null)throw Error(t(387));y=l.pendingProps,E=l.memoizedState,A=E.element,tk(o,l),vv(l,y,null,p);var M=l.memoizedState;if(y=M.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){A=l2(Error(t(423)),l),l=Vk(o,l,y,p,A);break e}else if(y!==A){A=l2(Error(t(424)),l),l=Vk(o,l,y,p,A);break e}else for(Qs=Sc(l.stateNode.containerInfo.firstChild),qs=l,dn=!0,la=null,p=ZT(l,null,y,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(r2(),y===A){l=pl(o,l,p);break e}rs(o,l,y,p)}l=l.child}return l;case 5:return sk(l),o===null&&C_(l),y=l.type,A=l.pendingProps,E=o!==null?o.memoizedProps:null,M=A.children,g_(y,A)?M=null:E!==null&&g_(y,E)&&(l.flags|=32),Bk(o,l),rs(o,l,M,p),l.child;case 6:return o===null&&C_(l),null;case 13:return $k(o,l,p);case 4:return D_(l,l.stateNode.containerInfo),y=l.pendingProps,o===null?l.child=s2(l,null,y,p):rs(o,l,y,p),l.child;case 11:return y=l.type,A=l.pendingProps,A=l.elementType===y?A:ca(y,A),Nk(o,l,y,A,p);case 7:return rs(o,l,l.pendingProps,p),l.child;case 8:return rs(o,l,l.pendingProps.children,p),l.child;case 12:return rs(o,l,l.pendingProps.children,p),l.child;case 10:e:{if(y=l.type._context,A=l.pendingProps,E=l.memoizedProps,M=A.value,Yt(gv,y._currentValue),y._currentValue=M,E!==null)if(oa(E.value,M)){if(E.children===A.children&&!vs.current){l=pl(o,l,p);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var G=E.dependencies;if(G!==null){M=E.child;for(var X=G.firstContext;X!==null;){if(X.context===y){if(E.tag===1){X=hl(-1,p&-p),X.tag=2;var se=E.updateQueue;if(se!==null){se=se.shared;var he=se.pending;he===null?X.next=X:(X.next=he.next,he.next=X),se.pending=X}}E.lanes|=p,X=E.alternate,X!==null&&(X.lanes|=p),I_(E.return,p,l),G.lanes|=p;break}X=X.next}}else if(E.tag===10)M=E.type===l.type?null:E.child;else if(E.tag===18){if(M=E.return,M===null)throw Error(t(341));M.lanes|=p,G=M.alternate,G!==null&&(G.lanes|=p),I_(M,p,l),M=E.sibling}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===l){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}rs(o,l,A.children,p),l=l.child}return l;case 9:return A=l.type,y=l.pendingProps.children,a2(l,p),A=Ri(A),y=y(A),l.flags|=1,rs(o,l,y,p),l.child;case 14:return y=l.type,A=ca(y,l.pendingProps),A=ca(y.type,A),Mk(o,l,y,A,p);case 15:return Lk(o,l,l.type,l.pendingProps,p);case 17:return y=l.type,A=l.pendingProps,A=l.elementType===y?A:ca(y,A),Tv(o,l),l.tag=1,As(y)?(o=!0,uv(l)):o=!1,a2(l,p),Sk(l,y,A),G_(l,y,A,p),X_(null,l,y,!0,o,p);case 19:return Hk(o,l,p);case 22:return Ok(o,l,p)}throw Error(t(156,l.tag))};function fI(o,l){return ns(o,l)}function d4(o,l,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(o,l,p,y){return new d4(o,l,p,y)}function gE(o){return o=o.prototype,!(!o||!o.isReactComponent)}function h4(o){if(typeof o=="function")return gE(o)?1:0;if(o!=null){if(o=o.$$typeof,o===K)return 11;if(o===Ae)return 14}return 2}function Bc(o,l){var p=o.alternate;return p===null?(p=Mi(o.tag,l,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=l,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,l=o.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function jv(o,l,p,y,A,E){var M=2;if(y=o,typeof o=="function")gE(o)&&(M=1);else if(typeof o=="string")M=5;else e:switch(o){case D:return Bd(p.children,A,E,l);case N:M=8,A|=8;break;case L:return o=Mi(12,p,l,A|2),o.elementType=L,o.lanes=E,o;case U:return o=Mi(13,p,l,A),o.elementType=U,o.lanes=E,o;case me:return o=Mi(19,p,l,A),o.elementType=me,o.lanes=E,o;case fe:return Uv(p,A,E,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case V:M=10;break e;case $:M=9;break e;case K:M=11;break e;case Ae:M=14;break e;case we:M=16,y=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Mi(M,p,l,A),l.elementType=o,l.type=y,l.lanes=E,l}function Bd(o,l,p,y){return o=Mi(7,o,y,l),o.lanes=p,o}function Uv(o,l,p,y){return o=Mi(22,o,y,l),o.elementType=fe,o.lanes=p,o.stateNode={isHidden:!1},o}function yE(o,l,p){return o=Mi(6,o,null,l),o.lanes=p,o}function wE(o,l,p){return l=Mi(4,o.children!==null?o.children:[],o.key,l),l.lanes=p,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function p4(o,l,p,y,A){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lm(0),this.expirationTimes=Lm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lm(0),this.identifierPrefix=y,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function vE(o,l,p,y,A,E,M,G,X){return o=new p4(o,l,p,G,X),l===1?(l=1,E===!0&&(l|=8)):l=0,E=Mi(3,null,null,l),o.current=E,E.stateNode=o,E.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},R_(E),o}function f4(o,l,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:y==null?null:""+y,children:o,containerInfo:l,implementation:p}}function mI(o){if(!o)return kc;o=o._reactInternals;e:{if(Kt(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(As(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var p=o.type;if(As(p))return zT(o,p,l)}return l}function gI(o,l,p,y,A,E,M,G,X){return o=vE(p,y,!0,o,A,E,M,G,X),o.context=mI(null),p=o.current,y=ss(),A=Lc(p),E=hl(y,A),E.callback=l??null,Rc(p,E,A),o.current.lanes=A,_d(o,A,y),Es(o,y),o}function Vv(o,l,p,y){var A=l.current,E=ss(),M=Lc(A);return p=mI(p),l.context===null?l.context=p:l.pendingContext=p,l=hl(E,M),l.payload={element:o},y=y===void 0?null:y,y!==null&&(l.callback=y),o=Rc(A,l,M),o!==null&&(ha(o,A,M,E),wv(o,A,M)),M}function $v(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function yI(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<l?p:l}}function AE(o,l){yI(o,l),(o=o.alternate)&&yI(o,l)}function m4(){return null}var wI=typeof reportError=="function"?reportError:function(o){console.error(o)};function xE(o){this._internalRoot=o}zv.prototype.render=xE.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Vv(o,l,null,null)},zv.prototype.unmount=xE.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Md(function(){Vv(null,o,null,null)}),l[ol]=null}};function zv(o){this._internalRoot=o}zv.prototype.unstable_scheduleHydration=function(o){if(o){var l=Um();o={blockedOn:null,target:o,priority:l};for(var p=0;p<zs.length&&l!==0&&l<zs[p].priority;p++);zs.splice(p,0,o),p===0&&Bp(o)}};function _E(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Hv(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function vI(){}function g4(o,l,p,y,A){if(A){if(typeof y=="function"){var E=y;y=function(){var se=$v(M);E.call(se)}}var M=gI(l,y,o,0,null,!1,!1,"",vI);return o._reactRootContainer=M,o[ol]=M.current,Jm(o.nodeType===8?o.parentNode:o),Md(),M}for(;A=o.lastChild;)o.removeChild(A);if(typeof y=="function"){var G=y;y=function(){var se=$v(X);G.call(se)}}var X=vE(o,0,!1,null,null,!1,!1,"",vI);return o._reactRootContainer=X,o[ol]=X.current,Jm(o.nodeType===8?o.parentNode:o),Md(function(){Vv(l,X,p,y)}),X}function Wv(o,l,p,y,A){var E=p._reactRootContainer;if(E){var M=E;if(typeof A=="function"){var G=A;A=function(){var X=$v(M);G.call(X)}}Vv(l,M,o,A)}else M=g4(p,l,o,A,y);return $v(M)}Bm=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var p=Ct(l.pendingLanes);p!==0&&(Om(l,p|1),Es(l,nn()),(yt&6)===0&&(d2=nn()+500,Ic()))}break;case 13:Md(function(){var y=dl(o,1);if(y!==null){var A=ss();ha(y,o,1,A)}}),AE(o,1)}},Lp=function(o){if(o.tag===13){var l=dl(o,134217728);if(l!==null){var p=ss();ha(l,o,134217728,p)}AE(o,134217728)}},jm=function(o){if(o.tag===13){var l=Lc(o),p=dl(o,l);if(p!==null){var y=ss();ha(p,o,l,y)}AE(o,l)}},Um=function(){return ht},Vm=function(o,l){var p=ht;try{return ht=o,l()}finally{ht=p}},jr=function(o,l,p){switch(l){case"input":if(ms(o,p),l=p.name,p.type==="radio"&&l!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var y=p[l];if(y!==o&&y.form===o.form){var A=lv(y);if(!A)throw Error(t(90));Et(y),ms(y,A)}}}break;case"textarea":Ip(o,p);break;case"select":l=p.value,l!=null&&ln(o,!!p.multiple,l,!1)}},Pp=pE,Rp=Md;var y4={usingClientEntryPoint:!1,Events:[tg,Jp,lv,ja,Ua,pE]},mg={findFiberByHostInstance:Sd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w4={bundleType:mg.bundleType,version:mg.version,rendererPackageName:mg.rendererPackageName,rendererConfig:mg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ot(o),o===null?null:o.stateNode},findFiberByHostInstance:mg.findFiberByHostInstance||m4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gv.isDisabled&&Gv.supportsFiber)try{wd=Gv.inject(w4),Vs=Gv}catch{}}return bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y4,bs.createPortal=function(o,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_E(l))throw Error(t(200));return f4(o,l,null,p)},bs.createRoot=function(o,l){if(!_E(o))throw Error(t(299));var p=!1,y="",A=wI;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=vE(o,1,!1,null,null,p,!1,y,A),o[ol]=l.current,Jm(o.nodeType===8?o.parentNode:o),new xE(l)},bs.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=ot(l),o=o===null?null:o.stateNode,o},bs.flushSync=function(o){return Md(o)},bs.hydrate=function(o,l,p){if(!Hv(l))throw Error(t(200));return Wv(null,o,l,!0,p)},bs.hydrateRoot=function(o,l,p){if(!_E(o))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,A=!1,E="",M=wI;if(p!=null&&(p.unstable_strictMode===!0&&(A=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onRecoverableError!==void 0&&(M=p.onRecoverableError)),l=gI(l,null,o,1,p??null,A,!1,E,M),o[ol]=l.current,Jm(o),y)for(o=0;o<y.length;o++)p=y[o],A=p._getVersion,A=A(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,A]:l.mutableSourceEagerHydrationData.push(p,A);return new zv(l)},bs.render=function(o,l,p){if(!Hv(l))throw Error(t(200));return Wv(null,o,l,!1,p)},bs.unmountComponentAtNode=function(o){if(!Hv(o))throw Error(t(40));return o._reactRootContainer?(Md(function(){Wv(null,null,o,!1,function(){o._reactRootContainer=null,o[ol]=null})}),!0):!1},bs.unstable_batchedUpdates=pE,bs.unstable_renderSubtreeIntoContainer=function(o,l,p,y){if(!Hv(p))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Wv(o,l,p,!1,y)},bs.version="18.3.1-next-f1338f8080-20240426",bs}var TI;function T4(){if(TI)return FE.exports;TI=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),FE.exports=S4(),FE.exports}var kI;function k4(){if(kI)return Qv;kI=1;var s=T4();return Qv.createRoot=s.createRoot,Qv.hydrateRoot=s.hydrateRoot,Qv}var I4=k4();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var II="popstate";function P4(s={}){function e(r,i){let{pathname:a="/",search:u="",hash:d=""}=xp(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Cb("",{pathname:a,search:u,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let d=r.location.href,h=d.indexOf("#");u=h===-1?d:d.slice(0,h)}return u+"#"+(typeof i=="string"?i:cy(i))}function n(r,i){na(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return D4(e,t,n,s)}function mn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function na(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function R4(){return Math.random().toString(36).substring(2,10)}function PI(s,e){return{usr:s.state,key:s.key,idx:e}}function Cb(s,e,t=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?xp(e):e,state:t,key:e&&e.key||n||R4()}}function cy({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function xp(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substring(n),s=s.substring(0,n)),s&&(e.pathname=s)}return e}function D4(s,e,t,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,a=r.history,u="POP",d=null,h=f();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function f(){return(a.state||{idx:null}).idx}function g(){u="POP";let S=f(),I=S==null?null:S-h;h=S,d&&d({action:u,location:C.location,delta:I})}function w(S,I){u="PUSH";let O=Cb(C.location,S,I);t&&t(O,S),h=f()+1;let R=PI(O,h),B=C.createHref(O);try{a.pushState(R,"",B)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;r.location.assign(B)}i&&d&&d({action:u,location:C.location,delta:1})}function v(S,I){u="REPLACE";let O=Cb(C.location,S,I);t&&t(O,S),h=f();let R=PI(O,h),B=C.createHref(O);a.replaceState(R,"",B),i&&d&&d({action:u,location:C.location,delta:0})}function F(S){return N4(S)}let C={get action(){return u},get location(){return s(r,a)},listen(S){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(II,g),d=S,()=>{r.removeEventListener(II,g),d=null}},createHref(S){return e(r,S)},createURL:F,encodeLocation(S){let I=F(S);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:w,replace:v,go(S){return a.go(S)}};return C}function N4(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mn(t,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:cy(s);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function PD(s,e,t="/"){return M4(s,e,t,!1)}function M4(s,e,t,n){let r=typeof e=="string"?xp(e):e,i=cc(r.pathname||"/",t);if(i==null)return null;let a=RD(s);L4(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let h=q4(i);u=W4(a[d],h,n)}return u}function RD(s,e=[],t=[],n="",r=!1){let i=(a,u,d=r,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;mn(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let g=ic([n,f.relativePath]),w=t.concat(f);a.children&&a.children.length>0&&(mn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),RD(a.children,e,w,g,d)),!(a.path==null&&!a.index)&&e.push({path:g,score:z4(g,a.index),routesMeta:w})};return s.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))i(a,u);else for(let h of DD(a.path))i(a,u,!0,h)}),e}function DD(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let a=DD(n.join("/")),u=[];return u.push(...a.map(d=>d===""?i:[i,d].join("/"))),r&&u.push(...a),u.map(d=>s.startsWith("/")&&d===""?"/":d)}function L4(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:H4(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var O4=/^:[\w-]+$/,B4=3,j4=2,U4=1,V4=10,$4=-2,RI=s=>s==="*";function z4(s,e){let t=s.split("/"),n=t.length;return t.some(RI)&&(n+=$4),e&&(n+=j4),t.filter(r=>!RI(r)).reduce((r,i)=>r+(O4.test(i)?B4:i===""?U4:V4),n)}function H4(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function W4(s,e,t=!1){let{routesMeta:n}=s,r={},i="/",a=[];for(let u=0;u<n.length;++u){let d=n[u],h=u===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=c1({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),w=d.route;if(!g&&h&&t&&!n[n.length-1].route.index&&(g=c1({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:ic([i,g.pathname]),pathnameBase:Y4(ic([i,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(i=ic([i,g.pathnameBase]))}return a}function c1(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=G4(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:n.reduce((h,{paramName:f,isOptional:g},w)=>{if(f==="*"){let F=u[w]||"";a=i.slice(0,i.length-F.length).replace(/(.)\/+$/,"$1")}const v=u[w];return g&&!v?h[f]=void 0:h[f]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:s}}function G4(s,e=!1,t=!0){na(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function q4(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return na(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function cc(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}var Q4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function K4(s,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?xp(s):s,i;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?i=DI(t.substring(1),"/"):i=DI(t,e)):i=e,{pathname:i,search:J4(n),hash:Z4(r)}}function DI(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function kE(s,e,t,n){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function X4(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function RF(s){let e=X4(s);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function DF(s,e,t,n=!1){let r;typeof s=="string"?r=xp(s):(r={...s},mn(!r.pathname||!r.pathname.includes("?"),kE("?","pathname","search",r)),mn(!r.pathname||!r.pathname.includes("#"),kE("#","pathname","hash",r)),mn(!r.search||!r.search.includes("#"),kE("#","search","hash",r)));let i=s===""||r.pathname==="",a=i?"/":r.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!n&&a.startsWith("..")){let w=a.split("/");for(;w[0]==="..";)w.shift(),g-=1;r.pathname=w.join("/")}u=g>=0?e[g]:"/"}let d=K4(r,u),h=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}var ic=s=>s.join("/").replace(/\/\/+/g,"/"),Y4=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),J4=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Z4=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,eB=class{constructor(s,e,t,n=!1){this.status=s,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function tB(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function nB(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ND=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function MD(s,e){let t=s;if(typeof t!="string"||!Q4.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,r=!1;if(ND)try{let i=new URL(window.location.href),a=t.startsWith("//")?new URL(i.protocol+t):new URL(t),u=cc(a.pathname,e);a.origin===i.origin&&u!=null?t=u+a.search+a.hash:r=!0}catch{na(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var LD=["POST","PUT","PATCH","DELETE"];new Set(LD);var rB=["GET",...LD];new Set(rB);var _m=q.createContext(null);_m.displayName="DataRouter";var cx=q.createContext(null);cx.displayName="DataRouterState";var sB=q.createContext(!1),OD=q.createContext({isTransitioning:!1});OD.displayName="ViewTransition";var iB=q.createContext(new Map);iB.displayName="Fetchers";var aB=q.createContext(null);aB.displayName="Await";var bi=q.createContext(null);bi.displayName="Navigation";var x0=q.createContext(null);x0.displayName="Location";var Xo=q.createContext({outlet:null,matches:[],isDataRoute:!1});Xo.displayName="Route";var NF=q.createContext(null);NF.displayName="RouteError";var BD="REACT_ROUTER_ERROR",oB="REDIRECT",lB="ROUTE_ERROR_RESPONSE";function cB(s){if(s.startsWith(`${BD}:${oB}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function uB(s){if(s.startsWith(`${BD}:${lB}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new eB(e.status,e.statusText,e.data)}catch{}}function dB(s,{relative:e}={}){mn(Em(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=q.useContext(bi),{hash:r,pathname:i,search:a}=_0(s,{relative:e}),u=i;return t!=="/"&&(u=i==="/"?t:ic([t,i])),n.createHref({pathname:u,search:a,hash:r})}function Em(){return q.useContext(x0)!=null}function ld(){return mn(Em(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(x0).location}var jD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function UD(s){q.useContext(bi).static||q.useLayoutEffect(s)}function ux(){let{isDataRoute:s}=q.useContext(Xo);return s?bB():hB()}function hB(){mn(Em(),"useNavigate() may be used only in the context of a <Router> component.");let s=q.useContext(_m),{basename:e,navigator:t}=q.useContext(bi),{matches:n}=q.useContext(Xo),{pathname:r}=ld(),i=JSON.stringify(RF(n)),a=q.useRef(!1);return UD(()=>{a.current=!0}),q.useCallback((d,h={})=>{if(na(a.current,jD),!a.current)return;if(typeof d=="number"){t.go(d);return}let f=DF(d,JSON.parse(i),r,h.relative==="path");s==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ic([e,f.pathname])),(h.replace?t.replace:t.push)(f,h.state,h)},[e,t,i,r,s])}q.createContext(null);function _0(s,{relative:e}={}){let{matches:t}=q.useContext(Xo),{pathname:n}=ld(),r=JSON.stringify(RF(t));return q.useMemo(()=>DF(s,JSON.parse(r),n,e==="path"),[s,r,n,e])}function pB(s,e){return VD(s,e)}function VD(s,e,t,n,r){var O;mn(Em(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=q.useContext(bi),{matches:a}=q.useContext(Xo),u=a[a.length-1],d=u?u.params:{},h=u?u.pathname:"/",f=u?u.pathnameBase:"/",g=u&&u.route;{let R=g&&g.path||"";zD(h,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let w=ld(),v;if(e){let R=typeof e=="string"?xp(e):e;mn(f==="/"||((O=R.pathname)==null?void 0:O.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),v=R}else v=w;let F=v.pathname||"/",C=F;if(f!=="/"){let R=f.replace(/^\//,"").split("/");C="/"+F.replace(/^\//,"").split("/").slice(R.length).join("/")}let S=PD(s,{pathname:C});na(g||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),na(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=wB(S&&S.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:ic([f,i.encodeLocation?i.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:ic([f,i.encodeLocation?i.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),a,t,n,r);return e&&I?q.createElement(x0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},I):I}function fB(){let s=EB(),e=tB(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",s),a=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:i},"ErrorBoundary")," or"," ",q.createElement("code",{style:i},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:r},t):null,a)}var mB=q.createElement(fB,null),$D=class extends q.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=uB(s.digest);t&&(s=t)}let e=s!==void 0?q.createElement(Xo.Provider,{value:this.props.routeContext},q.createElement(NF.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?q.createElement(gB,{error:s},e):e}};$D.contextType=sB;var IE=new WeakMap;function gB({children:s,error:e}){let{basename:t}=q.useContext(bi);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=cB(e.digest);if(n){let r=IE.get(e);if(r)throw r;let i=MD(n.location,t);if(ND&&!IE.get(e))if(i.isExternal||n.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:n.replace}));throw IE.set(e,a),a}return q.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return s}function yB({routeContext:s,match:e,children:t}){let n=q.useContext(_m);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Xo.Provider,{value:s},t)}function wB(s,e=[],t=null,n=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let i=s,a=t==null?void 0:t.errors;if(a!=null){let f=i.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);mn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let u=!1,d=-1;if(t)for(let f=0;f<i.length;f++){let g=i[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:w,errors:v}=t,F=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||F){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}let h=t&&n?(f,g)=>{var w,v;n(f,{location:t.location,params:((v=(w=t.matches)==null?void 0:w[0])==null?void 0:v.params)??{},unstable_pattern:nB(t.matches),errorInfo:g})}:void 0;return i.reduceRight((f,g,w)=>{let v,F=!1,C=null,S=null;t&&(v=a&&g.route.id?a[g.route.id]:void 0,C=g.route.errorElement||mB,u&&(d<0&&w===0?(zD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,S=null):d===w&&(F=!0,S=g.route.hydrateFallbackElement||null)));let I=e.concat(i.slice(0,w+1)),O=()=>{let R;return v?R=C:F?R=S:g.route.Component?R=q.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=f,q.createElement(yB,{match:g,routeContext:{outlet:f,matches:I,isDataRoute:t!=null},children:R})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?q.createElement($D,{location:t.location,revalidation:t.revalidation,component:C,error:v,children:O(),routeContext:{outlet:null,matches:I,isDataRoute:!0},onError:h}):O()},null)}function MF(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vB(s){let e=q.useContext(_m);return mn(e,MF(s)),e}function AB(s){let e=q.useContext(cx);return mn(e,MF(s)),e}function xB(s){let e=q.useContext(Xo);return mn(e,MF(s)),e}function LF(s){let e=xB(s),t=e.matches[e.matches.length-1];return mn(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function _B(){return LF("useRouteId")}function EB(){var n;let s=q.useContext(NF),e=AB("useRouteError"),t=LF("useRouteError");return s!==void 0?s:(n=e.errors)==null?void 0:n[t]}function bB(){let{router:s}=vB("useNavigate"),e=LF("useNavigate"),t=q.useRef(!1);return UD(()=>{t.current=!0}),q.useCallback(async(r,i={})=>{na(t.current,jD),t.current&&(typeof r=="number"?await s.navigate(r):await s.navigate(r,{fromRouteId:e,...i}))},[s,e])}var NI={};function zD(s,e,t){!e&&!NI[s]&&(NI[s]=!0,na(!1,t))}q.memo(CB);function CB({routes:s,future:e,state:t,onError:n}){return VD(s,void 0,t,n,e)}function Fb({to:s,replace:e,state:t,relative:n}){mn(Em(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=q.useContext(bi);na(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=q.useContext(Xo),{pathname:a}=ld(),u=ux(),d=DF(s,RF(i),a,n==="path"),h=JSON.stringify(d);return q.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:n})},[u,h,n,e,t]),null}function Xs(s){mn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FB({basename:s="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:i=!1,unstable_useTransitions:a}){mn(!Em(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=s.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:u,navigator:r,static:i,unstable_useTransitions:a,future:{}}),[u,r,i,a]);typeof t=="string"&&(t=xp(t));let{pathname:h="/",search:f="",hash:g="",state:w=null,key:v="default"}=t,F=q.useMemo(()=>{let C=cc(h,u);return C==null?null:{location:{pathname:C,search:f,hash:g,state:w,key:v},navigationType:n}},[u,h,f,g,w,v,n]);return na(F!=null,`<Router basename="${u}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:q.createElement(bi.Provider,{value:d},q.createElement(x0.Provider,{children:e,value:F}))}function SB({children:s,location:e}){return pB(Sb(s),e)}function Sb(s,e=[]){let t=[];return q.Children.forEach(s,(n,r)=>{if(!q.isValidElement(n))return;let i=[...e,r];if(n.type===q.Fragment){t.push.apply(t,Sb(n.props.children,i));return}mn(n.type===Xs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Sb(n.props.children,i)),t.push(a)}),t}var mA="get",gA="application/x-www-form-urlencoded";function dx(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function TB(s){return dx(s)&&s.tagName.toLowerCase()==="button"}function kB(s){return dx(s)&&s.tagName.toLowerCase()==="form"}function IB(s){return dx(s)&&s.tagName.toLowerCase()==="input"}function PB(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function RB(s,e){return s.button===0&&(!e||e==="_self")&&!PB(s)}var Kv=null;function DB(){if(Kv===null)try{new FormData(document.createElement("form"),0),Kv=!1}catch{Kv=!0}return Kv}var NB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function PE(s){return s!=null&&!NB.has(s)?(na(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gA}"`),null):s}function MB(s,e){let t,n,r,i,a;if(kB(s)){let u=s.getAttribute("action");n=u?cc(u,e):null,t=s.getAttribute("method")||mA,r=PE(s.getAttribute("enctype"))||gA,i=new FormData(s)}else if(TB(s)||IB(s)&&(s.type==="submit"||s.type==="image")){let u=s.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||u.getAttribute("action");if(n=d?cc(d,e):null,t=s.getAttribute("formmethod")||u.getAttribute("method")||mA,r=PE(s.getAttribute("formenctype"))||PE(u.getAttribute("enctype"))||gA,i=new FormData(u,s),!DB()){let{name:h,type:f,value:g}=s;if(f==="image"){let w=h?`${h}.`:"";i.append(`${w}x`,"0"),i.append(`${w}y`,"0")}else h&&i.append(h,g)}}else{if(dx(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=mA,n=null,r=gA,a=s}return i&&r==="text/plain"&&(a=i,i=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function OF(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function LB(s,e,t,n){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${n}`:r.pathname=`${r.pathname}.${n}`:r.pathname==="/"?r.pathname=`_root.${n}`:e&&cc(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function OB(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function BB(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function jB(s,e,t){let n=await Promise.all(s.map(async r=>{let i=e.routes[r.route.id];if(i){let a=await OB(i,t);return a.links?a.links():[]}return[]}));return zB(n.flat(1).filter(BB).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function MI(s,e,t,n,r,i){let a=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var f;return t[h].pathname!==d.pathname||((f=t[h].route.path)==null?void 0:f.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return i==="assets"?e.filter((d,h)=>a(d,h)||u(d,h)):i==="data"?e.filter((d,h)=>{var g;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(a(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function UB(s,e,{includeHydrateFallback:t}={}){return VB(s.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function VB(s){return[...new Set(s)]}function $B(s){let e={},t=Object.keys(s).sort();for(let n of t)e[n]=s[n];return e}function zB(s,e){let t=new Set;return new Set(e),s.reduce((n,r)=>{let i=JSON.stringify($B(r));return t.has(i)||(t.add(i),n.push({key:i,link:r})),n},[])}function HD(){let s=q.useContext(_m);return OF(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function HB(){let s=q.useContext(cx);return OF(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var BF=q.createContext(void 0);BF.displayName="FrameworkContext";function WD(){let s=q.useContext(BF);return OF(s,"You must render this element inside a <HydratedRouter> element"),s}function WB(s,e){let t=q.useContext(BF),[n,r]=q.useState(!1),[i,a]=q.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:f,onTouchStart:g}=e,w=q.useRef(null);q.useEffect(()=>{if(s==="render"&&a(!0),s==="viewport"){let C=I=>{I.forEach(O=>{a(O.isIntersecting)})},S=new IntersectionObserver(C,{threshold:.5});return w.current&&S.observe(w.current),()=>{S.disconnect()}}},[s]),q.useEffect(()=>{if(n){let C=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(C)}}},[n]);let v=()=>{r(!0)},F=()=>{r(!1),a(!1)};return t?s!=="intent"?[i,w,{}]:[i,w,{onFocus:yg(u,v),onBlur:yg(d,F),onMouseEnter:yg(h,v),onMouseLeave:yg(f,F),onTouchStart:yg(g,v)}]:[!1,w,{}]}function yg(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function GB({page:s,...e}){let{router:t}=HD(),n=q.useMemo(()=>PD(t.routes,s,t.basename),[t.routes,s,t.basename]);return n?q.createElement(QB,{page:s,matches:n,...e}):null}function qB(s){let{manifest:e,routeModules:t}=WD(),[n,r]=q.useState([]);return q.useEffect(()=>{let i=!1;return jB(s,e,t).then(a=>{i||r(a)}),()=>{i=!0}},[s,e,t]),n}function QB({page:s,matches:e,...t}){let n=ld(),{future:r,manifest:i,routeModules:a}=WD(),{basename:u}=HD(),{loaderData:d,matches:h}=HB(),f=q.useMemo(()=>MI(s,e,h,i,n,"data"),[s,e,h,i,n]),g=q.useMemo(()=>MI(s,e,h,i,n,"assets"),[s,e,h,i,n]),w=q.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let C=new Set,S=!1;if(e.forEach(O=>{var B;let R=i.routes[O.route.id];!R||!R.hasLoader||(!f.some(z=>z.route.id===O.route.id)&&O.route.id in d&&((B=a[O.route.id])!=null&&B.shouldRevalidate)||R.hasClientLoader?S=!0:C.add(O.route.id))}),C.size===0)return[];let I=LB(s,u,r.unstable_trailingSlashAwareDataRequests,"data");return S&&C.size>0&&I.searchParams.set("_routes",e.filter(O=>C.has(O.route.id)).map(O=>O.route.id).join(",")),[I.pathname+I.search]},[u,r.unstable_trailingSlashAwareDataRequests,d,n,i,f,e,s,a]),v=q.useMemo(()=>UB(g,i),[g,i]),F=qB(g);return q.createElement(q.Fragment,null,w.map(C=>q.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),v.map(C=>q.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),F.map(({key:C,link:S})=>q.createElement("link",{key:C,nonce:t.nonce,...S,crossOrigin:S.crossOrigin??t.crossOrigin})))}function KB(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var XB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XB&&(window.__reactRouterVersion="7.13.0")}catch{}function YB({basename:s,children:e,unstable_useTransitions:t,window:n}){let r=q.useRef();r.current==null&&(r.current=P4({window:n,v5Compat:!0}));let i=r.current,[a,u]=q.useState({action:i.action,location:i.location}),d=q.useCallback(h=>{t===!1?u(h):q.startTransition(()=>u(h))},[t]);return q.useLayoutEffect(()=>i.listen(d),[i,d]),q.createElement(FB,{basename:s,children:e,location:a.location,navigationType:a.action,navigator:i,unstable_useTransitions:t})}var GD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,u1=q.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:a,state:u,target:d,to:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w,...v},F){let{basename:C,unstable_useTransitions:S}=q.useContext(bi),I=typeof h=="string"&&GD.test(h),O=MD(h,C);h=O.to;let R=dB(h,{relative:r}),[B,z,W]=WB(n,v),D=e6(h,{replace:a,state:u,target:d,preventScrollReset:f,relative:r,viewTransition:g,unstable_defaultShouldRevalidate:w,unstable_useTransitions:S});function N(V){e&&e(V),V.defaultPrevented||D(V)}let L=q.createElement("a",{...v,...W,href:O.absoluteURL||R,onClick:O.isExternal||i?e:N,ref:KB(F,z),target:d,"data-discover":!I&&t==="render"?"true":void 0});return B&&!I?q.createElement(q.Fragment,null,L,q.createElement(GB,{page:R})):L});u1.displayName="Link";var qD=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:a,viewTransition:u,children:d,...h},f){let g=_0(a,{relative:h.relative}),w=ld(),v=q.useContext(cx),{navigator:F,basename:C}=q.useContext(bi),S=v!=null&&i6(g)&&u===!0,I=F.encodeLocation?F.encodeLocation(g).pathname:g.pathname,O=w.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(O=O.toLowerCase(),R=R?R.toLowerCase():null,I=I.toLowerCase()),R&&C&&(R=cc(R,C)||R);const B=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let z=O===I||!r&&O.startsWith(I)&&O.charAt(B)==="/",W=R!=null&&(R===I||!r&&R.startsWith(I)&&R.charAt(I.length)==="/"),D={isActive:z,isPending:W,isTransitioning:S},N=z?e:void 0,L;typeof n=="function"?L=n(D):L=[n,z?"active":null,W?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let V=typeof i=="function"?i(D):i;return q.createElement(u1,{...h,"aria-current":N,className:L,ref:f,style:V,to:a,viewTransition:u},typeof d=="function"?d(D):d)});qD.displayName="NavLink";var JB=q.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:i,method:a=mA,action:u,onSubmit:d,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w,...v},F)=>{let{unstable_useTransitions:C}=q.useContext(bi),S=r6(),I=s6(u,{relative:h}),O=a.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&GD.test(u),B=z=>{if(d&&d(z),z.defaultPrevented)return;z.preventDefault();let W=z.nativeEvent.submitter,D=(W==null?void 0:W.getAttribute("formmethod"))||a,N=()=>S(W||z.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:r,state:i,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:w});C&&t!==!1?q.startTransition(()=>N()):N()};return q.createElement("form",{ref:F,method:O,action:I,onSubmit:n?d:B,...v,"data-discover":!R&&s==="render"?"true":void 0})});JB.displayName="Form";function ZB(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QD(s){let e=q.useContext(_m);return mn(e,ZB(s)),e}function e6(s,{target:e,replace:t,state:n,preventScrollReset:r,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let h=ux(),f=ld(),g=_0(s,{relative:i});return q.useCallback(w=>{if(RB(w,e)){w.preventDefault();let v=t!==void 0?t:cy(f)===cy(g),F=()=>h(s,{replace:v,state:n,preventScrollReset:r,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:u});d?q.startTransition(()=>F()):F()}},[f,h,g,t,n,e,s,r,i,a,u,d])}var t6=0,n6=()=>`__${String(++t6)}__`;function r6(){let{router:s}=QD("useSubmit"),{basename:e}=q.useContext(bi),t=_B(),n=s.fetch,r=s.navigate;return q.useCallback(async(i,a={})=>{let{action:u,method:d,encType:h,formData:f,body:g}=MB(i,e);if(a.navigate===!1){let w=a.fetcherKey||n6();await n(w,t,a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||d,formEncType:a.encType||h,flushSync:a.flushSync})}else await r(a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||d,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,r,e,t])}function s6(s,{relative:e}={}){let{basename:t}=q.useContext(bi),n=q.useContext(Xo);mn(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={..._0(s||".",{relative:e})},a=ld();if(s==null){i.search=a.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(g=>g).forEach(g=>u.append("index",g));let f=u.toString();i.search=f?`?${f}`:""}}return(!s||s===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:ic([t,i.pathname])),cy(i)}function i6(s,{relative:e}={}){let t=q.useContext(OD);mn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=QD("useViewTransitionState"),r=_0(s,{relative:e});if(!t.isTransitioning)return!1;let i=cc(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=cc(t.nextLocation.pathname,n)||t.nextLocation.pathname;return c1(r.pathname,a)!=null||c1(r.pathname,i)!=null}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o6=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),LI=s=>{const e=o6(s);return e.charAt(0).toUpperCase()+e.slice(1)},KD=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),l6=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=q.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:a,...u},d)=>q.createElement("svg",{ref:d,...c6,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:KD("lucide",r),...!i&&!l6(u)&&{"aria-hidden":"true"},...u},[...a.map(([h,f])=>q.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=(s,e)=>{const t=q.forwardRef(({className:n,...r},i)=>q.createElement(u6,{ref:i,iconNode:e,className:KD(`lucide-${a6(LI(s))}`,`lucide-${s}`,n),...r}));return t.displayName=LI(s),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],h6=_t("arrow-right",d6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],f6=_t("award",p6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],g6=_t("bell",m6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],w6=_t("book-open",y6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],A6=_t("calendar",v6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],XD=_t("chart-no-axes-column-increasing",x6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],E6=_t("check",_6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],C6=_t("circle-check-big",b6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],S6=_t("circle-x",F6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],k6=_t("dollar-sign",T6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],P6=_t("file-check",I6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],D6=_t("file-spreadsheet",R6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hm=_t("file-text",N6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],L6=_t("graduation-cap",M6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],B6=_t("image",O6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],U6=_t("layout-dashboard",j6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],$6=_t("list",V6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],H6=_t("lock",z6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],G6=_t("log-out",W6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],YD=_t("mail",q6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],JD=_t("megaphone",Q6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],jF=_t("pen",K6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],E0=_t("plus",X6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],OI=_t("save",Y6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Tb=_t("school",J6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hx=_t("search",Z6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],pm=_t("trash-2",e5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],BI=_t("upload",t5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ZD=_t("user",n5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jI=_t("users",r5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],i5=_t("video",s5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Tg=_t("x",a5),o5=()=>{};var UI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(s.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},l5=function(s){const e=[];let t=0,n=0;for(;t<s.length;){const r=s[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const i=s[t++];e[n++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=s[t++],a=s[t++],u=s[t++],d=((r&7)<<18|(i&63)<<12|(a&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=s[t++],a=s[t++];e[n++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},t3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<s.length;r+=3){const i=s[r],a=r+1<s.length,u=a?s[r+1]:0,d=r+2<s.length,h=d?s[r+2]:0,f=i>>2,g=(i&3)<<4|u>>4;let w=(u&15)<<2|h>>6,v=h&63;d||(v=64,a||(w=64)),n.push(t[f],t[g],t[w],t[v])}return n.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(e3(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):l5(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<s.length;){const i=t[s.charAt(r++)],u=r<s.length?t[s.charAt(r)]:0;++r;const h=r<s.length?t[s.charAt(r)]:64;++r;const g=r<s.length?t[s.charAt(r)]:64;if(++r,i==null||u==null||h==null||g==null)throw new c5;const w=i<<2|u>>4;if(n.push(w),h!==64){const v=u<<4&240|h>>2;if(n.push(v),g!==64){const F=h<<6&192|g;n.push(F)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class c5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u5=function(s){const e=e3(s);return t3.encodeByteArray(e,!0)},d1=function(s){return u5(s).replace(/\./g,"")},n3=function(s){try{return t3.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=()=>d5().__FIREBASE_DEFAULTS__,p5=()=>{if(typeof process>"u"||typeof UI>"u")return;const s=UI.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},f5=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&n3(s[1]);return e&&JSON.parse(e)},px=()=>{try{return o5()||h5()||p5()||f5()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},r3=s=>{var e,t;return(t=(e=px())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},s3=s=>{const e=r3(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},i3=()=>{var s;return(s=px())==null?void 0:s.config},a3=s=>{var e;return(e=px())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UF(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=s.iat||0,i=s.sub||s.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...s};return[d1(JSON.stringify(t)),d1(JSON.stringify(a)),""].join(".")}const ny={};function g5(){const s={prod:[],emulator:[]};for(const e of Object.keys(ny))ny[e]?s.emulator.push(e):s.prod.push(e);return s}function y5(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let VI=!1;function VF(s,e){if(typeof window>"u"||typeof document>"u"||!cd(window.location.host)||ny[s]===e||ny[s]||VI)return;ny[s]=e;function t(w){return`__firebase__banner__${w}`}const n="__firebase__banner",i=g5().prod.length>0;function a(){const w=document.getElementById(n);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,v){w.setAttribute("width","24"),w.setAttribute("id",v),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{VI=!0,a()},w}function f(w,v){w.setAttribute("id",v),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function g(){const w=y5(n),v=t("text"),F=document.getElementById(v)||document.createElement("span"),C=t("learnmore"),S=document.getElementById(C)||document.createElement("a"),I=t("preprendIcon"),O=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const R=w.element;u(R),f(S,C);const B=h();d(O,I),R.append(O,F,S,B),document.body.appendChild(R)}i?(F.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ts())}function v5(){var e;const s=(e=px())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function x5(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function _5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function E5(){const s=ts();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function b5(){return!v5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C5(){try{return typeof indexedDB=="object"}catch{return!1}}function F5(){return new Promise((s,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),s(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5="FirebaseError";class Yo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=S5,Object.setPrototypeOf(this,Yo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b0.prototype.create)}}class b0{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?T5(i,n):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Yo(r,u,n)}}function T5(s,e){return s.replace(k5,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const k5=/\{\$([^}]+)}/g;function I5(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function lp(s,e){if(s===e)return!0;const t=Object.keys(s),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const i=s[r],a=e[r];if($I(i)&&$I(a)){if(!lp(i,a))return!1}else if(i!==a)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function $I(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(s){const e=[];for(const[t,n]of Object.entries(s))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function kg(s){const e={};return s.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,i]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Ig(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function P5(s,e){const t=new R5(s,e);return t.subscribe.bind(t)}class R5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");D5(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=RE),r.error===void 0&&(r.error=RE),r.complete===void 0&&(r.complete=RE);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D5(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function RE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(s){return s&&s._delegate?s._delegate:s}class Xu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new m5;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(L5(e))try{this.getOrInitializeService({instanceIdentifier:jd})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});n.resolve(i)}catch{}}}}clearInstance(e=jd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jd){return this.instances.has(e)}getOptions(e=jd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);n===u&&a.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:M5(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=jd){return this.component?this.component.multipleInstances?e:jd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M5(s){return s===jd?void 0:s}function L5(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new N5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ct||(ct={}));const B5={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},j5=ct.INFO,U5={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},V5=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),r=U5[e];if(r)console[r](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $F{constructor(e){this.name=e,this._logLevel=j5,this._logHandler=V5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?B5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const $5=(s,e)=>e.some(t=>s instanceof t);let zI,HI;function z5(){return zI||(zI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H5(){return HI||(HI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l3=new WeakMap,kb=new WeakMap,c3=new WeakMap,DE=new WeakMap,zF=new WeakMap;function W5(s){const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("success",i),s.removeEventListener("error",a)},i=()=>{t(Hu(s.result)),r()},a=()=>{n(s.error),r()};s.addEventListener("success",i),s.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&l3.set(t,s)}).catch(()=>{}),zF.set(e,s),e}function G5(s){if(kb.has(s))return;const e=new Promise((t,n)=>{const r=()=>{s.removeEventListener("complete",i),s.removeEventListener("error",a),s.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(s.error||new DOMException("AbortError","AbortError")),r()};s.addEventListener("complete",i),s.addEventListener("error",a),s.addEventListener("abort",a)});kb.set(s,e)}let Ib={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return kb.get(s);if(e==="objectStoreNames")return s.objectStoreNames||c3.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hu(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function q5(s){Ib=s(Ib)}function Q5(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=s.call(NE(this),e,...t);return c3.set(n,e.sort?e.sort():[e]),Hu(n)}:H5().includes(s)?function(...e){return s.apply(NE(this),e),Hu(l3.get(this))}:function(...e){return Hu(s.apply(NE(this),e))}}function K5(s){return typeof s=="function"?Q5(s):(s instanceof IDBTransaction&&G5(s),$5(s,z5())?new Proxy(s,Ib):s)}function Hu(s){if(s instanceof IDBRequest)return W5(s);if(DE.has(s))return DE.get(s);const e=K5(s);return e!==s&&(DE.set(s,e),zF.set(e,s)),e}const NE=s=>zF.get(s);function X5(s,e,{blocked:t,upgrade:n,blocking:r,terminated:i}={}){const a=indexedDB.open(s,e),u=Hu(a);return n&&a.addEventListener("upgradeneeded",d=>{n(Hu(a.result),d.oldVersion,d.newVersion,Hu(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{i&&d.addEventListener("close",()=>i()),r&&d.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const Y5=["get","getKey","getAll","getAllKeys","count"],J5=["put","add","delete","clear"],ME=new Map;function WI(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(ME.get(e))return ME.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=J5.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||Y5.includes(t)))return;const i=async function(a,...u){const d=this.transaction(a,r?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),r&&d.done]))[0]};return ME.set(e,i),i}q5(s=>({...s,get:(e,t,n)=>WI(e,t)||s.get(e,t,n),has:(e,t)=>!!WI(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ej(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function ej(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pb="@firebase/app",GI="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new $F("@firebase/app"),tj="@firebase/app-compat",nj="@firebase/analytics-compat",rj="@firebase/analytics",sj="@firebase/app-check-compat",ij="@firebase/app-check",aj="@firebase/auth",oj="@firebase/auth-compat",lj="@firebase/database",cj="@firebase/data-connect",uj="@firebase/database-compat",dj="@firebase/functions",hj="@firebase/functions-compat",pj="@firebase/installations",fj="@firebase/installations-compat",mj="@firebase/messaging",gj="@firebase/messaging-compat",yj="@firebase/performance",wj="@firebase/performance-compat",vj="@firebase/remote-config",Aj="@firebase/remote-config-compat",xj="@firebase/storage",_j="@firebase/storage-compat",Ej="@firebase/firestore",bj="@firebase/ai",Cj="@firebase/firestore-compat",Fj="firebase",Sj="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="[DEFAULT]",Tj={[Pb]:"fire-core",[tj]:"fire-core-compat",[rj]:"fire-analytics",[nj]:"fire-analytics-compat",[ij]:"fire-app-check",[sj]:"fire-app-check-compat",[aj]:"fire-auth",[oj]:"fire-auth-compat",[lj]:"fire-rtdb",[cj]:"fire-data-connect",[uj]:"fire-rtdb-compat",[dj]:"fire-fn",[hj]:"fire-fn-compat",[pj]:"fire-iid",[fj]:"fire-iid-compat",[mj]:"fire-fcm",[gj]:"fire-fcm-compat",[yj]:"fire-perf",[wj]:"fire-perf-compat",[vj]:"fire-rc",[Aj]:"fire-rc-compat",[xj]:"fire-gcs",[_j]:"fire-gcs-compat",[Ej]:"fire-fst",[Cj]:"fire-fst-compat",[bj]:"fire-vertex","fire-js":"fire-js",[Fj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new Map,kj=new Map,Db=new Map;function qI(s,e){try{s.container.addComponent(e)}catch(t){uc.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function cp(s){const e=s.name;if(Db.has(e))return uc.debug(`There were multiple attempts to register component ${e}.`),!1;Db.set(e,s);for(const t of h1.values())qI(t,s);for(const t of kj.values())qI(t,s);return!0}function fx(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Ji(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wu=new b0("app","Firebase",Ij);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Xu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=Sj;function u3(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const n={name:Rb,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw Wu.create("bad-app-name",{appName:String(r)});if(t||(t=i3()),!t)throw Wu.create("no-options");const i=h1.get(r);if(i){if(lp(t,i.options)&&lp(n,i.config))return i;throw Wu.create("duplicate-app",{appName:r})}const a=new O5(r);for(const d of Db.values())a.addComponent(d);const u=new Pj(t,n,a);return h1.set(r,u),u}function HF(s=Rb){const e=h1.get(s);if(!e&&s===Rb&&i3())return u3();if(!e)throw Wu.create("no-app",{appName:s});return e}function Lo(s,e,t){let n=Tj[s]??s;t&&(n+=`-${t}`);const r=n.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const a=[`Unable to register library "${n}" with version "${e}":`];r&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),uc.warn(a.join(" "));return}cp(new Xu(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj="firebase-heartbeat-database",Dj=1,uy="firebase-heartbeat-store";let LE=null;function d3(){return LE||(LE=X5(Rj,Dj,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(uy)}catch(t){console.warn(t)}}}}).catch(s=>{throw Wu.create("idb-open",{originalErrorMessage:s.message})})),LE}async function Nj(s){try{const t=(await d3()).transaction(uy),n=await t.objectStore(uy).get(h3(s));return await t.done,n}catch(e){if(e instanceof Yo)uc.warn(e.message);else{const t=Wu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});uc.warn(t.message)}}}async function QI(s,e){try{const n=(await d3()).transaction(uy,"readwrite");await n.objectStore(uy).put(e,h3(s)),await n.done}catch(t){if(t instanceof Yo)uc.warn(t.message);else{const n=Wu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});uc.warn(n.message)}}}function h3(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=1024,Lj=30;class Oj{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jj(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=KI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>Lj){const a=Uj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){uc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=KI(),{heartbeatsToSend:n,unsentEntries:r}=Bj(this._heartbeatsCache.heartbeats),i=d1(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return uc.warn(t),""}}}function KI(){return new Date().toISOString().substring(0,10)}function Bj(s,e=Mj){const t=[];let n=s.slice();for(const r of s){const i=t.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),XI(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),XI(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class jj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C5()?F5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Nj(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return QI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return QI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function XI(s){return d1(JSON.stringify({version:2,heartbeats:s})).length}function Uj(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let n=1;n<s.length;n++)s[n].date<t&&(t=s[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(s){cp(new Xu("platform-logger",e=>new Z5(e),"PRIVATE")),cp(new Xu("heartbeat",e=>new Oj(e),"PRIVATE")),Lo(Pb,GI,s),Lo(Pb,GI,"esm2020"),Lo("fire-js","")}Vj("");var $j="firebase",zj="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo($j,zj,"app");function p3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hj=p3,f3=new b0("auth","Firebase",p3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new $F("@firebase/auth");function Wj(s,...e){p1.logLevel<=ct.WARN&&p1.warn(`Auth (${_p}): ${s}`,...e)}function yA(s,...e){p1.logLevel<=ct.ERROR&&p1.error(`Auth (${_p}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(s,...e){throw WF(s,...e)}function Oo(s,...e){return WF(s,...e)}function m3(s,e,t){const n={...Hj(),[e]:t};return new b0("auth","Firebase",n).create(e,{appName:s.name})}function Gu(s){return m3(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WF(s,...e){if(typeof s!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=s.name),s._errorFactory.create(t,...n)}return f3.create(s,...e)}function We(s,e,...t){if(!s)throw WF(e,...t)}function rc(s){const e="INTERNAL ASSERTION FAILED: "+s;throw yA(e),new Error(e)}function dc(s,e){s||rc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function Gj(){return YI()==="http:"||YI()==="https:"}function YI(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Gj()||x5()||"connection"in navigator)?navigator.onLine:!0}function Qj(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t){this.shortDelay=e,this.longDelay=t,dc(t>e,"Short delay should be less than long delay!"),this.isMobile=w5()||_5()}get(){return qj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(s,e){dc(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Yj=new F0(3e4,6e4);function Ep(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ud(s,e,t,n,r={}){return y3(s,r,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const u=C0({key:s.config.apiKey,...a}).slice(1),d=await s._getAdditionalHeaders();d["Content-Type"]="application/json",s.languageCode&&(d["X-Firebase-Locale"]=s.languageCode);const h={method:e,headers:d,...i};return A5()||(h.referrerPolicy="no-referrer"),s.emulatorConfig&&cd(s.emulatorConfig.host)&&(h.credentials="include"),g3.fetch()(await w3(s,s.config.apiHost,t,u),h)})}async function y3(s,e,t){s._canInitEmulator=!1;const n={...Kj,...e};try{const r=new Zj(s),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Xv(s,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const u=i.ok?a.errorMessage:a.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xv(s,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Xv(s,"email-already-in-use",a);if(d==="USER_DISABLED")throw Xv(s,"user-disabled",a);const f=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw m3(s,f,h);Ra(s,f)}}catch(r){if(r instanceof Yo)throw r;Ra(s,"network-request-failed",{message:String(r)})}}async function mx(s,e,t,n,r={}){const i=await ud(s,e,t,n,r);return"mfaPendingCredential"in i&&Ra(s,"multi-factor-auth-required",{_serverResponse:i}),i}async function w3(s,e,t,n){const r=`${e}${t}?${n}`,i=s,a=i.config.emulator?GF(s.config,r):`${s.config.apiScheme}://${r}`;return Xj.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function Jj(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Oo(this.auth,"network-request-failed")),Yj.get())})}}function Xv(s,e,t){const n={appName:s.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=Oo(s,e,n);return r.customData._tokenResponse=t,r}function JI(s){return s!==void 0&&s.enterprise!==void 0}class eU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Jj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tU(s,e){return ud(s,"GET","/v2/recaptchaConfig",Ep(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(s,e){return ud(s,"POST","/v1/accounts:delete",e)}async function f1(s,e){return ud(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rU(s,e=!1){const t=Pn(s),n=await t.getIdToken(e),r=qF(n);We(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:r,token:n,authTime:ry(OE(r.auth_time)),issuedAtTime:ry(OE(r.iat)),expirationTime:ry(OE(r.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function OE(s){return Number(s)*1e3}function qF(s){const[e,t,n]=s.split(".");if(e===void 0||t===void 0||n===void 0)return yA("JWT malformed, contained fewer than 3 sections"),null;try{const r=n3(t);return r?JSON.parse(r):(yA("Failed to decode base64 JWT payload"),null)}catch(r){return yA("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ZI(s){const e=qF(s);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dy(s,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Yo&&sU(n)&&s.auth.currentUser===s&&await s.auth.signOut(),n}}function sU({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ry(this.lastLoginAt),this.creationTime=ry(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(s){var g;const e=s.auth,t=await s.getIdToken(),n=await dy(s,f1(e,{idToken:t}));We(n==null?void 0:n.users.length,e,"internal-error");const r=n.users[0];s._notifyReloadListener(r);const i=(g=r.providerUserInfo)!=null&&g.length?v3(r.providerUserInfo):[],a=oU(s.providerData,i),u=s.isAnonymous,d=!(s.email&&r.passwordHash)&&!(a!=null&&a.length),h=u?d:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Mb(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(s,f)}async function aU(s){const e=Pn(s);await m1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oU(s,e){return[...s.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function v3(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lU(s,e){const t=await y3(s,{},async()=>{const n=C0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=s.config,a=await w3(s,r,"/v1/token",`key=${i}`),u=await s._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return s.emulatorConfig&&cd(s.emulatorConfig.host)&&(d.credentials="include"),g3.fetch()(a,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function cU(s,e){return ud(s,"POST","/v2/accounts:revokeToken",Ep(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=ZI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await lU(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,a=new R2;return n&&(We(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),r&&(We(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),i&&(We(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new R2,this.toJSON())}_performRefresh(){return rc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(s,e){We(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Sa{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new iU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Mb(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await dy(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rU(this,e)}reload(){return aU(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Sa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await m1(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ji(this.auth.app))return Promise.reject(Gu(this.auth));const e=await this.getIdToken();return await dy(this,nU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,a=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:g,emailVerified:w,isAnonymous:v,providerData:F,stsTokenManager:C}=t;We(g&&C,e,"internal-error");const S=R2.fromJSON(this.name,C);We(typeof g=="string",e,"internal-error"),Uc(n,e.name),Uc(r,e.name),We(typeof w=="boolean",e,"internal-error"),We(typeof v=="boolean",e,"internal-error"),Uc(i,e.name),Uc(a,e.name),Uc(u,e.name),Uc(d,e.name),Uc(h,e.name),Uc(f,e.name);const I=new Sa({uid:g,auth:e,email:r,emailVerified:w,displayName:n,isAnonymous:v,photoURL:a,phoneNumber:i,tenantId:u,stsTokenManager:S,createdAt:h,lastLoginAt:f});return F&&Array.isArray(F)&&(I.providerData=F.map(O=>({...O}))),d&&(I._redirectEventId=d),I}static async _fromIdTokenResponse(e,t,n=!1){const r=new R2;r.updateFromServerResponse(t);const i=new Sa({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await m1(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];We(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?v3(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),u=new R2;u.updateFromIdToken(n);const d=new Sa({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Mb(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=new Map;function sc(s){dc(s instanceof Function,"Expected a class definition");let e=eP.get(s);return e?(dc(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,eP.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}A3.type="NONE";const tP=A3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(s,e,t){return`firebase:${s}:${e}:${t}`}class D2{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=wA(this.userKey,r.apiKey,i),this.fullPersistenceKey=wA("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await f1(this.auth,{idToken:e}).catch(()=>{});return t?Sa._fromGetAccountInfoResponse(this.auth,t,e):null}return Sa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new D2(sc(tP),e,n);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||sc(tP);const a=wA(n,e.config.apiKey,e.name);let u=null;for(const h of t)try{const f=await h._get(a);if(f){let g;if(typeof f=="string"){const w=await f1(e,{idToken:f}).catch(()=>{});if(!w)break;g=await Sa._fromGetAccountInfoResponse(e,w,f)}else g=Sa._fromJSON(e,f);h!==i&&(u=g),i=h;break}}catch{}const d=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new D2(i,e,n):(i=d[0],u&&await i._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(a)}catch{}})),new D2(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(b3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(F3(e))return"Blackberry";if(S3(e))return"Webos";if(_3(e))return"Safari";if((e.includes("chrome/")||E3(e))&&!e.includes("edge/"))return"Chrome";if(C3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=s.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function x3(s=ts()){return/firefox\//i.test(s)}function _3(s=ts()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E3(s=ts()){return/crios\//i.test(s)}function b3(s=ts()){return/iemobile/i.test(s)}function C3(s=ts()){return/android/i.test(s)}function F3(s=ts()){return/blackberry/i.test(s)}function S3(s=ts()){return/webos/i.test(s)}function QF(s=ts()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function uU(s=ts()){var e;return QF(s)&&!!((e=window.navigator)!=null&&e.standalone)}function dU(){return E5()&&document.documentMode===10}function T3(s=ts()){return QF(s)||C3(s)||S3(s)||F3(s)||/windows phone/i.test(s)||b3(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(s,e=[]){let t;switch(s){case"Browser":t=nP(ts());break;case"Worker":t=`${nP(ts())}-${s}`;break;default:t=s}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_p}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((a,u)=>{try{const d=e(i);a(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pU(s,e={}){return ud(s,"GET","/v2/passwordPolicy",Ep(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=6;class mU{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??fU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rP(this),this.idTokenSubscription=new rP(this),this.beforeStateQueue=new hU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sc(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await D2.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await f1(this,{idToken:e}),n=await Sa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ji(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,u=n==null?void 0:n._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===u)&&(d!=null&&d.user)&&(n=d.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await m1(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ji(this.app))return Promise.reject(Gu(this));const t=e?Pn(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ji(this.app)?Promise.reject(Gu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ji(this.app)?Promise.reject(Gu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pU(this),t=new mU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new b0("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await cU(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&sc(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await D2.create(this,[sc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(u,this,"internal-error"),u.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,r);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Ji(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Wj(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function bm(s){return Pn(s)}class rP{constructor(e){this.auth=e,this.observer=null,this.addObserver=P5(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yU(s){gx=s}function I3(s){return gx.loadJS(s)}function wU(){return gx.recaptchaEnterpriseScript}function vU(){return gx.gapiScript}function AU(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class xU{constructor(){this.enterprise=new _U}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _U{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const EU="recaptcha-enterprise",P3="NO_RECAPTCHA";class bU{constructor(e){this.type=EU,this.auth=bm(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,u)=>{tU(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new eU(d);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,a(h.siteKey)}}).catch(d=>{u(d)})})}function r(i,a,u){const d=window.grecaptcha;JI(d)?d.enterprise.ready(()=>{d.enterprise.execute(i,{action:e}).then(h=>{a(h)}).catch(()=>{a(P3)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xU().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{n(this.auth).then(u=>{if(!t&&JI(window.grecaptcha))r(u,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=wU();d.length!==0&&(d+=u),I3(d).then(()=>{r(u,i,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function sP(s,e,t,n=!1,r=!1){const i=new bU(s);let a;if(r)a=P3;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function iP(s,e,t,n,r){var i;if((i=s._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await sP(s,e,t,t==="getOobCode");return n(s,a)}else return n(s,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await sP(s,e,t,t==="getOobCode");return n(s,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(s,e){const t=fx(s,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(lp(i,e??{}))return r;Ra(r,"already-initialized")}return t.initialize({options:e})}function FU(s,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(sc);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function SU(s,e,t){const n=bm(s);We(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,i=R3(e),{host:a,port:u}=TU(e),d=u===null?"":`:${u}`,h={url:`${i}//${a}${d}/`},f=Object.freeze({host:a,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){We(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),We(lp(h,n.config.emulator)&&lp(f,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=f,n.settings.appVerificationDisabledForTesting=!0,cd(a)?(UF(`${i}//${a}${d}`),VF("Auth",!0)):kU()}function R3(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function TU(s){const e=R3(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const i=r[1];return{host:i,port:aP(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:aP(a)}}}function aP(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function kU(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rc("not implemented")}_getIdTokenResponse(e){return rc("not implemented")}_linkToIdToken(e,t){return rc("not implemented")}_getReauthenticationResolver(e){return rc("not implemented")}}async function IU(s,e){return ud(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(s,e){return mx(s,"POST","/v1/accounts:signInWithPassword",Ep(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(s,e){return mx(s,"POST","/v1/accounts:signInWithEmailLink",Ep(s,e))}async function DU(s,e){return mx(s,"POST","/v1/accounts:signInWithEmailLink",Ep(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy extends KF{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new hy(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new hy(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iP(e,t,"signInWithPassword",PU);case"emailLink":return RU(e,{email:this._email,oobCode:this._password});default:Ra(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iP(e,n,"signUpPassword",IU);case"emailLink":return DU(e,{idToken:t,email:this._email,oobCode:this._password});default:Ra(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(s,e){return mx(s,"POST","/v1/accounts:signInWithIdp",Ep(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU="http://localhost";class up extends KF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new up(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ra("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const a=new up(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return N2(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,N2(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,N2(e,t)}buildRequest(){const e={requestUri:NU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=C0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LU(s){const e=kg(Ig(s)).link,t=e?kg(Ig(e)).deep_link_id:null,n=kg(Ig(s)).deep_link_id;return(n?kg(Ig(n)).link:null)||n||t||e||s}class XF{constructor(e){const t=kg(Ig(e)),n=t.apiKey??null,r=t.oobCode??null,i=MU(t.mode??null);We(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=LU(e);try{return new XF(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this.providerId=Cm.PROVIDER_ID}static credential(e,t){return hy._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=XF.parseLink(t);return We(n,"argument-error"),hy._fromEmailAndCode(e,n.code,n.tenantId)}}Cm.PROVIDER_ID="password";Cm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends D3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends S0{constructor(){super("facebook.com")}static credential(e){return up._fromParams({providerId:$c.PROVIDER_ID,signInMethod:$c.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $c.credentialFromTaggedObject(e)}static credentialFromError(e){return $c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $c.credential(e.oauthAccessToken)}catch{return null}}}$c.FACEBOOK_SIGN_IN_METHOD="facebook.com";$c.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends S0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return up._fromParams({providerId:zc.PROVIDER_ID,signInMethod:zc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zc.credentialFromTaggedObject(e)}static credentialFromError(e){return zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return zc.credential(t,n)}catch{return null}}}zc.GOOGLE_SIGN_IN_METHOD="google.com";zc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends S0{constructor(){super("github.com")}static credential(e){return up._fromParams({providerId:Hc.PROVIDER_ID,signInMethod:Hc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hc.credentialFromTaggedObject(e)}static credentialFromError(e){return Hc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hc.credential(e.oauthAccessToken)}catch{return null}}}Hc.GITHUB_SIGN_IN_METHOD="github.com";Hc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends S0{constructor(){super("twitter.com")}static credential(e,t){return up._fromParams({providerId:Wc.PROVIDER_ID,signInMethod:Wc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wc.credentialFromTaggedObject(e)}static credentialFromError(e){return Wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Wc.credential(t,n)}catch{return null}}}Wc.TWITTER_SIGN_IN_METHOD="twitter.com";Wc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Sa._fromIdTokenResponse(e,n,r),a=oP(n);return new fm({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=oP(n);return new fm({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function oP(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1 extends Yo{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,g1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new g1(e,t,n,r)}}function N3(s,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?g1._fromErrorAndOperation(s,i,e,n):i})}async function OU(s,e,t=!1){const n=await dy(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return fm._forOperation(s,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(s,e,t=!1){const{auth:n}=s;if(Ji(n.app))return Promise.reject(Gu(n));const r="reauthenticate";try{const i=await dy(s,N3(n,r,e,s),t);We(i.idToken,n,"internal-error");const a=qF(i.idToken);We(a,n,"internal-error");const{sub:u}=a;return We(s.uid===u,n,"user-mismatch"),fm._forOperation(s,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ra(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3(s,e,t=!1){if(Ji(s.app))return Promise.reject(Gu(s));const n="signIn",r=await N3(s,n,e),i=await fm._fromIdTokenResponse(s,n,r);return t||await s._updateCurrentUser(i.user),i}async function jU(s,e){return M3(bm(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(s){const e=bm(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function VU(s,e,t){return Ji(s.app)?Promise.reject(Gu(s)):jU(Pn(s),Cm.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&UU(s),n})}function $U(s,e,t,n){return Pn(s).onIdTokenChanged(e,t,n)}function zU(s,e,t){return Pn(s).beforeAuthStateChanged(e,t)}function HU(s,e,t,n){return Pn(s).onAuthStateChanged(e,t,n)}const y1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(y1,"1"),this.storage.removeItem(y1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=1e3,GU=10;class O3 extends L3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);dU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,GU):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},WU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}O3.type="LOCAL";const qU=O3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3 extends L3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}B3.type="SESSION";const j3=B3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new yx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const u=Array.from(a).map(async h=>h(t.origin,i)),d=await QU(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(s="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((u,d)=>{const h=YF("",20);r.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(g){const w=g;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(w.data.response);break;default:clearTimeout(f),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(){return window}function XU(s){Bo().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(){return typeof Bo().WorkerGlobalScope<"u"&&typeof Bo().importScripts=="function"}async function YU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JU(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function ZU(){return U3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="firebaseLocalStorageDb",eV=1,w1="firebaseLocalStorage",$3="fbase_key";class T0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wx(s,e){return s.transaction([w1],e?"readwrite":"readonly").objectStore(w1)}function tV(){const s=indexedDB.deleteDatabase(V3);return new T0(s).toPromise()}function Lb(){const s=indexedDB.open(V3,eV);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const n=s.result;try{n.createObjectStore(w1,{keyPath:$3})}catch(r){t(r)}}),s.addEventListener("success",async()=>{const n=s.result;n.objectStoreNames.contains(w1)?e(n):(n.close(),await tV(),e(await Lb()))})})}async function lP(s,e,t){const n=wx(s,!0).put({[$3]:e,value:t});return new T0(n).toPromise()}async function nV(s,e){const t=wx(s,!1).get(e),n=await new T0(t).toPromise();return n===void 0?null:n.value}function cP(s,e){const t=wx(s,!0).delete(e);return new T0(t).toPromise()}const rV=800,sV=3;class z3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lb(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>sV)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return U3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yx._getInstance(ZU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await YU(),!this.activeServiceWorker)return;this.sender=new KU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lb();return await lP(e,y1,"1"),await cP(e,y1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>lP(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>nV(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cP(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=wx(r,!1).getAll();return new T0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z3.type="LOCAL";const iV=z3;new F0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(s,e){return e?sc(e):(We(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF extends KF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return N2(e,this._buildIdpRequest())}_linkToIdToken(e,t){return N2(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return N2(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oV(s){return M3(s.auth,new JF(s),s.bypassAuthState)}function lV(s){const{auth:e,user:t}=s;return We(t,e,"internal-error"),BU(t,new JF(s),s.bypassAuthState)}async function cV(s){const{auth:e,user:t}=s;return We(t,e,"internal-error"),OU(t,new JF(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:u}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oV;case"linkViaPopup":case"linkViaRedirect":return cV;case"reauthViaPopup":case"reauthViaRedirect":return lV;default:Ra(this.auth,"internal-error")}}resolve(e){dc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV=new F0(2e3,1e4);class C2 extends H3{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,C2.currentPopupAction&&C2.currentPopupAction.cancel(),C2.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){dc(this.filter.length===1,"Popup operations only handle one event");const e=YF();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Oo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Oo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C2.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uV.get())};e()}}C2.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="pendingRedirect",vA=new Map;class hV extends H3{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=vA.get(this.auth._key());if(!e){try{const n=await pV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}vA.set(this.auth._key(),e)}return this.bypassAuthState||vA.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pV(s,e){const t=gV(e),n=mV(s);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function fV(s,e){vA.set(s._key(),e)}function mV(s){return sc(s._redirectPersistence)}function gV(s){return wA(dV,s.config.apiKey,s.name)}async function yV(s,e,t=!1){if(Ji(s.app))return Promise.reject(Gu(s));const n=bm(s),r=aV(n,e),a=await new hV(n,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=600*1e3;class vV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!W3(e)){const r=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Oo(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wV&&this.cachedEventUids.clear(),this.cachedEventUids.has(uP(e))}saveEventToCache(e){this.cachedEventUids.add(uP(e)),this.lastProcessedEventTime=Date.now()}}function uP(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function W3({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AV(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W3(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(s,e={}){return ud(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EV=/^https?/;async function bV(s){if(s.config.emulator)return;const{authorizedDomains:e}=await xV(s);for(const t of e)try{if(CV(t))return}catch{}Ra(s,"unauthorized-domain")}function CV(s){const e=Nb(),{protocol:t,hostname:n}=new URL(e);if(s.startsWith("chrome-extension://")){const a=new URL(s);return a.hostname===""&&n===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!EV.test(t))return!1;if(_V.test(s))return n===s;const r=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=new F0(3e4,6e4);function dP(){const s=Bo().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function SV(s){return new Promise((e,t)=>{var r,i,a;function n(){dP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dP(),t(Oo(s,"network-request-failed"))},timeout:FV.get()})}if((i=(r=Bo().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Bo().gapi)!=null&&a.load)n();else{const u=AU("iframefcb");return Bo()[u]=()=>{gapi.load?n():t(Oo(s,"network-request-failed"))},I3(`${vU()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw AA=null,e})}let AA=null;function TV(s){return AA=AA||SV(s),AA}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=new F0(5e3,15e3),IV="__/auth/iframe",PV="emulator/auth/iframe",RV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NV(s){const e=s.config;We(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?GF(e,PV):`https://${s.config.authDomain}/${IV}`,n={apiKey:e.apiKey,appName:s.name,v:_p},r=DV.get(s.config.apiHost);r&&(n.eid=r);const i=s._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${C0(n).slice(1)}`}async function MV(s){const e=await TV(s),t=Bo().gapi;return We(t,s,"internal-error"),e.open({where:document.body,url:NV(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RV,dontclear:!0},n=>new Promise(async(r,i)=>{await n.restyle({setHideOnLeave:!1});const a=Oo(s,"network-request-failed"),u=Bo().setTimeout(()=>{i(a)},kV.get());function d(){Bo().clearTimeout(u),r(n)}n.ping(d).then(d,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OV=500,BV=600,jV="_blank",UV="http://localhost";class hP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VV(s,e,t,n=OV,r=BV){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...LV,width:n.toString(),height:r.toString(),top:i,left:a},h=ts().toLowerCase();t&&(u=E3(h)?jV:t),x3(h)&&(e=e||UV,d.scrollbars="yes");const f=Object.entries(d).reduce((w,[v,F])=>`${w}${v}=${F},`,"");if(uU(h)&&u!=="_self")return $V(e||"",u),new hP(null);const g=window.open(e||"",u,f);We(g,s,"popup-blocked");try{g.focus()}catch{}return new hP(g)}function $V(s,e){const t=document.createElement("a");t.href=s,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV="__/auth/handler",HV="emulator/auth/handler",WV=encodeURIComponent("fac");async function pP(s,e,t,n,r,i){We(s.config.authDomain,s,"auth-domain-config-required"),We(s.config.apiKey,s,"invalid-api-key");const a={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:n,v:_p,eventId:r};if(e instanceof D3){e.setDefaultLanguage(s.languageCode),a.providerId=e.providerId||"",I5(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))a[f]=g}if(e instanceof S0){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(a.scopes=f.join(","))}s.tenantId&&(a.tid=s.tenantId);const u=a;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const d=await s._getAppCheckToken(),h=d?`#${WV}=${encodeURIComponent(d)}`:"";return`${GV(s)}?${C0(u).slice(1)}${h}`}function GV({config:s}){return s.emulator?GF(s,HV):`https://${s.authDomain}/${zV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="webStorageSupport";class qV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j3,this._completeRedirectFn=yV,this._overrideRedirectResult=fV}async _openPopup(e,t,n,r){var a;dc((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await pP(e,t,n,Nb(),r);return VV(e,i,YF())}async _openRedirect(e,t,n,r){await this._originValidation(e);const i=await pP(e,t,n,Nb(),r);return XU(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(dc(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await MV(e),n=new vV(e);return t.register("authEvent",r=>(We(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(BE,{type:BE},r=>{var a;const i=(a=r==null?void 0:r[0])==null?void 0:a[BE];i!==void 0&&t(!!i),Ra(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return T3()||_3()||QF()}}const QV=qV;var fP="@firebase/auth",mP="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YV(s){cp(new Xu("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=n.options;We(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:a,authDomain:u,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k3(s)},h=new gU(n,r,i,d);return FU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),cp(new Xu("auth-internal",e=>{const t=bm(e.getProvider("auth").getImmediate());return(n=>new KV(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lo(fP,mP,XV(s)),Lo(fP,mP,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=300,ZV=a3("authIdTokenMaxAge")||JV;let gP=null;const e8=s=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ZV)return;const r=t==null?void 0:t.token;gP!==r&&(gP=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function t8(s=HF()){const e=fx(s,"auth");if(e.isInitialized())return e.getImmediate();const t=CU(s,{popupRedirectResolver:QV,persistence:[iV,qU,j3]}),n=a3("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=e8(i.toString());zU(t,a,()=>a(t.currentUser)),$U(t,u=>a(u))}}const r=r3("auth");return r&&SU(t,`http://${r}`),t}function n8(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}yU({loadJS(s){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",s),n.onload=e,n.onerror=r=>{const i=Oo("internal-error");i.customData=r,t(i)},n.type="text/javascript",n.charset="UTF-8",n8().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YV("Browser");var yP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qu,G3;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function L(){}L.prototype=N.prototype,D.F=N.prototype,D.prototype=new L,D.prototype.constructor=D,D.D=function(V,$,K){for(var U=Array(arguments.length-2),me=2;me<arguments.length;me++)U[me-2]=arguments[me];return N.prototype[$].apply(V,U)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,N,L){L||(L=0);const V=Array(16);if(typeof N=="string")for(var $=0;$<16;++$)V[$]=N.charCodeAt(L++)|N.charCodeAt(L++)<<8|N.charCodeAt(L++)<<16|N.charCodeAt(L++)<<24;else for($=0;$<16;++$)V[$]=N[L++]|N[L++]<<8|N[L++]<<16|N[L++]<<24;N=D.g[0],L=D.g[1],$=D.g[2];let K=D.g[3],U;U=N+(K^L&($^K))+V[0]+3614090360&4294967295,N=L+(U<<7&4294967295|U>>>25),U=K+($^N&(L^$))+V[1]+3905402710&4294967295,K=N+(U<<12&4294967295|U>>>20),U=$+(L^K&(N^L))+V[2]+606105819&4294967295,$=K+(U<<17&4294967295|U>>>15),U=L+(N^$&(K^N))+V[3]+3250441966&4294967295,L=$+(U<<22&4294967295|U>>>10),U=N+(K^L&($^K))+V[4]+4118548399&4294967295,N=L+(U<<7&4294967295|U>>>25),U=K+($^N&(L^$))+V[5]+1200080426&4294967295,K=N+(U<<12&4294967295|U>>>20),U=$+(L^K&(N^L))+V[6]+2821735955&4294967295,$=K+(U<<17&4294967295|U>>>15),U=L+(N^$&(K^N))+V[7]+4249261313&4294967295,L=$+(U<<22&4294967295|U>>>10),U=N+(K^L&($^K))+V[8]+1770035416&4294967295,N=L+(U<<7&4294967295|U>>>25),U=K+($^N&(L^$))+V[9]+2336552879&4294967295,K=N+(U<<12&4294967295|U>>>20),U=$+(L^K&(N^L))+V[10]+4294925233&4294967295,$=K+(U<<17&4294967295|U>>>15),U=L+(N^$&(K^N))+V[11]+2304563134&4294967295,L=$+(U<<22&4294967295|U>>>10),U=N+(K^L&($^K))+V[12]+1804603682&4294967295,N=L+(U<<7&4294967295|U>>>25),U=K+($^N&(L^$))+V[13]+4254626195&4294967295,K=N+(U<<12&4294967295|U>>>20),U=$+(L^K&(N^L))+V[14]+2792965006&4294967295,$=K+(U<<17&4294967295|U>>>15),U=L+(N^$&(K^N))+V[15]+1236535329&4294967295,L=$+(U<<22&4294967295|U>>>10),U=N+($^K&(L^$))+V[1]+4129170786&4294967295,N=L+(U<<5&4294967295|U>>>27),U=K+(L^$&(N^L))+V[6]+3225465664&4294967295,K=N+(U<<9&4294967295|U>>>23),U=$+(N^L&(K^N))+V[11]+643717713&4294967295,$=K+(U<<14&4294967295|U>>>18),U=L+(K^N&($^K))+V[0]+3921069994&4294967295,L=$+(U<<20&4294967295|U>>>12),U=N+($^K&(L^$))+V[5]+3593408605&4294967295,N=L+(U<<5&4294967295|U>>>27),U=K+(L^$&(N^L))+V[10]+38016083&4294967295,K=N+(U<<9&4294967295|U>>>23),U=$+(N^L&(K^N))+V[15]+3634488961&4294967295,$=K+(U<<14&4294967295|U>>>18),U=L+(K^N&($^K))+V[4]+3889429448&4294967295,L=$+(U<<20&4294967295|U>>>12),U=N+($^K&(L^$))+V[9]+568446438&4294967295,N=L+(U<<5&4294967295|U>>>27),U=K+(L^$&(N^L))+V[14]+3275163606&4294967295,K=N+(U<<9&4294967295|U>>>23),U=$+(N^L&(K^N))+V[3]+4107603335&4294967295,$=K+(U<<14&4294967295|U>>>18),U=L+(K^N&($^K))+V[8]+1163531501&4294967295,L=$+(U<<20&4294967295|U>>>12),U=N+($^K&(L^$))+V[13]+2850285829&4294967295,N=L+(U<<5&4294967295|U>>>27),U=K+(L^$&(N^L))+V[2]+4243563512&4294967295,K=N+(U<<9&4294967295|U>>>23),U=$+(N^L&(K^N))+V[7]+1735328473&4294967295,$=K+(U<<14&4294967295|U>>>18),U=L+(K^N&($^K))+V[12]+2368359562&4294967295,L=$+(U<<20&4294967295|U>>>12),U=N+(L^$^K)+V[5]+4294588738&4294967295,N=L+(U<<4&4294967295|U>>>28),U=K+(N^L^$)+V[8]+2272392833&4294967295,K=N+(U<<11&4294967295|U>>>21),U=$+(K^N^L)+V[11]+1839030562&4294967295,$=K+(U<<16&4294967295|U>>>16),U=L+($^K^N)+V[14]+4259657740&4294967295,L=$+(U<<23&4294967295|U>>>9),U=N+(L^$^K)+V[1]+2763975236&4294967295,N=L+(U<<4&4294967295|U>>>28),U=K+(N^L^$)+V[4]+1272893353&4294967295,K=N+(U<<11&4294967295|U>>>21),U=$+(K^N^L)+V[7]+4139469664&4294967295,$=K+(U<<16&4294967295|U>>>16),U=L+($^K^N)+V[10]+3200236656&4294967295,L=$+(U<<23&4294967295|U>>>9),U=N+(L^$^K)+V[13]+681279174&4294967295,N=L+(U<<4&4294967295|U>>>28),U=K+(N^L^$)+V[0]+3936430074&4294967295,K=N+(U<<11&4294967295|U>>>21),U=$+(K^N^L)+V[3]+3572445317&4294967295,$=K+(U<<16&4294967295|U>>>16),U=L+($^K^N)+V[6]+76029189&4294967295,L=$+(U<<23&4294967295|U>>>9),U=N+(L^$^K)+V[9]+3654602809&4294967295,N=L+(U<<4&4294967295|U>>>28),U=K+(N^L^$)+V[12]+3873151461&4294967295,K=N+(U<<11&4294967295|U>>>21),U=$+(K^N^L)+V[15]+530742520&4294967295,$=K+(U<<16&4294967295|U>>>16),U=L+($^K^N)+V[2]+3299628645&4294967295,L=$+(U<<23&4294967295|U>>>9),U=N+($^(L|~K))+V[0]+4096336452&4294967295,N=L+(U<<6&4294967295|U>>>26),U=K+(L^(N|~$))+V[7]+1126891415&4294967295,K=N+(U<<10&4294967295|U>>>22),U=$+(N^(K|~L))+V[14]+2878612391&4294967295,$=K+(U<<15&4294967295|U>>>17),U=L+(K^($|~N))+V[5]+4237533241&4294967295,L=$+(U<<21&4294967295|U>>>11),U=N+($^(L|~K))+V[12]+1700485571&4294967295,N=L+(U<<6&4294967295|U>>>26),U=K+(L^(N|~$))+V[3]+2399980690&4294967295,K=N+(U<<10&4294967295|U>>>22),U=$+(N^(K|~L))+V[10]+4293915773&4294967295,$=K+(U<<15&4294967295|U>>>17),U=L+(K^($|~N))+V[1]+2240044497&4294967295,L=$+(U<<21&4294967295|U>>>11),U=N+($^(L|~K))+V[8]+1873313359&4294967295,N=L+(U<<6&4294967295|U>>>26),U=K+(L^(N|~$))+V[15]+4264355552&4294967295,K=N+(U<<10&4294967295|U>>>22),U=$+(N^(K|~L))+V[6]+2734768916&4294967295,$=K+(U<<15&4294967295|U>>>17),U=L+(K^($|~N))+V[13]+1309151649&4294967295,L=$+(U<<21&4294967295|U>>>11),U=N+($^(L|~K))+V[4]+4149444226&4294967295,N=L+(U<<6&4294967295|U>>>26),U=K+(L^(N|~$))+V[11]+3174756917&4294967295,K=N+(U<<10&4294967295|U>>>22),U=$+(N^(K|~L))+V[2]+718787259&4294967295,$=K+(U<<15&4294967295|U>>>17),U=L+(K^($|~N))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+($+(U<<21&4294967295|U>>>11))&4294967295,D.g[2]=D.g[2]+$&4294967295,D.g[3]=D.g[3]+K&4294967295}n.prototype.v=function(D,N){N===void 0&&(N=D.length);const L=N-this.blockSize,V=this.C;let $=this.h,K=0;for(;K<N;){if($==0)for(;K<=L;)r(this,D,K),K+=this.blockSize;if(typeof D=="string"){for(;K<N;)if(V[$++]=D.charCodeAt(K++),$==this.blockSize){r(this,V),$=0;break}}else for(;K<N;)if(V[$++]=D[K++],$==this.blockSize){r(this,V),$=0;break}}this.h=$,this.o+=N},n.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;N=this.o*8;for(var L=D.length-8;L<D.length;++L)D[L]=N&255,N/=256;for(this.v(D),D=Array(16),N=0,L=0;L<4;++L)for(let V=0;V<32;V+=8)D[N++]=this.g[L]>>>V&255;return D};function i(D,N){var L=u;return Object.prototype.hasOwnProperty.call(L,D)?L[D]:L[D]=N(D)}function a(D,N){this.h=N;const L=[];let V=!0;for(let $=D.length-1;$>=0;$--){const K=D[$]|0;V&&K==N||(L[$]=K,V=!1)}this.g=L}var u={};function d(D){return-128<=D&&D<128?i(D,function(N){return new a([N|0],N<0?-1:0)}):new a([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return S(h(-D));const N=[];let L=1;for(let V=0;D>=L;V++)N[V]=D/L|0,L*=4294967296;return new a(N,0)}function f(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return S(f(D.substring(1),N));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=h(Math.pow(N,8));let V=g;for(let K=0;K<D.length;K+=8){var $=Math.min(8,D.length-K);const U=parseInt(D.substring(K,K+$),N);$<8?($=h(Math.pow(N,$)),V=V.j($).add(h(U))):(V=V.j(L),V=V.add(h(U)))}return V}var g=d(0),w=d(1),v=d(16777216);s=a.prototype,s.m=function(){if(C(this))return-S(this).m();let D=0,N=1;for(let L=0;L<this.g.length;L++){const V=this.i(L);D+=(V>=0?V:4294967296+V)*N,N*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(F(this))return"0";if(C(this))return"-"+S(this).toString(D);const N=h(Math.pow(D,6));var L=this;let V="";for(;;){const $=B(L,N).g;L=I(L,$.j(N));let K=((L.g.length>0?L.g[0]:L.h)>>>0).toString(D);if(L=$,F(L))return K+V;for(;K.length<6;)K="0"+K;V=K+V}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function F(D){if(D.h!=0)return!1;for(let N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function C(D){return D.h==-1}s.l=function(D){return D=I(this,D),C(D)?-1:F(D)?0:1};function S(D){const N=D.g.length,L=[];for(let V=0;V<N;V++)L[V]=~D.g[V];return new a(L,~D.h).add(w)}s.abs=function(){return C(this)?S(this):this},s.add=function(D){const N=Math.max(this.g.length,D.g.length),L=[];let V=0;for(let $=0;$<=N;$++){let K=V+(this.i($)&65535)+(D.i($)&65535),U=(K>>>16)+(this.i($)>>>16)+(D.i($)>>>16);V=U>>>16,K&=65535,U&=65535,L[$]=U<<16|K}return new a(L,L[L.length-1]&-2147483648?-1:0)};function I(D,N){return D.add(S(N))}s.j=function(D){if(F(this)||F(D))return g;if(C(this))return C(D)?S(this).j(S(D)):S(S(this).j(D));if(C(D))return S(this.j(S(D)));if(this.l(v)<0&&D.l(v)<0)return h(this.m()*D.m());const N=this.g.length+D.g.length,L=[];for(var V=0;V<2*N;V++)L[V]=0;for(V=0;V<this.g.length;V++)for(let $=0;$<D.g.length;$++){const K=this.i(V)>>>16,U=this.i(V)&65535,me=D.i($)>>>16,Ae=D.i($)&65535;L[2*V+2*$]+=U*Ae,O(L,2*V+2*$),L[2*V+2*$+1]+=K*Ae,O(L,2*V+2*$+1),L[2*V+2*$+1]+=U*me,O(L,2*V+2*$+1),L[2*V+2*$+2]+=K*me,O(L,2*V+2*$+2)}for(D=0;D<N;D++)L[D]=L[2*D+1]<<16|L[2*D];for(D=N;D<2*N;D++)L[D]=0;return new a(L,0)};function O(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function R(D,N){this.g=D,this.h=N}function B(D,N){if(F(N))throw Error("division by zero");if(F(D))return new R(g,g);if(C(D))return N=B(S(D),N),new R(S(N.g),S(N.h));if(C(N))return N=B(D,S(N)),new R(S(N.g),N.h);if(D.g.length>30){if(C(D)||C(N))throw Error("slowDivide_ only works with positive integers.");for(var L=w,V=N;V.l(D)<=0;)L=z(L),V=z(V);var $=W(L,1),K=W(V,1);for(V=W(V,2),L=W(L,2);!F(V);){var U=K.add(V);U.l(D)<=0&&($=$.add(L),K=U),V=W(V,1),L=W(L,1)}return N=I(D,$.j(N)),new R($,N)}for($=g;D.l(N)>=0;){for(L=Math.max(1,Math.floor(D.m()/N.m())),V=Math.ceil(Math.log(L)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),K=h(L),U=K.j(N);C(U)||U.l(D)>0;)L-=V,K=h(L),U=K.j(N);F(K)&&(K=w),$=$.add(K),D=I(D,U)}return new R($,D)}s.B=function(D){return B(this,D).h},s.and=function(D){const N=Math.max(this.g.length,D.g.length),L=[];for(let V=0;V<N;V++)L[V]=this.i(V)&D.i(V);return new a(L,this.h&D.h)},s.or=function(D){const N=Math.max(this.g.length,D.g.length),L=[];for(let V=0;V<N;V++)L[V]=this.i(V)|D.i(V);return new a(L,this.h|D.h)},s.xor=function(D){const N=Math.max(this.g.length,D.g.length),L=[];for(let V=0;V<N;V++)L[V]=this.i(V)^D.i(V);return new a(L,this.h^D.h)};function z(D){const N=D.g.length+1,L=[];for(let V=0;V<N;V++)L[V]=D.i(V)<<1|D.i(V-1)>>>31;return new a(L,D.h)}function W(D,N){const L=N>>5;N%=32;const V=D.g.length-L,$=[];for(let K=0;K<V;K++)$[K]=N>0?D.i(K+L)>>>N|D.i(K+L+1)<<32-N:D.i(K+L);return new a($,D.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,G3=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,qu=a}).apply(typeof yP<"u"?yP:typeof self<"u"?self:typeof window<"u"?window:{});var Yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q3,Pg,Q3,xA,Ob,K3,X3,Y3;(function(){var s,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yv=="object"&&Yv];for(var b=0;b<m.length;++b){var k=m[b];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var n=t(this);function r(m,b){if(b)e:{var k=n;m=m.split(".");for(var j=0;j<m.length-1;j++){var te=m[j];if(!(te in k))break e;k=k[te]}m=m[m.length-1],j=k[m],b=b(j),b!=j&&b!=null&&e(k,m,{configurable:!0,writable:!0,value:b})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(b){var k=[],j;for(j in b)Object.prototype.hasOwnProperty.call(b,j)&&k.push([j,b[j]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function u(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function d(m,b,k){return m.call.apply(m.bind,arguments)}function h(m,b,k){return h=d,h.apply(null,arguments)}function f(m,b){var k=Array.prototype.slice.call(arguments,1);return function(){var j=k.slice();return j.push.apply(j,arguments),m.apply(this,j)}}function g(m,b){function k(){}k.prototype=b.prototype,m.Z=b.prototype,m.prototype=new k,m.prototype.constructor=m,m.Ob=function(j,te,ie){for(var ve=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)ve[Je-2]=arguments[Je];return b.prototype[te].apply(j,ve)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function v(m){const b=m.length;if(b>0){const k=Array(b);for(let j=0;j<b;j++)k[j]=m[j];return k}return[]}function F(m,b){for(let j=1;j<arguments.length;j++){const te=arguments[j];var k=typeof te;if(k=k!="object"?k:te?Array.isArray(te)?"array":k:"null",k=="array"||k=="object"&&typeof te.length=="number"){k=m.length||0;const ie=te.length||0;m.length=k+ie;for(let ve=0;ve<ie;ve++)m[k+ve]=te[ve]}else m.push(te)}}class C{constructor(b,k){this.i=b,this.j=k,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function S(m){a.setTimeout(()=>{throw m},0)}function I(){var m=D;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class O{constructor(){this.h=this.g=null}add(b,k){const j=R.get();j.set(b,k),this.h?this.h.next=j:this.g=j,this.h=j}}var R=new C(()=>new B,m=>m.reset());class B{constructor(){this.next=this.g=this.h=null}set(b,k){this.h=b,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let z,W=!1,D=new O,N=()=>{const m=Promise.resolve(void 0);z=()=>{m.then(L)}};function L(){for(var m;m=I();){try{m.h.call(m.g)}catch(k){S(k)}var b=R;b.j(m),b.h<100&&(b.h++,m.next=b.g,b.g=m)}W=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var K=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const k=()=>{};a.addEventListener("test",k,b),a.removeEventListener("test",k,b)}catch{}return m})();function U(m){return/^[\s\xa0]*$/.test(m)}function me(m,b){$.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,b)}g(me,$),me.prototype.init=function(m,b){const k=this.type=m.type,j=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget,b||(k=="mouseover"?b=m.fromElement:k=="mouseout"&&(b=m.toElement)),this.relatedTarget=b,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ae="closure_listenable_"+(Math.random()*1e6|0),we=0;function fe(m,b,k,j,te){this.listener=m,this.proxy=null,this.src=b,this.type=k,this.capture=!!j,this.ha=te,this.key=++we,this.da=this.fa=!1}function le(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Z(m,b,k){for(const j in m)b.call(k,m[j],j,m)}function J(m,b){for(const k in m)b.call(void 0,m[k],k,m)}function H(m){const b={};for(const k in m)b[k]=m[k];return b}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(m,b){let k,j;for(let te=1;te<arguments.length;te++){j=arguments[te];for(k in j)m[k]=j[k];for(let ie=0;ie<Q.length;ie++)k=Q[ie],Object.prototype.hasOwnProperty.call(j,k)&&(m[k]=j[k])}}function ye(m){this.src=m,this.g={},this.h=0}ye.prototype.add=function(m,b,k,j,te){const ie=m.toString();m=this.g[ie],m||(m=this.g[ie]=[],this.h++);const ve=Ee(m,b,j,te);return ve>-1?(b=m[ve],k||(b.fa=!1)):(b=new fe(b,this.src,ie,!!j,te),b.fa=k,m.push(b)),b};function xe(m,b){const k=b.type;if(k in m.g){var j=m.g[k],te=Array.prototype.indexOf.call(j,b,void 0),ie;(ie=te>=0)&&Array.prototype.splice.call(j,te,1),ie&&(le(b),m.g[k].length==0&&(delete m.g[k],m.h--))}}function Ee(m,b,k,j){for(let te=0;te<m.length;++te){const ie=m[te];if(!ie.da&&ie.listener==b&&ie.capture==!!k&&ie.ha==j)return te}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),Ue={};function Ce(m,b,k,j,te){if(Array.isArray(b)){for(let ie=0;ie<b.length;ie++)Ce(m,b[ie],k,j,te);return null}return k=La(k),m&&m[Ae]?m.J(b,k,u(j)?!!j.capture:!1,te):Me(m,b,k,!1,j,te)}function Me(m,b,k,j,te,ie){if(!b)throw Error("Invalid event type");const ve=u(te)?!!te.capture:!!te;let Je=Br(m);if(Je||(m[Se]=Je=new ye(m)),k=Je.add(b,k,j,ve,ie),k.proxy)return k;if(j=st(),k.proxy=j,j.src=m,j.listener=k,m.addEventListener)K||(te=ve),te===void 0&&(te=!1),m.addEventListener(b.toString(),j,te);else if(m.attachEvent)m.attachEvent(yn(b.toString()),j);else if(m.addListener&&m.removeListener)m.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return k}function st(){function m(k){return b.call(m.src,m.listener,k)}const b=Bs;return m}function Et(m,b,k,j,te){if(Array.isArray(b))for(var ie=0;ie<b.length;ie++)Et(m,b[ie],k,j,te);else j=u(j)?!!j.capture:!!j,k=La(k),m&&m[Ae]?(m=m.i,ie=String(b).toString(),ie in m.g&&(b=m.g[ie],k=Ee(b,k,j,te),k>-1&&(le(b[k]),Array.prototype.splice.call(b,k,1),b.length==0&&(delete m.g[ie],m.h--)))):m&&(m=Br(m))&&(b=m.g[b.toString()],m=-1,b&&(m=Ee(b,k,j,te)),(k=m>-1?b[m]:null)&&Lt(k))}function Lt(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[Ae])xe(b.i,m);else{var k=m.type,j=m.proxy;b.removeEventListener?b.removeEventListener(k,j,m.capture):b.detachEvent?b.detachEvent(yn(k),j):b.addListener&&b.removeListener&&b.removeListener(j),(k=Br(b))?(xe(k,m),k.h==0&&(k.src=null,b[Se]=null)):le(m)}}}function yn(m){return m in Ue?Ue[m]:Ue[m]="on"+m}function Bs(m,b){if(m.da)m=!0;else{b=new me(b,this);const k=m.listener,j=m.ha||m.src;m.fa&&Lt(m),m=k.call(j,b)}return m}function Br(m){return m=m[Se],m instanceof ye?m:null}var ms="__closure_events_fn_"+(Math.random()*1e9>>>0);function La(m){return typeof m=="function"?m:(m[ms]||(m[ms]=function(b){return m.handleEvent(b)}),m[ms])}function Ot(){V.call(this),this.i=new ye(this),this.M=this,this.G=null}g(Ot,V),Ot.prototype[Ae]=!0,Ot.prototype.removeEventListener=function(m,b,k,j){Et(this,m,b,k,j)};function Pt(m,b){var k,j=m.G;if(j)for(k=[];j;j=j.G)k.push(j);if(m=m.M,j=b.type||b,typeof b=="string")b=new $(b,m);else if(b instanceof $)b.target=b.target||m;else{var te=b;b=new $(j,m),ae(b,te)}te=!0;let ie,ve;if(k)for(ve=k.length-1;ve>=0;ve--)ie=b.g=k[ve],te=ln(ie,j,!0,b)&&te;if(ie=b.g=m,te=ln(ie,j,!0,b)&&te,te=ln(ie,j,!1,b)&&te,k)for(ve=0;ve<k.length;ve++)ie=b.g=k[ve],te=ln(ie,j,!1,b)&&te}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var m=this.i;for(const b in m.g){const k=m.g[b];for(let j=0;j<k.length;j++)le(k[j]);delete m.g[b],m.h--}}this.G=null},Ot.prototype.J=function(m,b,k,j){return this.i.add(String(m),b,!1,k,j)},Ot.prototype.K=function(m,b,k,j){return this.i.add(String(m),b,!0,k,j)};function ln(m,b,k,j){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();let te=!0;for(let ie=0;ie<b.length;++ie){const ve=b[ie];if(ve&&!ve.da&&ve.capture==k){const Je=ve.listener,Nn=ve.ha||ve.src;ve.fa&&xe(m.i,ve),te=Je.call(Nn,j)!==!1&&te}}return te&&!j.defaultPrevented}function fd(m,b){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:a.setTimeout(m,b||0)}function gs(m){m.g=fd(()=>{m.g=null,m.i&&(m.i=!1,gs(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class Ip extends V{constructor(b,k){super(),this.m=b,this.l=k,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:gs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(m){V.call(this),this.h=m,this.g={}}g(Bt,V);var sa=[];function Qt(m){Z(m.g,function(b,k){this.g.hasOwnProperty(k)&&Lt(b)},m),m.g={}}Bt.prototype.N=function(){Bt.Z.N.call(this),Qt(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ys=a.JSON.stringify,js=a.JSON.parse,ws=class{stringify(m){return a.JSON.stringify(m,void 0)}parse(m){return a.JSON.parse(m,void 0)}};function Un(){}function Oa(){}var or={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ci(){$.call(this,"d")}g(Ci,$);function wc(){$.call(this,"c")}g(wc,$);var vr={},Ba=null;function Ar(){return Ba=Ba||new Ot}vr.Ia="serverreachability";function Yn(m){$.call(this,vr.Ia,m)}g(Yn,$);function jr(m){const b=Ar();Pt(b,new Yn(b))}vr.STAT_EVENT="statevent";function Fi(m,b){$.call(this,vr.STAT_EVENT,m),this.stat=b}g(Fi,$);function cn(m){const b=Ar();Pt(b,new Fi(b,m))}vr.Ja="timingevent";function md(m,b){$.call(this,vr.Ja,m),this.size=b}g(md,$);function ja(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){m()},b)}function Ua(){this.g=!0}Ua.prototype.ua=function(){this.g=!1};function Pp(m,b,k,j,te,ie){m.info(function(){if(m.g)if(ie){var ve="",Je=ie.split("&");for(let Rt=0;Rt<Je.length;Rt++){var Nn=Je[Rt].split("=");if(Nn.length>1){const Vn=Nn[0];Nn=Nn[1];const Gs=Vn.split("_");ve=Gs.length>=2&&Gs[1]=="type"?ve+(Vn+"="+Nn+"&"):ve+(Vn+"=redacted&")}}}else ve=null;else ve=ie;return"XMLHTTP REQ ("+j+") [attempt "+te+"]: "+b+`
`+k+`
`+ve})}function Rp(m,b,k,j,te,ie,ve){m.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+te+"]: "+b+`
`+k+`
`+ie+" "+ve})}function Si(m,b,k,j){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+Jo(m,k)+(j?" "+j:"")})}function Dp(m,b){m.info(function(){return"TIMEOUT: "+b})}Ua.prototype.info=function(){};function Jo(m,b){if(!m.g)return b;if(!b)return null;try{const ie=JSON.parse(b);if(ie){for(m=0;m<ie.length;m++)if(Array.isArray(ie[m])){var k=ie[m];if(!(k.length<2)){var j=k[1];if(Array.isArray(j)&&!(j.length<1)){var te=j[0];if(te!="noop"&&te!="stop"&&te!="close")for(let ve=1;ve<j.length;ve++)j[ve]=""}}}}return ys(ie)}catch{return b}}var Va={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$a={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gd;function ia(){}g(ia,Un),ia.prototype.g=function(){return new XMLHttpRequest},gd=new ia;function Ti(m){return encodeURIComponent(String(m))}function Zo(m){var b=1;m=m.split(":");const k=[];for(;b>0&&m.length;)k.push(m.shift()),b--;return m.length&&k.push(m.join(":")),k}function re(m,b,k,j){this.j=m,this.i=b,this.l=k,this.S=j||1,this.V=new Bt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}var ke={},bt={};function Kt(m,b,k){m.M=1,m.A=tl(ki(b)),m.u=k,m.R=!0,un(m,null)}function un(m,b){m.F=Date.now(),Xt(m),m.B=ki(m.A);var k=m.B,j=m.S;Array.isArray(j)||(j=[String(j)]),Um(k.i,"t",j),m.C=0,k=m.j.L,m.h=new _e,m.g=Y0(m.j,k?b:null,!m.u),m.P>0&&(m.O=new Ip(h(m.Y,m,m.g),m.P)),b=m.V,k=m.g,j=m.ba;var te="readystatechange";Array.isArray(te)||(te&&(sa[0]=te.toString()),te=sa);for(let ie=0;ie<te.length;ie++){const ve=Ce(k,te[ie],j||b.handleEvent,!1,b.h||b);if(!ve)break;b.g[ve.key]=ve}b=m.J?H(m.J):{},m.u?(m.v||(m.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,b)):(m.v="GET",m.g.ea(m.B,m.v,null,b)),jr(),Pp(m.i,m.v,m.B,m.l,m.S,m.u)}re.prototype.ba=function(m){m=m.target;const b=this.O;b&&Ka(m)==3?b.j():this.Y(m)},re.prototype.Y=function(m){try{if(m==this.g)e:{const Je=Ka(this.g),Nn=this.g.ya(),Rt=this.g.ca();if(!(Je<3)&&(Je!=3||this.g&&(this.h.h||this.g.la()||K0(this.g)))){this.K||Je!=4||Nn==7||(Nn==8||Rt<=0?jr(3):jr(2)),vc(this);var b=this.g.ca();this.X=b;var k=ft(this);if(this.o=b==200,Rp(this.i,this.v,this.B,this.l,this.S,Je,b),this.o){if(this.U&&!this.L){t:{if(this.g){var j,te=this.g;if((j=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(j)){var ie=j;break t}}ie=null}if(m=ie)Si(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nn(this,m);else{this.o=!1,this.m=3,cn(12),el(this),Us(this);break e}}if(this.R){m=!0;let Vn;for(;!this.K&&this.C<k.length;)if(Vn=ot(this,k),Vn==bt){Je==4&&(this.m=4,cn(14),m=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==ke){this.m=4,cn(15),Si(this.i,this.l,k,"[Invalid Chunk]"),m=!1;break}else Si(this.i,this.l,Vn,null),nn(this,Vn);if(At(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||k.length!=0||this.h.h||(this.m=1,cn(16),m=!1),this.o=this.o&&m,!m)Si(this.i,this.l,k,"[Invalid Chunked Response]"),el(this),Us(this);else if(k.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Cd(ve),ve.P=!0,cn(11))}}else Si(this.i,this.l,k,null),nn(this,k);Je==4&&el(this),this.o&&!this.K&&(Je==4?zp(this.j,this):(this.o=!1,Xt(this)))}else $m(this.g),b==400&&k.indexOf("Unknown SID")>0?(this.m=3,cn(12)):(this.m=0,cn(13)),el(this),Us(this)}}}catch{}finally{}};function ft(m){if(!At(m))return m.g.la();const b=K0(m.g);if(b==="")return"";let k="";const j=b.length,te=Ka(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return el(m),Us(m),"";m.h.i=new a.TextDecoder}for(let ie=0;ie<j;ie++)m.h.h=!0,k+=m.h.i.decode(b[ie],{stream:!(te&&ie==j-1)});return b.length=0,m.h.g+=k,m.C=0,m.h.g}function At(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function ot(m,b){var k=m.C,j=b.indexOf(`
`,k);return j==-1?bt:(k=Number(b.substring(k,j)),isNaN(k)?ke:(j+=1,j+k>b.length?bt:(b=b.slice(j,j+k),m.C=j+k,b)))}re.prototype.cancel=function(){this.K=!0,el(this)};function Xt(m){m.T=Date.now()+m.H,ns(m,m.H)}function ns(m,b){if(m.D!=null)throw Error("WatchDog timer not null");m.D=ja(h(m.aa,m),b)}function vc(m){m.D&&(a.clearTimeout(m.D),m.D=null)}re.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Dp(this.i,this.B),this.M!=2&&(jr(),cn(17)),el(this),this.m=2,Us(this)):ns(this,this.T-m)};function Us(m){m.j.I==0||m.K||zp(m.j,m)}function el(m){vc(m);var b=m.O;b&&typeof b.dispose=="function"&&b.dispose(),m.O=null,Qt(m.V),m.g&&(b=m.g,m.g=null,b.abort(),b.dispose())}function nn(m,b){try{var k=m.j;if(k.I!=0&&(k.g==m||Dm(k.h,m))){if(!m.L&&Dm(k.h,m)&&k.I==3){try{var j=k.Ba.g.parse(b)}catch{j=null}if(Array.isArray(j)&&j.length==3){var te=j;if(te[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<m.F)$p(k),Hs(k);else break e;Ja(k),cn(18)}}else k.xa=te[1],0<k.xa-k.K&&te[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=ja(h(k.Va,k),6e3));yd(k.h)<=1&&k.ta&&(k.ta=void 0)}else Ws(k,11)}else if((m.L||k.g==m)&&$p(k),!U(b))for(te=k.Ba.g.parse(b),b=0;b<te.length;b++){let Rt=te[b];const Vn=Rt[0];if(!(Vn<=k.K))if(k.K=Vn,Rt=Rt[1],k.I==2)if(Rt[0]=="c"){k.M=Rt[1],k.ba=Rt[2];const Gs=Rt[3];Gs!=null&&(k.ka=Gs,k.j.info("VER="+k.ka));const al=Rt[4];al!=null&&(k.za=al,k.j.info("SVER="+k.za));const Za=Rt[5];Za!=null&&typeof Za=="number"&&Za>0&&(j=1.5*Za,k.O=j,k.j.info("backChannelRequestTimeoutMs_="+j)),j=k;const eo=m.g;if(eo){const Gp=eo.g?eo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gp){var ie=j.h;ie.g||Gp.indexOf("spdy")==-1&&Gp.indexOf("quic")==-1&&Gp.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Mp(ie,ie.h),ie.h=null))}if(j.G){const Wm=eo.g?eo.g.getResponseHeader("X-HTTP-Session-Id"):null;Wm&&(j.wa=Wm,Ct(j.J,j.G,Wm))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-m.F,k.j.info("Handshake RTT: "+k.T+"ms")),j=k;var ve=m;if(j.na=Hm(j,j.L?j.ba:null,j.W),ve.L){wd(j.h,ve);var Je=ve,Nn=j.O;Nn&&(Je.H=Nn),Je.D&&(vc(Je),Xt(Je)),j.g=ve}else Ur(j);k.i.length>0&&il(k)}else Rt[0]!="stop"&&Rt[0]!="close"||Ws(k,7);else k.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Ws(k,7):Up(k):Rt[0]!="noop"&&k.l&&k.l.qa(Rt),k.A=0)}}jr(4)}catch{}}var e_=class{constructor(m,b){this.g=m,this.map=b}};function Np(m){this.l=m||10,a.PerformanceNavigationTiming?(m=a.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rm(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function yd(m){return m.h?1:m.g?m.g.size:0}function Dm(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function Mp(m,b){m.g?m.g.add(b):m.h=b}function wd(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Np.prototype.cancel=function(){if(this.i=Vs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Vs(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const k of m.g.values())b=b.concat(k.G);return b}return v(m.i)}var W0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $s(m,b){if(m){m=m.split("&");for(let k=0;k<m.length;k++){const j=m[k].indexOf("=");let te,ie=null;j>=0?(te=m[k].substring(0,j),ie=m[k].substring(j+1)):te=m[k],b(te,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function za(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;m instanceof za?(this.l=m.l,vd(this,m.j),this.o=m.o,this.g=m.g,Ha(this,m.u),this.h=m.h,Ac(this,Vm(m.i)),this.m=m.m):m&&(b=String(m).match(W0))?(this.l=!1,vd(this,b[1]||"",!0),this.o=Ad(b[2]||""),this.g=Ad(b[3]||"",!0),Ha(this,b[4]),this.h=Ad(b[5]||"",!0),Ac(this,b[6]||"",!0),this.m=Ad(b[7]||"")):(this.l=!1,this.i=new ht(null,this.l))}za.prototype.toString=function(){const m=[];var b=this.j;b&&m.push(xd(b,Mm,!0),":");var k=this.g;return(k||b=="file")&&(m.push("//"),(b=this.o)&&m.push(xd(b,Mm,!0),"@"),m.push(Ti(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&m.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&m.push("/"),m.push(xd(k,k.charAt(0)=="/"?_d:Lm,!0))),(k=this.i.toString())&&m.push("?",k),(k=this.m)&&m.push("#",xd(k,Om)),m.join("")},za.prototype.resolve=function(m){const b=ki(this);let k=!!m.j;k?vd(b,m.j):k=!!m.o,k?b.o=m.o:k=!!m.g,k?b.g=m.g:k=m.u!=null;var j=m.h;if(k)Ha(b,m.u);else if(k=!!m.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var te=b.h.lastIndexOf("/");te!=-1&&(j=b.h.slice(0,te+1)+j)}if(te=j,te==".."||te==".")j="";else if(te.indexOf("./")!=-1||te.indexOf("/.")!=-1){j=te.lastIndexOf("/",0)==0,te=te.split("/");const ie=[];for(let ve=0;ve<te.length;){const Je=te[ve++];Je=="."?j&&ve==te.length&&ie.push(""):Je==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),j&&ve==te.length&&ie.push("")):(ie.push(Je),j=!0)}j=ie.join("/")}else j=te}return k?b.h=j:k=m.i.toString()!=="",k?Ac(b,Vm(m.i)):k=!!m.m,k&&(b.m=m.m),b};function ki(m){return new za(m)}function vd(m,b,k){m.j=k?Ad(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function Ha(m,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);m.u=b}else m.u=null}function Ac(m,b,k){b instanceof ht?(m.i=b,Op(m.i,m.l)):(k||(b=xd(b,t_)),m.i=new ht(b,m.l))}function Ct(m,b,k){m.i.set(b,k)}function tl(m){return Ct(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ad(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function xd(m,b,k){return typeof m=="string"?(m=encodeURI(m).replace(b,Nm),k&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Nm(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Mm=/[#\/\?@]/g,Lm=/[#\?:]/g,_d=/[#\?]/g,t_=/[#\?@]/g,Om=/#/g;function ht(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function Wa(m){m.g||(m.g=new Map,m.h=0,m.i&&$s(m.i,function(b,k){m.add(decodeURIComponent(b.replace(/\+/g," ")),k)}))}s=ht.prototype,s.add=function(m,b){Wa(this),this.i=null,m=Ga(this,m);let k=this.g.get(m);return k||this.g.set(m,k=[]),k.push(b),this.h+=1,this};function Bm(m,b){Wa(m),b=Ga(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Lp(m,b){return Wa(m),b=Ga(m,b),m.g.has(b)}s.forEach=function(m,b){Wa(this),this.g.forEach(function(k,j){k.forEach(function(te){m.call(b,te,j,this)},this)},this)};function jm(m,b){Wa(m);let k=[];if(typeof b=="string")Lp(m,b)&&(k=k.concat(m.g.get(Ga(m,b))));else for(m=Array.from(m.g.values()),b=0;b<m.length;b++)k=k.concat(m[b]);return k}s.set=function(m,b){return Wa(this),this.i=null,m=Ga(this,m),Lp(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},s.get=function(m,b){return m?(m=jm(this,m),m.length>0?String(m[0]):b):b};function Um(m,b,k){Bm(m,b),k.length>0&&(m.i=null,m.g.set(Ga(m,b),v(k)),m.h+=k.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(let j=0;j<b.length;j++){var k=b[j];const te=Ti(k);k=jm(this,k);for(let ie=0;ie<k.length;ie++){let ve=te;k[ie]!==""&&(ve+="="+Ti(k[ie])),m.push(ve)}}return this.i=m.join("&")};function Vm(m){const b=new ht;return b.i=m.i,m.g&&(b.g=new Map(m.g),b.h=m.h),b}function Ga(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function Op(m,b){b&&!m.j&&(Wa(m),m.i=null,m.g.forEach(function(k,j){const te=j.toLowerCase();j!=te&&(Bm(this,j),Um(this,te,k))},m)),m.j=b}function qa(m,b){const k=new Ua;if(a.Image){const j=new Image;j.onload=f(xr,k,"TestLoadImage: loaded",!0,b,j),j.onerror=f(xr,k,"TestLoadImage: error",!1,b,j),j.onabort=f(xr,k,"TestLoadImage: abort",!1,b,j),j.ontimeout=f(xr,k,"TestLoadImage: timeout",!1,b,j),a.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=m}else b(!1)}function Qa(m,b){const k=new Ua,j=new AbortController,te=setTimeout(()=>{j.abort(),xr(k,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:j.signal}).then(ie=>{clearTimeout(te),ie.ok?xr(k,"TestPingServer: ok",!0,b):xr(k,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(te),xr(k,"TestPingServer: error",!1,b)})}function xr(m,b,k,j,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),j(k)}catch{}}function Ed(){this.g=new ws}function nl(m){this.i=m.Sb||null,this.h=m.ab||!1}g(nl,Un),nl.prototype.g=function(){return new zs(this.i,this.h)};function zs(m,b){Ot.call(this),this.H=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(zs,Ot),s=zs.prototype,s.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=b,this.readyState=1,aa(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(b.body=m),(this.H||a).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xc(this)),this.readyState=0},s.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;G0(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function G0(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}s.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?xc(this):aa(this),this.readyState==3&&G0(this)}},s.Oa=function(m){this.g&&(this.response=this.responseText=m,xc(this))},s.Na=function(m){this.g&&(this.response=m,xc(this))},s.ga=function(){this.g&&xc(this)};function xc(m){m.readyState=4,m.l=null,m.j=null,m.B=null,aa(m)}s.setRequestHeader=function(m,b){this.A.append(m,b)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var k=b.next();!k.done;)k=k.value,m.push(k[0]+": "+k[1]),k=b.next();return m.join(`\r
`)};function aa(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(zs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function q0(m){let b="";return Z(m,function(k,j){b+=j,b+=":",b+=k,b+=`\r
`}),b}function Bp(m,b,k){e:{for(j in k){var j=!1;break e}j=!0}j||(k=q0(k),typeof m=="string"?k!=null&&Ti(k):Ct(m,b,k))}function Wt(m){Ot.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Wt,Ot);var Q0=/^https?$/i,n_=["POST","PUT"];s=Wt.prototype,s.Fa=function(m){this.H=m},s.ea=function(m,b,k,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gd.g(),this.g.onreadystatechange=w(h(this.Ca,this));try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(ie){_c(this,ie);return}if(m=k||"",k=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var te in j)k.set(te,j[te]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const ie of j.keys())k.set(ie,j.get(ie));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(k.keys()).find(ie=>ie.toLowerCase()=="content-type"),te=a.FormData&&m instanceof a.FormData,!(Array.prototype.indexOf.call(n_,b,void 0)>=0)||j||te||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ve]of k)this.g.setRequestHeader(ie,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ie){_c(this,ie)}};function _c(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.o=5,Ec(m),sl(m)}function Ec(m){m.A||(m.A=!0,Pt(m,"complete"),Pt(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Pt(this,"complete"),Pt(this,"abort"),sl(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sl(this,!0)),Wt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?rl(this):this.Xa())},s.Xa=function(){rl(this)};function rl(m){if(m.h&&typeof i<"u"){if(m.v&&Ka(m)==4)setTimeout(m.Ca.bind(m),0);else if(Pt(m,"readystatechange"),Ka(m)==4){m.h=!1;try{const ie=m.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var k;if(!(k=b)){var j;if(j=ie===0){let ve=String(m.D).match(W0)[1]||null;!ve&&a.self&&a.self.location&&(ve=a.self.location.protocol.slice(0,-1)),j=!Q0.test(ve?ve.toLowerCase():"")}k=j}if(k)Pt(m,"complete"),Pt(m,"success");else{m.o=6;try{var te=Ka(m)>2?m.g.statusText:""}catch{te=""}m.l=te+" ["+m.ca()+"]",Ec(m)}}finally{sl(m)}}}}function sl(m,b){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const k=m.g;m.g=null,b||Pt(m,"ready");try{k.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Ka(m){return m.g?m.g.readyState:0}s.ca=function(){try{return Ka(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),js(b)}};function K0(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function $m(m){const b={};m=(m.g&&Ka(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<m.length;j++){if(U(m[j]))continue;var k=Zo(m[j]);const te=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const ie=b[te]||[];b[te]=ie,ie.push(k)}J(b,function(j){return j.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(m,b,k){return k&&k.internalChannelParams&&k.internalChannelParams[m]||b}function jp(m){this.za=0,this.i=[],this.j=new Ua,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xa("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xa("baseRetryDelayMs",5e3,m),this.Za=Xa("retryDelaySeedMs",1e4,m),this.Ta=Xa("forwardChannelMaxRetries",2,m),this.va=Xa("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Np(m&&m.concurrentRequestLimit),this.Ba=new Ed,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=jp.prototype,s.ka=8,s.I=1,s.connect=function(m,b,k,j){cn(0),this.W=m,this.H=b||{},k&&j!==void 0&&(this.H.OSID=k,this.H.OAID=j),this.F=this.X,this.J=Hm(this,null,this.W),il(this)};function Up(m){if(Vp(m),m.I==3){var b=m.V++,k=ki(m.J);if(Ct(k,"SID",m.M),Ct(k,"RID",b),Ct(k,"TYPE","terminate"),Ya(m,k),b=new re(m,m.j,b),b.M=2,b.A=tl(ki(k)),k=!1,a.navigator&&a.navigator.sendBeacon)try{k=a.navigator.sendBeacon(b.A.toString(),"")}catch{}!k&&a.Image&&(new Image().src=b.A,k=!0),k||(b.g=Y0(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Xt(b)}Fd(m)}function Hs(m){m.g&&(Cd(m),m.g.cancel(),m.g=null)}function Vp(m){Hs(m),m.v&&(a.clearTimeout(m.v),m.v=null),$p(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&a.clearTimeout(m.m),m.m=null)}function il(m){if(!Rm(m.h)&&!m.m){m.m=!0;var b=m.Ea;z||N(),W||(z(),W=!0),D.add(b,m),m.D=0}}function X0(m,b){return yd(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=b.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=ja(h(m.Ea,m,b),Hp(m,m.D)),m.D++,!0)}s.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const te=new re(this,this.j,m);let ie=this.o;if(this.U&&(ie?(ie=H(ie),ae(ie,this.U)):ie=this.U),this.u!==null||this.R||(te.J=ie,ie=null),this.S)e:{for(var b=0,k=0;k<this.i.length;k++){t:{var j=this.i[k];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(b+=j,b>4096){b=k;break e}if(b===4096||k===this.i.length-1){b=k+1;break e}}b=1e3}else b=1e3;b=zm(this,te,b),k=ki(this.J),Ct(k,"RID",m),Ct(k,"CVER",22),this.G&&Ct(k,"X-HTTP-Session-Id",this.G),Ya(this,k),ie&&(this.R?b="headers="+Ti(q0(ie))+"&"+b:this.u&&Bp(k,this.u,ie)),Mp(this.h,te),this.Ra&&Ct(k,"TYPE","init"),this.S?(Ct(k,"$req",b),Ct(k,"SID","null"),te.U=!0,Kt(te,k,null)):Kt(te,k,b),this.I=2}}else this.I==3&&(m?bd(this,m):this.i.length==0||Rm(this.h)||bd(this))};function bd(m,b){var k;b?k=b.l:k=m.V++;const j=ki(m.J);Ct(j,"SID",m.M),Ct(j,"RID",k),Ct(j,"AID",m.K),Ya(m,j),m.u&&m.o&&Bp(j,m.u,m.o),k=new re(m,m.j,k,m.D+1),m.u===null&&(k.J=m.o),b&&(m.i=b.G.concat(m.i)),b=zm(m,k,1e3),k.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Mp(m.h,k),Kt(k,j,b)}function Ya(m,b){m.H&&Z(m.H,function(k,j){Ct(b,j,k)}),m.l&&Z({},function(k,j){Ct(b,j,k)})}function zm(m,b,k){k=Math.min(m.i.length,k);const j=m.l?h(m.l.Ka,m.l,m):null;e:{var te=m.i;let Je=-1;for(;;){const Nn=["count="+k];Je==-1?k>0?(Je=te[0].g,Nn.push("ofs="+Je)):Je=0:Nn.push("ofs="+Je);let Rt=!0;for(let Vn=0;Vn<k;Vn++){var ie=te[Vn].g;const Gs=te[Vn].map;if(ie-=Je,ie<0)Je=Math.max(0,te[Vn].g-100),Rt=!1;else try{ie="req"+ie+"_"||"";try{var ve=Gs instanceof Map?Gs:Object.entries(Gs);for(const[al,Za]of ve){let eo=Za;u(Za)&&(eo=ys(Za)),Nn.push(ie+al+"="+encodeURIComponent(eo))}}catch(al){throw Nn.push(ie+"type="+encodeURIComponent("_badmap")),al}}catch{j&&j(Gs)}}if(Rt){ve=Nn.join("&");break e}}ve=void 0}return m=m.i.splice(0,k),b.G=m,ve}function Ur(m){if(!m.g&&!m.v){m.Y=1;var b=m.Da;z||N(),W||(z(),W=!0),D.add(b,m),m.A=0}}function Ja(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=ja(h(m.Da,m),Hp(m,m.A)),m.A++,!0)}s.Da=function(){if(this.v=null,bc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=ja(h(this.Wa,this),m)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,cn(10),Hs(this),bc(this))};function Cd(m){m.B!=null&&(a.clearTimeout(m.B),m.B=null)}function bc(m){m.g=new re(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var b=ki(m.na);Ct(b,"RID","rpc"),Ct(b,"SID",m.M),Ct(b,"AID",m.K),Ct(b,"CI",m.F?"0":"1"),!m.F&&m.ia&&Ct(b,"TO",m.ia),Ct(b,"TYPE","xmlhttp"),Ya(m,b),m.u&&m.o&&Bp(b,m.u,m.o),m.O&&(m.g.H=m.O);var k=m.g;m=m.ba,k.M=1,k.A=tl(ki(b)),k.u=null,k.R=!0,un(k,m)}s.Va=function(){this.C!=null&&(this.C=null,Hs(this),Ja(this),cn(19))};function $p(m){m.C!=null&&(a.clearTimeout(m.C),m.C=null)}function zp(m,b){var k=null;if(m.g==b){$p(m),Cd(m),m.g=null;var j=2}else if(Dm(m.h,b))k=b.G,wd(m.h,b),j=1;else return;if(m.I!=0){if(b.o)if(j==1){k=b.u?b.u.length:0,b=Date.now()-b.F;var te=m.D;j=Ar(),Pt(j,new md(j,k)),il(m)}else Ur(m);else if(te=b.m,te==3||te==0&&b.X>0||!(j==1&&X0(m,b)||j==2&&Ja(m)))switch(k&&k.length>0&&(b=m.h,b.i=b.i.concat(k)),te){case 1:Ws(m,5);break;case 4:Ws(m,10);break;case 3:Ws(m,6);break;default:Ws(m,2)}}}function Hp(m,b){let k=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(k*=2),k*b}function Ws(m,b){if(m.j.info("Error code "+b),b==2){var k=h(m.bb,m),j=m.Ua;const te=!j;j=new za(j||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vd(j,"https"),tl(j),te?qa(j.toString(),k):Qa(j.toString(),k)}else cn(2);m.I=0,m.l&&m.l.pa(b),Fd(m),Vp(m)}s.bb=function(m){m?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function Fd(m){if(m.I=0,m.ja=[],m.l){const b=Vs(m.h);(b.length!=0||m.i.length!=0)&&(F(m.ja,b),F(m.ja,m.i),m.h.i.length=0,v(m.i),m.i.length=0),m.l.oa()}}function Hm(m,b,k){var j=k instanceof za?ki(k):new za(k);if(j.g!="")b&&(j.g=b+"."+j.g),Ha(j,j.u);else{var te=a.location;j=te.protocol,b=b?b+"."+te.hostname:te.hostname,te=+te.port;const ie=new za(null);j&&vd(ie,j),b&&(ie.g=b),te&&Ha(ie,te),k&&(ie.h=k),j=ie}return k=m.G,b=m.wa,k&&b&&Ct(j,k,b),Ct(j,"VER",m.ka),Ya(m,j),j}function Y0(m,b,k){if(b&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Aa&&!m.ma?new Wt(new nl({ab:k})):new Wt(m.ma),b.Fa(m.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function J0(){}s=J0.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Wp(){}Wp.prototype.g=function(m,b){return new _r(m,b)};function _r(m,b){Ot.call(this),this.g=new jp(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(m?m["X-WebChannel-Client-Profile"]=b.sa:m={"X-WebChannel-Client-Profile":b.sa}),this.g.U=m,(m=b&&b.Qb)&&!U(m)&&(this.g.u=m),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!U(b)&&(this.g.G=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Cc(this)}g(_r,Ot),_r.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){Up(this.g)},_r.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var k={};k.__data__=m,m=k}else this.v&&(k={},k.__data__=ys(m),m=k);b.i.push(new e_(b.Ya++,m)),b.I==3&&il(b)},_r.prototype.N=function(){this.g.l=null,delete this.j,Up(this.g),delete this.g,_r.Z.N.call(this)};function Z0(m){Ci.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const k in b){m=k;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}g(Z0,Ci);function ev(){wc.call(this),this.status=1}g(ev,wc);function Cc(m){this.g=m}g(Cc,J0),Cc.prototype.ra=function(){Pt(this.g,"a")},Cc.prototype.qa=function(m){Pt(this.g,new Z0(m))},Cc.prototype.pa=function(m){Pt(this.g,new ev)},Cc.prototype.oa=function(){Pt(this.g,"b")},Wp.prototype.createWebChannel=Wp.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,Y3=function(){return new Wp},X3=function(){return Ar()},K3=vr,Ob={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,xA=Va,$a.COMPLETE="complete",Q3=$a,Oa.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,Pg=Oa,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,q3=Wt}).apply(typeof Yv<"u"?Yv:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fm="12.9.0";function r8(s){Fm=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=new $F("@firebase/firestore");function f2(){return dp.logLevel}function Pe(s,...e){if(dp.logLevel<=ct.DEBUG){const t=e.map(ZF);dp.debug(`Firestore (${Fm}): ${s}`,...t)}}function hc(s,...e){if(dp.logLevel<=ct.ERROR){const t=e.map(ZF);dp.error(`Firestore (${Fm}): ${s}`,...t)}}function hp(s,...e){if(dp.logLevel<=ct.WARN){const t=e.map(ZF);dp.warn(`Firestore (${Fm}): ${s}`,...t)}}function ZF(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(s,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,J3(s,n,t)}function J3(s,e,t){let n=`FIRESTORE (${Fm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw hc(n),new Error(n)}function kt(s,e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,s||J3(e,r,n)}function Qe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends Yo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zr.UNAUTHENTICATED)))}shutdown(){}}class i8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class a8{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){kt(this.o===void 0,42304);let n=this.i;const r=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let i=new jo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jo,e.enqueueRetryable((()=>r(this.currentUser)))};const a=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},u=d=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jo)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(kt(typeof n.accessToken=="string",31837,{l:n}),new Z3(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string",2055,{h:e}),new Zr(e)}}class o8{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class l8{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new o8(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c8{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ji(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){kt(this.o===void 0,3512);const n=i=>{i.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Pe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const r=i=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wP(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(kt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wP(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<s;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=u8(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function ut(s,e){return s<e?-1:s>e?1:0}function Bb(s,e){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++){const r=s.charAt(n),i=e.charAt(n);if(r!==i)return jE(r)===jE(i)?ut(r,i):jE(r)?1:-1}return ut(s.length,e.length)}const d8=55296,h8=57343;function jE(s){const e=s.charCodeAt(0);return e>=d8&&e<=h8}function mm(s,e,t){return s.length===e.length&&s.every(((n,r)=>t(n,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="__name__";class uo{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Ge(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return uo.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uo?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const i=uo.compareSegments(e.get(r),t.get(r));if(i!==0)return i}return ut(e.length,t.length)}static compareSegments(e,t){const n=uo.isNumericId(e),r=uo.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?uo.extractNumericId(e).compare(uo.extractNumericId(t)):Bb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qu.fromString(e.substring(4,e.length-2))}}class en extends uo{construct(e,t,n){return new en(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Fe(ce.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((r=>r.length>0)))}return new en(t)}static emptyPath(){return new en([])}}const p8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends uo{construct(e,t,n){return new Mr(e,t,n)}static isValidIdentifier(e){return p8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vP}static keyField(){return new Mr([vP])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(n.length===0)throw new Fe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new Fe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Fe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(n+=u,r++):(i(),r++)}if(i(),a)throw new Fe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(t)}static emptyPath(){return new Mr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(en.fromString(e))}static fromName(e){return new Ve(en.fromString(e).popFirst(5))}static empty(){return new Ve(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&en.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new en(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(s,e,t){if(!t)throw new Fe(ce.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function f8(s,e,t,n){if(e===!0&&n===!0)throw new Fe(ce.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function AP(s){if(!Ve.isDocumentKey(s))throw new Fe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function xP(s){if(Ve.isDocumentKey(s))throw new Fe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function tN(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function vx(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ge(12329,{type:typeof s})}function zo(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Fe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vx(s);throw new Fe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function m8(s,e){if(e<=0)throw new Fe(ce.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(s,e){const t={typeString:s};return e&&(t.value=e),t}function k0(s,e){if(!tN(s))throw new Fe(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const r=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in s)){t=`JSON missing required field: '${n}'`;break}const a=s[n];if(r&&typeof a!==r){t=`JSON field '${n}' must be a ${r}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${n}' field to equal '${i.value}'`;break}}if(t)throw new Fe(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=-62135596800,EP=1e6;class on{static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*EP);return new on(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_P)throw new Fe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/EP}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:on._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(k0(e,on._jsonSchema))return new on(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_P;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}on._jsonSchemaVersion="firestore/timestamp/1.0",on._jsonSchema={type:Qn("string",on._jsonSchemaVersion),seconds:Qn("number"),nanoseconds:Qn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{static fromTimestamp(e){return new Ke(e)}static min(){return new Ke(new on(0,0))}static max(){return new Ke(new on(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=-1;function g8(s,e){const t=s.toTimestamp().seconds,n=s.toTimestamp().nanoseconds+1,r=Ke.fromTimestamp(n===1e9?new on(t+1,0):new on(t,n));return new Yu(r,Ve.empty(),e)}function y8(s){return new Yu(s.readTime,s.key,py)}class Yu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Yu(Ke.min(),Ve.empty(),py)}static max(){return new Yu(Ke.max(),Ve.empty(),py)}}function w8(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ve.comparator(s.documentKey,e.documentKey),t!==0?t:ut(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sm(s){if(s.code!==ce.FAILED_PRECONDITION||s.message!==v8)throw s;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((n,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,n)=>{t(e)}))}static reject(e){return new ue(((t,n)=>{n(e)}))}static waitFor(e){return new ue(((t,n)=>{let r=0,i=0,a=!1;e.forEach((u=>{++r,u.next((()=>{++i,a&&i===r&&t()}),(d=>n(d)))})),a=!0,i===r&&t()}))}static or(e){let t=ue.resolve(!1);for(const n of e)t=t.next((r=>r?ue.resolve(r):n()));return t}static forEach(e,t){const n=[];return e.forEach(((r,i)=>{n.push(t.call(this,r,i))})),this.waitFor(n)}static mapArray(e,t){return new ue(((n,r)=>{const i=e.length,a=new Array(i);let u=0;for(let d=0;d<i;d++){const h=d;t(e[h]).next((f=>{a[h]=f,++u,u===i&&n(a)}),(f=>r(f)))}}))}static doWhile(e,t){return new ue(((n,r)=>{const i=()=>{e()===!0?t().next((()=>{i()}),r):n()};i()}))}}function x8(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Tm(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ax.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=-1;function xx(s){return s==null}function v1(s){return s===0&&1/s==-1/0}function _8(s){return typeof s=="number"&&Number.isInteger(s)&&!v1(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="";function E8(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=bP(e)),e=b8(s.get(t),e);return bP(e)}function b8(s,e){let t=e;const n=s.length;for(let r=0;r<n;r++){const i=s.charAt(r);switch(i){case"\0":t+="";break;case nN:t+="";break;default:t+=i}}return t}function bP(s){return s+nN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function dd(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function C8(s,e){const t=[];for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.push(e(s[n],n,s));return t}function rN(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jv(this.root,e,this.comparator,!0)}}class Jv{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=n??Rr.RED,this.left=r??Rr.EMPTY,this.right=i??Rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Rr(e??this.key,t??this.value,n??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Rr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1;Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FP(this.data.getIterator())}getIteratorFrom(e){return new FP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof ir)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=n.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ir(this.comparator);return t.data=e,t}}class FP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new Ai([])}unionWith(e){let t=new ir(Mr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ai(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mm(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sN("Invalid base64 string: "+i):i}})(e);return new Or(t)}static fromUint8Array(e){const t=(function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i})(e);return new Or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Or.EMPTY_BYTE_STRING=new Or("");const F8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ju(s){if(kt(!!s,39018),typeof s=="string"){let e=0;const t=F8.exec(s);if(kt(!!t,46558,{timestamp:s}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(s);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:jn(s.seconds),nanos:jn(s.nanos)}}function jn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Zu(s){return typeof s=="string"?Or.fromBase64String(s):Or.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="server_timestamp",aN="__type__",oN="__previous_value__",lN="__local_write_time__";function nS(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[aN])==null?void 0:n.stringValue)===iN}function _x(s){const e=s.mapValue.fields[oN];return nS(e)?_x(e):e}function fy(s){const e=Ju(s.mapValue.fields[lN].timestampValue);return new on(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,t,n,r,i,a,u,d,h,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=f,this.apiKey=g}}const A1="(default)";class my{constructor(e,t){this.projectId=e,this.database=t||A1}static empty(){return new my("","")}get isDefaultDatabase(){return this.database===A1}isEqual(e){return e instanceof my&&e.projectId===this.projectId&&e.database===this.database}}function T8(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Fe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new my(s.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="__type__",k8="__max__",Zv={mapValue:{}},uN="__vector__",x1="value";function ed(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?nS(s)?4:P8(s)?9007199254740991:I8(s)?10:11:Ge(28295,{value:s})}function Ho(s,e){if(s===e)return!0;const t=ed(s);if(t!==ed(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return fy(s).isEqual(fy(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ju(r.timestampValue),u=Ju(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(r,i){return Zu(r.bytesValue).isEqual(Zu(i.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(r,i){return jn(r.geoPointValue.latitude)===jn(i.geoPointValue.latitude)&&jn(r.geoPointValue.longitude)===jn(i.geoPointValue.longitude)})(s,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return jn(r.integerValue)===jn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=jn(r.doubleValue),u=jn(i.doubleValue);return a===u?v1(a)===v1(u):isNaN(a)&&isNaN(u)}return!1})(s,e);case 9:return mm(s.arrayValue.values||[],e.arrayValue.values||[],Ho);case 10:case 11:return(function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(CP(a)!==CP(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!Ho(a[d],u[d])))return!1;return!0})(s,e);default:return Ge(52216,{left:s})}}function gy(s,e){return(s.values||[]).find((t=>Ho(t,e)))!==void 0}function gm(s,e){if(s===e)return 0;const t=ed(s),n=ed(e);if(t!==n)return ut(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return ut(s.booleanValue,e.booleanValue);case 2:return(function(i,a){const u=jn(i.integerValue||i.doubleValue),d=jn(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(s,e);case 3:return SP(s.timestampValue,e.timestampValue);case 4:return SP(fy(s),fy(e));case 5:return Bb(s.stringValue,e.stringValue);case 6:return(function(i,a){const u=Zu(i),d=Zu(a);return u.compareTo(d)})(s.bytesValue,e.bytesValue);case 7:return(function(i,a){const u=i.split("/"),d=a.split("/");for(let h=0;h<u.length&&h<d.length;h++){const f=ut(u[h],d[h]);if(f!==0)return f}return ut(u.length,d.length)})(s.referenceValue,e.referenceValue);case 8:return(function(i,a){const u=ut(jn(i.latitude),jn(a.latitude));return u!==0?u:ut(jn(i.longitude),jn(a.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return TP(s.arrayValue,e.arrayValue);case 10:return(function(i,a){var w,v,F,C;const u=i.fields||{},d=a.fields||{},h=(w=u[x1])==null?void 0:w.arrayValue,f=(v=d[x1])==null?void 0:v.arrayValue,g=ut(((F=h==null?void 0:h.values)==null?void 0:F.length)||0,((C=f==null?void 0:f.values)==null?void 0:C.length)||0);return g!==0?g:TP(h,f)})(s.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Zv.mapValue&&a===Zv.mapValue)return 0;if(i===Zv.mapValue)return 1;if(a===Zv.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),h=a.fields||{},f=Object.keys(h);d.sort(),f.sort();for(let g=0;g<d.length&&g<f.length;++g){const w=Bb(d[g],f[g]);if(w!==0)return w;const v=gm(u[d[g]],h[f[g]]);if(v!==0)return v}return ut(d.length,f.length)})(s.mapValue,e.mapValue);default:throw Ge(23264,{he:t})}}function SP(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ut(s,e);const t=Ju(s),n=Ju(e),r=ut(t.seconds,n.seconds);return r!==0?r:ut(t.nanos,n.nanos)}function TP(s,e){const t=s.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const i=gm(t[r],n[r]);if(i)return i}return ut(t.length,n.length)}function ym(s){return jb(s)}function jb(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const n=Ju(t);return`time(${n.seconds},${n.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Zu(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ve.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let n="[",r=!0;for(const i of t.values||[])r?r=!1:n+=",",n+=jb(i);return n+"]"})(s.arrayValue):"mapValue"in s?(function(t){const n=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const a of n)i?i=!1:r+=",",r+=`${a}:${jb(t.fields[a])}`;return r+"}"})(s.mapValue):Ge(61005,{value:s})}function _A(s){switch(ed(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_x(s);return e?16+_A(e):16;case 5:return 2*s.stringValue.length;case 6:return Zu(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((r,i)=>r+_A(i)),0)})(s.arrayValue);case 10:case 11:return(function(n){let r=0;return dd(n.fields,((i,a)=>{r+=i.length+_A(a)})),r})(s.mapValue);default:throw Ge(13486,{value:s})}}function kP(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ub(s){return!!s&&"integerValue"in s}function rS(s){return!!s&&"arrayValue"in s}function IP(s){return!!s&&"nullValue"in s}function PP(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function EA(s){return!!s&&"mapValue"in s}function I8(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[cN])==null?void 0:n.stringValue)===uN}function sy(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return dd(s.mapValue.fields,((t,n)=>e.mapValue.fields[t]=sy(n))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sy(s.arrayValue.values[t]);return e}return{...s}}function P8(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===k8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.value=e}static empty(){return new hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!EA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sy(t)}setAll(e){let t=Mr.emptyPath(),n={},r=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,r),n={},r=[],t=u.popLast()}a?n[u.lastSegment()]=sy(a):r.push(u.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());EA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];EA(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){dd(t,((r,i)=>e[r]=i));for(const r of n)delete e[r]}clone(){return new hs(sy(this.value))}}function dN(s){const e=[];return dd(s.fields,((t,n)=>{const r=new Mr([t]);if(EA(n)){const i=dN(n.mapValue).fields;if(i.length===0)e.push(r);else for(const a of i)e.push(r.child(a))}else e.push(r)})),new Ai(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t,n,r,i,a,u){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new es(e,0,Ke.min(),Ke.min(),Ke.min(),hs.empty(),0)}static newFoundDocument(e,t,n,r){return new es(e,1,t,Ke.min(),n,r,0)}static newNoDocument(e,t){return new es(e,2,t,Ke.min(),Ke.min(),hs.empty(),0)}static newUnknownDocument(e,t){return new es(e,3,t,Ke.min(),Ke.min(),hs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof es&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new es(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t){this.position=e,this.inclusive=t}}function RP(s,e,t){let n=0;for(let r=0;r<s.position.length;r++){const i=e[r],a=s.position[r];if(i.field.isKeyField()?n=Ve.comparator(Ve.fromName(a.referenceValue),t.key):n=gm(a,t.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function DP(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ho(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,t="asc"){this.field=e,this.dir=t}}function R8(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{}class qn extends hN{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new N8(e,t,n):t==="array-contains"?new O8(e,n):t==="in"?new B8(e,n):t==="not-in"?new j8(e,n):t==="array-contains-any"?new U8(e,n):new qn(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new M8(e,n):new L8(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(gm(t,this.value)):t!==null&&ed(this.value)===ed(t)&&this.matchesComparison(gm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Da extends hN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Da(e,t)}matches(e){return pN(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pN(s){return s.op==="and"}function fN(s){return D8(s)&&pN(s)}function D8(s){for(const e of s.filters)if(e instanceof Da)return!1;return!0}function Vb(s){if(s instanceof qn)return s.field.canonicalString()+s.op.toString()+ym(s.value);if(fN(s))return s.filters.map((e=>Vb(e))).join(",");{const e=s.filters.map((t=>Vb(t))).join(",");return`${s.op}(${e})`}}function mN(s,e){return s instanceof qn?(function(n,r){return r instanceof qn&&n.op===r.op&&n.field.isEqual(r.field)&&Ho(n.value,r.value)})(s,e):s instanceof Da?(function(n,r){return r instanceof Da&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce(((i,a,u)=>i&&mN(a,r.filters[u])),!0):!1})(s,e):void Ge(19439)}function gN(s){return s instanceof qn?(function(t){return`${t.field.canonicalString()} ${t.op} ${ym(t.value)}`})(s):s instanceof Da?(function(t){return t.op.toString()+" {"+t.getFilters().map(gN).join(" ,")+"}"})(s):"Filter"}class N8 extends qn{constructor(e,t,n){super(e,t,n),this.key=Ve.fromName(n.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class M8 extends qn{constructor(e,t){super(e,"in",t),this.keys=yN("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class L8 extends qn{constructor(e,t){super(e,"not-in",t),this.keys=yN("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yN(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>Ve.fromName(n.referenceValue)))}class O8 extends qn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rS(t)&&gy(t.arrayValue,this.value)}}class B8 extends qn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gy(this.value.arrayValue,t)}}class j8 extends qn{constructor(e,t){super(e,"not-in",t)}matches(e){if(gy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gy(this.value.arrayValue,t)}}class U8 extends qn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rS(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>gy(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,t=null,n=[],r=[],i=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=u,this.Te=null}}function NP(s,e=null,t=[],n=[],r=null,i=null,a=null){return new V8(s,e,t,n,r,i,a)}function sS(s){const e=Qe(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Vb(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),xx(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>ym(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>ym(n))).join(",")),e.Te=t}return e.Te}function iS(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!R8(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!mN(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!DP(s.startAt,e.startAt)&&DP(s.endAt,e.endAt)}function $b(s){return Ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t=null,n=[],r=[],i=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function $8(s,e,t,n,r,i,a,u){return new km(s,e,t,n,r,i,a,u)}function aS(s){return new km(s)}function MP(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function z8(s){return Ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function wN(s){return s.collectionGroup!==null}function iy(s){const e=Qe(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new ir(Mr.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new yy(i,n))})),t.has(Mr.keyField().canonicalString())||e.Ie.push(new yy(Mr.keyField(),n))}return e.Ie}function Uo(s){const e=Qe(s);return e.Ee||(e.Ee=vN(e,iy(s))),e.Ee}function H8(s){const e=Qe(s);return e.Re||(e.Re=vN(e,s.explicitOrderBy)),e.Re}function vN(s,e){if(s.limitType==="F")return NP(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new yy(r.field,i)}));const t=s.endAt?new _1(s.endAt.position,s.endAt.inclusive):null,n=s.startAt?new _1(s.startAt.position,s.startAt.inclusive):null;return NP(s.path,s.collectionGroup,e,s.filters,s.limit,t,n)}}function zb(s,e){const t=s.filters.concat([e]);return new km(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function W8(s,e){const t=s.explicitOrderBy.concat([e]);return new km(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function E1(s,e,t){return new km(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Ex(s,e){return iS(Uo(s),Uo(e))&&s.limitType===e.limitType}function AN(s){return`${sS(Uo(s))}|lt:${s.limitType}`}function m2(s){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((r=>gN(r))).join(", ")}]`),xx(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((r=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(r))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>ym(r))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>ym(r))).join(",")),`Target(${n})`})(Uo(s))}; limitType=${s.limitType})`}function bx(s,e){return e.isFoundDocument()&&(function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ve.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(s,e)&&(function(n,r){for(const i of iy(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(s,e)&&(function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0})(s,e)&&(function(n,r){return!(n.startAt&&!(function(a,u,d){const h=RP(a,u,d);return a.inclusive?h<=0:h<0})(n.startAt,iy(n),r)||n.endAt&&!(function(a,u,d){const h=RP(a,u,d);return a.inclusive?h>=0:h>0})(n.endAt,iy(n),r))})(s,e)}function G8(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function xN(s){return(e,t)=>{let n=!1;for(const r of iy(s)){const i=q8(r,e,t);if(i!==0)return i;n=n||r.field.isKeyField()}return 0}}function q8(s,e,t){const n=s.field.isKeyField()?Ve.comparator(e.key,t.key):(function(i,a,u){const d=a.data.field(i),h=u.data.field(i);return d!==null&&h!==null?gm(d,h):Ge(42886)})(s.field,e,t);switch(s.dir){case"asc":return n;case"desc":return-1*n;default:return Ge(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,i]of n)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){dd(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return rN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8=new bn(Ve.comparator);function pc(){return Q8}const _N=new bn(Ve.comparator);function Rg(...s){let e=_N;for(const t of s)e=e.insert(t.key,t);return e}function EN(s){let e=_N;return s.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Gd(){return ay()}function bN(){return ay()}function ay(){return new bp((s=>s.toString()),((s,e)=>s.isEqual(e)))}const K8=new bn(Ve.comparator),X8=new ir(Ve.comparator);function dt(...s){let e=X8;for(const t of s)e=e.add(t);return e}const Y8=new ir(ut);function J8(){return Y8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:v1(e)?"-0":e}}function CN(s){return{integerValue:""+s}}function Z8(s,e){return _8(e)?CN(e):oS(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this._=void 0}}function e9(s,e,t){return s instanceof wy?(function(r,i){const a={fields:{[aN]:{stringValue:iN},[lN]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&nS(i)&&(i=_x(i)),i&&(a.fields[oN]=i),{mapValue:a}})(t,e):s instanceof vy?SN(s,e):s instanceof Ay?TN(s,e):(function(r,i){const a=FN(r,i),u=LP(a)+LP(r.Ae);return Ub(a)&&Ub(r.Ae)?CN(u):oS(r.serializer,u)})(s,e)}function t9(s,e,t){return s instanceof vy?SN(s,e):s instanceof Ay?TN(s,e):t}function FN(s,e){return s instanceof b1?(function(n){return Ub(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class wy extends Cx{}class vy extends Cx{constructor(e){super(),this.elements=e}}function SN(s,e){const t=kN(e);for(const n of s.elements)t.some((r=>Ho(r,n)))||t.push(n);return{arrayValue:{values:t}}}class Ay extends Cx{constructor(e){super(),this.elements=e}}function TN(s,e){let t=kN(e);for(const n of s.elements)t=t.filter((r=>!Ho(r,n)));return{arrayValue:{values:t}}}class b1 extends Cx{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function LP(s){return jn(s.integerValue||s.doubleValue)}function kN(s){return rS(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,t){this.field=e,this.transform=t}}function r9(s,e){return s.field.isEqual(e.field)&&(function(n,r){return n instanceof vy&&r instanceof vy||n instanceof Ay&&r instanceof Ay?mm(n.elements,r.elements,Ho):n instanceof b1&&r instanceof b1?Ho(n.Ae,r.Ae):n instanceof wy&&r instanceof wy})(s.transform,e.transform)}class s9{constructor(e,t){this.version=e,this.transformResults=t}}class ka{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ka}static exists(e){return new ka(void 0,e)}static updateTime(e){return new ka(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bA(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Fx{}function IN(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new lS(s.key,ka.none()):new I0(s.key,s.data,ka.none());{const t=s.data,n=hs.empty();let r=new ir(Mr.comparator);for(let i of e.fields)if(!r.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?n.delete(i):n.set(i,a),r=r.add(i)}return new hd(s.key,n,new Ai(r.toArray()),ka.none())}}function i9(s,e,t){s instanceof I0?(function(r,i,a){const u=r.value.clone(),d=BP(r.fieldTransforms,i,a.transformResults);u.setAll(d),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(s,e,t):s instanceof hd?(function(r,i,a){if(!bA(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=BP(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(PN(r)),d.setAll(u),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(s,e,t):(function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function oy(s,e,t,n){return s instanceof I0?(function(i,a,u,d){if(!bA(i.precondition,a))return u;const h=i.value.clone(),f=jP(i.fieldTransforms,d,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(s,e,t,n):s instanceof hd?(function(i,a,u,d){if(!bA(i.precondition,a))return u;const h=jP(i.fieldTransforms,d,a),f=a.data;return f.setAll(PN(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((g=>g.field)))})(s,e,t,n):(function(i,a,u){return bA(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(s,e,t)}function a9(s,e){let t=null;for(const n of s.fieldTransforms){const r=e.data.field(n.field),i=FN(n.transform,r||null);i!=null&&(t===null&&(t=hs.empty()),t.set(n.field,i))}return t||null}function OP(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&mm(n,r,((i,a)=>r9(i,a)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class I0 extends Fx{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class hd extends Fx{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function PN(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=s.data.field(t);e.set(t,n)}})),e}function BP(s,e,t){const n=new Map;kt(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let r=0;r<t.length;r++){const i=s[r],a=i.transform,u=e.data.field(i.field);n.set(i.field,t9(a,u,t[r]))}return n}function jP(s,e,t){const n=new Map;for(const r of s){const i=r.transform,a=t.data.field(r.field);n.set(r.field,e9(i,a,e))}return n}class lS extends Fx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o9 extends Fx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&i9(i,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=oy(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=oy(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=bN();return this.mutations.forEach((r=>{const i=e.get(r.key),a=i.overlayedDocument;let u=this.applyToLocalView(a,i.mutatedFields);u=t.has(r.key)?null:u;const d=IN(a,u);d!==null&&n.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(Ke.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dt())}isEqual(e){return this.batchId===e.batchId&&mm(this.mutations,e.mutations,((t,n)=>OP(t,n)))&&mm(this.baseMutations,e.baseMutations,((t,n)=>OP(t,n)))}}class cS{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){kt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=(function(){return K8})();const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new cS(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn,mt;function h9(s){switch(s){case ce.OK:return Ge(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Ge(15467,{code:s})}}function RN(s){if(s===void 0)return hc("GRPC error has no .code"),ce.UNKNOWN;switch(s){case Wn.OK:return ce.OK;case Wn.CANCELLED:return ce.CANCELLED;case Wn.UNKNOWN:return ce.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return ce.INTERNAL;case Wn.UNAVAILABLE:return ce.UNAVAILABLE;case Wn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Wn.NOT_FOUND:return ce.NOT_FOUND;case Wn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Wn.ABORTED:return ce.ABORTED;case Wn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Wn.DATA_LOSS:return ce.DATA_LOSS;default:return Ge(39323,{code:s})}}(mt=Wn||(Wn={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=new qu([4294967295,4294967295],0);function UP(s){const e=p9().encode(s),t=new G3;return t.update(e),new Uint8Array(t.digest())}function VP(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qu([t,n],0),new qu([r,i],0)]}class uS{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Dg(`Invalid padding: ${t}`);if(n<0)throw new Dg(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Dg(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Dg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qu.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(qu.fromNumber(n)));return r.compare(f9)===1&&(r=new qu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=UP(e),[n,r]=VP(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(n,r,i);if(!this.we(a))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new uS(i,r,t);return n.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const t=UP(e),[n,r]=VP(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(n,r,i);this.be(a)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Dg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,P0.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Sx(Ke.min(),r,new bn(ut),pc(),dt())}}class P0{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new P0(n,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}}class DN{constructor(e,t){this.targetId=e,this.Ce=t}}class NN{constructor(e,t,n=Or.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class $P{constructor(){this.ve=0,this.Fe=zP(),this.Me=Or.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),t=dt(),n=dt();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ge(38017,{changeType:i})}})),new P0(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=zP()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,kt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class m9{constructor(e){this.Ge=e,this.ze=new Map,this.je=pc(),this.He=eA(),this.Je=eA(),this.Ze=new bn(ut)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if($b(i))if(n===0){const a=new Ve(i.path);this.et(t,a,es.newNoDocument(a,Ke.min()))}else kt(n===1,20013,{expectedCount:n});else{const a=this._t(t);if(a!==n){const u=this.ut(e),d=u?this.ct(u,e,a):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let a,u;try{a=Zu(n).toUint8Array()}catch(d){if(d instanceof sN)return hp("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new uS(a,r,i)}catch(d){return hp(d instanceof Dg?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach((i=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(t,i,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((i,a)=>{const u=this.ot(a);if(u){if(i.current&&$b(u.target)){const d=new Ve(u.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,es.newNoDocument(d,e))}i.Be&&(t.set(a,i.ke()),i.Ke())}}));let n=dt();this.Je.forEach(((i,a)=>{let u=!0;a.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(e)));const r=new Sx(e,t,this.Ze,this.je,n);return this.je=pc(),this.He=eA(),this.Je=eA(),this.Ze=new bn(ut),r}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new $P,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ir(ut),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ir(ut),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $P),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function eA(){return new bn(Ve.comparator)}function zP(){return new bn(Ve.comparator)}const g9={asc:"ASCENDING",desc:"DESCENDING"},y9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w9={and:"AND",or:"OR"};class v9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hb(s,e){return s.useProto3Json||xx(e)?e:{value:e}}function C1(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MN(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function A9(s,e){return C1(s,e.toTimestamp())}function Vo(s){return kt(!!s,49232),Ke.fromTimestamp((function(t){const n=Ju(t);return new on(n.seconds,n.nanos)})(s))}function dS(s,e){return Wb(s,e).canonicalString()}function Wb(s,e){const t=(function(r){return new en(["projects",r.projectId,"databases",r.database])})(s).child("documents");return e===void 0?t:t.child(e)}function LN(s){const e=en.fromString(s);return kt($N(e),10190,{key:e.toString()}),e}function Gb(s,e){return dS(s.databaseId,e.path)}function UE(s,e){const t=LN(e);if(t.get(1)!==s.databaseId.projectId)throw new Fe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Fe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ve(BN(t))}function ON(s,e){return dS(s.databaseId,e)}function x9(s){const e=LN(s);return e.length===4?en.emptyPath():BN(e)}function qb(s){return new en(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function BN(s){return kt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function HP(s,e,t){return{name:Gb(s,e),fields:t.value.mapValue.fields}}function _9(s,e){let t;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ge(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(kt(f===void 0||typeof f=="string",58123),Or.fromBase64String(f||"")):(kt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Or.fromUint8Array(f||new Uint8Array))})(s,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(h){const f=h.code===void 0?ce.UNKNOWN:RN(h.code);return new Fe(f,h.message||"")})(a);t=new NN(n,r,i,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=UE(s,n.document.name),i=Vo(n.document.updateTime),a=n.document.createTime?Vo(n.document.createTime):Ke.min(),u=new hs({mapValue:{fields:n.document.fields}}),d=es.newFoundDocument(r,i,a,u),h=n.targetIds||[],f=n.removedTargetIds||[];t=new CA(h,f,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=UE(s,n.document),i=n.readTime?Vo(n.readTime):Ke.min(),a=es.newNoDocument(r,i),u=n.removedTargetIds||[];t=new CA([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=UE(s,n.document),i=n.removedTargetIds||[];t=new CA([],i,r,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:i}=n,a=new d9(r,i),u=n.targetId;t=new DN(u,a)}}return t}function E9(s,e){let t;if(e instanceof I0)t={update:HP(s,e.key,e.value)};else if(e instanceof lS)t={delete:Gb(s,e.key)};else if(e instanceof hd)t={update:HP(s,e.key,e.data),updateMask:R9(e.fieldMask)};else{if(!(e instanceof o9))return Ge(16599,{dt:e.type});t={verify:Gb(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(i,a){const u=a.transform;if(u instanceof wy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof vy)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ay)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof b1)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw Ge(20930,{transform:a.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:A9(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ge(27497)})(s,e.precondition)),t}function b9(s,e){return s&&s.length>0?(kt(e!==void 0,14353),s.map((t=>(function(r,i){let a=r.updateTime?Vo(r.updateTime):Vo(i);return a.isEqual(Ke.min())&&(a=Vo(i)),new s9(a,r.transformResults||[])})(t,e)))):[]}function C9(s,e){return{documents:[ON(s,e.path)]}}function jN(s,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=ON(s,r);const i=(function(h){if(h.length!==0)return VN(Da.create(h,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((f=>(function(w){return{field:Gc(w.field),direction:k9(w.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=Hb(s,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function F9(s,e,t,n){const{ft:r,parent:i}=jN(s,e),a={},u=[];let d=0;return t.forEach((h=>{const f="aggregate_"+d++;a[f]=h.alias,h.aggregateType==="count"?u.push({alias:f,count:{}}):h.aggregateType==="avg"?u.push({alias:f,avg:{field:Gc(h.fieldPath)}}):h.aggregateType==="sum"&&u.push({alias:f,sum:{field:Gc(h.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:r.structuredQuery},parent:r.parent},gt:a,parent:i}}function S9(s){let e=x9(s.parent);const t=s.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){kt(n===1,65062);const f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=(function(g){const w=UN(g);return w instanceof Da&&fN(w)?w.getFilters():[w]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((w=>(function(F){return new yy(g2(F.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(w)))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let w;return w=typeof g=="object"?g.value:g,xx(w)?null:w})(t.limit));let d=null;t.startAt&&(d=(function(g){const w=!!g.before,v=g.values||[];return new _1(v,w)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const w=!g.before,v=g.values||[];return new _1(v,w)})(t.endAt)),$8(e,r,a,i,u,"F",d,h)}function T9(s,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function UN(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=g2(t.unaryFilter.field);return qn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=g2(t.unaryFilter.field);return qn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=g2(t.unaryFilter.field);return qn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=g2(t.unaryFilter.field);return qn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(s):s.fieldFilter!==void 0?(function(t){return qn.create(g2(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Da.create(t.compositeFilter.filters.map((n=>UN(n))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(t.compositeFilter.op))})(s):Ge(30097,{filter:s})}function k9(s){return g9[s]}function I9(s){return y9[s]}function P9(s){return w9[s]}function Gc(s){return{fieldPath:s.canonicalString()}}function g2(s){return Mr.fromServerFormat(s.fieldPath)}function VN(s){return s instanceof qn?(function(t){if(t.op==="=="){if(PP(t.value))return{unaryFilter:{field:Gc(t.field),op:"IS_NAN"}};if(IP(t.value))return{unaryFilter:{field:Gc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PP(t.value))return{unaryFilter:{field:Gc(t.field),op:"IS_NOT_NAN"}};if(IP(t.value))return{unaryFilter:{field:Gc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gc(t.field),op:I9(t.op),value:t.value}}})(s):s instanceof Da?(function(t){const n=t.getFilters().map((r=>VN(r)));return n.length===1?n[0]:{compositeFilter:{op:P9(t.op),filters:n}}})(s):Ge(54877,{filter:s})}function R9(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $N(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function zN(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t,n,r,i=Ke.min(),a=Ke.min(),u=Or.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new zu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e){this.yt=e}}function N9(s){const e=S9({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?E1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(){this.Sn=new L9}addToCollectionParentIndex(e,t){return this.Sn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Yu.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Yu.min())}updateCollectionGroup(e,t,n){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class L9{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ir(en.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ir(en.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HN=41943040;class Ls{static withCacheSize(e){return new Ls(e,Ls.DEFAULT_COLLECTION_PERCENTILE,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls.DEFAULT_COLLECTION_PERCENTILE=10,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ls.DEFAULT=new Ls(HN,Ls.DEFAULT_COLLECTION_PERCENTILE,Ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ls.DISABLED=new Ls(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wm(0)}static ar(){return new wm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="LruGarbageCollector",O9=1048576;function qP([s,e],[t,n]){const r=ut(s,t);return r===0?ut(e,n):r}class B9{constructor(e){this.Pr=e,this.buffer=new ir(qP),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();qP(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class j9{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Pe(GP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Tm(t)?Pe(GP,"Ignoring IndexedDB error during garbage collection: ",t):await Sm(t)}await this.Ar(3e5)}))}}class U9{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Ax.ce);const n=new B9(t);return this.Vr.forEachTarget(e,(r=>n.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>n.Er(r))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(WP)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WP):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,a,u,d,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r)))).next((g=>(n=g,u=Date.now(),this.removeTargets(e,n,t)))).next((g=>(i=g,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((g=>(h=Date.now(),f2()<=ct.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${i} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-f}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:g}))))}}function V9(s,e){return new U9(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(){this.changes=new bp((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,es.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?ue.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(n!==null&&oy(n.mutation,r,Ai.empty(),on.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,dt()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=dt()){const r=Gd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((i=>{let a=Rg();return i.forEach(((u,d)=>{a=a.insert(u,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const n=Gd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,dt())))}populateOverlays(e,t,n){const r=[];return n.forEach((i=>{t.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,n,r){let i=pc();const a=ay(),u=(function(){return ay()})();return t.forEach(((d,h)=>{const f=n.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof hd)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),oy(f.mutation,h,f.mutation.getFieldMask(),on.now())):a.set(h.key,Ai.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,f)=>a.set(h,f))),t.forEach(((h,f)=>u.set(h,new z9(f,a.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=ay();let r=new bn(((a,u)=>a-u)),i=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const u of a)u.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let f=n.get(d)||Ai.empty();f=u.applyToLocalView(h,f),n.set(d,f);const g=(r.get(u.batchId)||dt()).add(d);r=r.insert(u.batchId,g)}))})).next((()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,f=d.value,g=bN();f.forEach((w=>{if(!i.has(w)){const v=IN(t.get(w),n.get(w));v!==null&&g.set(w,v),i=i.add(w)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return ue.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,r){return z8(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ue.resolve(Gd());let u=py,d=i;return a.next((h=>ue.forEach(h,((f,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),i.get(f)?ue.resolve():this.remoteDocumentCache.getEntry(e,f).next((w=>{d=d.insert(f,w)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,dt()))).next((f=>({batchId:u,changes:EN(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next((n=>{let r=Rg();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let a=Rg();return this.indexManager.getCollectionParents(e,i).next((u=>ue.forEach(u,(d=>{const h=(function(g,w){return new km(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,r).next((f=>{f.forEach(((g,w)=>{a=a.insert(g,w)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((a=>{i.forEach(((d,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,es.newInvalidDocument(f)))}));let u=Rg();return a.forEach(((d,h)=>{const f=i.get(d);f!==void 0&&oy(f.mutation,h,Ai.empty(),on.now()),bx(t,h)&&(u=u.insert(d,h))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ue.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Vo(r.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:N9(r.bundledQuery),readTime:Vo(r.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(){this.overlays=new bn(Ve.comparator),this.Lr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Gd();return ue.forEach(t,(r=>this.getOverlay(e,r).next((i=>{i!==null&&n.set(r,i)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((r,i)=>{this.bt(e,t,i)})),ue.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Lr.get(n);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(n)),ue.resolve()}getOverlaysForCollection(e,t,n){const r=Gd(),i=t.length+1,a=new Ve(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&r.set(d.getKey(),d)}return ue.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new bn(((h,f)=>h-f));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let f=i.get(h.largestBatchId);f===null&&(f=Gd(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const u=Gd(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,f)=>u.set(h,f))),!(u.size()>=r)););return ue.resolve(u)}bt(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const a=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new c9(t,n));let i=this.Lr.get(t);i===void 0&&(i=dt(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(){this.sessionToken=Or.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.kr=new ir(wr.Kr),this.qr=new ir(wr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new wr(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Wr(new wr(e,t))}Qr(e,t){e.forEach((n=>this.removeReference(n,t)))}Gr(e){const t=new Ve(new en([])),n=new wr(t,e),r=new wr(t,e+1),i=[];return this.qr.forEachInRange([n,r],(a=>{this.Wr(a),i.push(a.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ve(new en([])),n=new wr(t,e),r=new wr(t,e+1);let i=dt();return this.qr.forEachInRange([n,r],(a=>{i=i.add(a.key)})),i}containsKey(e){const t=new wr(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class wr{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ve.comparator(e.key,t.key)||ut(e.Hr,t.Hr)}static Ur(e,t){return ut(e.Hr,t.Hr)||Ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ir(wr.Kr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new l9(i,t,n,r);this.mutationQueue.push(a);for(const u of r)this.Jr=this.Jr.add(new wr(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ue.resolve(a)}lookupMutationBatch(e,t){return ue.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return ue.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?tS:this.Yn-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new wr(t,0),r=new wr(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([n,r],(a=>{const u=this.Zr(a.Hr);i.push(u)})),ue.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ir(ut);return t.forEach((r=>{const i=new wr(r,0),a=new wr(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],(u=>{n=n.add(u.Hr)}))})),ue.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ve.isDocumentKey(i)||(i=i.child(""));const a=new wr(new Ve(i),0);let u=new ir(ut);return this.Jr.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===r&&(u=u.add(d.Hr)),!0)}),a),ue.resolve(this.Yr(u))}Yr(e){const t=[];return e.forEach((n=>{const r=this.Zr(n);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){kt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return ue.forEach(t.mutations,(r=>{const i=new wr(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){const n=new wr(t,0),r=this.Jr.firstAfterOrEqual(n);return ue.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e){this.ti=e,this.docs=(function(){return new bn(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ue.resolve(n?n.document.mutableCopy():es.newInvalidDocument(t))}getEntries(e,t){let n=pc();return t.forEach((r=>{const i=this.docs.get(r);n=n.insert(r,i?i.document.mutableCopy():es.newInvalidDocument(r))})),ue.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=pc();const a=t.path,u=new Ve(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:f}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||w8(y8(f),n)<=0||(r.has(f.key)||bx(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return ue.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ge(9500)}ni(e,t){return ue.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new X9(this)}getSize(e){return ue.resolve(this.size)}}class X9 extends $9{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),ue.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e){this.persistence=e,this.ri=new bp((t=>sS(t)),iS),this.lastRemoteSnapshotVersion=Ke.min(),this.highestTargetId=0,this.ii=0,this.si=new hS,this.targetCount=0,this.oi=wm._r()}forEachTarget(e,t){return this.ri.forEach(((n,r)=>t(r))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),ue.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new wm(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.lr(t),ue.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ri.forEach(((a,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)})),ue.waitFor(i).next((()=>r))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return ue.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),ue.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((a=>{i.push(r.markPotentiallyOrphaned(e,a))})),ue.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return ue.resolve(n)}containsKey(e,t){return ue.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,t){this._i={},this.overlays={},this.ai=new Ax(0),this.ui=!1,this.ui=!0,this.ci=new q9,this.referenceDelegate=e(this),this.li=new Y9(this),this.indexManager=new M9,this.remoteDocumentCache=(function(r){return new K9(r)})((n=>this.referenceDelegate.hi(n))),this.serializer=new D9(t),this.Pi=new W9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new G9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new Q9(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){Pe("MemoryPersistence","Starting transaction:",e);const r=new J9(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((i=>this.referenceDelegate.Ii(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ei(e,t){return ue.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}}class J9 extends A8{constructor(e){super(),this.currentSequenceNumber=e}}class pS{constructor(e){this.persistence=e,this.Ri=new hS,this.Ai=null}static Vi(e){return new pS(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),ue.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((i=>this.di.add(i.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.di,(n=>{const r=Ve.fromPath(n);return this.mi(e,r).next((i=>{i||t.removeEntry(r,Ke.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((n=>{n?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class F1{constructor(e,t){this.persistence=e,this.fi=new bp((n=>E8(n.path)),((n,r)=>n.isEqual(r))),this.garbageCollector=V9(this,t)}static Vi(e,t){return new F1(e,t)}Ti(){}Ii(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((r=>n+r))))}pr(e){let t=0;return this.mr(e,(n=>{t++})).next((()=>t))}mr(e,t){return ue.forEach(this.fi,((n,r)=>this.wr(e,n,r).next((i=>i?ue.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,(a=>this.wr(e,a,t).next((u=>{u||(n++,i.removeEntry(a,Ke.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ue.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_A(e.data.value)),t}wr(e,t,n){return ue.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return ue.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(e,t){let n=dt(),r=dt();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new fS(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return b5()?8:x8(ts())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.gs(e,t).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new Z9;return this.ys(e,t,a).next((u=>{if(i.result=u,this.As)return this.ws(e,t,a,u.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(f2()<=ct.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",m2(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(f2()<=ct.DEBUG&&Pe("QueryEngine","Query:",m2(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(f2()<=ct.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",m2(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Uo(t))):ue.resolve())}gs(e,t){if(MP(t))return ue.resolve(null);let n=Uo(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=E1(t,null,"F"),n=Uo(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const a=dt(...i);return this.fs.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.bs(t,u);return this.Ss(t,h,a,d.readTime)?this.gs(e,E1(t,null,"F")):this.Ds(e,h,t,d)}))))})))))}ps(e,t,n,r){return MP(t)||r.isEqual(Ke.min())?ue.resolve(null):this.fs.getDocuments(e,n).next((i=>{const a=this.bs(t,i);return this.Ss(t,a,n,r)?ue.resolve(null):(f2()<=ct.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),m2(t)),this.Ds(e,a,t,g8(r,py)).next((u=>u)))}))}bs(e,t){let n=new ir(xN(e));return t.forEach(((r,i)=>{bx(e,i)&&(n=n.add(i))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return f2()<=ct.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",m2(t)),this.fs.getDocumentsMatchingQuery(e,t,Yu.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((i=>(t.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="LocalStore",t$=3e8;class n${constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new bn(ut),this.Fs=new bp((i=>sS(i)),iS),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H9(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function r$(s,e,t,n){return new n$(s,e,t,n)}async function GN(s,e){const t=Qe(s);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next((i=>(r=i,t.Os(e),t.mutationQueue.getAllMutationBatches(n)))).next((i=>{const a=[],u=[];let d=dt();for(const h of r){a.push(h.batchId);for(const f of h.mutations)d=d.add(f.key)}for(const h of i){u.push(h.batchId);for(const f of h.mutations)d=d.add(f.key)}return t.localDocuments.getDocuments(n,d).next((h=>({Ns:h,removedBatchIds:a,addedBatchIds:u})))}))}))}function s$(s,e){const t=Qe(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const r=e.batch.keys(),i=t.xs.newChangeBuffer({trackRemovals:!0});return(function(u,d,h,f){const g=h.batch,w=g.keys();let v=ue.resolve();return w.forEach((F=>{v=v.next((()=>f.getEntry(d,F))).next((C=>{const S=h.docVersions.get(F);kt(S!==null,48541),C.version.compareTo(S)<0&&(g.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),f.addEntry(C)))}))})),v.next((()=>u.mutationQueue.removeMutationBatch(d,g)))})(t,n,e,i).next((()=>i.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=dt();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,r)))}))}function qN(s){const e=Qe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function i$(s,e){const t=Qe(s),n=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const u=[];e.targetChanges.forEach(((f,g)=>{const w=r.get(g);if(!w)return;u.push(t.li.removeMatchingKeys(i,f.removedDocuments,g).next((()=>t.li.addMatchingKeys(i,f.addedDocuments,g))));let v=w.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?v=v.withResumeToken(Or.EMPTY_BYTE_STRING,Ke.min()).withLastLimboFreeSnapshotVersion(Ke.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,n)),r=r.insert(g,v),(function(C,S,I){return C.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=t$?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(w,v,f)&&u.push(t.li.updateTargetData(i,v))}));let d=pc(),h=dt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))})),u.push(a$(i,a,e.documentUpdates).next((f=>{d=f.Bs,h=f.Ls}))),!n.isEqual(Ke.min())){const f=t.li.getLastRemoteSnapshotVersion(i).next((g=>t.li.setTargetsMetadata(i,i.currentSequenceNumber,n)));u.push(f)}return ue.waitFor(u).next((()=>a.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(t.vs=r,i)))}function a$(s,e,t){let n=dt(),r=dt();return t.forEach((i=>n=n.add(i))),e.getEntries(s,n).next((i=>{let a=pc();return t.forEach(((u,d)=>{const h=i.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Ke.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):Pe(mS,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)})),{Bs:a,Ls:r}}))}function o$(s,e){const t=Qe(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=tS),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function l$(s,e){const t=Qe(s);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let r;return t.li.getTargetData(n,e).next((i=>i?(r=i,ue.resolve(r)):t.li.allocateTargetId(n).next((a=>(r=new zu(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.li.addTargetData(n,r).next((()=>r)))))))})).then((n=>{const r=t.vs.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(n.targetId,n),t.Fs.set(e,n.targetId)),n}))}async function Qb(s,e,t){const n=Qe(s),r=n.vs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",i,(a=>n.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Tm(a))throw a;Pe(mS,`Failed to update sequence numbers for target ${e}: ${a}`)}n.vs=n.vs.remove(e),n.Fs.delete(r.target)}function QP(s,e,t){const n=Qe(s);let r=Ke.min(),i=dt();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,h,f){const g=Qe(d),w=g.Fs.get(f);return w!==void 0?ue.resolve(g.vs.get(w)):g.li.getTargetData(h,f)})(n,a,Uo(e)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(a,u.targetId).next((d=>{i=d}))})).next((()=>n.Cs.getDocumentsMatchingQuery(a,e,t?r:Ke.min(),t?i:dt()))).next((u=>(c$(n,G8(e),u),{documents:u,ks:i})))))}function c$(s,e,t){let n=s.Ms.get(e)||Ke.min();t.forEach(((r,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),s.Ms.set(e,n)}class KP{constructor(){this.activeTargetIds=J8()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u${constructor(){this.vo=new KP,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new KP,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="ConnectivityMonitor";class YP{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Pe(XP,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Pe(XP,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tA=null;function Kb(){return tA===null?tA=(function(){return 268435456+Math.round(2147483648*Math.random())})():tA++,"0x"+tA.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="RestConnection",h$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class p${get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===A1?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){const a=Kb(),u=this.Qo(e,t.toUriEncodedString());Pe(VE,`Sending RPC '${e}' ${a}:`,u,n);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,r,i);const{host:h}=new URL(u),f=cd(h);return this.zo(e,u,d,n,f).then((g=>(Pe(VE,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw hp(VE,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",n),g}))}jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}Go(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,i)=>e[i]=r)),n&&n.headers.forEach(((r,i)=>e[i]=r))}Qo(e,t){const n=h$[e];let r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="WebChannelConnection",wg=(s,e,t)=>{s.listen(e,(n=>{try{t(n)}catch(r){setTimeout((()=>{throw r}),0)}}))};class M2 extends p${constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!M2.c_){const e=X3();wg(e,K3.STAT_EVENT,(t=>{t.stat===Ob.PROXY?Pe(Wr,"STAT_EVENT: detected buffering proxy"):t.stat===Ob.NOPROXY&&Pe(Wr,"STAT_EVENT: detected no buffering proxy")})),M2.c_=!0}}zo(e,t,n,r,i){const a=Kb();return new Promise(((u,d)=>{const h=new q3;h.setWithCredentials(!0),h.listenOnce(Q3.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case xA.NO_ERROR:const g=h.getResponseJson();Pe(Wr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case xA.TIMEOUT:Pe(Wr,`RPC '${e}' ${a} timed out`),d(new Fe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case xA.HTTP_ERROR:const w=h.getStatus();if(Pe(Wr,`RPC '${e}' ${a} failed with status:`,w,"response text:",h.getResponseText()),w>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const F=v==null?void 0:v.error;if(F&&F.status&&F.message){const C=(function(I){const O=I.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(O)>=0?O:ce.UNKNOWN})(F.status);d(new Fe(C,F.message))}else d(new Fe(ce.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Fe(ce.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Pe(Wr,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(r);Pe(Wr,`RPC '${e}' ${a} sending request:`,r),h.send(t,"POST",f,n,15)}))}T_(e,t,n){const r=Kb(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const h=i.join("");Pe(Wr,`Creating RPC '${e}' stream ${r}: ${h}`,u);const f=a.createWebChannel(h,u);this.I_(f);let g=!1,w=!1;const v=new f$({Ho:F=>{w?Pe(Wr,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(g||(Pe(Wr,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),Pe(Wr,`RPC '${e}' stream ${r} sending:`,F),f.send(F))},Jo:()=>f.close()});return wg(f,Pg.EventType.OPEN,(()=>{w||(Pe(Wr,`RPC '${e}' stream ${r} transport opened.`),v.i_())})),wg(f,Pg.EventType.CLOSE,(()=>{w||(w=!0,Pe(Wr,`RPC '${e}' stream ${r} transport closed`),v.o_(),this.E_(f))})),wg(f,Pg.EventType.ERROR,(F=>{w||(w=!0,hp(Wr,`RPC '${e}' stream ${r} transport errored. Name:`,F.name,"Message:",F.message),v.o_(new Fe(ce.UNAVAILABLE,"The operation could not be completed")))})),wg(f,Pg.EventType.MESSAGE,(F=>{var C;if(!w){const S=F.data[0];kt(!!S,16349);const I=S,O=(I==null?void 0:I.error)||((C=I[0])==null?void 0:C.error);if(O){Pe(Wr,`RPC '${e}' stream ${r} received error:`,O);const R=O.status;let B=(function(D){const N=Wn[D];if(N!==void 0)return RN(N)})(R),z=O.message;R==="NOT_FOUND"&&z.includes("database")&&z.includes("does not exist")&&z.includes(this.databaseId.database)&&hp(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),B===void 0&&(B=ce.INTERNAL,z="Unknown error status: "+R+" with message "+O.message),w=!0,v.o_(new Fe(B,z)),f.close()}else Pe(Wr,`RPC '${e}' stream ${r} received:`,S),v.__(S)}})),M2.u_(),setTimeout((()=>{v.s_()}),0),v}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Y3()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(s){return new M2(s)}function $E(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(s){return new v9(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */M2.c_=!1;class QN{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Pe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="PersistentStream";class KN{constructor(e,t,n,r,i,a,u,d){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new QN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(hc(t.toString()),hc("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,r])=>{this.D_===t&&this.G_(n,r)}),(n=>{e((()=>{const r=new Fe(ce.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(r)}))}))}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{n((()=>this.z_(r)))})),this.stream.onMessage((r=>{n((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(JP,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Pe(JP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class g$ extends KN{constructor(e,t,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=_9(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Ke.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ke.min():a.readTime?Vo(a.readTime):Ke.min()})(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=qb(this.serializer),t.addTarget=(function(i,a){let u;const d=a.target;if(u=$b(d)?{documents:C9(i,d)}:{query:jN(i,d).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=MN(i,a.resumeToken);const h=Hb(i,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ke.min())>0){u.readTime=C1(i,a.snapshotVersion.toTimestamp());const h=Hb(i,a.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const n=T9(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=qb(this.serializer),t.removeTarget=e,this.K_(t)}}class y$ extends KN{constructor(e,t,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=b9(e.writeResults,e.commitTime),n=Vo(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=qb(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>E9(this.serializer,n)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${}class v$ extends w${constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Fe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,Wb(t,n),r,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(ce.UNKNOWN,i.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.jo(e,Wb(t,n),r,a,u,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(ce.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function A$(s,e,t,n){return new v$(s,e,t,n)}class x${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hc(t),this.aa=!1):Pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="RemoteStore";class _${constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((a=>{n.enqueueAndForget((async()=>{Cp(this)&&(Pe(pp,"Restarting streams for network reachability change."),await(async function(d){const h=Qe(d);h.Ea.add(4),await R0(h),h.Va.set("Unknown"),h.Ea.delete(4),await kx(h)})(this))}))})),this.Va=new x$(n,r)}}async function kx(s){if(Cp(s))for(const e of s.Ra)await e(!0)}async function R0(s){for(const e of s.Ra)await e(!1)}function XN(s,e){const t=Qe(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),vS(t)?wS(t):Im(t).O_()&&yS(t,e))}function gS(s,e){const t=Qe(s),n=Im(t);t.Ia.delete(e),n.O_()&&YN(t,e),t.Ia.size===0&&(n.O_()?n.L_():Cp(t)&&t.Va.set("Unknown"))}function yS(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ke.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Im(s).Z_(e)}function YN(s,e){s.da.$e(e),Im(s).X_(e)}function wS(s){s.da=new m9({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Im(s).start(),s.Va.ua()}function vS(s){return Cp(s)&&!Im(s).x_()&&s.Ia.size>0}function Cp(s){return Qe(s).Ea.size===0}function JN(s){s.da=void 0}async function E$(s){s.Va.set("Online")}async function b$(s){s.Ia.forEach(((e,t)=>{yS(s,e)}))}async function C$(s,e){JN(s),vS(s)?(s.Va.ha(e),wS(s)):s.Va.set("Unknown")}async function F$(s,e,t){if(s.Va.set("Online"),e instanceof NN&&e.state===2&&e.cause)try{await(async function(r,i){const a=i.cause;for(const u of i.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.da.removeTarget(u))})(s,e)}catch(n){Pe(pp,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await S1(s,n)}else if(e instanceof CA?s.da.Xe(e):e instanceof DN?s.da.st(e):s.da.tt(e),!t.isEqual(Ke.min()))try{const n=await qN(s.localStore);t.compareTo(n)>=0&&await(function(i,a){const u=i.da.Tt(a);return u.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(d.resumeToken,a))}})),u.targetMismatches.forEach(((d,h)=>{const f=i.Ia.get(d);if(!f)return;i.Ia.set(d,f.withResumeToken(Or.EMPTY_BYTE_STRING,f.snapshotVersion)),YN(i,d);const g=new zu(f.target,d,h,f.sequenceNumber);yS(i,g)})),i.remoteSyncer.applyRemoteEvent(u)})(s,t)}catch(n){Pe(pp,"Failed to raise snapshot:",n),await S1(s,n)}}async function S1(s,e,t){if(!Tm(e))throw e;s.Ea.add(1),await R0(s),s.Va.set("Offline"),t||(t=()=>qN(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Pe(pp,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await kx(s)}))}function ZN(s,e){return e().catch((t=>S1(s,t,e)))}async function Ix(s){const e=Qe(s),t=td(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:tS;for(;S$(e);)try{const r=await o$(e.localStore,n);if(r===null){e.Ta.length===0&&t.L_();break}n=r.batchId,T$(e,r)}catch(r){await S1(e,r)}eM(e)&&tM(e)}function S$(s){return Cp(s)&&s.Ta.length<10}function T$(s,e){s.Ta.push(e);const t=td(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function eM(s){return Cp(s)&&!td(s).x_()&&s.Ta.length>0}function tM(s){td(s).start()}async function k$(s){td(s).ra()}async function I$(s){const e=td(s);for(const t of s.Ta)e.ea(t.mutations)}async function P$(s,e,t){const n=s.Ta.shift(),r=cS.from(n,e,t);await ZN(s,(()=>s.remoteSyncer.applySuccessfulWrite(r))),await Ix(s)}async function R$(s,e){e&&td(s).Y_&&await(async function(n,r){if((function(a){return h9(a)&&a!==ce.ABORTED})(r.code)){const i=n.Ta.shift();td(n).B_(),await ZN(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Ix(n)}})(s,e),eM(s)&&tM(s)}async function ZP(s,e){const t=Qe(s);t.asyncQueue.verifyOperationInProgress(),Pe(pp,"RemoteStore received new credentials");const n=Cp(t);t.Ea.add(3),await R0(t),n&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await kx(t)}async function D$(s,e){const t=Qe(s);e?(t.Ea.delete(2),await kx(t)):e||(t.Ea.add(2),await R0(t),t.Va.set("Unknown"))}function Im(s){return s.ma||(s.ma=(function(t,n,r){const i=Qe(t);return i.sa(),new g$(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(s.datastore,s.asyncQueue,{Zo:E$.bind(null,s),Yo:b$.bind(null,s),t_:C$.bind(null,s),J_:F$.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),vS(s)?wS(s):s.Va.set("Unknown")):(await s.ma.stop(),JN(s))}))),s.ma}function td(s){return s.fa||(s.fa=(function(t,n,r){const i=Qe(t);return i.sa(),new y$(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:k$.bind(null,s),t_:R$.bind(null,s),ta:I$.bind(null,s),na:P$.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Ix(s)):(await s.fa.stop(),s.Ta.length>0&&(Pe(pp,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const a=Date.now()+n,u=new AS(e,t,a,r,i);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Fe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xS(s,e){if(hc("AsyncQueue",`${e}: ${s}`),Tm(s))return new Fe(ce.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{static emptySet(e){return new L2(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ve.comparator(t.key,n.key):(t,n)=>Ve.comparator(t.key,n.key),this.keyedMap=Rg(),this.sortedSet=new bn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof L2)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new L2;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.ga=new bn(Ve.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class vm{constructor(e,t,n,r,i,a,u,d,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,r,i){const a=[];return t.forEach((u=>{a.push({type:0,doc:u})})),new vm(e,t,L2.emptySet(t),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ex(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class M${constructor(){this.queries=tR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const r=Qe(t),i=r.queries;r.queries=tR(),i.forEach(((a,u)=>{for(const d of u.ba)d.onError(n)}))})(this,new Fe(ce.ABORTED,"Firestore shutting down"))}}function tR(){return new bp((s=>AN(s)),Ex)}async function nM(s,e){const t=Qe(s);let n=3;const r=e.query;let i=t.queries.get(r);i?!i.Sa()&&e.Da()&&(n=2):(i=new N$,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await t.onListen(r,!0);break;case 1:i.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(a){const u=xS(a,`Initialization of query '${m2(e.query)}' failed`);return void e.onError(u)}t.queries.set(r,i),i.ba.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&_S(t)}async function rM(s,e){const t=Qe(s),n=e.query;let r=3;const i=t.queries.get(n);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?r=e.Da()?0:1:!i.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function L$(s,e){const t=Qe(s);let n=!1;for(const r of e){const i=r.query,a=t.queries.get(i);if(a){for(const u of a.ba)u.Fa(r)&&(n=!0);a.wa=r}}n&&_S(t)}function O$(s,e,t){const n=Qe(s),r=n.queries.get(e);if(r)for(const i of r.ba)i.onError(t);n.queries.delete(e)}function _S(s){s.Ca.forEach((e=>{e.next()}))}var Xb,nR;(nR=Xb||(Xb={})).Ma="default",nR.Cache="cache";class sM{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new vm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=vm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.key=e}}class aM{constructor(e){this.key=e}}class B${constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=dt(),this.mutatedKeys=dt(),this.eu=xN(e),this.tu=new L2(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new eR,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((f,g)=>{const w=r.get(f),v=bx(this.query,g)?g:null,F=!!w&&this.mutatedKeys.has(w.key),C=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;w&&v?w.data.isEqual(v.data)?F!==C&&(n.track({type:3,doc:v}),S=!0):this.su(w,v)||(n.track({type:2,doc:v}),S=!0,(d&&this.eu(v,d)>0||h&&this.eu(v,h)<0)&&(u=!0)):!w&&v?(n.track({type:0,doc:v}),S=!0):w&&!v&&(n.track({type:1,doc:w}),S=!0,(d||h)&&(u=!0)),S&&(v?(a=a.add(v),i=C?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{tu:a,iu:n,Ss:u,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((f,g)=>(function(v,F){const C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:S})}};return C(v)-C(F)})(f.type,g.type)||this.eu(f.doc,g.doc))),this.ou(n),r=r??!1;const u=t&&!r?this._u():[],d=this.Ya.size===0&&this.current&&!r?1:0,h=d!==this.Xa;return this.Xa=d,a.length!==0||h?{snapshot:new vm(this.query,e.tu,i,a,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new eR,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=dt(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))}));const t=[];return e.forEach((n=>{this.Ya.has(n)||t.push(new aM(n))})),this.Ya.forEach((n=>{e.has(n)||t.push(new iM(n))})),t}cu(e){this.Za=e.ks,this.Ya=dt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return vm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ES="SyncEngine";class j${constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class U${constructor(e){this.key=e,this.hu=!1}}class V${constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new bp((u=>AN(u)),Ex),this.Iu=new Map,this.Eu=new Set,this.Ru=new bn(Ve.comparator),this.Au=new Map,this.Vu=new hS,this.du={},this.mu=new Map,this.fu=wm.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $$(s,e,t=!0){const n=hM(s);let r;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await oM(n,e,t,!0),r}async function z$(s,e){const t=hM(s);await oM(t,e,!0,!1)}async function oM(s,e,t,n){const r=await l$(s.localStore,Uo(e)),i=r.targetId,a=s.sharedClientState.addLocalQueryTarget(i,t);let u;return n&&(u=await H$(s,e,i,a==="current",r.resumeToken)),s.isPrimaryClient&&t&&XN(s.remoteStore,r),u}async function H$(s,e,t,n,r){s.pu=(g,w,v)=>(async function(C,S,I,O){let R=S.view.ru(I);R.Ss&&(R=await QP(C.localStore,S.query,!1).then((({documents:D})=>S.view.ru(D,R))));const B=O&&O.targetChanges.get(S.targetId),z=O&&O.targetMismatches.get(S.targetId)!=null,W=S.view.applyChanges(R,C.isPrimaryClient,B,z);return sR(C,S.targetId,W.au),W.snapshot})(s,g,w,v);const i=await QP(s.localStore,e,!0),a=new B$(e,i.ks),u=a.ru(i.documents),d=P0.createSynthesizedTargetChangeForCurrentChange(t,n&&s.onlineState!=="Offline",r),h=a.applyChanges(u,s.isPrimaryClient,d);sR(s,t,h.au);const f=new j$(e,t,a);return s.Tu.set(e,f),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),h.snapshot}async function W$(s,e,t){const n=Qe(s),r=n.Tu.get(e),i=n.Iu.get(r.targetId);if(i.length>1)return n.Iu.set(r.targetId,i.filter((a=>!Ex(a,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Qb(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),t&&gS(n.remoteStore,r.targetId),Yb(n,r.targetId)})).catch(Sm)):(Yb(n,r.targetId),await Qb(n.localStore,r.targetId,!0))}async function G$(s,e){const t=Qe(s),n=t.Tu.get(e),r=t.Iu.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),gS(t.remoteStore,n.targetId))}async function q$(s,e,t){const n=ez(s);try{const r=await(function(a,u){const d=Qe(a),h=on.now(),f=u.reduce(((v,F)=>v.add(F.key)),dt());let g,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let F=pc(),C=dt();return d.xs.getEntries(v,f).next((S=>{F=S,F.forEach(((I,O)=>{O.isValidDocument()||(C=C.add(I))}))})).next((()=>d.localDocuments.getOverlayedDocuments(v,F))).next((S=>{g=S;const I=[];for(const O of u){const R=a9(O,g.get(O.key).overlayedDocument);R!=null&&I.push(new hd(O.key,R,dN(R.value.mapValue),ka.exists(!0)))}return d.mutationQueue.addMutationBatch(v,h,I,u)})).next((S=>{w=S;const I=S.applyToLocalDocumentSet(g,C);return d.documentOverlayCache.saveOverlays(v,S.batchId,I)}))})).then((()=>({batchId:w.batchId,changes:EN(g)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),(function(a,u,d){let h=a.du[a.currentUser.toKey()];h||(h=new bn(ut)),h=h.insert(u,d),a.du[a.currentUser.toKey()]=h})(n,r.batchId,t),await D0(n,r.changes),await Ix(n.remoteStore)}catch(r){const i=xS(r,"Failed to persist write");t.reject(i)}}async function lM(s,e){const t=Qe(s);try{const n=await i$(t.localStore,e);e.targetChanges.forEach(((r,i)=>{const a=t.Au.get(i);a&&(kt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?kt(a.hu,14607):r.removedDocuments.size>0&&(kt(a.hu,42227),a.hu=!1))})),await D0(t,n,e)}catch(n){await Sm(n)}}function rR(s,e,t){const n=Qe(s);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.Tu.forEach(((i,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)})),(function(a,u){const d=Qe(a);d.onlineState=u;let h=!1;d.queries.forEach(((f,g)=>{for(const w of g.ba)w.va(u)&&(h=!0)})),h&&_S(d)})(n.eventManager,e),r.length&&n.Pu.J_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Q$(s,e,t){const n=Qe(s);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Au.get(e),i=r&&r.key;if(i){let a=new bn(Ve.comparator);a=a.insert(i,es.newNoDocument(i,Ke.min()));const u=dt().add(i),d=new Sx(Ke.min(),new Map,new bn(ut),a,u);await lM(n,d),n.Ru=n.Ru.remove(i),n.Au.delete(e),bS(n)}else await Qb(n.localStore,e,!1).then((()=>Yb(n,e,t))).catch(Sm)}async function K$(s,e){const t=Qe(s),n=e.batch.batchId;try{const r=await s$(t.localStore,e);uM(t,n,null),cM(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await D0(t,r)}catch(r){await Sm(r)}}async function X$(s,e,t){const n=Qe(s);try{const r=await(function(a,u){const d=Qe(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return d.mutationQueue.lookupMutationBatch(h,u).next((g=>(kt(g!==null,37113),f=g.keys(),d.mutationQueue.removeMutationBatch(h,g)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,f,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>d.localDocuments.getDocuments(h,f)))}))})(n.localStore,e);uM(n,e,t),cM(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await D0(n,r)}catch(r){await Sm(r)}}function cM(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function uM(s,e,t){const n=Qe(s);let r=n.du[n.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),n.du[n.currentUser.toKey()]=r}}function Yb(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const n of s.Iu.get(e))s.Tu.delete(n),t&&s.Pu.yu(n,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((n=>{s.Vu.containsKey(n)||dM(s,n)}))}function dM(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(gS(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),bS(s))}function sR(s,e,t){for(const n of t)n instanceof iM?(s.Vu.addReference(n.key,e),Y$(s,n)):n instanceof aM?(Pe(ES,"Document no longer in limbo: "+n.key),s.Vu.removeReference(n.key,e),s.Vu.containsKey(n.key)||dM(s,n.key)):Ge(19791,{wu:n})}function Y$(s,e){const t=e.key,n=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(n)||(Pe(ES,"New document in limbo: "+t),s.Eu.add(n),bS(s))}function bS(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ve(en.fromString(e)),n=s.fu.next();s.Au.set(n,new U$(t)),s.Ru=s.Ru.insert(t,n),XN(s.remoteStore,new zu(Uo(aS(t.path)),n,"TargetPurposeLimboResolution",Ax.ce))}}async function D0(s,e,t){const n=Qe(s),r=[],i=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{a.push(n.pu(d,e,t).then((h=>{var f;if((h||t)&&n.isPrimaryClient){const g=h?!h.fromCache:(f=t==null?void 0:t.targetChanges.get(d.targetId))==null?void 0:f.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(h){r.push(h);const g=fS.Es(d.targetId,h);i.push(g)}})))})),await Promise.all(a),n.Pu.J_(r),await(async function(d,h){const f=Qe(d);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>ue.forEach(h,(w=>ue.forEach(w.Ts,(v=>f.persistence.referenceDelegate.addReference(g,w.targetId,v))).next((()=>ue.forEach(w.Is,(v=>f.persistence.referenceDelegate.removeReference(g,w.targetId,v)))))))))}catch(g){if(!Tm(g))throw g;Pe(mS,"Failed to update sequence numbers: "+g)}for(const g of h){const w=g.targetId;if(!g.fromCache){const v=f.vs.get(w),F=v.snapshotVersion,C=v.withLastLimboFreeSnapshotVersion(F);f.vs=f.vs.insert(w,C)}}})(n.localStore,i))}async function J$(s,e){const t=Qe(s);if(!t.currentUser.isEqual(e)){Pe(ES,"User change. New user:",e.toKey());const n=await GN(t.localStore,e);t.currentUser=e,(function(i,a){i.mu.forEach((u=>{u.forEach((d=>{d.reject(new Fe(ce.CANCELLED,a))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await D0(t,n.Ns)}}function Z$(s,e){const t=Qe(s),n=t.Au.get(e);if(n&&n.hu)return dt().add(n.key);{let r=dt();const i=t.Iu.get(e);if(!i)return r;for(const a of i){const u=t.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function hM(s){const e=Qe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=lM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q$.bind(null,e),e.Pu.J_=L$.bind(null,e.eventManager),e.Pu.yu=O$.bind(null,e.eventManager),e}function ez(s){const e=Qe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X$.bind(null,e),e}class T1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tx(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return r$(this.persistence,new e$,e.initialUser,this.serializer)}Cu(e){return new WN(pS.Vi,this.serializer)}Du(e){return new u$}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}T1.provider={build:()=>new T1};class tz extends T1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){kt(this.persistence.referenceDelegate instanceof F1,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new j9(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ls.withCacheSize(this.cacheSizeBytes):Ls.DEFAULT;return new WN((n=>F1.Vi(n,t)),this.serializer)}}class Jb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>rR(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=J$.bind(null,this.syncEngine),await D$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new M$})()}createDatastore(e){const t=Tx(e.databaseInfo.databaseId),n=m$(e.databaseInfo);return A$(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,r,i,a,u){return new _$(n,r,i,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>rR(this.syncEngine,t,0)),(function(){return YP.v()?new YP:new d$})())}createSyncEngine(e,t){return(function(r,i,a,u,d,h,f){const g=new V$(r,i,a,u,d,h);return f&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const i=Qe(r);Pe(pp,"RemoteStore shutting down."),i.Ea.add(5),await R0(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Jb.provider={build:()=>new Jb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hc("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="FirestoreClient";class nz{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=Zr.UNAUTHENTICATED,this.clientId=eS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async a=>{Pe(nd,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(Pe(nd,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=xS(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function zE(s,e){s.asyncQueue.verifyOperationInProgress(),Pe(nd,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let n=t.initialUser;s.setCredentialChangeListener((async r=>{n.isEqual(r)||(await GN(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function iR(s,e){s.asyncQueue.verifyOperationInProgress();const t=await rz(s);Pe(nd,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((n=>ZP(e.remoteStore,n))),s.setAppCheckTokenChangeListener(((n,r)=>ZP(e.remoteStore,r))),s._onlineComponents=e}async function rz(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Pe(nd,"Using user provided OfflineComponentProvider");try{await zE(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ce.FAILED_PRECONDITION||r.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;hp("Error using user provided cache. Falling back to memory cache: "+t),await zE(s,new T1)}}else Pe(nd,"Using default OfflineComponentProvider"),await zE(s,new tz(void 0));return s._offlineComponents}async function CS(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Pe(nd,"Using user provided OnlineComponentProvider"),await iR(s,s._uninitializedComponentsProvider._online)):(Pe(nd,"Using default OnlineComponentProvider"),await iR(s,new Jb))),s._onlineComponents}function sz(s){return CS(s).then((e=>e.syncEngine))}function iz(s){return CS(s).then((e=>e.datastore))}async function fM(s){const e=await CS(s),t=e.eventManager;return t.onListen=$$.bind(null,e.syncEngine),t.onUnlisten=W$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=z$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=G$.bind(null,e.syncEngine),t}function az(s,e,t={}){const n=new jo;return s.asyncQueue.enqueueAndForget((async()=>(function(i,a,u,d,h){const f=new pM({next:w=>{f.Nu(),a.enqueueAndForget((()=>rM(i,g)));const v=w.docs.has(u);!v&&w.fromCache?h.reject(new Fe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&w.fromCache&&d&&d.source==="server"?h.reject(new Fe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new sM(aS(u.path),f,{includeMetadataChanges:!0,Ka:!0});return nM(i,g)})(await fM(s),s.asyncQueue,e,t,n))),n.promise}function oz(s,e,t={}){const n=new jo;return s.asyncQueue.enqueueAndForget((async()=>(function(i,a,u,d,h){const f=new pM({next:w=>{f.Nu(),a.enqueueAndForget((()=>rM(i,g))),w.fromCache&&d.source==="server"?h.reject(new Fe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new sM(u,f,{includeMetadataChanges:!0,Ka:!0});return nM(i,g)})(await fM(s),s.asyncQueue,e,t,n))),n.promise}function lz(s,e,t){const n=new jo;return s.asyncQueue.enqueueAndForget((async()=>{try{const r=await iz(s);n.resolve((async function(a,u,d){var C;const h=Qe(a),{request:f,gt:g,parent:w}=F9(h.serializer,H8(u),d);h.connection.Ko||delete f.parent;const v=(await h.jo("RunAggregationQuery",h.serializer.databaseId,w,f,1)).filter((S=>!!S.result));kt(v.length===1,64727);const F=(C=v[0].result)==null?void 0:C.aggregateFields;return Object.keys(F).reduce(((S,I)=>(S[g[I]]=F[I],S)),{})})(r,e,t))}catch(r){n.reject(r)}})),n.promise}function cz(s,e){const t=new jo;return s.asyncQueue.enqueueAndForget((async()=>q$(await sz(s),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz="ComponentProvider",aR=new Map;function dz(s,e,t,n,r){return new S8(s,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,mM(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="firestore.googleapis.com",oR=!0;class lR{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Fe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gM,this.ssl=oR}else this.host=e.host,this.ssl=e.ssl??oR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<O9)throw new Fe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mM(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Fe(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Fe(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Fe(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Px{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Fe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Fe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new s8;switch(n.type){case"firstParty":return new l8(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Fe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=aR.get(t);n&&(Pe(uz,"Removing Datastore"),aR.delete(t),n.terminate())})(this),Promise.resolve()}}function hz(s,e,t,n={}){var h;s=zo(s,Px);const r=cd(e),i=s._getSettings(),a={...i,emulatorOptions:s._getEmulatorOptions()},u=`${e}:${t}`;r&&(UF(`https://${u}`),VF("Firestore",!0)),i.host!==gM&&i.host!==u&&hp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...i,host:u,ssl:r,emulatorOptions:n};if(!lp(d,a)&&(s._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=Zr.MOCK_USER;else{f=o3(n.mockUserToken,(h=s._app)==null?void 0:h.options.projectId);const w=n.mockUserToken.sub||n.mockUserToken.user_id;if(!w)throw new Fe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Zr(w)}s._authCredentials=new i8(new Z3(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pd(this.firestore,e,this._query)}}class Kn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}toJSON(){return{type:Kn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(k0(t,Kn._jsonSchema))return new Kn(e,n||null,new Ve(en.fromString(t.referencePath)))}}Kn._jsonSchemaVersion="firestore/documentReference/1.0",Kn._jsonSchema={type:Qn("string",Kn._jsonSchemaVersion),referencePath:Qn("string")};class Qu extends pd{constructor(e,t,n){super(e,t,aS(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new Ve(e))}withConverter(e){return new Qu(this.firestore,e,this._path)}}function Os(s,e,...t){if(s=Pn(s),eN("collection","path",e),s instanceof Px){const n=en.fromString(e,...t);return xP(n),new Qu(s,null,n)}{if(!(s instanceof Kn||s instanceof Qu))throw new Fe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(en.fromString(e,...t));return xP(n),new Qu(s.firestore,null,n)}}function Ma(s,e,...t){if(s=Pn(s),arguments.length===1&&(e=eS.newId()),eN("doc","path",e),s instanceof Px){const n=en.fromString(e,...t);return AP(n),new Kn(s,null,new Ve(n))}{if(!(s instanceof Kn||s instanceof Qu))throw new Fe(ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(en.fromString(e,...t));return AP(n),new Kn(s.firestore,s instanceof Qu?s.converter:null,new Ve(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="AsyncQueue";class uR{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new QN(this,"async_queue_retry"),this._c=()=>{const n=$E();n&&Pe(cR,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=$E();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$E();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new jo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Tm(e))throw e;Pe(cR,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,hc("INTERNAL UNHANDLED ERROR: ",dR(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=AS.createAndSchedule(this,e,t,n,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&Ge(47125,{Pc:dR(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function dR(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Fp extends Px{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new uR,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uR(e),this._firestoreClient=void 0,await e}}}function pz(s,e){const t=typeof s=="object"?s:HF(),n=typeof s=="string"?s:A1,r=fx(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const i=s3("firestore");i&&hz(r,...i)}return r}function Rx(s){if(s._terminated)throw new Fe(ce.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||fz(s),s._firestoreClient}function fz(s){var n,r,i,a;const e=s._freezeSettings(),t=dz(s._databaseId,((n=s._app)==null?void 0:n.options.appId)||"",s._persistenceKey,(r=s._app)==null?void 0:r.options.apiKey,e);s._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new nz(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zi(Or.fromBase64String(e))}catch(t){throw new Fe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zi(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(k0(e,Zi._jsonSchema))return Zi.fromBase64String(e.bytes)}}Zi._jsonSchemaVersion="firestore/bytes/1.0",Zi._jsonSchema={type:Qn("string",Zi._jsonSchemaVersion),bytes:Qn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Fe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$o._jsonSchemaVersion}}static fromJSON(e){if(k0(e,$o._jsonSchema))return new $o(e.latitude,e.longitude)}}$o._jsonSchemaVersion="firestore/geoPoint/1.0",$o._jsonSchema={type:Qn("string",$o._jsonSchemaVersion),latitude:Qn("number"),longitude:Qn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,r){if(n.length!==r.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ia._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(k0(e,Ia._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ia(e.vectorValues);throw new Fe(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ia._jsonSchemaVersion="firestore/vectorValue/1.0",Ia._jsonSchema={type:Qn("string",Ia._jsonSchemaVersion),vectorValues:Qn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz=/^__.*__$/;class gz{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new hd(e,this.data,this.fieldMask,t,this.fieldTransforms):new I0(e,this.data,t,this.fieldTransforms)}}class yM{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new hd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wM(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:s})}}class SS{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new SS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return k1(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(wM(this.dataSource)&&mz.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class yz{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Tx(e)}createContext(e,t,n,r=!1){return new SS({dataSource:e,methodName:t,targetDoc:n,path:Mr.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TS(s){const e=s._freezeSettings(),t=Tx(s._databaseId);return new yz(s._databaseId,!!e.ignoreUndefinedProperties,t)}function wz(s,e,t,n,r,i={}){const a=s.createContext(i.merge||i.mergeFields?2:0,e,t,r);IS("Data must be an object, but it was:",a,n);const u=vM(n,a);let d,h;if(i.merge)d=new Ai(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const w=fp(e,g,t);if(!a.contains(w))throw new Fe(ce.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);_M(f,w)||f.push(w)}d=new Ai(f),h=a.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,h=a.fieldTransforms;return new gz(new hs(u),d,h)}class Nx extends Dx{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nx}}class kS extends Dx{_toFieldTransform(e){return new n9(e.path,new wy)}isEqual(e){return e instanceof kS}}function vz(s,e,t,n){const r=s.createContext(1,e,t);IS("Data must be an object, but it was:",r,n);const i=[],a=hs.empty();dd(n,((d,h)=>{const f=xM(e,d,t);h=Pn(h);const g=r.childContextForFieldPath(f);if(h instanceof Nx)i.push(f);else{const w=N0(h,g);w!=null&&(i.push(f),a.set(f,w))}}));const u=new Ai(i);return new yM(a,u,r.fieldTransforms)}function Az(s,e,t,n,r,i){const a=s.createContext(1,e,t),u=[fp(e,n,t)],d=[r];if(i.length%2!=0)throw new Fe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<i.length;w+=2)u.push(fp(e,i[w])),d.push(i[w+1]);const h=[],f=hs.empty();for(let w=u.length-1;w>=0;--w)if(!_M(h,u[w])){const v=u[w];let F=d[w];F=Pn(F);const C=a.childContextForFieldPath(v);if(F instanceof Nx)h.push(v);else{const S=N0(F,C);S!=null&&(h.push(v),f.set(v,S))}}const g=new Ai(h);return new yM(f,g,a.fieldTransforms)}function xz(s,e,t,n=!1){return N0(t,s.createContext(n?4:3,e))}function N0(s,e){if(AM(s=Pn(s)))return IS("Unsupported field value:",e,s),vM(s,e);if(s instanceof Dx)return(function(n,r){if(!wM(r.dataSource))throw r.createError(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(n,r){const i=[];let a=0;for(const u of n){let d=N0(u,r.childContextForArray(a));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}})(s,e)}return(function(n,r){if((n=Pn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Z8(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=on.fromDate(n);return{timestampValue:C1(r.serializer,i)}}if(n instanceof on){const i=new on(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:C1(r.serializer,i)}}if(n instanceof $o)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Zi)return{bytesValue:MN(r.serializer,n._byteString)};if(n instanceof Kn){const i=r.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw r.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:dS(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Ia)return(function(a,u){const d=a instanceof Ia?a.toArray():a;return{mapValue:{fields:{[cN]:{stringValue:uN},[x1]:{arrayValue:{values:d.map((f=>{if(typeof f!="number")throw u.createError("VectorValues must only contain numeric values.");return oS(u.serializer,f)}))}}}}}})(n,r);if(zN(n))return n._toProto(r.serializer);throw r.createError(`Unsupported field value: ${vx(n)}`)})(s,e)}function vM(s,e){const t={};return rN(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dd(s,((n,r)=>{const i=N0(r,e.childContextForField(n));i!=null&&(t[n]=i)})),{mapValue:{fields:t}}}function AM(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof on||s instanceof $o||s instanceof Zi||s instanceof Kn||s instanceof Dx||s instanceof Ia||zN(s))}function IS(s,e,t){if(!AM(t)||!tN(t)){const n=vx(t);throw n==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+n)}}function fp(s,e,t){if((e=Pn(e))instanceof FS)return e._internalPath;if(typeof e=="string")return xM(s,e);throw k1("Field path arguments must be of type string or ",s,!1,void 0,t)}const _z=new RegExp("[~\\*/\\[\\]]");function xM(s,e,t){if(e.search(_z)>=0)throw k1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new FS(...e.split("."))._internalPath}catch{throw k1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function k1(s,e,t,n,r){const i=n&&!n.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(i||a)&&(d+=" (found",i&&(d+=` in field ${n}`),a&&(d+=` in document ${r}`),d+=")"),new Fe(ce.INVALID_ARGUMENT,u+s+d)}function _M(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{convertValue(e,t="none"){switch(ed(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return dd(e,((r,i)=>{n[r]=this.convertValue(i,t)})),n}convertVectorValue(e){var n,r,i;const t=(i=(r=(n=e.fields)==null?void 0:n[x1].arrayValue)==null?void 0:r.values)==null?void 0:i.map((a=>jn(a.doubleValue)));return new Ia(t)}convertGeoPoint(e){return new $o(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=_x(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fy(e));default:return null}}convertTimestamp(e){const t=Ju(e);return new on(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=en.fromString(e);kt($N(n),9688,{name:e});const r=new my(n.get(1),n.get(3)),i=new Ve(n.popFirst(5));return r.isEqual(t)||hc(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS extends Ez{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}function M0(){return new kS("serverTimestamp")}const hR="@firebase/firestore",pR="4.11.0";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Cz{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new hs({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Fz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(fp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Fz extends EM{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sz(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Fe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RS{}class DS extends RS{}function Pa(s,e,...t){let n=[];e instanceof RS&&n.push(e),n=n.concat(t),(function(i){const a=i.filter((d=>d instanceof NS)).length,u=i.filter((d=>d instanceof Mx)).length;if(a>1||a>0&&u>0)throw new Fe(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const r of n)s=r._apply(s);return s}class Mx extends DS{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Mx(e,t,n)}_apply(e){const t=this._parse(e);return CM(e._query,t),new pd(e.firestore,e.converter,zb(e._query,t))}_parse(e){const t=TS(e.firestore);return(function(i,a,u,d,h,f,g){let w;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Fe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){mR(g,f);const F=[];for(const C of g)F.push(fR(d,i,C));w={arrayValue:{values:F}}}else w=fR(d,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||mR(g,f),w=xz(u,a,g,f==="in"||f==="not-in");return qn.create(h,f,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ku(s,e,t){const n=e,r=fp("where",s);return Mx._create(r,n,t)}class NS extends RS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new NS(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Da.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,i){let a=r;const u=i.getFlattenedFilters();for(const d of u)CM(a,d),a=zb(a,d)})(e._query,t),new pd(e.firestore,e.converter,zb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class MS extends DS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new MS(e,t)}_apply(e){const t=(function(r,i,a){if(r.startAt!==null)throw new Fe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Fe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yy(i,a)})(e._query,this._field,this._direction);return new pd(e.firestore,e.converter,W8(e._query,t))}}function rd(s,e="asc"){const t=e,n=fp("orderBy",s);return MS._create(n,t)}class LS extends DS{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new LS(e,t,n)}_apply(e){return new pd(e.firestore,e.converter,E1(e._query,this._limit,this._limitType))}}function bM(s){return m8("limit",s),LS._create("limit",s,"F")}function fR(s,e,t){if(typeof(t=Pn(t))=="string"){if(t==="")throw new Fe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wN(e)&&t.indexOf("/")!==-1)throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(en.fromString(t));if(!Ve.isDocumentKey(n))throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return kP(s,new Ve(n))}if(t instanceof Kn)return kP(s,t._key);throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vx(t)}.`)}function mR(s,e){if(!Array.isArray(s)||s.length===0)throw new Fe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CM(s,e){const t=(function(r,i){for(const a of r)for(const u of a.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null})(s.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Fe(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Fe(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Tz(s,e,t){let n;return n=s?s.toFirestore(e):e,n}function kz(){return new bz("count")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(s){return Iz(s,{count:kz()})}function Iz(s,e){const t=zo(s.firestore,Fp),n=Rx(t),r=C8(e,((i,a)=>new u9(a,i.aggregateType,i._internalFieldPath)));return lz(n,s._query,r).then((i=>(function(u,d,h){const f=new PS(u);return new Cz(d,f,h)})(t,s,i)))}class Ng{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ap extends EM{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new FA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(fp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ap._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ap._jsonSchemaVersion="firestore/documentSnapshot/1.0",ap._jsonSchema={type:Qn("string",ap._jsonSchemaVersion),bundleSource:Qn("string","DocumentSnapshot"),bundleName:Qn("string"),bundle:Qn("string")};class FA extends ap{data(e={}){return super.data(e)}}class O2{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ng(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new FA(this._firestore,this._userDataWriter,n.key,n,new Ng(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map((u=>{const d=new FA(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ng(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>i||u.type!==3)).map((u=>{const d=new FA(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ng(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),f=a.indexOf(u.doc.key)),{type:Pz(u.type),doc:d,oldIndex:h,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=O2._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=eS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Pz(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:s})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */O2._jsonSchemaVersion="firestore/querySnapshot/1.0",O2._jsonSchema={type:Qn("string",O2._jsonSchemaVersion),bundleSource:Qn("string","QuerySnapshot"),bundleName:Qn("string"),bundle:Qn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(s){s=zo(s,Kn);const e=zo(s.firestore,Fp),t=Rx(e);return az(t,s._key).then((n=>Dz(e,s,n)))}function Sp(s){s=zo(s,pd);const e=zo(s.firestore,Fp),t=Rx(e),n=new PS(e);return Sz(s._query),oz(t,s._query).then((r=>new O2(e,n,s,r)))}function Lx(s,e,t,...n){s=zo(s,Kn);const r=zo(s.firestore,Fp),i=TS(r);let a;return a=typeof(e=Pn(e))=="string"||e instanceof FS?Az(i,"updateDoc",s._key,e,t,n):vz(i,"updateDoc",s._key,e),OS(r,[a.toMutation(s._key,ka.exists(!0))])}function L0(s){return OS(zo(s.firestore,Fp),[new lS(s._key,ka.none())])}function O0(s,e){const t=zo(s.firestore,Fp),n=Ma(s),r=Tz(s.converter,e),i=TS(s.firestore);return OS(t,[wz(i,"addDoc",n._key,r,s.converter!==null,{}).toMutation(n._key,ka.exists(!1))]).then((()=>n))}function OS(s,e){const t=Rx(s);return cz(t,e)}function Dz(s,e,t){const n=t.docs.get(e._key),r=new PS(s);return new ap(s,r,e._key,n,new Ng(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){r8(_p),cp(new Xu("firestore",((n,{instanceIdentifier:r,options:i})=>{const a=n.getProvider("app").getImmediate(),u=new Fp(new a8(n.getProvider("auth-internal")),new c8(a,n.getProvider("app-check-internal")),T8(a,r),a);return i={useFetchStreams:t,...i},u._setSettings(i),u}),"PUBLIC").setMultipleInstances(!0)),Lo(hR,pR,e),Lo(hR,pR,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM="firebasestorage.googleapis.com",SM="storageBucket",Nz=120*1e3,Mz=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends Yo{constructor(e,t,n=0){super(WE(e),`Firebase Storage: ${t} (${WE(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return WE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rn||(Rn={}));function WE(s){return"storage/"+s}function BS(){const s="An unknown error occurred, please check the error payload for server response.";return new Dn(Rn.UNKNOWN,s)}function Lz(s){return new Dn(Rn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function Oz(s){return new Dn(Rn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Bz(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Dn(Rn.UNAUTHENTICATED,s)}function jz(){return new Dn(Rn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Uz(s){return new Dn(Rn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function Vz(){return new Dn(Rn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $z(){return new Dn(Rn.CANCELED,"User canceled the upload/download.")}function zz(s){return new Dn(Rn.INVALID_URL,"Invalid URL '"+s+"'.")}function Hz(s){return new Dn(Rn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function Wz(){return new Dn(Rn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+SM+"' property when initializing the app?")}function Gz(){return new Dn(Rn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qz(){return new Dn(Rn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Qz(s){return new Dn(Rn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zb(s){return new Dn(Rn.INVALID_ARGUMENT,s)}function TM(){return new Dn(Rn.APP_DELETED,"The Firebase app was deleted.")}function Kz(s){return new Dn(Rn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ly(s,e){return new Dn(Rn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function vg(s){throw new Dn(Rn.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=xi.makeFromUrl(e,t)}catch{return new xi(e,"")}if(n.path==="")return n;throw Hz(e)}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";function i(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),d={bucket:1,path:3};function h(B){B.path_=decodeURIComponent(B.path)}const f="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",v=new RegExp(`^https?://${g}/${f}/b/${r}/o${w}`,"i"),F={bucket:1,path:3},C=t===FM?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",I=new RegExp(`^https?://${C}/${r}/${S}`,"i"),R=[{regex:u,indices:d,postModify:i},{regex:v,indices:F,postModify:h},{regex:I,indices:{bucket:1,path:2},postModify:h}];for(let B=0;B<R.length;B++){const z=R[B],W=z.regex.exec(e);if(W){const D=W[z.indices.bucket];let N=W[z.indices.path];N||(N=""),n=new xi(D,N),z.postModify(n);break}}if(n==null)throw zz(e);return n}}class Xz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yz(s,e,t){let n=1,r=null,i=null,a=!1,u=0;function d(){return u===2}let h=!1;function f(...S){h||(h=!0,e.apply(null,S))}function g(S){r=setTimeout(()=>{r=null,s(v,d())},S)}function w(){i&&clearTimeout(i)}function v(S,...I){if(h){w();return}if(S){w(),f.call(null,S,...I);return}if(d()||a){w(),f.call(null,S,...I);return}n<64&&(n*=2);let R;u===1?(u=2,R=0):R=(n+Math.random())*1e3,g(R)}let F=!1;function C(S){F||(F=!0,w(),!h&&(r!==null?(S||(u=2),clearTimeout(r),g(0)):S||(u=1)))}return g(0),i=setTimeout(()=>{a=!0,C(!0)},t),C}function Jz(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(s){return s!==void 0}function eH(s){return typeof s=="object"&&!Array.isArray(s)}function jS(s){return typeof s=="string"||s instanceof String}function gR(s){return US()&&s instanceof Blob}function US(){return typeof Blob<"u"}function yR(s,e,t,n){if(n<e)throw Zb(`Invalid value for '${s}'. Expected ${e} or greater.`);if(n>t)throw Zb(`Invalid value for '${s}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(s,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${s}`}function kM(s){const e=encodeURIComponent;let t="?";for(const n in s)if(s.hasOwnProperty(n)){const r=e(n)+"="+e(s[n]);t=t+r+"&"}return t=t.slice(0,-1),t}var op;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(op||(op={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(s,e){const t=s>=500&&s<600,r=[408,429].indexOf(s)!==-1,i=e.indexOf(s)!==-1;return t||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e,t,n,r,i,a,u,d,h,f,g,w=!0,v=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=g,this.retry=w,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,C)=>{this.resolve_=F,this.reject_=C,this.start_()})}start_(){const e=(n,r)=>{if(r){n(!1,new nA(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=u=>{const d=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const u=i.getErrorCode()===op.NO_ERROR,d=i.getStatus();if(!u||tH(d,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===op.ABORT;n(!1,new nA(!1,null,f));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new nA(h,i))})},t=(n,r)=>{const i=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());Zz(d)?i(d):i()}catch(d){a(d)}else if(u!==null){const d=BS();d.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,d)):a(d)}else if(r.canceled){const d=this.appDelete_?TM():$z();a(d)}else{const d=Vz();a(d)}};this.canceled_?t(!1,new nA(!1,null,!0)):this.backoffId_=Yz(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Jz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nA{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function rH(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function sH(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iH(s,e){e&&(s["X-Firebase-GMPID"]=e)}function aH(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function oH(s,e,t,n,r,i,a=!0,u=!1){const d=kM(s.urlParams),h=s.url+d,f=Object.assign({},s.headers);return iH(f,e),rH(f,t),sH(f,i),aH(f,n),new nH(h,s.method,f,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,r,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cH(...s){const e=lH();if(e!==void 0){const t=new e;for(let n=0;n<s.length;n++)t.append(s[n]);return t.getBlob()}else{if(US())return new Blob(s);throw new Dn(Rn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uH(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dH(s){if(typeof atob>"u")throw Qz("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class GE{constructor(e,t){this.data=e,this.contentType=t||null}}function hH(s,e){switch(s){case Mo.RAW:return new GE(IM(e));case Mo.BASE64:case Mo.BASE64URL:return new GE(PM(s,e));case Mo.DATA_URL:return new GE(fH(e),mH(e))}throw BS()}function IM(s){const e=[];for(let t=0;t<s.length;t++){let n=s.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=s.charCodeAt(++t);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function pH(s){let e;try{e=decodeURIComponent(s)}catch{throw ly(Mo.DATA_URL,"Malformed data URL.")}return IM(e)}function PM(s,e){switch(s){case Mo.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw ly(s,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Mo.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw ly(s,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=dH(e)}catch(r){throw r.message.includes("polyfill")?r:ly(s,"Invalid character found")}const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}class RM{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ly(Mo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=gH(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function fH(s){const e=new RM(s);return e.base64?PM(Mo.BASE64,e.rest):pH(e.rest)}function mH(s){return new RM(s).contentType}function gH(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){let n=0,r="";gR(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(gR(this.data_)){const n=this.data_,r=uH(n,e,t);return r===null?null:new qc(r)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new qc(n,!0)}}static getBlob(...e){if(US()){const t=e.map(n=>n instanceof qc?n.data_:n);return new qc(cH.apply(null,t))}else{const t=e.map(a=>jS(a)?hH(Mo.RAW,a).data:a.data_);let n=0;t.forEach(a=>{n+=a.byteLength});const r=new Uint8Array(n);let i=0;return t.forEach(a=>{for(let u=0;u<a.length;u++)r[i++]=a[u]}),new qc(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(s){let e;try{e=JSON.parse(s)}catch{return null}return eH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function wH(s,e){const t=e.split("/").filter(n=>n.length>0).join("/");return s.length===0?t:s+"/"+t}function NM(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(s,e){return e}class is{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||vH}}let rA=null;function AH(s){return!jS(s)||s.length<2?s:NM(s)}function MM(){if(rA)return rA;const s=[];s.push(new is("bucket")),s.push(new is("generation")),s.push(new is("metageneration")),s.push(new is("name","fullPath",!0));function e(i,a){return AH(a)}const t=new is("name");t.xform=e,s.push(t);function n(i,a){return a!==void 0?Number(a):a}const r=new is("size");return r.xform=n,s.push(r),s.push(new is("timeCreated")),s.push(new is("updated")),s.push(new is("md5Hash",null,!0)),s.push(new is("cacheControl",null,!0)),s.push(new is("contentDisposition",null,!0)),s.push(new is("contentEncoding",null,!0)),s.push(new is("contentLanguage",null,!0)),s.push(new is("contentType",null,!0)),s.push(new is("metadata","customMetadata",!0)),rA=s,rA}function xH(s,e){function t(){const n=s.bucket,r=s.fullPath,i=new xi(n,r);return e._makeStorageReference(i)}Object.defineProperty(s,"ref",{get:t})}function _H(s,e,t){const n={};n.type="file";const r=t.length;for(let i=0;i<r;i++){const a=t[i];n[a.local]=a.xform(n,e[a.server])}return xH(n,s),n}function LM(s,e,t){const n=DM(e);return n===null?null:_H(s,n,t)}function EH(s,e,t,n){const r=DM(e);if(r===null||!jS(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(h=>{const f=s.bucket,g=s.fullPath,w="/b/"+a(f)+"/o/"+a(g),v=Ox(w,t,n),F=kM({alt:"media",token:h});return v+F})[0]}function bH(s,e){const t={},n=e.length;for(let r=0;r<n;r++){const i=e[r];i.writable&&(t[i.server]=s[i.local])}return JSON.stringify(t)}class VS{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(s){if(!s)throw BS()}function CH(s,e){function t(n,r){const i=LM(s,r,e);return OM(i!==null),i}return t}function FH(s,e){function t(n,r){const i=LM(s,r,e);return OM(i!==null),EH(i,r,s.host,s._protocol)}return t}function BM(s){function e(t,n){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=jz():r=Bz():t.getStatus()===402?r=Oz(s.bucket):t.getStatus()===403?r=Uz(s.path):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}return e}function jM(s){const e=BM(s);function t(n,r){let i=e(n,r);return n.getStatus()===404&&(i=Lz(s.path)),i.serverResponse=r.serverResponse,i}return t}function SH(s,e,t){const n=e.fullServerUrl(),r=Ox(n,s.host,s._protocol),i="GET",a=s.maxOperationRetryTime,u=new VS(r,i,FH(s,t),a);return u.errorHandler=jM(e),u}function TH(s,e){const t=e.fullServerUrl(),n=Ox(t,s.host,s._protocol),r="DELETE",i=s.maxOperationRetryTime;function a(d,h){}const u=new VS(n,r,a,i);return u.successCodes=[200,204],u.errorHandler=jM(e),u}function kH(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function IH(s,e,t){const n=Object.assign({},t);return n.fullPath=s.path,n.size=e.size(),n.contentType||(n.contentType=kH(null,e)),n}function PH(s,e,t,n,r){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let R="";for(let B=0;B<2;B++)R=R+Math.random().toString().slice(2);return R}const d=u();a["Content-Type"]="multipart/related; boundary="+d;const h=IH(e,n,r),f=bH(h,t),g="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+d+"--",v=qc.getBlob(g,n,w);if(v===null)throw Gz();const F={name:h.fullPath},C=Ox(i,s.host,s._protocol),S="POST",I=s.maxUploadRetryTime,O=new VS(C,S,CH(s,t),I);return O.urlParams=F,O.headers=a,O.body=v.uploadData(),O.errorHandler=BM(e),O}class RH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=op.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=op.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=op.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw vg("cannot .send() more than once");if(cd(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class DH extends RH{initXhr(){this.xhr_.responseType="text"}}function $S(){return new DH}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this._service=e,t instanceof xi?this._location=t:this._location=xi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new mp(e,t)}get root(){const e=new xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NM(this._location.path)}get storage(){return this._service}get parent(){const e=yH(this._location.path);if(e===null)return null;const t=new xi(this._location.bucket,e);return new mp(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Kz(e)}}function NH(s,e,t){s._throwIfRoot("uploadBytes");const n=PH(s.storage,s._location,MM(),new qc(e,!0),t);return s.storage.makeRequestWithTokens(n,$S).then(r=>({metadata:r,ref:s}))}function MH(s){s._throwIfRoot("getDownloadURL");const e=SH(s.storage,s._location,MM());return s.storage.makeRequestWithTokens(e,$S).then(t=>{if(t===null)throw qz();return t})}function LH(s){s._throwIfRoot("deleteObject");const e=TH(s.storage,s._location);return s.storage.makeRequestWithTokens(e,$S)}function OH(s,e){const t=wH(s._location.path,e),n=new xi(s._location.bucket,t);return new mp(s.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BH(s){return/^[A-Za-z]+:\/\//.test(s)}function jH(s,e){return new mp(s,e)}function UM(s,e){if(s instanceof zS){const t=s;if(t._bucket==null)throw Wz();const n=new mp(t,t._bucket);return e!=null?UM(n,e):n}else return e!==void 0?OH(s,e):s}function UH(s,e){if(e&&BH(e)){if(s instanceof zS)return jH(s,e);throw Zb("To use ref(service, url), the first argument must be a Storage instance.")}else return UM(s,e)}function wR(s,e){const t=e==null?void 0:e[SM];return t==null?null:xi.makeFromBucketSpec(t,s)}function VH(s,e,t,n={}){s.host=`${e}:${t}`;const r=cd(e);r&&(UF(`https://${s.host}/b`),VF("Storage",!0)),s._isUsingEmulator=!0,s._protocol=r?"https":"http";const{mockUserToken:i}=n;i&&(s._overrideAuthToken=typeof i=="string"?i:o3(i,s.app.options.projectId))}class zS{constructor(e,t,n,r,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=FM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Nz,this._maxUploadRetryTime=Mz,this._requests=new Set,r!=null?this._bucket=xi.makeFromBucketSpec(r,this._host):this._bucket=wR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xi.makeFromBucketSpec(this._url,e):this._bucket=wR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ji(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mp(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new Xz(TM());{const a=oH(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const vR="@firebase/storage",AR="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="storage";function gp(s,e,t){return s=Pn(s),NH(s,e,t)}function yp(s){return s=Pn(s),MH(s)}function eC(s){return s=Pn(s),LH(s)}function Wo(s,e){return s=Pn(s),UH(s,e)}function $H(s=HF(),e){s=Pn(s);const n=fx(s,VM).getImmediate({identifier:e}),r=s3("storage");return r&&zH(n,...r),n}function zH(s,e,t,n={}){VH(s,e,t,n)}function HH(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),n=s.getProvider("auth-internal"),r=s.getProvider("app-check-internal");return new zS(t,n,r,e,_p)}function WH(){cp(new Xu(VM,HH,"PUBLIC").setMultipleInstances(!0)),Lo(vR,AR,""),Lo(vR,AR,"esm2020")}WH();const GH={apiKey:"AIzaSyD_jwiALUoQcZIOkfhgvJ1MTUsD4mQD8cU",authDomain:`studomate1.firebaseapp.com
`,projectId:"studomate1",storageBucket:"studomate1.firebasestorage.app",messagingSenderId:"819063499606",appId:"1:819063499606:web:79b8457a7333050e0404f7"},HS=u3(GH),WS=t8(HS),gn=pz(HS),Go=$H(HS),xR=s=>{let e;const t=new Set,n=(h,f)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const w=e;e=f??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(v=>v(e,w))}},r=()=>e,u={setState:n,getState:r,getInitialState:()=>d,subscribe:h=>(t.add(h),()=>t.delete(h))},d=e=s(n,r,u);return u},qH=(s=>s?xR(s):xR),QH=s=>s;function KH(s,e=QH){const t=qv.useSyncExternalStore(s.subscribe,qv.useCallback(()=>e(s.getState()),[s,e]),qv.useCallback(()=>e(s.getInitialState()),[s,e]));return qv.useDebugValue(t),t}const _R=s=>{const e=qH(s),t=n=>KH(e,n);return Object.assign(t,e),t},XH=(s=>s?_R(s):_R),B0=XH(s=>({user:null,adminProfile:null,loading:!0,setUser:e=>s({user:e}),setAdminProfile:e=>s({adminProfile:e}),setLoading:e=>s({loading:e}),checkUserRole:async e=>{try{const t=await Rz(Ma(gn,"admins",e));t.exists()?s({adminProfile:t.data()}):s({adminProfile:null})}catch(t){console.error("Error fetching admin profile:",t),t.code==="permission-denied"&&console.error('Check your Firestore Security Rules. You might not have permission to read the "admins" collection.'),s({adminProfile:null})}}})),YH=()=>{const s=ux(),{setUser:e,setAdminProfile:t}=B0(),n=async()=>{try{await WS.signOut(),e(null),t(null),s("/login")}catch(i){console.error("Error signing out:",i)}},r=[{path:"/dashboard",label:"Dashboard",icon:U6},{path:"/universities",label:"Manage Universities",icon:Tb},{path:"/modules",label:"Modules",icon:w6},{path:"/exams",label:"Exams",icon:hm},{path:"/tests",label:"Tests",icon:D6},{path:"/supplementary-exams",label:"Supp. Exams",icon:P6},{path:"/users",label:"Manage Users",icon:jI},{path:"/analytics",label:"Analytics",icon:XD},{path:"/announcements",label:"Announcements",icon:JD}];return x.jsxs("div",{"trae-inspector-start-line":"47","trae-inspector-start-column":"4","trae-inspector-end-line":"92","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-screen w-64 bg-gradient-to-b from-blue-600 to-blue-800 text-white flex flex-col fixed left-0 top-0 z-10",children:[x.jsxs("div",{"trae-inspector-start-line":"48","trae-inspector-start-column":"6","trae-inspector-end-line":"53","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-6 flex items-center space-x-3",children:[x.jsx("div",{"trae-inspector-start-line":"49","trae-inspector-start-column":"8","trae-inspector-end-line":"51","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white/10 p-2 rounded-lg",children:x.jsx(Tb,{className:"h-8 w-8 text-white"})}),x.jsx("span",{"trae-inspector-start-line":"52","trae-inspector-start-column":"8","trae-inspector-end-line":"52","trae-inspector-end-column":"62","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22StudentMATE%22%2C%22textStartLine%22%3A%2252%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%2252%22%2C%22textEndColumn%22%3A%2255%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xl font-bold",children:"StudentMATE"})]}),x.jsx("nav",{"trae-inspector-start-line":"55","trae-inspector-start-column":"6","trae-inspector-end-line":"72","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:r.map(i=>x.jsxs(qD,{to:i.path,className:({isActive:a})=>`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${a?"bg-white/20 text-white":"text-blue-100 hover:bg-white/10 hover:text-white"}`,children:[x.jsx(i.icon,{className:"h-5 w-5"}),x.jsx("span",{"trae-inspector-start-line":"69","trae-inspector-start-column":"12","trae-inspector-end-line":"69","trae-inspector-end-column":"61","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium",children:i.label})]},i.path))}),x.jsxs("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"6","trae-inspector-end-line":"91","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-t border-blue-500",children:[x.jsxs("div",{"trae-inspector-start-line":"75","trae-inspector-start-column":"8","trae-inspector-end-line":"83","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-900/50 rounded-lg p-4 mb-4 flex items-center space-x-3",children:[x.jsx("div",{"trae-inspector-start-line":"76","trae-inspector-start-column":"10","trae-inspector-end-line":"78","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center",children:x.jsx(jI,{className:"h-6 w-6 text-white"})}),x.jsxs("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"10","trae-inspector-end-line":"82","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("p",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"80","trae-inspector-end-column":"56","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Admin%22%2C%22textStartLine%22%3A%2280%22%2C%22textStartColumn%22%3A%2247%22%2C%22textEndLine%22%3A%2280%22%2C%22textEndColumn%22%3A%2252%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium",children:"Admin"}),x.jsx("p",{"trae-inspector-start-line":"81","trae-inspector-start-column":"12","trae-inspector-end-line":"81","trae-inspector-end-column":"64","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Super%20Admin%22%2C%22textStartLine%22%3A%2281%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%2281%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-blue-200",children:"Super Admin"})]})]}),x.jsxs("button",{"trae-inspector-start-line":"84","trae-inspector-start-column":"8","trae-inspector-end-line":"90","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:n,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-red-500/80 hover:bg-red-600 rounded-lg transition-colors text-sm",children:[x.jsx(G6,{className:"h-4 w-4"}),x.jsx("span",{"trae-inspector-start-line":"89","trae-inspector-start-column":"10","trae-inspector-end-line":"89","trae-inspector-end-column":"29","trae-inspector-file-path":"src/components/Sidebar.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logout%22%2C%22textStartLine%22%3A%2289%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2289%22%2C%22textEndColumn%22%3A%2222%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Logout"})]})]})]})},JH=()=>{const{user:s}=B0();return x.jsxs("header",{"trae-inspector-start-line":"9","trae-inspector-start-column":"4","trae-inspector-end-line":"42","trae-inspector-end-column":"13","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white h-16 border-b border-gray-200 flex items-center justify-between px-6 sticky top-0 z-10",children:[x.jsx("div",{"trae-inspector-start-line":"10","trae-inspector-start-column":"6","trae-inspector-end-line":"21","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center flex-1",children:x.jsxs("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"8","trae-inspector-end-line":"20","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative w-96",children:[x.jsx("div",{"trae-inspector-start-line":"12","trae-inspector-start-column":"10","trae-inspector-end-line":"14","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:x.jsx(hx,{className:"h-5 w-5 text-gray-400"})}),x.jsx("input",{"trae-inspector-start-line":"15","trae-inspector-start-column":"10","trae-inspector-end-line":"19","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-full leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition duration-150 ease-in-out",placeholder:"Search..."})]})}),x.jsxs("div",{"trae-inspector-start-line":"23","trae-inspector-start-column":"6","trae-inspector-end-line":"41","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4",children:[x.jsxs("button",{"trae-inspector-start-line":"24","trae-inspector-start-column":"8","trae-inspector-end-line":"27","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[x.jsx(g6,{className:"h-6 w-6"}),x.jsx("span",{"trae-inspector-start-line":"26","trae-inspector-start-column":"10","trae-inspector-end-line":"26","trae-inspector-end-column":"114","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"})]}),x.jsxs("div",{"trae-inspector-start-line":"29","trae-inspector-start-column":"8","trae-inspector-end-line":"40","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-3 pl-4 border-l border-gray-200",children:[x.jsx("span",{"trae-inspector-start-line":"30","trae-inspector-start-column":"10","trae-inspector-end-line":"32","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-700",children:(s==null?void 0:s.email)||"Admin"}),x.jsx("div",{"trae-inspector-start-line":"33","trae-inspector-start-column":"10","trae-inspector-end-line":"39","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:s!=null&&s.photoURL?x.jsx("img",{"trae-inspector-start-line":"35","trae-inspector-start-column":"14","trae-inspector-end-line":"35","trae-inspector-end-column":"94","trae-inspector-file-path":"src/components/Header.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:s.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):x.jsx(ZD,{className:"h-5 w-5 text-gray-500"})})]})]})]})},io=({children:s})=>x.jsxs("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"4","trae-inspector-end-line":"19","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen bg-gray-50 flex",children:[x.jsx(YH,{}),x.jsxs("div",{"trae-inspector-start-line":"13","trae-inspector-start-column":"6","trae-inspector-end-line":"18","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 ml-64 flex flex-col",children:[x.jsx(JH,{}),x.jsx("main",{"trae-inspector-start-line":"15","trae-inspector-start-column":"8","trae-inspector-end-line":"17","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1 p-6 overflow-auto",children:s})]})]}),ao=({children:s})=>{const{user:e,loading:t,setUser:n,setLoading:r,checkUserRole:i}=B0();return q.useEffect(()=>{const a=HU(WS,async u=>{n(u),u&&await i(u.uid),r(!1)});return()=>a()},[n,r,i]),t?x.jsx("div",{"trae-inspector-start-line":"24","trae-inspector-start-column":"6","trae-inspector-end-line":"26","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/ProtectedRoute.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen flex items-center justify-center bg-gray-50",children:x.jsx("div",{"trae-inspector-start-line":"25","trae-inspector-start-column":"8","trae-inspector-end-line":"25","trae-inspector-end-column":"105","trae-inspector-file-path":"src/components/ProtectedRoute.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?x.jsx(x.Fragment,{children:s}):x.jsx(Fb,{to:"/login",replace:!0})},ZH=()=>{const[s,e]=q.useState(""),[t,n]=q.useState(""),[r,i]=q.useState(""),[a,u]=q.useState(!1),d=ux(),{checkUserRole:h}=B0(),f=async g=>{g.preventDefault(),i(""),u(!0);try{const w=await VU(WS,s,t);await h(w.user.uid),d("/dashboard")}catch(w){i("Failed to login. Please check your credentials."),console.error(w)}finally{u(!1)}};return x.jsxs("div",{"trae-inspector-start-line":"34","trae-inspector-start-column":"4","trae-inspector-end-line":"114","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[x.jsxs("div",{"trae-inspector-start-line":"35","trae-inspector-start-column":"6","trae-inspector-end-line":"47","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"sm:mx-auto sm:w-full sm:max-w-md",children:[x.jsx("div",{"trae-inspector-start-line":"36","trae-inspector-start-column":"8","trae-inspector-end-line":"40","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-center",children:x.jsx("div",{"trae-inspector-start-line":"37","trae-inspector-start-column":"10","trae-inspector-end-line":"39","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-600 p-2 rounded-full",children:x.jsx(L6,{className:"h-10 w-10 text-white"})})}),x.jsx("h2",{"trae-inspector-start-line":"41","trae-inspector-start-column":"8","trae-inspector-end-line":"43","trae-inspector-end-column":"13","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22StudentMATE%20Admin%22%2C%22textStartLine%22%3A%2241%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%2243%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"StudentMATE Admin"}),x.jsx("p",{"trae-inspector-start-line":"44","trae-inspector-start-column":"8","trae-inspector-end-line":"46","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Sign%20in%20to%20access%20the%20control%20panel%22%2C%22textStartLine%22%3A%2244%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%2246%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access the control panel"})]}),x.jsx("div",{"trae-inspector-start-line":"49","trae-inspector-start-column":"6","trae-inspector-end-line":"113","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:x.jsx("div",{"trae-inspector-start-line":"50","trae-inspector-start-column":"8","trae-inspector-end-line":"112","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:x.jsxs("form",{"trae-inspector-start-line":"51","trae-inspector-start-column":"10","trae-inspector-end-line":"111","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",onSubmit:f,children:[x.jsxs("div",{"trae-inspector-start-line":"52","trae-inspector-start-column":"12","trae-inspector-end-line":"72","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"53","trae-inspector-start-column":"14","trae-inspector-end-line":"55","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Email%20address%22%2C%22textStartLine%22%3A%2253%22%2C%22textStartColumn%22%3A%2289%22%2C%22textEndLine%22%3A%2255%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),x.jsxs("div",{"trae-inspector-start-line":"56","trae-inspector-start-column":"14","trae-inspector-end-line":"71","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 relative rounded-md shadow-sm",children:[x.jsx("div",{"trae-inspector-start-line":"57","trae-inspector-start-column":"16","trae-inspector-end-line":"59","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:x.jsx(YD,{className:"h-5 w-5 text-gray-400"})}),x.jsx("input",{"trae-inspector-start-line":"60","trae-inspector-start-column":"16","trae-inspector-end-line":"70","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:g=>e(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:"admin@studentmate.com"})]})]}),x.jsxs("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"12","trae-inspector-end-line":"94","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"75","trae-inspector-start-column":"14","trae-inspector-end-line":"77","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Password%22%2C%22textStartLine%22%3A%2275%22%2C%22textStartColumn%22%3A%2292%22%2C%22textEndLine%22%3A%2277%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),x.jsxs("div",{"trae-inspector-start-line":"78","trae-inspector-start-column":"14","trae-inspector-end-line":"93","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 relative rounded-md shadow-sm",children:[x.jsx("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"16","trae-inspector-end-line":"81","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:x.jsx(H6,{className:"h-5 w-5 text-gray-400"})}),x.jsx("input",{"trae-inspector-start-line":"82","trae-inspector-start-column":"16","trae-inspector-end-line":"92","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:g=>n(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:""})]})]}),r&&x.jsx("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"14","trae-inspector-end-line":"99","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-red-600 text-sm text-center",children:r}),x.jsx("div",{"trae-inspector-start-line":"102","trae-inspector-start-column":"12","trae-inspector-end-line":"110","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsx("button",{"trae-inspector-start-line":"103","trae-inspector-start-column":"14","trae-inspector-end-line":"109","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:a,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${a?"opacity-75 cursor-not-allowed":""}`,children:a?"Signing in...":"Sign in"})})]})})})]})},yc="assessments",eW=async(s,e,t)=>{const n=Pa(Os(gn,yc),Ku("universityId","==",s),Ku("moduleId","==",e),Ku("type","==",t),rd("year","desc"));return(await Sp(n)).docs.map(i=>({assessmentId:i.id,...i.data()}))},tW=async(s=5)=>{const e=Pa(Os(gn,yc),rd("createdAt","desc"),bM(s));return(await Sp(e)).docs.map(n=>({assessmentId:n.id,...n.data()}))},nW=async()=>{const s=Os(gn,yc),e=await HE(Pa(s,Ku("type","==","exam"))),t=await HE(Pa(s,Ku("type","==","test"))),n=await HE(Pa(s,Ku("type","==","supplementary")));return{exams:e.data().count,tests:t.data().count,supps:n.data().count}},rW=async(s,e,t,n,r,i,a)=>{let u="";if(a){const h=Wo(Go,`assessments/${s}/${e}/${t}/${Date.now()}_${a.name}`);await gp(h,a),u=await yp(h)}return(await O0(Os(gn,yc),{universityId:s,moduleId:e,type:t,title:n,year:r,pdfUrl:u||null,createdBy:i,createdAt:M0()})).id},sW=async s=>{if(s.pdfUrl)try{const e=Wo(Go,s.pdfUrl);await eC(e)}catch(e){console.error("Error deleting file from storage:",e)}await L0(Ma(gn,yc,s.assessmentId))},qE=async(s,e,t,n,r,i=!1)=>{const a={...t};if(n){const u=Wo(Go,`questions/${s}/${Date.now()}_content_${n.name}`);await gp(u,n),a.contentUrl=await yp(u)}if(r){const u=Wo(Go,`questions/${s}/${Date.now()}_answer_${r.name}`);await gp(u,r),a.answerUrl=await yp(u)}else i&&(a.answerUrl=null);await Lx(Ma(gn,yc,s,"questions",e),a)},iW=async s=>{const e=Pa(Os(gn,yc,s,"questions"),rd("order","asc"));return(await Sp(e)).docs.map(n=>({questionId:n.id,...n.data()}))},ER=async(s,e,t,n,r,i,a,u,d,h,f)=>{let g="";if(r){const v=Wo(Go,`questions/${s}/${Date.now()}_content_${r.name}`);await gp(v,r),g=await yp(v)}let w="";if(a){const v=Wo(Go,`questions/${s}/${Date.now()}_answer_${a.name}`);await gp(v,a),w=await yp(v)}await O0(Os(gn,yc,s,"questions"),{title:e,marks:t,order:n,contentUrl:g||null,content:i||null,answerUrl:w||null,answerText:null,videoUrl:d||null,page:h||null,coordinates:f||null,createdAt:M0()})},aW=async(s,e)=>{if(e.contentUrl)try{const t=Wo(Go,e.contentUrl);await eC(t)}catch(t){console.error("Error deleting content image",t)}if(e.answerUrl)try{const t=Wo(Go,e.answerUrl);await eC(t)}catch(t){console.error("Error deleting answer image",t)}await L0(Ma(gn,yc,s,"questions",e.questionId))},Bx="universities",Pm=async()=>{const s=Pa(Os(gn,Bx),rd("name"));return(await Sp(s)).docs.map(t=>({universityId:t.id,...t.data()}))},oW=async(s,e,t)=>{let n="";if(t){const i=Wo(Go,`university-logos/${Date.now()}_${t.name}`);await gp(i,t),n=await yp(i)}return(await O0(Os(gn,Bx),{name:s,code:e,logoUrl:n,createdAt:M0()})).id},lW=async(s,e,t)=>{let n={...e};if(t){const r=Wo(Go,`university-logos/${Date.now()}_${t.name}`);await gp(r,t),n.logoUrl=await yp(r)}await Lx(Ma(gn,Bx,s),n)},cW=async s=>{await L0(Ma(gn,Bx,s))},sA=43200,bR=1440,CR=Symbol.for("constructDateFrom");function GS(s,e){return typeof s=="function"?s(e):s&&typeof s=="object"&&CR in s?s[CR](e):s instanceof Date?new s.constructor(e):new Date(e)}function sd(s,e){return GS(s,s)}let uW={};function dW(){return uW}function FR(s){const e=sd(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function qS(s,...e){const t=GS.bind(null,s||e.find(n=>typeof n=="object"));return e.map(t)}function SA(s,e){const t=+sd(s)-+sd(e);return t<0?-1:t>0?1:t}function hW(s){return GS(s,Date.now())}function pW(s,e,t){const[n,r]=qS(t==null?void 0:t.in,s,e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function fW(s){return e=>{const n=(s?Math[s]:Math.trunc)(e);return n===0?0:n}}function mW(s,e){return+sd(s)-+sd(e)}function gW(s,e){const t=sd(s);return t.setHours(23,59,59,999),t}function yW(s,e){const t=sd(s),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function wW(s,e){const t=sd(s);return+gW(t)==+yW(t)}function vW(s,e,t){const[n,r,i]=qS(t==null?void 0:t.in,s,s,e),a=SA(r,i),u=Math.abs(pW(r,i));if(u<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*u);let d=SA(r,i)===-a;wW(n)&&u===1&&SA(n,i)===1&&(d=!1);const h=a*(u-+d);return h===0?0:h}function AW(s,e,t){const n=mW(s,e)/1e3;return fW(t==null?void 0:t.roundingMethod)(n)}const xW={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_W=(s,e,t)=>{let n;const r=xW[s];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function QE(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const EW={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bW={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},CW={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FW={date:QE({formats:EW,defaultWidth:"full"}),time:QE({formats:bW,defaultWidth:"full"}),dateTime:QE({formats:CW,defaultWidth:"full"})},SW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TW=(s,e,t,n)=>SW[s];function Ag(s){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let r;if(n==="formatting"&&s.formattingValues){const a=s.defaultFormattingWidth||s.defaultWidth,u=t!=null&&t.width?String(t.width):a;r=s.formattingValues[u]||s.formattingValues[a]}else{const a=s.defaultWidth,u=t!=null&&t.width?String(t.width):s.defaultWidth;r=s.values[u]||s.values[a]}const i=s.argumentCallback?s.argumentCallback(e):e;return r[i]}}const kW={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},IW={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},PW={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},RW={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},DW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},NW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},MW=(s,e)=>{const t=Number(s),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},LW={ordinalNumber:MW,era:Ag({values:kW,defaultWidth:"wide"}),quarter:Ag({values:IW,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ag({values:PW,defaultWidth:"wide"}),day:Ag({values:RW,defaultWidth:"wide"}),dayPeriod:Ag({values:DW,defaultWidth:"wide",formattingValues:NW,defaultFormattingWidth:"wide"})};function xg(s){return(e,t={})=>{const n=t.width,r=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],i=e.match(r);if(!i)return null;const a=i[0],u=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],d=Array.isArray(u)?BW(u,g=>g.test(a)):OW(u,g=>g.test(a));let h;h=s.valueCallback?s.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(a.length);return{value:h,rest:f}}}function OW(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function BW(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function jW(s){return(e,t={})=>{const n=e.match(s.matchPattern);if(!n)return null;const r=n[0],i=e.match(s.parsePattern);if(!i)return null;let a=s.valueCallback?s.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const u=e.slice(r.length);return{value:a,rest:u}}}const UW=/^(\d+)(th|st|nd|rd)?/i,VW=/\d+/i,$W={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zW={any:[/^b/i,/^(a|c)/i]},HW={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},WW={any:[/1/i,/2/i,/3/i,/4/i]},GW={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qW={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},QW={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},KW={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},XW={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},YW={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},JW={ordinalNumber:jW({matchPattern:UW,parsePattern:VW,valueCallback:s=>parseInt(s,10)}),era:xg({matchPatterns:$W,defaultMatchWidth:"wide",parsePatterns:zW,defaultParseWidth:"any"}),quarter:xg({matchPatterns:HW,defaultMatchWidth:"wide",parsePatterns:WW,defaultParseWidth:"any",valueCallback:s=>s+1}),month:xg({matchPatterns:GW,defaultMatchWidth:"wide",parsePatterns:qW,defaultParseWidth:"any"}),day:xg({matchPatterns:QW,defaultMatchWidth:"wide",parsePatterns:KW,defaultParseWidth:"any"}),dayPeriod:xg({matchPatterns:XW,defaultMatchWidth:"any",parsePatterns:YW,defaultParseWidth:"any"})},ZW={code:"en-US",formatDistance:_W,formatLong:FW,formatRelative:TW,localize:LW,match:JW,options:{weekStartsOn:0,firstWeekContainsDate:1}};function eG(s,e,t){const n=dW(),r=(t==null?void 0:t.locale)??n.locale??ZW,i=2520,a=SA(s,e);if(isNaN(a))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:a}),[d,h]=qS(t==null?void 0:t.in,...a>0?[e,s]:[s,e]),f=AW(h,d),g=(FR(h)-FR(d))/1e3,w=Math.round((f-g)/60);let v;if(w<2)return t!=null&&t.includeSeconds?f<5?r.formatDistance("lessThanXSeconds",5,u):f<10?r.formatDistance("lessThanXSeconds",10,u):f<20?r.formatDistance("lessThanXSeconds",20,u):f<40?r.formatDistance("halfAMinute",0,u):f<60?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",1,u):w===0?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",w,u);if(w<45)return r.formatDistance("xMinutes",w,u);if(w<90)return r.formatDistance("aboutXHours",1,u);if(w<bR){const F=Math.round(w/60);return r.formatDistance("aboutXHours",F,u)}else{if(w<i)return r.formatDistance("xDays",1,u);if(w<sA){const F=Math.round(w/bR);return r.formatDistance("xDays",F,u)}else if(w<sA*2)return v=Math.round(w/sA),r.formatDistance("aboutXMonths",v,u)}if(v=vW(h,d),v<12){const F=Math.round(w/sA);return r.formatDistance("xMonths",F,u)}else{const F=v%12,C=Math.trunc(v/12);return F<3?r.formatDistance("aboutXYears",C,u):F<9?r.formatDistance("overXYears",C,u):r.formatDistance("almostXYears",C+1,u)}}function tG(s,e){return eG(s,hW(s),e)}const KE=({title:s,value:e,icon:t,color:n})=>x.jsxs("div",{"trae-inspector-start-line":"16","trae-inspector-start-column":"2","trae-inspector-end-line":"24","trae-inspector-end-column":"8","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-6 flex items-center space-x-4",children:[x.jsx("div",{"trae-inspector-start-line":"17","trae-inspector-start-column":"4","trae-inspector-end-line":"19","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`p-4 rounded-lg ${n}`,children:x.jsx(t,{className:"h-6 w-6 text-white"})}),x.jsxs("div",{"trae-inspector-start-line":"20","trae-inspector-start-column":"4","trae-inspector-end-line":"23","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("h3",{"trae-inspector-start-line":"21","trae-inspector-start-column":"6","trae-inspector-end-line":"21","trae-inspector-end-column":"67","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:e}),x.jsx("p",{"trae-inspector-start-line":"22","trae-inspector-start-column":"6","trae-inspector-end-line":"22","trae-inspector-end-column":"54","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500",children:s})]})]}),nG=()=>{const[s,e]=q.useState([]),[t,n]=q.useState({exams:0,tests:0,supps:0}),[r,i]=q.useState([]),[a,u]=q.useState(!0);return q.useEffect(()=>{(async()=>{try{const[h,f,g]=await Promise.all([tW(),nW(),Pm()]);e(h),n(f),i(g)}catch(h){console.error("Error loading dashboard data:",h)}finally{u(!1)}})()},[]),x.jsxs("div",{"trae-inspector-start-line":"54","trae-inspector-start-column":"4","trae-inspector-end-line":"161","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[x.jsxs("div",{"trae-inspector-start-line":"55","trae-inspector-start-column":"6","trae-inspector-end-line":"70","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center",children:[x.jsx("h1",{"trae-inspector-start-line":"56","trae-inspector-start-column":"8","trae-inspector-end-line":"56","trae-inspector-end-column":"77","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Admin%20Dashboard%22%2C%22textStartLine%22%3A%2256%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2256%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),x.jsxs("div",{"trae-inspector-start-line":"57","trae-inspector-start-column":"8","trae-inspector-end-line":"69","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-2 bg-white rounded-lg p-1 shadow-sm overflow-x-auto max-w-md",children:[r.slice(0,5).map(d=>x.jsx("button",{"trae-inspector-start-line":"59","trae-inspector-start-column":"12","trae-inspector-end-line":"64","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-4 py-1.5 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100 whitespace-nowrap",children:d.code},d.universityId)),x.jsxs(u1,{to:"/universities",className:"px-4 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-md whitespace-nowrap flex items-center",children:["View All ",x.jsx(h6,{className:"ml-1 h-3 w-3"})]})]})]}),x.jsxs("div",{"trae-inspector-start-line":"73","trae-inspector-start-column":"6","trae-inspector-end-line":"92","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[x.jsx(KE,{title:"Total Exams",value:t.exams,icon:A6,color:"bg-blue-500"}),x.jsx(KE,{title:"Total Tests",value:t.tests,icon:hm,color:"bg-orange-500"}),x.jsx(KE,{title:"Supp. Exams",value:t.supps,icon:k6,color:"bg-green-500"})]}),x.jsx("div",{"trae-inspector-start-line":"94","trae-inspector-start-column":"6","trae-inspector-end-line":"160","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:x.jsxs("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"8","trae-inspector-end-line":"159","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"lg:col-span-3 bg-white rounded-xl shadow-sm overflow-hidden",children:[x.jsxs("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"10","trae-inspector-end-line":"102","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[x.jsx("h2",{"trae-inspector-start-line":"98","trae-inspector-start-column":"12","trae-inspector-end-line":"98","trae-inspector-end-column":"71","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Recent%20Uploads%22%2C%22textStartLine%22%3A%2298%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%2298%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-bold text-gray-900",children:"Recent Uploads"}),x.jsx(u1,{to:"/exams",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:"+ Manage Assessments"})]}),x.jsx("div",{"trae-inspector-start-line":"103","trae-inspector-start-column":"10","trae-inspector-end-line":"158","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:x.jsxs("table",{"trae-inspector-start-line":"104","trae-inspector-start-column":"12","trae-inspector-end-line":"157","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[x.jsx("thead",{"trae-inspector-start-line":"105","trae-inspector-start-column":"14","trae-inspector-end-line":"113","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:x.jsxs("tr",{"trae-inspector-start-line":"106","trae-inspector-start-column":"16","trae-inspector-end-line":"112","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("th",{"trae-inspector-start-line":"107","trae-inspector-start-column":"18","trae-inspector-end-line":"107","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Type%22%2C%22textStartLine%22%3A%22107%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Type"}),x.jsx("th",{"trae-inspector-start-line":"108","trae-inspector-start-column":"18","trae-inspector-end-line":"108","trae-inspector-end-column":"54","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22108%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22108%22%2C%22textEndColumn%22%3A%2249%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Title"}),x.jsx("th",{"trae-inspector-start-line":"109","trae-inspector-start-column":"18","trae-inspector-end-line":"109","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22109%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22109%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Year"}),x.jsx("th",{"trae-inspector-start-line":"110","trae-inspector-start-column":"18","trae-inspector-end-line":"110","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Date%22%2C%22textStartLine%22%3A%22110%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22110%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Date"}),x.jsx("th",{"trae-inspector-start-line":"111","trae-inspector-start-column":"18","trae-inspector-end-line":"111","trae-inspector-end-column":"59","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Created%20By%22%2C%22textStartLine%22%3A%22111%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22111%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Created By"})]})}),x.jsx("tbody",{"trae-inspector-start-line":"114","trae-inspector-start-column":"14","trae-inspector-end-line":"156","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:a?x.jsx("tr",{"trae-inspector-start-line":"116","trae-inspector-start-column":"18","trae-inspector-end-line":"118","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsx("td",{"trae-inspector-start-line":"117","trae-inspector-start-column":"20","trae-inspector-end-line":"117","trae-inspector-end-column":"99","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22117%22%2C%22textStartColumn%22%3A%2284%22%2C%22textEndLine%22%3A%22117%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):s.length===0?x.jsx("tr",{"trae-inspector-start-line":"120","trae-inspector-start-column":"18","trae-inspector-end-line":"125","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsxs("td",{"trae-inspector-start-line":"121","trae-inspector-start-column":"20","trae-inspector-end-line":"124","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500 py-10",children:[x.jsx("p",{"trae-inspector-start-line":"122","trae-inspector-start-column":"22","trae-inspector-end-line":"122","trae-inspector-end-column":"92","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20recent%20uploads%22%2C%22textStartLine%22%3A%22122%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22122%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-medium text-gray-900",children:"No recent uploads"}),x.jsx("p",{"trae-inspector-start-line":"123","trae-inspector-start-column":"22","trae-inspector-end-line":"123","trae-inspector-end-column":"118","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Start%20by%20adding%20universities%2C%20modules%2C%20and%20assessments.%22%2C%22textStartLine%22%3A%22123%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22123%22%2C%22textEndColumn%22%3A%22114%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500",children:"Start by adding universities, modules, and assessments."})]})}):s.map(d=>{var h,f;return x.jsxs("tr",{"trae-inspector-start-line":"128","trae-inspector-start-column":"20","trae-inspector-end-line":"153","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50 transition-colors",children:[x.jsx("td",{"trae-inspector-start-line":"129","trae-inspector-start-column":"22","trae-inspector-end-line":"137","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-gray-900 capitalize",children:x.jsx("span",{"trae-inspector-start-line":"130","trae-inspector-start-column":"24","trae-inspector-end-line":"136","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`px-2 py-1 rounded-full text-xs ${d.type==="exam"?"bg-blue-100 text-blue-800":d.type==="test"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:d.type})}),x.jsx("td",{"trae-inspector-start-line":"138","trae-inspector-start-column":"22","trae-inspector-end-line":"140","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:x.jsx("div",{"trae-inspector-start-line":"139","trae-inspector-start-column":"24","trae-inspector-end-line":"139","trae-inspector-end-column":"91","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-bold text-gray-900",children:d.title})}),x.jsx("td",{"trae-inspector-start-line":"141","trae-inspector-start-column":"22","trae-inspector-end-line":"141","trae-inspector-end-column":"86","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:d.year}),x.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:x.jsx("div",{"trae-inspector-start-line":"143","trae-inspector-start-column":"24","trae-inspector-end-line":"145","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-900",children:(h=d.createdAt)!=null&&h.seconds?new Date(d.createdAt.seconds*1e3).toLocaleDateString():"Just now"})}),x.jsxs("td",{"trae-inspector-start-line":"147","trae-inspector-start-column":"22","trae-inspector-end-line":"152","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500 flex items-center space-x-2",children:[x.jsx("span",{"trae-inspector-start-line":"148","trae-inspector-start-column":"24","trae-inspector-end-line":"148","trae-inspector-end-column":"67","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:d.createdBy.split("@")[0]}),x.jsx("span",{"trae-inspector-start-line":"149","trae-inspector-start-column":"24","trae-inspector-end-line":"151","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Dashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-400",children:(f=d.createdAt)!=null&&f.seconds?tG(new Date(d.createdAt.seconds*1e3),{addSuffix:!0}):"now"})]})]},d.assessmentId)})})]})})]})})]})},j0=({isOpen:s,onClose:e,title:t,children:n})=>s?x.jsx("div",{"trae-inspector-start-line":"15","trae-inspector-start-column":"4","trae-inspector-end-line":"40","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-50 overflow-y-auto",children:x.jsxs("div",{"trae-inspector-start-line":"16","trae-inspector-start-column":"6","trae-inspector-end-line":"39","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[x.jsx("div",{"trae-inspector-start-line":"17","trae-inspector-start-column":"8","trae-inspector-end-line":"19","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:x.jsx("div",{"trae-inspector-start-line":"18","trae-inspector-start-column":"10","trae-inspector-end-line":"18","trae-inspector-end-column":"91","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),x.jsx("span",{"trae-inspector-start-line":"21","trae-inspector-start-column":"8","trae-inspector-end-line":"21","trae-inspector-end-column":"110","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%2221%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%2221%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),x.jsx("div",{"trae-inspector-start-line":"23","trae-inspector-start-column":"8","trae-inspector-end-line":"38","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:x.jsxs("div",{"trae-inspector-start-line":"24","trae-inspector-start-column":"10","trae-inspector-end-line":"37","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[x.jsxs("div",{"trae-inspector-start-line":"25","trae-inspector-start-column":"12","trae-inspector-end-line":"35","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-start mb-4",children:[x.jsx("h3",{"trae-inspector-start-line":"26","trae-inspector-start-column":"14","trae-inspector-end-line":"28","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:t}),x.jsx("button",{"trae-inspector-start-line":"29","trae-inspector-start-column":"14","trae-inspector-end-line":"34","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/Modal.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:e,className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none",children:x.jsx(Tg,{className:"h-6 w-6"})})]}),n]})})]})}):null,rG=()=>{const[s,e]=q.useState([]),[t,n]=q.useState(!0),[r,i]=q.useState(!1),[a,u]=q.useState(""),[d,h]=q.useState(null),[f,g]=q.useState(""),[w,v]=q.useState(""),[F,C]=q.useState(null),[S,I]=q.useState(!1),O=async()=>{try{const D=await Pm();e(D)}catch(D){console.error("Error fetching universities:",D)}finally{n(!1)}};q.useEffect(()=>{O()},[]);const R=D=>{D?(h(D),g(D.name),v(D.code)):(h(null),g(""),v("")),C(null),i(!0)},B=async D=>{D.preventDefault(),I(!0);try{d?await lW(d.universityId,{name:f,code:w},F):await oW(f,w,F),i(!1),O()}catch(N){console.error("Error saving university:",N)}finally{I(!1)}},z=async D=>{if(window.confirm("Are you sure you want to delete this university?"))try{await cW(D),O()}catch(N){console.error("Error deleting university:",N)}},W=s.filter(D=>D.name.toLowerCase().includes(a.toLowerCase())||D.code.toLowerCase().includes(a.toLowerCase()));return x.jsxs("div",{"trae-inspector-start-line":"85","trae-inspector-start-column":"4","trae-inspector-end-line":"214","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsxs("div",{"trae-inspector-start-line":"86","trae-inspector-start-column":"6","trae-inspector-end-line":"95","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[x.jsx("h1",{"trae-inspector-start-line":"87","trae-inspector-start-column":"8","trae-inspector-end-line":"87","trae-inspector-end-column":"81","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Universities%22%2C%22textStartLine%22%3A%2287%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2287%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Manage Universities"}),x.jsxs("button",{"trae-inspector-start-line":"88","trae-inspector-start-column":"8","trae-inspector-end-line":"94","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>R(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[x.jsx(E0,{className:"h-5 w-5"}),x.jsx("span",{"trae-inspector-start-line":"93","trae-inspector-start-column":"10","trae-inspector-end-line":"93","trae-inspector-end-column":"37","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20University%22%2C%22textStartLine%22%3A%2293%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2293%22%2C%22textEndColumn%22%3A%2230%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add University"})]})]}),x.jsxs("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"6","trae-inspector-end-line":"164","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[x.jsx("div",{"trae-inspector-start-line":"98","trae-inspector-start-column":"8","trae-inspector-end-line":"111","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100",children:x.jsxs("div",{"trae-inspector-start-line":"99","trae-inspector-start-column":"10","trae-inspector-end-line":"110","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative max-w-md",children:[x.jsx("div",{"trae-inspector-start-line":"100","trae-inspector-start-column":"12","trae-inspector-end-line":"102","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:x.jsx(hx,{className:"h-5 w-5 text-gray-400"})}),x.jsx("input",{"trae-inspector-start-line":"103","trae-inspector-start-column":"12","trae-inspector-end-line":"109","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search universities...",value:a,onChange:D=>u(D.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})}),x.jsx("div",{"trae-inspector-start-line":"113","trae-inspector-start-column":"8","trae-inspector-end-line":"163","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:x.jsxs("table",{"trae-inspector-start-line":"114","trae-inspector-start-column":"10","trae-inspector-end-line":"162","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[x.jsx("thead",{"trae-inspector-start-line":"115","trae-inspector-start-column":"12","trae-inspector-end-line":"122","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:x.jsxs("tr",{"trae-inspector-start-line":"116","trae-inspector-start-column":"14","trae-inspector-end-line":"121","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("th",{"trae-inspector-start-line":"117","trae-inspector-start-column":"16","trae-inspector-end-line":"117","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logo%22%2C%22textStartLine%22%3A%22117%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22117%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Logo"}),x.jsx("th",{"trae-inspector-start-line":"118","trae-inspector-start-column":"16","trae-inspector-end-line":"118","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Name%22%2C%22textStartLine%22%3A%22118%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22118%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Name"}),x.jsx("th",{"trae-inspector-start-line":"119","trae-inspector-start-column":"16","trae-inspector-end-line":"119","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Code%22%2C%22textStartLine%22%3A%22119%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22119%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Code"}),x.jsx("th",{"trae-inspector-start-line":"120","trae-inspector-start-column":"16","trae-inspector-end-line":"120","trae-inspector-end-column":"65","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22120%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22120%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),x.jsx("tbody",{"trae-inspector-start-line":"123","trae-inspector-start-column":"12","trae-inspector-end-line":"161","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:t?x.jsx("tr",{"trae-inspector-start-line":"125","trae-inspector-start-column":"16","trae-inspector-end-line":"127","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsx("td",{"trae-inspector-start-line":"126","trae-inspector-start-column":"18","trae-inspector-end-line":"126","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22126%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22126%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):W.length===0?x.jsx("tr",{"trae-inspector-start-line":"129","trae-inspector-start-column":"16","trae-inspector-end-line":"131","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsx("td",{"trae-inspector-start-line":"130","trae-inspector-start-column":"18","trae-inspector-end-line":"130","trae-inspector-end-column":"108","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20universities%20found%22%2C%22textStartLine%22%3A%22130%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22130%22%2C%22textEndColumn%22%3A%22103%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No universities found"})}):W.map(D=>x.jsxs("tr",{"trae-inspector-start-line":"134","trae-inspector-start-column":"18","trae-inspector-end-line":"158","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[x.jsx("td",{"trae-inspector-start-line":"135","trae-inspector-start-column":"20","trae-inspector-end-line":"141","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:D.logoUrl?x.jsx("img",{"trae-inspector-start-line":"137","trae-inspector-start-column":"24","trae-inspector-end-line":"137","trae-inspector-end-column":"109","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:D.logoUrl,alt:D.name,className:"h-10 w-10 object-contain rounded"}):x.jsx("div",{"trae-inspector-start-line":"139","trae-inspector-start-column":"24","trae-inspector-end-line":"139","trae-inspector-end-column":"139","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20Logo%22%2C%22textStartLine%22%3A%22139%22%2C%22textStartColumn%22%3A%22126%22%2C%22textEndLine%22%3A%22139%22%2C%22textEndColumn%22%3A%22133%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 text-xs",children:"No Logo"})}),x.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"20","trae-inspector-end-line":"142","trae-inspector-end-column":"95","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-gray-900",children:D.name}),x.jsx("td",{"trae-inspector-start-line":"143","trae-inspector-start-column":"20","trae-inspector-end-line":"143","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:D.code}),x.jsxs("td",{"trae-inspector-start-line":"144","trae-inspector-start-column":"20","trae-inspector-end-line":"157","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:[x.jsx("button",{"trae-inspector-start-line":"145","trae-inspector-start-column":"22","trae-inspector-end-line":"150","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>R(D),className:"text-blue-600 hover:text-blue-900",children:x.jsx(jF,{className:"h-5 w-5"})}),x.jsx("button",{"trae-inspector-start-line":"151","trae-inspector-start-column":"22","trae-inspector-end-line":"156","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(D.universityId),className:"text-red-600 hover:text-red-900",children:x.jsx(pm,{className:"h-5 w-5"})})]})]},D.universityId))})]})})]}),x.jsx(j0,{isOpen:r,onClose:()=>i(!1),title:d?"Edit University":"Add University",children:x.jsxs("form",{"trae-inspector-start-line":"171","trae-inspector-start-column":"8","trae-inspector-end-line":"212","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:B,className:"space-y-4",children:[x.jsxs("div",{"trae-inspector-start-line":"172","trae-inspector-start-column":"10","trae-inspector-end-line":"182","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"173","trae-inspector-start-column":"12","trae-inspector-end-line":"173","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%20Name%22%2C%22textStartLine%22%3A%22173%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22173%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"University Name"}),x.jsx("input",{"trae-inspector-start-line":"174","trae-inspector-start-column":"12","trae-inspector-end-line":"181","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:f,onChange:D=>g(D.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"University of Pretoria"})]}),x.jsxs("div",{"trae-inspector-start-line":"183","trae-inspector-start-column":"10","trae-inspector-end-line":"193","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"184","trae-inspector-start-column":"12","trae-inspector-end-line":"184","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%20Code%22%2C%22textStartLine%22%3A%22184%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22184%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"University Code"}),x.jsx("input",{"trae-inspector-start-line":"185","trae-inspector-start-column":"12","trae-inspector-end-line":"192","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:w,onChange:D=>v(D.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"UP"})]}),x.jsxs("div",{"trae-inspector-start-line":"194","trae-inspector-start-column":"10","trae-inspector-end-line":"202","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"195","trae-inspector-start-column":"12","trae-inspector-end-line":"195","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Logo%22%2C%22textStartLine%22%3A%22195%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22195%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Logo"}),x.jsx("input",{"trae-inspector-start-line":"196","trae-inspector-start-column":"12","trae-inspector-end-line":"201","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:"image/*",onChange:D=>C(D.target.files?D.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),x.jsx("div",{"trae-inspector-start-line":"203","trae-inspector-start-column":"10","trae-inspector-end-line":"211","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:x.jsx("button",{"trae-inspector-start-line":"204","trae-inspector-start-column":"12","trae-inspector-end-line":"210","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Universities.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:S,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${S?"opacity-75 cursor-not-allowed":""}`,children:S?"Saving...":"Save"})})]})})]})},jx="modules",$M=async s=>{const e=Pa(Os(gn,jx),Ku("universityId","==",s),rd("code"));return(await Sp(e)).docs.map(n=>({moduleId:n.id,...n.data()}))},sG=async(s,e,t)=>(await O0(Os(gn,jx),{universityId:s,code:e,name:t,createdAt:M0()})).id,iG=async(s,e)=>{await Lx(Ma(gn,jx,s),e)},aG=async s=>{await L0(Ma(gn,jx,s))},oG=()=>{const[s,e]=q.useState([]),[t,n]=q.useState(""),[r,i]=q.useState([]),[a,u]=q.useState(!1),[d,h]=q.useState(!1),[f,g]=q.useState(""),[w,v]=q.useState(null),[F,C]=q.useState(""),[S,I]=q.useState(""),[O,R]=q.useState(!1);q.useEffect(()=>{(async()=>{try{const V=await Pm();e(V),V.length>0&&n(V[0].universityId)}catch(V){console.error("Error fetching universities:",V)}})()},[]),q.useEffect(()=>{t&&B(t)},[t]);const B=async L=>{u(!0);try{const V=await $M(L);i(V)}catch(V){console.error("Error fetching modules:",V)}finally{u(!1)}},z=L=>{L?(v(L),C(L.code),I(L.name)):(v(null),C(""),I("")),h(!0)},W=async L=>{if(L.preventDefault(),!!t){R(!0);try{w?await iG(w.moduleId,{code:F,name:S}):await sG(t,F,S),h(!1),B(t)}catch(V){console.error("Error saving module:",V)}finally{R(!1)}}},D=async L=>{if(window.confirm("Are you sure you want to delete this module?"))try{await aG(L),B(t)}catch(V){console.error("Error deleting module:",V)}},N=r.filter(L=>L.name.toLowerCase().includes(f.toLowerCase())||L.code.toLowerCase().includes(f.toLowerCase()));return x.jsxs("div",{"trae-inspector-start-line":"105","trae-inspector-start-column":"4","trae-inspector-end-line":"239","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsxs("div",{"trae-inspector-start-line":"106","trae-inspector-start-column":"6","trae-inspector-end-line":"116","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[x.jsx("h1",{"trae-inspector-start-line":"107","trae-inspector-start-column":"8","trae-inspector-end-line":"107","trae-inspector-end-column":"76","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Modules%22%2C%22textStartLine%22%3A%22107%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Manage Modules"}),x.jsxs("button",{"trae-inspector-start-line":"108","trae-inspector-start-column":"8","trae-inspector-end-line":"115","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(),disabled:!t,className:`bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 ${t?"":"opacity-50 cursor-not-allowed"}`,children:[x.jsx(E0,{className:"h-5 w-5"}),x.jsx("span",{"trae-inspector-start-line":"114","trae-inspector-start-column":"10","trae-inspector-end-line":"114","trae-inspector-end-column":"33","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20Module%22%2C%22textStartLine%22%3A%22114%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%22114%22%2C%22textEndColumn%22%3A%2226%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add Module"})]})]}),x.jsx("div",{"trae-inspector-start-line":"118","trae-inspector-start-column":"6","trae-inspector-end-line":"150","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:x.jsxs("div",{"trae-inspector-start-line":"119","trae-inspector-start-column":"8","trae-inspector-end-line":"149","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[x.jsxs("div",{"trae-inspector-start-line":"120","trae-inspector-start-column":"10","trae-inspector-end-line":"133","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[x.jsx("label",{"trae-inspector-start-line":"121","trae-inspector-start-column":"12","trae-inspector-end-line":"121","trae-inspector-end-column":"101","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20University%22%2C%22textStartLine%22%3A%22121%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22121%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select University"}),x.jsx("select",{"trae-inspector-start-line":"122","trae-inspector-start-column":"12","trae-inspector-end-line":"132","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:t,onChange:L=>n(L.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:s.map(L=>x.jsxs("option",{"trae-inspector-start-line":"128","trae-inspector-start-column":"16","trae-inspector-end-line":"130","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:L.universityId,children:[L.name," (",L.code,")"]},L.universityId))})]}),x.jsxs("div",{"trae-inspector-start-line":"134","trae-inspector-start-column":"10","trae-inspector-end-line":"148","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[x.jsx("label",{"trae-inspector-start-line":"135","trae-inspector-start-column":"12","trae-inspector-end-line":"135","trae-inspector-end-column":"98","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Search%20Modules%22%2C%22textStartLine%22%3A%22135%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22135%22%2C%22textEndColumn%22%3A%2290%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Modules"}),x.jsxs("div",{"trae-inspector-start-line":"136","trae-inspector-start-column":"12","trae-inspector-end-line":"147","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative",children:[x.jsx("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"14","trae-inspector-end-line":"139","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:x.jsx(hx,{className:"h-5 w-5 text-gray-400"})}),x.jsx("input",{"trae-inspector-start-line":"140","trae-inspector-start-column":"14","trae-inspector-end-line":"146","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search by code or name...",value:f,onChange:L=>g(L.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}),x.jsx("div",{"trae-inspector-start-line":"152","trae-inspector-start-column":"6","trae-inspector-end-line":"198","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:x.jsx("div",{"trae-inspector-start-line":"153","trae-inspector-start-column":"8","trae-inspector-end-line":"197","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:x.jsxs("table",{"trae-inspector-start-line":"154","trae-inspector-start-column":"10","trae-inspector-end-line":"196","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[x.jsx("thead",{"trae-inspector-start-line":"155","trae-inspector-start-column":"12","trae-inspector-end-line":"161","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:x.jsxs("tr",{"trae-inspector-start-line":"156","trae-inspector-start-column":"14","trae-inspector-end-line":"160","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("th",{"trae-inspector-start-line":"157","trae-inspector-start-column":"16","trae-inspector-end-line":"157","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Code%22%2C%22textStartLine%22%3A%22157%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22157%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Code"}),x.jsx("th",{"trae-inspector-start-line":"158","trae-inspector-start-column":"16","trae-inspector-end-line":"158","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Name%22%2C%22textStartLine%22%3A%22158%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22158%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Name"}),x.jsx("th",{"trae-inspector-start-line":"159","trae-inspector-start-column":"16","trae-inspector-end-line":"159","trae-inspector-end-column":"65","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22159%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22159%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),x.jsx("tbody",{"trae-inspector-start-line":"162","trae-inspector-start-column":"12","trae-inspector-end-line":"195","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:a?x.jsx("tr",{"trae-inspector-start-line":"164","trae-inspector-start-column":"16","trae-inspector-end-line":"166","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsx("td",{"trae-inspector-start-line":"165","trae-inspector-start-column":"18","trae-inspector-end-line":"165","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22165%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22165%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):N.length===0?x.jsx("tr",{"trae-inspector-start-line":"168","trae-inspector-start-column":"16","trae-inspector-end-line":"172","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsx("td",{"trae-inspector-start-line":"169","trae-inspector-start-column":"18","trae-inspector-end-line":"171","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:t?"No modules found for this university":"Please select a university"})}):N.map(L=>x.jsxs("tr",{"trae-inspector-start-line":"175","trae-inspector-start-column":"18","trae-inspector-end-line":"192","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[x.jsx("td",{"trae-inspector-start-line":"176","trae-inspector-start-column":"20","trae-inspector-end-line":"176","trae-inspector-end-column":"95","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm font-medium text-blue-600",children:L.code}),x.jsx("td",{"trae-inspector-start-line":"177","trae-inspector-start-column":"20","trae-inspector-end-line":"177","trae-inspector-end-column":"83","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-900",children:L.name}),x.jsxs("td",{"trae-inspector-start-line":"178","trae-inspector-start-column":"20","trae-inspector-end-line":"191","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:[x.jsx("button",{"trae-inspector-start-line":"179","trae-inspector-start-column":"22","trae-inspector-end-line":"184","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(L),className:"text-blue-600 hover:text-blue-900",children:x.jsx(jF,{className:"h-5 w-5"})}),x.jsx("button",{"trae-inspector-start-line":"185","trae-inspector-start-column":"22","trae-inspector-end-line":"190","trae-inspector-end-column":"31","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>D(L.moduleId),className:"text-red-600 hover:text-red-900",children:x.jsx(pm,{className:"h-5 w-5"})})]})]},L.moduleId))})]})})}),x.jsx(j0,{isOpen:d,onClose:()=>h(!1),title:w?"Edit Module":"Add Module",children:x.jsxs("form",{"trae-inspector-start-line":"205","trae-inspector-start-column":"8","trae-inspector-end-line":"237","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:W,className:"space-y-4",children:[x.jsxs("div",{"trae-inspector-start-line":"206","trae-inspector-start-column":"10","trae-inspector-end-line":"216","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"207","trae-inspector-start-column":"12","trae-inspector-end-line":"207","trae-inspector-end-column":"90","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Module%20Code%22%2C%22textStartLine%22%3A%22207%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22207%22%2C%22textEndColumn%22%3A%2282%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Module Code"}),x.jsx("input",{"trae-inspector-start-line":"208","trae-inspector-start-column":"12","trae-inspector-end-line":"215","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:F,onChange:L=>C(L.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"SMTH011"})]}),x.jsxs("div",{"trae-inspector-start-line":"217","trae-inspector-start-column":"10","trae-inspector-end-line":"227","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"218","trae-inspector-start-column":"12","trae-inspector-end-line":"218","trae-inspector-end-column":"90","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Module%20Name%22%2C%22textStartLine%22%3A%22218%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22218%22%2C%22textEndColumn%22%3A%2282%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Module Name"}),x.jsx("input",{"trae-inspector-start-line":"219","trae-inspector-start-column":"12","trae-inspector-end-line":"226","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:S,onChange:L=>I(L.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Introduction to Calculus"})]}),x.jsx("div",{"trae-inspector-start-line":"228","trae-inspector-start-column":"10","trae-inspector-end-line":"236","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:x.jsx("button",{"trae-inspector-start-line":"229","trae-inspector-start-column":"12","trae-inspector-end-line":"235","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Modules.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:O,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${O?"opacity-75 cursor-not-allowed":""}`,children:O?"Saving...":"Save"})})]})})]})},ds=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),tC=[.001,0,0,.001,0,0],XE=1.35,yi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Qc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xy="pdfjs_internal_editor_",et={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},pt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},lG={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},nC={TRIANGLES:1,LATTICE:2},tr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},TA={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Hn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},y2={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ux={ERRORS:0,WARNINGS:1,INFOS:5},_y={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},_g={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},cG={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Vx=Ux.WARNINGS;function uG(s){Number.isInteger(s)&&(Vx=s)}function dG(){return Vx}function $x(s){Vx>=Ux.INFOS&&console.info(`Info: ${s}`)}function Xe(s){Vx>=Ux.WARNINGS&&console.warn(`Warning: ${s}`)}function Tt(s){throw new Error(s)}function St(s,e){s||Tt(e)}function hG(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function zM(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"){if(t.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(t.tryConvertEncoding)try{s=wG(s)}catch{}}const n=e?URL.parse(s,e):URL.parse(s);return hG(n)?n:null}function HM(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&zM(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Ye(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Tp=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class SR extends Tp{constructor(e,t){super(e,"PasswordException"),this.code=t}}class YE extends Tp{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class rC extends Tp{constructor(e){super(e,"InvalidPDFException")}}class I1 extends Tp{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class pG extends Tp{constructor(e){super(e,"FormatError")}}class id extends Tp{constructor(e){super(e,"AbortException")}}function fG(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&Tt("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),a=s.subarray(r,i);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function zx(s){typeof s!="string"&&Tt("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function mG(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function gG(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function yG(){try{return new Function(""),!0}catch{return!1}}class ar{static get isLittleEndian(){return Ye(this,"isLittleEndian",gG())}static get isEvalSupported(){return Ye(this,"isEvalSupported",yG())}static get isOffscreenCanvasSupported(){return Ye(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ye(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Ye(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Ye(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Ye(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Ye(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const JE=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var ac,kA,sC;class Te{static makeHexColor(e,t,n){return`#${JE[e]}${JE[t]}${JE[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const r=e[n],i=e[n+1];e[n]=r*t[0]+i*t[2]+t[4],e[n+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],i=t[1],a=t[2],u=t[3],d=t[4],h=t[5];for(let f=0;f<6;f+=2){const g=e[n+f],w=e[n+f+1];e[n+f]=g*r+w*a+d,e[n+f+1]=g*i+w*u+h}}static applyInverseTransform(e,t){const n=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){const r=t[0],i=t[1],a=t[2],u=t[3],d=t[4],h=t[5],f=e[0],g=e[1],w=e[2],v=e[3];let F=r*f+d,C=F,S=r*w+d,I=S,O=u*g+h,R=O,B=u*v+h,z=B;if(i!==0||a!==0){const W=i*f,D=i*w,N=a*g,L=a*v;F+=N,I+=N,S+=L,C+=L,O+=W,z+=W,B+=D,R+=D}n[0]=Math.min(n[0],F,S,C,I),n[1]=Math.min(n[1],O,B,R,z),n[2]=Math.max(n[2],F,S,C,I),n[3]=Math.max(n[3],O,B,R,z)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],i=e[2],a=e[3],u=n**2+r**2,d=n*i+r*a,h=i**2+a**2,f=(u+h)/2,g=Math.sqrt(f**2-(u*h-d**2));t[0]=Math.sqrt(f+g||1),t[1]=Math.sqrt(f-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,r,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,n,r,i,a,u,d,h){h[0]=Math.min(h[0],e,u),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,u),h[3]=Math.max(h[3],t,d),P(this,ac,sC).call(this,e,n,i,u,t,r,a,d,3*(-e+3*(n-i)+u),6*(e-2*n+i),3*(n-e),h),P(this,ac,sC).call(this,e,n,i,u,t,r,a,d,3*(-t+3*(r-a)+d),6*(t-2*r+a),3*(r-t),h)}}ac=new WeakSet,kA=function(e,t,n,r,i,a,u,d,h,f){if(h<=0||h>=1)return;const g=1-h,w=h*h,v=w*h,F=g*(g*(g*e+3*h*t)+3*w*n)+v*r,C=g*(g*(g*i+3*h*a)+3*w*u)+v*d;f[0]=Math.min(f[0],F),f[1]=Math.min(f[1],C),f[2]=Math.max(f[2],F),f[3]=Math.max(f[3],C)},sC=function(e,t,n,r,i,a,u,d,h,f,g,w){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&P(this,ac,kA).call(this,e,t,n,r,i,a,u,d,-g/f,w);return}const v=f**2-4*g*h;if(v<0)return;const F=Math.sqrt(v),C=2*h;P(this,ac,kA).call(this,e,t,n,r,i,a,u,d,(-f+F)/C,w),P(this,ac,kA).call(this,e,t,n,r,i,a,u,d,(-f-F)/C,w)},T(Te,ac);function wG(s){return decodeURIComponent(escape(s))}let ZE=null,TR=null;function vG(s){return ZE||(ZE=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,TR=new Map([["","t"]])),s.replaceAll(ZE,(e,t,n)=>t?t.normalize("NFKC"):TR.get(n))}function WM(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),fG(s)}const F2="pdfjs_internal_id_";function AG(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...i]=t;if(!s(n)&&!Number.isInteger(n)||!e(r))return!1;const a=i.length;let u=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;u=!1;break;default:return!1}for(const d of i)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Pr(s,e,t){return Math.min(Math.max(s,e),t)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});class Ey{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(i){var d;if(!i)return;let a=null;const u=i.name;if(u==="#text")a=i.value;else if(Ey.shouldBuildText(u))(d=i==null?void 0:i.attributes)!=null&&d.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const h of i.children)r(h)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class GM{static setupStorage(e,t,n,r,i){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const u of n.children)u.attributes.value===a.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const d=u.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){const{attributes:a}=t,u=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[d,h]of Object.entries(a))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!u||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}u&&i.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var g,w;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:i,linkService:n});const u=i!=="richText",d=e.div;if(d.append(a),e.viewport){const v=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=v}u&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(r.children.length===0){if(r.value){const v=document.createTextNode(r.value);a.append(v),u&&Ey.shouldBuildText(r.name)&&h.push(v)}return{textDivs:h}}const f=[[r,-1,a]];for(;f.length>0;){const[v,F,C]=f.at(-1);if(F+1===v.children.length){f.pop();continue}const S=v.children[++f.at(-1)[1]];if(S===null)continue;const{name:I}=S;if(I==="#text"){const R=document.createTextNode(S.value);h.push(R),C.append(R);continue}const O=(g=S==null?void 0:S.attributes)!=null&&g.xmlns?document.createElementNS(S.attributes.xmlns,I):document.createElement(I);if(C.append(O),S.attributes&&this.setAttributes({html:O,element:S,storage:t,intent:i,linkService:n}),((w=S.children)==null?void 0:w.length)>0)f.push([S,-1,O]);else if(S.value){const R=document.createTextNode(S.value);u&&Ey.shouldBuildText(I)&&h.push(R),O.append(R)}}for(const v of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ml="http://www.w3.org/2000/svg",zd=class zd{};oe(zd,"CSS",96),oe(zd,"PDF",72),oe(zd,"PDF_TO_CSS_UNITS",zd.CSS/zd.PDF);let ad=zd;async function U0(s,e="text"){if(Mg(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class V0{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=a,n*=t;const d=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,g,w,v;switch(r%=360,r<0&&(r+=360),r){case 180:f=-1,g=0,w=0,v=1;break;case 90:f=0,g=1,w=1,v=0;break;case 270:f=0,g=-1,w=-1,v=0;break;case 0:f=1,g=0,w=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(w=-w,v=-v);let F,C,S,I;f===0?(F=Math.abs(h-e[1])*n+i,C=Math.abs(d-e[0])*n+a,S=(e[3]-e[1])*n,I=(e[2]-e[0])*n):(F=Math.abs(d-e[0])*n+i,C=Math.abs(h-e[1])*n+a,S=(e[2]-e[0])*n,I=(e[3]-e[1])*n),this.transform=[f*n,g*n,w*n,v*n,F-f*n*d-w*n*h,C-g*n*d-v*n*h],this.width=S,this.height=I}get rawDims(){const e=this.viewBox;return Ye(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new V0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const n=[e,t];return Te.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Te.applyTransform(t,this.transform);const n=[e[2],e[3]];return Te.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Te.applyInverseTransform(n,this.transform),n}}class QS extends Tp{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Hx(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function KS(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function xG(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function _G(s,e="document.pdf"){if(typeof s!="string")return e;if(Hx(s))return Xe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},i=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(i.test(a))return r(a);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const h of u)if(i.test(h))return r(h);const d=Array.from(n.searchParams.keys()).reverse();for(const h of d)if(i.test(h))return r(h)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return r(d[0])}return e}class kR{constructor(){oe(this,"started",Object.create(null));oe(this,"times",[])}time(e){e in this.started&&Xe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Xe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms
`);return e.join("")}}function Mg(s,e){const t=e?URL.parse(s,e):URL.parse(s);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ra(s){s.preventDefault()}function In(s){s.preventDefault(),s.stopPropagation()}function EG(s){console.log("Deprecated API usage: "+s)}var Sy;class P1{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;c(this,Sy)||_(this,Sy,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,Sy).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(a+=f,u+=g):h==="+"&&(a-=f,u-=g),new Date(Date.UTC(n,r,i,a,u,d))}}Sy=new WeakMap,T(P1,Sy);function bG(s,{scale:e=1,rotation:t=0}){const{width:n,height:r}=s.attributes.style,i=[0,0,parseInt(n),parseInt(r)];return new V0({viewBox:i,userUnit:1,scale:e,rotation:t})}function $0(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Xe(`Not a valid color format: "${s}"`),[0,0,0])}function CG(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,$0(n))}e.remove()}function _n(s){const{a:e,b:t,c:n,d:r,e:i,f:a}=s.getTransform();return[e,t,n,r,i,a]}function oo(s){const{a:e,b:t,c:n,d:r,e:i,f:a}=s.getTransform().invertSelf();return[e,t,n,r,i,a]}function wp(s,e,t=!1,n=!0){if(e instanceof V0){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:a}=s,u=ar.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,h=`var(--total-scale-factor) * ${i}px`,f=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,g=u?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=f,a.height=g):(a.width=g,a.height=f)}n&&s.setAttribute("data-main-rotation",e.rotation)}class qo{constructor(){const{pixelRatio:e}=qo;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,i=-1){let a=1/0,u=1/0,d=1/0;n=qo.capPixels(n,i),n>0&&(a=Math.sqrt(n/(e*t))),r!==-1&&(u=r/e,d=r/t);const h=Math.min(a,u,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const iC=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class FG{static get isDarkMode(){var e;return Ye(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class SG{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Ye(this,"commentForegroundColor",$0(n))}}function TG(s,e,t,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return s=Math.round(s*n+r),e=Math.round(e*n+r),t=Math.round(t*n+r),[s,e,t]}function IR(s,e){const t=s[0]/255,n=s[1]/255,r=s[2]/255,i=Math.max(t,n,r),a=Math.min(t,n,r),u=(i+a)/2;if(i===a)e[0]=e[1]=0;else{const d=i-a;switch(e[1]=u<.5?d/(i+a):d/(2-i-a),i){case t:e[0]=((n-r)/d+(n<r?6:0))*60;break;case n:e[0]=((r-t)/d+2)*60;break;case r:e[0]=((t-n)/d+4)*60;break}}e[2]=u}function aC(s,e){const t=s[0],n=s[1],r=s[2],i=(1-Math.abs(2*r-1))*n,a=i*(1-Math.abs(t/60%2-1)),u=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+u,e[1]=a+u,e[2]=u;break;case 1:e[0]=a+u,e[1]=i+u,e[2]=u;break;case 2:e[0]=u,e[1]=i+u,e[2]=a+u;break;case 3:e[0]=u,e[1]=a+u,e[2]=i+u;break;case 4:e[0]=a+u,e[1]=u,e[2]=i+u;break;case 5:case 6:e[0]=i+u,e[1]=u,e[2]=a+u;break}}function PR(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function RR(s,e,t){aC(s,t),t.map(PR);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];aC(e,t),t.map(PR);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const DR=new Map;function kG(s,e){const t=s[0]+s[1]*256+s[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=DR.get(t);if(n)return n;const r=new Float32Array(9),i=r.subarray(0,3),a=r.subarray(3,6);IR(s,a);const u=r.subarray(6,9);IR(e,u);const d=u[2]<.5,h=d?12:4.5;if(a[2]=d?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),RR(a,u,i)<h){let f,g;d?(f=a[2],g=1):(f=0,g=a[2]);const w=.005;for(;g-f>w;){const v=a[2]=(f+g)/2;d===RR(a,u,i)<h?f=v:g=v}a[2]=d?g:f}return aC(a,i),n=Te.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),DR.set(t,n),n}function qM({html:s,dir:e,className:t},n){const r=document.createDocumentFragment();if(typeof s=="string"){const i=document.createElement("p");i.dir=e||"auto";const a=s.split(/(?:\r\n?|\n)/);for(let u=0,d=a.length;u<d;++u){const h=a[u];i.append(document.createTextNode(h)),u<d-1&&i.append(document.createElement("br"))}r.append(i)}else GM.render({xfaHtml:s,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",t),n.append(r)}function QM(s){const e=new Path2D;if(!s)return e;for(let t=0,n=s.length;t<n;)switch(s[t++]){case _g.moveTo:e.moveTo(s[t++],s[t++]);break;case _g.lineTo:e.lineTo(s[t++],s[t++]);break;case _g.curveTo:e.bezierCurveTo(s[t++],s[t++],s[t++],s[t++],s[t++],s[t++]);break;case _g.quadraticCurveTo:e.quadraticCurveTo(s[t++],s[t++],s[t++],s[t++]);break;case _g.closePath:e.closePath();break;default:Xe(`Unrecognized drawing path operator: ${s[t-1]}`);break}return e}var Al,ma,j2,Kc,Qd,Am,KM,XM;const gt=class gt{constructor(){T(this,Am)}get pagesNumber(){return c(gt,Kc)}set pagesNumber(e){c(gt,Kc)!==e&&(_(gt,Kc,e),e===0&&(_(gt,ma,null),_(gt,Al,null)))}addListener(e){c(gt,Qd).push(e)}removeListener(e){const t=c(gt,Qd).indexOf(e);t>=0&&c(gt,Qd).splice(t,1)}movePages(e,t,n){P(this,Am,XM).call(this,!0);const r=c(gt,ma),i=c(gt,Al);c(gt,j2).set(i);const a=t.length,u=new Uint32Array(a);let d=0;for(let v=0;v<a;v++){const F=t[v]-1;u[v]=r[F],F<n&&(d+=1)}const h=c(gt,Kc);let f=n-d;const g=h-a;f=Pr(f,0,g);for(let v=0,F=0;v<h;v++)e.has(v+1)||(r[F++]=r[v]);r.copyWithin(f+a,f,g),r.set(u,f);let w=!1;for(let v=0,F=h;v<F;v++){const C=r[v];w||(w=C!==v+1),i[C-1]=v+1}P(this,Am,KM).call(this),w||(this.pagesNumber=0)}hasBeenAltered(){return c(gt,ma)!==null}getPageMappingForSaving(){return{pageIndices:c(gt,Al)?c(gt,Al).map(e=>e-1):null}}getPrevPageNumber(e){return c(gt,j2)[c(gt,ma)[e-1]-1]}getPageNumber(e){var t;return((t=c(gt,Al))==null?void 0:t[e-1])??e}getPageId(e){var t;return((t=c(gt,ma))==null?void 0:t[e-1])??e}static get instance(){return Ye(this,"instance",new gt)}getMapping(){return c(gt,ma).subarray(0,this.pagesNumber)}};Al=new WeakMap,ma=new WeakMap,j2=new WeakMap,Kc=new WeakMap,Qd=new WeakMap,Am=new WeakSet,KM=function(){for(const e of c(gt,Qd))e()},XM=function(e){if(c(gt,ma))return;const t=c(gt,Kc),n=new Uint32Array(3*t),r=_(gt,ma,n.subarray(0,t)),i=_(gt,Al,n.subarray(t,2*t));if(e)for(let a=0;a<t;a++)r[a]=i[a]=a+1;_(gt,j2,n.subarray(2*t))},T(gt,Al,null),T(gt,ma,null),T(gt,j2,null),T(gt,Kc,0),T(gt,Qd,[]);let by=gt;var Xc,Yc,Bi,ji,Ty,Jc,U2,V2,ky,H1,YM,Lr,JM,ZM,w2,Lg;const wl=class wl{constructor(e){T(this,Lr);T(this,Xc,null);T(this,Yc,null);T(this,Bi);T(this,ji,null);T(this,Ty,null);T(this,Jc,null);T(this,U2,null);T(this,V2,null);_(this,Bi,e),c(wl,ky)||_(wl,ky,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=_(this,Xc,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,Bi)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",ra,{signal:t}),e.addEventListener("pointerdown",P(wl,H1,YM),{signal:t}));const n=_(this,ji,document.createElement("div"));n.className="buttons",e.append(n);const r=c(this,Bi).toolbarPosition;if(r){const{style:i}=e,a=c(this,Bi)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return c(this,Xc)}hide(){var e;c(this,Xc).classList.add("hidden"),(e=c(this,Yc))==null||e.hideDropdown()}show(){var e,t;c(this,Xc).classList.remove("hidden"),(e=c(this,Ty))==null||e.shown(),(t=c(this,Jc))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=c(this,Bi),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",c(wl,ky)[e]),P(this,Lr,w2).call(this,n)&&n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,ji).append(n)}async addAltText(e){const t=await e.render();P(this,Lr,w2).call(this,t),c(this,ji).append(t,c(this,Lr,Lg)),_(this,Ty,e)}addComment(e,t=null){if(c(this,Jc))return;const n=e.renderForToolbar();if(!n)return;P(this,Lr,w2).call(this,n);const r=_(this,U2,c(this,Lr,Lg));t?(c(this,ji).insertBefore(n,t),c(this,ji).insertBefore(r,t)):c(this,ji).append(n,r),_(this,Jc,e),e.toolbar=this}addColorPicker(e){if(c(this,Yc))return;_(this,Yc,e);const t=e.renderButton();P(this,Lr,w2).call(this,t),c(this,ji).append(t,c(this,Lr,Lg))}async addEditSignatureButton(e){const t=_(this,V2,await e.renderEditButton(c(this,Bi)));P(this,Lr,w2).call(this,t),c(this,ji).append(t,c(this,Lr,Lg))}removeButton(e){var t,n;switch(e){case"comment":(t=c(this,Jc))==null||t.removeToolbarCommentButton(),_(this,Jc,null),(n=c(this,U2))==null||n.remove(),_(this,U2,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;const r=c(this,ji).querySelector(n);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){c(this,V2)&&(c(this,V2).title=e)}remove(){var e;c(this,Xc).remove(),(e=c(this,Yc))==null||e.destroy(),_(this,Yc,null)}};Xc=new WeakMap,Yc=new WeakMap,Bi=new WeakMap,ji=new WeakMap,Ty=new WeakMap,Jc=new WeakMap,U2=new WeakMap,V2=new WeakMap,ky=new WeakMap,H1=new WeakSet,YM=function(e){e.stopPropagation()},Lr=new WeakSet,JM=function(e){c(this,Bi)._focusEventsAllowed=!1,In(e)},ZM=function(e){c(this,Bi)._focusEventsAllowed=!0,In(e)},w2=function(e){const t=c(this,Bi)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",P(this,Lr,JM).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",P(this,Lr,ZM).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ra,{signal:t}),!0)},Lg=function(){const e=document.createElement("div");return e.className="divider",e},T(wl,H1),T(wl,ky,null);let oC=wl;var Iy,Kd,xl,fc,eL,tL,lC;class IG{constructor(e){T(this,fc);T(this,Iy,null);T(this,Kd,null);T(this,xl);_(this,xl,e)}show(e,t,n){const[r,i]=P(this,fc,tL).call(this,t,n),{style:a}=c(this,Kd)||_(this,Kd,P(this,fc,eL).call(this));e.append(c(this,Kd)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Kd).remove()}}Iy=new WeakMap,Kd=new WeakMap,xl=new WeakMap,fc=new WeakSet,eL=function(){const e=_(this,Kd,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=c(this,xl)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",ra,{signal:t});const n=_(this,Iy,document.createElement("div"));return n.className="buttons",e.append(n),c(this,xl).hasCommentManager()&&P(this,fc,lC).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,xl).commentSelection("floating_button")}),P(this,fc,lC).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,xl).highlightSelection("floating_button")}),e},tL=function(e,t){let n=0,r=0;for(const i of e){const a=i.y+i.height;if(a<n)continue;const u=i.x+(t?i.width:0);if(a>n){r=u,n=a;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,n]},lC=function(e,t,n,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const a=document.createElement("span");i.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const u=c(this,xl)._signal;u instanceof AbortSignal&&!u.aborted&&(i.addEventListener("contextmenu",ra,{signal:u}),i.addEventListener("click",r,{signal:u})),c(this,Iy).append(i)};function nL(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}var Xd,Yd,$2,Jd;const jt=class jt{static initializeAndAddPointerId(e){(c(jt,Yd)||_(jt,Yd,new Set)).add(e)}static setPointer(e,t){c(jt,Xd)||_(jt,Xd,t),c(jt,Jd)??_(jt,Jd,e)}static setTimeStamp(e){_(jt,$2,e)}static isSamePointerId(e){return c(jt,Xd)===e}static isSamePointerIdOrRemove(e){var t;return c(jt,Xd)===e?!0:((t=c(jt,Yd))==null||t.delete(e),!1)}static isSamePointerType(e){return c(jt,Jd)===e}static isInitializedAndDifferentPointerType(e){return c(jt,Jd)!==null&&!jt.isSamePointerType(e)}static isSameTimeStamp(e){return c(jt,$2)===e}static isUsingMultiplePointers(){var e;return((e=c(jt,Yd))==null?void 0:e.size)>=1}static clearPointerType(){_(jt,Jd,null)}static clearPointerIds(){_(jt,Xd,NaN),_(jt,Yd,null)}static clearTimeStamp(){_(jt,$2,NaN)}};Xd=new WeakMap,Yd=new WeakMap,$2=new WeakMap,Jd=new WeakMap,T(jt,Xd,NaN),T(jt,Yd,null),T(jt,$2,NaN),T(jt,Jd,null);let qr=jt;var W1;class PG{constructor(){T(this,W1,0)}get id(){return`${xy}${er(this,W1)._++}`}}W1=new WeakMap;var z2,Py,Qr,H2,IA;const aT=class aT{constructor(){T(this,H2);T(this,z2,WM());T(this,Py,0);T(this,Qr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ye(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return P(this,H2,IA).call(this,`${t}_${n}_${r}_${i}`,e)}async getFromUrl(e){return P(this,H2,IA).call(this,e,e)}async getFromBlob(e,t){const n=await t;return P(this,H2,IA).call(this,e,n)}async getFromId(e){c(this,Qr)||_(this,Qr,new Map);const t=c(this,Qr).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,Qr)||_(this,Qr,new Map);let n=c(this,Qr).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${c(this,z2)}_${er(this,Py)._++}`,refCounter:1,isSvg:!1},c(this,Qr).set(e,n),c(this,Qr).set(n.id,n),n}getSvgUrl(e){const t=c(this,Qr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,Qr)||_(this,Qr,new Map);const t=c(this,Qr).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,z2)}_`)}};z2=new WeakMap,Py=new WeakMap,Qr=new WeakMap,H2=new WeakSet,IA=async function(e,t){c(this,Qr)||_(this,Qr,new Map);let n=c(this,Qr).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,z2)}_${er(this,Py)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await U0(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=aT._isSVGFittingCanvas,a=new FileReader,u=new Image,d=new Promise((h,f)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,h()},a.onload=async()=>{const g=n.svgUrl=a.result;u.src=await i?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=a.onerror=f});a.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Xe(r),n=null}return c(this,Qr).set(e,n),n&&c(this,Qr).set(n.id,n),n};let cC=aT;var Ln,Zc,Ry,An;class RG{constructor(e=128){T(this,Ln,[]);T(this,Zc,!1);T(this,Ry);T(this,An,-1);_(this,Ry,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:u=!1}){if(r&&e(),c(this,Zc))return;const d={cmd:e,undo:t,post:n,type:i};if(c(this,An)===-1){c(this,Ln).length>0&&(c(this,Ln).length=0),_(this,An,0),c(this,Ln).push(d);return}if(a&&c(this,Ln)[c(this,An)].type===i){u&&(d.undo=c(this,Ln)[c(this,An)].undo),c(this,Ln)[c(this,An)]=d;return}const h=c(this,An)+1;h===c(this,Ry)?c(this,Ln).splice(0,1):(_(this,An,h),h<c(this,Ln).length&&c(this,Ln).splice(h)),c(this,Ln).push(d)}undo(){if(c(this,An)===-1)return;_(this,Zc,!0);const{undo:e,post:t}=c(this,Ln)[c(this,An)];e(),t==null||t(),_(this,Zc,!1),_(this,An,c(this,An)-1)}redo(){if(c(this,An)<c(this,Ln).length-1){_(this,An,c(this,An)+1),_(this,Zc,!0);const{cmd:e,post:t}=c(this,Ln)[c(this,An)];e(),t==null||t(),_(this,Zc,!1)}}hasSomethingToUndo(){return c(this,An)!==-1}hasSomethingToRedo(){return c(this,An)<c(this,Ln).length-1}cleanType(e){if(c(this,An)!==-1){for(let t=c(this,An);t>=0;t--)if(c(this,Ln)[t].type!==e){c(this,Ln).splice(t+1,c(this,An)-t),_(this,An,t);return}c(this,Ln).length=0,_(this,An,-1)}}destroy(){_(this,Ln,null)}}Ln=new WeakMap,Zc=new WeakMap,Ry=new WeakMap,An=new WeakMap;var G1,rL;class z0{constructor(e){T(this,G1);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=ar.platform;for(const[n,r,i={}]of e)for(const a of n){const u=a.startsWith("mac+");t&&u?(this.callbacks.set(a.slice(4),{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!u&&(this.callbacks.set(a,{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(P(this,G1,rL).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:a=[],checker:u=null}}=n;u&&!u(e,t)||(r.bind(e,...a,t)(),i||In(t))}}G1=new WeakSet,rL=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const q1=class q1{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return CG(e),Ye(this,"_colors",e)}convert(e){const t=$0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((i,a)=>i===t[a]))return q1._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Te.makeHexColor(...t):e}};oe(q1,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let uC=q1;var W2,Js,G2,xn,On,q2,Ui,Q2,Vi,Kr,eu,tu,K2,nu,ho,$i,Zd,Dy,Ny,X2,My,po,ru,Y2,su,fo,Q1,iu,J2,Ly,au,eh,Z2,ou,Oy,Gn,Dt,_l,lu,cu,By,ef,jy,uu,mo,El,Uy,Vy,zi,be,PA,dC,sL,iL,Og,aL,oL,lL,hC,cL,uL,dL,hL,as,gl,pL,fL,pC,mL,Bg,fC;const T2=class T2{constructor(e,t,n,r,i,a,u,d,h,f,g,w,v,F,C,S){T(this,be);T(this,W2,new AbortController);T(this,Js,null);T(this,G2,null);T(this,xn,new Map);T(this,On,new Map);T(this,q2,null);T(this,Ui,null);T(this,Q2,null);T(this,Vi,new RG);T(this,Kr,null);T(this,eu,null);T(this,tu,null);T(this,K2,0);T(this,nu,new Set);T(this,ho,null);T(this,$i,null);T(this,Zd,new Set);oe(this,"_editorUndoBar",null);T(this,Dy,!1);T(this,Ny,!1);T(this,X2,!1);T(this,My,null);T(this,po,null);T(this,ru,null);T(this,Y2,null);T(this,su,!1);T(this,fo,null);T(this,Q1,new PG);T(this,iu,!1);T(this,J2,!1);T(this,Ly,!1);T(this,au,null);T(this,eh,null);T(this,Z2,null);T(this,ou,null);T(this,Oy,null);T(this,Gn,et.NONE);T(this,Dt,new Set);T(this,_l,null);T(this,lu,null);T(this,cu,null);T(this,By,null);T(this,ef,null);T(this,jy,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});T(this,uu,[0,0]);T(this,mo,null);T(this,El,null);T(this,Uy,null);T(this,Vy,null);T(this,zi,null);const I=this._signal=c(this,W2).signal;_(this,El,e),_(this,Uy,t),_(this,Vy,n),_(this,q2,r),_(this,Kr,i),_(this,lu,a),_(this,ef,d),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:I}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:I}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:I}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:I}),u._on("setpreference",this.onSetPreference.bind(this),{signal:I}),u._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:I}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:I}),window.addEventListener("pointerdown",()=>{_(this,J2,!0)},{capture:!0,signal:I}),window.addEventListener("pointerup",()=>{_(this,J2,!1)},{capture:!0,signal:I}),P(this,be,aL).call(this),P(this,be,hL).call(this),P(this,be,hC).call(this),_(this,Ui,d.annotationStorage),_(this,My,d.filterFactory),_(this,cu,h),_(this,Y2,f||null),_(this,Dy,g),_(this,Ny,w),_(this,X2,v),_(this,Oy,F||null),this.viewParameters={realScale:ad.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=C||null,this._supportsPinchToZoom=S!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=T2.prototype,t=a=>c(a,El).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Ye(this,"_keyboardManager",new z0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&c(a,El).contains(u)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&c(a,El).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,r,i,a,u,d,h;(e=c(this,zi))==null||e.resolve(),_(this,zi,null),(t=c(this,W2))==null||t.abort(),_(this,W2,null),this._signal=null;for(const f of c(this,On).values())f.destroy();c(this,On).clear(),c(this,xn).clear(),c(this,Zd).clear(),(n=c(this,ou))==null||n.clear(),_(this,Js,null),c(this,Dt).clear(),c(this,Vi).destroy(),(r=c(this,q2))==null||r.destroy(),(i=c(this,Kr))==null||i.destroy(),(a=c(this,lu))==null||a.destroy(),(u=c(this,fo))==null||u.hide(),_(this,fo,null),(d=c(this,Z2))==null||d.destroy(),_(this,Z2,null),_(this,G2,null),c(this,po)&&(clearTimeout(c(this,po)),_(this,po,null)),c(this,mo)&&(clearTimeout(c(this,mo)),_(this,mo,null)),(h=this._editorUndoBar)==null||h.destroy(),_(this,ef,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,Oy)}get useNewAltTextFlow(){return c(this,Ny)}get useNewAltTextWhenAddingImage(){return c(this,X2)}get hcmFilter(){return Ye(this,"hcmFilter",c(this,cu)?c(this,My).addHCMFilter(c(this,cu).foreground,c(this,cu).background):"none")}get direction(){return Ye(this,"direction",getComputedStyle(c(this,El)).direction)}get _highlightColors(){return Ye(this,"_highlightColors",c(this,Y2)?new Map(c(this,Y2).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Ye(this,"highlightColors",null);const t=new Map,n=!!c(this,cu);for(const[r,i]of e){const a=r.endsWith("_HCM");if(n&&a){t.set(r.replace("_HCM",""),i);continue}!n&&!a&&t.set(r,i)}return Ye(this,"highlightColors",t)}get highlightColorNames(){return Ye(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),_(this,tu,e)}setMainHighlightColorPicker(e){_(this,Z2,e)}editAltText(e,t=!1){var n;(n=c(this,q2))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!c(this,Kr)}editComment(e,t,n,r){var i;(i=c(this,Kr))==null||i.showDialog(this,e,t,n,r)}selectComment(e,t){const n=c(this,On).get(e),r=n==null?void 0:n.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=c(this,Kr))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=c(this,Kr))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=c(this,Kr))==null||t.removeComments([e.uid])}deleteComment(e,t){const n=()=>{e.comment=t},r=()=>{var i;(i=this._editorUndoBar)==null||i.show(n,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:r,undo:n,mustExec:!0})}toggleComment(e,t,n=void 0){var r;(r=c(this,Kr))==null||r.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=c(this,Kr))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=c(this,Kr))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(c(this,On).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await n}getSignature(e){var t;(t=c(this,lu))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(this,lu)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":_(this,X2,t);break}}onPagesEdited({pagesMapper:e}){for(const r of c(this,xn).values())r.updatePageIndex(e.getPrevPageNumber(r.pageIndex+1)-1);const t=c(this,On),n=_(this,On,new Map);for(const[r,i]of t){const a=e.getPrevPageNumber(r+1)-1;if(a===-1){i.destroy();continue}n.set(a,i),i.updatePageIndex(a)}}onPageChanging({pageNumber:e}){_(this,K2,e-1)}focusMainContainer(){c(this,El).focus()}findParent(e,t){for(const n of c(this,On).values()){const{x:r,y:i,width:a,height:u}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+u)return n}return null}disableUserSelect(e=!1){c(this,Uy).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,Zd).add(e)}removeShouldRescale(e){c(this,Zd).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*ad.PDF_TO_CSS_UNITS;for(const n of c(this,Zd))n.onScaleChanging();(t=c(this,tu))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:u}=n,d=n.toString(),f=P(this,be,PA).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;n.empty();const w=P(this,be,dC).call(this,f),v=c(this,Gn)===et.NONE,F=()=>{const C=w==null?void 0:w.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:u,text:d});v&&this.showAllEditors("highlight",!0,!0),t&&(C==null||C.editComment())};if(v){this.switchToMode(et.HIGHLIGHT,F);return}F()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!c(this,Ui))return null;const t=`${xy}${e}`,n=c(this,Ui).getRawValue(t);return n&&c(this,Ui).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&c(this,Ui)&&!c(this,Ui).has(e.id)&&c(this,Ui).setValue(e.id,e)}a11yAlert(e,t=null){const n=c(this,Vy);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,su)&&(_(this,su,!1),P(this,be,Og).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Dt))if(t.div.contains(e)){_(this,eh,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,eh))return;const[e,t]=c(this,eh);_(this,eh,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){P(this,be,hC).call(this),this.setEditingState(!0)}removeEditListeners(){P(this,be,cL).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of c(this,$i))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of c(this,$i))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=c(this,Js))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,Dt)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of c(this,$i))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){Xe(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const d of n){const h=await r.deserialize(d);if(!h)return;i.push(h)}const a=()=>{for(const d of i)P(this,be,pC).call(this,d);P(this,be,fC).call(this,i)},u=()=>{for(const d of i)d.remove()};this.addCommands({cmd:a,undo:u,mustExec:!0})}catch(i){Xe(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Gn)!==et.NONE&&!this.isEditorHandlingKeyboard&&T2._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,su)&&(_(this,su,!1),P(this,be,Og).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(P(this,be,oL).call(this),P(this,be,uL).call(this),P(this,be,as).call(this,{isEditing:c(this,Gn)!==et.NONE,isEmpty:P(this,be,Bg).call(this),hasSomethingToUndo:c(this,Vi).hasSomethingToUndo(),hasSomethingToRedo:c(this,Vi).hasSomethingToRedo(),hasSelectedEditor:!1})):(P(this,be,lL).call(this),P(this,be,dL).call(this),P(this,be,as).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,$i)){_(this,$i,e);for(const t of c(this,$i))P(this,be,gl).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,Q1).id}get currentLayer(){return c(this,On).get(c(this,K2))}getLayer(e){return c(this,On).get(e)}get currentPageIndex(){return c(this,K2)}addLayer(e){c(this,On).set(e.pageIndex,e),c(this,iu)?e.enable():e.disable()}removeLayer(e){c(this,On).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,i=!1,a=!1){var u,d,h,f,g,w;if(c(this,Gn)!==e&&!(c(this,zi)&&(await c(this,zi).promise,!c(this,zi)))){if(_(this,zi,Promise.withResolvers()),(u=c(this,tu))==null||u.commitOrRemove(),c(this,Gn)===et.POPUP&&((d=c(this,Kr))==null||d.hideSidebar()),(h=c(this,Kr))==null||h.destroyPopup(),_(this,Gn,e),e===et.NONE){this.setEditingState(!1),P(this,be,fL).call(this);for(const v of c(this,xn).values())v.hideStandaloneCommentButton();(f=this._editorUndoBar)==null||f.hide(),this.toggleComment(null),c(this,zi).resolve();return}for(const v of c(this,xn).values())v.addStandaloneCommentButton();e===et.SIGNATURE&&await((g=c(this,lu))==null?void 0:g.loadSignatures()),n&&qr.clearPointerType(),this.setEditingState(!0),await P(this,be,pL).call(this),this.unselectAll();for(const v of c(this,On).values())v.updateMode(e);if(e===et.POPUP){c(this,G2)||_(this,G2,await c(this,ef).getAnnotationsByType(new Set(c(this,$i).map(C=>C._editorType))));const v=new Set,F=[];for(const C of c(this,xn).values()){const{annotationElementId:S,hasComment:I,deleted:O}=C;S&&v.add(S),I&&!O&&F.push(C.getData())}for(const C of c(this,G2)){const{id:S,popupRef:I,contentsObj:O}=C;I&&(O!=null&&O.str)&&!v.has(S)&&!c(this,nu).has(S)&&F.push(C)}(w=c(this,Kr))==null||w.showSidebar(F)}if(!t){r&&this.addNewEditorFromKeyboard(),c(this,zi).resolve();return}for(const v of c(this,xn).values())v.uid===t?(this.setSelected(v),a?v.editComment():i?v.enterInEditMode():v.focus()):v.unselect();c(this,zi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(this,Gn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(c(this,$i)){switch(e){case pt.CREATE:this.currentLayer.addNewEditor(t);return;case pt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,By)||_(this,By,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of c(this,Dt))n.updateParams(e,t);else for(const n of c(this,$i))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const a of c(this,xn).values())a.editorType===e&&a.show(t);(((i=c(this,By))==null?void 0:i.get(pt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&P(this,be,gl).call(this,[[pt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,Ly)!==e){_(this,Ly,e);for(const t of c(this,On).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of c(this,xn).values())t.pageIndex===e&&(yield t)}getEditor(e){return c(this,xn).get(e)}addEditor(e){c(this,xn).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(c(this,po)&&clearTimeout(c(this,po)),_(this,po,setTimeout(()=>{this.focusMainContainer(),_(this,po,null)},0))),c(this,xn).delete(e.id),e.annotationElementId&&((t=c(this,ou))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!c(this,nu).has(e.annotationElementId))&&((n=c(this,Ui))==null||n.remove(e.id))}addDeletedAnnotationElement(e){c(this,nu).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,nu).has(e)}removeDeletedAnnotationElement(e){c(this,nu).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,Js)!==e&&(_(this,Js,e),e&&P(this,be,gl).call(this,e.propertiesToUpdate))}updateUI(e){c(this,be,mL)===e&&P(this,be,gl).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){P(this,be,gl).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,Dt).has(e)){c(this,Dt).delete(e),e.unselect(),P(this,be,as).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Dt).add(e),e.select(),P(this,be,gl).call(this,e.propertiesToUpdate),P(this,be,as).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=c(this,tu))==null||t.commitOrRemove();for(const n of c(this,Dt))n!==e&&n.unselect();c(this,Dt).clear(),c(this,Dt).add(e),e.select(),P(this,be,gl).call(this,e.propertiesToUpdate),P(this,be,as).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Dt).has(e)}get firstSelectedEditor(){return c(this,Dt).values().next().value}unselect(e){e.unselect(),c(this,Dt).delete(e),P(this,be,as).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Dt).size!==0}get isEnterHandled(){return c(this,Dt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,Vi).undo(),P(this,be,as).call(this,{hasSomethingToUndo:c(this,Vi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:P(this,be,Bg).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,Vi).redo(),P(this,be,as).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Vi).hasSomethingToRedo(),isEmpty:P(this,be,Bg).call(this)})}addCommands(e){c(this,Vi).add(e),P(this,be,as).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:P(this,be,Bg).call(this)})}cleanUndoStack(e){c(this,Vi).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,Dt)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const u of t)u.remove()},r=()=>{for(const a of t)P(this,be,pC).call(this,a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=c(this,Js))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,Js)||this.hasSelection}selectAll(){for(const e of c(this,Dt))e.commit();P(this,be,fC).call(this,c(this,xn).values())}unselectAll(){var e;if(!(c(this,Js)&&(c(this,Js).commitOrRemove(),c(this,Gn)!==et.NONE))&&!((e=c(this,tu))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,Dt))t.unselect();c(this,Dt).clear(),P(this,be,as).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,uu)[0]+=e,c(this,uu)[1]+=t;const[r,i]=c(this,uu),a=[...c(this,Dt)],u=1e3;c(this,mo)&&clearTimeout(c(this,mo)),_(this,mo,setTimeout(()=>{_(this,mo,null),c(this,uu)[0]=c(this,uu)[1]=0,this.addCommands({cmd:()=>{for(const d of a)c(this,xn).has(d.id)&&(d.translateInPage(r,i),d.translationDone())},undo:()=>{for(const d of a)c(this,xn).has(d.id)&&(d.translateInPage(-r,-i),d.translationDone())},mustExec:!1})},u));for(const d of a)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),_(this,ho,new Map);for(const e of c(this,Dt))c(this,ho).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,ho))return!1;this.disableUserSelect(!1);const e=c(this,ho);_(this,ho,null);let t=!1;for(const[{x:r,y:i,pageIndex:a},u]of e)u.newX=r,u.newY=i,u.newPageIndex=a,t||(t=r!==u.savedX||i!==u.savedY||a!==u.savedPageIndex);if(!t)return!1;const n=(r,i,a,u)=>{if(c(this,xn).has(r.id)){const d=c(this,On).get(u);d?r._setParentAndPosition(d,i,a):(r.pageIndex=u,r.x=i,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:a,newPageIndex:u}]of e)n(r,i,a,u)},undo:()=>{for(const[r,{savedX:i,savedY:a,savedPageIndex:u}]of e)n(r,i,a,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,ho))for(const n of c(this,ho).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Dt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,Js)===e}getActive(){return c(this,Js)}getMode(){return c(this,Gn)}isEditingMode(){return c(this,Gn)!==et.NONE}get imageManager(){return Ye(this,"imageManager",new cC)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:a}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(h,f,g,w)=>({x:(f-r)/a,y:1-(h+g-n)/i,width:w/a,height:g/i});break;case"180":u=(h,f,g,w)=>({x:1-(h+g-n)/i,y:1-(f+w-r)/a,width:g/i,height:w/a});break;case"270":u=(h,f,g,w)=>({x:1-(f+w-r)/a,y:(h-n)/i,width:w/a,height:g/i});break;default:u=(h,f,g,w)=>({x:(h-n)/i,y:(f-r)/a,width:g/i,height:w/a});break}const d=[];for(let h=0,f=t.rangeCount;h<f;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x:w,y:v,width:F,height:C}of g.getClientRects())F===0||C===0||d.push(u(w,v,F,C))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Q2)||_(this,Q2,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Q2))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,Q2))==null?void 0:r.get(e.data.id);if(!t)return;const n=c(this,Ui).getRawValue(t);n&&(c(this,Gn)===et.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var i;const r=(i=c(this,ou))==null?void 0:i.get(e);r&&(r.setCanvas(t,n),c(this,ou).delete(e))}addMissingCanvas(e,t){(c(this,ou)||_(this,ou,new Map)).set(e,t)}};W2=new WeakMap,Js=new WeakMap,G2=new WeakMap,xn=new WeakMap,On=new WeakMap,q2=new WeakMap,Ui=new WeakMap,Q2=new WeakMap,Vi=new WeakMap,Kr=new WeakMap,eu=new WeakMap,tu=new WeakMap,K2=new WeakMap,nu=new WeakMap,ho=new WeakMap,$i=new WeakMap,Zd=new WeakMap,Dy=new WeakMap,Ny=new WeakMap,X2=new WeakMap,My=new WeakMap,po=new WeakMap,ru=new WeakMap,Y2=new WeakMap,su=new WeakMap,fo=new WeakMap,Q1=new WeakMap,iu=new WeakMap,J2=new WeakMap,Ly=new WeakMap,au=new WeakMap,eh=new WeakMap,Z2=new WeakMap,ou=new WeakMap,Oy=new WeakMap,Gn=new WeakMap,Dt=new WeakMap,_l=new WeakMap,lu=new WeakMap,cu=new WeakMap,By=new WeakMap,ef=new WeakMap,jy=new WeakMap,uu=new WeakMap,mo=new WeakMap,El=new WeakMap,Uy=new WeakMap,Vy=new WeakMap,zi=new WeakMap,be=new WeakSet,PA=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},dC=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of c(this,On).values())if(n.hasTextLayer(e))return n;return null},sL=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=P(this,be,PA).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(c(this,fo)||_(this,fo,new IG(this)),c(this,fo).show(n,r,this.direction==="ltr"))},iL=function(){var i,a,u;const e=document.getSelection();if(!e||e.isCollapsed){c(this,_l)&&((i=c(this,fo))==null||i.hide(),_(this,_l,null),P(this,be,as).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,_l))return;const r=P(this,be,PA).call(this,e).closest(".textLayer");if(!r){c(this,_l)&&((a=c(this,fo))==null||a.hide(),_(this,_l,null),P(this,be,as).call(this,{hasSelectedText:!1}));return}if((u=c(this,fo))==null||u.hide(),_(this,_l,t),P(this,be,as).call(this,{hasSelectedText:!0}),!(c(this,Gn)!==et.HIGHLIGHT&&c(this,Gn)!==et.NONE)&&(c(this,Gn)===et.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),_(this,su,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=c(this,Gn)===et.HIGHLIGHT?P(this,be,dC).call(this,r):null;if(d==null||d.toggleDrawing(),c(this,J2)){const h=new AbortController,f=this.combinedSignal(h),g=w=>{w.type==="pointerup"&&w.button!==0||(h.abort(),d==null||d.toggleDrawing(!0),w.type==="pointerup"&&P(this,be,Og).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("blur",g,{signal:f})}else d==null||d.toggleDrawing(!0),P(this,be,Og).call(this,"main_toolbar")}},Og=function(e=""){c(this,Gn)===et.HIGHLIGHT?this.highlightSelection(e):c(this,Dy)&&P(this,be,sL).call(this)},aL=function(){document.addEventListener("selectionchange",P(this,be,iL).bind(this),{signal:this._signal})},oL=function(){if(c(this,ru))return;_(this,ru,new AbortController);const e=this.combinedSignal(c(this,ru));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},lL=function(){var e;(e=c(this,ru))==null||e.abort(),_(this,ru,null)},hC=function(){if(c(this,au))return;_(this,au,new AbortController);const e=this.combinedSignal(c(this,au));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},cL=function(){var e;(e=c(this,au))==null||e.abort(),_(this,au,null)},uL=function(){if(c(this,eu))return;_(this,eu,new AbortController);const e=this.combinedSignal(c(this,eu));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},dL=function(){var e;(e=c(this,eu))==null||e.abort(),_(this,eu,null)},hL=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},as=function(e){Object.entries(e).some(([n,r])=>c(this,jy)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,jy),e)}),c(this,Gn)===et.HIGHLIGHT&&e.hasSelectedEditor===!1&&P(this,be,gl).call(this,[[pt.HIGHLIGHT_FREE,!0]]))},gl=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},pL=async function(){if(!c(this,iu)){_(this,iu,!0);const e=[];for(const t of c(this,On).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,xn).values())t.enable()}},fL=function(){if(this.unselectAll(),c(this,iu)){_(this,iu,!1);for(const e of c(this,On).values())e.disable();for(const e of c(this,xn).values())e.disable()}},pC=function(e){const t=c(this,On).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},mL=function(){let e=null;for(e of c(this,Dt));return e},Bg=function(){if(c(this,xn).size===0)return!0;if(c(this,xn).size===1)for(const e of c(this,xn).values())return e.isEmpty();return!1},fC=function(e){for(const t of c(this,Dt))t.unselect();c(this,Dt).clear();for(const t of e)t.isEmpty()||(c(this,Dt).add(t),t.select());P(this,be,as).call(this,{hasSelectedEditor:this.hasSelection})},oe(T2,"TRANSLATE_SMALL",1),oe(T2,"TRANSLATE_BIG",10);let vp=T2;var dr,go,ga,tf,yo,Zs,nf,wo,Ss,bl,th,vo,du,Ta,jg,RA;const os=class os{constructor(e){T(this,Ta);T(this,dr,null);T(this,go,!1);T(this,ga,null);T(this,tf,null);T(this,yo,null);T(this,Zs,null);T(this,nf,!1);T(this,wo,null);T(this,Ss,null);T(this,bl,null);T(this,th,null);T(this,vo,!1);_(this,Ss,e),_(this,vo,e._uiManager.useNewAltTextFlow),c(os,du)||_(os,du,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){os._l10n??(os._l10n=e)}async render(){const e=_(this,ga,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=_(this,tf,document.createElement("span"));e.append(t),c(this,vo)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(os,du).missing),t.setAttribute("data-l10n-id",c(os,du)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,Ss)._uiManager._signal;e.addEventListener("contextmenu",ra,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),c(this,Ss)._uiManager.editAltText(c(this,Ss)),c(this,vo)&&c(this,Ss)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Ta,jg)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(_(this,nf,!0),r(i))},{signal:n}),await P(this,Ta,RA).call(this),e}finish(){c(this,ga)&&(c(this,ga).focus({focusVisible:c(this,nf)}),_(this,nf,!1))}isEmpty(){return c(this,vo)?c(this,dr)===null:!c(this,dr)&&!c(this,go)}hasData(){return c(this,vo)?c(this,dr)!==null||!!c(this,bl):this.isEmpty()}get guessedText(){return c(this,bl)}async setGuessedText(e){c(this,dr)===null&&(_(this,bl,e),_(this,th,await os._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),P(this,Ta,RA).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,vo)||c(this,dr)){(t=c(this,wo))==null||t.remove(),_(this,wo,null);return}if(!c(this,wo)){const n=_(this,wo,document.createElement("div"));n.className="noAltTextBadge",c(this,Ss).div.append(n)}c(this,wo).classList.toggle("hidden",!e)}serialize(e){let t=c(this,dr);return!e&&c(this,bl)===t&&(t=c(this,th)),{altText:t,decorative:c(this,go),guessedText:c(this,bl),textWithDisclaimer:c(this,th)}}get data(){return{altText:c(this,dr),decorative:c(this,go)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:i=!1}){n&&(_(this,bl,n),_(this,th,r)),!(c(this,dr)===e&&c(this,go)===t)&&(i||(_(this,dr,e),_(this,go,t)),P(this,Ta,RA).call(this))}toggle(e=!1){c(this,ga)&&(!e&&c(this,Zs)&&(clearTimeout(c(this,Zs)),_(this,Zs,null)),c(this,ga).disabled=!e)}shown(){c(this,Ss)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Ta,jg)}})}destroy(){var e,t;(e=c(this,ga))==null||e.remove(),_(this,ga,null),_(this,tf,null),_(this,yo,null),(t=c(this,wo))==null||t.remove(),_(this,wo,null)}};dr=new WeakMap,go=new WeakMap,ga=new WeakMap,tf=new WeakMap,yo=new WeakMap,Zs=new WeakMap,nf=new WeakMap,wo=new WeakMap,Ss=new WeakMap,bl=new WeakMap,th=new WeakMap,vo=new WeakMap,du=new WeakMap,Ta=new WeakSet,jg=function(){return c(this,dr)&&"added"||c(this,dr)===null&&this.guessedText&&"review"||"missing"},RA=async function(){var r,i,a;const e=c(this,ga);if(!e)return;if(c(this,vo)){if(e.classList.toggle("done",!!c(this,dr)),e.setAttribute("data-l10n-id",c(os,du)[c(this,Ta,jg)]),(r=c(this,tf))==null||r.setAttribute("data-l10n-id",c(os,du)[`${c(this,Ta,jg)}-label`]),!c(this,dr)){(i=c(this,yo))==null||i.remove();return}}else{if(!c(this,dr)&&!c(this,go)){e.classList.remove("done"),(a=c(this,yo))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,yo);if(!t){_(this,yo,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,Ss).id}`;const u=100,d=c(this,Ss)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(c(this,Zs)),_(this,Zs,null)},{once:!0}),e.addEventListener("mouseenter",()=>{_(this,Zs,setTimeout(()=>{_(this,Zs,null),c(this,yo).classList.add("show"),c(this,Ss)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),e.addEventListener("mouseleave",()=>{var h;c(this,Zs)&&(clearTimeout(c(this,Zs)),_(this,Zs,null)),(h=c(this,yo))==null||h.classList.remove("show")},{signal:d})}c(this,go)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,dr)),t.parentNode||e.append(t);const n=c(this,Ss).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},T(os,du,null),oe(os,"_l10n",null);let R1=os;var Fr,Hi,nh,Zt,$y,hu,Wi,pu,fu,rh,zy,mC;class iA{constructor(e){T(this,zy);T(this,Fr,null);T(this,Hi,null);T(this,nh,!1);T(this,Zt,null);T(this,$y,null);T(this,hu,null);T(this,Wi,null);T(this,pu,null);T(this,fu,!1);T(this,rh,null);_(this,Zt,e)}renderForToolbar(){const e=_(this,Hi,document.createElement("button"));return e.className="comment",P(this,zy,mC).call(this,e,!1)}renderForStandalone(){const e=_(this,Fr,document.createElement("button"));e.className="annotationCommentButton";const t=c(this,Zt).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(c(this,Zt)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=c(this,Zt).commentButtonColor;r&&(n.backgroundColor=r)}return P(this,zy,mC).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=c(this,Fr)??c(this,Hi))==null||e.focus()},0)}onUpdatedColor(){if(!c(this,Fr))return;const e=c(this,Zt).commentButtonColor;e&&(c(this,Fr).style.backgroundColor=e),c(this,Zt)._uiManager.updatePopupColor(c(this,Zt))}get commentButtonWidth(){var e;return(((e=c(this,Fr))==null?void 0:e.getBoundingClientRect().width)??0)/c(this,Zt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,rh))return c(this,rh);if(!c(this,Fr))return null;const{x:e,y:t,height:n}=c(this,Fr).getBoundingClientRect(),{x:r,y:i,width:a,height:u}=c(this,Zt).parent.boundingClientRect;return[(e-r)/a,(t+n-i)/u]}set commentPopupPositionInLayer(e){_(this,rh,e)}hasDefaultPopupPosition(){return c(this,rh)===null}removeStandaloneCommentButton(){var e;(e=c(this,Fr))==null||e.remove(),_(this,Fr,null)}removeToolbarCommentButton(){var e;(e=c(this,Hi))==null||e.remove(),_(this,Hi,null)}setCommentButtonStates({selected:e,hasPopup:t}){c(this,Fr)&&(c(this,Fr).classList.toggle("selected",e),c(this,Fr).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,r;if(t)[n,r]=t;else{[n,r]=c(this,Zt).commentButtonPosition;const{width:f,height:g,x:w,y:v}=c(this,Zt);n=w+n*f,r=v+r*g}const i=c(this,Zt).parent.boundingClientRect,{x:a,y:u,width:d,height:h}=i;c(this,Zt)._uiManager.editComment(c(this,Zt),a+n*d,u+r*h,{...e,parentDimensions:i})}finish(){c(this,Hi)&&(c(this,Hi).focus({focusVisible:c(this,nh)}),_(this,nh,!1))}isDeleted(){return c(this,fu)||c(this,Wi)===""}isEmpty(){return c(this,Wi)===null}hasBeenEdited(){return this.isDeleted()||c(this,Wi)!==c(this,$y)}serialize(){return this.data}get data(){return{text:c(this,Wi),richText:c(this,hu),date:c(this,pu),deleted:this.isDeleted()}}set data(e){if(e!==c(this,Wi)&&_(this,hu,null),e===null){_(this,Wi,""),_(this,fu,!0);return}_(this,Wi,e),_(this,pu,new Date),_(this,fu,!1)}restoreData({text:e,richText:t,date:n}){_(this,Wi,e),_(this,hu,t),_(this,pu,n),_(this,fu,!1)}setInitialText(e,t=null){_(this,$y,e),this.data=e,_(this,pu,null),_(this,hu,t)}shown(){}destroy(){var e,t;(e=c(this,Hi))==null||e.remove(),_(this,Hi,null),(t=c(this,Fr))==null||t.remove(),_(this,Fr,null),_(this,Wi,""),_(this,hu,null),_(this,pu,null),_(this,Zt,null),_(this,nh,!1),_(this,fu,!1)}}Fr=new WeakMap,Hi=new WeakMap,nh=new WeakMap,Zt=new WeakMap,$y=new WeakMap,hu=new WeakMap,Wi=new WeakMap,pu=new WeakMap,fu=new WeakMap,rh=new WeakMap,zy=new WeakSet,mC=function(e,t){if(!c(this,Zt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[c(this,Zt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=c(this,Zt)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",ra,{signal:n}),t&&(e.addEventListener("focusin",i=>{c(this,Zt)._focusEventsAllowed=!1,In(i)},{capture:!0,signal:n}),e.addEventListener("focusout",i=>{c(this,Zt)._focusEventsAllowed=!0,In(i)},{capture:!0,signal:n})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),e===c(this,Hi)?this.edit():c(this,Zt).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(_(this,nh,!0),r(i))},{signal:n}),e.addEventListener("pointerenter",()=>{c(this,Zt).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{c(this,Zt).toggleComment(!1,!1)},{signal:n}),e};var rf,sh,Hy,Wy,Gy,qy,Qy,Cl,ih,Fl,ah,Sl,od,gL,yL,wL;const oT=class oT{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:a=null,signal:u}){T(this,od);T(this,rf);T(this,sh,!1);T(this,Hy,null);T(this,Wy);T(this,Gy);T(this,qy);T(this,Qy);T(this,Cl,null);T(this,ih);T(this,Fl,null);T(this,ah);T(this,Sl,null);_(this,rf,e),_(this,Hy,n),_(this,Wy,t),_(this,Gy,r),_(this,qy,i),_(this,Qy,a),_(this,ah,new AbortController),_(this,ih,AbortSignal.any([u,c(this,ah).signal])),e.addEventListener("touchstart",P(this,od,gL).bind(this),{passive:!1,signal:c(this,ih)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/qo.pixelRatio}destroy(){var e,t;(e=c(this,ah))==null||e.abort(),_(this,ah,null),(t=c(this,Cl))==null||t.abort(),_(this,Cl,null)}};rf=new WeakMap,sh=new WeakMap,Hy=new WeakMap,Wy=new WeakMap,Gy=new WeakMap,qy=new WeakMap,Qy=new WeakMap,Cl=new WeakMap,ih=new WeakMap,Fl=new WeakMap,ah=new WeakMap,Sl=new WeakMap,od=new WeakSet,gL=function(e){var r,i,a;if((r=c(this,Wy))!=null&&r.call(this))return;if(e.touches.length===1){if(c(this,Cl))return;const u=_(this,Cl,new AbortController),d=AbortSignal.any([c(this,ih),u.signal]),h=c(this,rf),f={capture:!0,signal:d,passive:!1},g=w=>{var v;w.pointerType==="touch"&&((v=c(this,Cl))==null||v.abort(),_(this,Cl,null))};h.addEventListener("pointerdown",w=>{w.pointerType==="touch"&&(In(w),g(w))},f),h.addEventListener("pointerup",g,f),h.addEventListener("pointercancel",g,f);return}if(!c(this,Sl)){_(this,Sl,new AbortController);const u=AbortSignal.any([c(this,ih),c(this,Sl).signal]),d=c(this,rf),h={signal:u,capture:!1,passive:!1};d.addEventListener("touchmove",P(this,od,yL).bind(this),h);const f=P(this,od,wL).bind(this);d.addEventListener("touchend",f,h),d.addEventListener("touchcancel",f,h),h.capture=!0,d.addEventListener("pointerdown",In,h),d.addEventListener("pointermove",In,h),d.addEventListener("pointercancel",In,h),d.addEventListener("pointerup",In,h),(i=c(this,Gy))==null||i.call(this)}if(In(e),e.touches.length!==2||(a=c(this,Hy))!=null&&a.call(this)){_(this,Fl,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),_(this,Fl,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},yL=function(e){var B;if(!c(this,Fl)||e.touches.length!==2)return;In(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:i}=t,{screenX:a,screenY:u}=n,d=c(this,Fl),{touch0X:h,touch0Y:f,touch1X:g,touch1Y:w}=d,v=g-h,F=w-f,C=a-r,S=u-i,I=Math.hypot(C,S)||1,O=Math.hypot(v,F)||1;if(!c(this,sh)&&Math.abs(O-I)<=oT.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=i,d.touch1X=a,d.touch1Y=u,!c(this,sh)){_(this,sh,!0);return}const R=[(r+a)/2,(i+u)/2];(B=c(this,qy))==null||B.call(this,R,O,I)},wL=function(e){var t;e.touches.length>=2||(c(this,Sl)&&(c(this,Sl).abort(),_(this,Sl,null),(t=c(this,Qy))==null||t.call(this)),c(this,Fl)&&(In(e),_(this,Fl,null),_(this,sh,!1)))};let D1=oT;var oh,ya,pn,Nt,Tl,sf,mu,Ky,Sr,lh,kl,Gi,gu,Xy,ch,ei,Yy,uh,Il,Ao,af,of,qi,dh,Jy,K1,He,gC,Zy,yC,DA,vL,AL,wC,NA,vC,xL,_L,EL,AC,bL,xC,CL,FL,SL,_C,Ug;const Ze=class Ze{constructor(e){T(this,He);T(this,oh,null);T(this,ya,null);T(this,pn,null);T(this,Nt,null);T(this,Tl,null);T(this,sf,!1);T(this,mu,null);T(this,Ky,"");T(this,Sr,null);T(this,lh,null);T(this,kl,null);T(this,Gi,null);T(this,gu,null);T(this,Xy,"");T(this,ch,!1);T(this,ei,null);T(this,Yy,!1);T(this,uh,!1);T(this,Il,!1);T(this,Ao,null);T(this,af,0);T(this,of,0);T(this,qi,null);T(this,dh,null);oe(this,"isSelected",!1);oe(this,"_isCopy",!1);oe(this,"_editToolbar",null);oe(this,"_initialOptions",Object.create(null));oe(this,"_initialData",null);oe(this,"_isVisible",!0);oe(this,"_uiManager",null);oe(this,"_focusEventsAllowed",!0);T(this,Jy,!1);T(this,K1,Ze._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,a];const[u,d]=this.parentDimensions;this.x=e.x/u,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ze.prototype._resizeWithKeyboard,t=vp.TRANSLATE_SMALL,n=vp.TRANSLATE_BIG;return Ye(this,"_resizerKeyboardManager",new z0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Ze.prototype._stopResizingWithKeyboard]]))}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ye(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new DG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ze._l10n??(Ze._l10n=e),Ze._l10nResizer||(Ze._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ze._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Ze._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Tt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Jy)}set _isDraggable(e){var t;_(this,Jy,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,K1)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(P(this,He,Ug).call(this),(t=c(this,Gi))==null||t.remove(),_(this,Gi,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,ch)?_(this,ch,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){P(this,He,gC).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,ei)||_(this,ei,[this.x,this.y,this.width,this.height]),P(this,He,gC).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c(this,ei)||_(this,ei,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:u}=this;const[d,h]=this.getBaseTranslation();a+=d,u+=h;const{style:f}=n;f.left=`${(100*a).toFixed(2)}%`,f.top=`${(100*u).toFixed(2)}%`,this._onTranslating(a,u),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,ei)&&(c(this,ei)[0]!==this.x||c(this,ei)[1]!==this.y)}get _hasBeenResized(){return!!c(this,ei)&&(c(this,ei)[2]!==this.width||c(this,ei)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Ze,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:i,y:a,width:u,height:d}=this;if(u*=n,d*=r,i*=n,a*=r,this._mustFixPosition)switch(e){case 0:i=Pr(i,0,n-u),a=Pr(a,0,r-d);break;case 90:i=Pr(i,0,n-d),a=Pr(a,u,r);break;case 180:i=Pr(i,u,n),a=Pr(a,d,r);break;case 270:i=Pr(i,d,n),a=Pr(a,0,r-u);break}this.x=i/=n,this.y=a/=r;const[h,f]=this.getBaseTranslation();i+=h,a+=f,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return P(n=Ze,Zy,yC).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return P(n=Ze,Zy,yC).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,pn))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,uh))return this._editToolbar;this._editToolbar=new oC(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=c(this,pn))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,pn)||(R1.initialize(Ze._l10n),_(this,pn,new R1(this)),c(this,oh)&&(c(this,pn).data=c(this,oh),_(this,oh,null))),c(this,pn)}get altTextData(){var e;return(e=c(this,pn))==null?void 0:e.data}set altTextData(e){c(this,pn)&&(c(this,pn).data=e)}get guessedAltText(){var e;return(e=c(this,pn))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,pn))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,pn))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,pn)&&!c(this,pn).isEmpty()}hasAltTextData(){var e;return((e=c(this,pn))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=c(this,Nt))==null||e.focusButton()}addCommentButton(){return this.canAddComment?c(this,Nt)||_(this,Nt,new iA(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(c(this,Tl)){this._uiManager.isEditingMode()&&c(this,Tl).classList.remove("hidden");return}this.hasComment&&(_(this,Tl,c(this,Nt).renderForStandalone()),this.div.append(c(this,Tl)))}}removeStandaloneCommentButton(){c(this,Nt).removeStandaloneCommentButton(),_(this,Tl,null)}hideStandaloneCommentButton(){var e;(e=c(this,Tl))==null||e.classList.add("hidden")}get comment(){if(!c(this,Nt))return null;const{data:{richText:e,text:t,date:n,deleted:r}}=c(this,Nt);return{text:t,richText:e,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){c(this,Nt)||_(this,Nt,new iA(this)),typeof e=="object"&&e!==null?c(this,Nt).restoreData(e):c(this,Nt).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(c(this,Nt)||_(this,Nt,new iA(this)),c(this,Nt).setInitialText(e,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=c(this,Nt))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=c(this,Nt))==null?void 0:e.isDeleted()}get hasComment(){return!!c(this,Nt)&&!c(this,Nt).isEmpty()&&!c(this,Nt).isDeleted()}async editComment(e){c(this,Nt)||_(this,Nt,new iA(this)),c(this,Nt).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){c(this,Nt).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[a]=this.pageTranslation,u=a+i+1,d=r-100,h=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,h,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){c(this,Nt).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=c(this,sf)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),P(this,He,xC).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),nL(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,dh)||_(this,dh,new D1({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:P(this,He,xL).bind(this),onPinching:P(this,He,_L).bind(this),onPinchEnd:P(this,He,EL).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=ar.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(_(this,ch,!0),this._isDraggable){P(this,He,bL).call(this,e);return}P(this,He,AC).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Ao)&&clearTimeout(c(this,Ao)),_(this,Ao,setTimeout(()=>{var e;_(this,Ao,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[i,a]=this.pageDimensions,[u,d]=this.pageTranslation,h=e/r,f=t/r,g=this.x*i,w=this.y*a,v=this.width*i,F=this.height*a;switch(n){case 0:return[g+h+u,a-w-f-F+d,g+h+v+u,a-w-f+d];case 90:return[g+f+u,a-w+h+d,g+f+F+u,a-w+h+v+d];case 180:return[g-h-v+u,a-w+f+d,g-h+u,a-w+f+F+d];case 270:return[g-f-F+u,a-w-h-v+d,g-f+u,a-w-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,a]=e,u=i-n,d=a-r;switch(this.rotation){case 0:return[n,t-a,u,d];case 90:return[n,t-r,d,u];case 180:return[i,t-r,u,d];case 270:return[i,t-a,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ze._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=c(this,Nt))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:r,deleted:i,richText:a},uid:u,pageIndex:d,creationDate:h,modificationDate:f}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:h,modificationDate:n||f,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),_(this,uh,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),_(this,uh,!1),!0):!1}isInEditMode(){return c(this,uh)}shouldGetKeyboardEvents(){return c(this,Il)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&r>0&&e<i&&n>0}rebuild(){P(this,He,xC).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,_(r,oh,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,a]=r.pageDimensions,[u,d,h,f]=r.getRectInCurrentCoords(e.rect,a);return r.x=u/i,r.y=d/a,r.width=h/i,r.height=f/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,n;if((e=c(this,gu))==null||e.abort(),_(this,gu,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),c(this,Ao)&&(clearTimeout(c(this,Ao)),_(this,Ao,null)),P(this,He,Ug).call(this),this.removeEditToolbar(),c(this,qi)){for(const r of c(this,qi).values())clearTimeout(r);_(this,qi,null)}this.parent=null,(t=c(this,dh))==null||t.destroy(),_(this,dh,null),(n=c(this,Gi))==null||n.remove(),_(this,Gi,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(P(this,He,vL).call(this),c(this,Sr).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,r,i,a]=this.getPDFRect();return[Ze._round(n+(i-n)*e),Ze._round(r+(a-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,Nt).commentPopupPositionInLayer}set commentPopupPosition(e){c(this,Nt).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return c(this,Nt).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,Nt).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=c(this,Nt))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),_(this,kl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,Sr).children;if(!c(this,ya)){_(this,ya,Array.from(t));const a=P(this,He,CL).bind(this),u=P(this,He,FL).bind(this),d=this._uiManager._signal;for(const h of c(this,ya)){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:d}),h.addEventListener("blur",u,{signal:d}),h.addEventListener("focus",P(this,He,SL).bind(this,f),{signal:d}),h.setAttribute("data-l10n-id",Ze._l10nResizer[f])}}const n=c(this,ya)[0];let r=0;for(const a of t){if(a===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(c(this,ya).length/4);if(i!==r){if(i<r)for(let u=0;u<r-i;u++)c(this,Sr).append(c(this,Sr).firstElementChild);else if(i>r)for(let u=0;u<i-r;u++)c(this,Sr).firstElementChild.before(c(this,Sr).lastElementChild);let a=0;for(const u of t){const h=c(this,ya)[a++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Ze._l10nResizer[h])}}P(this,He,_C).call(this,0),_(this,Il,!0),c(this,Sr).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Il)&&P(this,He,vC).call(this,c(this,Xy),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){P(this,He,Ug).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=c(this,pn))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,r,i;this.isSelected&&(this.isSelected=!1,(e=c(this,Sr))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=c(this,pn))==null||i.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Yy)}set isEditing(e){_(this,Yy,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,qi)||_(this,qi,new Map);const{action:n}=e;let r=c(this,qi).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,qi).delete(n),c(this,qi).size===0&&_(this,qi,null)},Ze._telemetryTimeout),c(this,qi).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),_(this,sf,!1)}disable(){this.div&&(this.div.tabIndex=-1),_(this,sf,!0)}updateFakeAnnotationElement(e){if(!c(this,Gi)&&!this.deleted){_(this,Gi,e.addFakeAnnotation(this));return}if(this.deleted){c(this,Gi).remove(),_(this,Gi,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,Gi).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};oh=new WeakMap,ya=new WeakMap,pn=new WeakMap,Nt=new WeakMap,Tl=new WeakMap,sf=new WeakMap,mu=new WeakMap,Ky=new WeakMap,Sr=new WeakMap,lh=new WeakMap,kl=new WeakMap,Gi=new WeakMap,gu=new WeakMap,Xy=new WeakMap,ch=new WeakMap,ei=new WeakMap,Yy=new WeakMap,uh=new WeakMap,Il=new WeakMap,Ao=new WeakMap,af=new WeakMap,of=new WeakMap,qi=new WeakMap,dh=new WeakMap,Jy=new WeakMap,K1=new WeakMap,He=new WeakSet,gC=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Zy=new WeakSet,yC=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},DA=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},vL=function(){if(c(this,Sr))return;_(this,Sr,document.createElement("div")),c(this,Sr).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");c(this,Sr).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",P(this,He,AL).bind(this,n),{signal:t}),r.addEventListener("contextmenu",ra,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,Sr))},AL=function(e,t){var f;t.preventDefault();const{isMac:n}=ar.platform;if(t.button!==0||t.ctrlKey&&n)return;(f=c(this,pn))==null||f.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,_(this,lh,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",P(this,He,vC).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",In,{passive:!1,signal:a}),window.addEventListener("contextmenu",ra,{signal:a}),_(this,kl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{var g;i.abort(),this.parent.togglePointerEvents(!0),(g=c(this,pn))==null||g.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,P(this,He,NA).call(this)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})},wC=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},NA=function(){if(!c(this,kl))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=c(this,kl);_(this,kl,null);const i=this.x,a=this.y,u=this.width,d=this.height;i===e&&a===t&&u===n&&d===r||this.addCommands({cmd:P(this,He,wC).bind(this,i,a,u,d),undo:P(this,He,wC).bind(this,e,t,n,r),mustExec:!0})},vC=function(e,t){const[n,r]=this.parentDimensions,i=this.x,a=this.y,u=this.width,d=this.height,h=Ze.MIN_SIZE/n,f=Ze.MIN_SIZE/r,g=P(this,He,DA).call(this,this.rotation),w=(we,fe)=>[g[0]*we+g[2]*fe,g[1]*we+g[3]*fe],v=P(this,He,DA).call(this,360-this.rotation),F=(we,fe)=>[v[0]*we+v[2]*fe,v[1]*we+v[3]*fe];let C,S,I=!1,O=!1;switch(e){case"topLeft":I=!0,C=(we,fe)=>[0,0],S=(we,fe)=>[we,fe];break;case"topMiddle":C=(we,fe)=>[we/2,0],S=(we,fe)=>[we/2,fe];break;case"topRight":I=!0,C=(we,fe)=>[we,0],S=(we,fe)=>[0,fe];break;case"middleRight":O=!0,C=(we,fe)=>[we,fe/2],S=(we,fe)=>[0,fe/2];break;case"bottomRight":I=!0,C=(we,fe)=>[we,fe],S=(we,fe)=>[0,0];break;case"bottomMiddle":C=(we,fe)=>[we/2,fe],S=(we,fe)=>[we/2,0];break;case"bottomLeft":I=!0,C=(we,fe)=>[0,fe],S=(we,fe)=>[we,0];break;case"middleLeft":O=!0,C=(we,fe)=>[0,fe/2],S=(we,fe)=>[we,fe/2];break}const R=C(u,d),B=S(u,d);let z=w(...B);const W=Ze._round(i+z[0]),D=Ze._round(a+z[1]);let N=1,L=1,V,$;if(t.fromKeyboard)({deltaX:V,deltaY:$}=t);else{const{screenX:we,screenY:fe}=t,[le,Z]=c(this,lh);[V,$]=this.screenToPageTranslation(we-le,fe-Z),c(this,lh)[0]=we,c(this,lh)[1]=fe}if([V,$]=F(V/n,$/r),I){const we=Math.hypot(u,d);N=L=Math.max(Math.min(Math.hypot(B[0]-R[0]-V,B[1]-R[1]-$)/we,1/u,1/d),h/u,f/d)}else O?N=Pr(Math.abs(B[0]-R[0]-V),h,1)/u:L=Pr(Math.abs(B[1]-R[1]-$),f,1)/d;const K=Ze._round(u*N),U=Ze._round(d*L);z=w(...S(K,U));const me=W-z[0],Ae=D-z[1];c(this,ei)||_(this,ei,[this.x,this.y,this.width,this.height]),this.width=K,this.height=U,this.x=me,this.y=Ae,this.setDims(),this.fixAndSetPosition(),this._onResizing()},xL=function(){var e;_(this,kl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,pn))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},_L=function(e,t,n){let i=.7*(n/t)+1-.7;if(i===1)return;const a=P(this,He,DA).call(this,this.rotation),u=(W,D)=>[a[0]*W+a[2]*D,a[1]*W+a[3]*D],[d,h]=this.parentDimensions,f=this.x,g=this.y,w=this.width,v=this.height,F=Ze.MIN_SIZE/d,C=Ze.MIN_SIZE/h;i=Math.max(Math.min(i,1/w,1/v),F/w,C/v);const S=Ze._round(w*i),I=Ze._round(v*i);if(S===w&&I===v)return;c(this,ei)||_(this,ei,[f,g,w,v]);const O=u(w/2,v/2),R=Ze._round(f+O[0]),B=Ze._round(g+O[1]),z=u(S/2,I/2);this.x=R-z[0],this.y=B-z[1],this.width=S,this.height=I,this.setDims(),this.fixAndSetPosition(),this._onResizing()},EL=function(){var e;(e=c(this,pn))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),P(this,He,NA).call(this)},AC=function(e){const{isMac:t}=ar.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},bL=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:i},u=h=>{r.abort(),_(this,mu,null),_(this,ch,!1),this._uiManager.endDragSession()||P(this,He,AC).call(this,h),n&&this._onStopDragging()};t&&(_(this,af,e.clientX),_(this,of,e.clientY),_(this,mu,e.pointerId),_(this,Ky,e.pointerType),window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:g,pointerId:w}=h;if(w!==c(this,mu)){In(h);return}const[v,F]=this.screenToPageTranslation(f-c(this,af),g-c(this,of));_(this,af,f),_(this,of,g),this._uiManager.dragSelectedEditors(v,F)},a),window.addEventListener("touchmove",In,a),window.addEventListener("pointerdown",h=>{h.pointerType===c(this,Ky)&&(c(this,dh)||h.isPrimary)&&u(h),In(h)},a));const d=h=>{if(!c(this,mu)||c(this,mu)===h.pointerId){u(h);return}In(h)};window.addEventListener("pointerup",d,{signal:i}),window.addEventListener("blur",d,{signal:i})},xC=function(){if(c(this,gu)||!this.div)return;_(this,gu,new AbortController);const e=this._uiManager.combinedSignal(c(this,gu));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},CL=function(e){Ze._resizerKeyboardManager.exec(this,e)},FL=function(e){var t;c(this,Il)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,Sr)&&P(this,He,Ug).call(this)},SL=function(e){_(this,Xy,c(this,Il)?e:"")},_C=function(e){if(c(this,ya))for(const t of c(this,ya))t.tabIndex=e},Ug=function(){_(this,Il,!1),P(this,He,_C).call(this,-1),P(this,He,NA).call(this)},T(Ze,Zy),oe(Ze,"_l10n",null),oe(Ze,"_l10nResizer",null),oe(Ze,"_borderLineWidth",-1),oe(Ze,"_colorManager",new uC),oe(Ze,"_zIndex",1),oe(Ze,"_telemetryTimeout",1e3);let tn=Ze;class DG extends tn{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const NR=3285377520,Li=4294901760,lo=65535;class TL{constructor(e){this.h1=e?e&4294967295:NR,this.h2=e?e&4294967295:NR}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let C=0,S=e.length;C<S;C++){const I=e.charCodeAt(C);I<=255?t[n++]=I:(t[n++]=I>>>8,t[n++]=I&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,i=n-r*4,a=new Uint32Array(t.buffer,0,r);let u=0,d=0,h=this.h1,f=this.h2;const g=3432918353,w=461845907,v=g&lo,F=w&lo;for(let C=0;C<r;C++)C&1?(u=a[C],u=u*g&Li|u*v&lo,u=u<<15|u>>>17,u=u*w&Li|u*F&lo,h^=u,h=h<<13|h>>>19,h=h*5+3864292196):(d=a[C],d=d*g&Li|d*v&lo,d=d<<15|d>>>17,d=d*w&Li|d*F&lo,f^=d,f=f<<13|f>>>19,f=f*5+3864292196);switch(u=0,i){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*g&Li|u*v&lo,u=u<<15|u>>>17,u=u*w&Li|u*F&lo,r&1?h^=u:f^=u}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Li|e*36045&lo,t=t*4283543511&Li|((t<<16|e>>>16)*2950163797&Li)>>>16,e^=t>>>1,e=e*444984403&Li|e*60499&lo,t=t*3301882366&Li|((t<<16|e>>>16)*3120437893&Li)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const EC=Object.freeze({map:null,hash:"",transfer:void 0});var hh,ph,Pl,Tr,X1,kL;class XS{constructor(){T(this,X1);T(this,hh,!1);T(this,ph,null);T(this,Pl,null);T(this,Tr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=c(this,Tr).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return c(this,Tr).get(e)}remove(e){const t=c(this,Tr).get(e);if(t!==void 0&&(t instanceof tn&&c(this,Pl).delete(t.annotationElementId),c(this,Tr).delete(e),c(this,Tr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of c(this,Tr).values())if(n instanceof tn)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=c(this,Tr).get(e);let r=!1;if(n!==void 0)for(const[i,a]of Object.entries(t))n[i]!==a&&(r=!0,n[i]=a);else r=!0,c(this,Tr).set(e,t);r&&P(this,X1,kL).call(this),t instanceof tn&&((c(this,Pl)||_(this,Pl,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return c(this,Tr).has(e)}get size(){return c(this,Tr).size}resetModified(){c(this,hh)&&(_(this,hh,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new IL(this)}get serializable(){if(c(this,Tr).size===0)return EC;const e=new Map,t=new TL,n=[],r=Object.create(null);let i=!1;for(const[a,u]of c(this,Tr)){const d=u instanceof tn?u.serialize(!1,r):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(e.set(a,d),t.update(`${a}:${JSON.stringify(d)}`),i||(i=!!d.bitmap))}if(i)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:EC}get editorStats(){let e=null;const t=new Map;let n=0,r=0;for(const i of c(this,Tr).values()){if(!(i instanceof tn)){i.popup&&(i.popup.deleted?r+=1:n+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(n+=1);const a=i.telemetryFinalData;if(!a)continue;const{type:u}=a;t.has(u)||t.set(u,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const d=e[u]||(e[u]=new Map);for(const[h,f]of Object.entries(a)){if(h==="type")continue;let g=d.get(h);g||(g=new Map,d.set(h,g));const w=g.get(f)??0;g.set(f,w+1)}}if((r>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:n}),!e)return null;for(const[i,a]of t)e[i]=a.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){_(this,ph,null)}updateEditor(e,t){var r;const n=(r=c(this,Pl))==null?void 0:r.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=c(this,Pl))==null?void 0:t.get(e))||null}get modifiedIds(){if(c(this,ph))return c(this,ph);const e=[];if(c(this,Pl))for(const t of c(this,Pl).values())t.serialize()&&e.push(t.annotationElementId);return _(this,ph,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(this,Tr).entries()}}hh=new WeakMap,ph=new WeakMap,Pl=new WeakMap,Tr=new WeakMap,X1=new WeakSet,kL=function(){c(this,hh)||(_(this,hh,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ew;class IL extends XS{constructor(t){super();T(this,ew);const{map:n,hash:r,transfer:i}=t.serializable,a=structuredClone(n,i?{transfer:i}:null);_(this,ew,{map:a,hash:r,transfer:i})}get print(){Tt("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,ew)}get modifiedIds(){return Ye(this,"modifiedIds",{ids:new Set,hash:""})}}ew=new WeakMap;var lf;class NG{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){T(this,lf,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,lf).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||c(this,lf).has(e.loadedName))){if(St(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:a}=e,u=new FontFace(r,i,a);this.addNativeFontFace(u);try{await u.load(),c(this,lf).add(r),n==null||n(e)}catch{Xe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Tt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Xe(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ye(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Ye(this,"isSyncFontLoadingSupported",ds||ar.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(St(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ye(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(B,z){return B.charCodeAt(z)<<24|B.charCodeAt(z+1)<<16|B.charCodeAt(z+2)<<8|B.charCodeAt(z+3)&255}function r(B,z,W,D){const N=B.substring(0,z),L=B.substring(z+W);return N+D+L}let i,a;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let h=0;function f(B,z){if(++h>30){Xe("Load test font never loaded."),z();return}if(d.font="30px "+B,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(f.bind(null,B,z))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,g.length,g);const F=16,C=1482184792;let S=n(w,F);for(i=0,a=g.length-3;i<a;i+=4)S=S-C+n(g,i)|0;i<g.length&&(S=S-C+n(g+"XXX",i)|0),w=r(w,F,4,mG(S));const I=`url(data:font/opentype;base64,${btoa(w)});`,O=`@font-face {font-family:"${g}";src:${I}}`;this.insertRule(O);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const B of[e.loadedName,g]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=B,R.append(z)}this._document.body.append(R),f(g,()=>{R.remove(),t.complete()})}}lf=new WeakMap;var Ut;class MG{constructor(e,t=null,n,r){T(this,Ut);this.compiledGlyphs=Object.create(null),_(this,Ut,e),this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(a){Xe(`getPathGenerator - ignoring character: "${a}".`)}const i=QM(r==null?void 0:r.path);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}get black(){return c(this,Ut).black}get bold(){return c(this,Ut).bold}get disableFontFace(){return c(this,Ut).disableFontFace??!1}set disableFontFace(e){Ye(this,"disableFontFace",!!e)}get fontExtraProperties(){return c(this,Ut).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,Ut).isInvalidPDFjsFont}get isType3Font(){return c(this,Ut).isType3Font}get italic(){return c(this,Ut).italic}get missingFile(){return c(this,Ut).missingFile}get remeasure(){return c(this,Ut).remeasure}get vertical(){return c(this,Ut).vertical}get ascent(){return c(this,Ut).ascent}get defaultWidth(){return c(this,Ut).defaultWidth}get descent(){return c(this,Ut).descent}get bbox(){return c(this,Ut).bbox}set bbox(e){Ye(this,"bbox",e)}get fontMatrix(){return c(this,Ut).fontMatrix}get fallbackName(){return c(this,Ut).fallbackName}get loadedName(){return c(this,Ut).loadedName}get mimetype(){return c(this,Ut).mimetype}get name(){return c(this,Ut).name}get data(){return c(this,Ut).data}clearData(){c(this,Ut).clearData()}get cssFontInfo(){return c(this,Ut).cssFontInfo}get systemFontInfo(){return c(this,Ut).systemFontInfo}get defaultVMetrics(){return c(this,Ut).defaultVMetrics}}Ut=new WeakMap;var cf,uf,tw,df,MA;const k2=class k2{constructor(e){T(this,df);T(this,cf);T(this,uf);T(this,tw);_(this,cf,e),_(this,uf,new DataView(c(this,cf))),_(this,tw,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const h of k2.strings){const f=t.encode(e[h]);n[h]=f,r+=4+f.length}const i=new ArrayBuffer(r),a=new Uint8Array(i),u=new DataView(i);let d=0;for(const h of k2.strings){const f=n[h],g=f.length;u.setUint32(d,g),a.set(f,d+4),d+=4+g}return St(d===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return P(this,df,MA).call(this,0)}get fontWeight(){return P(this,df,MA).call(this,1)}get italicAngle(){return P(this,df,MA).call(this,2)}};cf=new WeakMap,uf=new WeakMap,tw=new WeakMap,df=new WeakSet,MA=function(e){St(e<k2.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=c(this,uf).getUint32(t)+4;const n=c(this,uf).getUint32(t);return c(this,tw).decode(new Uint8Array(c(this,cf),t+4,n))},oe(k2,"strings",["fontFamily","fontWeight","italicAngle"]);let N1=k2;var yu,xo,fh,mh,Vg;const I2=class I2{constructor(e){T(this,mh);T(this,yu);T(this,xo);T(this,fh);_(this,yu,e),_(this,xo,new DataView(c(this,yu))),_(this,fh,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let r=0;for(const w of I2.strings){const v=t.encode(e[w]);n[w]=v,r+=4+v.length}r+=4;let i,a,u=1+r;e.style&&(i=t.encode(e.style.style),a=t.encode(e.style.weight),u+=4+i.length+4+a.length);const d=new ArrayBuffer(u),h=new Uint8Array(d),f=new DataView(d);let g=0;f.setUint8(g++,e.guessFallback?1:0),f.setUint32(g,0),g+=4,r=0;for(const w of I2.strings){const v=n[w],F=v.length;r+=4+F,f.setUint32(g,F),h.set(v,g+4),g+=4+F}return f.setUint32(g-r-4,r),e.style&&(f.setUint32(g,i.length),h.set(i,g+4),g+=4+i.length,f.setUint32(g,a.length),h.set(a,g+4),g+=4+a.length),St(g<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(g)}get guessFallback(){return c(this,xo).getUint8(0)!==0}get css(){return P(this,mh,Vg).call(this,0)}get loadedName(){return P(this,mh,Vg).call(this,1)}get baseFontName(){return P(this,mh,Vg).call(this,2)}get src(){return P(this,mh,Vg).call(this,3)}get style(){let e=1;e+=4+c(this,xo).getUint32(e);const t=c(this,xo).getUint32(e),n=c(this,fh).decode(new Uint8Array(c(this,yu),e+4,t));e+=4+t;const r=c(this,xo).getUint32(e),i=c(this,fh).decode(new Uint8Array(c(this,yu),e+4,r));return{style:n,weight:i}}};yu=new WeakMap,xo=new WeakMap,fh=new WeakMap,mh=new WeakSet,Vg=function(e){St(e<I2.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=c(this,xo).getUint32(t)+4;const n=c(this,xo).getUint32(t);return c(this,fh).decode(new Uint8Array(c(this,yu),t+4,n))},oe(I2,"strings",["css","loadedName","baseFontName","src"]);let M1=I2;var hf,pf,ff,mf,ti,_o,nw,Vt,kn,pa,LA,$g;const tt=class tt{constructor({data:e,extra:t}){T(this,kn);T(this,_o);T(this,nw);T(this,Vt);_(this,_o,e),_(this,nw,new TextDecoder),_(this,Vt,new DataView(c(this,_o))),t&&Object.assign(this,t)}get black(){return P(this,kn,pa).call(this,0)}get bold(){return P(this,kn,pa).call(this,1)}get disableFontFace(){return P(this,kn,pa).call(this,2)}get fontExtraProperties(){return P(this,kn,pa).call(this,3)}get isInvalidPDFjsFont(){return P(this,kn,pa).call(this,4)}get isType3Font(){return P(this,kn,pa).call(this,5)}get italic(){return P(this,kn,pa).call(this,6)}get missingFile(){return P(this,kn,pa).call(this,7)}get remeasure(){return P(this,kn,pa).call(this,8)}get vertical(){return P(this,kn,pa).call(this,9)}get ascent(){return P(this,kn,LA).call(this,0)}get defaultWidth(){return P(this,kn,LA).call(this,1)}get descent(){return P(this,kn,LA).call(this,2)}get bbox(){let e=c(tt,pf);if(c(this,Vt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<4;r++)n.push(c(this,Vt).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=c(tt,ff);if(c(this,Vt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<6;r++)n.push(c(this,Vt).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=c(tt,mf);if(c(this,Vt).getUint8(e)===0)return;e+=1;const n=[];for(let r=0;r<3;r++)n.push(c(this,Vt).getInt16(e,!0)),e+=2;return n}get fallbackName(){return P(this,kn,$g).call(this,0)}get loadedName(){return P(this,kn,$g).call(this,1)}get mimetype(){return P(this,kn,$g).call(this,2)}get name(){return P(this,kn,$g).call(this,3)}get data(){let e=c(tt,ti);const t=c(this,Vt).getUint32(e);e+=4+t;const n=c(this,Vt).getUint32(e);e+=4+n;const r=c(this,Vt).getUint32(e);e+=4+r;const i=c(this,Vt).getUint32(e);if(i!==0)return new Uint8Array(c(this,_o),e+4,i)}clearData(){let e=c(tt,ti);const t=c(this,Vt).getUint32(e);e+=4+t;const n=c(this,Vt).getUint32(e);e+=4+n;const r=c(this,Vt).getUint32(e);e+=4+r;const i=c(this,Vt).getUint32(e);new Uint8Array(c(this,_o),e+4,i).fill(0),c(this,Vt).setUint32(e,0)}get cssFontInfo(){let e=c(tt,ti);const t=c(this,Vt).getUint32(e);e+=4+t;const n=c(this,Vt).getUint32(e);e+=4+n;const r=c(this,Vt).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(c(this,_o),e+4,r)),new N1(i.buffer)}get systemFontInfo(){let e=c(tt,ti);const t=c(this,Vt).getUint32(e);e+=4+t;const n=c(this,Vt).getUint32(e);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(c(this,_o),e+4,n)),new M1(r.buffer)}static write(e){const t=e.systemFontInfo?M1.write(e.systemFontInfo):null,n=e.cssFontInfo?N1.write(e.cssFontInfo):null,r=new TextEncoder,i={};let a=0;for(const C of tt.strings)i[C]=r.encode(e[C]),a+=4+i[C].length;const u=c(tt,ti)+4+a+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),d=new ArrayBuffer(u),h=new Uint8Array(d),f=new DataView(d);let g=0;const w=tt.bools.length;let v=0,F=0;for(let C=0;C<w;C++){const S=e[tt.bools[C]];v|=(S===void 0?0:S?2:1)<<F,F+=2,(F===8||C===w-1)&&(f.setUint8(g++,v),v=0,F=0)}St(g===c(tt,hf),"FontInfo.write: Boolean properties offset mismatch");for(const C of tt.numbers)f.setFloat64(g,e[C]),g+=8;if(St(g===c(tt,pf),"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(g++,4);for(const C of e.bbox)f.setInt16(g,C,!0),g+=2}else f.setUint8(g++,0),g+=8;if(St(g===c(tt,ff),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(g++,6);for(const C of e.fontMatrix)f.setFloat64(g,C,!0),g+=8}else f.setUint8(g++,0),g+=48;if(St(g===c(tt,mf),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(g++,1);for(const C of e.defaultVMetrics)f.setInt16(g,C,!0),g+=2}else f.setUint8(g++,0),g+=6;St(g===c(tt,ti),"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(c(tt,ti),0),g+=4;for(const C of tt.strings){const S=i[C],I=S.length;f.setUint32(g,I),h.set(S,g+4),g+=4+I}if(f.setUint32(c(tt,ti),g-c(tt,ti)-4),!t)f.setUint32(g,0),g+=4;else{const C=t.byteLength;f.setUint32(g,C),St(g+4+C<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),g+4),g+=4+C}if(!n)f.setUint32(g,0),g+=4;else{const C=n.byteLength;f.setUint32(g,C),St(g+4+C<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),g+4),g+=4+C}return e.data===void 0?(f.setUint32(g,0),g+=4):(f.setUint32(g,e.data.length),h.set(e.data,g+4),g+=4+e.data.length),St(g<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(g)}};hf=new WeakMap,pf=new WeakMap,ff=new WeakMap,mf=new WeakMap,ti=new WeakMap,_o=new WeakMap,nw=new WeakMap,Vt=new WeakMap,kn=new WeakSet,pa=function(e){St(e<tt.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,r=c(this,Vt).getUint8(t)>>n&3;return r===0?void 0:r===2},LA=function(e){return St(e<tt.numbers.length,"Invalid number index"),c(this,Vt).getFloat64(c(tt,hf)+e*8)},$g=function(e){St(e<tt.strings.length,"Invalid string index");let t=c(tt,ti)+4;for(let i=0;i<e;i++)t+=c(this,Vt).getUint32(t)+4;const n=c(this,Vt).getUint32(t),r=new Uint8Array(n);return r.set(new Uint8Array(c(this,_o),t+4,n)),c(this,nw).decode(r)},oe(tt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),oe(tt,"numbers",["ascent","defaultWidth","descent"]),oe(tt,"strings",["fallbackName","loadedName","mimetype","name"]),T(tt,hf,Math.ceil(tt.bools.length*2/8)),T(tt,pf,c(tt,hf)+tt.numbers.length*8),T(tt,ff,c(tt,pf)+1+8),T(tt,mf,c(tt,ff)+1+48),T(tt,ti,c(tt,mf)+1+6);let bC=tt;var rw,sw,iw,aw,ow,lw,cw,uw;const Jt=class Jt{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,r=[],i=[],a=[],u=[],d=null,h=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],a=e[3],t===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,d=e[1],r=e[2],i=e[3],u=e[4]||[],n=e[6],h=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const f=Math.floor(r.length/2),g=Math.floor(i.length/3),w=a.length,v=u.length;let F=0;for(const z of u)F+=1,F=Math.ceil(F/4)*4,F+=4+z.coords.length*4,F+=4+z.colors.length*4,z.verticesPerRow!==void 0&&(F+=4);const C=20+f*8+g*3+w*8+(n?16:0)+(h?3:0)+F,S=new ArrayBuffer(C),I=new DataView(S),O=new Uint8Array(S);I.setUint8(c(Jt,rw),t),I.setUint8(c(Jt,sw),n?1:0),I.setUint8(c(Jt,iw),h?1:0),I.setUint8(c(Jt,aw),d),I.setUint32(c(Jt,ow),f,!0),I.setUint32(c(Jt,lw),g,!0),I.setUint32(c(Jt,cw),w,!0),I.setUint32(c(Jt,uw),v,!0);let R=20;new Float32Array(S,R,f*2).set(r),R+=f*8,O.set(i,R),R+=g*3;for(const[z,W]of a)I.setFloat32(R,z,!0),R+=4,I.setUint32(R,parseInt(W.slice(1),16),!0),R+=4;if(n)for(const z of n)I.setFloat32(R,z,!0),R+=4;h&&(O.set(h,R),R+=3);for(let z=0;z<u.length;z++){const W=u[z];I.setUint8(R,W.type),R+=1,R=Math.ceil(R/4)*4,I.setUint32(R,W.coords.length,!0),R+=4,new Int32Array(S,R,W.coords.length).set(W.coords),R+=W.coords.length*4,I.setUint32(R,W.colors.length,!0),R+=4,new Int32Array(S,R,W.colors.length).set(W.colors),R+=W.colors.length*4,W.verticesPerRow!==void 0&&(I.setUint32(R,W.verticesPerRow,!0),R+=4)}return S}getIR(){const e=this.view,t=this.data[c(Jt,rw)],n=!!this.data[c(Jt,sw)],r=!!this.data[c(Jt,iw)],i=e.getUint32(c(Jt,ow),!0),a=e.getUint32(c(Jt,lw),!0),u=e.getUint32(c(Jt,cw),!0),d=e.getUint32(c(Jt,uw),!0);let h=20;const f=new Float32Array(this.buffer,h,i*2);h+=i*8;const g=new Uint8Array(this.buffer,h,a*3);h+=a*3;const w=[];for(let S=0;S<u;++S){const I=e.getFloat32(h,!0);h+=4;const O=e.getUint32(h,!0);h+=4,w.push([I,`#${O.toString(16).padStart(6,"0")}`])}let v=null;if(n){v=[];for(let S=0;S<4;++S)v.push(e.getFloat32(h,!0)),h+=4}let F=null;r&&(F=new Uint8Array(this.buffer,h,3),h+=3);const C=[];for(let S=0;S<d;++S){const I=e.getUint8(h);h+=1,h=Math.ceil(h/4)*4;const O=e.getUint32(h,!0);h+=4;const R=new Int32Array(this.buffer,h,O);h+=O*4;const B=e.getUint32(h,!0);h+=4;const z=new Int32Array(this.buffer,h,B);h+=B*4;const W={type:I,coords:R,colors:z};I===nC.LATTICE&&(W.verticesPerRow=e.getUint32(h,!0),h+=4),C.push(W)}if(t===1)return["RadialAxial","axial",v,w,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",v,w,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(t===3){const S=this.data[c(Jt,aw)];let I=null;if(f.length>0){let O=f[0],R=f[0],B=f[1],z=f[1];for(let W=0;W<f.length;W+=2){const D=f[W],N=f[W+1];O=O>D?D:O,B=B>N?N:B,R=R<D?D:R,z=z<N?N:z}I=[O,B,R,z]}return["Mesh",S,f,g,C,I,v,F]}throw new Error(`Unsupported pattern kind: ${t}`)}};rw=new WeakMap,sw=new WeakMap,iw=new WeakMap,aw=new WeakMap,ow=new WeakMap,lw=new WeakMap,cw=new WeakMap,uw=new WeakMap,T(Jt,rw,0),T(Jt,sw,1),T(Jt,iw,2),T(Jt,aw,3),T(Jt,ow,4),T(Jt,lw,8),T(Jt,cw,12),T(Jt,uw,16);let CC=Jt;var gf;class LG{constructor(e){T(this,gf);_(this,gf,e)}static write(e){let t,n;return ar.isFloat16ArraySupported?(n=new ArrayBuffer(e.length*2),t=new Float16Array(n)):(n=new ArrayBuffer(e.length*4),t=new Float32Array(n)),t.set(e),n}get path(){return ar.isFloat16ArraySupported?new Float16Array(c(this,gf)):new Float32Array(c(this,gf))}}gf=new WeakMap;function OG(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(ds)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function BG(s){if(ds&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return zx(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function aA(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const FC=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,jG=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",UG=AG.bind(null,FC,jG);var Rl,Y1;class VG{constructor(){T(this,Rl,new Map);T(this,Y1,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};c(this,Y1).then(()=>{for(const[r]of c(this,Rl))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){Xe("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}c(this,Rl).set(t,r)}removeEventListener(e,t){const n=c(this,Rl).get(t);n==null||n(),c(this,Rl).delete(t)}terminate(){for(const[,e]of c(this,Rl))e==null||e();c(this,Rl).clear()}}Rl=new WeakMap,Y1=new WeakMap;const oA={DATA:1,ERROR:2},zn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function MR(){}function Cs(s){if(s instanceof id||s instanceof rC||s instanceof SR||s instanceof I1||s instanceof YE)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||Tt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new id(s.message);case"InvalidPDFException":return new rC(s.message);case"PasswordException":return new SR(s.message,s.code);case"ResponseException":return new I1(s.message,s.status,s.missing);case"UnknownErrorException":return new YE(s.message,s.details)}return new YE(s.message,s.toString())}var yf,ta,PL,RL,DL,OA;class zg{constructor(e,t,n){T(this,ta);T(this,yf,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",P(this,ta,PL).bind(this),{signal:c(this,yf).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,a=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:a,targetName:u,action:e,streamId:i,data:t,desiredSize:h.desiredSize},r),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[i].pullCall=f,d.postMessage({sourceName:a,targetName:u,stream:zn.PULL,streamId:i,desiredSize:h.desiredSize}),f.promise},cancel:h=>{St(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[i].cancelCall=f,this.streamControllers[i].isClosed=!0,d.postMessage({sourceName:a,targetName:u,stream:zn.CANCEL,streamId:i,reason:Cs(h)}),f.promise}},n)}destroy(){var e;(e=c(this,yf))==null||e.abort(),_(this,yf,null)}}yf=new WeakMap,ta=new WeakSet,PL=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){P(this,ta,DL).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===oA.DATA)r.resolve(e.data);else if(e.callback===oA.ERROR)r.reject(Cs(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:n,targetName:r,callback:oA.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:n,targetName:r,callback:oA.ERROR,callbackId:e.callbackId,reason:Cs(a)})});return}if(e.streamId){P(this,ta,RL).call(this,e);return}t(e.data)},RL=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this,u=this.actionHandler[e.action],d={enqueue(h,f=1,g){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=f,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:zn.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:zn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){St(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:zn.ERROR,streamId:t,reason:Cs(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(u,e.data,d).then(function(){i.postMessage({sourceName:n,targetName:r,stream:zn.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:zn.START_COMPLETE,streamId:t,reason:Cs(h)})})},DL=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case zn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Cs(e.reason));break;case zn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Cs(e.reason));break;case zn.PULL:if(!u){i.postMessage({sourceName:n,targetName:r,stream:zn.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||MR).then(function(){i.postMessage({sourceName:n,targetName:r,stream:zn.PULL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:zn.PULL_COMPLETE,streamId:t,reason:Cs(h)})});break;case zn.ENQUEUE:if(St(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case zn.CLOSE:if(St(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),P(this,ta,OA).call(this,a,t);break;case zn.ERROR:St(a,"error should have stream controller"),a.controller.error(Cs(e.reason)),P(this,ta,OA).call(this,a,t);break;case zn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Cs(e.reason)),P(this,ta,OA).call(this,a,t);break;case zn.CANCEL:if(!u)break;const d=Cs(e.reason);Promise.try(u.onCancel||MR,d).then(function(){i.postMessage({sourceName:n,targetName:r,stream:zn.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:r,stream:zn.CANCEL_COMPLETE,streamId:t,reason:Cs(h)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},OA=async function(e,t){var n,r,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var dw;class NL{constructor({enableHWA:e=!1}){T(this,dw,!1);_(this,dw,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,dw)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Tt("Abstract method `_createCanvas` called.")}}dw=new WeakMap;class $G extends NL{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class ML{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Tt("Abstract method `_fetch` called.")}}class LR extends ML{async _fetch(e){const t=await U0(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):zx(t)}}class LL{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(e=!1){}}var gh,wf,Dl,Nl,Xr,yh,wh,Re,Gr,Hg,v2,BA,A2,OL,SC,x2,Wg,Gg,TC,qg;class zG extends LL{constructor({docId:t,ownerDocument:n=globalThis.document}){super();T(this,Re);T(this,gh);T(this,wf);T(this,Dl);T(this,Nl);T(this,Xr);T(this,yh);T(this,wh,0);_(this,Nl,t),_(this,Xr,n)}addFilter(t){if(!t)return"none";let n=c(this,Re,Gr).get(t);if(n)return n;const[r,i,a]=P(this,Re,BA).call(this,t),u=t.length===1?r:`${r}${i}${a}`;if(n=c(this,Re,Gr).get(u),n)return c(this,Re,Gr).set(t,n),n;const d=`g_${c(this,Nl)}_transfer_map_${er(this,wh)._++}`,h=P(this,Re,A2).call(this,d);c(this,Re,Gr).set(t,h),c(this,Re,Gr).set(u,h);const f=P(this,Re,x2).call(this,d);return P(this,Re,Gg).call(this,r,i,a,f),h}addHCMFilter(t,n){var F;const r=`${t}-${n}`,i="base";let a=c(this,Re,Hg).get(i);if((a==null?void 0:a.key)===r||(a?((F=a.filter)==null||F.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},c(this,Re,Hg).set(i,a)),!t||!n))return a.url;const u=P(this,Re,qg).call(this,t);t=Te.makeHexColor(...u);const d=P(this,Re,qg).call(this,n);if(n=Te.makeHexColor(...d),c(this,Re,v2).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const h=new Array(256);for(let C=0;C<=255;C++){const S=C/255;h[C]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const f=h.join(","),g=`g_${c(this,Nl)}_hcm_filter`,w=a.filter=P(this,Re,x2).call(this,g);P(this,Re,Gg).call(this,f,f,f,w),P(this,Re,SC).call(this,w);const v=(C,S)=>{const I=u[C]/255,O=d[C]/255,R=new Array(S+1);for(let B=0;B<=S;B++)R[B]=I+B/S*(O-I);return R.join(",")};return P(this,Re,Gg).call(this,v(0,5),v(1,5),v(2,5),w),a.url=P(this,Re,A2).call(this,g),a.url}addAlphaFilter(t){let n=c(this,Re,Gr).get(t);if(n)return n;const[r]=P(this,Re,BA).call(this,[t]),i=`alpha_${r}`;if(n=c(this,Re,Gr).get(i),n)return c(this,Re,Gr).set(t,n),n;const a=`g_${c(this,Nl)}_alpha_map_${er(this,wh)._++}`,u=P(this,Re,A2).call(this,a);c(this,Re,Gr).set(t,u),c(this,Re,Gr).set(i,u);const d=P(this,Re,x2).call(this,a);return P(this,Re,TC).call(this,r,d),u}addLuminosityFilter(t){let n=c(this,Re,Gr).get(t||"luminosity");if(n)return n;let r,i;if(t?([r]=P(this,Re,BA).call(this,[t]),i=`luminosity_${r}`):i="luminosity",n=c(this,Re,Gr).get(i),n)return c(this,Re,Gr).set(t,n),n;const a=`g_${c(this,Nl)}_luminosity_map_${er(this,wh)._++}`,u=P(this,Re,A2).call(this,a);c(this,Re,Gr).set(t,u),c(this,Re,Gr).set(i,u);const d=P(this,Re,x2).call(this,a);return P(this,Re,OL).call(this,d),t&&P(this,Re,TC).call(this,r,d),u}addHighlightHCMFilter(t,n,r,i,a){var O;const u=`${n}-${r}-${i}-${a}`;let d=c(this,Re,Hg).get(t);if((d==null?void 0:d.key)===u||(d?((O=d.filter)==null||O.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},c(this,Re,Hg).set(t,d)),!n||!r))return d.url;const[h,f]=[n,r].map(P(this,Re,qg).bind(this));let g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),w=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,F]=[i,a].map(P(this,Re,qg).bind(this));w<g&&([g,w,v,F]=[w,g,F,v]),c(this,Re,v2).style.color="";const C=(R,B,z)=>{const W=new Array(256),D=(w-g)/z,N=R/255,L=(B-R)/(255*z);let V=0;for(let $=0;$<=z;$++){const K=Math.round(g+$*D),U=N+$*L;for(let me=V;me<=K;me++)W[me]=U;V=K+1}for(let $=V;$<256;$++)W[$]=W[V-1];return W.join(",")},S=`g_${c(this,Nl)}_hcm_${t}_filter`,I=d.filter=P(this,Re,x2).call(this,S);return P(this,Re,SC).call(this,I),P(this,Re,Gg).call(this,C(v[0],F[0],5),C(v[1],F[1],5),C(v[2],F[2],5),I),d.url=P(this,Re,A2).call(this,S),d.url}destroy(t=!1){var n,r,i,a;t&&((n=c(this,yh))!=null&&n.size)||((r=c(this,Dl))==null||r.parentNode.parentNode.remove(),_(this,Dl,null),(i=c(this,wf))==null||i.clear(),_(this,wf,null),(a=c(this,yh))==null||a.clear(),_(this,yh,null),_(this,wh,0))}}gh=new WeakMap,wf=new WeakMap,Dl=new WeakMap,Nl=new WeakMap,Xr=new WeakMap,yh=new WeakMap,wh=new WeakMap,Re=new WeakSet,Gr=function(){return c(this,wf)||_(this,wf,new Map)},Hg=function(){return c(this,yh)||_(this,yh,new Map)},v2=function(){if(!c(this,Dl)){const t=c(this,Xr).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=c(this,Xr).createElementNS(ml,"svg");r.setAttribute("width",0),r.setAttribute("height",0),_(this,Dl,c(this,Xr).createElementNS(ml,"defs")),t.append(r),r.append(c(this,Dl)),c(this,Xr).body.append(t)}return c(this,Dl)},BA=function(t){if(t.length===1){const h=t[0],f=new Array(256);for(let w=0;w<256;w++)f[w]=h[w]/255;const g=f.join(",");return[g,g,g]}const[n,r,i]=t,a=new Array(256),u=new Array(256),d=new Array(256);for(let h=0;h<256;h++)a[h]=n[h]/255,u[h]=r[h]/255,d[h]=i[h]/255;return[a.join(","),u.join(","),d.join(",")]},A2=function(t){if(c(this,gh)===void 0){_(this,gh,"");const n=c(this,Xr).URL;n!==c(this,Xr).baseURI&&(Hx(n)?Xe('#createUrl: ignore "data:"-URL for performance reasons.'):_(this,gh,HM(n,"")))}return`url(${c(this,gh)}#${t})`},OL=function(t){const n=c(this,Xr).createElementNS(ml,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},SC=function(t){const n=c(this,Xr).createElementNS(ml,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},x2=function(t){const n=c(this,Xr).createElementNS(ml,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),c(this,Re,v2).append(n),n},Wg=function(t,n,r){const i=c(this,Xr).createElementNS(ml,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Gg=function(t,n,r,i){const a=c(this,Xr).createElementNS(ml,"feComponentTransfer");i.append(a),P(this,Re,Wg).call(this,a,"feFuncR",t),P(this,Re,Wg).call(this,a,"feFuncG",n),P(this,Re,Wg).call(this,a,"feFuncB",r)},TC=function(t,n){const r=c(this,Xr).createElementNS(ml,"feComponentTransfer");n.append(r),P(this,Re,Wg).call(this,r,"feFuncA",t)},qg=function(t){return c(this,Re,v2).style.color=t,$0(getComputedStyle(c(this,Re,v2)).getPropertyValue("color"))};class BL{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Tt("Abstract method `_fetch` called.")}}class OR extends BL{async _fetch(e){const t=await U0(e,"arraybuffer");return new Uint8Array(t)}}class jL{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Tt("Abstract method `_fetch` called.")}}class BR extends jL{async _fetch(e){const t=await U0(e,"arraybuffer");return new Uint8Array(t)}}ds&&Xe("Please use the `legacy` build in Node.js environments.");async function YS(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class HG extends LL{}class WG extends NL{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class GG extends ML{async _fetch(e){return YS(e)}}class qG extends BL{async _fetch(e){return YS(e)}}class QG extends jL{async _fetch(e){return YS(e)}}const p2="__forcedDependency",{floor:jR,ceil:UR}=Math;function lA(s,e,t,n,r,i){s[e*4+0]=Math.min(s[e*4+0],t),s[e*4+1]=Math.min(s[e*4+1],n),s[e*4+2]=Math.max(s[e*4+2],r),s[e*4+3]=Math.max(s[e*4+3],i)}const kC=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var vf,wu;class KG{constructor(e,t){T(this,vf);T(this,wu);_(this,vf,e),_(this,wu,t)}get length(){return c(this,vf).length}isEmpty(e){return c(this,vf)[e]===kC}minX(e){return c(this,wu)[e*4+0]/256}minY(e){return c(this,wu)[e*4+1]/256}maxX(e){return(c(this,wu)[e*4+2]+1)/256}maxY(e){return(c(this,wu)[e*4+3]+1)/256}}vf=new WeakMap,wu=new WeakMap;const cA=(s,e)=>{if(!s)return;let t=s.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},s.set(e,t)),t};var Ts,ks,vh,wa,Ah,Ml,Mt,$t,Ll,Is,hw,Af,xh,_h,Ol,Yr,Eo,pw,IC;class XG{constructor(e,t,n=!1){T(this,pw);T(this,Ts,{__proto__:null});T(this,ks,{__proto__:null,transform:[],moveText:[],sameLineText:[],[p2]:[]});T(this,vh,new Map);T(this,wa,[]);T(this,Ah,[]);T(this,Ml,[[1,0,0,1,0,0]]);T(this,Mt,[-1/0,-1/0,1/0,1/0]);T(this,$t,new Float64Array([1/0,1/0,-1/0,-1/0]));T(this,Ll,-1);T(this,Is,new Set);T(this,hw,new Map);T(this,Af,new Map);T(this,xh);T(this,_h);T(this,Ol);T(this,Yr);T(this,Eo);_(this,xh,e.width),_(this,_h,e.height),P(this,pw,IC).call(this,t),n&&_(this,Eo,new Map)}growOperationsCount(e){e>=c(this,Yr).length&&P(this,pw,IC).call(this,e,c(this,Yr))}save(e){return _(this,Ts,{__proto__:c(this,Ts)}),_(this,ks,{__proto__:c(this,ks),transform:{__proto__:c(this,ks).transform},moveText:{__proto__:c(this,ks).moveText},sameLineText:{__proto__:c(this,ks).sameLineText},[p2]:{__proto__:c(this,ks)[p2]}}),_(this,Mt,{__proto__:c(this,Mt)}),c(this,wa).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(c(this,Ts));if(t===null)return this;_(this,Ts,t),_(this,ks,Object.getPrototypeOf(c(this,ks))),_(this,Mt,Object.getPrototypeOf(c(this,Mt)));const n=c(this,wa).pop();return n!==void 0&&((r=cA(c(this,Eo),e))==null||r.dependencies.add(n),c(this,Yr)[e]=c(this,Yr)[n]),this}recordOpenMarker(e){return c(this,wa).push(e),this}getOpenMarker(){return c(this,wa).length===0?null:c(this,wa).at(-1)}recordCloseMarker(e){var n;const t=c(this,wa).pop();return t!==void 0&&((n=cA(c(this,Eo),e))==null||n.dependencies.add(t),c(this,Yr)[e]=c(this,Yr)[t]),this}beginMarkedContent(e){return c(this,Ah).push(e),this}endMarkedContent(e){var n;const t=c(this,Ah).pop();return t!==void 0&&((n=cA(c(this,Eo),e))==null||n.dependencies.add(t),c(this,Yr)[e]=c(this,Yr)[t]),this}pushBaseTransform(e){return c(this,Ml).push(Te.multiplyByDOMMatrix(c(this,Ml).at(-1),e.getTransform())),this}popBaseTransform(){return c(this,Ml).length>1&&c(this,Ml).pop(),this}recordSimpleData(e,t){return c(this,Ts)[e]=t,this}recordIncrementalData(e,t){return c(this,ks)[e].push(t),this}resetIncrementalData(e,t){return c(this,ks)[e].length=0,this}recordNamedData(e,t){return c(this,vh).set(e,t),this}recordSimpleDataFromNamed(e,t,n){c(this,Ts)[e]=c(this,vh).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(p2,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in c(this,Ts)&&this.recordFutureForcedDependency(t,c(this,Ts)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of c(this,Is))this.recordFutureForcedDependency(p2,e);return this}resetBBox(e){return c(this,Ll)!==e&&(_(this,Ll,e),c(this,$t)[0]=1/0,c(this,$t)[1]=1/0,c(this,$t)[2]=-1/0,c(this,$t)[3]=-1/0),this}recordClipBox(e,t,n,r,i,a){const u=Te.multiplyByDOMMatrix(c(this,Ml).at(-1),t.getTransform()),d=[1/0,1/0,-1/0,-1/0];Te.axialAlignedBoundingBox([n,i,r,a],u,d);const h=Te.intersect(c(this,Mt),d);return h?(c(this,Mt)[0]=h[0],c(this,Mt)[1]=h[1],c(this,Mt)[2]=h[2],c(this,Mt)[3]=h[3]):(c(this,Mt)[0]=c(this,Mt)[1]=1/0,c(this,Mt)[2]=c(this,Mt)[3]=-1/0),this}recordBBox(e,t,n,r,i,a){const u=c(this,Mt);if(u[0]===1/0)return this;const d=Te.multiplyByDOMMatrix(c(this,Ml).at(-1),t.getTransform());if(u[0]===-1/0)return Te.axialAlignedBoundingBox([n,i,r,a],d,c(this,$t)),this;const h=[1/0,1/0,-1/0,-1/0];return Te.axialAlignedBoundingBox([n,i,r,a],d,h),c(this,$t)[0]=Math.min(c(this,$t)[0],Math.max(h[0],u[0])),c(this,$t)[1]=Math.min(c(this,$t)[1],Math.max(h[1],u[1])),c(this,$t)[2]=Math.max(c(this,$t)[2],Math.min(h[2],u[2])),c(this,$t)[3]=Math.max(c(this,$t)[3],Math.min(h[3],u[3])),this}recordCharacterBBox(e,t,n,r=1,i=0,a=0,u){const d=n.bbox;let h,f;if(d&&(h=d[2]!==d[0]&&d[3]!==d[1]&&c(this,Af).get(n),h!==!1&&(f=[0,0,0,0],Te.axialAlignedBoundingBox(d,n.fontMatrix,f),(r!==1||i!==0||a!==0)&&Te.scaleMinMax([r,0,0,-r,i,a],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!u)return this.recordFullPageBBox(e);const g=u();return d&&f&&h===void 0&&(h=f[0]<=i-g.actualBoundingBoxLeft&&f[2]>=i+g.actualBoundingBoxRight&&f[1]<=a-g.actualBoundingBoxAscent&&f[3]>=a+g.actualBoundingBoxDescent,c(this,Af).set(n,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,i-g.actualBoundingBoxLeft,i+g.actualBoundingBoxRight,a-g.actualBoundingBoxAscent,a+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return c(this,$t)[0]=Math.max(0,c(this,Mt)[0]),c(this,$t)[1]=Math.max(0,c(this,Mt)[1]),c(this,$t)[2]=Math.min(c(this,xh),c(this,Mt)[2]),c(this,$t)[3]=Math.min(c(this,_h),c(this,Mt)[3]),this}getSimpleIndex(e){return c(this,Ts)[e]}recordDependencies(e,t){const n=c(this,Is),r=c(this,Ts),i=c(this,ks);for(const a of t)a in c(this,Ts)?n.add(r[a]):a in i&&i[a].forEach(n.add,n);return this}recordNamedDependency(e,t){return c(this,vh).has(t)&&c(this,Is).add(c(this,vh).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[p2]),c(this,Eo)){const n=cA(c(this,Eo),e),{dependencies:r}=n;c(this,Is).forEach(r.add,r),c(this,wa).forEach(r.add,r),c(this,Ah).forEach(r.add,r),r.delete(e),n.isRenderingOperation=!0}if(c(this,Ll)===e){const n=jR(c(this,$t)[0]*256/c(this,xh)),r=jR(c(this,$t)[1]*256/c(this,_h)),i=UR(c(this,$t)[2]*256/c(this,xh)),a=UR(c(this,$t)[3]*256/c(this,_h));lA(c(this,Ol),e,n,r,i,a);for(const u of c(this,Is))u!==e&&lA(c(this,Ol),u,n,r,i,a);for(const u of c(this,wa))u!==e&&lA(c(this,Ol),u,n,r,i,a);for(const u of c(this,Ah))u!==e&&lA(c(this,Ol),u,n,r,i,a);t||(c(this,Is).clear(),_(this,Ll,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(c(this,Is));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return c(this,Ll)===e&&(_(this,Ll,-1),c(this,Mt)[0]=Math.max(c(this,Mt)[0],c(this,$t)[0]),c(this,Mt)[1]=Math.max(c(this,Mt)[1],c(this,$t)[1]),c(this,Mt)[2]=Math.min(c(this,Mt)[2],c(this,$t)[2]),c(this,Mt)[3]=Math.min(c(this,Mt)[3],c(this,$t)[3]),t||c(this,Is).clear()),this}_takePendingDependencies(){const e=c(this,Is);return _(this,Is,new Set),e}_extractOperation(e){const t=c(this,hw).get(e);return c(this,hw).delete(e),t}_pushPendingDependencies(e){for(const t of e)c(this,Is).add(t)}take(){return c(this,Af).clear(),new KG(c(this,Yr),c(this,Ol))}takeDebugMetadata(){return c(this,Eo)}}Ts=new WeakMap,ks=new WeakMap,vh=new WeakMap,wa=new WeakMap,Ah=new WeakMap,Ml=new WeakMap,Mt=new WeakMap,$t=new WeakMap,Ll=new WeakMap,Is=new WeakMap,hw=new WeakMap,Af=new WeakMap,xh=new WeakMap,_h=new WeakMap,Ol=new WeakMap,Yr=new WeakMap,Eo=new WeakMap,pw=new WeakSet,IC=function(e,t){const n=new ArrayBuffer(e*4);_(this,Ol,new Uint8ClampedArray(n)),_(this,Yr,new Uint32Array(n)),t&&t.length>0?(c(this,Yr).set(t),c(this,Yr).fill(kC,t.length)):c(this,Yr).fill(kC)};var Gt,Fn,va,xf,_f;const lT=class lT{constructor(e,t,n){T(this,Gt);T(this,Fn);T(this,va);T(this,xf,0);T(this,_f,0);if(e instanceof lT&&c(e,va)===!!n)return e;_(this,Gt,e),_(this,Fn,t),_(this,va,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return er(this,_f)._++,c(this,Gt).save(c(this,Fn)),this}restore(e){return c(this,_f)>0&&(c(this,Gt).restore(c(this,Fn)),er(this,_f)._--),this}recordOpenMarker(e){return er(this,xf)._++,this}getOpenMarker(){return c(this,xf)>0?c(this,Fn):c(this,Gt).getOpenMarker()}recordCloseMarker(e){return er(this,xf)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return c(this,Gt).pushBaseTransform(e),this}popBaseTransform(){return c(this,Gt).popBaseTransform(),this}recordSimpleData(e,t){return c(this,Gt).recordSimpleData(e,c(this,Fn)),this}recordIncrementalData(e,t){return c(this,Gt).recordIncrementalData(e,c(this,Fn)),this}resetIncrementalData(e,t){return c(this,Gt).resetIncrementalData(e,c(this,Fn)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return c(this,Gt).recordSimpleDataFromNamed(e,t,c(this,Fn)),this}recordFutureForcedDependency(e,t){return c(this,Gt).recordFutureForcedDependency(e,c(this,Fn)),this}inheritSimpleDataAsFutureForcedDependencies(e){return c(this,Gt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,Gt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return c(this,va)||c(this,Gt).resetBBox(c(this,Fn)),this}recordClipBox(e,t,n,r,i,a){return c(this,va)||c(this,Gt).recordClipBox(c(this,Fn),t,n,r,i,a),this}recordBBox(e,t,n,r,i,a){return c(this,va)||c(this,Gt).recordBBox(c(this,Fn),t,n,r,i,a),this}recordCharacterBBox(e,t,n,r,i,a,u){return c(this,va)||c(this,Gt).recordCharacterBBox(c(this,Fn),t,n,r,i,a,u),this}recordFullPageBBox(e){return c(this,va)||c(this,Gt).recordFullPageBBox(c(this,Fn)),this}getSimpleIndex(e){return c(this,Gt).getSimpleIndex(e)}recordDependencies(e,t){return c(this,Gt).recordDependencies(c(this,Fn),t),this}recordNamedDependency(e,t){return c(this,Gt).recordNamedDependency(c(this,Fn),t),this}recordOperation(e){return c(this,Gt).recordOperation(c(this,Fn),!0),this}recordShowTextOperation(e){return c(this,Gt).recordShowTextOperation(c(this,Fn),!0),this}bboxToClipBoxDropOperation(e){return c(this,va)||c(this,Gt).bboxToClipBoxDropOperation(c(this,Fn),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Gt=new WeakMap,Fn=new WeakMap,va=new WeakMap,xf=new WeakMap,_f=new WeakMap;let L1=lT;const Oi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Dr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function PC(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),s.clip(r)}class JS{isModifyingCurrentTransform(){return!1}getPattern(){Tt("Abstract method `getPattern` called.")}}class YG extends JS{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let n,r=this._p0,i=this._p1;if(t&&(r=r.slice(),i=i.slice(),Te.applyTransform(r,t),Te.applyTransform(i,t)),this._type==="axial")n=e.createLinearGradient(r[0],r[1],i[0],i[1]);else if(this._type==="radial"){let a=this._r0,u=this._r1;if(t){const d=new Float32Array(2);Te.singularValueDecompose2dScale(t,d),a*=d[0],u*=d[0]}n=e.createRadialGradient(r[0],r[1],a,i[0],i[1],u)}for(const a of this._colorStops)n.addColorStop(a[0],a[1]);return n}getPattern(e,t,n,r){let i;if(r===Dr.STROKE||r===Dr.FILL){if(this.isOriginBased()){let w=Te.transform(n,t.baseTransform);this.matrix&&(w=Te.transform(w,this.matrix));const v=.001,F=Math.hypot(w[0],w[1]),C=Math.hypot(w[2],w[3]),S=(w[0]*w[2]+w[1]*w[3])/(F*C);if(Math.abs(S)<v)if(this.isRadial()){if(Math.abs(F-C)<v)return this._createGradient(e,w)}else return this._createGradient(e,w)}const a=t.current.getClippedPathBoundingBox(r,_n(e))||[0,0,0,0],u=Math.ceil(a[2]-a[0])||1,d=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",u,d),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),n=Te.transform(n,[1,0,0,1,a[0],a[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),PC(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),i=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(n);i.setTransform(g)}else PC(e,this._bbox),i=this._createGradient(e);return i}}function eb(s,e,t,n,r,i,a,u){const d=e.coords,h=e.colors,f=s.data,g=s.width*4;let w;d[t+1]>d[n+1]&&(w=t,t=n,n=w,w=i,i=a,a=w),d[n+1]>d[r+1]&&(w=n,n=r,r=w,w=a,a=u,u=w),d[t+1]>d[n+1]&&(w=t,t=n,n=w,w=i,i=a,a=w);const v=(d[t]+e.offsetX)*e.scaleX,F=(d[t+1]+e.offsetY)*e.scaleY,C=(d[n]+e.offsetX)*e.scaleX,S=(d[n+1]+e.offsetY)*e.scaleY,I=(d[r]+e.offsetX)*e.scaleX,O=(d[r+1]+e.offsetY)*e.scaleY;if(F>=O)return;const R=h[i],B=h[i+1],z=h[i+2],W=h[a],D=h[a+1],N=h[a+2],L=h[u],V=h[u+1],$=h[u+2],K=Math.round(F),U=Math.round(O);let me,Ae,we,fe,le,Z,J,H;for(let Q=K;Q<=U;Q++){if(Q<S){const Se=Q<F?0:(F-Q)/(F-S);me=v-(v-C)*Se,Ae=R-(R-W)*Se,we=B-(B-D)*Se,fe=z-(z-N)*Se}else{let Se;Q>O?Se=1:S===O?Se=0:Se=(S-Q)/(S-O),me=C-(C-I)*Se,Ae=W-(W-L)*Se,we=D-(D-V)*Se,fe=N-(N-$)*Se}let ae;Q<F?ae=0:Q>O?ae=1:ae=(F-Q)/(F-O),le=v-(v-I)*ae,Z=R-(R-L)*ae,J=B-(B-V)*ae,H=z-(z-$)*ae;const ye=Math.round(Math.min(me,le)),xe=Math.round(Math.max(me,le));let Ee=g*Q+ye*4;for(let Se=ye;Se<=xe;Se++)ae=(me-Se)/(me-le),ae<0?ae=0:ae>1&&(ae=1),f[Ee++]=Ae-(Ae-Z)*ae|0,f[Ee++]=we-(we-J)*ae|0,f[Ee++]=fe-(fe-H)*ae|0,f[Ee++]=255}}function JG(s,e,t){const n=e.coords,r=e.colors;let i,a;switch(e.type){case nC.LATTICE:const u=e.verticesPerRow,d=Math.floor(n.length/u)-1,h=u-1;for(i=0;i<d;i++){let f=i*u;for(let g=0;g<h;g++,f++)eb(s,t,n[f],n[f+1],n[f+u],r[f],r[f+1],r[f+u]),eb(s,t,n[f+u+1],n[f+1],n[f+u],r[f+u+1],r[f+1],r[f+u])}break;case nC.TRIANGLES:for(i=0,a=n.length;i<a;i+=3)eb(s,t,n[i],n[i+1],n[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class ZG extends JS{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-u,f=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),v=h/g,F=f/w,C={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/v,scaleY:1/F},S=g+4,I=w+4,O=n.getCanvas("mesh",S,I),R=O.context,B=R.createImageData(g,w);if(t){const W=B.data;for(let D=0,N=W.length;D<N;D+=4)W[D]=t[0],W[D+1]=t[1],W[D+2]=t[2],W[D+3]=255}for(const W of this._figures)JG(B,W,C);return R.putImageData(B,2,2),{canvas:O.canvas,offsetX:u-2*v,offsetY:d-2*F,scaleX:v,scaleY:F}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){PC(e,this._bbox);const i=new Float32Array(2);if(r===Dr.SHADING)Te.singularValueDecompose2dScale(_n(e),i);else if(this.matrix){Te.singularValueDecompose2dScale(this.matrix,i);const[u,d]=i;Te.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=u,i[1]*=d}else Te.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,r===Dr.SHADING?null:this._background,t.cachedCanvases);return r!==Dr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class eq extends JS{getPattern(){return"hotpink"}}function tq(s){switch(s[0]){case"RadialAxial":return new YG(s);case"Mesh":return new ZG(s);case"Dummy":return new eq}throw new Error(`Unknown IR type: ${s[0]}`)}const VR={COLORED:1,UNCOLORED:2},J1=class J1{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){var Z,J;const{bbox:n,operatorList:r,paintType:i,tilingType:a,color:u,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),$x("TilingType: "+a);const g=n[0],w=n[1],v=n[2],F=n[3],C=v-g,S=F-w,I=new Float32Array(2);Te.singularValueDecompose2dScale(this.matrix,I);const[O,R]=I;Te.singularValueDecompose2dScale(this.baseTransform,I);const B=O*I[0],z=R*I[1];let W=C,D=S,N=!1,L=!1;const V=Math.ceil(h*B),$=Math.ceil(f*z),K=Math.ceil(C*B),U=Math.ceil(S*z);V>=K?W=h:N=!0,$>=U?D=f:L=!0;const me=this.getSizeAndScale(W,this.ctx.canvas.width,B),Ae=this.getSizeAndScale(D,this.ctx.canvas.height,z),we=e.cachedCanvases.getCanvas("pattern",me.size,Ae.size),fe=we.context,le=d.createCanvasGraphics(fe,t);if(le.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(le,i,u),fe.translate(-me.scale*g,-Ae.scale*w),le.transform(0,me.scale,0,0,Ae.scale,0,0),fe.save(),(Z=le.dependencyTracker)==null||Z.save(),this.clipBbox(le,g,w,v,F),le.baseTransform=_n(le.ctx),le.executeOperatorList(r),le.endDrawing(),(J=le.dependencyTracker)==null||J.restore(),fe.restore(),N||L){const H=we.canvas;N&&(W=h),L&&(D=f);const Q=this.getSizeAndScale(W,this.ctx.canvas.width,B),ae=this.getSizeAndScale(D,this.ctx.canvas.height,z),ye=Q.size,xe=ae.size,Ee=e.cachedCanvases.getCanvas("pattern-workaround",ye,xe),Se=Ee.context,Ue=N?Math.floor(C/h):0,Ce=L?Math.floor(S/f):0;for(let Me=0;Me<=Ue;Me++)for(let st=0;st<=Ce;st++)Se.drawImage(H,ye*Me,xe*st,ye,xe,0,0,ye,xe);return{canvas:Ee.canvas,scaleX:Q.scale,scaleY:ae.scale,offsetX:g,offsetY:w}}return{canvas:we.canvas,scaleX:me.scale,scaleY:Ae.scale,offsetX:g,offsetY:w}}getSizeAndScale(e,t,n){const r=Math.max(J1.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const a=r-t,u=i-n;e.ctx.rect(t,n,a,u),Te.axialAlignedBoundingBox([t,n,r,i],_n(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case VR.COLORED:const{fillStyle:a,strokeStyle:u}=this.ctx;r.fillStyle=i.fillColor=a,r.strokeStyle=i.strokeColor=u;break;case VR.UNCOLORED:r.fillStyle=r.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new pG(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,i){let a=n;r!==Dr.SHADING&&(a=Te.transform(a,t.baseTransform),this.matrix&&(a=Te.transform(a,this.matrix)));const u=this.createPatternCanvas(t,i);let d=new DOMMatrix(a);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const h=e.createPattern(u.canvas,"repeat");return h.setTransform(d),h}};oe(J1,"MAX_PATTERN_SIZE",3e3);let RC=J1;function nq({src:s,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const u=ar.isLittleEndian?4278190080:255,[d,h]=a?[i,u]:[u,i],f=n>>3,g=n&7,w=s.length;t=new Uint32Array(t.buffer);let v=0;for(let F=0;F<r;F++){for(const S=e+f;e<S;e++){const I=e<w?s[e]:255;t[v++]=I&128?h:d,t[v++]=I&64?h:d,t[v++]=I&32?h:d,t[v++]=I&16?h:d,t[v++]=I&8?h:d,t[v++]=I&4?h:d,t[v++]=I&2?h:d,t[v++]=I&1?h:d}if(g===0)continue;const C=e<w?s[e++]:255;for(let S=0;S<g;S++)t[v++]=C&1<<7-S?h:d}return{srcPos:e,destPos:v}}const $R=16,zR=100,rq=15,HR=10,Ms=16,tb=new DOMMatrix,wi=new Float32Array(2),S2=new Float32Array([1/0,1/0,-1/0,-1/0]);function sq(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,r,i,a,u){e.transform(t,n,r,i,a,u),this.__originalTransform(t,n,r,i,a,u)},s.setTransform=function(t,n,r,i,a,u){e.setTransform(t,n,r,i,a,u),this.__originalSetTransform(t,n,r,i,a,u)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,r,i,a,u){e.bezierCurveTo(t,n,r,i,a,u),this.__originalBezierCurveTo(t,n,r,i,a,u)},s.rect=function(t,n,r,i){e.rect(t,n,r,i),this.__originalRect(t,n,r,i)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class iq{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function uA(s,e,t,n,r,i,a,u,d,h){const[f,g,w,v,F,C]=_n(s);if(g===0&&w===0){const O=a*f+F,R=Math.round(O),B=u*v+C,z=Math.round(B),W=(a+d)*f+F,D=Math.abs(Math.round(W)-R)||1,N=(u+h)*v+C,L=Math.abs(Math.round(N)-z)||1;return s.setTransform(Math.sign(f),0,0,Math.sign(v),R,z),s.drawImage(e,t,n,r,i,0,0,D,L),s.setTransform(f,g,w,v,F,C),[D,L]}if(f===0&&v===0){const O=u*w+F,R=Math.round(O),B=a*g+C,z=Math.round(B),W=(u+h)*w+F,D=Math.abs(Math.round(W)-R)||1,N=(a+d)*g+C,L=Math.abs(Math.round(N)-z)||1;return s.setTransform(0,Math.sign(g),Math.sign(w),0,R,z),s.drawImage(e,t,n,r,i,0,0,L,D),s.setTransform(f,g,w,v,F,C),[L,D]}s.drawImage(e,t,n,r,i,a,u,d,h);const S=Math.hypot(f,g),I=Math.hypot(w,v);return[S*d,I*h]}class WR{constructor(e,t,n){oe(this,"alphaIsShape",!1);oe(this,"fontSize",0);oe(this,"fontSizeScale",1);oe(this,"textMatrix",null);oe(this,"textMatrixScale",1);oe(this,"fontMatrix",tC);oe(this,"leading",0);oe(this,"x",0);oe(this,"y",0);oe(this,"lineX",0);oe(this,"lineY",0);oe(this,"charSpacing",0);oe(this,"wordSpacing",0);oe(this,"textHScale",1);oe(this,"textRenderingMode",tr.FILL);oe(this,"textRise",0);oe(this,"fillColor","#000000");oe(this,"strokeColor","#000000");oe(this,"patternFill",!1);oe(this,"patternStroke",!1);oe(this,"fillAlpha",1);oe(this,"strokeAlpha",1);oe(this,"lineWidth",1);oe(this,"activeSMask",null);oe(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=S2.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Dr.FILL,t=null){const n=this.minMax.slice();if(e===Dr.STROKE){t||Tt("Stroke bounding box must include transform."),Te.singularValueDecompose2dScale(t,wi);const r=wi[0]*this.lineWidth/2,i=wi[1]*this.lineWidth/2;n[0]-=r,n[1]-=i,n[2]+=r,n[3]+=i}return n}updateClipFromPath(){const e=Te.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(S2,0)}getClippedPathBoundingBox(e=Dr.FILL,t=null){return Te.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function GR(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%Ms,i=(t-r)/Ms,a=r===0?i:i+1,u=s.createImageData(n,Ms);let d=0,h;const f=e.data,g=u.data;let w,v,F,C;if(e.kind===TA.GRAYSCALE_1BPP){const S=f.byteLength,I=new Uint32Array(g.buffer,0,g.byteLength>>2),O=I.length,R=n+7>>3,B=4294967295,z=ar.isLittleEndian?4278190080:255;for(w=0;w<a;w++){for(F=w<i?Ms:r,h=0,v=0;v<F;v++){const W=S-d;let D=0;const N=W>R?n:W*8-7,L=N&-8;let V=0,$=0;for(;D<L;D+=8)$=f[d++],I[h++]=$&128?B:z,I[h++]=$&64?B:z,I[h++]=$&32?B:z,I[h++]=$&16?B:z,I[h++]=$&8?B:z,I[h++]=$&4?B:z,I[h++]=$&2?B:z,I[h++]=$&1?B:z;for(;D<N;D++)V===0&&($=f[d++],V=128),I[h++]=$&V?B:z,V>>=1}for(;h<O;)I[h++]=0;s.putImageData(u,0,w*Ms)}}else if(e.kind===TA.RGBA_32BPP){for(v=0,C=n*Ms*4,w=0;w<i;w++)g.set(f.subarray(d,d+C)),d+=C,s.putImageData(u,0,v),v+=Ms;w<a&&(C=n*r*4,g.set(f.subarray(d,d+C)),s.putImageData(u,0,v))}else if(e.kind===TA.RGB_24BPP)for(F=Ms,C=n*F,w=0;w<a;w++){for(w>=i&&(F=r,C=n*F),h=0,v=C;v--;)g[h++]=f[d++],g[h++]=f[d++],g[h++]=f[d++],g[h++]=255;s.putImageData(u,0,w*Ms)}else throw new Error(`bad image kind: ${e.kind}`)}function qR(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%Ms,i=(t-r)/Ms,a=r===0?i:i+1,u=s.createImageData(n,Ms);let d=0;const h=e.data,f=u.data;for(let g=0;g<a;g++){const w=g<i?Ms:r;({srcPos:d}=nq({src:h,srcPos:d,dest:f,width:n,height:w,nonBlackColor:0})),s.putImageData(u,0,g*Ms)}}function Eg(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function dA(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function QR(s,e){if(e)return!0;Te.singularValueDecompose2dScale(s,wi);const t=Math.fround(qo.pixelRatio*ad.PDF_TO_CSS_UNITS);return wi[0]<=t&&wi[1]<=t}const aq=["butt","round","square"],oq=["miter","round","bevel"],lq={},KR={};var Na,DC,NC,MC;const cT=class cT{constructor(e,t,n,r,i,{optionalContentConfig:a,markedContentStack:u=null},d,h,f){T(this,Na);this.ctx=e,this.current=new WR(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=a,this.cachedCanvases=new iq(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,n=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(..._n(this.compositeCtx))}this.ctx.save(),dA(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=_n(this.ctx)}executeOperatorList(e,t,n,r,i){var I;const a=e.argsArray,u=e.fnArray;let d=t||0;const h=a.length;if(h===d)return d;const f=h-d>HR&&typeof n=="function",g=f?Date.now()+rq:0;let w=0;const v=this.commonObjs,F=this.objs;let C,S;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,n),d;if(!i||i(d))if(C=u[d],S=a[d]??null,C!==_y.dependency)S===null?this[C](d):this[C](d,...S);else for(const O of S){(I=this.dependencyTracker)==null||I.recordNamedData(O,d);const R=O.startsWith("g_")?v:F;if(!R.has(O))return R.get(O,n),d}if(d++,d===h)return d;if(f&&++w>HR){if(Date.now()>g)return n(),d;w=0}}}endDrawing(){P(this,Na,DC).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),P(this,Na,NC).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),u=n,d=r,h="prescale1",f,g;for(;i>2&&u>1||a>2&&d>1;){let w=u,v=d;i>2&&u>1&&(w=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),i/=u/w),a>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,a/=d/v),f=this.cachedCanvases.getCanvas(h,w,v),g=f.context,g.clearRect(0,0,w,v),g.drawImage(e,0,0,u,d,0,0,w,v),e=f.canvas,u=w,d=v,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:d}}_createMaskCanvas(e,t){var V,$;const n=this.ctx,{width:r,height:i}=t,a=this.current.fillColor,u=this.current.patternFill,d=_n(n);let h,f,g,w;if((t.bitmap||t.data)&&t.count>1){const K=t.bitmap||t.data.buffer;f=JSON.stringify(u?d:[d.slice(0,4),a]),h=this._cachedBitmapsMap.get(K),h||(h=new Map,this._cachedBitmapsMap.set(K,h));const U=h.get(f);if(U&&!u){const me=Math.round(Math.min(d[0],d[2])+d[4]),Ae=Math.round(Math.min(d[1],d[3])+d[5]);return(V=this.dependencyTracker)==null||V.recordDependencies(e,Oi.transformAndFill),{canvas:U,offsetX:me,offsetY:Ae}}g=U}g||(w=this.cachedCanvases.getCanvas("maskCanvas",r,i),qR(w.context,t));let v=Te.transform(d,[1/r,0,0,-1/i,0,0]);v=Te.transform(v,[1,0,0,1,0,-i]);const F=S2.slice();Te.axialAlignedBoundingBox([0,0,r,i],v,F);const[C,S,I,O]=F,R=Math.round(I-C)||1,B=Math.round(O-S)||1,z=this.cachedCanvases.getCanvas("fillCanvas",R,B),W=z.context,D=C,N=S;W.translate(-D,-N),W.transform(...v),g||(g=this._scaleImage(w.canvas,oo(W)),g=g.img,h&&u&&h.set(f,g)),W.imageSmoothingEnabled=QR(_n(W),t.interpolate),uA(W,g,0,0,g.width,g.height,0,0,r,i),W.globalCompositeOperation="source-in";const L=Te.transform(oo(W),[1,0,0,1,-D,-N]);return W.fillStyle=u?a.getPattern(n,this,L,Dr.FILL,e):a,W.fillRect(0,0,r,i),h&&!u&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,z.canvas)),($=this.dependencyTracker)==null||$.recordDependencies(e,Oi.transformAndFill),{canvas:z.canvas,offsetX:Math.round(D),offsetY:Math.round(N)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=aq[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=oq[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,r,i,a,u;for(const[d,h]of t)switch(d){case"LW":this.setLineWidth(e,h);break;case"LC":this.setLineCap(e,h);break;case"LJ":this.setLineJoin(e,h);break;case"ML":this.setMiterLimit(e,h);break;case"D":this.setDash(e,h[0],h[1]);break;case"RI":this.setRenderingIntent(e,h);break;case"FL":this.setFlatness(e,h);break;case"Font":this.setFont(e,h[0],h[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=h;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=h;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=h;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=h?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(h);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),Eg(this.suspendedCtx,a),sq(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Eg(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],a=r[1],u=r[2]-i,d=r[3]-a;u===0||d===0||(this.genericComposeSMask(t.context,n,u,d,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,a,u,d,h,f,g){let w=e.canvas,v=d-f,F=h-g;if(a)if(v<0||F<0||v+n>w.width||F+r>w.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,r),I=S.context;I.drawImage(w,-v,-F),I.globalCompositeOperation="destination-atop",I.fillStyle=a,I.fillRect(0,0,n,r),I.globalCompositeOperation="source-over",w=S.canvas,v=F=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(v,F,n,r),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(v,F,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const C=new Path2D;C.rect(d,h,n,r),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(w,v,F,n,r,d,h,n,r),t.restore()}save(e){var n;this.inSMaskMode&&Eg(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Eg(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,i,a,u){var d;(d=this.dependencyTracker)==null||d.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,i,a,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[i]=n;if(!r){i||(i=n[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const a=t===_y.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-a,r[2]+a,r[1]-a,r[3]+a).recordDependencies(e,["transform"])}i instanceof Path2D||(i=n[0]=QM(i)),Te.axialAlignedBoundingBox(r,_n(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var a;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const u=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,oo(r),Dr.STROKE,e),u){const d=new Path2D;d.addPath(t,r.getTransform().invertSelf().multiplySelf(u)),t=d}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,Oi.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Dr.STROKE,_n(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var h,f,g;const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let u=!1;if(a){const w=i.isModifyingCurrentTransform()?r.getTransform():null;if((h=this.dependencyTracker)==null||h.save(e),r.save(),r.fillStyle=i.getPattern(r,this,oo(r),Dr.FILL,e),w){const v=new Path2D;v.addPath(t,r.getTransform().invertSelf().multiplySelf(w)),t=v}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(f=this.dependencyTracker)==null||f.recordDependencies(e,Oi.fill),u&&(r.restore(),(g=this.dependencyTracker)==null||g.restore(e)),n&&this.consumePath(e,t,d)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,Oi.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=lq}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=KR}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=n.getTransform().invertSelf();for(const{transform:a,x:u,y:d,fontSize:h,path:f}of t)f&&r.addPath(f,new DOMMatrix(a).preMultiplySelf(i).translate(u,d).scale(h,-h));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var g,w;(g=this.dependencyTracker)==null||g.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||tC,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Xe("Invalid font matrix for font "+t),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const a=r.loadedName||"sans-serif",u=((w=r.systemFontInfo)==null?void 0:w.css)||`"${a}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const h=r.italic?"italic":"normal";let f=n;n<$R?f=$R:n>zR&&(f=zR),this.current.fontSizeScale=n/f,this.ctx.font=`${h} ${d} ${f}px ${u}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,r,i,a){var I,O,R,B;const u=this.ctx,d=this.current,h=d.font,f=d.textRenderingMode,g=d.fontSize/d.fontSizeScale,w=f&tr.FILL_STROKE_MASK,v=!!(f&tr.ADD_TO_PATH_FLAG),F=d.patternFill&&!h.missingFile,C=d.patternStroke&&!h.missingFile;let S;if((h.disableFontFace||v||F||C)&&!h.missingFile&&(S=h.getPathGenerator(this.commonObjs,t)),S&&(h.disableFontFace||F||C)){u.save(),u.translate(n,r),u.scale(g,-g),(I=this.dependencyTracker)==null||I.recordCharacterBBox(e,u,h);let z;if(w===tr.FILL||w===tr.FILL_STROKE)if(i){z=u.getTransform(),u.setTransform(...i);const W=P(this,Na,MC).call(this,S,z,i);u.fill(W)}else u.fill(S);if(w===tr.STROKE||w===tr.FILL_STROKE)if(a){z||(z=u.getTransform()),u.setTransform(...a);const{a:W,b:D,c:N,d:L}=z,V=Te.inverseTransform(a),$=Te.transform([W,D,N,L,0,0],V);Te.singularValueDecompose2dScale($,wi),u.lineWidth*=Math.max(wi[0],wi[1])/g,u.stroke(P(this,Na,MC).call(this,S,z,a))}else u.lineWidth/=g,u.stroke(S);u.restore()}else(w===tr.FILL||w===tr.FILL_STROKE)&&(u.fillText(t,n,r),(O=this.dependencyTracker)==null||O.recordCharacterBBox(e,u,h,g,n,r,()=>u.measureText(t))),(w===tr.STROKE||w===tr.FILL_STROKE)&&(this.dependencyTracker&&((R=this.dependencyTracker)==null||R.recordCharacterBBox(e,u,h,g,n,r,()=>u.measureText(t)).recordDependencies(e,Oi.stroke)),u.strokeText(t,n,r));v&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:_n(u),x:n,y:r,fontSize:g,path:S}),(B=this.dependencyTracker)==null||B.recordCharacterBBox(e,u,h,g,n,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Ye(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var $,K,U,me;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Oi.showText).resetBBox(e),this.current.textRenderingMode&tr.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(e,t),($=this.dependencyTracker)==null||$.recordShowTextOperation(e);return}const i=n.fontSize;if(i===0){(K=this.dependencyTracker)==null||K.recordOperation(e);return}const a=this.ctx,u=n.fontSizeScale,d=n.charSpacing,h=n.wordSpacing,f=n.fontDirection,g=n.textHScale*f,w=t.length,v=r.vertical,F=v?1:-1,C=r.defaultVMetrics,S=i*n.fontMatrix[0],I=n.textRenderingMode===tr.FILL&&!r.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),f>0?a.scale(g,-1):a.scale(g,1);let O,R;const B=n.textRenderingMode&tr.FILL_STROKE_MASK,z=B===tr.FILL||B===tr.FILL_STROKE,W=B===tr.STROKE||B===tr.FILL_STROKE;if(z&&n.patternFill){a.save();const Ae=n.fillColor.getPattern(a,this,oo(a),Dr.FILL,e);O=_n(a),a.restore(),a.fillStyle=Ae}if(W&&n.patternStroke){a.save();const Ae=n.strokeColor.getPattern(a,this,oo(a),Dr.STROKE,e);R=_n(a),a.restore(),a.strokeStyle=Ae}let D=n.lineWidth;const N=n.textMatrixScale;if(N===0||D===0?W&&(D=this.getSinglePixelWidth()):D/=N,u!==1&&(a.scale(u,u),D/=u),a.lineWidth=D,r.isInvalidPDFjsFont){const Ae=[];let we=0;for(const le of t)Ae.push(le.unicode),we+=le.width;const fe=Ae.join("");if(a.fillText(fe,0,0),this.dependencyTracker!==null){const le=a.measureText(fe);this.dependencyTracker.recordBBox(e,this.ctx,-le.actualBoundingBoxLeft,le.actualBoundingBoxRight,-le.actualBoundingBoxAscent,le.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=we*S*g,a.restore(),this.compose();return}let L=0,V;for(V=0;V<w;++V){const Ae=t[V];if(typeof Ae=="number"){L+=F*Ae*i/1e3;continue}let we=!1;const fe=(Ae.isSpace?h:0)+d,le=Ae.fontChar,Z=Ae.accent;let J,H,Q=Ae.width;if(v){const xe=Ae.vmetric||C,Ee=-(Ae.vmetric?xe[1]:Q*.5)*S,Se=xe[2]*S;Q=xe?-xe[0]:Q,J=Ee/u,H=(L+Se)/u}else J=L/u,H=0;let ae;if(r.remeasure&&Q>0){ae=a.measureText(le);const xe=ae.width*1e3/i*u;if(Q<xe&&this.isFontSubpixelAAEnabled){const Ee=Q/xe;we=!0,a.save(),a.scale(Ee,1),J/=Ee}else Q!==xe&&(J+=(Q-xe)/2e3*i/u)}if(this.contentVisible&&(Ae.isInFont||r.missingFile)){if(I&&!Z)a.fillText(le,J,H),(U=this.dependencyTracker)==null||U.recordCharacterBBox(e,a,ae?{bbox:null}:r,i/u,J,H,()=>ae??a.measureText(le));else if(this.paintChar(e,le,J,H,O,R),Z){const xe=J+i*Z.offset.x/u,Ee=H-i*Z.offset.y/u;this.paintChar(e,Z.fontChar,xe,Ee,O,R)}}const ye=v?Q*S-fe*f:Q*S+fe*f;L+=ye,we&&a.restore()}v?n.y-=L:n.x+=L*g,a.restore(),this.compose(),(me=this.dependencyTracker)==null||me.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,r=this.current,i=r.font,a=r.fontSize,u=r.fontDirection,d=i.vertical?1:-1,h=r.charSpacing,f=r.wordSpacing,g=r.textHScale*u,w=r.fontMatrix||tC,v=t.length,F=r.textRenderingMode===tr.INVISIBLE;let C,S,I,O;if(F||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(g,u);const R=this.dependencyTracker;for(this.dependencyTracker=R?new L1(R,e):null,C=0;C<v;++C){if(S=t[C],typeof S=="number"){O=d*S*a/1e3,this.ctx.translate(O,0),r.x+=O*g;continue}const B=(S.isSpace?f:0)+h,z=i.charProcOperatorList[S.operatorListId];z?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...w),this.executeOperatorList(z),this.restore()):Xe(`Type3 character "${S.operatorListId}" is not available.`);const W=[S.width,0];Te.applyTransform(W,w),I=W[0]*a+B,n.translate(I,0),r.x+=I*g}n.restore(),R&&(this.dependencyTracker=R)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,i,a,u){var h;const d=new Path2D;d.rect(r,i,a-r,u-i),this.ctx.clip(d),(h=this.dependencyTracker)==null||h.recordBBox(e,this.ctx,r,a,i,u).recordClipBox(e,this.ctx,r,a,i,u),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const r=this.baseTransform||_n(this.ctx),i={createCanvasGraphics:(a,u)=>new cT(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new L1(this.dependencyTracker,u,!0):null)};n=new RC(t,this.ctx,i,r)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=tq(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){var a;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const r=this._getPattern(e,t);n.fillStyle=r.getPattern(n,this,oo(n),Dr.SHADING,e);const i=oo(n);if(i){const{width:u,height:d}=n.canvas,h=S2.slice();Te.axialAlignedBoundingBox([0,0,u,d],i,h);const[f,g,w,v]=h;this.ctx.fillRect(f,g,w-f,v-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Oi.transform).recordDependencies(e,Oi.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Tt("Should not call beginInlineImage")}beginImageData(){Tt("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=_n(this.ctx),n)){Te.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,a,u,d]=n,h=new Path2D;h.rect(i,a,u-i,d-a),this.ctx.clip(h),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,u,a,d),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var R;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||$x("TODO: Support non-isolated groups."),t.knockout&&Xe("Knockout groups not supported.");const r=_n(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=S2.slice();Te.axialAlignedBoundingBox(t.bbox,_n(n),i);const a=[0,0,n.canvas.width,n.canvas.height];i=Te.intersect(i,a)||[0,0,0,0];const u=Math.floor(i[0]),d=Math.floor(i[1]),h=Math.max(Math.ceil(i[2])-u,1),f=Math.max(Math.ceil(i[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const w=this.cachedCanvases.getCanvas(g,h,f),v=w.context;v.translate(-u,-d),v.transform(...r);let F=new Path2D;const[C,S,I,O]=t.bbox;if(F.rect(C,S,I-C,O-S),t.matrix){const B=new Path2D;B.addPath(F,new DOMMatrix(t.matrix)),F=B}v.clip(F),t.smask&&this.smaskStack.push({canvas:w.canvas,context:v,offsetX:u,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,d),n.save()),Eg(n,v),this.ctx=v,(R=this.dependencyTracker)==null||R.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=_n(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const u=S2.slice();Te.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(e,t,n,r,i,a){if(P(this,Na,DC).call(this),dA(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],d=n[3]-n[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=d,Te.singularValueDecompose2dScale(_n(this.ctx),wi);const{viewportScale:h}=this,f=Math.ceil(u*this.outputScaleX*h),g=Math.ceil(d*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:w,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(wi[0],0,0,-wi[1],0,d*wi[1]),dA(this.ctx)}else{dA(this.ctx),this.endPath(e);const h=new Path2D;h.rect(n[0],n[1],u,d),this.ctx.clip(h)}}this.current=new WR(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),P(this,Na,NC).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var u;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const r=this.ctx,i=this._createMaskCanvas(e,t),a=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,i.offsetX,i.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+a.width,i.offsetY,i.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,i=0,a,u){var g,w,v;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const h=_n(d);d.transform(n,r,i,a,0,0);const f=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),(g=this.dependencyTracker)==null||g.resetBBox(e);for(let F=0,C=u.length;F<C;F+=2){const S=Te.transform(h,[n,r,i,a,u[F],u[F+1]]);d.drawImage(f.canvas,S[4],S[5]),(w=this.dependencyTracker)==null||w.recordBBox(e,this.ctx,S[4],S[4]+f.canvas.width,S[5],S[5]+f.canvas.height)}d.restore(),this.compose(),(v=this.dependencyTracker)==null||v.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,u,d;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,Oi.transformAndFill);for(const h of t){const{data:f,width:g,height:w,transform:v}=h,F=this.cachedCanvases.getCanvas("maskCanvas",g,w),C=F.context;C.save();const S=this.getObject(e,f,h);qR(C,S),C.globalCompositeOperation="source-in",C.fillStyle=i?r.getPattern(C,this,oo(n),Dr.FILL,e):r,C.fillRect(0,0,g,w),C.restore(),n.save(),n.transform(...v),n.scale(1,-1),uA(n,F.canvas,0,0,g,w,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(e,n,0,g,0,w),n.restore()}this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Xe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,r,i){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){Xe("Dependent image isn't ready yet");return}const u=a.width,d=a.height,h=[];for(let f=0,g=i.length;f<g;f+=2)h.push({transform:[n,0,0,r,i[f],i[f+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(e,a,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e,t){var h;if(!this.contentVisible)return;const n=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/n,-1/r);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,r).context;GR(g,t),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,oo(i));i.imageSmoothingEnabled=QR(_n(i),t.interpolate),(h=this.dependencyTracker)==null||h.resetBBox(e).recordBBox(e,i,0,n,-r,0).recordDependencies(e,Oi.imageXObject).recordOperation(e),uA(i,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,n,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var a,u,d;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const h=t.width,f=t.height,w=this.cachedCanvases.getCanvas("inlineImage",h,f).context;GR(w,t),i=this.applyTransferMapsToCanvas(w)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const h of n)r.save(),r.transform(...h.transform),r.scale(1,-1),uA(r,i,h.x,h.y,h.w,h.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(e,r,0,1,-1,0),r.restore();(d=this.dependencyTracker)==null||d.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Oi.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var a,u;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===KR?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(u=this.dependencyTracker)==null||u.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=_n(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let a,u;if(n===0&&r===0){const d=Math.abs(t),h=Math.abs(i);if(d===h)if(e===0)a=u=1/d;else{const f=d*e;a=u=f<1?1/f:1}else if(e===0)a=1/d,u=1/h;else{const f=d*e,g=h*e;a=f<1?1/f:1,u=g<1?1/g:1}}else{const d=Math.abs(t*i-n*r),h=Math.hypot(t,n),f=Math.hypot(r,i);if(e===0)a=f/d,u=h/d;else{const g=e*d;a=f>g?f/g:1,u=h>g?h/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[i,a]=this.getScaleForStroking();if(i===a){n.lineWidth=(r||1)*i,n.stroke(e);return}const u=n.getLineDash();t&&n.save(),n.scale(i,a),tb.a=1/i,tb.d=1/a;const d=new Path2D;if(d.addPath(e,tb),u.length>0){const h=Math.max(i,a);n.setLineDash(u.map(f=>f/h)),n.lineDashOffset/=h}n.lineWidth=r||1,n.stroke(d),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Na=new WeakSet,DC=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},NC=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},MC=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let B2=cT;for(const s in _y)B2.prototype[s]!==void 0&&(B2.prototype[_y[s]]=B2.prototype[s]);var fw,mw;class No{static get workerPort(){return c(this,fw)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");_(this,fw,e)}static get workerSrc(){return c(this,mw)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");_(this,mw,e)}}fw=new WeakMap,mw=new WeakMap,T(No,fw,null),T(No,mw,"");var Ef,gw;class cq{constructor({parsedData:e,rawData:t}){T(this,Ef);T(this,gw);_(this,Ef,e),_(this,gw,t)}getRaw(){return c(this,gw)}get(e){return c(this,Ef).get(e)??null}[Symbol.iterator](){return c(this,Ef).entries()}}Ef=new WeakMap,gw=new WeakMap;const _2=Symbol("INTERNAL");var yw,ww,vw,bf;class uq{constructor(e,{name:t,intent:n,usage:r,rbGroups:i}){T(this,yw,!1);T(this,ww,!1);T(this,vw,!1);T(this,bf,!0);_(this,yw,!!(e&yi.DISPLAY)),_(this,ww,!!(e&yi.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=i}get visible(){if(c(this,vw))return c(this,bf);if(!c(this,bf))return!1;const{print:e,view:t}=this.usage;return c(this,yw)?(t==null?void 0:t.viewState)!=="OFF":c(this,ww)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==_2&&Tt("Internal method `_setVisible` called."),_(this,vw,n),_(this,bf,t)}}yw=new WeakMap,ww=new WeakMap,vw=new WeakMap,bf=new WeakMap;var vu,zt,Cf,Ff,Aw,LC;class dq{constructor(e,t=yi.DISPLAY){T(this,Aw);T(this,vu,null);T(this,zt,new Map);T(this,Cf,null);T(this,Ff,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,_(this,Ff,e.order);for(const n of e.groups)c(this,zt).set(n.id,new uq(t,n));if(e.baseState==="OFF")for(const n of c(this,zt).values())n._setVisible(_2,!1);for(const n of e.on)c(this,zt).get(n)._setVisible(_2,!0);for(const n of e.off)c(this,zt).get(n)._setVisible(_2,!1);_(this,Cf,this.getHash())}}isVisible(e){if(c(this,zt).size===0)return!0;if(!e)return $x("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,zt).has(e.id)?c(this,zt).get(e.id).visible:(Xe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return P(this,Aw,LC).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,zt).has(t))return Xe(`Optional content group not found: ${t}`),!0;if(c(this,zt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,zt).has(t))return Xe(`Optional content group not found: ${t}`),!0;if(!c(this,zt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,zt).has(t))return Xe(`Optional content group not found: ${t}`),!0;if(!c(this,zt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,zt).has(t))return Xe(`Optional content group not found: ${t}`),!0;if(c(this,zt).get(t).visible)return!1}return!0}return Xe(`Unknown optional content policy ${e.policy}.`),!0}return Xe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const r=c(this,zt).get(e);if(!r){Xe(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const u of a)u!==e&&((i=c(this,zt).get(u))==null||i._setVisible(_2,!1,!0));r._setVisible(_2,!!t,!0),_(this,vu,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const i=c(this,zt).get(r);if(i)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}_(this,vu,null)}get hasInitialVisibility(){return c(this,Cf)===null||this.getHash()===c(this,Cf)}getOrder(){return c(this,zt).size?c(this,Ff)?c(this,Ff).slice():[...c(this,zt).keys()]:null}getGroup(e){return c(this,zt).get(e)||null}getHash(){if(c(this,vu)!==null)return c(this,vu);const e=new TL;for(const[t,n]of c(this,zt))e.update(`${t}:${n.visible}`);return _(this,vu,e.hexdigest())}[Symbol.iterator](){return c(this,zt).entries()}}vu=new WeakMap,zt=new WeakMap,Cf=new WeakMap,Ff=new WeakMap,Aw=new WeakSet,LC=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const i=e[r];let a;if(Array.isArray(i))a=P(this,Aw,LC).call(this,i);else if(c(this,zt).has(i))a=c(this,zt).get(i).visible;else return Xe(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};var xw,_w;class Wx{constructor(e,t,n){T(this,xw,null);T(this,_w,null);oe(this,"_fullReader",null);oe(this,"_rangeReaders",new Set);oe(this,"_source",null);this._source=e,_(this,xw,t),_(this,_w,n)}get _progressiveDataLength(){var e;return((e=this._fullReader)==null?void 0:e._loaded)??0}getFullReader(){return St(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(c(this,xw))(this)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new(c(this,_w))(this,e,t);return this._rangeReaders.add(n),n}cancelAllRequests(e){var t;(t=this._fullReader)==null||t.cancel(e);for(const n of new Set(this._rangeReaders))n.cancel(e)}}xw=new WeakMap,_w=new WeakMap;class Gx{constructor(e){oe(this,"onProgress",null);oe(this,"_contentLength",0);oe(this,"_filename",null);oe(this,"_headersCapability",Promise.withResolvers());oe(this,"_isRangeSupported",!1);oe(this,"_isStreamingSupported",!1);oe(this,"_loaded",0);oe(this,"_stream",null);this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){Tt("Abstract method `read` called")}cancel(e){Tt("Abstract method `cancel` called")}}class qx{constructor(e,t,n){oe(this,"_stream",null);this._stream=e}async read(){Tt("Abstract method `read` called")}cancel(e){Tt("Abstract method `cancel` called")}}function XR(s){return s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer}var Ew,OC;class hq extends Wx{constructor(t){super(t,pq,fq);T(this,Ew);oe(this,"_progressiveDone",!1);oe(this,"_queuedChunks",[]);const{pdfDataRangeTransport:n}=t,{initialData:r,progressiveDone:i}=n;if((r==null?void 0:r.length)>0){const a=XR(r);this._queuedChunks.push(a)}this._progressiveDone=i,n.addRangeListener((a,u)=>{P(this,Ew,OC).call(this,a,u)}),n.addProgressListener((a,u)=>{var d,h;u!==void 0&&((h=(d=this._fullReader)==null?void 0:d.onProgress)==null||h.call(d,{loaded:a,total:u}))}),n.addProgressiveReadListener(a=>{P(this,Ew,OC).call(this,void 0,a)}),n.addProgressiveDoneListener(()=>{var a;(a=this._fullReader)==null||a.progressiveDone(),this._progressiveDone=!0}),n.transportReady()}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,n){const r=super.getRangeReader(t,n);return r&&(r.onDone=()=>this._rangeReaders.delete(r),this._source.pdfDataRangeTransport.requestDataRange(t,n)),r}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}Ew=new WeakSet,OC=function(t,n){const r=XR(n);if(t===void 0)this._fullReader?this._fullReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.keys().find(a=>a._begin===t);St(i,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),i._enqueue(r)}};class pq extends Gx{constructor(t){super(t);oe(this,"_done",!1);oe(this,"_queuedChunks",null);oe(this,"_requests",[]);const{pdfDataRangeTransport:n,disableRange:r,disableStream:i}=t._source,{length:a,contentDispositionFilename:u}=n;this._queuedChunks=t._queuedChunks||[];for(const d of this._queuedChunks)this._loaded+=d.byteLength;this._done=t._progressiveDone,this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!r,KS(u)&&(this._filename=u),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class fq extends qx{constructor(t,n,r){super(t,n,r);oe(this,"onDone",null);oe(this,"_begin",-1);oe(this,"_done",!1);oe(this,"_queuedChunk",null);oe(this,"_requests",[]);this._begin=n}_enqueue(t){var n;if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(n=this.onDone)==null||n.call(this)}}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onDone)==null||n.call(this)}}function mq(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let f=u(t);return f=unescape(f),f=d(f),f=h(f),i(f)}if(t=a(s),t){const f=h(t);return i(f)}if(t=n("filename","i").exec(s),t){t=t[1];let f=u(t);return f=h(f),i(f)}function n(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function r(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const w=new TextDecoder(f,{fatal:!0}),v=zx(g);g=w.decode(v),e=!1}catch{}}return g}function i(f){return e&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),e&&(f=r("iso-8859-1",f))),f}function a(f){const g=[];let w;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=v.exec(f))!==null;){let[,C,S,I]=w;if(C=parseInt(C,10),C in g){if(C===0)break;continue}g[C]=[S,I]}const F=[];for(let C=0;C<g.length&&C in g;++C){let[S,I]=g[C];I=u(I),S&&(I=unescape(I),C===0&&(I=d(I))),F.push(I)}return F.join("")}function u(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let w=0;w<g.length;++w){const v=g[w].indexOf('"');v!==-1&&(g[w]=g[w].slice(0,v),g.length=w+1),g[w]=g[w].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function d(f){const g=f.indexOf("'");if(g===-1)return f;const w=f.slice(0,g),F=f.slice(g+1).replace(/^[^']*'/,"");return r(w,F)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,w,v,F){if(v==="q"||v==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,S){return String.fromCharCode(parseInt(S,16))}),r(w,F);try{F=atob(F)}catch{}return r(w,F)})}return""}function UL(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function Qx(s){var e;return((e=URL.parse(s))==null?void 0:e.origin)??null}function VL({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(s.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function $L(s){const e=s.get("Content-Disposition");if(e){let t=mq(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(KS(t))return t}return null}function Kx(s,e){return new I1(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function zL(s,e){if(s!==e)throw new Error(`Expected range response-origin "${s}" to match "${e}".`)}function HL(s,e,t,n){return fetch(s,{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"})}function WL(s,e){if(s!==200&&s!==206)throw Kx(s,e)}function GL(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Xe(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class gq extends Wx{constructor(t){super(t,yq,wq);oe(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(t.url),this.headers=UL(this.isHttp,t.httpHeaders)}}class yq extends Gx{constructor(t){super(t);oe(this,"_abortController",new AbortController);oe(this,"_reader",null);const{disableRange:n,disableStream:r,length:i,rangeChunkSize:a,url:u,withCredentials:d}=t._source;this._contentLength=i,this._isStreamingSupported=!r,this._isRangeSupported=!n;const h=new Headers(t.headers);HL(u,h,d,this._abortController).then(f=>{t._responseOrigin=Qx(f.url),WL(f.status,u),this._reader=f.body.getReader();const g=f.headers,{allowRangeRequests:w,suggestedLength:v}=VL({responseHeaders:g,isHttp:t.isHttp,rangeChunkSize:a,disableRange:n});this._isRangeSupported=w,this._contentLength=v||this._contentLength,this._filename=$L(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new id("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var r;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:GL(t),done:!1})}cancel(t){var n;(n=this._reader)==null||n.cancel(t),this._abortController.abort()}}class wq extends qx{constructor(t,n,r){super(t,n,r);oe(this,"_abortController",new AbortController);oe(this,"_readCapability",Promise.withResolvers());oe(this,"_reader",null);const{url:i,withCredentials:a}=t._source,u=new Headers(t.headers);u.append("Range",`bytes=${n}-${r-1}`),HL(i,u,a,this._abortController).then(d=>{const h=Qx(d.url);zL(h,t._responseOrigin),WL(d.status,i),this._reader=d.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:{value:GL(t),done:!1}}cancel(t){var n;(n=this._reader)==null||n.cancel(t),this._abortController.abort()}}const nb=200,YR=206;function vq(s){return typeof s!="string"?s:zx(s).buffer}var bo,xm,qL,QL;class Aq extends Wx{constructor(t){super(t,xq,_q);T(this,xm);T(this,bo,new WeakMap);oe(this,"_responseOrigin",null);this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=UL(this.isHttp,t.httpHeaders)}_request(t){const n=new XMLHttpRequest,r={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};c(this,bo).set(n,r),n.open("GET",this.url),n.withCredentials=this._source.withCredentials;for(const[i,a]of this.headers)n.setRequestHeader(i,a);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.validateStatus=i=>i===YR||i===nb):r.validateStatus=i=>i===nb,n.responseType="arraybuffer",St(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>t.onError(n.status),n.onreadystatechange=P(this,xm,QL).bind(this,n),n.onprogress=P(this,xm,qL).bind(this,n),n.send(null),n}_abortRequest(t){c(this,bo).has(t)&&(c(this,bo).delete(t),t.abort())}getRangeReader(t,n){const r=super.getRangeReader(t,n);return r&&(r.onClosed=()=>this._rangeReaders.delete(r)),r}}bo=new WeakMap,xm=new WeakSet,qL=function(t,n){var i;const r=c(this,bo).get(t);(i=r==null?void 0:r.onProgress)==null||i.call(r,n)},QL=function(t,n){const r=c(this,bo).get(t);if(!r||(t.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),t.readyState!==4)||!c(this,bo).has(t))return;if(c(this,bo).delete(t),t.status===0&&this.isHttp){r.onError(t.status);return}const i=t.status||nb;if(!r.validateStatus(i)){r.onError(t.status);return}const a=vq(t.response);if(i===YR){const u=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(u)?r.onDone(a):(Xe('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone(a):r.onError(t.status)};var Qo,KL,XL,YL,JL;class xq extends Gx{constructor(t){super(t);T(this,Qo);oe(this,"_cachedChunks",[]);oe(this,"_done",!1);oe(this,"_requests",[]);oe(this,"_storedError",null);const{length:n}=t._source;this._contentLength=n,this._fullRequestXhr=t._request({onHeadersReceived:P(this,Qo,KL).bind(this),onDone:P(this,Qo,XL).bind(this),onError:P(this,Qo,YL).bind(this),onProgress:P(this,Qo,JL).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}Qo=new WeakSet,KL=function(){const t=this._stream,{disableRange:n,rangeChunkSize:r}=t._source,i=this._fullRequestXhr;t._responseOrigin=Qx(i.responseURL);const a=i.getAllResponseHeaders(),u=new Headers(a?a.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[g,...w]=f.split(": ");return[g,w.join(": ")]}):[]),{allowRangeRequests:d,suggestedLength:h}=VL({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:r,disableRange:n});d&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=$L(u),this._isRangeSupported&&t._abortRequest(i),this._headersCapability.resolve()},XL=function(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}},YL=function(t){this._storedError=Kx(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},JL=function(t){var n;(n=this.onProgress)==null||n.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})};var mc,ZL,eO,BC;class _q extends qx{constructor(t,n,r){super(t,n,r);T(this,mc);oe(this,"onClosed",null);oe(this,"_done",!1);oe(this,"_queuedChunk",null);oe(this,"_requests",[]);oe(this,"_storedError",null);this._requestXhr=t._request({begin:n,end:r,onHeadersReceived:P(this,mc,ZL).bind(this),onDone:P(this,mc,eO).bind(this),onError:P(this,mc,BC).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){var n;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(n=this.onClosed)==null||n.call(this)}}mc=new WeakSet,ZL=function(){var n;const t=Qx((n=this._requestXhr)==null?void 0:n.responseURL);try{zL(t,this._stream._responseOrigin)}catch(r){this._storedError=r,P(this,mc,BC).call(this,0)}},eO=function(t){var n;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onClosed)==null||n.call(this)},BC=function(t){this._storedError??(this._storedError=Kx(t,this._stream.url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const Eq=/^[a-z][a-z0-9\-+.]+:/i;function bq(s){if(Eq.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}function tO(s){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(s):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(s)}function nO(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Xe(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class Cq extends Wx{constructor(e){super(e,Fq,Sq),this.url=bq(e.url),St(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class Fq extends Gx{constructor(t){super(t);oe(this,"_reader",null);const{disableRange:n,disableStream:r,length:i,rangeChunkSize:a}=t._source;this._contentLength=i,this._isStreamingSupported=!r,this._isRangeSupported=!n;const u=t.url,d=process.getBuiltinModule("fs");d.promises.lstat(u).then(h=>{const f=d.createReadStream(u),g=tO(f);this._reader=g.getReader();const{size:w}=h;w<=2*a&&(this._isRangeSupported=!1),this._contentLength=w,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new id("Streaming is disabled.")),this._headersCapability.resolve()}).catch(h=>{h.code==="ENOENT"&&(h=Kx(0,u.href)),this._headersCapability.reject(h)})}async read(){var r;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:nO(t),done:!1})}cancel(t){var n;(n=this._reader)==null||n.cancel(t)}}class Sq extends qx{constructor(t,n,r){super(t,n,r);oe(this,"_readCapability",Promise.withResolvers());oe(this,"_reader",null);const i=t.url,a=process.getBuiltinModule("fs");try{const u=a.createReadStream(i,{start:n,end:r-1}),d=tO(u);this._reader=d.getReader(),this._readCapability.resolve()}catch(u){this._readCapability.reject(u)}}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:{value:nO(t),done:!1}}cancel(t){var n;(n=this._reader)==null||n.cancel(t)}}const bg=Symbol("INITIAL_DATA");var ni,bw,jC;class rO{constructor(){T(this,bw);T(this,ni,Object.create(null))}get(e,t=null){if(t){const r=P(this,bw,jC).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=c(this,ni)[e];if(!n||n.data===bg)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=c(this,ni)[e];return!!t&&t.data!==bg}delete(e){const t=c(this,ni)[e];return!t||t.data===bg?!1:(delete c(this,ni)[e],!0)}resolve(e,t=null){const n=P(this,bw,jC).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in c(this,ni)){const{data:n}=c(this,ni)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}_(this,ni,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,ni)){const{data:t}=c(this,ni)[e];t!==bg&&(yield[e,t])}}}ni=new WeakMap,bw=new WeakSet,jC=function(e){var t;return(t=c(this,ni))[e]||(t[e]={...Promise.withResolvers(),data:bg})};const Tq=1e5,JR=30;var kD,Au,Ps,Cw,Fw,Eh,Bl,Sw,Tw,bh,kw,Sf,xu,Tf,Iw,kf,Ch,Pw,Rw,If,Fh,Dw,Pf,Rf,gc,sO,iO,UC,Ei,jA,VC,aO,oO;const Cr=class Cr{constructor({textContentSource:e,container:t,viewport:n}){T(this,gc);T(this,Au,Promise.withResolvers());T(this,Ps,null);T(this,Cw,!1);T(this,Fw,!!((kD=globalThis.FontInspector)!=null&&kD.enabled));T(this,Eh,null);T(this,Bl,null);T(this,Sw,0);T(this,Tw,0);T(this,bh,null);T(this,kw,null);T(this,Sf,0);T(this,xu,0);T(this,Tf,Object.create(null));T(this,Iw,[]);T(this,kf,null);T(this,Ch,[]);T(this,Pw,new WeakMap);T(this,Rw,null);var d;if(e instanceof ReadableStream)_(this,kf,e);else if(typeof e=="object")_(this,kf,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');_(this,Ps,_(this,kw,t)),_(this,xu,n.scale*qo.pixelRatio),_(this,Sf,n.rotation),_(this,Bl,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:a,pageY:u}=n.rawDims;_(this,Rw,[1,0,0,-1,-a,u+i]),_(this,Tw,r),_(this,Sw,i),P(d=Cr,Ei,aO).call(d),t.style.setProperty("--min-font-size",c(Cr,Pf)),wp(t,n),c(this,Au).promise.finally(()=>{c(Cr,Rf).delete(this),_(this,Bl,null),_(this,Tf,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=ar.platform;return Ye(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,bh).read().then(({value:t,done:n})=>{if(n){c(this,Au).resolve();return}c(this,Eh)??_(this,Eh,t.lang),Object.assign(c(this,Tf),t.styles),P(this,gc,sO).call(this,t.items),e()},c(this,Au).reject)};return _(this,bh,c(this,kf).getReader()),c(Cr,Rf).add(this),e(),c(this,Au).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*qo.pixelRatio,r=e.rotation;if(r!==c(this,Sf)&&(t==null||t(),_(this,Sf,r),wp(c(this,kw),{rotation:r})),n!==c(this,xu)){t==null||t(),_(this,xu,n);const a={div:null,properties:null,ctx:P(i=Cr,Ei,jA).call(i,c(this,Eh))};for(const u of c(this,Ch))a.properties=c(this,Pw).get(u),a.div=u,P(this,gc,UC).call(this,a)}}cancel(){var t;const e=new id("TextLayer task cancelled.");(t=c(this,bh))==null||t.cancel(e).catch(()=>{}),_(this,bh,null),c(this,Au).reject(e)}get textDivs(){return c(this,Ch)}get textContentItemsStr(){return c(this,Iw)}static cleanup(){if(!(c(this,Rf).size>0)){c(this,If).clear();for(const{canvas:e}of c(this,Fh).values())e.remove();c(this,Fh).clear()}}};Au=new WeakMap,Ps=new WeakMap,Cw=new WeakMap,Fw=new WeakMap,Eh=new WeakMap,Bl=new WeakMap,Sw=new WeakMap,Tw=new WeakMap,bh=new WeakMap,kw=new WeakMap,Sf=new WeakMap,xu=new WeakMap,Tf=new WeakMap,Iw=new WeakMap,kf=new WeakMap,Ch=new WeakMap,Pw=new WeakMap,Rw=new WeakMap,If=new WeakMap,Fh=new WeakMap,Dw=new WeakMap,Pf=new WeakMap,Rf=new WeakMap,gc=new WeakSet,sO=function(e){var r,i;if(c(this,Cw))return;(i=c(this,Bl)).ctx??(i.ctx=P(r=Cr,Ei,jA).call(r,c(this,Eh)));const t=c(this,Ch),n=c(this,Iw);for(const a of e){if(t.length>Tq){Xe("Ignoring additional textDivs for performance reasons."),_(this,Cw,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const u=c(this,Ps);_(this,Ps,document.createElement("span")),c(this,Ps).classList.add("markedContent"),a.id&&c(this,Ps).setAttribute("id",`${a.id}`),a.tag==="Artifact"&&(c(this,Ps).ariaHidden=!0),u.append(c(this,Ps))}else a.type==="endMarkedContent"&&_(this,Ps,c(this,Ps).parentNode);continue}n.push(a.str),P(this,gc,iO).call(this,a)}},iO=function(e){var F;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Ch).push(t);const r=Te.transform(c(this,Rw),e.transform);let i=Math.atan2(r[1],r[0]);const a=c(this,Tf)[e.fontName];a.vertical&&(i+=Math.PI/2);let u=c(this,Fw)&&a.fontSubstitution||a.fontFamily;u=Cr.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),h=d*P(F=Cr,Ei,oO).call(F,u,a,c(this,Eh));let f,g;i===0?(f=r[4],g=r[5]-h):(f=r[4]+h*Math.sin(i),g=r[5]-h*Math.cos(i));const w=t.style;w.left=`${(100*f/c(this,Tw)).toFixed(2)}%`,w.top=`${(100*g/c(this,Sw)).toFixed(2)}%`,w.setProperty("--font-height",`${d.toFixed(2)}px`),w.fontFamily=u,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,Fw)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),S=Math.abs(e.transform[3]);C!==S&&Math.max(C,S)/Math.min(C,S)>1.5&&(v=!0)}if(v&&(n.canvasWidth=a.vertical?e.height:e.width),c(this,Pw).set(t,n),c(this,Bl).div=t,c(this,Bl).properties=n,P(this,gc,UC).call(this,c(this,Bl)),n.hasText&&c(this,Ps).append(t),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),c(this,Ps).append(C)}},UC=function(e){var a;const{div:t,properties:n,ctx:r}=e,{style:i}=t;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=i,{canvasWidth:d,fontSize:h}=n;P(a=Cr,Ei,VC).call(a,r,h*c(this,xu),u);const{width:f}=r.measureText(t.textContent);f>0&&i.setProperty("--scale-x",d*c(this,xu)/f)}n.angle!==0&&i.setProperty("--rotate",`${n.angle}deg`)},Ei=new WeakSet,jA=function(e=null){let t=c(this,Fh).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Fh).set(e,t),c(this,Dw).set(t,{size:0,family:""})}return t},VC=function(e,t,n){const r=c(this,Dw).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},aO=function(){if(c(this,Pf)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),_(this,Pf,e.getBoundingClientRect().height),e.remove()},oO=function(e,t,n){const r=c(this,If).get(e);if(r)return r;const i=P(this,Ei,jA).call(this,n);i.canvas.width=i.canvas.height=JR,P(this,Ei,VC).call(this,i,JR,e);const a=i.measureText(""),u=a.fontBoundingBoxAscent,d=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let h=.8;return u?h=u/(u+d):(ar.platform.isFirefox&&Xe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),c(this,If).set(e,h),h},T(Cr,Ei),T(Cr,If,new Map),T(Cr,Fh,new Map),T(Cr,Dw,new WeakMap),T(Cr,Pf,null),T(Cr,Rf,new Set);let Cy=Cr;const kq=100;function Xx(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new $C,{docId:t}=e,n=s.url?OG(s.url):null,r=s.data?BG(s.data):null,i=s.httpHeaders||null,a=s.withCredentials===!0,u=s.password??null,d=s.range instanceof lO?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let f=s.worker instanceof Fy?s.worker:null;const g=s.verbosity,w=typeof s.docBaseUrl=="string"&&!Hx(s.docBaseUrl)?s.docBaseUrl:null,v=aA(s.cMapUrl),F=s.cMapPacked!==!1,C=s.CMapReaderFactory||(ds?GG:LR),S=aA(s.iccUrl),I=aA(s.standardFontDataUrl),O=s.StandardFontDataFactory||(ds?qG:OR),R=aA(s.wasmUrl),B=s.WasmFactory||(ds?QG:BR),z=s.stopAtErrors!==!0,W=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,D=s.isEvalSupported!==!1,N=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!ds,L=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!ds&&(ar.platform.isFirefox||!globalThis.chrome),V=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,$=typeof s.disableFontFace=="boolean"?s.disableFontFace:ds,K=s.fontExtraProperties===!0,U=s.enableXfa===!0,me=s.ownerDocument||globalThis.document,Ae=s.disableRange===!0,we=s.disableStream===!0,fe=s.disableAutoFetch===!0,le=s.pdfBug===!0,Z=s.CanvasFactory||(ds?WG:$G),J=s.FilterFactory||(ds?HG:zG),H=s.enableHWA===!0,Q=s.useWasm!==!1,ae=d?d.length:s.length??NaN,ye=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!ds&&!$,xe=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(C===LR&&O===OR&&B===BR&&v&&I&&R&&Mg(v,document.baseURI)&&Mg(I,document.baseURI)&&Mg(R,document.baseURI)),Ee=null;uG(g);const Se={canvasFactory:new Z({ownerDocument:me,enableHWA:H}),filterFactory:new J({docId:t,ownerDocument:me}),cMapReaderFactory:xe?null:new C({baseUrl:v,isCompressed:F}),standardFontDataFactory:xe?null:new O({baseUrl:I}),wasmFactory:xe?null:new B({baseUrl:R})};f||(f=Fy.create({verbosity:g,port:No.workerPort}),e._worker=f);const Ue={docId:t,apiVersion:"5.4.624",data:r,password:u,disableAutoFetch:fe,rangeChunkSize:h,length:ae,docBaseUrl:w,enableXfa:U,evaluatorOptions:{maxImageSize:W,disableFontFace:$,ignoreErrors:z,isEvalSupported:D,isOffscreenCanvasSupported:N,isImageDecoderSupported:L,canvasMaxAreaInBytes:V,fontExtraProperties:K,useSystemFonts:ye,useWasm:Q,useWorkerFetch:xe,cMapUrl:v,iccUrl:S,standardFontDataUrl:I,wasmUrl:R}},Ce={ownerDocument:me,pdfBug:le,styleElement:Ee,enableHWA:H,loadingParams:{disableAutoFetch:fe,enableXfa:U}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Me=f.messageHandler.sendWithPromise("GetDocRequest",Ue,r?[r.buffer]:null);let st;if(d)st=new hq({pdfDataRangeTransport:d,disableRange:Ae,disableStream:we});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Et=Mg(n)?gq:ds?Cq:Aq;st=new Et({url:n,length:ae,httpHeaders:i,withCredentials:a,rangeChunkSize:h,disableRange:Ae,disableStream:we})}return Me.then(Et=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Lt=new zg(t,Et,f.port),yn=new Rq(Lt,e,st,Ce,Se);e._transport=yn,Lt.send("Ready",null)})}).catch(e._capability.reject),e}var Z1;const ex=class ex{constructor(){oe(this,"_capability",Promise.withResolvers());oe(this,"_transport",null);oe(this,"_worker",null);oe(this,"docId",`d${er(ex,Z1)._++}`);oe(this,"destroyed",!1);oe(this,"onPassword",null);oe(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Z1=new WeakMap,T(ex,Z1,0);let $C=ex;var Sh,Nw,Mw,Lw,Ow;class lO{constructor(e,t,n=!1,r=null){T(this,Sh,Promise.withResolvers());T(this,Nw,[]);T(this,Mw,[]);T(this,Lw,[]);T(this,Ow,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){c(this,Ow).push(e)}addProgressListener(e){c(this,Lw).push(e)}addProgressiveReadListener(e){c(this,Mw).push(e)}addProgressiveDoneListener(e){c(this,Nw).push(e)}onDataRange(e,t){for(const n of c(this,Ow))n(e,t)}onDataProgress(e,t){c(this,Sh).promise.then(()=>{for(const n of c(this,Lw))n(e,t)})}onDataProgressiveRead(e){c(this,Sh).promise.then(()=>{for(const t of c(this,Mw))t(e)})}onDataProgressiveDone(){c(this,Sh).promise.then(()=>{for(const e of c(this,Nw))e()})}transportReady(){c(this,Sh).resolve()}requestDataRange(e,t){Tt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Sh=new WeakMap,Nw=new WeakMap,Mw=new WeakMap,Lw=new WeakMap,Ow=new WeakMap;class Iq{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ye(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var jl,Bw,Th,Qg;class Pq{constructor(e,t,n,r=!1){T(this,Th);T(this,jl,!1);T(this,Bw,by.instance);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new kR:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new rO,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new V0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ye(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:i=Qc.ENABLE,transform:a=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:w=!1,recordOperations:v=!1,operationsFilter:F=null}){var L,V,$;(L=this._stats)==null||L.time("Overall");const C=this._transport.getRenderingIntent(r,i,g,w),{renderingIntent:S,cacheKey:I}=C;_(this,jl,!1),d||(d=this._transport.getOptionalContentConfig(S));let O=this._intentStates.get(I);O||(O=Object.create(null),this._intentStates.set(I,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const R=!!(S&yi.PRINT);O.displayReadyCapability||(O.displayReadyCapability=Promise.withResolvers(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(V=this._stats)==null||V.time("Page Request"),this._pumpOperatorList(C));const B=!!(this._pdfBug&&(($=globalThis.StepperManager)!=null&&$.enabled)),z=!this.recordedBBoxes&&(v||B),W=K=>{var U,me;if(O.renderTasks.delete(D),z){const Ae=(U=D.gfx)==null?void 0:U.dependencyTracker.take();Ae&&(D.stepper&&D.stepper.setOperatorBBoxes(Ae,D.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=Ae))}R&&_(this,jl,!0),P(this,Th,Qg).call(this),K?(D.capability.reject(K),this._abortOperatorList({intentState:O,reason:K instanceof Error?K:new Error(K)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(me=globalThis.Stats)!=null&&me.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new zC({callback:W,params:{canvas:t,canvasContext:e,dependencyTracker:z?new XG(t,O.operatorList.length,B):null,viewport:n,transform:a,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:F});(O.renderTasks||(O.renderTasks=new Set)).add(D);const N=D.task;return Promise.all([O.displayReadyCapability.promise,d]).then(([K,U])=>{var me;if(this.destroyed){W();return}if((me=this._stats)==null||me.time("Rendering"),!(U.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:K,optionalContentConfig:U}),D.operatorListChanged()}).catch(W),N}getOperatorList({intent:e="display",annotationMode:t=Qc.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var h;function i(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const a=this._transport.getRenderingIntent(e,t,n,r,!0);let u=this._intentStates.get(a.cacheKey);u||(u=Object.create(null),this._intentStates.set(a.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=i,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(a)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:c(this,Bw).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ey.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function i(){a.read().then(function({value:d,done:h}){if(h){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),i()},r)}const a=t.getReader(),u={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),_(this,jl,!1),Promise.all(e)}cleanup(e=!1){_(this,jl,!0);const t=P(this,Th,Qg).call(this);return e&&t&&this._stats&&(this._stats=new kR),t}_startRenderPage(e,t){var r,i;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&P(this,Th,Qg).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:i,transfer:a}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:c(this,Bw).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},a).getReader(),h=this._intentStates.get(t);h.streamReader=d;const f=()=>{d.read().then(({value:g,done:w})=>{if(w){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const w of h.renderTasks)w.operatorListChanged();P(this,Th,Qg).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof QS){let r=kq;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new id(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}jl=new WeakMap,Bw=new WeakMap,Th=new WeakSet,Qg=function(){if(!c(this,jl)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_(this,jl,!1),!0};var _u,Aa,Ul,kh,tx,Ih,Ph,ps,UA,cO,uO,Kg,Df,VA;const hn=class hn{constructor({name:e=null,port:t=null,verbosity:n=dG()}={}){T(this,ps);T(this,_u,Promise.withResolvers());T(this,Aa,null);T(this,Ul,null);T(this,kh,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(c(hn,Ph).has(t))throw new Error("Cannot use more than one PDFWorker per port.");c(hn,Ph).set(t,this),P(this,ps,cO).call(this,t)}else P(this,ps,uO).call(this)}get promise(){return c(this,_u).promise}get port(){return c(this,Ul)}get messageHandler(){return c(this,Aa)}destroy(){var e,t;this.destroyed=!0,(e=c(this,kh))==null||e.terminate(),_(this,kh,null),c(hn,Ph).delete(c(this,Ul)),_(this,Ul,null),(t=c(this,Aa))==null||t.destroy(),_(this,Aa,null)}static create(e){const t=c(this,Ph).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new hn(e)}static get workerSrc(){if(No.workerSrc)return No.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ye(this,"_setupFakeWorkerGlobal",(async()=>c(this,Df,VA)?c(this,Df,VA):(await import(this.workerSrc)).WorkerMessageHandler)())}};_u=new WeakMap,Aa=new WeakMap,Ul=new WeakMap,kh=new WeakMap,tx=new WeakMap,Ih=new WeakMap,Ph=new WeakMap,ps=new WeakSet,UA=function(){c(this,_u).resolve(),c(this,Aa).send("configure",{verbosity:this.verbosity})},cO=function(e){_(this,Ul,e),_(this,Aa,new zg("main","worker",e)),c(this,Aa).on("ready",()=>{}),P(this,ps,UA).call(this)},uO=function(){if(c(hn,Ih)||c(hn,Df,VA)){P(this,ps,Kg).call(this);return}let{workerSrc:e}=hn;try{hn._isSameOrigin(window.location,e)||(e=hn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new zg("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?c(this,_u).reject(new Error("Worker was destroyed")):P(this,ps,Kg).call(this)},i=new AbortController;t.addEventListener("error",()=>{c(this,kh)||r()},{signal:i.signal}),n.on("test",u=>{if(i.abort(),this.destroyed||!u){r();return}_(this,Aa,n),_(this,Ul,t),_(this,kh,t),P(this,ps,UA).call(this)}),n.on("ready",u=>{if(i.abort(),this.destroyed){r();return}try{a()}catch{P(this,ps,Kg).call(this)}});const a=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};a();return}catch{$x("The worker has been disabled.")}P(this,ps,Kg).call(this)},Kg=function(){c(hn,Ih)||(Xe("Setting up fake worker."),_(hn,Ih,!0)),hn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){c(this,_u).reject(new Error("Worker was destroyed"));return}const t=new VG;_(this,Ul,t);const n=`fake${er(hn,tx)._++}`,r=new zg(n+"_worker",n,t);e.setup(r,t),_(this,Aa,new zg(n,n+"_worker",t)),P(this,ps,UA).call(this)}).catch(e=>{c(this,_u).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Df=new WeakSet,VA=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},T(hn,Df),T(hn,tx,0),T(hn,Ih,!1),T(hn,Ph,new WeakMap),ds&&(_(hn,Ih,!0),No.workerSrc||(No.workerSrc="./pdf.worker.mjs")),hn._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},hn._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},hn.fromPort=e=>{if(EG("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return hn.create(e)};let Fy=hn;var ri,Vl,$l,Qi,Eu,Nf,zl,Rs,_i,dO,Xg,$A;class Rq{constructor(e,t,n,r,i){T(this,_i);oe(this,"downloadInfoCapability",Promise.withResolvers());T(this,ri,null);T(this,Vl,new Map);T(this,$l,null);T(this,Qi,new Map);T(this,Eu,new Map);T(this,Nf,new Map);T(this,zl,null);T(this,Rs,by.instance);this.messageHandler=e,this.loadingTask=t,_(this,$l,n),this.commonObjs=new rO,this.fontLoader=new NG({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),c(this,Rs).addListener(P(this,_i,dO).bind(this))}get annotationStorage(){return Ye(this,"annotationStorage",new XS)}getRenderingIntent(e,t=Qc.ENABLE,n=null,r=!1,i=!1){let a=yi.DISPLAY,u=EC;switch(e){case"any":a=yi.ANY;break;case"display":break;case"print":a=yi.PRINT;break;default:Xe(`getRenderingIntent - invalid intent: ${e}`)}const d=a&yi.PRINT&&n instanceof IL?n:this.annotationStorage;switch(t){case Qc.DISABLE:a+=yi.ANNOTATIONS_DISABLE;break;case Qc.ENABLE:break;case Qc.ENABLE_FORMS:a+=yi.ANNOTATIONS_FORMS;break;case Qc.ENABLE_STORAGE:a+=yi.ANNOTATIONS_STORAGE,u=d.serializable;break;default:Xe(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=yi.IS_EDITING),i&&(a+=yi.OPLIST);const{ids:h,hash:f}=d.modifiedIds,g=[a,u.hash,f];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,zl))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,Qi).values())e.push(r._destroy());c(this,Qi).clear(),c(this,Eu).clear(),c(this,Nf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Vl).clear(),this.filterFactory.destroy(),Cy.cleanup(),(r=c(this,$l))==null||r.cancelAllRequests(new id("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{St(c(this,$l),"GetReader - no `BasePDFStream` instance available."),_(this,ri,c(this,$l).getFullReader()),c(this,ri).onProgress=i=>P(this,_i,$A).call(this,i),r.onPull=()=>{c(this,ri).read().then(function({value:i,done:a}){if(a){r.close();return}St(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{c(this,ri).cancel(i),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{await c(this,ri).headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:a}=c(this,ri);return r&&i&&(c(this,ri).onProgress=null),{isStreamingSupported:r,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(n,r)=>{St(c(this,$l),"GetRangeReader - no `BasePDFStream` instance available.");const i=c(this,$l).getRangeReader(n.begin,n.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:a,done:u}){if(u){r.close();return}St(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{i.cancel(a),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:n})=>{c(this,Rs).pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new Iq(n,this))}),e.on("DocException",n=>{t._capability.reject(Cs(n))}),e.on("PasswordRequest",n=>{_(this,zl,Promise.withResolvers());try{if(!t.onPassword)throw Cs(n);const r=i=>{i instanceof Error?c(this,zl).reject(i):c(this,zl).resolve({password:i})};t.onPassword(r,n.code)}catch(r){c(this,zl).reject(r)}return c(this,zl).promise}),e.on("DataLoaded",n=>{P(this,_i,$A).call(this,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,Qi).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,i])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in i){const w=i.error;Xe(`Error during font loading: ${w}`),this.commonObjs.resolve(n,w);break}const u=new bC(i),d=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(w,v)=>globalThis.FontInspector.fontAdded(w,v):null,h=new MG(u,d,i.extra,i.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:f}=i;St(f,"The imageRef must be defined.");for(const w of c(this,Qi).values())for(const[,v]of w.objs)if((v==null?void 0:v.ref)===f)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new LG(i));break;case"Image":this.commonObjs.resolve(n,i);break;case"Pattern":const g=new CC(i);this.commonObjs.resolve(n,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,i,a])=>{var d;if(this.destroyed)return;const u=c(this,Qi).get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=a==null?void 0:a.bitmap)==null||d.close();return}switch(i){case"Image":case"Pattern":u.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{this.destroyed||P(this,_i,$A).call(this,n)}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Xe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=c(this,ri))==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>c(this,Rs).pagesNumber)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=c(this,Rs).getPageId(e)-1,r=c(this,Eu).get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&c(this,Nf).set(a.refStr,n);const u=new Pq(t,a,this,this._params.pdfBug);return c(this,Qi).set(t,u),u});return c(this,Eu).set(t,i),i}async getPageIndex(e){if(!FC(e))throw new Error("Invalid pageIndex request.");const t=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return c(this,Rs).getPageNumber(t+1)-1}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c(this,Rs).getPageId(e+1)-1,intent:t})}getFieldObjects(){return P(this,_i,Xg).call(this,"GetFieldObjects")}hasJSActions(){return P(this,_i,Xg).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return P(this,_i,Xg).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c(this,Rs).getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c(this,Rs).getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return P(this,_i,Xg).call(this,"GetOptionalContentConfig").then(t=>new dq(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Vl).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,a;return{info:r[0],metadata:r[1]?new cq(r[1]):null,contentDispositionFilename:((i=c(this,ri))==null?void 0:i.filename)??null,contentLength:((a=c(this,ri))==null?void 0:a.contentLength)??null,hasStructTree:r[2]}});return c(this,Vl).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,Qi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Vl).clear(),this.filterFactory.destroy(!0),Cy.cleanup()}}cachedPageNumber(e){if(!FC(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,n=c(this,Nf).get(t);return n>=0?c(this,Rs).getPageNumber(n+1):null}}ri=new WeakMap,Vl=new WeakMap,$l=new WeakMap,Qi=new WeakMap,Eu=new WeakMap,Nf=new WeakMap,zl=new WeakMap,Rs=new WeakMap,_i=new WeakSet,dO=function(){const e=new Map,t=new Map;for(let n=0,r=c(this,Rs).pagesNumber;n<r;n++){const i=c(this,Rs).getPrevPageNumber(n+1)-1,a=c(this,Qi).get(i);a&&e.set(n,a);const u=c(this,Eu).get(i);u&&t.set(n,u)}_(this,Qi,e),_(this,Eu,t)},Xg=function(e,t=null){const n=c(this,Vl).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return c(this,Vl).set(e,r),r},$A=function({loaded:e,total:t}){var n,r;(r=(n=this.loadingTask).onProgress)==null||r.call(n,{loaded:e,total:t,percent:Pr(Math.round(e/t*100),0,100)})};class Dq{constructor(e){oe(this,"_internalRenderTask",null);oe(this,"onContinue",null);oe(this,"onError",null);this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this._internalRenderTask;return e.form||e.canvas&&(t==null?void 0:t.size)>0}}var bu,Rh;const Hd=class Hd{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:a,pageIndex:u,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:w=null,enableHWA:v=!1,operationsFilter:F=null}){T(this,bu,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=g,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Dq(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=v,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=F}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var d,h;if(this.cancelled)return;if(this._canvas){if(c(Hd,Rh).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(Hd,Rh).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:i,dependencyTracker:a}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new B2(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(e=null,t=0){var n,r,i;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,bu)&&(window.cancelAnimationFrame(c(this,bu)),_(this,bu,null)),c(Hd,Rh).delete(this._canvas),e||(e=new QS(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?_(this,bu,window.requestAnimationFrame(()=>{_(this,bu,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(Hd,Rh).delete(this._canvas),this.callback())))}};bu=new WeakMap,Rh=new WeakMap,T(Hd,Rh,new WeakSet);let zC=Hd;const Nq="5.4.624",Mq="384c6208b";var si,Dh,Mf,rr,jw,Lf,Hl,Uw,Cu,xa,Vw,Ht,HC,WC,GC,Ud,hO,Vc;const Fs=class Fs{constructor({editor:e=null,uiManager:t=null}){T(this,Ht);T(this,si,null);T(this,Dh,null);T(this,Mf);T(this,rr,null);T(this,jw,!1);T(this,Lf,!1);T(this,Hl,null);T(this,Uw);T(this,Cu,null);T(this,xa,null);var n,r;e?(_(this,Lf,!1),_(this,Hl,e)):_(this,Lf,!0),_(this,xa,(e==null?void 0:e._uiManager)||t),_(this,Uw,c(this,xa)._eventBus),_(this,Mf,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((r=c(this,xa))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),c(Fs,Vw)||_(Fs,Vw,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ye(this,"_keyboardManager",new z0([[["Escape","mac+Escape"],Fs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Fs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Fs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Fs.prototype._moveToPrevious],[["Home","mac+Home"],Fs.prototype._moveToBeginning],[["End","mac+End"],Fs.prototype._moveToEnd]]))}renderButton(){const e=_(this,si,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",c(this,Hl)&&(e.ariaControls=`${c(this,Hl).id}_colorpicker_dropdown`);const t=c(this,xa)._signal;e.addEventListener("click",P(this,Ht,Ud).bind(this),{signal:t}),e.addEventListener("keydown",P(this,Ht,GC).bind(this),{signal:t});const n=_(this,Dh,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=c(this,Mf),e.append(n),e}renderMainDropdown(){const e=_(this,rr,P(this,Ht,HC).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===c(this,si)){P(this,Ht,Ud).call(this,e);return}const t=e.target.getAttribute("data-color");t&&P(this,Ht,WC).call(this,t,e)}_moveToNext(e){var t,n;if(!c(this,Ht,Vc)){P(this,Ht,Ud).call(this,e);return}if(e.target===c(this,si)){(t=c(this,rr).firstElementChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=c(this,rr))==null?void 0:t.firstElementChild)||e.target===c(this,si)){c(this,Ht,Vc)&&this._hideDropdownFromKeyboard();return}c(this,Ht,Vc)||P(this,Ht,Ud).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!c(this,Ht,Vc)){P(this,Ht,Ud).call(this,e);return}(t=c(this,rr).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Ht,Vc)){P(this,Ht,Ud).call(this,e);return}(t=c(this,rr).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,rr))==null||e.classList.add("hidden"),c(this,si).ariaExpanded="false",(t=c(this,Cu))==null||t.abort(),_(this,Cu,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,Lf)){if(!c(this,Ht,Vc)){(e=c(this,Hl))==null||e.unselect();return}this.hideDropdown(),c(this,si).focus({preventScroll:!0,focusVisible:c(this,jw)})}}updateColor(e){if(c(this,Dh)&&(c(this,Dh).style.backgroundColor=e),!c(this,rr))return;const t=c(this,xa).highlightColors.values();for(const n of c(this,rr).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=c(this,si))==null||e.remove(),_(this,si,null),_(this,Dh,null),(t=c(this,rr))==null||t.remove(),_(this,rr,null)}};si=new WeakMap,Dh=new WeakMap,Mf=new WeakMap,rr=new WeakMap,jw=new WeakMap,Lf=new WeakMap,Hl=new WeakMap,Uw=new WeakMap,Cu=new WeakMap,xa=new WeakMap,Vw=new WeakMap,Ht=new WeakSet,HC=function(){const e=document.createElement("div"),t=c(this,xa)._signal;e.addEventListener("contextmenu",ra,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,Hl)&&(e.id=`${c(this,Hl).id}_colorpicker_dropdown`);for(const[n,r]of c(this,xa).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",c(Fs,Vw)[n]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=r,i.ariaSelected=r===c(this,Mf),i.addEventListener("click",P(this,Ht,WC).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",P(this,Ht,GC).bind(this),{signal:t}),e},WC=function(e,t){t.stopPropagation(),c(this,Uw).dispatch("switchannotationeditorparams",{source:this,type:pt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},GC=function(e){Fs._keyboardManager.exec(this,e)},Ud=function(e){if(c(this,Ht,Vc)){this.hideDropdown();return}if(_(this,jw,e.detail===0),c(this,Cu)||(_(this,Cu,new AbortController),window.addEventListener("pointerdown",P(this,Ht,hO).bind(this),{signal:c(this,xa).combinedSignal(c(this,Cu))})),c(this,si).ariaExpanded="true",c(this,rr)){c(this,rr).classList.remove("hidden");return}const t=_(this,rr,P(this,Ht,HC).call(this));c(this,si).append(t)},hO=function(e){var t;(t=c(this,rr))!=null&&t.contains(e.target)||this.hideDropdown()},Vc=function(){return c(this,rr)&&!c(this,rr).classList.contains("hidden")},T(Fs,Vw,null);let O1=Fs;var Co,$w,Of,zw;const Wd=class Wd{constructor(e){T(this,Co,null);T(this,$w,null);T(this,Of,null);_(this,$w,e),_(this,Of,e._uiManager),c(Wd,zw)||_(Wd,zw,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,Co))return c(this,Co);const{editorType:e,colorType:t,color:n}=c(this,$w),r=_(this,Co,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",c(Wd,zw)[e]),r.addEventListener("input",()=>{c(this,Of).updateParams(t,r.value)},{signal:c(this,Of)._signal}),r}update(e){c(this,Co)&&(c(this,Co).value=e)}destroy(){var e;(e=c(this,Co))==null||e.remove(),_(this,Co,null)}hideDropdown(){}};Co=new WeakMap,$w=new WeakMap,Of=new WeakMap,zw=new WeakMap,T(Wd,zw,null);let B1=Wd;function ZR(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Cg(s){return Math.max(0,Math.min(255,255*s))}class eD{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Cg(e),[e,e,e]}static G_HTML([e]){const t=ZR(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Cg)}static RGB_HTML(e){return`#${e.map(ZR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[Cg(1-Math.min(1,e+r)),Cg(1-Math.min(1,n+r)),Cg(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,i=1-t,a=1-n,u=Math.min(r,i,a);return["CMYK",r,i,a,u]}}class Lq{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Tt("Abstract method `_createSVG` called.")}}class j1 extends Lq{_createSVG(e){return document.createElementNS(ml,e)}}const Oq=9,Ap=new WeakSet,Bq=new Date().getTimezoneOffset()*60*1e3;class rb{static create(e){switch(e.data.annotationType){case Hn.LINK:return new ZS(e);case Hn.TEXT:return new Uq(e);case Hn.WIDGET:switch(e.data.fieldType){case"Tx":return new Vq(e);case"Btn":return e.data.radioButton?new mO(e):e.data.checkBox?new zq(e):new Hq(e);case"Ch":return new Wq(e);case"Sig":return new $q(e)}return new kp(e);case Hn.POPUP:return new QC(e);case Hn.FREETEXT:return new AO(e);case Hn.LINE:return new qq(e);case Hn.SQUARE:return new Qq(e);case Hn.CIRCLE:return new Kq(e);case Hn.POLYLINE:return new xO(e);case Hn.CARET:return new Yq(e);case Hn.INK:return new eT(e);case Hn.POLYGON:return new Xq(e);case Hn.HIGHLIGHT:return new _O(e);case Hn.UNDERLINE:return new Jq(e);case Hn.SQUIGGLY:return new Zq(e);case Hn.STRIKEOUT:return new eQ(e);case Hn.STAMP:return new EO(e);case Hn.FILEATTACHMENT:return new tQ(e);default:return new En(e)}}}var Nh,Bf,Ki,Hw,qC;const uT=class uT{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){T(this,Hw);T(this,Nh,null);T(this,Bf,!1);T(this,Ki,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return uT._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const e=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:r}=this.data;let i=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let d=0;d<t.length;d+=8)t[d+1]>a?(a=t[d+1],i=t[d+2]):t[d+1]===a&&(i=Math.max(i,t[d+2]));return[i,a]}if((n==null?void 0:n.length)>=1){for(const d of n)for(let h=0,f=d.length;h<f;h+=2)d[h+1]>a?(a=d[h+1],i=d[h]):d[h+1]===a&&(i=Math.max(i,d[h]));if(i!==1/0)return[i,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/n,e[1]=100*(e[1]-a)/r,e}get commentText(){var t,n,r;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${xy}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${xy}${t.id}`,{id:t.id,annotationType:t.annotationType,page:this.parent.page,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=c(this,Ki))==null?void 0:e.popup)||this.popup)==null||t.remove(),_(this,Ki,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(c(this,Nh)||_(this,Nh,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&P(this,Hw,qC).call(this,t);let r=((i=c(this,Ki))==null?void 0:i.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=c(this,Ki).popup),r&&(r.updateEdited(e),n!=null&&n.deleted&&(r.remove(),_(this,Ki,null),this.popup=null))}resetEdited(){var e;c(this,Nh)&&(P(this,Hw,qC).call(this,c(this,Nh).rect),(e=c(this,Ki))==null||e.popup.resetEdited(),_(this,Nh,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof kp)&&!(this instanceof ZS)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof QC){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,i),i}const{width:u,height:d}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(C>0||S>0){const O=`calc(${C}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;a.borderRadius=O}else if(this instanceof mO){const O=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;a.borderRadius=O}switch(t.borderStyle.style){case y2.SOLID:a.borderStyle="solid";break;case y2.DASHED:a.borderStyle="dashed";break;case y2.BEVELED:Xe("Unimplemented border style: beveled");break;case y2.INSET:Xe("Unimplemented border style: inset");break;case y2.UNDERLINE:a.borderBottomStyle="solid";break}const I=t.borderColor||null;I?(_(this,Bf,!0),a.borderColor=Te.makeHexColor(I[0]|0,I[1]|0,I[2]|0)):a.borderWidth=0}const h=Te.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:g,pageX:w,pageY:v}=r.rawDims;a.left=`${100*(h[0]-w)/f}%`,a.top=`${100*(h[1]-v)/g}%`;const{rotation:F}=t;return t.hasOwnCanvas||F===0?(a.width=`${100*u/f}%`,a.height=`${100*d/g}%`):this.setRotation(F,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/n}%`,t.style.height=`${100*a/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const i=r.detail[t],a=i[0],u=i.slice(1);r.target.style[n]=eD[`${a}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:eD[`${a}_rgb`](u)})};return Ye(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const a=n[r];if(a){const u={detail:{[r]:i},target:e};a(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,S,I,O]=e.subarray(2,6);if(r===C&&i===S&&t===I&&n===O)return}const{style:a}=this.container;let u;if(c(this,Bf)){const{borderColor:C,borderWidth:S}=a;a.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const d=r-t,h=i-n,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const w=f.createElement("defs");g.append(w);const v=f.createElement("clipPath"),F=`clippath_${this.data.id}`;v.setAttribute("id",F),v.setAttribute("clipPathUnits","objectBoundingBox"),w.append(v);for(let C=2,S=e.length;C<S;C+=8){const I=e[C],O=e[C+1],R=e[C+2],B=e[C+3],z=f.createElement("rect"),W=(R-t)/d,D=(i-O)/h,N=(I-R)/d,L=(O-B)/h;z.setAttribute("x",W),z.setAttribute("y",D),z.setAttribute("width",N),z.setAttribute("height",L),v.append(z),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${W}" y="${D}" width="${N}" height="${L}"/>`)}c(this,Bf)&&(u.push("</g></svg>')"),a.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${F})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate),_(this,Ki,new QC({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(c(this,Ki)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,Ki)}render(){Tt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:a,exportValues:u}of r){if(i===-1||a===t)continue;const d=typeof u=="string"?u:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Ap.has(h)){Xe(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:d,domElement:h})}return n}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,a=r.getAttribute("data-element-id");a!==t&&Ap.has(r)&&n.push({id:a,exportValue:i,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Nh=new WeakMap,Bf=new WeakMap,Ki=new WeakMap,Hw=new WeakSet,qC=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-u)/i}%`,t.top=`${100*(a-e[3]+d)/a}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)};let En=uT;class jq extends En{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var vi,Vd,pO,fO;class ZS extends En{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});T(this,vi);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(P(this,vi,pO).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(P(this,vi,fO).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(t,n,r=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&P(this,vi,Vd).call(this),r&&(t.title=r)}_bindNamedAction(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(t.title=r),P(this,vi,Vd).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const a=r.get(i);a&&(t[a]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),P(this,vi,Vd).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),P(this,vi,Vd).call(this),!this._fieldObjects){Xe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var g;r==null||r();const{fields:i,refs:a,include:u}=n,d=[];if(i.length!==0||a.length!==0){const w=new Set(a);for(const v of i){const F=this._fieldObjects[v]||[];for(const{id:C}of F)w.add(C)}for(const v of Object.values(this._fieldObjects))for(const F of v)w.has(F.id)===u&&d.push(F)}else for(const w of Object.values(this._fieldObjects))d.push(...w);const h=this.annotationStorage,f=[];for(const w of d){const{id:v}=w;switch(f.push(v),w.type){case"text":{const C=w.defaultValue||"";h.setValue(v,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;h.setValue(v,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";h.setValue(v,{value:C});break}default:continue}const F=document.querySelector(`[data-element-id="${v}"]`);if(F){if(!Ap.has(F)){Xe(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;F.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}vi=new WeakSet,Vd=function(){this.container.setAttribute("data-internal-link","")},pO=function(t,n,r="",i=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:r&&(t.title=r),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,i),!1},P(this,vi,Vd).call(this)},fO=function(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(t.title=r),P(this,vi,Vd).call(this)};class Uq extends En{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class kp extends En{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ar.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,a=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var u;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a)}}))})}_setEventListeners(e,t,n,r){var i,a,u;for(const[d,h]of n)(h==="Action"||(i=this.data.actions)!=null&&i[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,h,r),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Te.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Oq,i=e.style;let a;const u=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u),f=Math.round(h/(XE*r))||1,g=h/f;a=Math.min(r,d(g/XE))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u);a=Math.min(r,d(h/XE))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=Te.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Vq extends kp{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[r]:n})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let u=a.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let h=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const f={userValue:u,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",h??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ap.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:w,timeStep:v}=this.data,F=!!w&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",S=>{e.setValue(t,{value:S.target.value}),this.setPropertyOnSiblings(n,"value",S.target.value,"value"),f.formattedValue=null}),n.addEventListener("resetform",S=>{const I=this.data.defaultFieldValue??"";n.value=f.userValue=I,f.formattedValue=null});let C=S=>{const{formattedValue:I}=f;I!=null&&(S.target.value=I),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",I=>{var R;if(f.focused)return;const{target:O}=I;if(F&&(O.type=w,v&&(O.step=v)),f.userValue){const B=f.userValue;if(F)if(w==="time"){const z=new Date(B),W=[z.getHours(),z.getMinutes(),z.getSeconds()];O.value=W.map(D=>D.toString().padStart(2,"0")).join(":")}else O.value=new Date(B-Bq).toISOString().split(w==="date"?"T":".",1)[0];else O.value=B}f.lastCommittedValue=O.value,f.commitKey=1,(R=this.data.actions)!=null&&R.Focus||(f.focused=!0)}),n.addEventListener("updatefromsandbox",I=>{this.showElementAndHideCanvas(I.target);const O={value(R){f.userValue=R.detail.value??"",F||e.setValue(t,{value:f.userValue.toString()}),R.target.value=f.userValue},formattedValue(R){const{formattedValue:B}=R.detail;f.formattedValue=B,B!=null&&R.target!==document.activeElement&&(R.target.value=B);const z={formattedValue:B};F&&(z.value=B),e.setValue(t,z)},selRange(R){R.target.setSelectionRange(...R.detail.selRange)},charLimit:R=>{var D;const{charLimit:B}=R.detail,{target:z}=R;if(B===0){z.removeAttribute("maxLength");return}z.setAttribute("maxLength",B);let W=f.userValue;!W||W.length<=B||(W=W.slice(0,B),z.value=f.userValue=W,e.setValue(t,{value:W}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:W,willCommit:!0,commitKey:1,selStart:z.selectionStart,selEnd:z.selectionEnd}}))}};this._dispatchEventFromSandbox(O,I)}),n.addEventListener("keydown",I=>{var B;f.commitKey=1;let O=-1;if(I.key==="Escape"?O=0:I.key==="Enter"&&!this.data.multiLine?O=2:I.key==="Tab"&&(f.commitKey=3),O===-1)return;const{value:R}=I.target;f.lastCommittedValue!==R&&(f.lastCommittedValue=R,f.userValue=R,(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:O,selStart:I.target.selectionStart,selEnd:I.target.selectionEnd}}))});const S=C;C=null,n.addEventListener("blur",I=>{var B,z;if(!f.focused||!I.relatedTarget)return;(B=this.data.actions)!=null&&B.Blur||(f.focused=!1);const{target:O}=I;let{value:R}=O;if(F){if(R&&w==="time"){const W=R.split(":").map(D=>parseInt(D,10));R=new Date(2e3,0,1,W[0],W[1],W[2]||0).valueOf(),O.step=""}else R.includes("T")||(R=`${R}T00:00`),R=new Date(R).valueOf();O.type="text"}f.userValue=R,f.lastCommittedValue!==R&&((z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:f.commitKey,selStart:I.target.selectionStart,selEnd:I.target.selectionEnd}})),S(I)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",I=>{var L;f.lastCommittedValue=null;const{data:O,target:R}=I,{value:B,selectionStart:z,selectionEnd:W}=R;let D=z,N=W;switch(I.inputType){case"deleteWordBackward":{const V=B.substring(0,z).match(/\w*[^\w]*$/);V&&(D-=V[0].length);break}case"deleteWordForward":{const V=B.substring(z).match(/^[^\w]*\w*/);V&&(N+=V[0].length);break}case"deleteContentBackward":z===W&&(D-=1);break;case"deleteContentForward":z===W&&(N+=1);break}I.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:B,change:O||"",willCommit:!1,selStart:D,selEnd:N}})}),this._setEventListeners(n,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],I=>I.target.value)}if(C&&n.addEventListener("blur",C),this.data.comb){const I=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${I}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class $q extends kp{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class zq extends kp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Ap.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:u,checked:d}=a.target;for(const h of this._getElementsByName(u,n)){const f=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(n,{value:d})}),i.addEventListener("resetform",a=>{const u=t.defaultFieldValue||"Off";a.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const u={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class mO extends kp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Ap.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:u,checked:d}=a.target;for(const h of this._getElementsByName(u,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:d})}),i.addEventListener("resetform",a=>{const u=t.defaultFieldValue;a.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",u=>{const d={value:h=>{const f=a===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const w=f&&g.id===n;g.domElement&&(g.domElement.checked=w),e.setValue(g.id,{value:w})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Hq extends ZS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class Wq extends kp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Ap.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,n.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),i=!1),r.append(g)}let a=null;if(i){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),a=()=>{f.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const u=f=>{const g=f?"value":"textContent",{options:w,multiple:v}=r;return v?Array.prototype.filter.call(w,F=>F.selected).map(F=>F[g]):w.selectedIndex===-1?null:w[w.selectedIndex][g]};let d=u(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const g={value(w){a==null||a();const v=w.detail.value,F=new Set(Array.isArray(v)?v:[v]);for(const C of r.options)C.selected=F.has(C.value);e.setValue(t,{value:u(!0)}),d=u(!1)},multipleSelection(w){r.multiple=!0},remove(w){const v=r.options,F=w.detail.remove;v[F].selected=!1,r.remove(F),v.length>0&&Array.prototype.findIndex.call(v,S=>S.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},clear(w){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=u(!1)},insert(w){const{index:v,displayValue:F,exportValue:C}=w.detail.insert,S=r.children[v],I=document.createElement("option");I.textContent=F,I.value=C,S?S.before(I):r.append(I),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},items(w){const{items:v}=w.detail;for(;r.length!==0;)r.remove(0);for(const F of v){const{displayValue:C,exportValue:S}=F,I=document.createElement("option");I.textContent=C,I.value=S,r.append(I)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:h(w)}),d=u(!1)},indices(w){const v=new Set(w.detail.indices);for(const F of w.target.options)F.selected=v.has(F.index);e.setValue(t,{value:u(!0)}),d=u(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(g,f)}),r.addEventListener("input",f=>{var v;const g=u(!0),w=u(!1);e.setValue(t,{value:g}),f.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:w,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Ww,KC;class QC extends En{constructor(t){const{data:n,elements:r,parent:i}=t,a=!!i._commentManager;super(t,{isRenderable:!a&&En._hasPopupData(n)});T(this,Ww);if(this.elements=r,a&&En._hasPopupData(n)){const u=this.popup=P(this,Ww,KC).call(this);for(const d of r)d.popup=u}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=P(this,Ww,KC).call(this),r=[];for(const i of this.elements)i.popup=n,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${F2}${i}`).join(",")),this.container}}Ww=new WeakSet,KC=function(){return new Gq({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var ii,Fu,nx,rx,jf,Uf,Sn,Fo,Su,Mh,Vf,$f,So,ai,Wl,Gl,Tn,ql,Tu,Gw,Ql,zf,Lh,ku,hr,Iu,rt,zA,XC,YC,JC,HA,ZC,gO,yO,wO,vO,WA,GA,eF;class Gq{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:i,contentsObj:a,richText:u,parent:d,rect:h,parentRect:f,open:g,commentManager:w=null}){T(this,rt);T(this,ii,null);T(this,Fu,P(this,rt,wO).bind(this));T(this,nx,P(this,rt,eF).bind(this));T(this,rx,P(this,rt,GA).bind(this));T(this,jf,P(this,rt,WA).bind(this));T(this,Uf,null);T(this,Sn,null);T(this,Fo,null);T(this,Su,null);T(this,Mh,null);T(this,Vf,null);T(this,$f,null);T(this,So,!1);T(this,ai,null);T(this,Wl,null);T(this,Gl,null);T(this,Tn,null);T(this,ql,null);T(this,Tu,null);T(this,Gw,null);T(this,Ql,null);T(this,zf,null);T(this,Lh,null);T(this,ku,!1);T(this,hr,null);T(this,Iu,null);_(this,Sn,e),_(this,zf,r),_(this,Fo,a),_(this,Ql,u),_(this,Vf,d),_(this,Uf,t),_(this,Gw,h),_(this,$f,f),_(this,Mh,n),_(this,ii,w),_(this,hr,n[0]),_(this,Su,P1.toDateObject(i)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup()),w||(P(this,rt,zA).call(this),c(this,Sn).hidden=!0,g&&P(this,rt,WA).call(this))}renderCommentButton(){if(c(this,Tn)){c(this,Tn).parentNode||c(this,hr).container.after(c(this,Tn));return}if(c(this,ql)||P(this,rt,XC).call(this),!c(this,ql))return;const{signal:e}=_(this,Wl,new AbortController),t=c(this,hr).hasOwnCommentButton,n=()=>{c(this,ii).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{c(this,ii).toggleCommentPopup(this,!1,!0,!t)},i=()=>{c(this,ii).toggleCommentPopup(this,!1,!1)};if(t){_(this,Tn,c(this,hr).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",c(this,Fu),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=_(this,Tn,document.createElement("button"));a.className="annotationCommentButton";const u=c(this,hr).container;a.style.zIndex=u.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),P(this,rt,JC).call(this),P(this,rt,YC).call(this),a.addEventListener("keydown",c(this,Fu),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),u.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=c(this,hr).commentData;return e?c(this,Vf)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=c(this,Tn))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}=c(this,hr).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}}get elementBeforePopup(){return c(this,Tn)}get comment(){return c(this,Iu)||_(this,Iu,c(this,hr).commentText),c(this,Iu)}set comment(e){e!==this.comment&&(c(this,hr).commentText=_(this,Iu,e))}focus(){var e;(e=c(this,hr).container)==null||e.focus()}get parentBoundingClientRect(){return c(this,hr).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){c(this,Tn)&&(c(this,Tn).classList.toggle("selected",e),c(this,Tn).ariaExpanded=t)}setSelectedCommentButton(e){c(this,Tn).classList.toggle("selected",e)}get commentPopupPosition(){if(c(this,Tu))return c(this,Tu);const{x:e,y:t,height:n}=c(this,Tn).getBoundingClientRect(),{x:r,y:i,width:a,height:u}=c(this,hr).layer.getBoundingClientRect();return[(e-r)/a,(t+n-i)/u]}set commentPopupPosition(e){_(this,Tu,e)}hasDefaultPopupPosition(){return c(this,Tu)===null}get commentButtonPosition(){return c(this,ql)}get commentButtonWidth(){return c(this,Tn).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=c(this,Tu)||this.commentButtonPosition.map(h=>h/100),r=this.parentBoundingClientRect,{x:i,y:a,width:u,height:d}=r;c(this,ii).showDialog(null,this,i+t*u,a+n*d,{...e,parentDimensions:r})}render(){var n,r;if(c(this,ai))return;const e=_(this,ai,document.createElement("div"));if(e.className="popup",c(this,Uf)){const i=e.style.outlineColor=Te.makeHexColor(...c(this,Uf));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=c(this,zf))!=null&&n.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=c(this,zf)}if(e.append(t),c(this,Su)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Su).valueOf()})),i.dateTime=c(this,Su).toISOString(),t.append(i)}qM({html:c(this,rt,HA)||c(this,Fo).str,dir:(r=c(this,Fo))==null?void 0:r.dir,className:"popupContent"},e),c(this,Sn).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var r;if(c(this,ii)){n?(this.remove(),_(this,Iu,null)):t&&(t.deleted?this.remove():(P(this,rt,JC).call(this),_(this,Iu,t.text))),e&&(_(this,ql,null),P(this,rt,XC).call(this),P(this,rt,YC).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}P(this,rt,zA).call(this),c(this,Lh)||_(this,Lh,{contentsObj:c(this,Fo),richText:c(this,Ql)}),e&&_(this,Gl,null),t&&t.text&&(_(this,Ql,P(this,rt,yO).call(this,t.text)),_(this,Su,P1.toDateObject(t.date)),_(this,Fo,null)),(r=c(this,ai))==null||r.remove(),_(this,ai,null)}resetEdited(){var e;c(this,Lh)&&({contentsObj:er(this,Fo)._,richText:er(this,Ql)._}=c(this,Lh),_(this,Lh,null),(e=c(this,ai))==null||e.remove(),_(this,ai,null),_(this,Gl,null))}remove(){var e,t,n;if((e=c(this,Wl))==null||e.abort(),_(this,Wl,null),(t=c(this,ai))==null||t.remove(),_(this,ai,null),_(this,ku,!1),_(this,So,!1),(n=c(this,Tn))==null||n.remove(),_(this,Tn,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){_(this,ku,this.isVisible),c(this,ku)&&(c(this,Sn).hidden=!0)}maybeShow(){c(this,ii)||(P(this,rt,zA).call(this),c(this,ku)&&(c(this,ai)||P(this,rt,GA).call(this),_(this,ku,!1),c(this,Sn).hidden=!1))}get isVisible(){return c(this,ii)?!1:c(this,Sn).hidden===!1}}ii=new WeakMap,Fu=new WeakMap,nx=new WeakMap,rx=new WeakMap,jf=new WeakMap,Uf=new WeakMap,Sn=new WeakMap,Fo=new WeakMap,Su=new WeakMap,Mh=new WeakMap,Vf=new WeakMap,$f=new WeakMap,So=new WeakMap,ai=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,Tn=new WeakMap,ql=new WeakMap,Tu=new WeakMap,Gw=new WeakMap,Ql=new WeakMap,zf=new WeakMap,Lh=new WeakMap,ku=new WeakMap,hr=new WeakMap,Iu=new WeakMap,rt=new WeakSet,zA=function(){var t;if(c(this,Wl))return;_(this,Wl,new AbortController);const{signal:e}=c(this,Wl);for(const n of this.trigger)n.addEventListener("click",c(this,jf),{signal:e}),n.addEventListener("pointerenter",c(this,rx),{signal:e}),n.addEventListener("pointerleave",c(this,nx),{signal:e}),n.classList.add("popupTriggerArea");for(const n of c(this,Mh))(t=n.container)==null||t.addEventListener("keydown",c(this,Fu),{signal:e})},XC=function(){const e=c(this,Mh).find(t=>t.hasCommentButton);e&&_(this,ql,e._normalizePoint(e.commentButtonPosition))},YC=function(){if(c(this,hr).extraPopupElement&&!c(this,hr).editor)return;c(this,Tn)||this.renderCommentButton();const[e,t]=c(this,ql),{style:n}=c(this,Tn);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},JC=function(){c(this,hr).extraPopupElement||(c(this,Tn)||this.renderCommentButton(),c(this,Tn).style.backgroundColor=this.commentButtonColor||"")},HA=function(){const e=c(this,Ql),t=c(this,Fo);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,Ql).html||null},ZC=function(){var e,t,n;return((n=(t=(e=c(this,rt,HA))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},gO=function(){var e,t,n;return((n=(t=(e=c(this,rt,HA))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},yO=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,rt,gO),fontSize:c(this,rt,ZC)?`calc(${c(this,rt,ZC)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return n},wO=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,So))&&P(this,rt,WA).call(this)},vO=function(){if(c(this,Gl)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=c(this,Vf);let a=!!c(this,$f),u=a?c(this,$f):c(this,Gw);for(const F of c(this,Mh))if(!u||Te.intersect(F.data.rect,u)!==null){u=F.data.rect,a=!0;break}const d=Te.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),f=a?u[2]-u[0]+5:0,g=d[0]+f,w=d[1];_(this,Gl,[100*(g-r)/t,100*(w-i)/n]);const{style:v}=c(this,Sn);v.left=`${c(this,Gl)[0]}%`,v.top=`${c(this,Gl)[1]}%`},WA=function(){if(c(this,ii)){c(this,ii).toggleCommentPopup(this,!1);return}_(this,So,!c(this,So)),c(this,So)?(P(this,rt,GA).call(this),c(this,Sn).addEventListener("click",c(this,jf)),c(this,Sn).addEventListener("keydown",c(this,Fu))):(P(this,rt,eF).call(this),c(this,Sn).removeEventListener("click",c(this,jf)),c(this,Sn).removeEventListener("keydown",c(this,Fu)))},GA=function(){c(this,ai)||this.render(),this.isVisible?c(this,So)&&c(this,Sn).classList.add("focused"):(P(this,rt,vO).call(this),c(this,Sn).hidden=!1,c(this,Sn).style.zIndex=parseInt(c(this,Sn).style.zIndex)+1e3)},eF=function(){c(this,Sn).classList.remove("focused"),!(c(this,So)||!this.isVisible)&&(c(this,Sn).hidden=!0,c(this,Sn).style.zIndex=parseInt(c(this,Sn).style.zIndex)-1e3)};class AO extends En{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=et.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var qw;class qq extends En{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,qw,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),a=_(this,qw,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,qw)}addHighlightArea(){this.container.classList.add("highlightArea")}}qw=new WeakMap;var Qw;class Qq extends En{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Qw,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,u=_(this,Qw,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",a/2),u.setAttribute("y",a/2),u.setAttribute("width",n-a),u.setAttribute("height",r-a),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),i.append(u),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Qw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qw=new WeakMap;var Kw;class Kq extends En{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Kw,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,u=_(this,Kw,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",r/2),u.setAttribute("rx",n/2-a/2),u.setAttribute("ry",r/2-a/2),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),i.append(u),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Kw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kw=new WeakMap;var Xw;class xO extends En{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Xw,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:i},width:a,height:u}=this;if(!n)return this.container;const d=this.svgFactory.create(a,u,!0);let h=[];for(let g=0,w=n.length;g<w;g+=2){const v=n[g]-t[0],F=t[3]-n[g+1];h.push(`${v},${F}`)}h=h.join(" ");const f=_(this,Xw,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",h),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),d.append(f),this.container.append(d),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return c(this,Xw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xw=new WeakMap;class Xq extends xO{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Yq extends En{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Yw,Oh,Jw,tF;class eT extends En{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Jw);T(this,Yw,null);T(this,Oh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?et.HIGHLIGHT:et.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:u,width:d,height:h}=P(this,Jw,tF).call(this,n,t),f=this.svgFactory.create(d,h,!0),g=_(this,Yw,this.svgFactory.createElement("svg:g"));f.append(g),g.setAttribute("stroke-width",i.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",u);for(let w=0,v=r.length;w<v;w++){const F=this.svgFactory.createElement(this.svgElementName);c(this,Oh).push(F),F.setAttribute("points",r[w].join(",")),g.append(F)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:i}=t,a=c(this,Yw);if(n>=0&&a.setAttribute("stroke-width",n||1),r)for(let u=0,d=c(this,Oh).length;u<d;u++)c(this,Oh)[u].setAttribute("points",r[u].join(","));if(i){const{transform:u,width:d,height:h}=P(this,Jw,tF).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${d} ${h}`),a.setAttribute("transform",u)}}getElementsToTriggerPopup(){return c(this,Oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yw=new WeakMap,Oh=new WeakMap,Jw=new WeakSet,tF=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class _O extends En{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=et.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Jq extends En{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Zq extends En{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class eQ extends En{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class EO extends En{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=et.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Zw,e0,nF;class tQ extends En{constructor(t){var r;super(t,{isRenderable:!0});T(this,e0);T(this,Zw,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",P(this,e0,nF).bind(this)),_(this,Zw,r);const{isMac:i}=ar.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&P(this,e0,nF).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,Zw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zw=new WeakMap,e0=new WeakSet,nF=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Bh,jh,Hf,Pu,t0,Uh,oi,n0,oc,qA,sF;const dT=class dT{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:i,viewport:a,structTreeLayer:u,commentManager:d,linkService:h,annotationStorage:f}){T(this,oc);T(this,Bh,null);T(this,jh,null);T(this,Hf,null);T(this,Pu,new Map);T(this,t0,null);T(this,Uh,null);T(this,oi,[]);T(this,n0,!1);this.div=e,_(this,Bh,t),_(this,jh,n),_(this,t0,u||null),_(this,Uh,h||null),_(this,Hf,f||new XS),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return c(this,Pu).size>0}async render(e){var u;const{annotations:t}=e,n=this.div;wp(n,this.viewport);const r=new Map,i=[],a={data:null,layer:n,linkService:c(this,Uh),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new j1,annotationStorage:c(this,Hf),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const h=d.annotationType===Hn.POPUP;if(h){const w=r.get(d.id);if(!w)continue;if(!this._commentManager){i.push(d);continue}a.elements=w}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;a.data=d;const f=rb.create(a);if(!f.isRenderable)continue;if(!h&&(c(this,oi).push(f),d.popupRef)){const w=r.get(d.popupRef);w?w.push(f):r.set(d.popupRef,[f])}const g=f.render();d.hidden&&(g.style.visibility="hidden"),f._isEditable&&(c(this,Pu).set(f.data.id,f),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(f))}await P(this,oc,qA).call(this);for(const d of i){const h=a.elements=r.get(d.id);a.data=d;const f=rb.create(a);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${F2}${d.id}`,d.hidden&&(g.style.visibility="hidden"),h.at(-1).container.after(g)}P(this,oc,sF).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:c(this,Uh),svgFactory:new j1,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=dT._defaultBorderStyle),t.data=n;const r=rb.create(t);r.isRenderable&&(r.render(),r.contentElement.id=`${F2}${n.id}`,c(this,oi).push(r))}await P(this,oc,qA).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,wp(t,{rotation:e.rotation}),P(this,oc,sF).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Pu).values())}getEditableAnnotation(e){return c(this,Pu).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:r}=e,i=new jq({data:{id:n,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:c(this,Uh),annotationStorage:c(this,Hf)});return i.render(),i.contentElement.id=`${F2}${n}`,i.createOrUpdatePopup(),c(this,oi).push(i),i}removeAnnotation(e){var r;const t=c(this,oi).findIndex(i=>i.data.id===e);if(t<0)return;const[n]=c(this,oi).splice(t,1);(r=c(this,Bh))==null||r.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);P(this,oc,qA).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Ye(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:y2.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Bh=new WeakMap,jh=new WeakMap,Hf=new WeakMap,Pu=new WeakMap,t0=new WeakMap,Uh=new WeakMap,oi=new WeakMap,n0=new WeakMap,oc=new WeakSet,qA=async function(){var n,r,i;if(c(this,oi).length===0)return;this.div.replaceChildren();const e=[];if(!c(this,n0)){_(this,n0,!0);for(const{contentElement:a,data:{id:u}}of c(this,oi)){const d=a.id=`${F2}${u}`;e.push((n=c(this,t0))==null?void 0:n.getAriaAttributes(d).then(h=>{if(h)for(const[f,g]of h)a.setAttribute(f,g)}))}}c(this,oi).sort(({data:{rect:[a,u,d,h]}},{data:{rect:[f,g,w,v]}})=>{if(a===d&&u===h)return 1;if(f===w&&g===v)return-1;const F=h,C=u,S=(u+h)/2,I=v,O=g,R=(g+v)/2;if(S>=I&&R<=C)return-1;if(R>=F&&S<=O)return 1;const B=(a+d)/2,z=(f+w)/2;return B-z});const t=document.createDocumentFragment();for(const a of c(this,oi))t.append(a.container),this._commentManager?(i=((r=a.extraPopupElement)==null?void 0:r.popup)||a.popup)==null||i.renderCommentButton():a.extraPopupElement&&t.append(a.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),c(this,Bh))for(const a of c(this,oi))c(this,Bh).addPointerInTextLayer(a.contentElement,!1)},sF=function(){var t;if(!c(this,jh))return;const e=this.div;for(const[n,r]of c(this,jh)){const i=e.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):i.append(r);const u=c(this,Pu).get(n);u&&(u._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,i.id,r),u._hasNoCanvas=!1):u.canvas=r)}c(this,jh).clear()};let rF=dT;const hA=/\r\n?|\n/g;var li,r0,Vh,ci,Xn,bO,CO,FO,QA,lc,KA,XA,SO,aF,TO;const an=class an extends tn{constructor(t){super({...t,name:"freeTextEditor"});T(this,Xn);T(this,li,"");T(this,r0,`${this.id}-editor`);T(this,Vh,null);T(this,ci);oe(this,"_colorPicker",null);this.color=t.color||an._defaultColor||tn._defaultLineColor,_(this,ci,t.fontSize||an._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=an.prototype,n=a=>a.isEmpty(),r=vp.TRANSLATE_SMALL,i=vp.TRANSLATE_BIG;return Ye(this,"_keyboardManager",new z0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){tn.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case pt.FREETEXT_SIZE:an._defaultFontSize=n;break;case pt.FREETEXT_COLOR:an._defaultColor=n;break}}updateParams(t,n){switch(t){case pt.FREETEXT_SIZE:P(this,Xn,bO).call(this,n);break;case pt.FREETEXT_COLOR:P(this,Xn,CO).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[pt.FREETEXT_SIZE,an._defaultFontSize],[pt.FREETEXT_COLOR,an._defaultColor||tn._defaultLineColor]]}get propertiesToUpdate(){return[[pt.FREETEXT_SIZE,c(this,ci)],[pt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new B1(this)),[["colorPicker",this._colorPicker]]}get colorType(){return pt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-an._internalPadding*t,-(an._internalPadding+c(this,ci))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),_(this,Vh,new AbortController);const t=this._uiManager.combinedSignal(c(this,Vh));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,r0)),this._isDraggable=!0,(t=c(this,Vh))==null||t.abort(),_(this,Vh,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,li),n=_(this,li,P(this,Xn,FO).call(this).trimEnd());if(t===n)return;const r=i=>{if(_(this,li,i),!i){this.remove();return}P(this,Xn,XA).call(this),this._uiManager.rebuild(this),P(this,Xn,QA).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),P(this,Xn,QA).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){an._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,r0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,ci)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,h]=this.getInitialTranslation();[d,h]=this.pageTranslationToScreen(d,h);const[f,g]=this.pageDimensions,[w,v]=this.pageTranslation;let F,C;switch(this.rotation){case 0:F=t+(u[0]-w)/f,C=n+this.height-(u[1]-v)/g;break;case 90:F=t+(u[0]-w)/f,C=n-(u[1]-v)/g,[d,h]=[h,-d];break;case 180:F=t-this.width+(u[0]-w)/f,C=n-(u[1]-v)/g,[d,h]=[-d,-h];break;case 270:F=t+(u[0]-w-this.height*g)/f,C=n+(u[1]-v-this.width*f)/g,[d,h]=[-h,d];break}this.setAt(F*i,C*a,d,h)}else this._moveAfterPaste(t,n);P(this,Xn,XA).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var F,C,S;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=P(F=an,lc,aF).call(F,n.getData("text")||"").replaceAll(hA,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const u=a.getRangeAt(0);if(!i.includes(`
`)){u.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:d,startOffset:h}=u,f=[],g=[];if(d.nodeType===Node.TEXT_NODE){const I=d.parentElement;if(g.push(d.nodeValue.slice(h).replaceAll(hA,"")),I!==this.editorDiv){let O=f;for(const R of this.editorDiv.childNodes){if(R===I){O=g;continue}O.push(P(C=an,lc,KA).call(C,R))}}f.push(d.nodeValue.slice(0,h).replaceAll(hA,""))}else if(d===this.editorDiv){let I=f,O=0;for(const R of this.editorDiv.childNodes)O++===h&&(I=g),I.push(P(S=an,lc,KA).call(S,R))}_(this,li,`${f.join(`
`)}${i}${g.join(`
`)}`),P(this,Xn,XA).call(this);const w=new Range;let v=Math.sumPrecise(f.map(I=>I.length));for(const{firstChild:I}of this.editorDiv.childNodes)if(I.nodeType===Node.TEXT_NODE){const O=I.nodeValue.length;if(v<=O){w.setStart(I,v),w.setEnd(I,v);break}v-=O}a.removeAllRanges(),a.addRange(w)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=an._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,r){var u;let i=null;if(t instanceof AO){const{data:{defaultAppearanceData:{fontSize:d,fontColor:h},rect:f,rotation:g,id:w,popupRef:v,richText:F,contentsObj:C,creationDate:S,modificationDate:I},textContent:O,textPosition:R,parent:{page:{pageNumber:B}}}=t;if(!O||O.length===0)return null;i=t={annotationType:et.FREETEXT,color:Array.from(h),fontSize:d,value:O.join(`
`),position:R,pageIndex:B-1,rect:f.slice(0),rotation:g,annotationElementId:w,id:w,deleted:!1,popupRef:v,comment:(C==null?void 0:C.str)||null,richText:F,creationDate:S,modificationDate:I}}const a=await super.deserialize(t,n,r);return _(a,ci,t.fontSize),a.color=Te.makeHexColor(...t.color),_(a,li,P(u=an,lc,aF).call(u,t.value)),a._initialData=i,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=tn._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:n,fontSize:c(this,ci),value:P(this,Xn,SO).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!P(this,Xn,TO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${c(this,ci)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const i of c(this,li).split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),n.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,li)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};li=new WeakMap,r0=new WeakMap,Vh=new WeakMap,ci=new WeakMap,Xn=new WeakSet,bO=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-c(this,ci))*this.parentScale),_(this,ci,i),P(this,Xn,QA).call(this)},r=c(this,ci);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},CO=function(t){const n=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},FO=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(P(r=an,lc,KA).call(r,i)),n=i);return t.join(`
`)},QA=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,u=a.style.display,d=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=u,a.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},lc=new WeakSet,KA=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(hA,"")},XA=function(){if(this.editorDiv.replaceChildren(),!!c(this,li))for(const t of c(this,li).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},SO=function(){return c(this,li).replaceAll(""," ")},aF=function(t){return t.replaceAll(" ","")},TO=function(t){const{value:n,fontSize:r,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((u,d)=>u!==i[d])||t.pageIndex!==a},T(an,lc),oe(an,"_freeTextDefaultContent",""),oe(an,"_internalPadding",0),oe(an,"_defaultColor",null),oe(an,"_defaultFontSize",10),oe(an,"_type","freetext"),oe(an,"_editorType",et.FREETEXT);let iF=an;class De{toSVGPath(){Tt("Abstract method `toSVGPath` must be implemented.")}get box(){Tt("Abstract getter `box` must be implemented.")}serialize(e,t){Tt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,a){a||(a=new Float32Array(e.length));for(let u=0,d=e.length;u<d;u+=2)a[u]=t+e[u]*r,a[u+1]=n+e[u+1]*i;return a}static _rescaleAndSwap(e,t,n,r,i,a){a||(a=new Float32Array(e.length));for(let u=0,d=e.length;u<d;u+=2)a[u]=t+e[u+1]*r,a[u+1]=n+e[u]*i;return a}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,a){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+a)/6,(n+i)/2,(r+a)/2]}}oe(De,"PRECISION",1e-4);var ui,_a,Wf,Gf,To,at,$h,zh,s0,i0,qf,Qf,Ru,a0,sx,ix,sr,Yg,kO,IO,PO,RO,DO,NO;const vl=class vl{constructor({x:e,y:t},n,r,i,a,u=0){T(this,sr);T(this,ui);T(this,_a,[]);T(this,Wf);T(this,Gf);T(this,To,[]);T(this,at,new Float32Array(18));T(this,$h);T(this,zh);T(this,s0);T(this,i0);T(this,qf);T(this,Qf);T(this,Ru,[]);_(this,ui,n),_(this,Qf,i*r),_(this,Gf,a),c(this,at).set([NaN,NaN,NaN,NaN,e,t],6),_(this,Wf,u),_(this,i0,c(vl,a0)*r),_(this,s0,c(vl,ix)*r),_(this,qf,r),c(this,Ru).push(e,t)}isEmpty(){return isNaN(c(this,at)[8])}add({x:e,y:t}){var L;_(this,$h,e),_(this,zh,t);const[n,r,i,a]=c(this,ui);let[u,d,h,f]=c(this,at).subarray(8,12);const g=e-h,w=t-f,v=Math.hypot(g,w);if(v<c(this,s0))return!1;const F=v-c(this,i0),C=F/v,S=C*g,I=C*w;let O=u,R=d;u=h,d=f,h+=S,f+=I,(L=c(this,Ru))==null||L.push(e,t);const B=-I/F,z=S/F,W=B*c(this,Qf),D=z*c(this,Qf);return c(this,at).set(c(this,at).subarray(2,8),0),c(this,at).set([h+W,f+D],4),c(this,at).set(c(this,at).subarray(14,18),12),c(this,at).set([h-W,f-D],16),isNaN(c(this,at)[6])?(c(this,To).length===0&&(c(this,at).set([u+W,d+D],2),c(this,To).push(NaN,NaN,NaN,NaN,(u+W-n)/i,(d+D-r)/a),c(this,at).set([u-W,d-D],14),c(this,_a).push(NaN,NaN,NaN,NaN,(u-W-n)/i,(d-D-r)/a)),c(this,at).set([O,R,u,d,h,f],6),!this.isEmpty()):(c(this,at).set([O,R,u,d,h,f],6),Math.abs(Math.atan2(R-d,O-u)-Math.atan2(I,S))<Math.PI/2?([u,d,h,f]=c(this,at).subarray(2,6),c(this,To).push(NaN,NaN,NaN,NaN,((u+h)/2-n)/i,((d+f)/2-r)/a),[u,d,O,R]=c(this,at).subarray(14,18),c(this,_a).push(NaN,NaN,NaN,NaN,((O+u)/2-n)/i,((R+d)/2-r)/a),!0):([O,R,u,d,h,f]=c(this,at).subarray(0,6),c(this,To).push(((O+5*u)/6-n)/i,((R+5*d)/6-r)/a,((5*u+h)/6-n)/i,((5*d+f)/6-r)/a,((u+h)/2-n)/i,((d+f)/2-r)/a),[h,f,u,d,O,R]=c(this,at).subarray(12,18),c(this,_a).push(((O+5*u)/6-n)/i,((R+5*d)/6-r)/a,((5*u+h)/6-n)/i,((5*d+f)/6-r)/a,((u+h)/2-n)/i,((d+f)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,To),t=c(this,_a);if(isNaN(c(this,at)[6])&&!this.isEmpty())return P(this,sr,kO).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);P(this,sr,PO).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return P(this,sr,IO).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,a){return new MO(e,t,n,r,i,a)}getOutlines(){var g;const e=c(this,To),t=c(this,_a),n=c(this,at),[r,i,a,u]=c(this,ui),d=new Float32Array((((g=c(this,Ru))==null?void 0:g.length)??0)+2);for(let w=0,v=d.length-2;w<v;w+=2)d[w]=(c(this,Ru)[w]-r)/a,d[w+1]=(c(this,Ru)[w+1]-i)/u;if(d[d.length-2]=(c(this,$h)-r)/a,d[d.length-1]=(c(this,zh)-i)/u,isNaN(n[6])&&!this.isEmpty())return P(this,sr,RO).call(this,d);const h=new Float32Array(c(this,To).length+24+c(this,_a).length);let f=e.length;for(let w=0;w<f;w+=2){if(isNaN(e[w])){h[w]=h[w+1]=NaN;continue}h[w]=e[w],h[w+1]=e[w+1]}f=P(this,sr,NO).call(this,h,f);for(let w=t.length-6;w>=6;w-=6)for(let v=0;v<6;v+=2){if(isNaN(t[w+v])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[w+v],h[f+1]=t[w+v+1],f+=2}return P(this,sr,DO).call(this,h,f),this.newFreeDrawOutline(h,d,c(this,ui),c(this,qf),c(this,Wf),c(this,Gf))}};ui=new WeakMap,_a=new WeakMap,Wf=new WeakMap,Gf=new WeakMap,To=new WeakMap,at=new WeakMap,$h=new WeakMap,zh=new WeakMap,s0=new WeakMap,i0=new WeakMap,qf=new WeakMap,Qf=new WeakMap,Ru=new WeakMap,a0=new WeakMap,sx=new WeakMap,ix=new WeakMap,sr=new WeakSet,Yg=function(){const e=c(this,at).subarray(4,6),t=c(this,at).subarray(16,18),[n,r,i,a]=c(this,ui);return[(c(this,$h)+(e[0]-t[0])/2-n)/i,(c(this,zh)+(e[1]-t[1])/2-r)/a,(c(this,$h)+(t[0]-e[0])/2-n)/i,(c(this,zh)+(t[1]-e[1])/2-r)/a]},kO=function(){const[e,t,n,r]=c(this,ui),[i,a,u,d]=P(this,sr,Yg).call(this);return`M${(c(this,at)[2]-e)/n} ${(c(this,at)[3]-t)/r} L${(c(this,at)[4]-e)/n} ${(c(this,at)[5]-t)/r} L${i} ${a} L${u} ${d} L${(c(this,at)[16]-e)/n} ${(c(this,at)[17]-t)/r} L${(c(this,at)[14]-e)/n} ${(c(this,at)[15]-t)/r} Z`},IO=function(e){const t=c(this,_a);e.push(`L${t[4]} ${t[5]} Z`)},PO=function(e){const[t,n,r,i]=c(this,ui),a=c(this,at).subarray(4,6),u=c(this,at).subarray(16,18),[d,h,f,g]=P(this,sr,Yg).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-n)/i} L${d} ${h} L${f} ${g} L${(u[0]-t)/r} ${(u[1]-n)/i}`)},RO=function(e){const t=c(this,at),[n,r,i,a]=c(this,ui),[u,d,h,f]=P(this,sr,Yg).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/a,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/a],0),this.newFreeDrawOutline(g,e,c(this,ui),c(this,qf),c(this,Wf),c(this,Gf))},DO=function(e,t){const n=c(this,_a);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},NO=function(e,t){const n=c(this,at).subarray(4,6),r=c(this,at).subarray(16,18),[i,a,u,d]=c(this,ui),[h,f,g,w]=P(this,sr,Yg).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/u,(n[1]-a)/d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,w,NaN,NaN,NaN,NaN,(r[0]-i)/u,(r[1]-a)/d],t),t+=24},T(vl,a0,8),T(vl,sx,2),T(vl,ix,c(vl,a0)+c(vl,sx));let U1=vl;var Kf,Hh,Kl,o0,di,l0,Bn,ax,LO;class MO extends De{constructor(t,n,r,i,a,u){super();T(this,ax);T(this,Kf);T(this,Hh,new Float32Array(4));T(this,Kl);T(this,o0);T(this,di);T(this,l0);T(this,Bn);_(this,Bn,t),_(this,di,n),_(this,Kf,r),_(this,l0,i),_(this,Kl,a),_(this,o0,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],P(this,ax,LO).call(this,u);const[d,h,f,g]=c(this,Hh);for(let w=0,v=t.length;w<v;w+=2)t[w]=(t[w]-d)/f,t[w+1]=(t[w+1]-h)/g;for(let w=0,v=n.length;w<v;w+=2)n[w]=(n[w]-d)/f,n[w+1]=(n[w+1]-h)/g}toSVGPath(){const t=[`M${c(this,Bn)[4]} ${c(this,Bn)[5]}`];for(let n=6,r=c(this,Bn).length;n<r;n+=6){if(isNaN(c(this,Bn)[n])){t.push(`L${c(this,Bn)[n+4]} ${c(this,Bn)[n+5]}`);continue}t.push(`C${c(this,Bn)[n]} ${c(this,Bn)[n+1]} ${c(this,Bn)[n+2]} ${c(this,Bn)[n+3]} ${c(this,Bn)[n+4]} ${c(this,Bn)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,i],a){const u=r-t,d=i-n;let h,f;switch(a){case 0:h=De._rescale(c(this,Bn),t,i,u,-d),f=De._rescale(c(this,di),t,i,u,-d);break;case 90:h=De._rescaleAndSwap(c(this,Bn),t,n,u,d),f=De._rescaleAndSwap(c(this,di),t,n,u,d);break;case 180:h=De._rescale(c(this,Bn),r,n,-u,d),f=De._rescale(c(this,di),r,n,-u,d);break;case 270:h=De._rescaleAndSwap(c(this,Bn),r,i,-u,-d),f=De._rescaleAndSwap(c(this,di),r,i,-u,-d);break}return{outline:Array.from(h),points:[Array.from(f)]}}get box(){return c(this,Hh)}newOutliner(t,n,r,i,a,u=0){return new U1(t,n,r,i,a,u)}getNewOutline(t,n){const[r,i,a,u]=c(this,Hh),[d,h,f,g]=c(this,Kf),w=a*f,v=u*g,F=r*f+d,C=i*g+h,S=this.newOutliner({x:c(this,di)[0]*w+F,y:c(this,di)[1]*v+C},c(this,Kf),c(this,l0),t,c(this,o0),n??c(this,Kl));for(let I=2;I<c(this,di).length;I+=2)S.add({x:c(this,di)[I]*w+F,y:c(this,di)[I+1]*v+C});return S.getOutlines()}}Kf=new WeakMap,Hh=new WeakMap,Kl=new WeakMap,o0=new WeakMap,di=new WeakMap,l0=new WeakMap,Bn=new WeakMap,ax=new WeakSet,LO=function(t){const n=c(this,Bn);let r=n[4],i=n[5];const a=[r,i,r,i];let u=r,d=i,h=r,f=i;const g=t?Math.max:Math.min,w=new Float32Array(4);for(let F=6,C=n.length;F<C;F+=6){const S=n[F+4],I=n[F+5];isNaN(n[F])?(Te.pointBoundingBox(S,I,a),d>I?(u=S,d=I):d===I&&(u=g(u,S)),f<I?(h=S,f=I):f===I&&(h=g(h,S))):(w[0]=w[1]=1/0,w[2]=w[3]=-1/0,Te.bezierBoundingBox(r,i,...n.slice(F,F+6),w),Te.rectBoundingBox(w[0],w[1],w[2],w[3],a),d>w[1]?(u=w[0],d=w[1]):d===w[1]&&(u=g(u,w[0])),f<w[3]?(h=w[2],f=w[3]):f===w[3]&&(h=g(h,w[2]))),r=S,i=I}const v=c(this,Hh);v[0]=a[0]-c(this,Kl),v[1]=a[1]-c(this,Kl),v[2]=a[2]-a[0]+2*c(this,Kl),v[3]=a[3]-a[1]+2*c(this,Kl),this.firstPoint=[u,d],this.lastPoint=[h,f]};var c0,u0,d0,Du,Ea,fs,OO,YA,BO,jO,lF;class oF{constructor(e,t=0,n=0,r=!0){T(this,fs);T(this,c0);T(this,u0);T(this,d0);T(this,Du,[]);T(this,Ea,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:C,y:S,width:I,height:O}of e){const R=Math.floor((C-t)/a)*a,B=Math.ceil((C+I+t)/a)*a,z=Math.floor((S-t)/a)*a,W=Math.ceil((S+O+t)/a)*a,D=[R,z,W,!0],N=[B,z,W,!1];c(this,Du).push(D,N),Te.rectBoundingBox(R,z,B,W,i)}const u=i[2]-i[0]+2*n,d=i[3]-i[1]+2*n,h=i[0]-n,f=i[1]-n;let g=r?-1/0:1/0,w=1/0;const v=c(this,Du).at(r?-1:-2),F=[v[0],v[2]];for(const C of c(this,Du)){const[S,I,O,R]=C;!R&&r?I<w?(w=I,g=S):I===w&&(g=Math.max(g,S)):R&&!r&&(I<w?(w=I,g=S):I===w&&(g=Math.min(g,S))),C[0]=(S-h)/u,C[1]=(I-f)/d,C[2]=(O-f)/d}_(this,c0,new Float32Array([h,f,u,d])),_(this,u0,[g,w]),_(this,d0,F)}getOutlines(){c(this,Du).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of c(this,Du))t[3]?(e.push(...P(this,fs,lF).call(this,t)),P(this,fs,BO).call(this,t)):(P(this,fs,jO).call(this,t),e.push(...P(this,fs,lF).call(this,t)));return P(this,fs,OO).call(this,e)}}c0=new WeakMap,u0=new WeakMap,d0=new WeakMap,Du=new WeakMap,Ea=new WeakMap,fs=new WeakSet,OO=function(e){const t=[],n=new Set;for(const a of e){const[u,d,h]=a;t.push([u,d,a],[u,h,a])}t.sort((a,u)=>a[1]-u[1]||a[0]-u[0]);for(let a=0,u=t.length;a<u;a+=2){const d=t[a][2],h=t[a+1][2];d.push(h),h.push(d),n.add(d),n.add(h)}const r=[];let i;for(;n.size>0;){const a=n.values().next().value;let[u,d,h,f,g]=a;n.delete(a);let w=u,v=d;for(i=[u,h],r.push(i);;){let F;if(n.has(f))F=f;else if(n.has(g))F=g;else break;n.delete(F),[u,d,h,f,g]=F,w!==u&&(i.push(w,v,u,v===d?d:h),w=u),v=v===d?h:d}i.push(w,v)}return new nQ(r,c(this,c0),c(this,u0),c(this,d0))},YA=function(e){const t=c(this,Ea);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,a=t[i][0];if(a===e)return i;a<e?n=i+1:r=i-1}return r+1},BO=function([,e,t]){const n=P(this,fs,YA).call(this,e);c(this,Ea).splice(n,0,[e,t])},jO=function([,e,t]){const n=P(this,fs,YA).call(this,e);for(let r=n;r<c(this,Ea).length;r++){const[i,a]=c(this,Ea)[r];if(i!==e)break;if(i===e&&a===t){c(this,Ea).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[i,a]=c(this,Ea)[r];if(i!==e)break;if(i===e&&a===t){c(this,Ea).splice(r,1);return}}},lF=function(e){const[t,n,r]=e,i=[[t,n,r]],a=P(this,fs,YA).call(this,r);for(let u=0;u<a;u++){const[d,h]=c(this,Ea)[u];for(let f=0,g=i.length;f<g;f++){const[,w,v]=i[f];if(!(h<=w||v<=d)){if(w>=d){if(v>h)i[f][1]=h;else{if(g===1)return[];i.splice(f,1),f--,g--}continue}i[f][2]=d,v>h&&i.push([t,h,v])}}}return i};var h0,Xf;class nQ extends De{constructor(t,n,r,i){super();T(this,h0);T(this,Xf);_(this,Xf,t),_(this,h0,n),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const n of c(this,Xf)){let[r,i]=n;t.push(`M${r} ${i}`);for(let a=2;a<n.length;a+=2){const u=n[a],d=n[a+1];u===r?(t.push(`V${d}`),i=d):d===i&&(t.push(`H${u}`),r=u)}t.push("Z")}return t.join(" ")}serialize([t,n,r,i],a){const u=[],d=r-t,h=i-n;for(const f of c(this,Xf)){const g=new Array(f.length);for(let w=0;w<f.length;w+=2)g[w]=t+f[w]*d,g[w+1]=i-f[w+1]*h;u.push(g)}return u}get box(){return c(this,h0)}get classNamesForOutlining(){return["highlightOutline"]}}h0=new WeakMap,Xf=new WeakMap;class cF extends U1{newFreeDrawOutline(e,t,n,r,i,a){return new rQ(e,t,n,r,i,a)}}class rQ extends MO{newOutliner(e,t,n,r,i,a=0){return new cF(e,t,n,r,i,a)}}var Yf,p0,Xl,Wh,f0,Ds,m0,g0,Gh,hi,pi,kr,Jf,Zf,Jr,em,Xi,y0,nt,uF,JA,UO,VO,$O,dF,$d,ea,E2,zO,ZA,e1,HO,WO,GO,qO,QO;const Ft=class Ft extends tn{constructor(t){super({...t,name:"highlightEditor"});T(this,nt);T(this,Yf,null);T(this,p0,0);T(this,Xl);T(this,Wh,null);T(this,f0,null);T(this,Ds,null);T(this,m0,null);T(this,g0,0);T(this,Gh,null);T(this,hi,null);T(this,pi,null);T(this,kr,!1);T(this,Jf,null);T(this,Zf,null);T(this,Jr,null);T(this,em,"");T(this,Xi);T(this,y0,"");this.color=t.color||Ft._defaultColor,_(this,Xi,t.thickness||Ft._defaultThickness),this.opacity=t.opacity||Ft._defaultOpacity,_(this,Xl,t.boxes||null),_(this,y0,t.methodOfCreation||""),_(this,em,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(_(this,kr,!0),P(this,nt,JA).call(this,t),P(this,nt,$d).call(this)):c(this,Xl)&&(_(this,Yf,t.anchorNode),_(this,p0,t.anchorOffset),_(this,m0,t.focusNode),_(this,g0,t.focusOffset),P(this,nt,uF).call(this),P(this,nt,$d).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ft.prototype;return Ye(this,"_keyboardManager",new z0([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,kr)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,Xi),methodOfCreation:c(this,y0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;tn.initialize(t,n),Ft._defaultColor||(Ft._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case pt.HIGHLIGHT_COLOR:Ft._defaultColor=n;break;case pt.HIGHLIGHT_THICKNESS:Ft._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return c(this,Zf)}get commentButtonPosition(){return c(this,Jf)}updateParams(t,n){switch(t){case pt.HIGHLIGHT_COLOR:P(this,nt,UO).call(this,n);break;case pt.HIGHLIGHT_THICKNESS:P(this,nt,VO).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[pt.HIGHLIGHT_COLOR,Ft._defaultColor],[pt.HIGHLIGHT_THICKNESS,Ft._defaultThickness]]}get propertiesToUpdate(){return[[pt.HIGHLIGHT_COLOR,this.color||Ft._defaultColor],[pt.HIGHLIGHT_THICKNESS,c(this,Xi)||Ft._defaultThickness],[pt.HIGHLIGHT_FREE,c(this,kr)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(c(this,pi),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=c(this,f0))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",_(this,f0,new O1({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(P(this,nt,e1).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,P(this,nt,e1).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){P(this,nt,dF).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,nt,$d).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?P(this,nt,dF).call(this):t&&(P(this,nt,$d).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,a,u;const{drawLayer:n}=this.parent;let r;c(this,kr)?(t=(t-this.rotation+360)%360,r=P(i=Ft,ea,E2).call(i,c(this,hi).box,t)):r=P(a=Ft,ea,E2).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(c(this,pi),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(c(this,Jr),{bbox:P(u=Ft,ea,E2).call(u,c(this,Ds).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,em)&&(t.setAttribute("aria-label",c(this,em)),t.setAttribute("role","mark")),c(this,kr)?t.classList.add("free"):this.div.addEventListener("keydown",P(this,nt,zO).bind(this),{signal:this._uiManager._signal});const n=_(this,Gh,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,Wh),this.setDims(),nL(this,c(this,Gh),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Jr),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Jr),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:P(this,nt,ZA).call(this,!0);break;case 1:case 3:P(this,nt,ZA).call(this,!1);break}}select(){var t;super.select(),c(this,Jr)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Jr),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,Jr)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Jr),{rootClass:{selected:!1}}),c(this,kr)||P(this,nt,ZA).call(this,!1))}get _mustFixPosition(){return!c(this,kr)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,pi),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,Jr),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:i,y:a}){const{x:u,y:d,width:h,height:f}=r.getBoundingClientRect(),g=new AbortController,w=t.combinedSignal(g),v=F=>{g.abort(),P(this,ea,qO).call(this,t,F)};window.addEventListener("blur",v,{signal:w}),window.addEventListener("pointerup",v,{signal:w}),window.addEventListener("pointerdown",In,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ra,{signal:w}),r.addEventListener("pointermove",P(this,ea,GO).bind(this,t),{signal:w}),this._freeHighlight=new cF({x:i,y:a},[u,d,h,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var C,S,I,O;let i=null;if(t instanceof _O){const{data:{quadPoints:R,rect:B,rotation:z,id:W,color:D,opacity:N,popupRef:L,richText:V,contentsObj:$,creationDate:K,modificationDate:U},parent:{page:{pageNumber:me}}}=t;i=t={annotationType:et.HIGHLIGHT,color:Array.from(D),opacity:N,quadPoints:R,boxes:null,pageIndex:me-1,rect:B.slice(0),rotation:z,annotationElementId:W,id:W,deleted:!1,popupRef:L,richText:V,comment:($==null?void 0:$.str)||null,creationDate:K,modificationDate:U}}else if(t instanceof eT){const{data:{inkLists:R,rect:B,rotation:z,id:W,color:D,borderStyle:{rawWidth:N},popupRef:L,richText:V,contentsObj:$,creationDate:K,modificationDate:U},parent:{page:{pageNumber:me}}}=t;i=t={annotationType:et.HIGHLIGHT,color:Array.from(D),thickness:N,inkLists:R,boxes:null,pageIndex:me-1,rect:B.slice(0),rotation:z,annotationElementId:W,id:W,deleted:!1,popupRef:L,richText:V,comment:($==null?void 0:$.str)||null,creationDate:K,modificationDate:U}}const{color:a,quadPoints:u,inkLists:d,opacity:h}=t,f=await super.deserialize(t,n,r);f.color=Te.makeHexColor(...a),f.opacity=h||1,d&&_(f,Xi,t.thickness),f._initialData=i,t.comment&&f.setCommentData(t);const[g,w]=f.pageDimensions,[v,F]=f.pageTranslation;if(u){const R=_(f,Xl,[]);for(let B=0;B<u.length;B+=8)R.push({x:(u[B]-v)/g,y:1-(u[B+1]-F)/w,width:(u[B+2]-u[B])/g,height:(u[B+1]-u[B+5])/w});P(C=f,nt,uF).call(C),P(S=f,nt,$d).call(S),f.rotate(f.rotation)}else if(d){_(f,kr,!0);const R=d[0],B={x:R[0]-v,y:w-(R[1]-F)},z=new cF(B,[0,0,g,w],1,c(f,Xi)/2,!0,.001);for(let N=0,L=R.length;N<L;N+=2)B.x=R[N]-v,B.y=w-(R[N+1]-F),z.add(B);const{id:W,clipPathId:D}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);P(I=f,nt,JA).call(I,{highlightOutlines:z.getOutlines(),highlightId:W,clipPathId:D}),P(O=f,nt,$d).call(O),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=tn._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:n,opacity:this.opacity,thickness:c(this,Xi),quadPoints:P(this,nt,HO).call(this),outlines:P(this,nt,WO).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!P(this,nt,QO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Yf=new WeakMap,p0=new WeakMap,Xl=new WeakMap,Wh=new WeakMap,f0=new WeakMap,Ds=new WeakMap,m0=new WeakMap,g0=new WeakMap,Gh=new WeakMap,hi=new WeakMap,pi=new WeakMap,kr=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,Jr=new WeakMap,em=new WeakMap,Xi=new WeakMap,y0=new WeakMap,nt=new WeakSet,uF=function(){const t=new oF(c(this,Xl),.001);_(this,hi,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,hi).box;const n=new oF(c(this,Xl),.0025,.001,this._uiManager.direction==="ltr");_(this,Ds,n.getOutlines());const{firstPoint:r}=c(this,hi);_(this,Jf,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=c(this,Ds);_(this,Zf,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},JA=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var w,v;if(_(this,hi,t),_(this,Ds,t.getNewOutline(c(this,Xi)/2+1.5,.0025)),n>=0)_(this,pi,n),_(this,Wh,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),_(this,Jr,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Ds).box,path:{d:c(this,Ds).toSVGPath()}},!0));else if(this.parent){const F=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,pi),{bbox:P(w=Ft,ea,E2).call(w,c(this,hi).box,(F-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Jr),{bbox:P(v=Ft,ea,E2).call(v,c(this,Ds).box,F),path:{d:c(this,Ds).toSVGPath()}})}const[a,u,d,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=u,this.width=d,this.height=h;break;case 90:{const[F,C]=this.parentDimensions;this.x=u,this.y=1-a,this.width=d*C/F,this.height=h*F/C;break}case 180:this.x=1-a,this.y=1-u,this.width=d,this.height=h;break;case 270:{const[F,C]=this.parentDimensions;this.x=1-u,this.y=a,this.width=d*C/F,this.height=h*F/C;break}}const{firstPoint:f}=t;_(this,Jf,[(f[0]-a)/d,(f[1]-u)/h]);const{lastPoint:g}=c(this,Ds);_(this,Zf,[(g[0]-a)/d,(g[1]-u)/h])},UO=function(t){const n=(a,u)=>{this.color=a,this.opacity=u,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:n.bind(this,t,Ft._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},VO=function(t){const n=c(this,Xi),r=i=>{_(this,Xi,i),P(this,nt,$O).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},$O=function(t){c(this,kr)&&(P(this,nt,JA).call(this,{highlightOutlines:c(this,hi).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},dF=function(){c(this,pi)===null||!this.parent||(this.parent.drawLayer.remove(c(this,pi)),_(this,pi,null),this.parent.drawLayer.remove(c(this,Jr)),_(this,Jr,null))},$d=function(t=this.parent){c(this,pi)===null&&({id:er(this,pi)._,clipPathId:er(this,Wh)._}=t.drawLayer.draw({bbox:c(this,hi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,kr)},path:{d:c(this,hi).toSVGPath()}},!1,!0),_(this,Jr,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,kr)},bbox:c(this,Ds).box,path:{d:c(this,Ds).toSVGPath()}},c(this,kr))),c(this,Gh)&&(c(this,Gh).style.clipPath=c(this,Wh)))},ea=new WeakSet,E2=function([t,n,r,i],a){switch(a){case 90:return[1-n-i,t,i,r];case 180:return[1-t-r,1-n-i,r,i];case 270:return[n,1-t-r,i,r]}return[t,n,r,i]},zO=function(t){Ft._keyboardManager.exec(this,t)},ZA=function(t){if(!c(this,Yf))return;const n=window.getSelection();t?n.setPosition(c(this,Yf),c(this,p0)):n.setPosition(c(this,m0),c(this,g0))},e1=function(){return c(this,kr)?this.rotation:0},HO=function(){if(c(this,kr))return null;const[t,n]=this.pageDimensions,[r,i]=this.pageTranslation,a=c(this,Xl),u=new Float32Array(a.length*8);let d=0;for(const{x:h,y:f,width:g,height:w}of a){const v=h*t+r,F=(1-f)*n+i;u[d]=u[d+4]=v,u[d+1]=u[d+3]=F,u[d+2]=u[d+6]=v+g*t,u[d+5]=u[d+7]=F-w*n,d+=8}return u},WO=function(t){return c(this,hi).serialize(t,P(this,nt,e1).call(this))},GO=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},qO=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},QO=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==n[i])},T(Ft,ea),oe(Ft,"_defaultColor",null),oe(Ft,"_defaultOpacity",1),oe(Ft,"_defaultThickness",12),oe(Ft,"_type","highlight"),oe(Ft,"_editorType",et.HIGHLIGHT),oe(Ft,"_freeHighlightId",-1),oe(Ft,"_freeHighlight",null),oe(Ft,"_freeHighlightClipId","");let V1=Ft;var qh;class KO{constructor(){T(this,qh,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){c(this,qh)[e]=t}toSVGProperties(){const e=c(this,qh);return _(this,qh,Object.create(null)),{root:e}}reset(){_(this,qh,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Tt("Not implemented")}}qh=new WeakMap;var fi,tm,pr,Qh,Kh,wt,hF,pF,fF,Jg,XO,t1,Zg,b2;const lt=class lt extends tn{constructor(t){super(t);T(this,wt);T(this,fi,null);T(this,tm);oe(this,"_colorPicker",null);oe(this,"_drawId",null);_(this,tm,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(P(this,wt,hF).call(this,t),P(this,wt,Jg).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[i,a]of Object.entries(n))r.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){Tt("Not implemented")}static get typesMap(){Tt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(c(lt,pr).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,n[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,n[i]]);return t}_updateProperty(t,n,r){const i=this._drawingOptions,a=i[n],u=d=>{var f;i.updateProperty(n,d);const h=c(this,fi).updateProperty(n,d);h&&P(this,wt,Zg).call(this,h),(f=this.parent)==null||f.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,r),undo:u.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,lt._mergeSVGProperties(c(this,fi).getPathResizingSVGProperties(P(this,wt,t1).call(this)),{bbox:P(this,wt,b2).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,lt._mergeSVGProperties(c(this,fi).getPathResizedSVGProperties(P(this,wt,t1).call(this)),{bbox:P(this,wt,b2).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:P(this,wt,b2).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,lt._mergeSVGProperties(c(this,fi).getPathTranslatedSVGProperties(P(this,wt,t1).call(this),this.parentDimensions),{bbox:P(this,wt,b2).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,tm)&&(_(this,tm,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){P(this,wt,fF).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,wt,Jg).call(this),P(this,wt,Zg).call(this,c(this,fi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),P(this,wt,fF).call(this)):t&&(this._uiManager.addShouldRescale(this),P(this,wt,Jg).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,lt._mergeSVGProperties({bbox:P(this,wt,b2).call(this)},c(this,fi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&P(this,wt,Zg).call(this,c(this,fi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,i,a){Tt("Not implemented")}static startDrawing(t,n,r,i){var S;const{target:a,offsetX:u,offsetY:d,pointerId:h,pointerType:f}=i;if(qr.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:w,height:v}=a.getBoundingClientRect(),F=_(lt,Qh,new AbortController),C=t.combinedSignal(F);if(qr.setPointer(f,h),window.addEventListener("pointerup",I=>{qr.isSamePointerIdOrRemove(I.pointerId)&&this._endDraw(I)},{signal:C}),window.addEventListener("pointercancel",I=>{qr.isSamePointerIdOrRemove(I.pointerId)&&this._currentParent.endDrawingSession()},{signal:C}),window.addEventListener("pointerdown",I=>{qr.isSamePointerType(I.pointerType)&&(qr.initializeAndAddPointerId(I.pointerId),c(lt,pr).isCancellable()&&(c(lt,pr).removeLastElement(),c(lt,pr).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",ra,{signal:C}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),a.addEventListener("touchmove",I=>{qr.isSameTimeStamp(I.timeStamp)&&In(I)},{signal:C}),t.toggleDrawing(),(S=n._editorUndoBar)==null||S.hide(),c(lt,pr)){t.drawLayer.updateProperties(this._currentDrawId,c(lt,pr).startNew(u,d,w,v,g));return}n.updateUIForDefaultProperties(this),_(lt,pr,this.createDrawerInstance(u,d,w,v,g)),_(lt,Kh,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(lt,Kh).toSVGProperties(),c(lt,pr).defaultSVGProperties),!0,!1)}static _drawMove(t){if(qr.isSameTimeStamp(t.timeStamp),!c(lt,pr))return;const{offsetX:n,offsetY:r,pointerId:i}=t;if(qr.isSamePointerId(i)){if(qr.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(lt,pr).add(n,r)),qr.setTimeStamp(t.timeStamp),In(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,_(lt,pr,null),_(lt,Kh,null),qr.clearTimeStamp()),c(lt,Qh)&&(c(lt,Qh).abort(),_(lt,Qh,null),qr.clearPointerIds())}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,c(lt,pr).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=c(lt,pr),i=this._currentDrawId,a=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:pt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(pt.DRAW_STEP),!c(lt,pr).isEmpty()){const{pageDimensions:[r,i],scale:a}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(lt,pr).getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:c(lt,Kh),mustBeCommitted:!t});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,i,a,u){Tt("Not implemented")}static async deserialize(t,n,r){var g,w;const{rawDims:{pageWidth:i,pageHeight:a,pageX:u,pageY:d}}=n.viewport,h=this.deserializeDraw(u,d,i,a,this._INNER_MARGIN,t),f=await super.deserialize(t,n,r);return f.createDrawingOptions(t),P(g=f,wt,hF).call(g,{drawOutlines:h}),P(w=f,wt,Jg).call(w),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[n,r]=this.pageTranslation,[i,a]=this.pageDimensions;return c(this,fi).serialize([n,r,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};fi=new WeakMap,tm=new WeakMap,pr=new WeakMap,Qh=new WeakMap,Kh=new WeakMap,wt=new WeakSet,hF=function({drawOutlines:t,drawId:n,drawingOptions:r}){_(this,fi,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=P(this,wt,pF).call(this,t,this.parent),P(this,wt,Zg).call(this,t.box)},pF=function(t,n){const{id:r}=n.drawLayer.draw(lt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},fF=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Jg=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=P(this,wt,pF).call(this,c(this,fi),t)}},XO=function([t,n,r,i]){const{parentDimensions:[a,u],rotation:d}=this;switch(d){case 90:return[n,1-t,r*(u/a),i*(a/u)];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,r*(u/a),i*(a/u)];default:return[t,n,r,i]}},t1=function(){const{x:t,y:n,width:r,height:i,parentDimensions:[a,u],rotation:d}=this;switch(d){case 90:return[1-n,t,r*(a/u),i*(u/a)];case 180:return[1-t,1-n,r,i];case 270:return[n,1-t,r*(a/u),i*(u/a)];default:return[t,n,r,i]}},Zg=function(t){[this.x,this.y,this.width,this.height]=P(this,wt,XO).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},b2=function(){const{x:t,y:n,width:r,height:i,rotation:a,parentRotation:u,parentDimensions:[d,h]}=this;switch((a*4+u)/90){case 1:return[1-n-i,t,i,r];case 2:return[1-t-r,1-n-i,r,i];case 3:return[n,1-t-r,i,r];case 4:return[t,n-r*(d/h),i*(h/d),r*(d/h)];case 5:return[1-n,t,r*(d/h),i*(h/d)];case 6:return[1-t-i*(h/d),1-n,i*(h/d),r*(d/h)];case 7:return[n-r*(d/h),1-t-i*(h/d),r*(d/h),i*(h/d)];case 8:return[t-r,n-i,r,i];case 9:return[1-n,t-r,i,r];case 10:return[1-t,1-n,r,i];case 11:return[n-i,1-t,i,r];case 12:return[t-i*(h/d),n,i*(h/d),r*(d/h)];case 13:return[1-n-r*(d/h),t-i*(h/d),r*(d/h),i*(h/d)];case 14:return[1-t,1-n-r*(d/h),i*(h/d),r*(d/h)];case 15:return[n,1-t,r*(d/h),i*(h/d)];default:return[t,n,r,i]}},oe(lt,"_currentDrawId",-1),oe(lt,"_currentParent",null),T(lt,pr,null),T(lt,Qh,null),T(lt,Kh,null),oe(lt,"_INNER_MARGIN",3);let $1=lt;var ko,fr,mr,Xh,nm,ls,Ir,Yi,Yh,Jh,Zh,rm,n1;class sQ{constructor(e,t,n,r,i,a){T(this,rm);T(this,ko,new Float64Array(6));T(this,fr);T(this,mr);T(this,Xh);T(this,nm);T(this,ls);T(this,Ir,"");T(this,Yi,0);T(this,Yh,new H0);T(this,Jh);T(this,Zh);_(this,Jh,n),_(this,Zh,r),_(this,Xh,i),_(this,nm,a),[e,t]=P(this,rm,n1).call(this,e,t);const u=_(this,fr,[NaN,NaN,NaN,NaN,e,t]);_(this,ls,[e,t]),_(this,mr,[{line:u,points:c(this,ls)}]),c(this,ko).set(u,0)}updateProperty(e,t){e==="stroke-width"&&_(this,nm,t)}isEmpty(){return!c(this,mr)||c(this,mr).length===0}isCancellable(){return c(this,ls).length<=10}add(e,t){[e,t]=P(this,rm,n1).call(this,e,t);const[n,r,i,a]=c(this,ko).subarray(2,6),u=e-i,d=t-a;return Math.hypot(c(this,Jh)*u,c(this,Zh)*d)<=2?null:(c(this,ls).push(e,t),isNaN(n)?(c(this,ko).set([i,a,e,t],2),c(this,fr).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,ko)[0])&&c(this,fr).splice(6,6),c(this,ko).set([n,r,i,a,e,t],0),c(this,fr).push(...De.createBezierPoints(n,r,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(c(this,ls).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){_(this,Jh,n),_(this,Zh,r),_(this,Xh,i),[e,t]=P(this,rm,n1).call(this,e,t);const a=_(this,fr,[NaN,NaN,NaN,NaN,e,t]);_(this,ls,[e,t]);const u=c(this,mr).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),c(this,mr).push({line:a,points:c(this,ls)}),c(this,ko).set(a,0),_(this,Yi,0),this.toSVGPath(),null}getLastElement(){return c(this,mr).at(-1)}setLastElement(e){return c(this,mr)?(c(this,mr).push(e),_(this,fr,e.line),_(this,ls,e.points),_(this,Yi,0),{path:{d:this.toSVGPath()}}):c(this,Yh).setLastElement(e)}removeLastElement(){if(!c(this,mr))return c(this,Yh).removeLastElement();c(this,mr).pop(),_(this,Ir,"");for(let e=0,t=c(this,mr).length;e<t;e++){const{line:n,points:r}=c(this,mr)[e];_(this,fr,n),_(this,ls,r),_(this,Yi,0),this.toSVGPath()}return{path:{d:c(this,Ir)}}}toSVGPath(){const e=De.svgRound(c(this,fr)[4]),t=De.svgRound(c(this,fr)[5]);if(c(this,ls).length===2)return _(this,Ir,`${c(this,Ir)} M ${e} ${t} Z`),c(this,Ir);if(c(this,ls).length<=6){const r=c(this,Ir).lastIndexOf("M");_(this,Ir,`${c(this,Ir).slice(0,r)} M ${e} ${t}`),_(this,Yi,6)}if(c(this,ls).length===4){const r=De.svgRound(c(this,fr)[10]),i=De.svgRound(c(this,fr)[11]);return _(this,Ir,`${c(this,Ir)} L ${r} ${i}`),_(this,Yi,12),c(this,Ir)}const n=[];c(this,Yi)===0&&(n.push(`M ${e} ${t}`),_(this,Yi,6));for(let r=c(this,Yi),i=c(this,fr).length;r<i;r+=6){const[a,u,d,h,f,g]=c(this,fr).slice(r,r+6).map(De.svgRound);n.push(`C${a} ${u} ${d} ${h} ${f} ${g}`)}return _(this,Ir,c(this,Ir)+n.join(" ")),_(this,Yi,c(this,fr).length),c(this,Ir)}getOutlines(e,t,n,r){const i=c(this,mr).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),c(this,Yh).build(c(this,mr),e,t,n,c(this,Xh),c(this,nm),r),_(this,ko,null),_(this,fr,null),_(this,mr,null),_(this,Ir,null),c(this,Yh)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ko=new WeakMap,fr=new WeakMap,mr=new WeakMap,Xh=new WeakMap,nm=new WeakMap,ls=new WeakMap,Ir=new WeakMap,Yi=new WeakMap,Yh=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,rm=new WeakSet,n1=function(e,t){return De._normalizePoint(e,t,c(this,Jh),c(this,Zh),c(this,Xh))};var cs,w0,v0,mi,Io,Po,sm,im,ep,Nr,yl,YO,JO,ZO;class H0 extends De{constructor(){super(...arguments);T(this,Nr);T(this,cs);T(this,w0,0);T(this,v0);T(this,mi);T(this,Io);T(this,Po);T(this,sm);T(this,im);T(this,ep)}build(t,n,r,i,a,u,d){_(this,Io,n),_(this,Po,r),_(this,sm,i),_(this,im,a),_(this,ep,u),_(this,v0,d??0),_(this,mi,t),P(this,Nr,JO).call(this)}get thickness(){return c(this,ep)}setLastElement(t){return c(this,mi).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,mi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of c(this,mi)){if(t.push(`M${De.svgRound(n[4])} ${De.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${De.svgRound(n[10])} ${De.svgRound(n[11])}`);continue}for(let r=6,i=n.length;r<i;r+=6){const[a,u,d,h,f,g]=n.subarray(r,r+6).map(De.svgRound);t.push(`C${a} ${u} ${d} ${h} ${f} ${g}`)}}return t.join("")}serialize([t,n,r,i],a){const u=[],d=[],[h,f,g,w]=P(this,Nr,YO).call(this);let v,F,C,S,I,O,R,B,z;switch(c(this,im)){case 0:z=De._rescale,v=t,F=n+i,C=r,S=-i,I=t+h*r,O=n+(1-f-w)*i,R=t+(h+g)*r,B=n+(1-f)*i;break;case 90:z=De._rescaleAndSwap,v=t,F=n,C=r,S=i,I=t+f*r,O=n+h*i,R=t+(f+w)*r,B=n+(h+g)*i;break;case 180:z=De._rescale,v=t+r,F=n,C=-r,S=i,I=t+(1-h-g)*r,O=n+f*i,R=t+(1-h)*r,B=n+(f+w)*i;break;case 270:z=De._rescaleAndSwap,v=t+r,F=n+i,C=-r,S=-i,I=t+(1-f-w)*r,O=n+(1-h-g)*i,R=t+(1-f)*r,B=n+(1-h)*i;break}for(const{line:W,points:D}of c(this,mi))u.push(z(W,v,F,C,S,a?new Array(W.length):null)),d.push(z(D,v,F,C,S,a?new Array(D.length):null));return{lines:u,points:d,rect:[I,O,R,B]}}static deserialize(t,n,r,i,a,{paths:{lines:u,points:d},rotation:h,thickness:f}){const g=[];let w,v,F,C,S;switch(h){case 0:S=De._rescale,w=-t/r,v=n/i+1,F=1/r,C=-1/i;break;case 90:S=De._rescaleAndSwap,w=-n/i,v=-t/r,F=1/i,C=1/r;break;case 180:S=De._rescale,w=t/r+1,v=-n/i,F=-1/r,C=1/i;break;case 270:S=De._rescaleAndSwap,w=n/i+1,v=t/r+1,F=-1/i,C=-1/r;break}if(!u){u=[];for(const O of d){const R=O.length;if(R===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1]]));continue}if(R===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1],NaN,NaN,NaN,NaN,O[2],O[3]]));continue}const B=new Float32Array(3*(R-2));u.push(B);let[z,W,D,N]=O.subarray(0,4);B.set([NaN,NaN,NaN,NaN,z,W],0);for(let L=4;L<R;L+=2){const V=O[L],$=O[L+1];B.set(De.createBezierPoints(z,W,D,N,V,$),(L-2)*3),[z,W,D,N]=[D,N,V,$]}}}for(let O=0,R=u.length;O<R;O++)g.push({line:S(u[O].map(B=>B??NaN),w,v,F,C),points:S(d[O].map(B=>B??NaN),w,v,F,C)});const I=new this.prototype.constructor;return I.build(g,r,i,1,h,f,a),I}get box(){return c(this,cs)}updateProperty(t,n){return t==="stroke-width"?P(this,Nr,ZO).call(this,n):null}updateParentDimensions([t,n],r){const[i,a]=P(this,Nr,yl).call(this);_(this,Io,t),_(this,Po,n),_(this,sm,r);const[u,d]=P(this,Nr,yl).call(this),h=u-i,f=d-a,g=c(this,cs);return g[0]-=h,g[1]-=f,g[2]+=2*h,g[3]+=2*f,g}updateRotation(t){return _(this,w0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,cs).map(De.svgRound).join(" ")}get defaultProperties(){const[t,n]=c(this,cs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${De.svgRound(t)} ${De.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=c(this,cs);let r=0,i=0,a=0,u=0,d=0,h=0;switch(c(this,w0)){case 90:i=n/t,a=-t/n,d=t;break;case 180:r=-1,u=-1,d=t,h=n;break;case 270:i=-n/t,a=t/n,h=n;break;default:return""}return`matrix(${r} ${i} ${a} ${u} ${De.svgRound(d)} ${De.svgRound(h)})`}getPathResizingSVGProperties([t,n,r,i]){const[a,u]=P(this,Nr,yl).call(this),[d,h,f,g]=c(this,cs);if(Math.abs(f-a)<=De.PRECISION||Math.abs(g-u)<=De.PRECISION){const S=t+r/2-(d+f/2),I=n+i/2-(h+g/2);return{path:{"transform-origin":`${De.svgRound(t)} ${De.svgRound(n)}`,transform:`${this.rotationTransform} translate(${S} ${I})`}}}const w=(r-2*a)/(f-2*a),v=(i-2*u)/(g-2*u),F=f/r,C=g/i;return{path:{"transform-origin":`${De.svgRound(d)} ${De.svgRound(h)}`,transform:`${this.rotationTransform} scale(${F} ${C}) translate(${De.svgRound(a)} ${De.svgRound(u)}) scale(${w} ${v}) translate(${De.svgRound(-a)} ${De.svgRound(-u)})`}}}getPathResizedSVGProperties([t,n,r,i]){const[a,u]=P(this,Nr,yl).call(this),d=c(this,cs),[h,f,g,w]=d;if(d[0]=t,d[1]=n,d[2]=r,d[3]=i,Math.abs(g-a)<=De.PRECISION||Math.abs(w-u)<=De.PRECISION){const I=t+r/2-(h+g/2),O=n+i/2-(f+w/2);for(const{line:R,points:B}of c(this,mi))De._translate(R,I,O,R),De._translate(B,I,O,B);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${De.svgRound(t)} ${De.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(r-2*a)/(g-2*a),F=(i-2*u)/(w-2*u),C=-v*(h+a)+t+a,S=-F*(f+u)+n+u;if(v!==1||F!==1||C!==0||S!==0)for(const{line:I,points:O}of c(this,mi))De._rescale(I,C,S,v,F,I),De._rescale(O,C,S,v,F,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${De.svgRound(t)} ${De.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[i,a]=r,u=c(this,cs),d=t-u[0],h=n-u[1];if(c(this,Io)===i&&c(this,Po)===a)for(const{line:f,points:g}of c(this,mi))De._translate(f,d,h,f),De._translate(g,d,h,g);else{const f=c(this,Io)/i,g=c(this,Po)/a;_(this,Io,i),_(this,Po,a);for(const{line:w,points:v}of c(this,mi))De._rescale(w,d,h,f,g,w),De._rescale(v,d,h,f,g,v);u[2]*=f,u[3]*=g}return u[0]=t,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${De.svgRound(t)} ${De.svgRound(n)}`}}}get defaultSVGProperties(){const t=c(this,cs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${De.svgRound(t[0])} ${De.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}cs=new WeakMap,w0=new WeakMap,v0=new WeakMap,mi=new WeakMap,Io=new WeakMap,Po=new WeakMap,sm=new WeakMap,im=new WeakMap,ep=new WeakMap,Nr=new WeakSet,yl=function(t=c(this,ep)){const n=c(this,v0)+t/2*c(this,sm);return c(this,im)%180===0?[n/c(this,Io),n/c(this,Po)]:[n/c(this,Po),n/c(this,Io)]},YO=function(){const[t,n,r,i]=c(this,cs),[a,u]=P(this,Nr,yl).call(this,0);return[t+a,n+u,r-2*a,i-2*u]},JO=function(){const t=_(this,cs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of c(this,mi)){if(i.length<=12){for(let d=4,h=i.length;d<h;d+=6)Te.pointBoundingBox(i[d],i[d+1],t);continue}let a=i[4],u=i[5];for(let d=6,h=i.length;d<h;d+=6){const[f,g,w,v,F,C]=i.subarray(d,d+6);Te.bezierBoundingBox(a,u,f,g,w,v,F,C,t),a=F,u=C}}const[n,r]=P(this,Nr,yl).call(this);t[0]=Pr(t[0]-n,0,1),t[1]=Pr(t[1]-r,0,1),t[2]=Pr(t[2]+n,0,1),t[3]=Pr(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},ZO=function(t){const[n,r]=P(this,Nr,yl).call(this);_(this,ep,t);const[i,a]=P(this,Nr,yl).call(this),[u,d]=[i-n,a-r],h=c(this,cs);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h};class Yx extends KO{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:tn._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Yx(this._viewParameters);return e.updateAll(this),e}}var ox,e7;const P2=class P2 extends $1{constructor(t){super({...t,name:"inkEditor"});T(this,ox);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){tn.initialize(t,n),this._defaultDrawingOptions=new Yx(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ye(this,"typesMap",new Map([[pt.INK_THICKNESS,"stroke-width"],[pt.INK_COLOR,"stroke"],[pt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,i,a){return new sQ(t,n,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,i,a,u){return H0.deserialize(t,n,r,i,a,u)}static async deserialize(t,n,r){let i=null;if(t instanceof eT){const{data:{inkLists:u,rect:d,rotation:h,id:f,color:g,opacity:w,borderStyle:{rawWidth:v},popupRef:F,richText:C,contentsObj:S,creationDate:I,modificationDate:O},parent:{page:{pageNumber:R}}}=t;i=t={annotationType:et.INK,color:Array.from(g),thickness:v,opacity:w,paths:{points:u},boxes:null,pageIndex:R-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:F,richText:C,comment:(S==null?void 0:S.str)||null,creationDate:I,modificationDate:O}}const a=await super.deserialize(t,n,r);return a._initialData=i,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new B1(this)),[["colorPicker",this._colorPicker]]}get colorType(){return pt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=P2.getDefaultDrawingOptions({stroke:Te.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":u}}=this,d=Object.assign(super.serialize(t),{color:tn._colorManager.convert(i),opacity:a,thickness:u,paths:{lines:n,points:r}});return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!P(this,ox,e7).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};ox=new WeakSet,e7=function(t){const{color:n,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((u,d)=>u!==n[d])||t.thickness!==r||t.opacity!==i||t.pageIndex!==a},oe(P2,"_type","ink"),oe(P2,"_editorType",et.INK),oe(P2,"_defaultDrawingOptions",null);let mF=P2;class gF extends H0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const pA=8,Fg=3;var tp,It,yF,ba,t7,n7,wF,r1,r7,s7,i7,vF,AF,a7;class nc{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},i,a,u,d){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const g=200,w=f.font=`${n} ${r} ${g}px ${t}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:F,actualBoundingBoxAscent:C,actualBoundingBoxDescent:S,fontBoundingBoxAscent:I,fontBoundingBoxDescent:O,width:R}=f.measureText(e),B=1.5,z=Math.ceil(Math.max(Math.abs(v)+Math.abs(F)||0,R)*B),W=Math.ceil(Math.max(Math.abs(C)+Math.abs(S)||g,Math.abs(I)+Math.abs(O)||g)*B);h=new OffscreenCanvas(z,W),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=w,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,z,W),f.fillStyle="black",f.fillText(e,z*(B-1)/2,W*(3-B)/2);const D=P(this,It,vF).call(this,f.getImageData(0,0,z,W).data),N=P(this,It,i7).call(this,D),L=P(this,It,AF).call(this,N),V=P(this,It,wF).call(this,D,z,W,L);return this.processDrawnLines({lines:{curves:V,width:z,height:W},pageWidth:i,pageHeight:a,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,i){const[a,u,d]=P(this,It,a7).call(this,e),[h,f]=P(this,It,s7).call(this,a,u,d,Math.hypot(u,d)*c(this,tp).sigmaSFactor,c(this,tp).sigmaR,c(this,tp).kernelSize),g=P(this,It,AF).call(this,f),w=P(this,It,wF).call(this,h,u,d,g);return this.processDrawnLines({lines:{curves:w,width:u,height:d},pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:a,areContours:u}){r%180!==0&&([t,n]=[n,t]);const{curves:d,width:h,height:f}=e,g=e.thickness??0,w=[],v=Math.min(t/h,n/f),F=v/t,C=v/n,S=[];for(const{points:O}of d){const R=a?P(this,It,r7).call(this,O):O;if(!R)continue;S.push(R);const B=R.length,z=new Float32Array(B),W=new Float32Array(3*(B===2?2:B-2));if(w.push({line:W,points:z}),B===2){z[0]=R[0]*F,z[1]=R[1]*C,W.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[D,N,L,V]=R;D*=F,N*=C,L*=F,V*=C,z.set([D,N,L,V],0),W.set([NaN,NaN,NaN,NaN,D,N],0);for(let $=4;$<B;$+=2){const K=z[$]=R[$]*F,U=z[$+1]=R[$+1]*C;W.set(De.createBezierPoints(D,N,L,V,K,U),($-2)*3),[D,N,L,V]=[L,V,K,U]}}if(w.length===0)return null;const I=u?new gF:new H0;return I.build(w,t,n,1,r,u?0:g,i),{outline:I,newCurves:S,areContours:u,thickness:g,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:i}){let a=1/0,u=-1/0,d=0;for(const R of e){d+=R.length;for(let B=2,z=R.length;B<z;B++){const W=R[B]-R[B-2];a=Math.min(a,W),u=Math.max(u,W)}}let h;a>=-128&&u<=127?h=Int8Array:a>=-32768&&u<=32767?h=Int16Array:h=Int32Array;const f=e.length,g=pA+Fg*f,w=new Uint32Array(g);let v=0;w[v++]=g*Uint32Array.BYTES_PER_ELEMENT+(d-2*f)*h.BYTES_PER_ELEMENT,w[v++]=0,w[v++]=r,w[v++]=i,w[v++]=t?0:1,w[v++]=Math.max(0,Math.floor(n??0)),w[v++]=f,w[v++]=h.BYTES_PER_ELEMENT;for(const R of e)w[v++]=R.length-2,w[v++]=R[0],w[v++]=R[1];const F=new CompressionStream("deflate-raw"),C=F.writable.getWriter();await C.ready,C.write(w);const S=h.prototype.constructor;for(const R of e){const B=new S(R.length-2);for(let z=2,W=R.length;z<W;z++)B[z-2]=R[z]-R[z-2];C.write(B)}C.close();const I=await new Response(F.readable).arrayBuffer();return new Uint8Array(I).toBase64()}static async decompressSignature(e){try{const t=Uint8Array.fromBase64(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,u=0;for await(const R of n)a||(a=new Uint8Array(new Uint32Array(R.buffer,0,4)[0])),a.set(R,u),u+=R.length;const d=new Uint32Array(a.buffer,0,a.length>>2),h=d[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=d[2],g=d[3],w=d[4]===0,v=d[5],F=d[6],C=d[7],S=[],I=(pA+Fg*F)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(C){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(a.buffer,I);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(a.buffer,I);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(a.buffer,I);break}u=0;for(let R=0;R<F;R++){const B=d[Fg*R+pA],z=new Float32Array(B+2);S.push(z);for(let W=0;W<Fg-1;W++)z[W]=d[Fg*R+pA+W+1];for(let W=0;W<B;W++)z[W+2]=z[W]+O[u++]}return{areContours:w,thickness:v,outlines:S,width:f,height:g}}catch(t){return Xe(`decompressSignature: ${t}`),null}}}tp=new WeakMap,It=new WeakSet,yF=function(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r},ba=new WeakMap,t7=function(e,t,n,r,i,a,u){const d=P(this,It,yF).call(this,n,r,i,a);for(let h=0;h<8;h++){const f=(-h+d-u+16)%8,g=c(this,ba)[2*f],w=c(this,ba)[2*f+1];if(e[(n+g)*t+(r+w)]!==0)return f}return-1},n7=function(e,t,n,r,i,a,u){const d=P(this,It,yF).call(this,n,r,i,a);for(let h=0;h<8;h++){const f=(h+d+u+16)%8,g=c(this,ba)[2*f],w=c(this,ba)[2*f+1];if(e[(n+g)*t+(r+w)]!==0)return f}return-1},wF=function(e,t,n,r){const i=e.length,a=new Int32Array(i);for(let f=0;f<i;f++)a[f]=e[f]<=r?1:0;for(let f=1;f<n-1;f++)a[f*t]=a[f*t+t-1]=0;for(let f=0;f<t;f++)a[f]=a[t*n-1-f]=0;let u=1,d;const h=[];for(let f=1;f<n-1;f++){d=1;for(let g=1;g<t-1;g++){const w=f*t+g,v=a[w];if(v===0)continue;let F=f,C=g;if(v===1&&a[w-1]===0)u+=1,C-=1;else if(v>=1&&a[w+1]===0)u+=1,C+=1,v>1&&(d=v);else{v!==1&&(d=Math.abs(v));continue}const S=[g,f],I=C===g+1,O={isHole:I,points:S,id:u,parent:0};h.push(O);let R;for(const $ of h)if($.id===d){R=$;break}R?R.isHole?O.parent=I?R.parent:d:O.parent=I?d:R.parent:O.parent=I?d:0;const B=P(this,It,t7).call(this,a,t,f,g,F,C,0);if(B===-1){a[w]=-u,a[w]!==1&&(d=Math.abs(a[w]));continue}let z=c(this,ba)[2*B],W=c(this,ba)[2*B+1];const D=f+z,N=g+W;F=D,C=N;let L=f,V=g;for(;;){const $=P(this,It,n7).call(this,a,t,L,V,F,C,1);z=c(this,ba)[2*$],W=c(this,ba)[2*$+1];const K=L+z,U=V+W;S.push(U,K);const me=L*t+V;if(a[me+1]===0?a[me]=-u:a[me]===1&&(a[me]=u),K===f&&U===g&&L===D&&V===N){a[w]!==1&&(d=Math.abs(a[w]));break}else F=L,C=V,L=K,V=U}}}return h},r1=function(e,t,n,r){if(n-t<=4){for(let D=t;D<n-2;D+=2)r.push(e[D],e[D+1]);return}const i=e[t],a=e[t+1],u=e[n-4]-i,d=e[n-3]-a,h=Math.hypot(u,d),f=u/h,g=d/h,w=f*a-g*i,v=d/u,F=1/h,C=Math.atan(v),S=Math.cos(C),I=Math.sin(C),O=F*(Math.abs(S)+Math.abs(I)),R=F*(1-O+O**2),B=Math.max(Math.atan(Math.abs(I+S)*R),Math.atan(Math.abs(I-S)*R));let z=0,W=t;for(let D=t+2;D<n-2;D+=2){const N=Math.abs(w-f*e[D+1]+g*e[D]);N>z&&(W=D,z=N)}z>(h*B)**2?(P(this,It,r1).call(this,e,t,W+2,r),P(this,It,r1).call(this,e,W,n,r)):r.push(i,a)},r7=function(e){const t=[],n=e.length;return P(this,It,r1).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},s7=function(e,t,n,r,i,a){const u=new Float32Array(a**2),d=-2*r**2,h=a>>1;for(let C=0;C<a;C++){const S=(C-h)**2;for(let I=0;I<a;I++)u[C*a+I]=Math.exp((S+(I-h)**2)/d)}const f=new Float32Array(256),g=-2*i**2;for(let C=0;C<256;C++)f[C]=Math.exp(C**2/g);const w=e.length,v=new Uint8Array(w),F=new Uint32Array(256);for(let C=0;C<n;C++)for(let S=0;S<t;S++){const I=C*t+S,O=e[I];let R=0,B=0;for(let W=0;W<a;W++){const D=C+W-h;if(!(D<0||D>=n))for(let N=0;N<a;N++){const L=S+N-h;if(L<0||L>=t)continue;const V=e[D*t+L],$=u[W*a+N]*f[Math.abs(V-O)];R+=V*$,B+=$}}const z=v[I]=Math.round(R/B);F[z]++}return[v,F]},i7=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},vF=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let u=0,d=n.length;u<d;u++){const h=n[u]=e[u<<2];r=Math.max(r,h),i=Math.min(i,h)}const a=255/(r-i);for(let u=0,d=n.length;u<d;u++)n[u]=(n[u]-i)*a;return n},AF=function(e){let t,n=-1/0,r=-1/0;const i=e.findIndex(d=>d!==0);let a=i,u=i;for(t=i;t<256;t++){const d=e[t];d>n&&(t-a>r&&(r=t-a,u=t-1),n=d,a=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t},a7=function(e){const t=e,{width:n,height:r}=e,{maxDim:i}=c(this,tp);let a=n,u=r;if(n>i||r>i){let w=n,v=r,F=Math.log2(Math.max(n,r)/i);const C=Math.floor(F);F=F===C?C-1:C;for(let I=0;I<F;I++){a=Math.ceil(w/2),u=Math.ceil(v/2);const O=new OffscreenCanvas(a,u);O.getContext("2d").drawImage(e,0,0,w,v,0,0,a,u),w=a,v=u,e!==t&&e.close(),e=O.transferToImageBitmap()}const S=Math.min(i/a,i/u);a=Math.round(a*S),u=Math.round(u*S)}const h=new OffscreenCanvas(a,u).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,a,u),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,a,u);const f=h.getImageData(0,0,a,u).data;return[P(this,It,vF).call(this,f),a,u]},T(nc,It),T(nc,tp,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),T(nc,ba,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class tT extends KO{constructor(){super(),super.updateProperties({fill:tn._defaultLineColor,"stroke-width":0})}clone(){const e=new tT;return e.updateAll(this),e}}class nT extends Yx{constructor(e){super(e),super.updateProperties({stroke:tn._defaultLineColor,"stroke-width":1})}clone(){const e=new nT(this._viewParameters);return e.updateAll(this),e}}var Nu,Ro,Mu,np;const Ys=class Ys extends $1{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});T(this,Nu,!1);T(this,Ro,null);T(this,Mu,null);T(this,np,null);this._willKeepAspectRatio=!0,_(this,Mu,t.signatureData||null),_(this,Ro,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){tn.initialize(t,n),this._defaultDrawingOptions=new tT,this._defaultDrawnSignatureOptions=new nT(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ye(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,Ro)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(c(this,Mu)){const{lines:i,mustSmooth:a,areContours:u,description:d,uuid:h,heightInPage:f}=c(this,Mu),{rawDims:{pageWidth:g,pageHeight:w},rotation:v}=this.parent.viewport,F=nc.processDrawnLines({lines:i,pageWidth:g,pageHeight:w,rotation:v,innerMargin:Ys._INNER_MARGIN,mustSmooth:a,areContours:u});this.addSignature(F,f,d,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,Ro)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){_(this,np,t),this.addEditToolbar()}getUuid(){return c(this,np)}get description(){return c(this,Ro)}set description(t){_(this,Ro,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:r,width:i,height:a}=c(this,Mu),u=Math.max(i,a),d=nc.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:r,width:i,height:a},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,i){const{x:a,y:u}=this,{outline:d}=_(this,Mu,t);_(this,Nu,d instanceof gF),this.description=r;let h;c(this,Nu)?h=Ys.getDefaultDrawingOptions():(h=Ys._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:h});const[,f]=this.pageDimensions;let g=n/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=a,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return nc.process(t,n,r,i,Ys._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return nc.extractContoursFromText(t,n,r,i,a,Ys._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return nc.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:i,innerMargin:Ys._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Ys.getDefaultDrawingOptions():(this._drawingOptions=Ys._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:c(this,Nu),color:[0,0,0],thickness:c(this,Nu)?0:i});return this.addComment(a),t?(a.paths={lines:n,points:r},a.uuid=c(this,np),a.isCopy=!0):a.lines=n,c(this,Ro)&&(a.accessibilityData={type:"Figure",alt:c(this,Ro)}),a}static deserializeDraw(t,n,r,i,a,u){return u.areContours?gF.deserialize(t,n,r,i,a,u):H0.deserialize(t,n,r,i,a,u)}static async deserialize(t,n,r){var a;const i=await super.deserialize(t,n,r);return _(i,Nu,t.areContours),i.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",_(i,np,t.uuid),i}};Nu=new WeakMap,Ro=new WeakMap,Mu=new WeakMap,np=new WeakMap,oe(Ys,"_type","signature"),oe(Ys,"_editorType",et.SIGNATURE),oe(Ys,"_defaultDrawingOptions",null);let xF=Ys;var fn,gr,Lu,Yl,Ou,am,Jl,rp,Do,gi,om,vt,ey,ty,s1,i1,a1,EF,o1,o7;class _F extends tn{constructor(t){super({...t,name:"stampEditor"});T(this,vt);T(this,fn,null);T(this,gr,null);T(this,Lu,null);T(this,Yl,null);T(this,Ou,null);T(this,am,"");T(this,Jl,null);T(this,rp,!1);T(this,Do,null);T(this,gi,!1);T(this,om,!1);_(this,Yl,t.bitmapUrl),_(this,Ou,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){tn.initialize(t,n)}static isHandlingMimeForPasting(t){return iC.includes(t)}static paste(t,n){n.pasteEditor({mode:et.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:u}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:i,width:a,height:u,channels:i.length/(a*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const h=d.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t;c(this,gr)&&(_(this,fn,null),this._uiManager.imageManager.deleteId(c(this,gr)),(t=c(this,Jl))==null||t.remove(),_(this,Jl,null),c(this,Do)&&(clearTimeout(c(this,Do)),_(this,Do,null))),super.remove()}rebuild(){if(!this.parent){c(this,gr)&&P(this,vt,s1).call(this);return}super.rebuild(),this.div!==null&&(c(this,gr)&&c(this,Jl)===null&&P(this,vt,s1).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,Lu)||c(this,fn)||c(this,Yl)||c(this,Ou)||c(this,gr)||c(this,rp))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,rp)||(c(this,fn)?P(this,vt,i1).call(this):P(this,vt,s1).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(_(this,gr,r),i&&_(this,fn,i),_(this,rp,!1),P(this,vt,i1).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Do)!==null&&clearTimeout(c(this,Do)),_(this,Do,setTimeout(()=>{_(this,Do,null),P(this,vt,EF).call(this)},200))}copyCanvas(t,n,r=!1){t||(t=224);const{width:i,height:a}=c(this,fn),u=new qo;let d=c(this,fn),h=i,f=a,g=null;if(n){if(i>n||a>n){const D=Math.min(n/i,n/a);h=Math.floor(i*D),f=Math.floor(a*D)}g=document.createElement("canvas");const v=g.width=Math.ceil(h*u.sx),F=g.height=Math.ceil(f*u.sy);c(this,gi)||(d=P(this,vt,a1).call(this,v,F));const C=g.getContext("2d");C.filter=this._uiManager.hcmFilter;let S="white",I="#cfcfd8";this._uiManager.hcmFilter!=="none"?I="black":FG.isDarkMode&&(S="#8f8f9d",I="#42414d");const O=15,R=O*u.sx,B=O*u.sy,z=new OffscreenCanvas(R*2,B*2),W=z.getContext("2d");W.fillStyle=S,W.fillRect(0,0,R*2,B*2),W.fillStyle=I,W.fillRect(0,0,R,B),W.fillRect(R,B,R,B),C.fillStyle=C.createPattern(z,"repeat"),C.fillRect(0,0,v,F),C.drawImage(d,0,0,d.width,d.height,0,0,v,F)}let w=null;if(r){let v,F;if(u.symmetric&&d.width<t&&d.height<t)v=d.width,F=d.height;else if(d=c(this,fn),i>t||a>t){const I=Math.min(t/i,t/a);v=Math.floor(i*I),F=Math.floor(a*I),c(this,gi)||(d=P(this,vt,a1).call(this,v,F))}const S=new OffscreenCanvas(v,F).getContext("2d",{willReadFrequently:!0});S.drawImage(d,0,0,d.width,d.height,0,0,v,F),w={width:v,height:F,data:S.getImageData(0,0,v,F).data}}return{canvas:g,width:h,height:f,imageData:w}}static async deserialize(t,n,r){var S;let i=null,a=!1;if(t instanceof EO){const{data:{rect:I,rotation:O,id:R,structParent:B,popupRef:z,richText:W,contentsObj:D,creationDate:N,modificationDate:L},container:V,parent:{page:{pageNumber:$}},canvas:K}=t;let U,me;K?(delete t.canvas,{id:U,bitmap:me}=r.imageManager.getFromCanvas(V.id,K),K.remove()):(a=!0,t._hasNoCanvas=!0);const Ae=((S=await n._structTree.getAriaAttributes(`${F2}${R}`))==null?void 0:S.get("aria-label"))||"";i=t={annotationType:et.STAMP,bitmapId:U,bitmap:me,pageIndex:$-1,rect:I.slice(0),rotation:O,annotationElementId:R,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:Ae},isSvg:!1,structParent:B,popupRef:z,richText:W,comment:(D==null?void 0:D.str)||null,creationDate:N,modificationDate:L}}const u=await super.deserialize(t,n,r),{rect:d,bitmap:h,bitmapUrl:f,bitmapId:g,isSvg:w,accessibilityData:v}=t;a?(r.addMissingCanvas(t.id,u),_(u,rp,!0)):g&&r.imageManager.isValidId(g)?(_(u,gr,g),h&&_(u,fn,h)):_(u,Yl,f),_(u,gi,w);const[F,C]=u.pageDimensions;return u.width=(d[2]-d[0])/F,u.height=(d[3]-d[1])/C,v&&(u.altTextData=v),u._initialData=i,t.comment&&u.setCommentData(t),_(u,om,!!i),u}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:c(this,gr),isSvg:c(this,gi)});if(this.addComment(r),t)return r.bitmapUrl=P(this,vt,o1).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const d=P(this,vt,o7).call(this,r);return d.isSame?null:(d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const u=c(this,gi)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(c(this,gr)))n.stamps.set(c(this,gr),{area:u,serialized:r}),r.bitmap=P(this,vt,o1).call(this,!1);else if(c(this,gi)){const d=n.stamps.get(c(this,gr));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=P(this,vt,o1).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}fn=new WeakMap,gr=new WeakMap,Lu=new WeakMap,Yl=new WeakMap,Ou=new WeakMap,am=new WeakMap,Jl=new WeakMap,rp=new WeakMap,Do=new WeakMap,gi=new WeakMap,om=new WeakMap,vt=new WeakSet,ey=function(t,n=!1){if(!t){this.remove();return}_(this,fn,t.bitmap),n||(_(this,gr,t.id),_(this,gi,t.isSvg)),t.file&&_(this,am,t.file.name),P(this,vt,i1).call(this)},ty=function(){if(_(this,Lu,null),this._uiManager.enableWaiting(!1),!!c(this,Jl)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,fn)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,fn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},s1=function(){if(c(this,gr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,gr)).then(r=>P(this,vt,ey).call(this,r,!0)).finally(()=>P(this,vt,ty).call(this));return}if(c(this,Yl)){const r=c(this,Yl);_(this,Yl,null),this._uiManager.enableWaiting(!0),_(this,Lu,this._uiManager.imageManager.getFromUrl(r).then(i=>P(this,vt,ey).call(this,i)).finally(()=>P(this,vt,ty).call(this)));return}if(c(this,Ou)){const r=c(this,Ou);_(this,Ou,null),this._uiManager.enableWaiting(!0),_(this,Lu,this._uiManager.imageManager.getFromFile(r).then(i=>P(this,vt,ey).call(this,i)).finally(()=>P(this,vt,ty).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=iC.join(",");const n=this._uiManager._signal;_(this,Lu,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),P(this,vt,ey).call(this,i)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>P(this,vt,ty).call(this))),t.click()},i1=function(){var h;const{div:t}=this;let{width:n,height:r}=c(this,fn);const[i,a]=this.pageDimensions,u=.75;if(this.width)n=this.width*i,r=this.height*a;else if(n>u*i||r>u*a){const f=Math.min(u*i/n,u*a/r);n*=f,r*=f}this._uiManager.enableWaiting(!1);const d=_(this,Jl,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/i,this.height=r/a,this.setDims(),(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),P(this,vt,EF).call(this),c(this,om)||(this.parent.addUndoableEditor(this),_(this,om,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,am)&&this.div.setAttribute("aria-description",c(this,am)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},a1=function(t,n){const{width:r,height:i}=c(this,fn);let a=r,u=i,d=c(this,fn);for(;a>2*t||u>2*n;){const h=a,f=u;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(a,u);g.getContext("2d").drawImage(d,0,0,h,f,0,0,a,u),d=g.transferToImageBitmap()}return d},EF=function(){const[t,n]=this.parentDimensions,{width:r,height:i}=this,a=new qo,u=Math.ceil(r*t*a.sx),d=Math.ceil(i*n*a.sy),h=c(this,Jl);if(!h||h.width===u&&h.height===d)return;h.width=u,h.height=d;const f=c(this,gi)?c(this,fn):P(this,vt,a1).call(this,u,d),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,u,d)},o1=function(t){if(t){if(c(this,gi)){const i=this._uiManager.imageManager.getSvgUrl(c(this,gr));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,fn),n.getContext("2d").drawImage(c(this,fn),0,0),n.toDataURL()}if(c(this,gi)){const[n,r]=this.pageDimensions,i=Math.round(this.width*n*ad.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*ad.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(i,a);return u.getContext("2d").drawImage(c(this,fn),0,0,c(this,fn).width,c(this,fn).height,0,0,i,a),u.transferToImageBitmap()}return structuredClone(c(this,fn))},o7=function(t){var u;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===n,a=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},oe(_F,"_type","stamp"),oe(_F,"_editorType",et.STAMP);var sp,lm,Bu,ju,Zl,Ns,Uu,cm,um,Ca,ec,yr,tc,Vu,dm,Be,$u,qt,CF,l7,co,FF,SF,l1;const fa=class fa{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:i,annotationLayer:a,drawLayer:u,textLayer:d,viewport:h,l10n:f}){T(this,qt);T(this,sp);T(this,lm,!1);T(this,Bu,null);T(this,ju,null);T(this,Zl,null);T(this,Ns,new Map);T(this,Uu,!1);T(this,cm,!1);T(this,um,!1);T(this,Ca,null);T(this,ec,null);T(this,yr,null);T(this,tc,null);T(this,Vu,null);T(this,dm,-1);T(this,Be);const g=[...c(fa,$u).values()];if(!fa._initialized){fa._initialized=!0;for(const w of g)w.initialize(f,e)}e.registerEditorTypes(g),_(this,Be,e),this.pageIndex=t,this.div=n,_(this,sp,i),_(this,Bu,a),this.viewport=h,_(this,yr,d),this.drawLayer=u,this._structTree=r,c(this,Be).addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return c(this,Ns).size===0}get isInvisible(){return this.isEmpty&&c(this,Be).getMode()===et.NONE}updateToolbar(e){c(this,Be).updateToolbar(e)}updateMode(e=c(this,Be).getMode()){switch(P(this,qt,l1).call(this),e){case et.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case et.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case et.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===et.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of c(fa,$u).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,yr))==null?void 0:t.div)}setEditingState(e){c(this,Be).setEditingState(e)}addCommands(e){c(this,Be).addCommands(e)}cleanUndoStack(e){c(this,Be).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,Bu))==null||t.togglePointerEvents(e)}async enable(){var n;_(this,um,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=c(this,Vu))==null||n.abort(),_(this,Vu,null);const e=new Set;for(const r of c(this,qt,CF))r.enableEditing(),r.show(!0),r.annotationElementId&&(c(this,Be).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=c(this,Bu);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),c(this,Be).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}_(this,um,!1),c(this,Be)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(_(this,cm,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,yr)&&!c(this,Vu)){_(this,Vu,new AbortController);const i=c(this,Be).combinedSignal(c(this,Vu));c(this,yr).div.addEventListener("pointerdown",a=>{const{clientX:d,clientY:h,timeStamp:f}=a,g=c(this,dm);if(f-g>500){_(this,dm,f);return}_(this,dm,-1);const{classList:w}=this.div;w.toggle("getElements",!0);const v=document.elementsFromPoint(d,h);if(w.toggle("getElements",!1),!this.div.contains(v[0]))return;let F;const C=new RegExp(`^${xy}[0-9]+$`);for(const I of v)if(C.test(I.id)){F=I.id;break}if(!F)return;const S=c(this,Ns).get(F);(S==null?void 0:S.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),S.dblclick(a))},{signal:i,capture:!0})}const e=c(this,Bu),t=[];if(e){const i=new Map,a=new Map;for(const d of c(this,qt,CF)){if(d.disableEditing(),!d.annotationElementId){t.push(d);continue}if(d.serialize()!==null){i.set(d.annotationElementId,d);continue}else a.set(d.annotationElementId,d);(r=this.getEditableAnnotation(d.annotationElementId))==null||r.show(),d.remove()}const u=e.getEditableAnnotations();for(const d of u){const{id:h}=d.data;if(c(this,Be).isDeletedAnnotationElement(h)){d.updateEdited({deleted:!0});continue}let f=a.get(h);if(f){f.resetAnnotationElement(d),f.show(!1),d.show();continue}f=i.get(h),f&&(c(this,Be).addChangedExistingAnnotation(f),f.renderAnnotationElement(d)&&f.show(!1)),d.show()}}P(this,qt,l1).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of c(fa,$u).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),_(this,cm,!1)}getEditableAnnotation(e){var t;return((t=c(this,Bu))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,Be).getActive()!==e&&c(this,Be).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,yr))!=null&&e.div&&!c(this,tc)){_(this,tc,new AbortController);const t=c(this,Be).combinedSignal(c(this,tc));c(this,yr).div.addEventListener("pointerdown",P(this,qt,l7).bind(this),{signal:t}),c(this,yr).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,yr))!=null&&e.div&&c(this,tc)&&(c(this,tc).abort(),_(this,tc,null),c(this,yr).div.classList.remove("highlighting"))}enableClick(){if(c(this,ju))return;_(this,ju,new AbortController);const e=c(this,Be).combinedSignal(c(this,ju));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,ju))==null||e.abort(),_(this,ju,null)}attach(e){c(this,Ns).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,Be).isDeletedAnnotationElement(t)&&c(this,Be).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,Ns).delete(e.id),(t=c(this,sp))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,cm)&&e.annotationElementId&&c(this,Be).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,Be).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,Be).addDeletedAnnotationElement(e),tn.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,Be).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,um)),c(this,Be).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,Zl)&&(e._focusEventsAllowed=!1,_(this,Zl,setTimeout(()=>{_(this,Zl,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,Be)._signal}),t.focus())},0))),e._structTreeParentId=(n=c(this,sp))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of c(this,Ns).values())if(t.uid===e)return t;return null}getNextId(){return c(this,Be).getId()}combinedSignal(e){return c(this,Be).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,qt,co))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c(this,Be).updateMode(e.mode);const{offsetX:n,offsetY:r}=P(this,qt,SF).call(this),i=this.getNextId(),a=P(this,qt,FF).call(this,{parent:this,id:i,x:n,y:r,uiManager:c(this,Be),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=c(fa,$u).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,Be)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),i=P(this,qt,FF).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,Be),isCentered:t,...n});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(P(this,qt,SF).call(this),!0,e)}setSelected(e){c(this,Be).setSelected(e)}toggleSelected(e){c(this,Be).toggleSelected(e)}unselect(e){c(this,Be).unselect(e)}pointerup(e){var r;const{isMac:t}=ar.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!c(this,Uu)||(_(this,Uu,!1),(r=c(this,qt,co))!=null&&r.isDrawer&&c(this,qt,co).supportMultipleDrawings))return;if(!c(this,lm)){_(this,lm,!0);return}const n=c(this,Be).getMode();if(n===et.STAMP||n===et.SIGNATURE){c(this,Be).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(c(this,Be).getMode()===et.HIGHLIGHT&&this.enableTextSelection(),c(this,Uu)){_(this,Uu,!1);return}const{isMac:t}=ar.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(_(this,Uu,!0),(r=c(this,qt,co))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=c(this,Be).getActive();_(this,lm,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(this,Ca)){c(this,qt,co).startDrawing(this,c(this,Be),!1,e);return}c(this,Be).setCurrentDrawingSession(this),_(this,Ca,new AbortController);const t=c(this,Be).combinedSignal(c(this,Ca));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(_(this,ec,null),this.commitOrRemove())},{signal:t}),c(this,qt,co).startDrawing(this,c(this,Be),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&_(this,ec,t);return}c(this,ec)&&setTimeout(()=>{var t;(t=c(this,ec))==null||t.focus(),_(this,ec,null)},0)}endDrawingSession(e=!1){return c(this,Ca)?(c(this,Be).setCurrentDrawingSession(null),c(this,Ca).abort(),_(this,Ca,null),_(this,ec,null),c(this,qt,co).endDrawing(e)):null}findNewParent(e,t,n){const r=c(this,Be).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return c(this,Ca)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Ca)&&c(this,qt,co).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,Be).getActive())==null?void 0:e.parent)===this&&(c(this,Be).commitOrRemove(),c(this,Be).setActiveEditor(null)),c(this,Zl)&&(clearTimeout(c(this,Zl)),_(this,Zl,null));for(const n of c(this,Ns).values())(t=c(this,sp))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,Ns).clear(),c(this,Be).removeLayer(this)}render({viewport:e}){this.viewport=e,wp(this.div,e);for(const t of c(this,Be).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,Be).commitOrRemove(),P(this,qt,l1).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,wp(this.div,{rotation:n}),t!==n)for(const r of c(this,Ns).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,Be).viewParameters.realScale}};sp=new WeakMap,lm=new WeakMap,Bu=new WeakMap,ju=new WeakMap,Zl=new WeakMap,Ns=new WeakMap,Uu=new WeakMap,cm=new WeakMap,um=new WeakMap,Ca=new WeakMap,ec=new WeakMap,yr=new WeakMap,tc=new WeakMap,Vu=new WeakMap,dm=new WeakMap,Be=new WeakMap,$u=new WeakMap,qt=new WeakSet,CF=function(){return c(this,Ns).size!==0?c(this,Ns).values():c(this,Be).getEditors(this.pageIndex)},l7=function(e){c(this,Be).unselectAll();const{target:t}=e;if(t===c(this,yr).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,yr).div.contains(t)){const{isMac:n}=ar.platform;if(e.button!==0||e.ctrlKey&&n)return;c(this,Be).showAllEditors("highlight",!0,!0),c(this,yr).div.classList.add("free"),this.toggleDrawing(),V1.startHighlighting(this,c(this,Be).direction==="ltr",{target:c(this,yr).div,x:e.x,y:e.y}),c(this,yr).div.addEventListener("pointerup",()=>{c(this,yr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,Be)._signal}),e.preventDefault()}},co=function(){return c(fa,$u).get(c(this,Be).getMode())},FF=function(e){const t=c(this,qt,co);return t?new t.prototype.constructor(e):null},SF=function(){const{x:e,y:t,width:n,height:r}=this.boundingClientRect,i=Math.max(0,e),a=Math.max(0,t),u=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+r),h=(i+u)/2-e,f=(a+d)/2-t,[g,w]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:w}},l1=function(){for(const e of c(this,Ns).values())e.isEmpty()&&e.remove()},oe(fa,"_initialized",!1),T(fa,$u,new Map([iF,mF,_F,V1,xF].map(e=>[e._editorType,e])));let bF=fa;var Fa,us,ip,A0,lx,c7,Ko,kF,u7,IF;const nr=class nr{constructor(){T(this,Ko);T(this,Fa,null);T(this,us,new Map);T(this,ip,new Map)}setParent(e){if(!c(this,Fa)){_(this,Fa,e);return}if(c(this,Fa)!==e){if(c(this,us).size>0)for(const t of c(this,us).values())t.remove(),e.append(t);_(this,Fa,e)}}static get _svgFactory(){return Ye(this,"_svgFactory",new j1)}draw(e,t=!1,n=!1){const r=er(nr,A0)._++,i=P(this,Ko,kF).call(this),a=nr._svgFactory.createElement("defs");i.append(a);const u=nr._svgFactory.createElement("path");a.append(u);const d=`path_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,ip).set(r,u);const h=n?P(this,Ko,u7).call(this,a,d):null,f=nr._svgFactory.createElement("use");return i.append(f),f.setAttribute("href",`#${d}`),this.updateProperties(i,e),c(this,us).set(r,i),{id:r,clipPathId:`url(#${h})`}}drawOutline(e,t){const n=er(nr,A0)._++,r=P(this,Ko,kF).call(this),i=nr._svgFactory.createElement("defs");r.append(i);const a=nr._svgFactory.createElement("path");i.append(a);const u=`path_${n}`;a.setAttribute("id",u),a.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const g=nr._svgFactory.createElement("mask");i.append(g),d=`mask_${n}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const w=nr._svgFactory.createElement("rect");g.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const v=nr._svgFactory.createElement("use");g.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const h=nr._svgFactory.createElement("use");r.append(h),h.setAttribute("href",`#${u}`),d&&h.setAttribute("mask",`url(#${d})`);const f=h.cloneNode();return r.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(r,e),c(this,us).set(n,r),n}finalizeDraw(e,t){c(this,ip).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:n,bbox:r,rootClass:i,path:a}=t,u=typeof e=="number"?c(this,us).get(e):e;if(u){if(n&&P(this,Ko,IF).call(this,u,n),r&&P(d=nr,lx,c7).call(d,u,r),i){const{classList:h}=u;for(const[f,g]of Object.entries(i))h.toggle(f,g)}if(a){const f=u.firstElementChild.firstElementChild;P(this,Ko,IF).call(this,f,a)}}}updateParent(e,t){if(t===this)return;const n=c(this,us).get(e);n&&(c(t,Fa).append(n),c(this,us).delete(e),c(t,us).set(e,n))}remove(e){c(this,ip).delete(e),c(this,Fa)!==null&&(c(this,us).get(e).remove(),c(this,us).delete(e))}destroy(){_(this,Fa,null);for(const e of c(this,us).values())e.remove();c(this,us).clear(),c(this,ip).clear()}};Fa=new WeakMap,us=new WeakMap,ip=new WeakMap,A0=new WeakMap,lx=new WeakSet,c7=function(e,[t,n,r,i]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*i}%`},Ko=new WeakSet,kF=function(){const e=nr._svgFactory.create(1,1,!0);return c(this,Fa).append(e),e.setAttribute("aria-hidden",!0),e},u7=function(e,t){const n=nr._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=nr._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},IF=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},T(nr,lx),T(nr,A0,0);let TF=nr;globalThis._pdfjsTestingUtils={HighlightOutliner:oF};globalThis.pdfjsLib={AbortException:id,AnnotationEditorLayer:bF,AnnotationEditorParamsType:pt,AnnotationEditorType:et,AnnotationEditorUIManager:vp,AnnotationLayer:rF,AnnotationMode:Qc,AnnotationType:Hn,applyOpacity:TG,build:Mq,ColorPicker:O1,createValidAbsoluteUrl:zM,CSSConstants:SG,DOMSVGFactory:j1,DrawLayer:TF,FeatureTest:ar,fetchData:U0,findContrastColor:kG,getDocument:Xx,getFilenameFromUrl:xG,getPdfFilenameFromUrl:_G,getRGB:$0,getUuid:WM,getXfaPageViewport:bG,GlobalWorkerOptions:No,ImageKind:TA,InvalidPDFException:rC,isDataScheme:Hx,isPdfFile:KS,isValidExplicitDest:UG,MathClamp:Pr,noContextMenu:ra,normalizeUnicode:vG,OPS:_y,OutputScale:qo,PagesMapper:by,PasswordResponses:cG,PDFDataRangeTransport:lO,PDFDateString:P1,PDFWorker:Fy,PermissionFlag:lG,PixelsPerInch:ad,RenderingCancelledException:QS,renderRichText:qM,ResponseException:I1,setLayerDimensions:wp,shadow:Ye,SignatureExtractor:nc,stopEvent:In,SupportedImageMimeTypes:iC,TextLayer:Cy,TouchManager:D1,updateUrlHash:HM,Util:Te,VerbosityLevel:Ux,version:Nq,XfaLayer:GM};var sb={exports:{}},tD;function iQ(){return tD||(tD=1,(function(s){var e=(function(t){var n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(Z,J,H){Z[J]=H.value},a,u=typeof Symbol=="function"?Symbol:{},d=u.iterator||"@@iterator",h=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function g(Z,J,H){return Object.defineProperty(Z,J,{value:H,enumerable:!0,configurable:!0,writable:!0}),Z[J]}try{g({},"")}catch{g=function(J,H,Q){return J[H]=Q}}function w(Z,J,H,Q){var ae=J&&J.prototype instanceof R?J:R,ye=Object.create(ae.prototype),xe=new we(Q||[]);return i(ye,"_invoke",{value:K(Z,H,xe)}),ye}t.wrap=w;function v(Z,J,H){try{return{type:"normal",arg:Z.call(J,H)}}catch(Q){return{type:"throw",arg:Q}}}var F="suspendedStart",C="suspendedYield",S="executing",I="completed",O={};function R(){}function B(){}function z(){}var W={};g(W,d,function(){return this});var D=Object.getPrototypeOf,N=D&&D(D(fe([])));N&&N!==n&&r.call(N,d)&&(W=N);var L=z.prototype=R.prototype=Object.create(W);B.prototype=z,i(L,"constructor",{value:z,configurable:!0}),i(z,"constructor",{value:B,configurable:!0}),B.displayName=g(z,f,"GeneratorFunction");function V(Z){["next","throw","return"].forEach(function(J){g(Z,J,function(H){return this._invoke(J,H)})})}t.isGeneratorFunction=function(Z){var J=typeof Z=="function"&&Z.constructor;return J?J===B||(J.displayName||J.name)==="GeneratorFunction":!1},t.mark=function(Z){return Object.setPrototypeOf?Object.setPrototypeOf(Z,z):(Z.__proto__=z,g(Z,f,"GeneratorFunction")),Z.prototype=Object.create(L),Z},t.awrap=function(Z){return{__await:Z}};function $(Z,J){function H(ye,xe,Ee,Se){var Ue=v(Z[ye],Z,xe);if(Ue.type==="throw")Se(Ue.arg);else{var Ce=Ue.arg,Me=Ce.value;return Me&&typeof Me=="object"&&r.call(Me,"__await")?J.resolve(Me.__await).then(function(st){H("next",st,Ee,Se)},function(st){H("throw",st,Ee,Se)}):J.resolve(Me).then(function(st){Ce.value=st,Ee(Ce)},function(st){return H("throw",st,Ee,Se)})}}var Q;function ae(ye,xe){function Ee(){return new J(function(Se,Ue){H(ye,xe,Se,Ue)})}return Q=Q?Q.then(Ee,Ee):Ee()}i(this,"_invoke",{value:ae})}V($.prototype),g($.prototype,h,function(){return this}),t.AsyncIterator=$,t.async=function(Z,J,H,Q,ae){ae===void 0&&(ae=Promise);var ye=new $(w(Z,J,H,Q),ae);return t.isGeneratorFunction(J)?ye:ye.next().then(function(xe){return xe.done?xe.value:ye.next()})};function K(Z,J,H){var Q=F;return function(ye,xe){if(Q===S)throw new Error("Generator is already running");if(Q===I){if(ye==="throw")throw xe;return le()}for(H.method=ye,H.arg=xe;;){var Ee=H.delegate;if(Ee){var Se=U(Ee,H);if(Se){if(Se===O)continue;return Se}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if(Q===F)throw Q=I,H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);Q=S;var Ue=v(Z,J,H);if(Ue.type==="normal"){if(Q=H.done?I:C,Ue.arg===O)continue;return{value:Ue.arg,done:H.done}}else Ue.type==="throw"&&(Q=I,H.method="throw",H.arg=Ue.arg)}}}function U(Z,J){var H=J.method,Q=Z.iterator[H];if(Q===a)return J.delegate=null,H==="throw"&&Z.iterator.return&&(J.method="return",J.arg=a,U(Z,J),J.method==="throw")||H!=="return"&&(J.method="throw",J.arg=new TypeError("The iterator does not provide a '"+H+"' method")),O;var ae=v(Q,Z.iterator,J.arg);if(ae.type==="throw")return J.method="throw",J.arg=ae.arg,J.delegate=null,O;var ye=ae.arg;if(!ye)return J.method="throw",J.arg=new TypeError("iterator result is not an object"),J.delegate=null,O;if(ye.done)J[Z.resultName]=ye.value,J.next=Z.nextLoc,J.method!=="return"&&(J.method="next",J.arg=a);else return ye;return J.delegate=null,O}V(L),g(L,f,"Generator"),g(L,d,function(){return this}),g(L,"toString",function(){return"[object Generator]"});function me(Z){var J={tryLoc:Z[0]};1 in Z&&(J.catchLoc=Z[1]),2 in Z&&(J.finallyLoc=Z[2],J.afterLoc=Z[3]),this.tryEntries.push(J)}function Ae(Z){var J=Z.completion||{};J.type="normal",delete J.arg,Z.completion=J}function we(Z){this.tryEntries=[{tryLoc:"root"}],Z.forEach(me,this),this.reset(!0)}t.keys=function(Z){var J=Object(Z),H=[];for(var Q in J)H.push(Q);return H.reverse(),function ae(){for(;H.length;){var ye=H.pop();if(ye in J)return ae.value=ye,ae.done=!1,ae}return ae.done=!0,ae}};function fe(Z){if(Z){var J=Z[d];if(J)return J.call(Z);if(typeof Z.next=="function")return Z;if(!isNaN(Z.length)){var H=-1,Q=function ae(){for(;++H<Z.length;)if(r.call(Z,H))return ae.value=Z[H],ae.done=!1,ae;return ae.value=a,ae.done=!0,ae};return Q.next=Q}}return{next:le}}t.values=fe;function le(){return{value:a,done:!0}}return we.prototype={constructor:we,reset:function(Z){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(Ae),!Z)for(var J in this)J.charAt(0)==="t"&&r.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=a)},stop:function(){this.done=!0;var Z=this.tryEntries[0],J=Z.completion;if(J.type==="throw")throw J.arg;return this.rval},dispatchException:function(Z){if(this.done)throw Z;var J=this;function H(Se,Ue){return ye.type="throw",ye.arg=Z,J.next=Se,Ue&&(J.method="next",J.arg=a),!!Ue}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var ae=this.tryEntries[Q],ye=ae.completion;if(ae.tryLoc==="root")return H("end");if(ae.tryLoc<=this.prev){var xe=r.call(ae,"catchLoc"),Ee=r.call(ae,"finallyLoc");if(xe&&Ee){if(this.prev<ae.catchLoc)return H(ae.catchLoc,!0);if(this.prev<ae.finallyLoc)return H(ae.finallyLoc)}else if(xe){if(this.prev<ae.catchLoc)return H(ae.catchLoc,!0)}else if(Ee){if(this.prev<ae.finallyLoc)return H(ae.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Z,J){for(var H=this.tryEntries.length-1;H>=0;--H){var Q=this.tryEntries[H];if(Q.tryLoc<=this.prev&&r.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var ae=Q;break}}ae&&(Z==="break"||Z==="continue")&&ae.tryLoc<=J&&J<=ae.finallyLoc&&(ae=null);var ye=ae?ae.completion:{};return ye.type=Z,ye.arg=J,ae?(this.method="next",this.next=ae.finallyLoc,O):this.complete(ye)},complete:function(Z,J){if(Z.type==="throw")throw Z.arg;return Z.type==="break"||Z.type==="continue"?this.next=Z.arg:Z.type==="return"?(this.rval=this.arg=Z.arg,this.method="return",this.next="end"):Z.type==="normal"&&J&&(this.next=J),O},finish:function(Z){for(var J=this.tryEntries.length-1;J>=0;--J){var H=this.tryEntries[J];if(H.finallyLoc===Z)return this.complete(H.completion,H.afterLoc),Ae(H),O}},catch:function(Z){for(var J=this.tryEntries.length-1;J>=0;--J){var H=this.tryEntries[J];if(H.tryLoc===Z){var Q=H.completion;if(Q.type==="throw"){var ae=Q.arg;Ae(H)}return ae}}throw new Error("illegal catch attempt")},delegateYield:function(Z,J,H){return this.delegate={iterator:fe(Z),resultName:J,nextLoc:H},this.method==="next"&&(this.arg=a),O}},t})(s.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(sb)),sb.exports}var ib,nD;function rT(){return nD||(nD=1,ib=(s,e)=>`${s}-${e}-${Math.random().toString(16).slice(3,8)}`),ib}var ab,rD;function d7(){if(rD)return ab;rD=1;const s=rT();let e=0;return ab=({id:t,action:n,payload:r={}})=>{let i=t;return typeof i>"u"&&(i=s("Job",e),e+=1),{id:i,action:n,payload:r}},ab}var Sg={},sD;function sT(){if(sD)return Sg;sD=1;let s=!1;return Sg.logging=s,Sg.setLogging=e=>{s=e},Sg.log=(...e)=>s?console.log.apply(this,e):null,Sg}var ob,iD;function aQ(){if(iD)return ob;iD=1;const s=d7(),{log:e}=sT(),t=rT();let n=0;return ob=()=>{const r=t("Scheduler",n),i={},a={};let u=[];n+=1;const d=()=>u.length,h=()=>Object.keys(i).length,f=()=>{if(u.length!==0){const C=Object.keys(i);for(let S=0;S<C.length;S+=1)if(typeof a[C[S]]>"u"){u[0](i[C[S]]);break}}},g=(C,S)=>new Promise((I,O)=>{const R=s({action:C,payload:S});u.push(async B=>{u.shift(),a[B.id]=R;try{I(await B[C].apply(this,[...S,R.id]))}catch(z){O(z)}finally{delete a[B.id],f()}}),e(`[${r}]: Add ${R.id} to JobQueue`),e(`[${r}]: JobQueue length=${u.length}`),f()});return{addWorker:C=>(i[C.id]=C,e(`[${r}]: Add ${C.id}`),e(`[${r}]: Number of workers=${h()}`),f(),C.id),addJob:async(C,...S)=>{if(h()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return g(C,S)},terminate:async()=>{Object.keys(i).forEach(async C=>{await i[C].terminate()}),u=[]},getQueueLen:d,getNumWorkers:h}},ob}function oQ(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lb,aD;function lQ(){return aD||(aD=1,lb=s=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof oQ=="function"&&(e.type="node"),typeof s>"u"?e:e[s]}),lb}var cb,oD;function cQ(){if(oD)return cb;oD=1;const e=lQ()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return cb=t=>{const n={...t};return["corePath","workerPath","langPath"].forEach(r=>{t[r]&&(n[r]=e(n[r]))}),n},cb}var ub,lD;function h7(){return lD||(lD=1,ub={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ub}const uQ="7.0.0",dQ={version:uQ};var db,cD;function hQ(){return cD||(cD=1,db={workerBlobURL:!0,logger:()=>{}}),db}var hb,uD;function pQ(){if(uD)return hb;uD=1;const s=dQ.version;return hb={...hQ(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${s}/dist/worker.min.js`},hb}var pb,dD;function fQ(){return dD||(dD=1,pb=({workerPath:s,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const n=new Blob([`importScripts("${s}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(n))}else t=new Worker(s);return t}),pb}var fb,hD;function mQ(){return hD||(hD=1,fb=s=>{s.terminate()}),fb}var mb,pD;function gQ(){return pD||(pD=1,mb=(s,e)=>{s.onmessage=({data:t})=>{e(t)}}),mb}var gb,fD;function yQ(){return fD||(fD=1,gb=async(s,e)=>{s.postMessage(e)}),gb}var yb,mD;function wQ(){if(mD)return yb;mD=1;const s=t=>new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=({target:{error:{code:a}}})=>{r(Error(`File could not be read! Code=${a}`))},i.readAsArrayBuffer(t)}),e=async t=>{let n=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?n=atob(t.split(",")[1]).split("").map(r=>r.charCodeAt(0)):n=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(n=await e(t.src)),t.tagName==="VIDEO"&&(n=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(r=>{t.toBlob(async i=>{n=await s(i),r()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const r=await t.convertToBlob();n=await s(r)}else(t instanceof File||t instanceof Blob)&&(n=await s(t));return new Uint8Array(n)};return yb=e,yb}var wb,gD;function vQ(){if(gD)return wb;gD=1;const s=pQ(),e=fQ(),t=mQ(),n=gQ(),r=yQ(),i=wQ();return wb={defaultOptions:s,spawnWorker:e,terminateWorker:t,onMessage:n,send:r,loadImage:i},wb}var vb,yD;function p7(){if(yD)return vb;yD=1;const s=cQ(),e=d7(),{log:t}=sT(),n=rT(),r=h7(),{defaultOptions:i,spawnWorker:a,terminateWorker:u,onMessage:d,loadImage:h,send:f}=vQ();let g=0;return vb=async(w="eng",v=r.LSTM_ONLY,F={},C={})=>{const S=n("Worker",g),{logger:I,errorHandler:O,...R}=s({...i,...F}),B={},z=typeof w=="string"?w.split("+"):w;let W=v,D=C;const N=[r.DEFAULT,r.LSTM_ONLY].includes(v)&&!R.legacyCore;let L,V;const $=new Promise((Ce,Me)=>{V=Ce,L=Me}),K=Ce=>{L(Ce.message)};let U=a(R);U.onerror=K,g+=1;const me=({id:Ce,action:Me,payload:st})=>new Promise((Et,Lt)=>{t(`[${S}]: Start ${Ce}, action=${Me}`);const yn=`${Me}-${Ce}`;B[yn]={resolve:Et,reject:Lt},f(U,{workerId:S,jobId:Ce,action:Me,payload:st})}),Ae=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),we=Ce=>me(e({id:Ce,action:"load",payload:{options:{lstmOnly:N,corePath:R.corePath,logging:R.logging}}})),fe=(Ce,Me,st)=>me(e({id:st,action:"FS",payload:{method:"writeFile",args:[Ce,Me]}})),le=(Ce,Me)=>me(e({id:Me,action:"FS",payload:{method:"readFile",args:[Ce,{encoding:"utf8"}]}})),Z=(Ce,Me)=>me(e({id:Me,action:"FS",payload:{method:"unlink",args:[Ce]}})),J=(Ce,Me,st)=>me(e({id:st,action:"FS",payload:{method:Ce,args:Me}})),H=(Ce,Me)=>me(e({id:Me,action:"loadLanguage",payload:{langs:Ce,options:{langPath:R.langPath,dataPath:R.dataPath,cachePath:R.cachePath,cacheMethod:R.cacheMethod,gzip:R.gzip,lstmOnly:[r.DEFAULT,r.LSTM_ONLY].includes(W)&&!R.legacyLang}}})),Q=(Ce,Me,st,Et)=>me(e({id:Et,action:"initialize",payload:{langs:Ce,oem:Me,config:st}})),ae=(Ce="eng",Me,st,Et)=>{if(N&&[r.TESSERACT_ONLY,r.TESSERACT_LSTM_COMBINED].includes(Me))throw Error("Legacy model requested but code missing.");const Lt=Me||W;W=Lt;const yn=st||D;D=yn;const Br=(typeof Ce=="string"?Ce.split("+"):Ce).filter(ms=>!z.includes(ms));return z.push(...Br),Br.length>0?H(Br,Et).then(()=>Q(Ce,Lt,yn,Et)):Q(Ce,Lt,yn,Et)},ye=(Ce={},Me)=>me(e({id:Me,action:"setParameters",payload:{params:Ce}})),xe=async(Ce,Me={},st={text:!0},Et)=>me(e({id:Et,action:"recognize",payload:{image:await h(Ce),options:Me,output:st}})),Ee=async(Ce,Me)=>{if(N)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return me(e({id:Me,action:"detect",payload:{image:await h(Ce)}}))},Se=async()=>(U!==null&&(u(U),U=null),Promise.resolve());d(U,({workerId:Ce,jobId:Me,status:st,action:Et,data:Lt})=>{const yn=`${Et}-${Me}`;if(st==="resolve")t(`[${Ce}]: Complete ${Me}`),B[yn].resolve({jobId:Me,data:Lt}),delete B[yn];else if(st==="reject")if(B[yn].reject(Lt),delete B[yn],Et==="load"&&L(Lt),O)O(Lt);else throw Error(Lt);else st==="progress"&&I({...Lt,userJobId:Me})});const Ue={id:S,worker:U,load:Ae,writeText:fe,readText:le,removeFile:Z,FS:J,reinitialize:ae,setParameters:ye,recognize:xe,detect:Ee,terminate:Se};return we().then(()=>H(w)).then(()=>Q(w,v,C)).then(()=>V(Ue)).catch(()=>{}),$},vb}var Ab,wD;function AQ(){if(wD)return Ab;wD=1;const s=p7();return Ab={recognize:async(n,r,i)=>{const a=await s(r,1,i);return a.recognize(n).finally(async()=>{await a.terminate()})},detect:async(n,r)=>{const i=await s("osd",0,r);return i.detect(n).finally(async()=>{await i.terminate()})}},Ab}var xb,vD;function xQ(){return vD||(vD=1,xb={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),xb}var _b,AD;function _Q(){return AD||(AD=1,_b={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),_b}var Eb,xD;function EQ(){if(xD)return Eb;xD=1,iQ();const s=aQ(),e=p7(),t=AQ(),n=xQ(),r=h7(),i=_Q(),{setLogging:a}=sT();return Eb={languages:n,OEM:r,PSM:i,createScheduler:s,createWorker:e,setLogging:a,...t},Eb}var bQ=EQ();const CQ=ID(bQ);No.workerSrc="/studentmate-admin-panel/pdf.worker.min.mjs";function qd(s,e,t){return Math.max(e,Math.min(t,s))}function Jx(s){return s.replace(/\s+/g," ").trim()}function _D(s){const e=Jx(s),t=/^(?:Q(?:\s*U\s*E\s*S\s*T\s*I\s*O\s*N)?|Question|Answer|Solution)\s*[.:)\-]*\s*(\d+)/i,n=e.match(t);if(n){const a=parseInt(n[1],10);if(Number.isFinite(a))return{q:a}}const r=e.match(/^(\d{1,3})\.(\d{1,3})(?:\.\d{1,3})?/);if(r){const a=parseInt(r[1],10);if(Number.isFinite(a))return{q:a}}const i=e.match(/^\(?(\d{1,3})\)?\s*([.)\-:])\s+/);if(i){const a=parseInt(i[1],10);if(Number.isFinite(a))return{q:a}}return null}function ED(s){var t;const e=(t=s==null?void 0:s.transform)==null?void 0:t[3];return Math.abs(typeof e=="number"?e:0)}function bb(s){var t;const e=(t=s==null?void 0:s.transform)==null?void 0:t[4];return typeof e=="number"?e:0}function FQ(s){var t;const e=(t=s==null?void 0:s.transform)==null?void 0:t[5];return typeof e=="number"?e:0}function SQ(s,e){return e.height-s*e.scale}function TQ(s){if(!(s!=null&&s.length))return[];const e=s.map(ED).filter(i=>i>0).sort((i,a)=>i-a),t=e.length?e[Math.floor(e.length/2)]:10,n=qd(t*.6,3,10),r=[];for(const i of s){const a=FQ(i);let u=r.find(d=>Math.abs(d.y-a)<=n);u||(u={y:a,items:[]},r.push(u)),u.items.push(i)}return r.sort((i,a)=>a.y-i.y),r.map(i=>{i.items.sort((h,f)=>bb(h)-bb(f));const a=Jx(i.items.map(h=>h.str).join(" ")),u=Math.max(...i.items.map(ED)),d=Math.min(...i.items.map(bb));return{pdfY:i.y,minX:d,maxFont:u,text:a}})}function bD(s){const e=Jx(s);return/(Question|Answer|Solution)\b/i.test(e)||/\bQ\b/i.test(e)}async function z1(s,e){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n?(await s.render({canvasContext:n,viewport:e}).promise,t):null}async function kQ(s,e,t){const n=Math.max(0,t-e);if(n<=4)return null;const r=document.createElement("canvas");r.width=s.width,r.height=n;const i=r.getContext("2d");return i?(i.drawImage(s,0,e,s.width,n,0,0,s.width,n),await new Promise(a=>r.toBlob(a,"image/jpeg",.88))):null}async function IQ(s){if(!s.length)return null;if(s.length===1)return s[0];const e=await Promise.all(s.map(u=>createImageBitmap(u))),t=Math.max(...e.map(u=>u.width)),n=e.reduce((u,d)=>u+d.height,0),r=document.createElement("canvas");r.width=t,r.height=n;const i=r.getContext("2d");if(!i)return null;let a=0;for(const u of e)i.drawImage(u,0,a),a+=u.height;return e.forEach(u=>{var d;return(d=u.close)==null?void 0:d.call(u)}),await new Promise(u=>r.toBlob(u,"image/jpeg",.9))}const CD=async(s,e)=>{var g,w;const t=await s.arrayBuffer(),r=await Xx({data:t}).promise,i=1.6,a=1.2,u=6;let d=0;const h=new Map;for(let v=1;v<=r.numPages;v++){e&&e(`Processing Page ${v} of ${r.numPages}...`);const F=await r.getPage(v),C=F.getViewport({scale:i});let S=[];try{const B=(await F.getTextContent()).items||[],z=TQ(B);for(const W of z){if(!W.text)continue;const D=_D(W.text);D&&bD(W.text)&&S.push({number:D.q,yCanvas:SQ(W.pdfY,C),confidence:.75,source:"TEXT"})}}catch(R){console.warn(`Text extraction failed on page ${v}`,R)}if(S.sort((R,B)=>R.yCanvas-B.yCanvas),S.length===0&&d<u){d++,e&&e(`OCR Page ${v}... (${d}/${u})`);const R=F.getViewport({scale:a}),B=await z1(F,R);if(B)try{const W=((g=(await CQ.recognize(B,"eng")).data)==null?void 0:g.lines)||[];for(const D of W){const N=Jx(D.text||"");if(!N)continue;const L=_D(N);if(!L||!bD(N))continue;const $=(((w=D==null?void 0:D.bbox)==null?void 0:w.y0)??999999)/a*i;S.push({number:L.q,yCanvas:$,confidence:.6,source:"OCR"})}S.sort((D,N)=>D.yCanvas-N.yCanvas)}catch(z){console.error(`OCR failed on page ${v}`,z)}}if(S.length===0)continue;const I=await z1(F,C);if(!I)continue;const O=[];for(const R of S){const B=O[O.length-1];B?Math.abs(R.yCanvas-B.yCanvas)>18&&O.push(R):O.push(R)}for(let R=0;R<O.length;R++){const B=O[R],z=qd(B.yCanvas-40,0,I.height);let W=I.height;if(R<O.length-1&&(W=qd(O[R+1].yCanvas-16,0,I.height)),W-z<40)continue;const D=await kQ(I,z,W);if(!D)continue;const N=h.get(B.number);N?(N.parts.push(D),N.coords.yEnd=Math.max(N.coords.yEnd,W/i)):h.set(B.number,{number:B.number,parts:[D],firstPage:v,coords:{yStart:z/i,yEnd:W/i}})}}const f=[];for(const v of Array.from(h.values()).sort((F,C)=>F.number-C.number)){const F=await IQ(v.parts);f.push({number:v.number,text:`(Merged question ${v.number})`,marks:0,imageBlobs:v.parts,imageBlob:F??v.parts[0],page:v.firstPage,coordinates:v.coords})}return f},fA=async(s,e,t=1.6)=>{const n=await s.arrayBuffer(),a=await(await Xx({data:n}).promise).getPage(e),u=a.getViewport({scale:t}),d=await z1(a,u);return d?await new Promise(h=>d.toBlob(h,"image/jpeg",.9)):null},FD=async(s,e,t,n,r,i,a=1.6)=>{const u=await s.arrayBuffer(),f=await(await Xx({data:u}).promise).getPage(e),g=f.getViewport({scale:a}),w=await z1(f,g);if(!w)return null;const v=qd(t,0,w.width),F=qd(n,0,w.height),C=qd(r,1,w.width-v),S=qd(i,1,w.height-F),I=document.createElement("canvas");I.width=C,I.height=S;const O=I.getContext("2d");return O?(O.drawImage(w,v,F,C,S,0,0,C,S),await new Promise(R=>I.toBlob(R,"image/jpeg",.9))):null},PQ=async s=>{if(!s.length)return null;if(s.length===1)return s[0];const e=await Promise.all(s.map(u=>createImageBitmap(u))),t=Math.max(...e.map(u=>u.width)),n=e.reduce((u,d)=>u+d.height,0),r=document.createElement("canvas");r.width=t,r.height=n;const i=r.getContext("2d");if(!i)return null;let a=0;for(const u of e)i.drawImage(u,0,a),a+=u.height;return e.forEach(u=>{var d;return(d=u.close)==null?void 0:d.call(u)}),await new Promise(u=>r.toBlob(u,"image/jpeg",.9))},RQ=({assessmentId:s,assessmentTitle:e,onClose:t})=>{const[n,r]=q.useState([]),[i,a]=q.useState(!1),[u,d]=q.useState(!1),[h,f]=q.useState(!1),[g,w]=q.useState(!1),[v,F]=q.useState(!1),[C,S]=q.useState(null),[I,O]=q.useState(""),[R,B]=q.useState(0),[z,W]=q.useState(1),[D,N]=q.useState(null),[L,V]=q.useState(null),[$,K]=q.useState(""),[U,me]=q.useState(null),[Ae,we]=q.useState([]),[fe,le]=q.useState([]),[Z,J]=q.useState(!1),[H,Q]=q.useState(""),[ae,ye]=q.useState(!1),[xe,Ee]=q.useState(1),[Se,Ue]=q.useState(0),[Ce,Me]=q.useState(1),[st,Et]=q.useState(!1),[Lt,yn]=q.useState("answers"),[Bs,Br]=q.useState(null),[ms,La]=q.useState(1),[Ot,Pt]=q.useState(""),[ln,fd]=q.useState(0),[gs,Ip]=q.useState(0),[Bt,sa]=q.useState(0),[Qt,ys]=q.useState(0),[js,ws]=q.useState(0),[Un,Oa]=q.useState(200),[or,Ci]=q.useState(""),[wc,vr]=q.useState(!1),[Ba,Ar]=q.useState([]),Yn=1.6;q.useEffect(()=>{jr()},[s]),q.useEffect(()=>{h&&(ye(!1),Me(n.length>0?n.length+1:1),Ee(Ae.length>0?Ae.length+1:1),Ue(0))},[h,n.length,Ae.length]);const jr=async()=>{a(!0);try{const re=await iW(s);r(re),re.length>0&&W(re.length+1)}catch(re){console.error("Error fetching questions:",re)}finally{a(!1)}},Fi=re=>{re?(S(re.questionId),O(re.title),B(re.marks),W(re.order),K(re.videoUrl||""),N(null),V(null)):(S(null),O(`Question ${n.length+1}`),B(0),W(n.length+1),K(""),N(null),V(null)),d(!0)},cn=async re=>{if(re.preventDefault(),!(!C&&!D)){F(!0);try{C?await qE(s,C,{title:I,marks:R,order:z,videoUrl:$||void 0},D,L):await ER(s,I,R,z,D,void 0,L,void 0,$),d(!1),jr()}catch(_e){console.error("Error saving question:",_e)}finally{F(!1)}}},md=async re=>{if(re.target.files&&re.target.files[0]){me(re.target.files[0]),J(!0),Q("Initializing...");try{const _e=await CD(re.target.files[0],ke=>Q(ke));_e.length===0&&alert("No questions detected in the PDF. You can use Manual Crop Mode to crop questions yourself."),we(_e),Ee(_e.length>0?_e.length+1:1)}catch(_e){console.error("Error parsing PDF:",_e),alert("Failed to parse PDF. You can still use Manual Crop Mode.")}finally{J(!1),Q("")}}},ja=async re=>{if(re.target.files&&re.target.files[0]){me(re.target.files[0]),J(!0),Q("Initializing...");try{const _e=await CD(re.target.files[0],ke=>Q(ke));_e.length===0&&alert('No answers detected in the Memo PDF. Please ensure the file uses "Question 1" or "Answer 1" headings.'),le(_e)}catch(_e){console.error("Error parsing Memo PDF:",_e),alert("Failed to parse Memo PDF.")}finally{J(!1),Q("")}}},Ua=async re=>{var At,ot;if(!U)return;const _e=fe[re],ke=_e.page||1,bt=await fA(U,ke,Yn),Kt=bt?URL.createObjectURL(bt):"";yn("answers"),Br(re),La(ke),Pt(Kt),sa(0);const un=Math.max(0,(((At=_e.coordinates)==null?void 0:At.yStart)||0)*Yn),ft=Math.max(50,(((ot=_e.coordinates)==null?void 0:ot.yEnd)||un+300)*Yn-un);ys(un),Oa(ft),ws(0),Ar([]),Et(!0)},Pp=async re=>{var At,ot;if(!U)return;const _e=Ae[re],ke=_e.page||1,bt=await fA(U,ke,Yn),Kt=bt?URL.createObjectURL(bt):"";yn("questions"),Br(re),La(ke),Pt(Kt),sa(0);const un=Math.max(0,(((At=_e.coordinates)==null?void 0:At.yStart)||0)*Yn),ft=Math.max(50,(((ot=_e.coordinates)==null?void 0:ot.yEnd)||un+300)*Yn-un);ys(un),Oa(ft),ws(0),Ar([]),Et(!0)},Rp=async()=>{if(!U)return;yn("questions"),Br(null),La(1);const re=await fA(U,1,Yn),_e=re?URL.createObjectURL(re):"";Pt(_e),sa(0),ys(0),ws(0),Oa(220),Ar([]),Et(!0),ye(!0)},Si=async()=>{if(!U||!Ot)return;const re=ln>0?await new Promise(Xt=>{const ns=new Image;ns.onload=()=>Xt(ns.naturalWidth/ln),ns.src=Ot}):1,_e=gs>0?await new Promise(Xt=>{const ns=new Image;ns.onload=()=>Xt(ns.naturalHeight/gs),ns.src=Ot}):1,ke=Math.max(0,(js===0?0:Bt)*re),bt=Math.max(0,Qt*_e),Kt=Math.max(1,(js===0?ln:js)*re),un=Math.max(1,Un*_e),ft=await FD(U,ms,ke,bt,Kt,un,Yn),At=ft?[...Ba,ft]:[...Ba],ot=await PQ(At);if(!ot){Et(!1);return}if(Bs===null&&Lt==="questions"){const Xt=Qt/Yn,ns=(Qt+Un)/Yn,vc={number:xe,marks:Se,text:"(Manual crop)",imageBlobs:At,imageBlob:ot,page:ms,coordinates:{yStart:Xt,yEnd:ns}};we(Us=>[...Us,vc]),Ee(Us=>Us+1),Me(Us=>Us+1),Et(!1),Br(null),Pt(""),Ar([]);return}if(Bs===null){Et(!1),Pt(""),Ar([]);return}if(Lt==="answers"){const Xt=[...fe];Xt[Bs]={...Xt[Bs],imageBlob:ot},le(Xt)}else{const Xt=[...Ae];Xt[Bs]={...Xt[Bs],imageBlob:ot},we(Xt)}Et(!1),Br(null),Pt(""),Ar([])},Dp=async()=>{if(fe.length!==0){F(!0);try{for(const re of fe){const _e=n.find(ke=>ke.title.toLowerCase().includes(`question ${re.number}`)||ke.title.toLowerCase()===`q${re.number}`||ke.order===re.number);if(_e&&re.imageBlob){const ke=new File([re.imageBlob],`answer_${re.number}.jpg`,{type:"image/jpeg"});await qE(s,_e.questionId,{},null,ke)}}w(!1),le([]),me(null),jr(),alert("Memo answers uploaded and matched to questions!")}catch(re){console.error("Error saving bulk memo:",re),alert("Error saving memo. See console for details.")}finally{F(!1)}}},Jo=async()=>{if(Ae.length!==0){F(!0);try{let re=n.length>0?n.length+1:1;for(const _e of Ae){let ke;_e.imageBlob&&(ke=new File([_e.imageBlob],`question_${_e.number}.jpg`,{type:"image/jpeg"})),await ER(s,`Question ${_e.number}`,_e.marks,re++,ke,_e.text,void 0,void 0,void 0,_e.page,_e.coordinates)}f(!1),we([]),me(null),jr()}catch(re){console.error("Error saving bulk questions:",re),alert("Error saving questions. See console for details.")}finally{F(!1)}}},Va=re=>{const _e=[...Ae];_e.splice(re,1),we(_e)},$a=re=>{const _e=[...fe];_e.splice(re,1),le(_e)},gd=(re,_e,ke)=>{const bt=[...Ae];bt[re]={...bt[re],[_e]:ke},we(bt)},ia=async re=>{if(window.confirm("Are you sure you want to delete this question?"))try{await aW(s,re),jr()}catch(_e){console.error("Error deleting question:",_e)}},Ti=async re=>{if(window.confirm("Are you sure you want to remove the answer memo for this question?"))try{await qE(s,re.questionId,{},null,null,!0),jr()}catch(_e){console.error("Error deleting answer:",_e),alert("Failed to delete answer.")}},Zo=st?x.jsxs("div",{"trae-inspector-start-line":"483","trae-inspector-start-column":"4","trae-inspector-end-line":"746","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border-2 border-purple-300 rounded-lg p-3 bg-purple-50",children:[x.jsxs("div",{"trae-inspector-start-line":"484","trae-inspector-start-column":"6","trae-inspector-end-line":"504","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mb-2",children:[x.jsx("label",{"trae-inspector-start-line":"485","trae-inspector-start-column":"8","trae-inspector-end-line":"485","trae-inspector-end-column":"79","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Page%22%2C%22textStartLine%22%3A%22485%22%2C%22textStartColumn%22%3A%2267%22%2C%22textEndLine%22%3A%22485%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Page"}),x.jsx("input",{"trae-inspector-start-line":"486","trae-inspector-start-column":"8","trae-inspector-end-line":"503","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",min:1,value:ms,onChange:async re=>{const _e=parseInt(re.target.value)||1;if(La(_e),!U)return;const ke=await fA(U,_e,Yn),bt=ke?URL.createObjectURL(ke):"";Pt(bt),sa(0),ys(0),ws(0),Oa(200)},className:"mt-1 block w-24 border border-gray-300 rounded-md py-1 px-2 text-sm"})]}),ae&&Lt==="questions"&&Bs===null&&x.jsxs("div",{"trae-inspector-start-line":"508","trae-inspector-start-column":"8","trae-inspector-end-line":"539","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-3 gap-3 mb-3",children:[x.jsxs("div",{"trae-inspector-start-line":"509","trae-inspector-start-column":"10","trae-inspector-end-line":"518","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"510","trae-inspector-start-column":"12","trae-inspector-end-line":"510","trae-inspector-end-column":"91","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20%23%22%2C%22textStartLine%22%3A%22510%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%22510%22%2C%22textEndColumn%22%3A%2283%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-xs font-semibold text-gray-700",children:"Question #"}),x.jsx("input",{"trae-inspector-start-line":"511","trae-inspector-start-column":"12","trae-inspector-end-line":"517","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",min:1,value:xe,onChange:re=>Ee(parseInt(re.target.value)||1),className:"mt-1 w-full border border-gray-300 rounded-md py-1 px-2 text-sm"})]}),x.jsxs("div",{"trae-inspector-start-line":"519","trae-inspector-start-column":"10","trae-inspector-end-line":"528","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"520","trae-inspector-start-column":"12","trae-inspector-end-line":"520","trae-inspector-end-column":"86","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Marks%22%2C%22textStartLine%22%3A%22520%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%22520%22%2C%22textEndColumn%22%3A%2278%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-xs font-semibold text-gray-700",children:"Marks"}),x.jsx("input",{"trae-inspector-start-line":"521","trae-inspector-start-column":"12","trae-inspector-end-line":"527","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",min:0,value:Se,onChange:re=>Ue(parseInt(re.target.value)||0),className:"mt-1 w-full border border-gray-300 rounded-md py-1 px-2 text-sm"})]}),x.jsxs("div",{"trae-inspector-start-line":"529","trae-inspector-start-column":"10","trae-inspector-end-line":"538","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"530","trae-inspector-start-column":"12","trae-inspector-end-line":"530","trae-inspector-end-column":"93","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Order%20(next)%22%2C%22textStartLine%22%3A%22530%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%22530%22%2C%22textEndColumn%22%3A%2285%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-xs font-semibold text-gray-700",children:"Order (next)"}),x.jsx("input",{"trae-inspector-start-line":"531","trae-inspector-start-column":"12","trae-inspector-end-line":"537","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",min:1,value:Ce,onChange:re=>Me(parseInt(re.target.value)||1),className:"mt-1 w-full border border-gray-300 rounded-md py-1 px-2 text-sm"})]})]}),x.jsxs("div",{"trae-inspector-start-line":"542","trae-inspector-start-column":"6","trae-inspector-end-line":"688","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative border rounded bg-white overflow-auto max-h-[60vh]",onMouseMove:re=>{if(!wc)return;const _e=re.currentTarget.getBoundingClientRect(),ke=re.clientX-_e.left,bt=re.clientY-_e.top+(re.currentTarget.scrollTop||0);let Kt=Bt,un=Qt,ft=js||ln,At=Un;if(or==="move"){const ot=ke-Kt,Xt=bt-un;Kt=Math.max(0,Math.min((ln||ft)-ft,Bt+ot)),un=Math.max(0,Math.min((gs||At)-At,Qt+Xt))}else if(or==="n"){const ot=Math.max(0,Math.min(Qt+Un-10,bt));At=Un+(Qt-ot),un=ot}else if(or==="s")At=Math.max(10,Math.min((gs||At)-Qt,bt-Qt));else if(or==="w"){const ot=Math.max(0,Math.min(Bt+ft-10,ke));ft=ft+(Bt-ot),Kt=ot}else if(or==="e")ft=Math.max(10,Math.min((ln||ft)-Bt,ke-Bt));else if(or==="nw"){const ot=Math.max(0,Math.min(Bt+ft-10,ke)),Xt=Math.max(0,Math.min(Qt+Un-10,bt));ft=ft+(Bt-ot),Kt=ot,At=Un+(Qt-Xt),un=Xt}else if(or==="ne"){const ot=Math.max(0,Math.min(Qt+Un-10,bt));At=Un+(Qt-ot),un=ot,ft=Math.max(10,Math.min((ln||ft)-Bt,ke-Bt))}else or==="sw"?(ft=ft+Math.max(-ft+10,Math.min(0,ke-Bt)),At=Math.max(10,Math.min((gs||At)-Qt,bt-Qt)),Kt=Math.max(0,Math.min(Bt+ft-10,Bt-(ke-Bt)))):or==="se"&&(ft=Math.max(10,Math.min((ln||ft)-Bt,ke-Bt)),At=Math.max(10,Math.min((gs||At)-Qt,bt-Qt)));sa(Kt),ys(un),ws(ft),Oa(At)},onMouseUp:()=>{vr(!1),Ci("")},onMouseLeave:()=>{vr(!1),Ci("")},children:[Ot&&x.jsx("img",{"trae-inspector-start-line":"608","trae-inspector-start-column":"10","trae-inspector-end-line":"618","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:Ot,alt:"Page",className:"max-w-full",onLoad:re=>{const _e=re.currentTarget;fd(_e.clientWidth),Ip(_e.clientHeight),ws(ke=>ke===0?_e.clientWidth:ke)}}),x.jsx("div",{"trae-inspector-start-line":"621","trae-inspector-start-column":"8","trae-inspector-end-line":"687","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute border-2 border-purple-600 bg-purple-200/10",style:{left:`${Bt}px`,top:`${Qt}px`,width:`${js||ln}px`,height:`${Un}px`,cursor:wc?"grabbing":"move"},onMouseDown:re=>{re.preventDefault(),Ci("move"),vr(!0)},children:["nw","n","ne","e","se","s","sw","w"].map(re=>{const ke={position:"absolute",width:"10px",height:"10px",background:"#7c3aed"};return re==="nw"&&(ke.left="-5px",ke.top="-5px"),re==="n"&&(ke.left="50%",ke.top="-5px",ke.transform="translateX(-50%)"),re==="ne"&&(ke.right="-5px",ke.top="-5px"),re==="e"&&(ke.right="-5px",ke.top="50%",ke.transform="translateY(-50%)"),re==="se"&&(ke.right="-5px",ke.bottom="-5px"),re==="s"&&(ke.left="50%",ke.bottom="-5px",ke.transform="translateX(-50%)"),re==="sw"&&(ke.left="-5px",ke.bottom="-5px"),re==="w"&&(ke.left="-5px",ke.top="50%",ke.transform="translateY(-50%)"),x.jsx("div",{"trae-inspector-start-line":"676","trae-inspector-start-column":"14","trae-inspector-end-line":"684","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",style:ke,onMouseDown:bt=>{bt.stopPropagation(),Ci(re),vr(!0)}},re)})})]}),x.jsxs("div",{"trae-inspector-start-line":"690","trae-inspector-start-column":"6","trae-inspector-end-line":"745","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mt-3",children:[x.jsxs("div",{"trae-inspector-start-line":"691","trae-inspector-start-column":"8","trae-inspector-end-line":"691","trae-inspector-end-column":"80","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-600",children:["Slices: ",Ba.length]}),x.jsxs("div",{"trae-inspector-start-line":"692","trae-inspector-start-column":"8","trae-inspector-end-line":"744","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-2",children:[x.jsx("button",{"trae-inspector-start-line":"693","trae-inspector-start-column":"10","trae-inspector-end-line":"724","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20Slice%22%2C%22textStartLine%22%3A%22722%22%2C%22textStartColumn%22%3A%2211%22%2C%22textEndLine%22%3A%22724%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:async()=>{const re=ln>0?await new Promise(At=>{const ot=new Image;ot.onload=()=>At(ot.naturalWidth/ln),ot.src=Ot}):1,_e=gs>0?await new Promise(At=>{const ot=new Image;ot.onload=()=>At(ot.naturalHeight/gs),ot.src=Ot}):1,ke=Math.max(0,(js===0?0:Bt)*re),bt=Math.max(0,Qt*_e),Kt=Math.max(1,(js===0?ln:js)*re),un=Math.max(1,Un*_e),ft=await FD(U,ms,ke,bt,Kt,un,Yn);ft&&Ar(At=>[...At,ft])},className:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",children:"Add Slice"}),x.jsx("button",{"trae-inspector-start-line":"726","trae-inspector-start-column":"10","trae-inspector-end-line":"728","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Clear%20Slices%22%2C%22textStartLine%22%3A%22726%22%2C%22textStartColumn%22%3A%22116%22%2C%22textEndLine%22%3A%22728%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>Ar([]),className:"px-3 py-2 rounded bg-gray-200 text-gray-800 text-sm",children:"Clear Slices"}),x.jsx("button",{"trae-inspector-start-line":"730","trae-inspector-start-column":"10","trae-inspector-end-line":"732","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Save%20Crop%22%2C%22textStartLine%22%3A%22730%22%2C%22textStartColumn%22%3A%22105%22%2C%22textEndLine%22%3A%22732%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:Si,className:"px-3 py-2 rounded bg-purple-600 text-white text-sm",children:"Save Crop"}),x.jsx("button",{"trae-inspector-start-line":"734","trae-inspector-start-column":"10","trae-inspector-end-line":"743","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Cancel%22%2C%22textStartLine%22%3A%22741%22%2C%22textStartColumn%22%3A%2211%22%2C%22textEndLine%22%3A%22743%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>{Et(!1),Ci(""),vr(!1)},className:"px-3 py-2 rounded bg-gray-100 text-gray-700 text-sm",children:"Cancel"})]})]})]}):null;return x.jsxs("div",{"trae-inspector-start-line":"750","trae-inspector-start-column":"4","trae-inspector-end-line":"1278","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[x.jsxs("div",{"trae-inspector-start-line":"751","trae-inspector-start-column":"6","trae-inspector-end-line":"896","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[x.jsx("div",{"trae-inspector-start-line":"752","trae-inspector-start-column":"8","trae-inspector-end-line":"752","trae-inspector-end-column":"127","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t}),x.jsx("span",{"trae-inspector-start-line":"754","trae-inspector-start-column":"8","trae-inspector-end-line":"756","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%22754%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%22756%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),x.jsx("div",{"trae-inspector-start-line":"758","trae-inspector-start-column":"8","trae-inspector-end-line":"895","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",children:x.jsxs("div",{"trae-inspector-start-line":"759","trae-inspector-start-column":"10","trae-inspector-end-line":"894","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[x.jsxs("div",{"trae-inspector-start-line":"760","trae-inspector-start-column":"12","trae-inspector-end-line":"793","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[x.jsxs("div",{"trae-inspector-start-line":"761","trae-inspector-start-column":"14","trae-inspector-end-line":"766","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsxs("h3",{"trae-inspector-start-line":"762","trae-inspector-start-column":"16","trae-inspector-end-line":"764","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["Manage Questions: ",e]}),x.jsx("p",{"trae-inspector-start-line":"765","trae-inspector-start-column":"16","trae-inspector-end-line":"765","trae-inspector-end-column":"116","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20questions%20via%20image%20upload%20or%20auto-parse%20from%20PDF.%22%2C%22textStartLine%22%3A%22765%22%2C%22textStartColumn%22%3A%2258%22%2C%22textEndLine%22%3A%22765%22%2C%22textEndColumn%22%3A%22112%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 text-sm text-gray-500",children:"Add questions via image upload or auto-parse from PDF."})]}),x.jsxs("div",{"trae-inspector-start-line":"767","trae-inspector-start-column":"14","trae-inspector-end-line":"792","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-3",children:[x.jsxs("button",{"trae-inspector-start-line":"768","trae-inspector-start-column":"16","trae-inspector-end-line":"774","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>w(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[x.jsx(hm,{className:"h-5 w-5"}),x.jsx("span",{"trae-inspector-start-line":"773","trae-inspector-start-column":"18","trae-inspector-end-line":"773","trae-inspector-end-column":"47","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20Memo%22%2C%22textStartLine%22%3A%22773%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22773%22%2C%22textEndColumn%22%3A%2240%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Bulk Upload Memo"})]}),x.jsxs("button",{"trae-inspector-start-line":"775","trae-inspector-start-column":"16","trae-inspector-end-line":"781","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>f(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[x.jsx(hm,{className:"h-5 w-5"}),x.jsx("span",{"trae-inspector-start-line":"780","trae-inspector-start-column":"18","trae-inspector-end-line":"780","trae-inspector-end-column":"46","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20PDF%22%2C%22textStartLine%22%3A%22780%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22780%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Bulk Upload PDF"})]}),x.jsxs("button",{"trae-inspector-start-line":"782","trae-inspector-start-column":"16","trae-inspector-end-line":"788","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>Fi(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[x.jsx(E0,{className:"h-5 w-5"}),x.jsx("span",{"trae-inspector-start-line":"787","trae-inspector-start-column":"18","trae-inspector-end-line":"787","trae-inspector-end-column":"41","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Add%20Manual%22%2C%22textStartLine%22%3A%22787%22%2C%22textStartColumn%22%3A%2224%22%2C%22textEndLine%22%3A%22787%22%2C%22textEndColumn%22%3A%2234%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Add Manual"})]}),x.jsx("button",{"trae-inspector-start-line":"789","trae-inspector-start-column":"16","trae-inspector-end-line":"791","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Close%22%2C%22textStartLine%22%3A%22789%22%2C%22textStartColumn%22%3A%22119%22%2C%22textEndLine%22%3A%22791%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:t,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg",children:"Close"})]})]}),x.jsx("div",{"trae-inspector-start-line":"795","trae-inspector-start-column":"12","trae-inspector-end-line":"893","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 rounded-lg min-h-[400px] p-4 max-h-[70vh] overflow-y-auto",children:i?x.jsx("div",{"trae-inspector-start-line":"797","trae-inspector-start-column":"16","trae-inspector-end-line":"797","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading%20questions...%22%2C%22textStartLine%22%3A%22797%22%2C%22textStartColumn%22%3A%2251%22%2C%22textEndLine%22%3A%22797%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-10",children:"Loading questions..."}):n.length===0?x.jsx("div",{"trae-inspector-start-line":"799","trae-inspector-start-column":"16","trae-inspector-end-line":"801","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20questions%20added%20yet.%20Click%20%5C%22Add%20Manual%5C%22%20or%20%5C%22Bulk%20Upload%20PDF%5C%22%20to%20start.%22%2C%22textStartLine%22%3A%22799%22%2C%22textStartColumn%22%3A%2265%22%2C%22textEndLine%22%3A%22801%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-10 text-gray-500",children:'No questions added yet. Click "Add Manual" or "Bulk Upload PDF" to start.'}):x.jsx("div",{"trae-inspector-start-line":"803","trae-inspector-start-column":"16","trae-inspector-end-line":"891","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:n.map(re=>x.jsxs("div",{"trae-inspector-start-line":"805","trae-inspector-start-column":"20","trae-inspector-end-line":"889","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[x.jsxs("div",{"trae-inspector-start-line":"807","trae-inspector-start-column":"22","trae-inspector-end-line":"823","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center p-4 border-b border-gray-100 bg-gray-50",children:[x.jsxs("div",{"trae-inspector-start-line":"808","trae-inspector-start-column":"24","trae-inspector-end-line":"811","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-3",children:[x.jsx("div",{"trae-inspector-start-line":"809","trae-inspector-start-column":"26","trae-inspector-end-line":"809","trae-inspector-end-column":"82","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-1 h-6 bg-blue-600 rounded-full"}),x.jsx("h4",{"trae-inspector-start-line":"810","trae-inspector-start-column":"26","trae-inspector-end-line":"810","trae-inspector-end-column":"80","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-bold text-blue-900",children:re.title})]}),x.jsxs("div",{"trae-inspector-start-line":"812","trae-inspector-start-column":"24","trae-inspector-end-line":"822","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4",children:[x.jsxs("span",{"trae-inspector-start-line":"813","trae-inspector-start-column":"26","trae-inspector-end-line":"815","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-xs font-bold",children:[re.marks," Marks"]}),x.jsx("button",{"trae-inspector-start-line":"816","trae-inspector-start-column":"26","trae-inspector-end-line":"818","trae-inspector-end-column":"35","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>Fi(re),className:"text-blue-500 hover:text-blue-700",title:"Edit Question",children:x.jsx(jF,{className:"h-5 w-5"})}),x.jsx("button",{"trae-inspector-start-line":"819","trae-inspector-start-column":"26","trae-inspector-end-line":"821","trae-inspector-end-column":"35","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>ia(re),className:"text-red-500 hover:text-red-700",title:"Delete Question",children:x.jsx(pm,{className:"h-5 w-5"})})]})]}),x.jsxs("div",{"trae-inspector-start-line":"826","trae-inspector-start-column":"22","trae-inspector-end-line":"888","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4",children:[x.jsxs("div",{"trae-inspector-start-line":"827","trae-inspector-start-column":"24","trae-inspector-end-line":"838","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mb-4",children:[x.jsx("p",{"trae-inspector-start-line":"828","trae-inspector-start-column":"26","trae-inspector-end-line":"828","trae-inspector-end-column":"112","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20Content%22%2C%22textStartLine%22%3A%22828%22%2C%22textStartColumn%22%3A%2292%22%2C%22textEndLine%22%3A%22828%22%2C%22textEndColumn%22%3A%22108%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Question Content"}),x.jsx("div",{"trae-inspector-start-line":"829","trae-inspector-start-column":"26","trae-inspector-end-line":"837","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border border-gray-100 rounded bg-gray-50 p-2",children:re.contentUrl?x.jsx("img",{"trae-inspector-start-line":"831","trae-inspector-start-column":"30","trae-inspector-end-line":"831","trae-inspector-end-column":"124","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:re.contentUrl,alt:re.title,className:"max-w-full h-auto max-h-64 object-contain"}):re.content?x.jsx("div",{"trae-inspector-start-line":"833","trae-inspector-start-column":"30","trae-inspector-end-line":"833","trae-inspector-end-column":"109","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"whitespace-pre-wrap text-gray-800 font-serif",children:re.content}):x.jsx("span",{"trae-inspector-start-line":"835","trae-inspector-start-column":"30","trae-inspector-end-line":"835","trae-inspector-end-column":"96","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20content%20available%22%2C%22textStartLine%22%3A%22835%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22835%22%2C%22textEndColumn%22%3A%2289%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-400 italic",children:"No content available"})})]}),x.jsxs("div",{"trae-inspector-start-line":"840","trae-inspector-start-column":"24","trae-inspector-end-line":"887","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{"trae-inspector-start-line":"841","trae-inspector-start-column":"26","trae-inspector-end-line":"868","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("p",{"trae-inspector-start-line":"842","trae-inspector-start-column":"28","trae-inspector-end-line":"842","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%22%2C%22textStartLine%22%3A%22842%22%2C%22textStartColumn%22%3A%2294%22%2C%22textEndLine%22%3A%22842%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Answer"}),re.answerUrl?x.jsxs("div",{"trae-inspector-start-line":"844","trae-inspector-start-column":"30","trae-inspector-end-line":"862","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2 text-green-600",children:[x.jsx(E6,{className:"h-4 w-4"}),x.jsx("span",{"trae-inspector-start-line":"846","trae-inspector-start-column":"32","trae-inspector-end-line":"846","trae-inspector-end-column":"86","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%20Image%20Uploaded%22%2C%22textStartLine%22%3A%22846%22%2C%22textStartColumn%22%3A%2258%22%2C%22textEndLine%22%3A%22846%22%2C%22textEndColumn%22%3A%2279%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm",children:"Answer Image Uploaded"}),x.jsx("a",{"trae-inspector-start-line":"847","trae-inspector-start-column":"32","trae-inspector-end-line":"854","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22(View)%22%2C%22textStartLine%22%3A%22852%22%2C%22textStartColumn%22%3A%2233%22%2C%22textEndLine%22%3A%22854%22%2C%22textEndColumn%22%3A%2232%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:re.answerUrl,target:"_blank",rel:"noreferrer",className:"text-blue-500 text-xs hover:underline",children:"(View)"}),x.jsx("button",{"trae-inspector-start-line":"855","trae-inspector-start-column":"32","trae-inspector-end-line":"861","trae-inspector-end-column":"41","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>Ti(re),className:"text-red-500 hover:text-red-700 ml-2",title:"Delete Answer",children:x.jsx(pm,{className:"h-4 w-4"})})]}):re.answerText?x.jsx("div",{"trae-inspector-start-line":"864","trae-inspector-start-column":"30","trae-inspector-end-line":"864","trae-inspector-end-column":"89","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-700",children:re.answerText}):x.jsx("span",{"trae-inspector-start-line":"866","trae-inspector-start-column":"30","trae-inspector-end-line":"866","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20answer%20provided%22%2C%22textStartLine%22%3A%22866%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22866%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-400",children:"No answer provided"})]}),x.jsxs("div",{"trae-inspector-start-line":"869","trae-inspector-start-column":"26","trae-inspector-end-line":"886","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("p",{"trae-inspector-start-line":"870","trae-inspector-start-column":"28","trae-inspector-end-line":"870","trae-inspector-end-column":"112","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Video%20Solution%22%2C%22textStartLine%22%3A%22870%22%2C%22textStartColumn%22%3A%2294%22%2C%22textEndLine%22%3A%22870%22%2C%22textEndColumn%22%3A%22108%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1 uppercase font-semibold",children:"Video Solution"}),re.videoUrl?x.jsxs("div",{"trae-inspector-start-line":"872","trae-inspector-start-column":"30","trae-inspector-end-line":"882","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2 text-blue-600",children:[x.jsx(i5,{className:"h-4 w-4"}),x.jsx("a",{"trae-inspector-start-line":"874","trae-inspector-start-column":"32","trae-inspector-end-line":"881","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:re.videoUrl,target:"_blank",rel:"noreferrer",className:"text-sm hover:underline truncate block max-w-[200px]",children:re.videoUrl})]}):x.jsx("span",{"trae-inspector-start-line":"884","trae-inspector-start-column":"30","trae-inspector-end-line":"884","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20video%20link%22%2C%22textStartLine%22%3A%22884%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%22884%22%2C%22textEndColumn%22%3A%2283%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-400",children:"No video link"})]})]})]})]},re.questionId))})})]})})]}),g&&x.jsx("div",{"trae-inspector-start-line":"900","trae-inspector-start-column":"8","trae-inspector-end-line":"996","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-[60] overflow-y-auto",children:x.jsxs("div",{"trae-inspector-start-line":"901","trae-inspector-start-column":"10","trae-inspector-end-line":"995","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[x.jsx("div",{"trae-inspector-start-line":"902","trae-inspector-start-column":"12","trae-inspector-end-line":"904","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:x.jsx("div",{"trae-inspector-start-line":"903","trae-inspector-start-column":"14","trae-inspector-end-line":"903","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-0 bg-gray-500 opacity-75"})}),x.jsx("span",{"trae-inspector-start-line":"905","trae-inspector-start-column":"12","trae-inspector-end-line":"907","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%22905%22%2C%22textStartColumn%22%3A%22100%22%2C%22textEndLine%22%3A%22907%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),x.jsx("div",{"trae-inspector-start-line":"908","trae-inspector-start-column":"12","trae-inspector-end-line":"994","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:x.jsxs("div",{"trae-inspector-start-line":"909","trae-inspector-start-column":"14","trae-inspector-end-line":"993","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[x.jsxs("div",{"trae-inspector-start-line":"910","trae-inspector-start-column":"16","trae-inspector-end-line":"915","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[x.jsx("h3",{"trae-inspector-start-line":"911","trae-inspector-start-column":"18","trae-inspector-end-line":"911","trae-inspector-end-column":"99","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20Memo%20(Answers)%22%2C%22textStartLine%22%3A%22911%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22911%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-medium text-gray-900",children:"Bulk Upload Memo (Answers)"}),x.jsx("button",{"trae-inspector-start-line":"912","trae-inspector-start-column":"18","trae-inspector-end-line":"914","trae-inspector-end-column":"27","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-500",children:x.jsx(Tg,{className:"h-6 w-6"})})]}),x.jsxs("div",{"trae-inspector-start-line":"917","trae-inspector-start-column":"16","trae-inspector-end-line":"992","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[x.jsx("p",{"trae-inspector-start-line":"918","trae-inspector-start-column":"18","trae-inspector-end-line":"920","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20a%20PDF%20containing%20the%20memorandum.%20The%20system%20will%20try%20to%20match%20%5C%22Question%201%5C%22%20in%20the%20memo%20to%20%5C%22Question%201%5C%22%20in%20your%20list.%22%2C%22textStartLine%22%3A%22918%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%22920%22%2C%22textEndColumn%22%3A%2218%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-600",children:'Upload a PDF containing the memorandum. The system will try to match "Question 1" in the memo to "Question 1" in your list.'}),x.jsxs("div",{"trae-inspector-start-line":"923","trae-inspector-start-column":"18","trae-inspector-end-line":"930","trae-inspector-end-column":"24","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50 transition-colors",children:[x.jsx("input",{"trae-inspector-start-line":"924","trae-inspector-start-column":"20","trae-inspector-end-line":"924","trae-inspector-end-column":"128","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:".pdf",onChange:ja,className:"hidden",id:"bulk-memo-upload"}),x.jsxs("label",{"trae-inspector-start-line":"925","trae-inspector-start-column":"20","trae-inspector-end-line":"929","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"bulk-memo-upload",className:"cursor-pointer block",children:[x.jsx(BI,{className:"mx-auto h-12 w-12 text-purple-400"}),x.jsx("p",{"trae-inspector-start-line":"927","trae-inspector-start-column":"22","trae-inspector-end-line":"927","trae-inspector-end-column":"123","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 text-sm text-gray-600",children:U?U.name:"Click to upload Memo PDF"}),x.jsx("p",{"trae-inspector-start-line":"928","trae-inspector-start-column":"22","trae-inspector-end-line":"928","trae-inspector-end-column":"98","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PDFs%20with%20selectable%20text%20only%22%2C%22textStartLine%22%3A%22928%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22928%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mt-1",children:"PDFs with selectable text only"})]})]}),Z&&x.jsxs("div",{"trae-inspector-start-line":"933","trae-inspector-start-column":"20","trae-inspector-end-line":"936","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-4 text-purple-600 font-medium",children:[x.jsx("div",{"trae-inspector-start-line":"934","trae-inspector-start-column":"22","trae-inspector-end-line":"934","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"animate-pulse",children:H||"Parsing Memo..."}),x.jsx("p",{"trae-inspector-start-line":"935","trae-inspector-start-column":"22","trae-inspector-end-line":"935","trae-inspector-end-column":"109","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22OCR%20is%20running%2C%20this%20may%20take%20a%20minute...%22%2C%22textStartLine%22%3A%22935%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22935%22%2C%22textEndColumn%22%3A%22105%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mt-1",children:"OCR is running, this may take a minute..."})]}),Zo,fe.length>0&&x.jsxs("div",{"trae-inspector-start-line":"944","trae-inspector-start-column":"20","trae-inspector-end-line":"990","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-6",children:[x.jsxs("div",{"trae-inspector-start-line":"945","trae-inspector-start-column":"22","trae-inspector-end-line":"955","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-4",children:[x.jsxs("h4",{"trae-inspector-start-line":"946","trae-inspector-start-column":"24","trae-inspector-end-line":"946","trae-inspector-end-column":"116","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium text-gray-900",children:["Extracted Answers (",fe.length,")"]}),x.jsxs("button",{"trae-inspector-start-line":"947","trae-inspector-start-column":"24","trae-inspector-end-line":"954","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:Dp,disabled:v,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm",children:[x.jsx(OI,{className:"h-4 w-4"}),x.jsx("span",{"trae-inspector-start-line":"953","trae-inspector-start-column":"26","trae-inspector-end-line":"953","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:v?"Matching & Saving...":"Match & Save Answers"})]})]}),x.jsx("div",{"trae-inspector-start-line":"957","trae-inspector-start-column":"22","trae-inspector-end-line":"989","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2",children:fe.map((re,_e)=>x.jsxs("div",{"trae-inspector-start-line":"959","trae-inspector-start-column":"26","trae-inspector-end-line":"987","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[x.jsxs("div",{"trae-inspector-start-line":"960","trae-inspector-start-column":"28","trae-inspector-end-line":"968","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-start mb-2",children:[x.jsxs("div",{"trae-inspector-start-line":"961","trae-inspector-start-column":"30","trae-inspector-end-line":"964","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[x.jsxs("span",{"trae-inspector-start-line":"962","trae-inspector-start-column":"32","trae-inspector-end-line":"962","trae-inspector-end-column":"134","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-purple-100 text-purple-800 text-xs font-bold px-2 py-1 rounded",children:["#",re.number]}),x.jsx("span",{"trae-inspector-start-line":"963","trae-inspector-start-column":"32","trae-inspector-end-line":"963","trae-inspector-end-column":"102","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Detected%20Answer%20Section%22%2C%22textStartLine%22%3A%22963%22%2C%22textStartColumn%22%3A%2272%22%2C%22textEndLine%22%3A%22963%22%2C%22textEndColumn%22%3A%2295%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"Detected Answer Section"})]}),x.jsx("button",{"trae-inspector-start-line":"965","trae-inspector-start-column":"30","trae-inspector-end-line":"967","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>$a(_e),className:"text-red-500 hover:text-red-700",children:x.jsx(Tg,{className:"h-4 w-4"})})]}),re.imageBlob?x.jsx("div",{"trae-inspector-start-line":"972","trae-inspector-start-column":"30","trae-inspector-end-line":"974","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border border-purple-200 rounded p-2 bg-white flex justify-center",children:x.jsx("img",{"trae-inspector-start-line":"973","trae-inspector-start-column":"32","trae-inspector-end-line":"973","trae-inspector-end-column":"152","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:URL.createObjectURL(re.imageBlob),alt:`Answer ${re.number}`,className:"max-w-full max-h-64 object-contain"})}):x.jsx("div",{"trae-inspector-start-line":"976","trae-inspector-start-column":"30","trae-inspector-end-line":"976","trae-inspector-end-column":"100","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20image%20extracted%22%2C%22textStartLine%22%3A%22976%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22976%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500 italic",children:"No image extracted"}),x.jsx("div",{"trae-inspector-start-line":"979","trae-inspector-start-column":"28","trae-inspector-end-line":"986","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 flex justify-end",children:x.jsx("button",{"trae-inspector-start-line":"980","trae-inspector-start-column":"30","trae-inspector-end-line":"985","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Edit%20Crop%22%2C%22textStartLine%22%3A%22983%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%22985%22%2C%22textEndColumn%22%3A%2230%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>Ua(_e),className:"text-white bg-purple-600 hover:bg-purple-700 px-3 py-1 rounded text-xs",children:"Edit Crop"})})]},_e))})]})]})]})})]})}),x.jsx(j0,{isOpen:u,onClose:()=>d(!1),title:C?"Edit Question":"Add New Question (Manual)",children:x.jsxs("form",{"trae-inspector-start-line":"1005","trae-inspector-start-column":"8","trae-inspector-end-line":"1111","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:cn,className:"space-y-4",children:[x.jsxs("div",{"trae-inspector-start-line":"1006","trae-inspector-start-column":"10","trae-inspector-end-line":"1029","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{"trae-inspector-start-line":"1007","trae-inspector-start-column":"12","trae-inspector-end-line":"1017","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"1008","trae-inspector-start-column":"14","trae-inspector-end-line":"1008","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Question%20Title%22%2C%22textStartLine%22%3A%221008%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%221008%22%2C%22textEndColumn%22%3A%2287%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Question Title"}),x.jsx("input",{"trae-inspector-start-line":"1009","trae-inspector-start-column":"14","trae-inspector-end-line":"1016","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:I,onChange:re=>O(re.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Question 1"})]}),x.jsxs("div",{"trae-inspector-start-line":"1018","trae-inspector-start-column":"12","trae-inspector-end-line":"1028","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"1019","trae-inspector-start-column":"14","trae-inspector-end-line":"1019","trae-inspector-end-column":"86","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Marks%22%2C%22textStartLine%22%3A%221019%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%221019%22%2C%22textEndColumn%22%3A%2278%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Marks"}),x.jsx("input",{"trae-inspector-start-line":"1020","trae-inspector-start-column":"14","trae-inspector-end-line":"1027","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,min:"0",value:R,onChange:re=>B(parseInt(re.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),x.jsxs("div",{"trae-inspector-start-line":"1031","trae-inspector-start-column":"10","trae-inspector-end-line":"1041","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"1032","trae-inspector-start-column":"12","trae-inspector-end-line":"1032","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Order%22%2C%22textStartLine%22%3A%221032%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%221032%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Order"}),x.jsx("input",{"trae-inspector-start-line":"1033","trae-inspector-start-column":"12","trae-inspector-end-line":"1040","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,min:"1",value:z,onChange:re=>W(parseInt(re.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),x.jsxs("div",{"trae-inspector-start-line":"1043","trae-inspector-start-column":"10","trae-inspector-end-line":"1072","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsxs("label",{"trae-inspector-start-line":"1044","trae-inspector-start-column":"12","trae-inspector-end-line":"1046","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:["Question Image ",C?"(Optional - Leave empty to keep existing)":"(Required)"]}),x.jsx("div",{"trae-inspector-start-line":"1047","trae-inspector-start-column":"12","trae-inspector-end-line":"1071","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:x.jsxs("div",{"trae-inspector-start-line":"1048","trae-inspector-start-column":"14","trae-inspector-end-line":"1070","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-1 text-center",children:[x.jsx(B6,{className:"mx-auto h-12 w-12 text-gray-400"}),x.jsxs("div",{"trae-inspector-start-line":"1050","trae-inspector-start-column":"16","trae-inspector-end-line":"1067","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex text-sm text-gray-600",children:[x.jsxs("label",{"trae-inspector-start-line":"1051","trae-inspector-start-column":"18","trae-inspector-end-line":"1065","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"content-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[x.jsx("span",{"trae-inspector-start-line":"1055","trae-inspector-start-column":"20","trae-inspector-end-line":"1055","trae-inspector-end-column":"46","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20a%20file%22%2C%22textStartLine%22%3A%221055%22%2C%22textStartColumn%22%3A%2226%22%2C%22textEndLine%22%3A%221055%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Upload a file"}),x.jsx("input",{"trae-inspector-start-line":"1056","trae-inspector-start-column":"20","trae-inspector-end-line":"1064","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"content-upload",name:"content-upload",type:"file",className:"sr-only",accept:"image/*",onChange:re=>N(re.target.files?re.target.files[0]:null),required:!C})]}),x.jsx("p",{"trae-inspector-start-line":"1066","trae-inspector-start-column":"18","trae-inspector-end-line":"1066","trae-inspector-end-column":"58","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22or%20drag%20and%20drop%22%2C%22textStartLine%22%3A%221066%22%2C%22textStartColumn%22%3A%2238%22%2C%22textEndLine%22%3A%221066%22%2C%22textEndColumn%22%3A%2254%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"pl-1",children:"or drag and drop"})]}),x.jsx("p",{"trae-inspector-start-line":"1068","trae-inspector-start-column":"16","trae-inspector-end-line":"1068","trae-inspector-end-column":"75","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PNG%2C%20JPG%20up%20to%205MB%22%2C%22textStartLine%22%3A%221068%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%221068%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"PNG, JPG up to 5MB"}),D&&x.jsx("p",{"trae-inspector-start-line":"1069","trae-inspector-start-column":"32","trae-inspector-end-line":"1069","trae-inspector-end-column":"106","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-green-600 font-semibold",children:D.name})]})})]}),x.jsxs("div",{"trae-inspector-start-line":"1074","trae-inspector-start-column":"10","trae-inspector-end-line":"1082","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"1075","trae-inspector-start-column":"12","trae-inspector-end-line":"1075","trae-inspector-end-column":"102","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Answer%20Image%20(Optional)%22%2C%22textStartLine%22%3A%221075%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%221075%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Answer Image (Optional)"}),x.jsx("input",{"trae-inspector-start-line":"1076","trae-inspector-start-column":"12","trae-inspector-end-line":"1081","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:"image/*",onChange:re=>V(re.target.files?re.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),x.jsxs("div",{"trae-inspector-start-line":"1084","trae-inspector-start-column":"10","trae-inspector-end-line":"1098","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"1085","trae-inspector-start-column":"12","trae-inspector-end-line":"1085","trae-inspector-end-column":"108","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Video%20Solution%20URL%20(Optional)%22%2C%22textStartLine%22%3A%221085%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%221085%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Video Solution URL (Optional)"}),x.jsxs("div",{"trae-inspector-start-line":"1086","trae-inspector-start-column":"12","trae-inspector-end-line":"1097","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-1 flex rounded-md shadow-sm",children:[x.jsx("span",{"trae-inspector-start-line":"1087","trae-inspector-start-column":"14","trae-inspector-end-line":"1089","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22https%3A%2F%2F%22%2C%22textStartLine%22%3A%221087%22%2C%22textStartColumn%22%3A%22142%22%2C%22textEndLine%22%3A%221089%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"https://"}),x.jsx("input",{"trae-inspector-start-line":"1090","trae-inspector-start-column":"14","trae-inspector-end-line":"1096","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"url",value:$,onChange:re=>K(re.target.value),className:"focus:ring-blue-500 focus:border-blue-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300 py-2 px-3 border",placeholder:"youtube.com/watch?v=..."})]})]}),x.jsx("div",{"trae-inspector-start-line":"1100","trae-inspector-start-column":"10","trae-inspector-end-line":"1110","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:x.jsx("button",{"trae-inspector-start-line":"1101","trae-inspector-start-column":"12","trae-inspector-end-line":"1109","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:v,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${v?"opacity-75 cursor-not-allowed":""}`,children:v?"Saving Question...":"Save Question"})})]})}),h&&x.jsx("div",{"trae-inspector-start-line":"1116","trae-inspector-start-column":"8","trae-inspector-end-line":"1276","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 z-[60] overflow-y-auto",children:x.jsxs("div",{"trae-inspector-start-line":"1117","trae-inspector-start-column":"10","trae-inspector-end-line":"1275","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[x.jsx("div",{"trae-inspector-start-line":"1118","trae-inspector-start-column":"12","trae-inspector-end-line":"1120","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:x.jsx("div",{"trae-inspector-start-line":"1119","trae-inspector-start-column":"14","trae-inspector-end-line":"1119","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-0 bg-gray-500 opacity-75"})}),x.jsx("span",{"trae-inspector-start-line":"1121","trae-inspector-start-column":"12","trae-inspector-end-line":"1123","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%80%8B%22%2C%22textStartLine%22%3A%221121%22%2C%22textStartColumn%22%3A%22100%22%2C%22textEndLine%22%3A%221123%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),x.jsx("div",{"trae-inspector-start-line":"1124","trae-inspector-start-column":"12","trae-inspector-end-line":"1274","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:x.jsxs("div",{"trae-inspector-start-line":"1125","trae-inspector-start-column":"14","trae-inspector-end-line":"1273","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[x.jsxs("div",{"trae-inspector-start-line":"1126","trae-inspector-start-column":"16","trae-inspector-end-line":"1131","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[x.jsx("h3",{"trae-inspector-start-line":"1127","trae-inspector-start-column":"18","trae-inspector-end-line":"1127","trae-inspector-end-column":"93","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Bulk%20Upload%20from%20PDF%22%2C%22textStartLine%22%3A%221127%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%221127%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-medium text-gray-900",children:"Bulk Upload from PDF"}),x.jsx("button",{"trae-inspector-start-line":"1128","trae-inspector-start-column":"18","trae-inspector-end-line":"1130","trae-inspector-end-column":"27","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-500",children:x.jsx(Tg,{className:"h-6 w-6"})})]}),x.jsxs("div",{"trae-inspector-start-line":"1133","trae-inspector-start-column":"16","trae-inspector-end-line":"1272","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[x.jsxs("div",{"trae-inspector-start-line":"1135","trae-inspector-start-column":"18","trae-inspector-end-line":"1142","trae-inspector-end-column":"24","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50 transition-colors",children:[x.jsx("input",{"trae-inspector-start-line":"1136","trae-inspector-start-column":"20","trae-inspector-end-line":"1136","trae-inspector-end-column":"123","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:".pdf",onChange:md,className:"hidden",id:"bulk-upload"}),x.jsxs("label",{"trae-inspector-start-line":"1137","trae-inspector-start-column":"20","trae-inspector-end-line":"1141","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"bulk-upload",className:"cursor-pointer block",children:[x.jsx(BI,{className:"mx-auto h-12 w-12 text-gray-400"}),x.jsx("p",{"trae-inspector-start-line":"1139","trae-inspector-start-column":"22","trae-inspector-end-line":"1139","trae-inspector-end-column":"123","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 text-sm text-gray-600",children:U?U.name:"Click to upload Exam PDF"}),x.jsx("p",{"trae-inspector-start-line":"1140","trae-inspector-start-column":"22","trae-inspector-end-line":"1140","trae-inspector-end-column":"98","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PDFs%20with%20selectable%20text%20only%22%2C%22textStartLine%22%3A%221140%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%221140%22%2C%22textEndColumn%22%3A%2294%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mt-1",children:"PDFs with selectable text only"})]})]}),Z&&x.jsxs("div",{"trae-inspector-start-line":"1145","trae-inspector-start-column":"20","trae-inspector-end-line":"1148","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center py-4 text-green-600 font-medium",children:[x.jsx("div",{"trae-inspector-start-line":"1146","trae-inspector-start-column":"22","trae-inspector-end-line":"1146","trae-inspector-end-column":"94","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"animate-pulse",children:H||"Parsing PDF..."}),x.jsx("p",{"trae-inspector-start-line":"1147","trae-inspector-start-column":"22","trae-inspector-end-line":"1147","trae-inspector-end-column":"109","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22OCR%20is%20running%2C%20this%20may%20take%20a%20minute...%22%2C%22textStartLine%22%3A%221147%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%221147%22%2C%22textEndColumn%22%3A%22105%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mt-1",children:"OCR is running, this may take a minute..."})]}),U&&!Z&&x.jsxs("div",{"trae-inspector-start-line":"1153","trae-inspector-start-column":"20","trae-inspector-end-line":"1201","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[x.jsxs("div",{"trae-inspector-start-line":"1154","trae-inspector-start-column":"22","trae-inspector-end-line":"1167","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center justify-between",children:[x.jsxs("div",{"trae-inspector-start-line":"1155","trae-inspector-start-column":"24","trae-inspector-end-line":"1160","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("div",{"trae-inspector-start-line":"1156","trae-inspector-start-column":"26","trae-inspector-end-line":"1156","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manual%20Crop%20Mode%22%2C%22textStartLine%22%3A%221156%22%2C%22textStartColumn%22%3A%2279%22%2C%22textEndLine%22%3A%221156%22%2C%22textEndColumn%22%3A%2295%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-semibold text-blue-900",children:"Manual Crop Mode"}),x.jsx("div",{"trae-inspector-start-line":"1157","trae-inspector-start-column":"26","trae-inspector-end-line":"1159","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Use%20this%20when%20parser%20fails.%20Crop%20questions%20from%20any%20page%20and%20save%20them%20as%20extracted%20items.%22%2C%22textStartLine%22%3A%221157%22%2C%22textStartColumn%22%3A%2265%22%2C%22textEndLine%22%3A%221159%22%2C%22textEndColumn%22%3A%2226%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-blue-800",children:"Use this when parser fails. Crop questions from any page and save them as extracted items."})]}),x.jsx("button",{"trae-inspector-start-line":"1161","trae-inspector-start-column":"24","trae-inspector-end-line":"1166","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Crop%20a%20Question%22%2C%22textStartLine%22%3A%221164%22%2C%22textStartColumn%22%3A%2225%22%2C%22textEndLine%22%3A%221166%22%2C%22textEndColumn%22%3A%2224%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:Rp,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm",children:"Crop a Question"})]}),x.jsxs("div",{"trae-inspector-start-line":"1169","trae-inspector-start-column":"22","trae-inspector-end-line":"1200","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid grid-cols-3 gap-3 mt-3",children:[x.jsxs("div",{"trae-inspector-start-line":"1170","trae-inspector-start-column":"24","trae-inspector-end-line":"1179","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"1171","trae-inspector-start-column":"26","trae-inspector-end-line":"1171","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Next%20Question%20%23%22%2C%22textStartLine%22%3A%221171%22%2C%22textStartColumn%22%3A%2281%22%2C%22textEndLine%22%3A%221171%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-700 font-semibold",children:"Next Question #"}),x.jsx("input",{"trae-inspector-start-line":"1172","trae-inspector-start-column":"26","trae-inspector-end-line":"1178","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",min:1,value:xe,onChange:re=>Ee(parseInt(re.target.value)||1),className:"mt-1 w-full border border-gray-300 rounded px-2 py-1 text-sm"})]}),x.jsxs("div",{"trae-inspector-start-line":"1180","trae-inspector-start-column":"24","trae-inspector-end-line":"1189","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"1181","trae-inspector-start-column":"26","trae-inspector-end-line":"1181","trae-inspector-end-column":"94","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Marks%22%2C%22textStartLine%22%3A%221181%22%2C%22textStartColumn%22%3A%2281%22%2C%22textEndLine%22%3A%221181%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-700 font-semibold",children:"Marks"}),x.jsx("input",{"trae-inspector-start-line":"1182","trae-inspector-start-column":"26","trae-inspector-end-line":"1188","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",min:0,value:Se,onChange:re=>Ue(parseInt(re.target.value)||0),className:"mt-1 w-full border border-gray-300 rounded px-2 py-1 text-sm"})]}),x.jsxs("div",{"trae-inspector-start-line":"1190","trae-inspector-start-column":"24","trae-inspector-end-line":"1199","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"1191","trae-inspector-start-column":"26","trae-inspector-end-line":"1191","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Order%20(next)%22%2C%22textStartLine%22%3A%221191%22%2C%22textStartColumn%22%3A%2281%22%2C%22textEndLine%22%3A%221191%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-700 font-semibold",children:"Order (next)"}),x.jsx("input",{"trae-inspector-start-line":"1192","trae-inspector-start-column":"26","trae-inspector-end-line":"1198","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",min:1,value:Ce,onChange:re=>Me(parseInt(re.target.value)||1),className:"mt-1 w-full border border-gray-300 rounded px-2 py-1 text-sm"})]})]})]}),Zo,Ae.length>0&&x.jsxs("div",{"trae-inspector-start-line":"1209","trae-inspector-start-column":"20","trae-inspector-end-line":"1270","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-6",children:[x.jsxs("div",{"trae-inspector-start-line":"1210","trae-inspector-start-column":"22","trae-inspector-end-line":"1220","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-4",children:[x.jsxs("h4",{"trae-inspector-start-line":"1211","trae-inspector-start-column":"24","trae-inspector-end-line":"1211","trae-inspector-end-column":"120","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium text-gray-900",children:["Extracted Questions (",Ae.length,")"]}),x.jsxs("button",{"trae-inspector-start-line":"1212","trae-inspector-start-column":"24","trae-inspector-end-line":"1219","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:Jo,disabled:v,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm",children:[x.jsx(OI,{className:"h-4 w-4"}),x.jsx("span",{"trae-inspector-start-line":"1218","trae-inspector-start-column":"26","trae-inspector-end-line":"1218","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:v?"Saving...":"Save All to Database"})]})]}),x.jsx("div",{"trae-inspector-start-line":"1222","trae-inspector-start-column":"22","trae-inspector-end-line":"1269","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2",children:Ae.map((re,_e)=>x.jsxs("div",{"trae-inspector-start-line":"1224","trae-inspector-start-column":"26","trae-inspector-end-line":"1267","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[x.jsxs("div",{"trae-inspector-start-line":"1225","trae-inspector-start-column":"28","trae-inspector-end-line":"1240","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-start mb-2",children:[x.jsxs("div",{"trae-inspector-start-line":"1226","trae-inspector-start-column":"30","trae-inspector-end-line":"1236","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[x.jsxs("span",{"trae-inspector-start-line":"1227","trae-inspector-start-column":"32","trae-inspector-end-line":"1227","trae-inspector-end-column":"130","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded",children:["#",re.number]}),x.jsx("input",{"trae-inspector-start-line":"1228","trae-inspector-start-column":"32","trae-inspector-end-line":"1234","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",value:re.marks,onChange:ke=>gd(_e,"marks",parseInt(ke.target.value)),className:"w-20 text-xs border-gray-300 rounded p-1",placeholder:"Marks"}),x.jsx("span",{"trae-inspector-start-line":"1235","trae-inspector-start-column":"32","trae-inspector-end-line":"1235","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22marks%22%2C%22textStartLine%22%3A%221235%22%2C%22textStartColumn%22%3A%2272%22%2C%22textEndLine%22%3A%221235%22%2C%22textEndColumn%22%3A%2277%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500",children:"marks"})]}),x.jsx("button",{"trae-inspector-start-line":"1237","trae-inspector-start-column":"30","trae-inspector-end-line":"1239","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>Va(_e),className:"text-red-500 hover:text-red-700",children:x.jsx(Tg,{className:"h-4 w-4"})})]}),re.imageBlob?x.jsx("div",{"trae-inspector-start-line":"1244","trae-inspector-start-column":"30","trae-inspector-end-line":"1250","trae-inspector-end-column":"36","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"border border-gray-300 rounded p-2 bg-white flex justify-center",children:x.jsx("img",{"trae-inspector-start-line":"1245","trae-inspector-start-column":"32","trae-inspector-end-line":"1249","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",src:URL.createObjectURL(re.imageBlob),alt:`Question ${re.number}`,className:"max-w-full max-h-64 object-contain"})}):x.jsx("textarea",{"trae-inspector-start-line":"1252","trae-inspector-start-column":"30","trae-inspector-end-line":"1256","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:re.text,onChange:ke=>gd(_e,"text",ke.target.value),className:"w-full text-sm border-gray-300 rounded p-2 h-24 font-serif"}),x.jsx("div",{"trae-inspector-start-line":"1259","trae-inspector-start-column":"28","trae-inspector-end-line":"1266","trae-inspector-end-column":"34","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-2 flex justify-end",children:x.jsx("button",{"trae-inspector-start-line":"1260","trae-inspector-start-column":"30","trae-inspector-end-line":"1265","trae-inspector-end-column":"39","trae-inspector-file-path":"src/components/QuestionManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Edit%20Crop%22%2C%22textStartLine%22%3A%221263%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%221265%22%2C%22textEndColumn%22%3A%2230%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>Pp(_e),className:"text-white bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-xs",children:"Edit Crop"})})]},_e))})]})]})]})})]})})]})},iT=({type:s,title:e})=>{const{user:t}=B0(),[n,r]=q.useState([]),[i,a]=q.useState(""),[u,d]=q.useState([]),[h,f]=q.useState(""),[g,w]=q.useState(""),[v,F]=q.useState([]),[C,S]=q.useState(!1);q.useEffect(()=>{h&&S(!1)},[h]),q.useEffect(()=>{!g&&!h?S(!1):g&&!h&&S(!0)},[g,h]);const[I,O]=q.useState(!1),[R,B]=q.useState(!1),[z,W]=q.useState(!1),[D,N]=q.useState(null),[L,V]=q.useState(""),[$,K]=q.useState(new Date().getFullYear()),[U,me]=q.useState(null);q.useEffect(()=>{(async()=>{try{const ae=await Pm();r(ae),ae.length>0&&a(ae[0].universityId)}catch(ae){console.error("Error fetching universities:",ae)}})()},[]),q.useEffect(()=>{i&&(async()=>{try{const ae=await $M(i);d(ae),f(""),w(""),F([])}catch(ae){console.error("Error fetching modules:",ae)}})()},[i]),q.useEffect(()=>{i&&h&&Ae()},[i,h,s]);const Ae=async()=>{O(!0);try{const Q=await eW(i,h,s);F(Q)}catch(Q){console.error("Error fetching assessments:",Q)}finally{O(!1)}},we=()=>{V(""),K(new Date().getFullYear()),me(null),B(!0)},fe=async Q=>{if(Q.preventDefault(),!(!i||!h||!t)){W(!0);try{await rW(i,h,s,L,$,t.email||"Admin",U),B(!1),Ae()}catch(ae){console.error("Error saving assessment:",ae)}finally{W(!1)}}},le=async Q=>{if(window.confirm("Are you sure you want to delete this assessment?"))try{await sW(Q),Ae()}catch(ae){console.error("Error deleting assessment:",ae)}},Z=g?u.filter(Q=>Q.code.toLowerCase().includes(g.toLowerCase())||Q.name.toLowerCase().includes(g.toLowerCase())):[],J=Q=>{f(Q),w(""),S(!1)},H=()=>{f(""),w(""),F([]),S(!1)};return x.jsxs("div",{"trae-inspector-start-line":"167","trae-inspector-start-column":"4","trae-inspector-end-line":"373","trae-inspector-end-column":"10","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[D?x.jsx(RQ,{assessmentId:D.assessmentId,assessmentTitle:D.title,onClose:()=>N(null)}):null,x.jsxs("div",{"trae-inspector-start-line":"176","trae-inspector-start-column":"6","trae-inspector-end-line":"186","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[x.jsx("h1",{"trae-inspector-start-line":"177","trae-inspector-start-column":"8","trae-inspector-end-line":"177","trae-inspector-end-column":"69","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:e}),x.jsxs("button",{"trae-inspector-start-line":"178","trae-inspector-start-column":"8","trae-inspector-end-line":"185","trae-inspector-end-column":"17","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:we,disabled:!i||!h,className:`bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 ${!i||!h?"opacity-50 cursor-not-allowed":""}`,children:[x.jsx(E0,{className:"h-5 w-5"}),x.jsxs("span",{"trae-inspector-start-line":"184","trae-inspector-start-column":"10","trae-inspector-end-line":"184","trae-inspector-end-column":"50","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:["Create ",e.slice(0,-1)]})]})]}),x.jsx("div",{"trae-inspector-start-line":"188","trae-inspector-start-column":"6","trae-inspector-end-line":"252","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm mb-6",children:x.jsxs("div",{"trae-inspector-start-line":"189","trae-inspector-start-column":"8","trae-inspector-end-line":"251","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[x.jsxs("div",{"trae-inspector-start-line":"190","trae-inspector-start-column":"10","trae-inspector-end-line":"203","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[x.jsx("label",{"trae-inspector-start-line":"191","trae-inspector-start-column":"12","trae-inspector-end-line":"191","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20University%22%2C%22textStartLine%22%3A%22191%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22191%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select University"}),x.jsx("select",{"trae-inspector-start-line":"192","trae-inspector-start-column":"12","trae-inspector-end-line":"202","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:i,onChange:Q=>a(Q.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:n.map(Q=>x.jsxs("option",{"trae-inspector-start-line":"198","trae-inspector-start-column":"16","trae-inspector-end-line":"200","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:Q.universityId,children:[Q.name," (",Q.code,")"]},Q.universityId))})]}),x.jsxs("div",{"trae-inspector-start-line":"204","trae-inspector-start-column":"10","trae-inspector-end-line":"250","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[x.jsx("label",{"trae-inspector-start-line":"205","trae-inspector-start-column":"12","trae-inspector-end-line":"205","trae-inspector-end-column":"97","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Search%20Module%22%2C%22textStartLine%22%3A%22205%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22205%22%2C%22textEndColumn%22%3A%2289%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Module"}),h?x.jsxs("div",{"trae-inspector-start-line":"207","trae-inspector-start-column":"17","trae-inspector-end-line":"210","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-2 bg-blue-50 text-blue-800 rounded text-sm flex justify-between items-center border border-blue-200",children:[x.jsxs("span",{"trae-inspector-start-line":"208","trae-inspector-start-column":"19","trae-inspector-end-line":"208","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:["Selected: ",x.jsx("strong",{"trae-inspector-start-line":"208","trae-inspector-start-column":"35","trae-inspector-end-line":"208","trae-inspector-end-column":"70","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:h})]}),x.jsx("button",{"trae-inspector-start-line":"209","trae-inspector-start-column":"19","trae-inspector-end-line":"209","trae-inspector-end-column":"131","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Change%22%2C%22textStartLine%22%3A%22209%22%2C%22textStartColumn%22%3A%22116%22%2C%22textEndLine%22%3A%22209%22%2C%22textEndColumn%22%3A%22122%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:H,className:"text-blue-500 hover:text-blue-700 font-medium",children:"Change"})]}):x.jsxs("div",{"trae-inspector-start-line":"212","trae-inspector-start-column":"16","trae-inspector-end-line":"248","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative",children:[x.jsx("input",{"trae-inspector-start-line":"213","trae-inspector-start-column":"18","trae-inspector-end-line":"227","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Type to search (e.g. SMTH011)...",value:g,onChange:Q=>{w(Q.target.value),S(!0)},onFocus:()=>{Z.length>0&&S(!0)},className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),C&&x.jsx("div",{"trae-inspector-start-line":"230","trae-inspector-start-column":"20","trae-inspector-end-line":"246","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:Z.length===0?x.jsx("div",{"trae-inspector-start-line":"232","trae-inspector-start-column":"24","trae-inspector-end-line":"234","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"cursor-default select-none relative py-2 px-4 text-gray-500 italic",children:g?"No matching modules found":"Type to search..."}):Z.map(Q=>x.jsxs("div",{"trae-inspector-start-line":"237","trae-inspector-start-column":"26","trae-inspector-end-line":"243","trae-inspector-end-column":"32","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"cursor-pointer select-none relative py-2 px-4 hover:bg-blue-50 text-gray-900",onClick:()=>J(Q.code),children:[x.jsx("span",{"trae-inspector-start-line":"242","trae-inspector-start-column":"28","trae-inspector-end-line":"242","trae-inspector-end-column":"75","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"font-medium",children:Q.code})," - ",Q.name]},Q.moduleId))})]})]})]})}),x.jsx("div",{"trae-inspector-start-line":"254","trae-inspector-start-column":"6","trae-inspector-end-line":"323","trae-inspector-end-column":"12","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:x.jsx("div",{"trae-inspector-start-line":"255","trae-inspector-start-column":"8","trae-inspector-end-line":"322","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:x.jsxs("table",{"trae-inspector-start-line":"256","trae-inspector-start-column":"10","trae-inspector-end-line":"321","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[x.jsx("thead",{"trae-inspector-start-line":"257","trae-inspector-start-column":"12","trae-inspector-end-line":"264","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:x.jsxs("tr",{"trae-inspector-start-line":"258","trae-inspector-start-column":"14","trae-inspector-end-line":"263","trae-inspector-end-column":"19","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("th",{"trae-inspector-start-line":"259","trae-inspector-start-column":"16","trae-inspector-end-line":"259","trae-inspector-end-column":"51","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22259%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22259%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Year"}),x.jsx("th",{"trae-inspector-start-line":"260","trae-inspector-start-column":"16","trae-inspector-end-line":"260","trae-inspector-end-column":"52","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22260%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22260%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Title"}),x.jsx("th",{"trae-inspector-start-line":"261","trae-inspector-start-column":"16","trae-inspector-end-line":"261","trae-inspector-end-column":"54","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Content%22%2C%22textStartLine%22%3A%22261%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22261%22%2C%22textEndColumn%22%3A%2249%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Content"}),x.jsx("th",{"trae-inspector-start-line":"262","trae-inspector-start-column":"16","trae-inspector-end-line":"262","trae-inspector-end-column":"65","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Actions%22%2C%22textStartLine%22%3A%22262%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%22262%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3 text-right",children:"Actions"})]})}),x.jsx("tbody",{"trae-inspector-start-line":"265","trae-inspector-start-column":"12","trae-inspector-end-line":"320","trae-inspector-end-column":"20","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:I?x.jsx("tr",{"trae-inspector-start-line":"267","trae-inspector-start-column":"16","trae-inspector-end-line":"269","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsx("td",{"trae-inspector-start-line":"268","trae-inspector-start-column":"18","trae-inspector-end-line":"268","trae-inspector-end-column":"97","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22268%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22268%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):v.length===0?x.jsx("tr",{"trae-inspector-start-line":"271","trae-inspector-start-column":"16","trae-inspector-end-line":"275","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsx("td",{"trae-inspector-start-line":"272","trae-inspector-start-column":"18","trae-inspector-end-line":"274","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:h?"No assessments found":"Please select a module"})}):v.map(Q=>x.jsxs("tr",{"trae-inspector-start-line":"278","trae-inspector-start-column":"18","trae-inspector-end-line":"317","trae-inspector-end-column":"23","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[x.jsx("td",{"trae-inspector-start-line":"279","trae-inspector-start-column":"20","trae-inspector-end-line":"279","trae-inspector-end-column":"90","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-900",children:Q.year}),x.jsx("td",{"trae-inspector-start-line":"280","trae-inspector-start-column":"20","trae-inspector-end-line":"285","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:x.jsxs("div",{"trae-inspector-start-line":"281","trae-inspector-start-column":"22","trae-inspector-end-line":"284","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[x.jsx(hm,{className:"h-4 w-4 text-blue-500"}),x.jsx("span",{"trae-inspector-start-line":"283","trae-inspector-start-column":"24","trae-inspector-end-line":"283","trae-inspector-end-column":"101","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-900",children:Q.title})]})}),x.jsx("td",{"trae-inspector-start-line":"286","trae-inspector-start-column":"20","trae-inspector-end-line":"307","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:x.jsxs("div",{"trae-inspector-start-line":"287","trae-inspector-start-column":"22","trae-inspector-end-line":"306","trae-inspector-end-column":"28","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex space-x-4",children:[Q.pdfUrl&&x.jsxs("a",{"trae-inspector-start-line":"289","trae-inspector-start-column":"26","trae-inspector-end-line":"297","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",href:Q.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-red-600 hover:text-red-900 text-xs",title:"Download PDF",children:[x.jsx(hm,{className:"h-4 w-4 mr-1"})," PDF"]}),x.jsxs("button",{"trae-inspector-start-line":"299","trae-inspector-start-column":"24","trae-inspector-end-line":"305","trae-inspector-end-column":"33","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>N(Q),className:"flex items-center text-blue-600 hover:text-blue-900 text-xs",title:"Manage Questions",children:[x.jsx($6,{className:"h-4 w-4 mr-1"})," Questions"]})]})}),x.jsx("td",{"trae-inspector-start-line":"308","trae-inspector-start-column":"20","trae-inspector-end-line":"316","trae-inspector-end-column":"25","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-right space-x-2",children:x.jsx("button",{"trae-inspector-start-line":"309","trae-inspector-start-column":"22","trae-inspector-end-line":"315","trae-inspector-end-column":"31","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>le(Q),className:"text-red-600 hover:text-red-900",title:"Delete Assessment",children:x.jsx(pm,{className:"h-5 w-5"})})})]},Q.assessmentId))})]})})}),x.jsx(j0,{isOpen:R,onClose:()=>B(!1),title:`Create ${e.slice(0,-1)}`,children:x.jsxs("form",{"trae-inspector-start-line":"330","trae-inspector-start-column":"8","trae-inspector-end-line":"371","trae-inspector-end-column":"15","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:fe,className:"space-y-4",children:[x.jsxs("div",{"trae-inspector-start-line":"331","trae-inspector-start-column":"10","trae-inspector-end-line":"340","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"332","trae-inspector-start-column":"12","trae-inspector-end-line":"332","trae-inspector-end-column":"83","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Year%22%2C%22textStartLine%22%3A%22332%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22332%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Year"}),x.jsx("input",{"trae-inspector-start-line":"333","trae-inspector-start-column":"12","trae-inspector-end-line":"339","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"number",required:!0,value:$,onChange:Q=>K(parseInt(Q.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),x.jsxs("div",{"trae-inspector-start-line":"341","trae-inspector-start-column":"10","trae-inspector-end-line":"351","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"342","trae-inspector-start-column":"12","trae-inspector-end-line":"342","trae-inspector-end-column":"84","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22342%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22342%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Title"}),x.jsx("input",{"trae-inspector-start-line":"343","trae-inspector-start-column":"12","trae-inspector-end-line":"350","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:L,onChange:Q=>V(Q.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g. Final Exam, Semester Test 1"})]}),x.jsxs("div",{"trae-inspector-start-line":"352","trae-inspector-start-column":"10","trae-inspector-end-line":"361","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"353","trae-inspector-start-column":"12","trae-inspector-end-line":"353","trae-inspector-end-column":"104","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Full%20Paper%20PDF%20(Optional)%22%2C%22textStartLine%22%3A%22353%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22353%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Full Paper PDF (Optional)"}),x.jsx("p",{"trae-inspector-start-line":"354","trae-inspector-start-column":"12","trae-inspector-end-line":"354","trae-inspector-end-column":"147","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Upload%20the%20full%20paper%20if%20you%20have%20it%2C%20otherwise%20you%20can%20add%20questions%20individually%20later.%22%2C%22textStartLine%22%3A%22354%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%22354%22%2C%22textEndColumn%22%3A%22143%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xs text-gray-500 mb-1",children:"Upload the full paper if you have it, otherwise you can add questions individually later."}),x.jsx("input",{"trae-inspector-start-line":"355","trae-inspector-start-column":"12","trae-inspector-end-line":"360","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"file",accept:".pdf",onChange:Q=>me(Q.target.files?Q.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),x.jsx("div",{"trae-inspector-start-line":"362","trae-inspector-start-column":"10","trae-inspector-end-line":"370","trae-inspector-end-column":"16","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:x.jsx("button",{"trae-inspector-start-line":"363","trae-inspector-start-column":"12","trae-inspector-end-line":"369","trae-inspector-end-column":"21","trae-inspector-file-path":"src/components/AssessmentManager.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:z,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${z?"opacity-75 cursor-not-allowed":""}`,children:z?"Creating...":"Create Assessment"})})]})})]})},DQ=()=>x.jsx(iT,{type:"exam",title:"Exams"}),NQ=()=>x.jsx(iT,{type:"test",title:"Tests"}),MQ=()=>x.jsx(iT,{type:"supplementary",title:"Supplementary Exams"}),SD="users",TD=async s=>{let e;return s?e=Pa(Os(gn,SD),Ku("universityId","==",s),rd("createdAt","desc")):e=Pa(Os(gn,SD),rd("createdAt","desc"),bM(50)),(await Sp(e)).docs.map(n=>({userId:n.id,...n.data()}))},LQ=()=>{const[s,e]=q.useState([]),[t,n]=q.useState([]),[r,i]=q.useState(""),[a,u]=q.useState(!0),[d,h]=q.useState("");q.useEffect(()=>{(async()=>{try{const[v,F]=await Promise.all([Pm(),TD()]);n(v),e(F)}catch(v){console.error("Error loading data:",v)}finally{u(!1)}})()},[]),q.useEffect(()=>{(async()=>{u(!0);try{const v=await TD(r||void 0);e(v)}catch(v){console.error("Error fetching users:",v)}finally{u(!1)}})()},[r]);const f=s.filter(w=>w.name.toLowerCase().includes(d.toLowerCase())||w.email.toLowerCase().includes(d.toLowerCase())),g=w=>{const v=t.find(F=>F.universityId===w);return v?v.code:"Unknown"};return x.jsxs("div",{"trae-inspector-start-line":"58","trae-inspector-start-column":"4","trae-inspector-end-line":"167","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("h1",{"trae-inspector-start-line":"59","trae-inspector-start-column":"6","trae-inspector-end-line":"59","trae-inspector-end-column":"77","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Manage%20Users%22%2C%22textStartLine%22%3A%2259%22%2C%22textStartColumn%22%3A%2260%22%2C%22textEndLine%22%3A%2259%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900 mb-6",children:"Manage Users"}),x.jsx("div",{"trae-inspector-start-line":"61","trae-inspector-start-column":"6","trae-inspector-end-line":"94","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:x.jsxs("div",{"trae-inspector-start-line":"62","trae-inspector-start-column":"8","trae-inspector-end-line":"93","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"p-4 border-b border-gray-100 flex items-center space-x-4",children:[x.jsxs("div",{"trae-inspector-start-line":"63","trae-inspector-start-column":"10","trae-inspector-end-line":"77","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[x.jsx("label",{"trae-inspector-start-line":"64","trae-inspector-start-column":"12","trae-inspector-end-line":"64","trae-inspector-end-column":"104","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Filter%20by%20University%22%2C%22textStartLine%22%3A%2264%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2264%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by University"}),x.jsxs("select",{"trae-inspector-start-line":"65","trae-inspector-start-column":"12","trae-inspector-end-line":"76","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:r,onChange:w=>i(w.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:[x.jsx("option",{"trae-inspector-start-line":"70","trae-inspector-start-column":"14","trae-inspector-end-line":"70","trae-inspector-end-column":"56","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22All%20Universities%22%2C%22textStartLine%22%3A%2270%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%2270%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"",children:"All Universities"}),t.map(w=>x.jsxs("option",{"trae-inspector-start-line":"72","trae-inspector-start-column":"16","trae-inspector-end-line":"74","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:w.universityId,children:[w.name," (",w.code,")"]},w.universityId))]})]}),x.jsxs("div",{"trae-inspector-start-line":"78","trae-inspector-start-column":"10","trae-inspector-end-line":"92","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-1",children:[x.jsx("label",{"trae-inspector-start-line":"79","trae-inspector-start-column":"12","trae-inspector-end-line":"79","trae-inspector-end-column":"96","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Search%20Users%22%2C%22textStartLine%22%3A%2279%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2279%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Users"}),x.jsxs("div",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"91","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"relative",children:[x.jsx("div",{"trae-inspector-start-line":"81","trae-inspector-start-column":"14","trae-inspector-end-line":"83","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:x.jsx(hx,{className:"h-5 w-5 text-gray-400"})}),x.jsx("input",{"trae-inspector-start-line":"84","trae-inspector-start-column":"14","trae-inspector-end-line":"90","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",placeholder:"Search by name or email...",value:d,onChange:w=>h(w.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]})}),x.jsx("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"6","trae-inspector-end-line":"166","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm overflow-hidden",children:x.jsx("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"8","trae-inspector-end-line":"165","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"overflow-x-auto",children:x.jsxs("table",{"trae-inspector-start-line":"98","trae-inspector-start-column":"10","trae-inspector-end-line":"164","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"w-full",children:[x.jsx("thead",{"trae-inspector-start-line":"99","trae-inspector-start-column":"12","trae-inspector-end-line":"107","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:x.jsxs("tr",{"trae-inspector-start-line":"100","trae-inspector-start-column":"14","trae-inspector-end-line":"106","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("th",{"trae-inspector-start-line":"101","trae-inspector-start-column":"16","trae-inspector-end-line":"101","trae-inspector-end-column":"51","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22User%22%2C%22textStartLine%22%3A%22101%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22101%22%2C%22textEndColumn%22%3A%2246%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"User"}),x.jsx("th",{"trae-inspector-start-line":"102","trae-inspector-start-column":"16","trae-inspector-end-line":"102","trae-inspector-end-column":"57","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22University%22%2C%22textStartLine%22%3A%22102%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22102%22%2C%22textEndColumn%22%3A%2252%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"University"}),x.jsx("th",{"trae-inspector-start-line":"103","trae-inspector-start-column":"16","trae-inspector-end-line":"103","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Points%22%2C%22textStartLine%22%3A%22103%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22103%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Points"}),x.jsx("th",{"trae-inspector-start-line":"104","trae-inspector-start-column":"16","trae-inspector-end-line":"104","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Status%22%2C%22textStartLine%22%3A%22104%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22104%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Status"}),x.jsx("th",{"trae-inspector-start-line":"105","trae-inspector-start-column":"16","trae-inspector-end-line":"105","trae-inspector-end-column":"53","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Joined%22%2C%22textStartLine%22%3A%22105%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22105%22%2C%22textEndColumn%22%3A%2248%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-3",children:"Joined"})]})}),x.jsx("tbody",{"trae-inspector-start-line":"108","trae-inspector-start-column":"12","trae-inspector-end-line":"163","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"divide-y divide-gray-100",children:a?x.jsx("tr",{"trae-inspector-start-line":"110","trae-inspector-start-column":"16","trae-inspector-end-line":"112","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsx("td",{"trae-inspector-start-line":"111","trae-inspector-start-column":"18","trae-inspector-end-line":"111","trae-inspector-end-column":"97","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22111%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22111%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):f.length===0?x.jsx("tr",{"trae-inspector-start-line":"114","trae-inspector-start-column":"16","trae-inspector-end-line":"116","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:x.jsx("td",{"trae-inspector-start-line":"115","trae-inspector-start-column":"18","trae-inspector-end-line":"115","trae-inspector-end-column":"101","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20users%20found%22%2C%22textStartLine%22%3A%22115%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22115%22%2C%22textEndColumn%22%3A%2296%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):f.map(w=>x.jsxs("tr",{"trae-inspector-start-line":"119","trae-inspector-start-column":"18","trae-inspector-end-line":"160","trae-inspector-end-column":"23","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"hover:bg-gray-50",children:[x.jsx("td",{"trae-inspector-start-line":"120","trae-inspector-start-column":"20","trae-inspector-end-line":"135","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:x.jsxs("div",{"trae-inspector-start-line":"121","trae-inspector-start-column":"22","trae-inspector-end-line":"134","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center",children:[x.jsx("div",{"trae-inspector-start-line":"122","trae-inspector-start-column":"24","trae-inspector-end-line":"126","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex-shrink-0 h-10 w-10",children:x.jsx("div",{"trae-inspector-start-line":"123","trae-inspector-start-column":"26","trae-inspector-end-line":"125","trae-inspector-end-column":"32","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:x.jsx(ZD,{className:"h-6 w-6 text-blue-600"})})}),x.jsxs("div",{"trae-inspector-start-line":"127","trae-inspector-start-column":"24","trae-inspector-end-line":"133","trae-inspector-end-column":"30","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"ml-4",children:[x.jsx("div",{"trae-inspector-start-line":"128","trae-inspector-start-column":"26","trae-inspector-end-line":"128","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm font-medium text-gray-900",children:w.name}),x.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"26","trae-inspector-end-line":"132","trae-inspector-end-column":"32","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-sm text-gray-500 flex items-center",children:[x.jsx(YD,{className:"h-3 w-3 mr-1"}),w.email]})]})]})}),x.jsx("td",{"trae-inspector-start-line":"136","trae-inspector-start-column":"20","trae-inspector-end-line":"141","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:x.jsxs("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"22","trae-inspector-end-line":"140","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center text-sm text-gray-900",children:[x.jsx(Tb,{className:"h-4 w-4 mr-2 text-gray-400"}),g(w.universityId)]})}),x.jsx("td",{"trae-inspector-start-line":"142","trae-inspector-start-column":"20","trae-inspector-end-line":"147","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:x.jsxs("div",{"trae-inspector-start-line":"143","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"28","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center text-sm text-gray-900",children:[x.jsx(f6,{className:"h-4 w-4 mr-2 text-yellow-500"}),w.points]})}),x.jsx("td",{"trae-inspector-start-line":"148","trae-inspector-start-column":"20","trae-inspector-end-line":"156","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4",children:x.jsx("span",{"trae-inspector-start-line":"149","trae-inspector-start-column":"22","trae-inspector-end-line":"155","trae-inspector-end-column":"29","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w.subscriptionActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.subscriptionActive?"Premium":"Free"})}),x.jsx("td",{"trae-inspector-start-line":"157","trae-inspector-start-column":"20","trae-inspector-end-line":"159","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Users.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"px-6 py-4 text-sm text-gray-500",children:w.createdAt?new Date(w.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]},w.userId))})]})})})]})},OQ=()=>x.jsxs("div",{"trae-inspector-start-line":"6","trae-inspector-start-column":"4","trae-inspector-end-line":"20","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"space-y-6",children:[x.jsx("h1",{"trae-inspector-start-line":"7","trae-inspector-start-column":"6","trae-inspector-end-line":"7","trae-inspector-end-column":"78","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Analytics%20Overview%22%2C%22textStartLine%22%3A%227%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%227%22%2C%22textEndColumn%22%3A%2273%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Analytics Overview"}),x.jsxs("div",{"trae-inspector-start-line":"9","trae-inspector-start-column":"6","trae-inspector-end-line":"19","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[x.jsx("div",{"trae-inspector-start-line":"10","trae-inspector-start-column":"8","trae-inspector-end-line":"14","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-center mb-6",children:x.jsx("div",{"trae-inspector-start-line":"11","trae-inspector-start-column":"10","trae-inspector-end-line":"13","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-blue-100 p-4 rounded-full",children:x.jsx(XD,{className:"h-12 w-12 text-blue-600"})})}),x.jsx("h2",{"trae-inspector-start-line":"15","trae-inspector-start-column":"8","trae-inspector-end-line":"15","trae-inspector-end-column":"85","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Analytics%20Dashboard%22%2C%22textStartLine%22%3A%2215%22%2C%22textStartColumn%22%3A%2261%22%2C%22textEndLine%22%3A%2215%22%2C%22textEndColumn%22%3A%2280%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-xl font-bold text-gray-900 mb-2",children:"Analytics Dashboard"}),x.jsx("p",{"trae-inspector-start-line":"16","trae-inspector-start-column":"8","trae-inspector-end-line":"18","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Analytics.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Detailed%20usage%20statistics%20and%20engagement%20metrics%20will%20appear%20here%20once%20students%20start%20using%20the%20mobile%20application.%22%2C%22textStartLine%22%3A%2216%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%2218%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-500 max-w-md mx-auto",children:"Detailed usage statistics and engagement metrics will appear here once students start using the mobile application."})]})]}),Zx="announcements",BQ=async()=>{const s=Pa(Os(gn,Zx),rd("createdAt","desc"));return(await Sp(s)).docs.map(t=>({announcementId:t.id,...t.data()}))},jQ=async(s,e,t,n)=>(await O0(Os(gn,Zx),{title:s,message:e,universityId:t,active:n,createdAt:M0()})).id,UQ=async(s,e)=>{await Lx(Ma(gn,Zx,s),{active:e})},VQ=async s=>{await L0(Ma(gn,Zx,s))},$Q=()=>{const[s,e]=q.useState([]),[t,n]=q.useState([]),[r,i]=q.useState(!0),[a,u]=q.useState(!1),[d,h]=q.useState(!1),[f,g]=q.useState(""),[w,v]=q.useState(""),[F,C]=q.useState(""),[S,I]=q.useState(!0);q.useEffect(()=>{O()},[]);const O=async()=>{try{const[N,L]=await Promise.all([BQ(),Pm()]);e(N),n(L)}catch(N){console.error("Error fetching data:",N)}finally{i(!1)}},R=()=>{g(""),v(""),C(""),I(!0),u(!0)},B=async N=>{N.preventDefault(),h(!0);try{await jQ(f,w,F||"all",S),u(!1),O()}catch(L){console.error("Error creating announcement:",L)}finally{h(!1)}},z=async N=>{try{await UQ(N.announcementId,!N.active),O()}catch(L){console.error("Error updating status:",L)}},W=async N=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await VQ(N),O()}catch(L){console.error("Error deleting announcement:",L)}},D=N=>{if(N==="all")return"All Universities";const L=t.find(V=>V.universityId===N);return L?L.name:"Unknown"};return x.jsxs("div",{"trae-inspector-start-line":"89","trae-inspector-start-column":"4","trae-inspector-end-line":"229","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsxs("div",{"trae-inspector-start-line":"90","trae-inspector-start-column":"6","trae-inspector-end-line":"99","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex justify-between items-center mb-6",children:[x.jsx("h1",{"trae-inspector-start-line":"91","trae-inspector-start-column":"8","trae-inspector-end-line":"91","trae-inspector-end-column":"75","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Announcements%22%2C%22textStartLine%22%3A%2291%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2291%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-2xl font-bold text-gray-900",children:"Announcements"}),x.jsxs("button",{"trae-inspector-start-line":"92","trae-inspector-start-column":"8","trae-inspector-end-line":"98","trae-inspector-end-column":"17","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[x.jsx(E0,{className:"h-5 w-5"}),x.jsx("span",{"trae-inspector-start-line":"97","trae-inspector-start-column":"10","trae-inspector-end-line":"97","trae-inspector-end-column":"42","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Create%20Announcement%22%2C%22textStartLine%22%3A%2297%22%2C%22textStartColumn%22%3A%2216%22%2C%22textEndLine%22%3A%2297%22%2C%22textEndColumn%22%3A%2235%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Create Announcement"})]})]}),x.jsx("div",{"trae-inspector-start-line":"101","trae-inspector-start-column":"6","trae-inspector-end-line":"160","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"grid gap-6",children:r?x.jsx("div",{"trae-inspector-start-line":"103","trae-inspector-start-column":"10","trae-inspector-end-line":"103","trae-inspector-end-column":"75","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loading...%22%2C%22textStartLine%22%3A%22103%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22103%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center text-gray-500 py-10",children:"Loading..."}):s.length===0?x.jsx("div",{"trae-inspector-start-line":"105","trae-inspector-start-column":"10","trae-inspector-end-line":"107","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22No%20announcements%20found%22%2C%22textStartLine%22%3A%22105%22%2C%22textStartColumn%22%3A%2289%22%2C%22textEndLine%22%3A%22107%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-center text-gray-500 py-10 bg-white rounded-xl shadow-sm",children:"No announcements found"}):s.map(N=>x.jsxs("div",{"trae-inspector-start-line":"110","trae-inspector-start-column":"12","trae-inspector-end-line":"157","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-white rounded-xl shadow-sm p-6 flex justify-between items-start",children:[x.jsxs("div",{"trae-inspector-start-line":"111","trae-inspector-start-column":"14","trae-inspector-end-line":"127","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-start space-x-4",children:[x.jsx("div",{"trae-inspector-start-line":"112","trae-inspector-start-column":"16","trae-inspector-end-line":"114","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:`p-3 rounded-lg ${N.active?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-500"}`,children:x.jsx(JD,{className:"h-6 w-6"})}),x.jsxs("div",{"trae-inspector-start-line":"115","trae-inspector-start-column":"16","trae-inspector-end-line":"126","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("h3",{"trae-inspector-start-line":"116","trae-inspector-start-column":"18","trae-inspector-end-line":"116","trae-inspector-end-column":"82","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-lg font-bold text-gray-900",children:N.title}),x.jsx("p",{"trae-inspector-start-line":"117","trae-inspector-start-column":"18","trae-inspector-end-line":"117","trae-inspector-end-column":"69","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"text-gray-600 mt-1",children:N.message}),x.jsxs("div",{"trae-inspector-start-line":"118","trae-inspector-start-column":"18","trae-inspector-end-line":"125","trae-inspector-end-column":"24","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-4 mt-3 text-sm text-gray-500",children:[x.jsxs("span",{"trae-inspector-start-line":"119","trae-inspector-start-column":"20","trae-inspector-end-line":"121","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"bg-gray-100 px-2 py-1 rounded-md",children:["Target: ",D(N.universityId)]}),x.jsxs("span",{"trae-inspector-start-line":"122","trae-inspector-start-column":"20","trae-inspector-end-line":"124","trae-inspector-end-column":"27","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:["Created: ",N.createdAt?new Date(N.createdAt.seconds*1e3).toLocaleDateString():"Just now"]})]})]})]}),x.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"14","trae-inspector-end-line":"156","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center space-x-2",children:[x.jsx("button",{"trae-inspector-start-line":"130","trae-inspector-start-column":"16","trae-inspector-end-line":"149","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>z(N),className:`flex items-center space-x-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${N.active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:N.active?x.jsxs(x.Fragment,{children:[x.jsx(C6,{className:"h-4 w-4"}),x.jsx("span",{"trae-inspector-start-line":"141","trae-inspector-start-column":"22","trae-inspector-end-line":"141","trae-inspector-end-column":"41","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Active%22%2C%22textStartLine%22%3A%22141%22%2C%22textStartColumn%22%3A%2228%22%2C%22textEndLine%22%3A%22141%22%2C%22textEndColumn%22%3A%2234%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Active"})]}):x.jsxs(x.Fragment,{children:[x.jsx(S6,{className:"h-4 w-4"}),x.jsx("span",{"trae-inspector-start-line":"146","trae-inspector-start-column":"22","trae-inspector-end-line":"146","trae-inspector-end-column":"43","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Inactive%22%2C%22textStartLine%22%3A%22146%22%2C%22textStartColumn%22%3A%2228%22%2C%22textEndLine%22%3A%22146%22%2C%22textEndColumn%22%3A%2236%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:"Inactive"})]})}),x.jsx("button",{"trae-inspector-start-line":"150","trae-inspector-start-column":"16","trae-inspector-end-line":"155","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onClick:()=>W(N.announcementId),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:x.jsx(pm,{className:"h-5 w-5"})})]})]},N.announcementId))}),x.jsx(j0,{isOpen:a,onClose:()=>u(!1),title:"Create Announcement",children:x.jsxs("form",{"trae-inspector-start-line":"167","trae-inspector-start-column":"8","trae-inspector-end-line":"227","trae-inspector-end-column":"15","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",onSubmit:B,className:"space-y-4",children:[x.jsxs("div",{"trae-inspector-start-line":"168","trae-inspector-start-column":"10","trae-inspector-end-line":"178","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"169","trae-inspector-start-column":"12","trae-inspector-end-line":"169","trae-inspector-end-column":"84","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Title%22%2C%22textStartLine%22%3A%22169%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22169%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Title"}),x.jsx("input",{"trae-inspector-start-line":"170","trae-inspector-start-column":"12","trae-inspector-end-line":"177","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"text",required:!0,value:f,onChange:N=>g(N.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g. System Maintenance"})]}),x.jsxs("div",{"trae-inspector-start-line":"179","trae-inspector-start-column":"10","trae-inspector-end-line":"189","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"180","trae-inspector-start-column":"12","trae-inspector-end-line":"180","trae-inspector-end-column":"86","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Message%22%2C%22textStartLine%22%3A%22180%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22180%22%2C%22textEndColumn%22%3A%2278%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Message"}),x.jsx("textarea",{"trae-inspector-start-line":"181","trae-inspector-start-column":"12","trae-inspector-end-line":"188","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",required:!0,rows:3,value:w,onChange:N=>v(N.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter announcement details..."})]}),x.jsxs("div",{"trae-inspector-start-line":"190","trae-inspector-start-column":"10","trae-inspector-end-line":"205","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",children:[x.jsx("label",{"trae-inspector-start-line":"191","trae-inspector-start-column":"12","trae-inspector-end-line":"191","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Target%20Audience%22%2C%22textStartLine%22%3A%22191%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%22191%22%2C%22textEndColumn%22%3A%2286%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"block text-sm font-medium text-gray-700",children:"Target Audience"}),x.jsxs("select",{"trae-inspector-start-line":"192","trae-inspector-start-column":"12","trae-inspector-end-line":"204","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:F,onChange:N=>C(N.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[x.jsx("option",{"trae-inspector-start-line":"197","trae-inspector-start-column":"14","trae-inspector-end-line":"197","trae-inspector-end-column":"56","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Select%20Target...%22%2C%22textStartLine%22%3A%22197%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%22197%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"",children:"Select Target..."}),x.jsx("option",{"trae-inspector-start-line":"198","trae-inspector-start-column":"14","trae-inspector-end-line":"198","trae-inspector-end-column":"59","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22All%20Universities%22%2C%22textStartLine%22%3A%22198%22%2C%22textStartColumn%22%3A%2234%22%2C%22textEndLine%22%3A%22198%22%2C%22textEndColumn%22%3A%2250%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:"all",children:"All Universities"}),t.map(N=>x.jsx("option",{"trae-inspector-start-line":"200","trae-inspector-start-column":"16","trae-inspector-end-line":"202","trae-inspector-end-column":"25","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",value:N.universityId,children:N.name},N.universityId))]})]}),x.jsxs("div",{"trae-inspector-start-line":"206","trae-inspector-start-column":"10","trae-inspector-end-line":"217","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"flex items-center",children:[x.jsx("input",{"trae-inspector-start-line":"207","trae-inspector-start-column":"12","trae-inspector-end-line":"213","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",id:"active",type:"checkbox",checked:S,onChange:N=>I(N.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),x.jsx("label",{"trae-inspector-start-line":"214","trae-inspector-start-column":"12","trae-inspector-end-line":"216","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Set%20as%20Active%20immediately%22%2C%22textStartLine%22%3A%22214%22%2C%22textStartColumn%22%3A%2281%22%2C%22textEndLine%22%3A%22216%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Set as Active immediately"})]}),x.jsx("div",{"trae-inspector-start-line":"218","trae-inspector-start-column":"10","trae-inspector-end-line":"226","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",className:"mt-5 sm:mt-6",children:x.jsx("button",{"trae-inspector-start-line":"219","trae-inspector-start-column":"12","trae-inspector-end-line":"225","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Announcements.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2Fstudentmate-admin-panel%2Fstudentmate-admin-panel%22%7D",type:"submit",disabled:d,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm ${d?"opacity-75 cursor-not-allowed":""}`,children:d?"Creating...":"Create Announcement"})})]})})]})};function zQ(){return x.jsx(YB,{children:x.jsxs(SB,{children:[x.jsx(Xs,{path:"/login",element:x.jsx(ZH,{})}),x.jsx(Xs,{path:"/",element:x.jsx(ao,{children:x.jsx(io,{children:x.jsx(Fb,{to:"/dashboard",replace:!0})})})}),x.jsx(Xs,{path:"/dashboard",element:x.jsx(ao,{children:x.jsx(io,{children:x.jsx(nG,{})})})}),x.jsx(Xs,{path:"/universities",element:x.jsx(ao,{children:x.jsx(io,{children:x.jsx(rG,{})})})}),x.jsx(Xs,{path:"/modules",element:x.jsx(ao,{children:x.jsx(io,{children:x.jsx(oG,{})})})}),x.jsx(Xs,{path:"/exams",element:x.jsx(ao,{children:x.jsx(io,{children:x.jsx(DQ,{})})})}),x.jsx(Xs,{path:"/tests",element:x.jsx(ao,{children:x.jsx(io,{children:x.jsx(NQ,{})})})}),x.jsx(Xs,{path:"/supplementary-exams",element:x.jsx(ao,{children:x.jsx(io,{children:x.jsx(MQ,{})})})}),x.jsx(Xs,{path:"/users",element:x.jsx(ao,{children:x.jsx(io,{children:x.jsx(LQ,{})})})}),x.jsx(Xs,{path:"/analytics",element:x.jsx(ao,{children:x.jsx(io,{children:x.jsx(OQ,{})})})}),x.jsx(Xs,{path:"/announcements",element:x.jsx(ao,{children:x.jsx(io,{children:x.jsx($Q,{})})})}),x.jsx(Xs,{path:"*",element:x.jsx(Fb,{to:"/",replace:!0})})]})})}I4.createRoot(document.getElementById("root")).render(x.jsx(q.StrictMode,{children:x.jsx(zQ,{})}));
